(()=>{var e={};e.id=931,e.ids=[931],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},27790:e=>{"use strict";e.exports=require("assert")},78893:e=>{"use strict";e.exports=require("buffer")},92048:e=>{"use strict";e.exports=require("fs")},76162:e=>{"use strict";e.exports=require("stream")},21764:e=>{"use strict";e.exports=require("util")},71568:e=>{"use strict";e.exports=require("zlib")},52274:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>i.a,__next_app__:()=>u,originalPathname:()=>d,pages:()=>c,routeModule:()=>h,tree:()=>A}),r(90908),r(11506),r(35866);var n=r(23191),a=r(88716),o=r(37922),i=r.n(o),s=r(95231),l={};for(let e in s)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>s[e]);r.d(t,l);let A=["",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,90908)),"/home/elb/Downloads/banduka-pos/app/page.tsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,11506)),"/home/elb/Downloads/banduka-pos/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,35866,23)),"next/dist/client/components/not-found-error"]}],c=["/home/elb/Downloads/banduka-pos/app/page.tsx"],d="/page",u={require:r,loadChunk:()=>Promise.resolve()},h=new n.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/page",pathname:"/",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:A}})},36182:(e,t,r)=>{Promise.resolve().then(r.bind(r,26899))},34965:()=>{},63955:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,12994,23)),Promise.resolve().then(r.t.bind(r,96114,23)),Promise.resolve().then(r.t.bind(r,9727,23)),Promise.resolve().then(r.t.bind(r,79671,23)),Promise.resolve().then(r.t.bind(r,41868,23)),Promise.resolve().then(r.t.bind(r,84759,23))},26899:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>SJ});var n,a,o,i,s,l,A,c,d,u,h,f,p={};r.r(p),r.d(p,{scaleBand:()=>cu,scaleDiverging:()=>function e(){var t=dN(hK()(dA));return t.copy=function(){return hM(t,e())},ci.apply(t,arguments)},scaleDivergingLog:()=>function e(){var t=d_(hK()).domain([.1,1,10]);return t.copy=function(){return hM(t,e()).base(t.base())},ci.apply(t,arguments)},scaleDivergingPow:()=>hV,scaleDivergingSqrt:()=>hq,scaleDivergingSymlog:()=>function e(){var t=dD(hK());return t.copy=function(){return hM(t,e()).constant(t.constant())},ci.apply(t,arguments)},scaleIdentity:()=>function e(t){var r;function n(e){return null==e||isNaN(e=+e)?r:e}return n.invert=n,n.domain=n.range=function(e){return arguments.length?(t=Array.from(e,ds),n):t.slice()},n.unknown=function(e){return arguments.length?(r=e,n):r},n.copy=function(){return e(t).unknown(r)},t=arguments.length?Array.from(t,ds):[0,1],dN(n)},scaleImplicit:()=>cc,scaleLinear:()=>dS,scaleLog:()=>function e(){let t=d_(df()).domain([1,10]);return t.copy=()=>dh(t,e()).base(t.base()),co.apply(t,arguments),t},scaleOrdinal:()=>cd,scalePoint:()=>ch,scalePow:()=>dV,scaleQuantile:()=>function e(){var t,r=[],n=[],a=[];function o(){var e=0,t=Math.max(1,n.length);for(a=Array(t-1);++e<t;)a[e-1]=function(e,t,r=cj){if(!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return+r(e[0],0,e);if(t>=1)return+r(e[n-1],n-1,e);var n,a=(n-1)*t,o=Math.floor(a),i=+r(e[o],o,e);return i+(+r(e[o+1],o+1,e)-i)*(a-o)}}(r,e/t);return i}function i(e){return null==e||isNaN(e=+e)?t:n[cN(a,e)]}return i.invertExtent=function(e){var t=n.indexOf(e);return t<0?[NaN,NaN]:[t>0?a[t-1]:r[0],t<a.length?a[t]:r[r.length-1]]},i.domain=function(e){if(!arguments.length)return r.slice();for(let t of(r=[],e))null==t||isNaN(t=+t)||r.push(t);return r.sort(cv),o()},i.range=function(e){return arguments.length?(n=Array.from(e),o()):n.slice()},i.unknown=function(e){return arguments.length?(t=e,i):t},i.quantiles=function(){return a.slice()},i.copy=function(){return e().domain(r).range(n).unknown(t)},co.apply(i,arguments)},scaleQuantize:()=>function e(){var t,r=0,n=1,a=1,o=[.5],i=[0,1];function s(e){return null!=e&&e<=e?i[cN(o,e,0,a)]:t}function l(){var e=-1;for(o=Array(a);++e<a;)o[e]=((e+1)*n-(e-a)*r)/(a+1);return s}return s.domain=function(e){return arguments.length?([r,n]=e,r=+r,n=+n,l()):[r,n]},s.range=function(e){return arguments.length?(a=(i=Array.from(e)).length-1,l()):i.slice()},s.invertExtent=function(e){var t=i.indexOf(e);return t<0?[NaN,NaN]:t<1?[r,o[0]]:t>=a?[o[a-1],n]:[o[t-1],o[t]]},s.unknown=function(e){return arguments.length&&(t=e),s},s.thresholds=function(){return o.slice()},s.copy=function(){return e().domain([r,n]).range(i).unknown(t)},co.apply(dN(s),arguments)},scaleRadial:()=>function e(){var t,r=dp(),n=[0,1],a=!1;function o(e){var n,o=Math.sign(n=r(e))*Math.sqrt(Math.abs(n));return isNaN(o)?t:a?Math.round(o):o}return o.invert=function(e){return r.invert(dG(e))},o.domain=function(e){return arguments.length?(r.domain(e),o):r.domain()},o.range=function(e){return arguments.length?(r.range((n=Array.from(e,ds)).map(dG)),o):n.slice()},o.rangeRound=function(e){return o.range(e).round(!0)},o.round=function(e){return arguments.length?(a=!!e,o):a},o.clamp=function(e){return arguments.length?(r.clamp(e),o):r.clamp()},o.unknown=function(e){return arguments.length?(t=e,o):t},o.copy=function(){return e(r.domain(),n).round(a).clamp(r.clamp()).unknown(t)},co.apply(o,arguments),dN(o)},scaleSequential:()=>function e(){var t=dN(hD()(dA));return t.copy=function(){return hM(t,e())},ci.apply(t,arguments)},scaleSequentialLog:()=>function e(){var t=d_(hD()).domain([1,10]);return t.copy=function(){return hM(t,e()).base(t.base())},ci.apply(t,arguments)},scaleSequentialPow:()=>hH,scaleSequentialQuantile:()=>function e(){var t=[],r=dA;function n(e){if(null!=e&&!isNaN(e=+e))return r((cN(t,e,1)-1)/(t.length-1))}return n.domain=function(e){if(!arguments.length)return t.slice();for(let r of(t=[],e))null==r||isNaN(r=+r)||t.push(r);return t.sort(cv),n},n.interpolator=function(e){return arguments.length?(r=e,n):r},n.range=function(){return t.map((e,n)=>r(n/(t.length-1)))},n.quantiles=function(e){return Array.from({length:e+1},(r,n)=>(function(e,t,r){if(!(!(n=(e=Float64Array.from(function*(e,t){if(void 0===t)for(let t of e)null!=t&&(t=+t)>=t&&(yield t);else{let r=-1;for(let n of e)null!=(n=t(n,++r,e))&&(n=+n)>=n&&(yield n)}}(e,void 0))).length)||isNaN(t=+t))){if(t<=0||n<2)return dW(e);if(t>=1)return dz(e);var n,a=(n-1)*t,o=Math.floor(a),i=dz((function e(t,r,n=0,a=1/0,o){if(r=Math.floor(r),n=Math.floor(Math.max(0,n)),a=Math.floor(Math.min(t.length-1,a)),!(n<=r&&r<=a))return t;for(o=void 0===o?d$:function(e=cv){if(e===cv)return d$;if("function"!=typeof e)throw TypeError("compare is not a function");return(t,r)=>{let n=e(t,r);return n||0===n?n:(0===e(r,r))-(0===e(t,t))}}(o);a>n;){if(a-n>600){let i=a-n+1,s=r-n+1,l=Math.log(i),A=.5*Math.exp(2*l/3),c=.5*Math.sqrt(l*A*(i-A)/i)*(s-i/2<0?-1:1),d=Math.max(n,Math.floor(r-s*A/i+c)),u=Math.min(a,Math.floor(r+(i-s)*A/i+c));e(t,r,d,u,o)}let i=t[r],s=n,l=a;for(dX(t,n,r),o(t[a],i)>0&&dX(t,n,a);s<l;){for(dX(t,s,l),++s,--l;0>o(t[s],i);)++s;for(;o(t[l],i)>0;)--l}0===o(t[n],i)?dX(t,n,l):dX(t,++l,a),l<=r&&(n=l+1),r<=l&&(a=l-1)}return t})(e,o).subarray(0,o+1));return i+(dW(e.subarray(o+1))-i)*(a-o)}})(t,n/e))},n.copy=function(){return e(r).domain(t)},ci.apply(n,arguments)},scaleSequentialSqrt:()=>hR,scaleSequentialSymlog:()=>function e(){var t=dD(hD());return t.copy=function(){return hM(t,e()).constant(t.constant())},ci.apply(t,arguments)},scaleSqrt:()=>dq,scaleSymlog:()=>function e(){var t=dD(df());return t.copy=function(){return dh(t,e()).constant(t.constant())},co.apply(t,arguments)},scaleThreshold:()=>function e(){var t,r=[.5],n=[0,1],a=1;function o(e){return null!=e&&e<=e?n[cN(r,e,0,a)]:t}return o.domain=function(e){return arguments.length?(a=Math.min((r=Array.from(e)).length,n.length-1),o):r.slice()},o.range=function(e){return arguments.length?(n=Array.from(e),a=Math.min(r.length,n.length-1),o):n.slice()},o.invertExtent=function(e){var t=n.indexOf(e);return[r[t-1],r[t]]},o.unknown=function(e){return arguments.length?(t=e,o):t},o.copy=function(){return e().domain(r).range(n).unknown(t)},co.apply(o,arguments)},scaleTime:()=>hQ,scaleUtc:()=>hT,tickFormat:()=>dC});var m=r(10326),g=r(17577),x=r.n(g);let b="undefined"!=typeof document,y=b?g.useLayoutEffect:g.useEffect;function v(){let e=(0,g.useRef)(!1);return y(()=>(e.current=!0,()=>{e.current=!1}),[]),e}let w=e=>e;class k{constructor(){this.order=[],this.scheduled=new Set}add(e){if(!this.scheduled.has(e))return this.scheduled.add(e),this.order.push(e),!0}remove(e){let t=this.order.indexOf(e);-1!==t&&(this.order.splice(t,1),this.scheduled.delete(e))}clear(){this.order.length=0,this.scheduled.clear()}}let B=["prepare","read","update","preRender","render","postRender"],{schedule:j,cancel:C,state:N,steps:S}=function(e,t){let r=!1,n=!0,a={delta:0,timestamp:0,isProcessing:!1},o=B.reduce((e,t)=>(e[t]=function(e){let t=new k,r=new k,n=0,a=!1,o=!1,i=new WeakSet,s={schedule:(e,o=!1,s=!1)=>{let l=s&&a,A=l?t:r;return o&&i.add(e),A.add(e)&&l&&a&&(n=t.order.length),e},cancel:e=>{r.remove(e),i.delete(e)},process:l=>{if(a){o=!0;return}if(a=!0,[t,r]=[r,t],r.clear(),n=t.order.length)for(let r=0;r<n;r++){let n=t.order[r];n(l),i.has(n)&&(s.schedule(n),e())}a=!1,o&&(o=!1,s.process(l))}};return s}(()=>r=!0),e),{}),i=e=>o[e].process(a),s=()=>{let o=performance.now();r=!1,a.delta=n?1e3/60:Math.max(Math.min(o-a.timestamp,40),1),a.timestamp=o,a.isProcessing=!0,B.forEach(i),a.isProcessing=!1,r&&t&&(n=!1,e(s))},l=()=>{r=!0,n=!0,a.isProcessing||e(s)};return{schedule:B.reduce((e,t)=>{let n=o[t];return e[t]=(e,t=!1,a=!1)=>(r||l(),n.schedule(e,t,a)),e},{}),cancel:e=>B.forEach(t=>o[t].cancel(e)),state:a,steps:o}}("undefined"!=typeof requestAnimationFrame?requestAnimationFrame:w,!0),F=(0,g.createContext)(null);function E(e){let t=(0,g.useRef)(null);return null===t.current&&(t.current=e()),t.current}class O extends g.Component{getSnapshotBeforeUpdate(e){let t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){let e=this.props.sizeRef.current;e.height=t.offsetHeight||0,e.width=t.offsetWidth||0,e.top=t.offsetTop,e.left=t.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function P({children:e,isPresent:t}){let r=(0,g.useId)(),n=(0,g.useRef)(null),a=(0,g.useRef)({width:0,height:0,top:0,left:0});return(0,g.useInsertionEffect)(()=>{let{width:e,height:o,top:i,left:s}=a.current;if(t||!n.current||!e||!o)return;n.current.dataset.motionPopId=r;let l=document.createElement("style");return document.head.appendChild(l),l.sheet&&l.sheet.insertRule(`
          [data-motion-pop-id="${r}"] {
            position: absolute !important;
            width: ${e}px !important;
            height: ${o}px !important;
            top: ${i}px !important;
            left: ${s}px !important;
          }
        `),()=>{document.head.removeChild(l)}},[t]),g.createElement(O,{isPresent:t,childRef:n,sizeRef:a},g.cloneElement(e,{ref:n}))}let I=({children:e,initial:t,isPresent:r,onExitComplete:n,custom:a,presenceAffectsLayout:o,mode:i})=>{let s=E(U),l=(0,g.useId)(),A=(0,g.useMemo)(()=>({id:l,initial:t,isPresent:r,custom:a,onExitComplete:e=>{for(let t of(s.set(e,!0),s.values()))if(!t)return;n&&n()},register:e=>(s.set(e,!1),()=>s.delete(e))}),o?void 0:[r]);return(0,g.useMemo)(()=>{s.forEach((e,t)=>s.set(t,!1))},[r]),g.useEffect(()=>{r||s.size||!n||n()},[r]),"popLayout"===i&&(e=g.createElement(P,{isPresent:r},e)),g.createElement(F.Provider,{value:A},e)};function U(){return new Map}let L=(0,g.createContext)({}),_=e=>e.key||"",Q=({children:e,custom:t,initial:r=!0,onExitComplete:n,exitBeforeEnter:a,presenceAffectsLayout:o=!0,mode:i="sync"})=>{var s;w(!a,"Replace exitBeforeEnter with mode='wait'");let l=(0,g.useContext)(L).forceRender||function(){let e=v(),[t,r]=(0,g.useState)(0),n=(0,g.useCallback)(()=>{e.current&&r(t+1)},[t]);return[(0,g.useCallback)(()=>j.postRender(n),[n]),t]}()[0],A=v(),c=function(e){let t=[];return g.Children.forEach(e,e=>{(0,g.isValidElement)(e)&&t.push(e)}),t}(e),d=c,u=(0,g.useRef)(new Map).current,h=(0,g.useRef)(d),f=(0,g.useRef)(new Map).current,p=(0,g.useRef)(!0);if(y(()=>{p.current=!1,function(e,t){e.forEach(e=>{let r=_(e);t.set(r,e)})}(c,f),h.current=d}),s=()=>{p.current=!0,f.clear(),u.clear()},(0,g.useEffect)(()=>()=>s(),[]),p.current)return g.createElement(g.Fragment,null,d.map(e=>g.createElement(I,{key:_(e),isPresent:!0,initial:!!r&&void 0,presenceAffectsLayout:o,mode:i},e)));d=[...d];let m=h.current.map(_),x=c.map(_),b=m.length;for(let e=0;e<b;e++){let t=m[e];-1!==x.indexOf(t)||u.has(t)||u.set(t,void 0)}return"wait"===i&&u.size&&(d=[]),u.forEach((e,r)=>{if(-1!==x.indexOf(r))return;let a=f.get(r);if(!a)return;let s=m.indexOf(r),p=e;p||(p=g.createElement(I,{key:_(a),isPresent:!1,onExitComplete:()=>{u.delete(r);let e=Array.from(f.keys()).filter(e=>!x.includes(e));if(e.forEach(e=>f.delete(e)),h.current=c.filter(t=>{let n=_(t);return n===r||e.includes(n)}),!u.size){if(!1===A.current)return;l(),n&&n()}},custom:t,presenceAffectsLayout:o,mode:i},a),u.set(r,p)),d.splice(s,0,p)}),d=d.map(e=>{let t=e.key;return u.has(t)?e:g.createElement(I,{key:_(e),isPresent:!0,presenceAffectsLayout:o,mode:i},e)}),g.createElement(g.Fragment,null,u.size?d:d.map(e=>(0,g.cloneElement)(e)))},T="BandukaPOS-DB",D=["products","customers","sales","suppliers","purchaseOrders","supplierInvoices","quotations","users","settings","auditLogs","shifts","cart","orderQueue","timeClockEvents","payouts","layaways","workOrders","salesOrders","heldReceipts","supplierPayments","chartOfAccounts","accountingTransactions","bankDeposits","workOrderMaterials","workOrderPayments"],M=null,H=null;function R(e){return new Promise((t,r)=>{e.onsuccess=()=>t(e.result),e.onerror=()=>r(e.error)})}function K(){return M?Promise.resolve(M):H||(console.log("[DB] Initializing IndexedDB..."),H=new Promise((e,t)=>{let r=indexedDB.open(T,14);r.onupgradeneeded=e=>{let t=e.target.result;console.log("[DB] Upgrading to version 14."),D.forEach(e=>{t.objectStoreNames.contains(e)||(t.createObjectStore(e,{keyPath:"id"}),console.log(`[DB] Created '${e}' store.`))})},r.onsuccess=()=>{M=r.result,console.log("[DB] Database opened successfully."),M.onclose=()=>{console.warn("[DB] Database connection closed."),M=null,H=null},e(M)},r.onerror=()=>{console.error("[DB] Database error:",r.error),H=null,t(r.error)}}))}async function V(e,t){return(await K()).transaction(e,t).objectStore(e)}async function q(e){return R((await V(e,"readonly")).getAll())}async function G(e,t){return R((await V(e,"readonly")).get(t))}async function z(e,t){return R((await V(e,"readwrite")).put(t))}async function W(e,t){let r=await V(e,"readwrite");await R(r.delete(t))}async function $(){try{M&&(M.close(),M=null,H=null),await R(indexedDB.deleteDatabase(T))}catch(e){throw console.error("Error wiping the database:",e),Error("Failed to wipe database. Please clear your browser's site data manually.")}}let X=(0,g.createContext)({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"}),Y=(0,g.createContext)({}),J=(0,g.createContext)({strict:!1}),Z=e=>e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),ee="data-"+Z("framerAppearId");function et(e){return e&&"object"==typeof e&&Object.prototype.hasOwnProperty.call(e,"current")}function er(e){return"string"==typeof e||Array.isArray(e)}function en(e){return null!==e&&"object"==typeof e&&"function"==typeof e.start}let ea=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],eo=["initial",...ea];function ei(e){return en(e.animate)||eo.some(t=>er(e[t]))}function es(e){return!!(ei(e)||e.variants)}function el(e){return Array.isArray(e)?e.join(" "):e}let eA={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},ec={};for(let e in eA)ec[e]={isEnabled:t=>eA[e].some(e=>!!t[e])};let ed=(0,g.createContext)({}),eu=Symbol.for("motionComponentSymbol"),eh=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function ef(e){if("string"!=typeof e||e.includes("-"));else if(eh.indexOf(e)>-1||/[A-Z]/.test(e))return!0;return!1}let ep={},em=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],eg=new Set(em);function ex(e,{layout:t,layoutId:r}){return eg.has(e)||e.startsWith("origin")||(t||void 0!==r)&&(!!ep[e]||"opacity"===e)}let eb=e=>!!(e&&e.getVelocity),ey={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},ev=em.length,ew=e=>t=>"string"==typeof t&&t.startsWith(e),ek=ew("--"),eB=ew("var(--"),ej=(e,t)=>t&&"number"==typeof e?t.transform(e):e,eC=(e,t,r)=>Math.min(Math.max(r,e),t),eN={test:e=>"number"==typeof e,parse:parseFloat,transform:e=>e},eS={...eN,transform:e=>eC(0,1,e)},eF={...eN,default:1},eE=e=>Math.round(1e5*e)/1e5,eO=/(-)?([\d]*\.?[\d])+/g,eP=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,eI=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function eU(e){return"string"==typeof e}let eL=e=>({test:t=>eU(t)&&t.endsWith(e)&&1===t.split(" ").length,parse:parseFloat,transform:t=>`${t}${e}`}),e_=eL("deg"),eQ=eL("%"),eT=eL("px"),eD=eL("vh"),eM=eL("vw"),eH={...eQ,parse:e=>eQ.parse(e)/100,transform:e=>eQ.transform(100*e)},eR={...eN,transform:Math.round},eK={borderWidth:eT,borderTopWidth:eT,borderRightWidth:eT,borderBottomWidth:eT,borderLeftWidth:eT,borderRadius:eT,radius:eT,borderTopLeftRadius:eT,borderTopRightRadius:eT,borderBottomRightRadius:eT,borderBottomLeftRadius:eT,width:eT,maxWidth:eT,height:eT,maxHeight:eT,size:eT,top:eT,right:eT,bottom:eT,left:eT,padding:eT,paddingTop:eT,paddingRight:eT,paddingBottom:eT,paddingLeft:eT,margin:eT,marginTop:eT,marginRight:eT,marginBottom:eT,marginLeft:eT,rotate:e_,rotateX:e_,rotateY:e_,rotateZ:e_,scale:eF,scaleX:eF,scaleY:eF,scaleZ:eF,skew:e_,skewX:e_,skewY:e_,distance:eT,translateX:eT,translateY:eT,translateZ:eT,x:eT,y:eT,z:eT,perspective:eT,transformPerspective:eT,opacity:eS,originX:eH,originY:eH,originZ:eT,zIndex:eR,fillOpacity:eS,strokeOpacity:eS,numOctaves:eR};function eV(e,t,r,n){let{style:a,vars:o,transform:i,transformOrigin:s}=e,l=!1,A=!1,c=!0;for(let e in t){let r=t[e];if(ek(e)){o[e]=r;continue}let n=eK[e],d=ej(r,n);if(eg.has(e)){if(l=!0,i[e]=d,!c)continue;r!==(n.default||0)&&(c=!1)}else e.startsWith("origin")?(A=!0,s[e]=d):a[e]=d}if(!t.transform&&(l||n?a.transform=function(e,{enableHardwareAcceleration:t=!0,allowTransformNone:r=!0},n,a){let o="";for(let t=0;t<ev;t++){let r=em[t];if(void 0!==e[r]){let t=ey[r]||r;o+=`${t}(${e[r]}) `}}return t&&!e.z&&(o+="translateZ(0)"),o=o.trim(),a?o=a(e,n?"":o):r&&n&&(o="none"),o}(e.transform,r,c,n):a.transform&&(a.transform="none")),A){let{originX:e="50%",originY:t="50%",originZ:r=0}=s;a.transformOrigin=`${e} ${t} ${r}`}}let eq=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function eG(e,t,r){for(let n in t)eb(t[n])||ex(n,r)||(e[n]=t[n])}let ez=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function eW(e){return e.startsWith("while")||e.startsWith("drag")&&"draggable"!==e||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||ez.has(e)}let e$=e=>!eW(e);try{!function(e){e&&(e$=t=>t.startsWith("on")?!eW(t):e(t))}(require("@emotion/is-prop-valid").default)}catch(e){}function eX(e,t,r){return"string"==typeof e?e:eT.transform(t+r*e)}let eY={offset:"stroke-dashoffset",array:"stroke-dasharray"},eJ={offset:"strokeDashoffset",array:"strokeDasharray"};function eZ(e,{attrX:t,attrY:r,attrScale:n,originX:a,originY:o,pathLength:i,pathSpacing:s=1,pathOffset:l=0,...A},c,d,u){if(eV(e,A,c,u),d){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};let{attrs:h,style:f,dimensions:p}=e;h.transform&&(p&&(f.transform=h.transform),delete h.transform),p&&(void 0!==a||void 0!==o||f.transform)&&(f.transformOrigin=function(e,t,r){let n=eX(t,e.x,e.width),a=eX(r,e.y,e.height);return`${n} ${a}`}(p,void 0!==a?a:.5,void 0!==o?o:.5)),void 0!==t&&(h.x=t),void 0!==r&&(h.y=r),void 0!==n&&(h.scale=n),void 0!==i&&function(e,t,r=1,n=0,a=!0){e.pathLength=1;let o=a?eY:eJ;e[o.offset]=eT.transform(-n);let i=eT.transform(t),s=eT.transform(r);e[o.array]=`${i} ${s}`}(h,i,s,l,!1)}let e0=()=>({...eq(),attrs:{}}),e1=e=>"string"==typeof e&&"svg"===e.toLowerCase();function e2(e,{style:t,vars:r},n,a){for(let o in Object.assign(e.style,t,a&&a.getProjectionStyles(n)),r)e.style.setProperty(o,r[o])}let e5=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function e4(e,t,r,n){for(let r in e2(e,t,void 0,n),t.attrs)e.setAttribute(e5.has(r)?r:Z(r),t.attrs[r])}function e3(e,t){let{style:r}=e,n={};for(let a in r)(eb(r[a])||t.style&&eb(t.style[a])||ex(a,e))&&(n[a]=r[a]);return n}function e6(e,t){let r=e3(e,t);for(let n in e)(eb(e[n])||eb(t[n]))&&(r[-1!==em.indexOf(n)?"attr"+n.charAt(0).toUpperCase()+n.substring(1):n]=e[n]);return r}function e8(e,t,r,n={},a={}){return"function"==typeof t&&(t=t(void 0!==r?r:e.custom,n,a)),"string"==typeof t&&(t=e.variants&&e.variants[t]),"function"==typeof t&&(t=t(void 0!==r?r:e.custom,n,a)),t}let e7=e=>Array.isArray(e),e9=e=>!!(e&&"object"==typeof e&&e.mix&&e.toValue),te=e=>e7(e)?e[e.length-1]||0:e;function tt(e){let t=eb(e)?e.get():e;return e9(t)?t.toValue():t}let tr=e=>(t,r)=>{let n=(0,g.useContext)(Y),a=(0,g.useContext)(F),o=()=>(function({scrapeMotionValuesFromProps:e,createRenderState:t,onMount:r},n,a,o){let i={latestValues:function(e,t,r,n){let a={},o=n(e,{});for(let e in o)a[e]=tt(o[e]);let{initial:i,animate:s}=e,l=ei(e),A=es(e);t&&A&&!l&&!1!==e.inherit&&(void 0===i&&(i=t.initial),void 0===s&&(s=t.animate));let c=!!r&&!1===r.initial,d=(c=c||!1===i)?s:i;return d&&"boolean"!=typeof d&&!en(d)&&(Array.isArray(d)?d:[d]).forEach(t=>{let r=e8(e,t);if(!r)return;let{transitionEnd:n,transition:o,...i}=r;for(let e in i){let t=i[e];if(Array.isArray(t)){let e=c?t.length-1:0;t=t[e]}null!==t&&(a[e]=t)}for(let e in n)a[e]=n[e]}),a}(n,a,o,e),renderState:t()};return r&&(i.mount=e=>r(n,e,i)),i})(e,t,n,a);return r?o():E(o)},tn={useVisualState:tr({scrapeMotionValuesFromProps:e6,createRenderState:e0,onMount:(e,t,{renderState:r,latestValues:n})=>{j.read(()=>{try{r.dimensions="function"==typeof t.getBBox?t.getBBox():t.getBoundingClientRect()}catch(e){r.dimensions={x:0,y:0,width:0,height:0}}}),j.render(()=>{eZ(r,n,{enableHardwareAcceleration:!1},e1(t.tagName),e.transformTemplate),e4(t,r)})}})},ta={useVisualState:tr({scrapeMotionValuesFromProps:e3,createRenderState:eq})};function to(e,t,r,n={passive:!0}){return e.addEventListener(t,r,n),()=>e.removeEventListener(t,r)}let ti=e=>"mouse"===e.pointerType?"number"!=typeof e.button||e.button<=0:!1!==e.isPrimary;function ts(e,t="page"){return{point:{x:e[t+"X"],y:e[t+"Y"]}}}let tl=e=>t=>ti(t)&&e(t,ts(t));function tA(e,t,r,n){return to(e,t,tl(r),n)}let tc=(e,t)=>r=>t(e(r)),td=(...e)=>e.reduce(tc);function tu(e){let t=null;return()=>null===t&&(t=e,()=>{t=null})}let th=tu("dragHorizontal"),tf=tu("dragVertical");function tp(e){let t=!1;if("y"===e)t=tf();else if("x"===e)t=th();else{let e=th(),r=tf();e&&r?t=()=>{e(),r()}:(e&&e(),r&&r())}return t}function tm(){let e=tp(!0);return!e||(e(),!1)}class tg{constructor(e){this.isMounted=!1,this.node=e}update(){}}function tx(e,t){let r="onHover"+(t?"Start":"End");return tA(e.current,"pointer"+(t?"enter":"leave"),(n,a)=>{if("touch"===n.pointerType||tm())return;let o=e.getProps();e.animationState&&o.whileHover&&e.animationState.setActive("whileHover",t),o[r]&&j.update(()=>o[r](n,a))},{passive:!e.getProps()[r]})}class tb extends tg{mount(){this.unmount=td(tx(this.node,!0),tx(this.node,!1))}unmount(){}}class ty extends tg{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch(t){e=!0}e&&this.node.animationState&&(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){this.isActive&&this.node.animationState&&(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=td(to(this.node.current,"focus",()=>this.onFocus()),to(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}let tv=(e,t)=>!!t&&(e===t||tv(e,t.parentElement));function tw(e,t){if(!t)return;let r=new PointerEvent("pointer"+e);t(r,ts(r))}class tk extends tg{constructor(){super(...arguments),this.removeStartListeners=w,this.removeEndListeners=w,this.removeAccessibleListeners=w,this.startPointerPress=(e,t)=>{if(this.isPressing)return;this.removeEndListeners();let r=this.node.getProps(),n=tA(window,"pointerup",(e,t)=>{if(!this.checkPressEnd())return;let{onTap:r,onTapCancel:n,globalTapTarget:a}=this.node.getProps();j.update(()=>{a||tv(this.node.current,e.target)?r&&r(e,t):n&&n(e,t)})},{passive:!(r.onTap||r.onPointerUp)}),a=tA(window,"pointercancel",(e,t)=>this.cancelPress(e,t),{passive:!(r.onTapCancel||r.onPointerCancel)});this.removeEndListeners=td(n,a),this.startPress(e,t)},this.startAccessiblePress=()=>{let e=to(this.node.current,"keydown",e=>{"Enter"!==e.key||this.isPressing||(this.removeEndListeners(),this.removeEndListeners=to(this.node.current,"keyup",e=>{"Enter"===e.key&&this.checkPressEnd()&&tw("up",(e,t)=>{let{onTap:r}=this.node.getProps();r&&j.update(()=>r(e,t))})}),tw("down",(e,t)=>{this.startPress(e,t)}))}),t=to(this.node.current,"blur",()=>{this.isPressing&&tw("cancel",(e,t)=>this.cancelPress(e,t))});this.removeAccessibleListeners=td(e,t)}}startPress(e,t){this.isPressing=!0;let{onTapStart:r,whileTap:n}=this.node.getProps();n&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),r&&j.update(()=>r(e,t))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!tm()}cancelPress(e,t){if(!this.checkPressEnd())return;let{onTapCancel:r}=this.node.getProps();r&&j.update(()=>r(e,t))}mount(){let e=this.node.getProps(),t=tA(e.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(e.onTapStart||e.onPointerStart)}),r=to(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=td(t,r)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}let tB=new WeakMap,tj=new WeakMap,tC=e=>{let t=tB.get(e.target);t&&t(e)},tN=e=>{e.forEach(tC)},tS={some:0,all:1};class tF extends tg{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();let{viewport:e={}}=this.node.getProps(),{root:t,margin:r,amount:n="some",once:a}=e,o={root:t?t.current:void 0,rootMargin:r,threshold:"number"==typeof n?n:tS[n]};return function(e,t,r){let n=function({root:e,...t}){let r=e||document;tj.has(r)||tj.set(r,{});let n=tj.get(r),a=JSON.stringify(t);return n[a]||(n[a]=new IntersectionObserver(tN,{root:e,...t})),n[a]}(t);return tB.set(e,r),n.observe(e),()=>{tB.delete(e),n.unobserve(e)}}(this.node.current,o,e=>{let{isIntersecting:t}=e;if(this.isInView===t||(this.isInView=t,a&&!t&&this.hasEnteredView))return;t&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",t);let{onViewportEnter:r,onViewportLeave:n}=this.node.getProps(),o=t?r:n;o&&o(e)})}mount(){this.startObserver()}update(){if("undefined"==typeof IntersectionObserver)return;let{props:e,prevProps:t}=this.node;["amount","margin","root"].some(function({viewport:e={}},{viewport:t={}}={}){return r=>e[r]!==t[r]}(e,t))&&this.startObserver()}unmount(){}}function tE(e,t){if(!Array.isArray(t))return!1;let r=t.length;if(r!==e.length)return!1;for(let n=0;n<r;n++)if(t[n]!==e[n])return!1;return!0}function tO(e,t,r){let n=e.getProps();return e8(n,t,void 0!==r?r:n.custom,function(e){let t={};return e.values.forEach((e,r)=>t[r]=e.get()),t}(e),function(e){let t={};return e.values.forEach((e,r)=>t[r]=e.getVelocity()),t}(e))}let tP=e=>1e3*e,tI=e=>e/1e3,tU={current:!1},tL=e=>Array.isArray(e)&&"number"==typeof e[0],t_=([e,t,r,n])=>`cubic-bezier(${e}, ${t}, ${r}, ${n})`,tQ={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:t_([0,.65,.55,1]),circOut:t_([.55,0,1,.45]),backIn:t_([.31,.01,.66,-.59]),backOut:t_([.33,1.53,.69,.99])},tT=(e,t,r)=>(((1-3*r+3*t)*e+(3*r-6*t))*e+3*t)*e;function tD(e,t,r,n){if(e===t&&r===n)return w;let a=t=>(function(e,t,r,n,a){let o,i;let s=0;do(o=tT(i=t+(r-t)/2,n,a)-e)>0?r=i:t=i;while(Math.abs(o)>1e-7&&++s<12);return i})(t,0,1,e,r);return e=>0===e||1===e?e:tT(a(e),t,n)}let tM=tD(.42,0,1,1),tH=tD(0,0,.58,1),tR=tD(.42,0,.58,1),tK=e=>Array.isArray(e)&&"number"!=typeof e[0],tV=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,tq=e=>t=>1-e(1-t),tG=e=>1-Math.sin(Math.acos(e)),tz=tq(tG),tW=tV(tG),t$=tD(.33,1.53,.69,.99),tX=tq(t$),tY=tV(tX),tJ={linear:w,easeIn:tM,easeInOut:tR,easeOut:tH,circIn:tG,circInOut:tW,circOut:tz,backIn:tX,backInOut:tY,backOut:t$,anticipate:e=>(e*=2)<1?.5*tX(e):.5*(2-Math.pow(2,-10*(e-1)))},tZ=e=>{if(Array.isArray(e)){w(4===e.length,"Cubic bezier arrays must contain four numerical values.");let[t,r,n,a]=e;return tD(t,r,n,a)}return"string"==typeof e?(w(void 0!==tJ[e],`Invalid easing type '${e}'`),tJ[e]):e},t0=(e,t)=>r=>!!(eU(r)&&eI.test(r)&&r.startsWith(e)||t&&Object.prototype.hasOwnProperty.call(r,t)),t1=(e,t,r)=>n=>{if(!eU(n))return n;let[a,o,i,s]=n.match(eO);return{[e]:parseFloat(a),[t]:parseFloat(o),[r]:parseFloat(i),alpha:void 0!==s?parseFloat(s):1}},t2=e=>eC(0,255,e),t5={...eN,transform:e=>Math.round(t2(e))},t4={test:t0("rgb","red"),parse:t1("red","green","blue"),transform:({red:e,green:t,blue:r,alpha:n=1})=>"rgba("+t5.transform(e)+", "+t5.transform(t)+", "+t5.transform(r)+", "+eE(eS.transform(n))+")"},t3={test:t0("#"),parse:function(e){let t="",r="",n="",a="";return e.length>5?(t=e.substring(1,3),r=e.substring(3,5),n=e.substring(5,7),a=e.substring(7,9)):(t=e.substring(1,2),r=e.substring(2,3),n=e.substring(3,4),a=e.substring(4,5),t+=t,r+=r,n+=n,a+=a),{red:parseInt(t,16),green:parseInt(r,16),blue:parseInt(n,16),alpha:a?parseInt(a,16)/255:1}},transform:t4.transform},t6={test:t0("hsl","hue"),parse:t1("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:r,alpha:n=1})=>"hsla("+Math.round(e)+", "+eQ.transform(eE(t))+", "+eQ.transform(eE(r))+", "+eE(eS.transform(n))+")"},t8={test:e=>t4.test(e)||t3.test(e)||t6.test(e),parse:e=>t4.test(e)?t4.parse(e):t6.test(e)?t6.parse(e):t3.parse(e),transform:e=>eU(e)?e:e.hasOwnProperty("red")?t4.transform(e):t6.transform(e)},t7=(e,t,r)=>-r*e+r*t+e;function t9(e,t,r){return(r<0&&(r+=1),r>1&&(r-=1),r<1/6)?e+(t-e)*6*r:r<.5?t:r<2/3?e+(t-e)*(2/3-r)*6:e}let re=(e,t,r)=>{let n=e*e;return Math.sqrt(Math.max(0,r*(t*t-n)+n))},rt=[t3,t4,t6],rr=e=>rt.find(t=>t.test(e));function rn(e){let t=rr(e);w(!!t,`'${e}' is not an animatable color. Use the equivalent color code instead.`);let r=t.parse(e);return t===t6&&(r=function({hue:e,saturation:t,lightness:r,alpha:n}){e/=360,r/=100;let a=0,o=0,i=0;if(t/=100){let n=r<.5?r*(1+t):r+t-r*t,s=2*r-n;a=t9(s,n,e+1/3),o=t9(s,n,e),i=t9(s,n,e-1/3)}else a=o=i=r;return{red:Math.round(255*a),green:Math.round(255*o),blue:Math.round(255*i),alpha:n}}(r)),r}let ra=(e,t)=>{let r=rn(e),n=rn(t),a={...r};return e=>(a.red=re(r.red,n.red,e),a.green=re(r.green,n.green,e),a.blue=re(r.blue,n.blue,e),a.alpha=t7(r.alpha,n.alpha,e),t4.transform(a))},ro={regex:/var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)/g,countKey:"Vars",token:"${v}",parse:w},ri={regex:eP,countKey:"Colors",token:"${c}",parse:t8.parse},rs={regex:eO,countKey:"Numbers",token:"${n}",parse:eN.parse};function rl(e,{regex:t,countKey:r,token:n,parse:a}){let o=e.tokenised.match(t);o&&(e["num"+r]=o.length,e.tokenised=e.tokenised.replace(t,n),e.values.push(...o.map(a)))}function rA(e){let t=e.toString(),r={value:t,tokenised:t,values:[],numVars:0,numColors:0,numNumbers:0};return r.value.includes("var(--")&&rl(r,ro),rl(r,ri),rl(r,rs),r}function rc(e){return rA(e).values}function rd(e){let{values:t,numColors:r,numVars:n,tokenised:a}=rA(e),o=t.length;return e=>{let t=a;for(let a=0;a<o;a++)t=a<n?t.replace(ro.token,e[a]):a<n+r?t.replace(ri.token,t8.transform(e[a])):t.replace(rs.token,eE(e[a]));return t}}let ru=e=>"number"==typeof e?0:e,rh={test:function(e){var t,r;return isNaN(e)&&eU(e)&&((null===(t=e.match(eO))||void 0===t?void 0:t.length)||0)+((null===(r=e.match(eP))||void 0===r?void 0:r.length)||0)>0},parse:rc,createTransformer:rd,getAnimatableNone:function(e){let t=rc(e);return rd(e)(t.map(ru))}},rf=(e,t)=>r=>`${r>0?t:e}`;function rp(e,t){return"number"==typeof e?r=>t7(e,t,r):t8.test(e)?ra(e,t):e.startsWith("var(")?rf(e,t):rx(e,t)}let rm=(e,t)=>{let r=[...e],n=r.length,a=e.map((e,r)=>rp(e,t[r]));return e=>{for(let t=0;t<n;t++)r[t]=a[t](e);return r}},rg=(e,t)=>{let r={...e,...t},n={};for(let a in r)void 0!==e[a]&&void 0!==t[a]&&(n[a]=rp(e[a],t[a]));return e=>{for(let t in n)r[t]=n[t](e);return r}},rx=(e,t)=>{let r=rh.createTransformer(t),n=rA(e),a=rA(t);return n.numVars===a.numVars&&n.numColors===a.numColors&&n.numNumbers>=a.numNumbers?td(rm(n.values,a.values),r):(w(!0,`Complex values '${e}' and '${t}' too different to mix. Ensure all colors are of the same type, and that each contains the same quantity of number and color values. Falling back to instant transition.`),rf(e,t))},rb=(e,t,r)=>{let n=t-e;return 0===n?1:(r-e)/n},ry=(e,t)=>r=>t7(e,t,r);function rv(e,t,{clamp:r=!0,ease:n,mixer:a}={}){let o=e.length;if(w(o===t.length,"Both input and output ranges must be the same length"),1===o)return()=>t[0];e[0]>e[o-1]&&(e=[...e].reverse(),t=[...t].reverse());let i=function(e,t,r){let n=[],a=r||function(e){if("number"==typeof e);else if("string"==typeof e)return t8.test(e)?ra:rx;else if(Array.isArray(e))return rm;else if("object"==typeof e)return rg;return ry}(e[0]),o=e.length-1;for(let r=0;r<o;r++){let o=a(e[r],e[r+1]);t&&(o=td(Array.isArray(t)?t[r]||w:t,o)),n.push(o)}return n}(t,n,a),s=i.length,l=t=>{let r=0;if(s>1)for(;r<e.length-2&&!(t<e[r+1]);r++);let n=rb(e[r],e[r+1],t);return i[r](n)};return r?t=>l(eC(e[0],e[o-1],t)):l}function rw({duration:e=300,keyframes:t,times:r,ease:n="easeInOut"}){let a=tK(n)?n.map(tZ):tZ(n),o={done:!1,value:t[0]},i=rv((r&&r.length===t.length?r:function(e){let t=[0];return function(e,t){let r=e[e.length-1];for(let n=1;n<=t;n++){let a=rb(0,t,n);e.push(t7(r,1,a))}}(t,e.length-1),t}(t)).map(t=>t*e),t,{ease:Array.isArray(a)?a:t.map(()=>a||tR).splice(0,t.length-1)});return{calculatedDuration:e,next:t=>(o.value=i(t),o.done=t>=e,o)}}function rk(e,t,r){var n,a;let o=Math.max(t-5,0);return n=r-e(o),(a=t-o)?1e3/a*n:0}function rB(e,t){return e*Math.sqrt(1-t*t)}let rj=["duration","bounce"],rC=["stiffness","damping","mass"];function rN(e,t){return t.some(t=>void 0!==e[t])}function rS({keyframes:e,restDelta:t,restSpeed:r,...n}){let a;let o=e[0],i=e[e.length-1],s={done:!1,value:o},{stiffness:l,damping:A,mass:c,duration:d,velocity:u,isResolvedFromDuration:h}=function(e){let t={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...e};if(!rN(e,rC)&&rN(e,rj)){let r=function({duration:e=800,bounce:t=.25,velocity:r=0,mass:n=1}){let a,o;w(e<=tP(10),"Spring duration must be 10 seconds or less");let i=1-t;i=eC(.05,1,i),e=eC(.01,10,tI(e)),i<1?(a=t=>{let n=t*i,a=n*e;return .001-(n-r)/rB(t,i)*Math.exp(-a)},o=t=>{let n=t*i*e,o=Math.pow(i,2)*Math.pow(t,2)*e,s=Math.exp(-n),l=rB(Math.pow(t,2),i);return(n*r+r-o)*s*(-a(t)+.001>0?-1:1)/l}):(a=t=>-.001+Math.exp(-t*e)*((t-r)*e+1),o=t=>e*e*(r-t)*Math.exp(-t*e));let s=function(e,t,r){let n=r;for(let r=1;r<12;r++)n-=e(n)/t(n);return n}(a,o,5/e);if(e=tP(e),isNaN(s))return{stiffness:100,damping:10,duration:e};{let t=Math.pow(s,2)*n;return{stiffness:t,damping:2*i*Math.sqrt(n*t),duration:e}}}(e);(t={...t,...r,mass:1}).isResolvedFromDuration=!0}return t}({...n,velocity:-tI(n.velocity||0)}),f=u||0,p=A/(2*Math.sqrt(l*c)),m=i-o,g=tI(Math.sqrt(l/c)),x=5>Math.abs(m);if(r||(r=x?.01:2),t||(t=x?.005:.5),p<1){let e=rB(g,p);a=t=>i-Math.exp(-p*g*t)*((f+p*g*m)/e*Math.sin(e*t)+m*Math.cos(e*t))}else if(1===p)a=e=>i-Math.exp(-g*e)*(m+(f+g*m)*e);else{let e=g*Math.sqrt(p*p-1);a=t=>{let r=Math.exp(-p*g*t),n=Math.min(e*t,300);return i-r*((f+p*g*m)*Math.sinh(n)+e*m*Math.cosh(n))/e}}return{calculatedDuration:h&&d||null,next:e=>{let n=a(e);if(h)s.done=e>=d;else{let o=f;0!==e&&(o=p<1?rk(a,e,n):0);let l=Math.abs(o)<=r,A=Math.abs(i-n)<=t;s.done=l&&A}return s.value=s.done?i:n,s}}}function rF({keyframes:e,velocity:t=0,power:r=.8,timeConstant:n=325,bounceDamping:a=10,bounceStiffness:o=500,modifyTarget:i,min:s,max:l,restDelta:A=.5,restSpeed:c}){let d,u;let h=e[0],f={done:!1,value:h},p=e=>void 0!==s&&e<s||void 0!==l&&e>l,m=e=>void 0===s?l:void 0===l?s:Math.abs(s-e)<Math.abs(l-e)?s:l,g=r*t,x=h+g,b=void 0===i?x:i(x);b!==x&&(g=b-h);let y=e=>-g*Math.exp(-e/n),v=e=>b+y(e),w=e=>{let t=y(e),r=v(e);f.done=Math.abs(t)<=A,f.value=f.done?b:r},k=e=>{p(f.value)&&(d=e,u=rS({keyframes:[f.value,m(f.value)],velocity:rk(v,e,f.value),damping:a,stiffness:o,restDelta:A,restSpeed:c}))};return k(0),{calculatedDuration:null,next:e=>{let t=!1;return(u||void 0!==d||(t=!0,w(e),k(e)),void 0!==d&&e>d)?u.next(e-d):(t||w(e),f)}}}let rE=e=>{let t=({timestamp:t})=>e(t);return{start:()=>j.update(t,!0),stop:()=>C(t),now:()=>N.isProcessing?N.timestamp:performance.now()}};function rO(e){let t=0,r=e.next(t);for(;!r.done&&t<2e4;)t+=50,r=e.next(t);return t>=2e4?1/0:t}let rP={decay:rF,inertia:rF,tween:rw,keyframes:rw,spring:rS};function rI({autoplay:e=!0,delay:t=0,driver:r=rE,keyframes:n,type:a="keyframes",repeat:o=0,repeatDelay:i=0,repeatType:s="loop",onPlay:l,onStop:A,onComplete:c,onUpdate:d,...u}){let h,f,p,m,g,x=1,b=!1,y=()=>{f=new Promise(e=>{h=e})};y();let v=rP[a]||rw;v!==rw&&"number"!=typeof n[0]&&(m=rv([0,100],n,{clamp:!1}),n=[0,100]);let w=v({...u,keyframes:n});"mirror"===s&&(g=v({...u,keyframes:[...n].reverse(),velocity:-(u.velocity||0)}));let k="idle",B=null,j=null,C=null;null===w.calculatedDuration&&o&&(w.calculatedDuration=rO(w));let{calculatedDuration:N}=w,S=1/0,F=1/0;null!==N&&(F=(S=N+i)*(o+1)-i);let E=0,O=e=>{if(null===j)return;x>0&&(j=Math.min(j,e)),x<0&&(j=Math.min(e-F/x,j));let r=(E=null!==B?B:Math.round(e-j)*x)-t*(x>=0?1:-1),a=x>=0?r<0:r>F;E=Math.max(r,0),"finished"===k&&null===B&&(E=F);let l=E,A=w;if(o){let e=Math.min(E,F)/S,t=Math.floor(e),r=e%1;!r&&e>=1&&(r=1),1===r&&t--,(t=Math.min(t,o+1))%2&&("reverse"===s?(r=1-r,i&&(r-=i/S)):"mirror"===s&&(A=g)),l=eC(0,1,r)*S}let c=a?{done:!1,value:n[0]}:A.next(l);m&&(c.value=m(c.value));let{done:u}=c;a||null===N||(u=x>=0?E>=F:E<=0);let h=null===B&&("finished"===k||"running"===k&&u);return d&&d(c.value),h&&U(),c},P=()=>{p&&p.stop(),p=void 0},I=()=>{k="idle",P(),h(),y(),j=C=null},U=()=>{k="finished",c&&c(),P(),h()},L=()=>{if(b)return;p||(p=r(O));let e=p.now();l&&l(),null!==B?j=e-B:j&&"finished"!==k||(j=e),"finished"===k&&y(),C=j,B=null,k="running",p.start()};e&&L();let _={then:(e,t)=>f.then(e,t),get time(){return tI(E)},set time(newTime){E=newTime=tP(newTime),null===B&&p&&0!==x?j=p.now()-newTime/x:B=newTime},get duration(){return tI(null===w.calculatedDuration?rO(w):w.calculatedDuration)},get speed(){return x},set speed(newSpeed){if(newSpeed===x||!p)return;x=newSpeed,_.time=tI(E)},get state(){return k},play:L,pause:()=>{k="paused",B=E},stop:()=>{b=!0,"idle"!==k&&(k="idle",A&&A(),I())},cancel:()=>{null!==C&&O(C),I()},complete:()=>{k="finished"},sample:e=>(j=0,O(e))};return _}let rU=function(e){let t;return()=>(void 0===t&&(t=e()),t)}(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),rL=new Set(["opacity","clipPath","filter","transform","backgroundColor"]),r_=(e,t)=>"spring"===t.type||"backgroundColor"===e||!function e(t){return!!(!t||"string"==typeof t&&tQ[t]||tL(t)||Array.isArray(t)&&t.every(e))}(t.ease),rQ={type:"spring",stiffness:500,damping:25,restSpeed:10},rT=e=>({type:"spring",stiffness:550,damping:0===e?2*Math.sqrt(550):30,restSpeed:10}),rD={type:"keyframes",duration:.8},rM={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},rH=(e,{keyframes:t})=>t.length>2?rD:eg.has(e)?e.startsWith("scale")?rT(t[1]):rQ:rM,rR=(e,t)=>"zIndex"!==e&&!!("number"==typeof t||Array.isArray(t)||"string"==typeof t&&(rh.test(t)||"0"===t)&&!t.startsWith("url(")),rK=new Set(["brightness","contrast","saturate","opacity"]);function rV(e){let[t,r]=e.slice(0,-1).split("(");if("drop-shadow"===t)return e;let[n]=r.match(eO)||[];if(!n)return e;let a=r.replace(n,""),o=rK.has(t)?1:0;return n!==r&&(o*=100),t+"("+o+a+")"}let rq=/([a-z-]*)\(.*?\)/g,rG={...rh,getAnimatableNone:e=>{let t=e.match(rq);return t?t.map(rV).join(" "):e}},rz={...eK,color:t8,backgroundColor:t8,outlineColor:t8,fill:t8,stroke:t8,borderColor:t8,borderTopColor:t8,borderRightColor:t8,borderBottomColor:t8,borderLeftColor:t8,filter:rG,WebkitFilter:rG},rW=e=>rz[e];function r$(e,t){let r=rW(e);return r!==rG&&(r=rh),r.getAnimatableNone?r.getAnimatableNone(t):void 0}let rX=e=>/^0[^.\s]+$/.test(e);function rY(e,t){return e[t]||e.default||e}let rJ={skipAnimations:!1},rZ=(e,t,r,n={})=>a=>{let o=rY(n,e)||{},i=o.delay||n.delay||0,{elapsed:s=0}=n;s-=tP(i);let l=function(e,t,r,n){let a,o;let i=rR(t,r);a=Array.isArray(r)?[...r]:[null,r];let s=void 0!==n.from?n.from:e.get(),l=[];for(let e=0;e<a.length;e++){var A;null===a[e]&&(a[e]=0===e?s:a[e-1]),("number"==typeof(A=a[e])?0===A:null!==A?"none"===A||"0"===A||rX(A):void 0)&&l.push(e),"string"==typeof a[e]&&"none"!==a[e]&&"0"!==a[e]&&(o=a[e])}if(i&&l.length&&o)for(let e=0;e<l.length;e++)a[l[e]]=r$(t,o);return a}(t,e,r,o),A=l[0],c=l[l.length-1],d=rR(e,A),u=rR(e,c);w(d===u,`You are trying to animate ${e} from "${A}" to "${c}". ${A} is not an animatable value - to enable this animation set ${A} to a value animatable to ${c} via the \`style\` property.`);let h={keyframes:l,velocity:t.getVelocity(),ease:"easeOut",...o,delay:-s,onUpdate:e=>{t.set(e),o.onUpdate&&o.onUpdate(e)},onComplete:()=>{a(),o.onComplete&&o.onComplete()}};if(!function({when:e,delay:t,delayChildren:r,staggerChildren:n,staggerDirection:a,repeat:o,repeatType:i,repeatDelay:s,from:l,elapsed:A,...c}){return!!Object.keys(c).length}(o)&&(h={...h,...rH(e,h)}),h.duration&&(h.duration=tP(h.duration)),h.repeatDelay&&(h.repeatDelay=tP(h.repeatDelay)),!d||!u||tU.current||!1===o.type||rJ.skipAnimations)return function({keyframes:e,delay:t,onUpdate:r,onComplete:n}){let a=()=>(r&&r(e[e.length-1]),n&&n(),{time:0,speed:1,duration:0,play:w,pause:w,stop:w,then:e=>(e(),Promise.resolve()),cancel:w,complete:w});return t?rI({keyframes:[0,1],duration:0,delay:t,onComplete:a}):a()}(tU.current?{...h,delay:0}:h);if(!n.isHandoff&&t.owner&&t.owner.current instanceof HTMLElement&&!t.owner.getProps().onUpdate){let r=function(e,t,{onUpdate:r,onComplete:n,...a}){let o,i;if(!(rU()&&rL.has(t)&&!a.repeatDelay&&"mirror"!==a.repeatType&&0!==a.damping&&"inertia"!==a.type))return!1;let s=!1,l=!1,A=()=>{i=new Promise(e=>{o=e})};A();let{keyframes:c,duration:d=300,ease:u,times:h}=a;if(r_(t,a)){let e=rI({...a,repeat:0,delay:0}),t={done:!1,value:c[0]},r=[],n=0;for(;!t.done&&n<2e4;)t=e.sample(n),r.push(t.value),n+=10;h=void 0,c=r,d=n-10,u="linear"}let f=function(e,t,r,{delay:n=0,duration:a,repeat:o=0,repeatType:i="loop",ease:s,times:l}={}){let A={[t]:r};l&&(A.offset=l);let c=function e(t){if(t)return tL(t)?t_(t):Array.isArray(t)?t.map(e):tQ[t]}(s);return Array.isArray(c)&&(A.easing=c),e.animate(A,{delay:n,duration:a,easing:Array.isArray(c)?"linear":c,fill:"both",iterations:o+1,direction:"reverse"===i?"alternate":"normal"})}(e.owner.current,t,c,{...a,duration:d,ease:u,times:h}),p=()=>{l=!1,f.cancel()},m=()=>{l=!0,j.update(p),o(),A()};return f.onfinish=()=>{l||(e.set(function(e,{repeat:t,repeatType:r="loop"}){let n=t&&"loop"!==r&&t%2==1?0:e.length-1;return e[n]}(c,a)),n&&n(),m())},{then:(e,t)=>i.then(e,t),attachTimeline:e=>(f.timeline=e,f.onfinish=null,w),get time(){return tI(f.currentTime||0)},set time(newTime){f.currentTime=tP(newTime)},get speed(){return f.playbackRate},set speed(newSpeed){f.playbackRate=newSpeed},get duration(){return tI(d)},play:()=>{s||(f.play(),C(p))},pause:()=>f.pause(),stop:()=>{if(s=!0,"idle"===f.playState)return;let{currentTime:t}=f;if(t){let r=rI({...a,autoplay:!1});e.setWithVelocity(r.sample(t-10).value,r.sample(t).value,10)}m()},complete:()=>{l||f.finish()},cancel:m}}(t,e,h);if(r)return r}return rI(h)};function r0(e){return!!(eb(e)&&e.add)}let r1=e=>/^\-?\d*\.?\d+$/.test(e);function r2(e,t){-1===e.indexOf(t)&&e.push(t)}function r5(e,t){let r=e.indexOf(t);r>-1&&e.splice(r,1)}class r4{constructor(){this.subscriptions=[]}add(e){return r2(this.subscriptions,e),()=>r5(this.subscriptions,e)}notify(e,t,r){let n=this.subscriptions.length;if(n){if(1===n)this.subscriptions[0](e,t,r);else for(let a=0;a<n;a++){let n=this.subscriptions[a];n&&n(e,t,r)}}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}let r3=e=>!isNaN(parseFloat(e)),r6={current:void 0};class r8{constructor(e,t={}){this.version="10.18.0",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=(e,t=!0)=>{this.prev=this.current,this.current=e;let{delta:r,timestamp:n}=N;this.lastUpdated!==n&&(this.timeDelta=r,this.lastUpdated=n,j.postRender(this.scheduleVelocityCheck)),this.prev!==this.current&&this.events.change&&this.events.change.notify(this.current),this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()),t&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.scheduleVelocityCheck=()=>j.postRender(this.velocityCheck),this.velocityCheck=({timestamp:e})=>{e!==this.lastUpdated&&(this.prev=this.current,this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=e,this.canTrackVelocity=r3(this.current),this.owner=t.owner}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new r4);let r=this.events[e].add(t);return"change"===e?()=>{r(),j.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(let e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e,t=!0){t&&this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e,t)}setWithVelocity(e,t,r){this.set(t),this.prev=e,this.timeDelta=r}jump(e){this.updateAndNotify(e),this.prev=e,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return r6.current&&r6.current.push(this),this.current}getPrevious(){return this.prev}getVelocity(){var e,t;return this.canTrackVelocity?(e=parseFloat(this.current)-parseFloat(this.prev),(t=this.timeDelta)?1e3/t*e:0):0}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function r7(e,t){return new r8(e,t)}let r9=e=>t=>t.test(e),ne=[eN,eT,eQ,e_,eM,eD,{test:e=>"auto"===e,parse:e=>e}],nt=e=>ne.find(r9(e)),nr=[...ne,t8,rh],nn=e=>nr.find(r9(e));function na(e,t,{delay:r=0,transitionOverride:n,type:a}={}){let{transition:o=e.getDefaultTransition(),transitionEnd:i,...s}=e.makeTargetAnimatable(t),l=e.getValue("willChange");n&&(o=n);let A=[],c=a&&e.animationState&&e.animationState.getState()[a];for(let t in s){let n=e.getValue(t),a=s[t];if(!n||void 0===a||c&&function({protectedKeys:e,needsAnimating:t},r){let n=e.hasOwnProperty(r)&&!0!==t[r];return t[r]=!1,n}(c,t))continue;let i={delay:r,elapsed:0,...rY(o||{},t)};if(window.HandoffAppearAnimations){let r=e.getProps()[ee];if(r){let e=window.HandoffAppearAnimations(r,t,n,j);null!==e&&(i.elapsed=e,i.isHandoff=!0)}}let d=!i.isHandoff&&!function(e,t){let r=e.get();if(!Array.isArray(t))return r!==t;for(let e=0;e<t.length;e++)if(t[e]!==r)return!0}(n,a);if("spring"===i.type&&(n.getVelocity()||i.velocity)&&(d=!1),n.animation&&(d=!1),d)continue;n.start(rZ(t,n,a,e.shouldReduceMotion&&eg.has(t)?{type:!1}:i));let u=n.animation;r0(l)&&(l.add(t),u.then(()=>l.remove(t))),A.push(u)}return i&&Promise.all(A).then(()=>{i&&function(e,t){let r=tO(e,t),{transitionEnd:n={},transition:a={},...o}=r?e.makeTargetAnimatable(r,!1):{};for(let t in o={...o,...n}){let r=te(o[t]);e.hasValue(t)?e.getValue(t).set(r):e.addValue(t,r7(r))}}(e,i)}),A}function no(e,t,r={}){let n=tO(e,t,r.custom),{transition:a=e.getDefaultTransition()||{}}=n||{};r.transitionOverride&&(a=r.transitionOverride);let o=n?()=>Promise.all(na(e,n,r)):()=>Promise.resolve(),i=e.variantChildren&&e.variantChildren.size?(n=0)=>{let{delayChildren:o=0,staggerChildren:i,staggerDirection:s}=a;return function(e,t,r=0,n=0,a=1,o){let i=[],s=(e.variantChildren.size-1)*n,l=1===a?(e=0)=>e*n:(e=0)=>s-e*n;return Array.from(e.variantChildren).sort(ni).forEach((e,n)=>{e.notify("AnimationStart",t),i.push(no(e,t,{...o,delay:r+l(n)}).then(()=>e.notify("AnimationComplete",t)))}),Promise.all(i)}(e,t,o+n,i,s,r)}:()=>Promise.resolve(),{when:s}=a;if(!s)return Promise.all([o(),i(r.delay)]);{let[e,t]="beforeChildren"===s?[o,i]:[i,o];return e().then(()=>t())}}function ni(e,t){return e.sortNodePosition(t)}let ns=[...ea].reverse(),nl=ea.length;function nA(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}class nc extends tg{constructor(e){super(e),e.animationState||(e.animationState=function(e){let t=t=>Promise.all(t.map(({animation:t,options:r})=>(function(e,t,r={}){let n;if(e.notify("AnimationStart",t),Array.isArray(t))n=Promise.all(t.map(t=>no(e,t,r)));else if("string"==typeof t)n=no(e,t,r);else{let a="function"==typeof t?tO(e,t,r.custom):t;n=Promise.all(na(e,a,r))}return n.then(()=>e.notify("AnimationComplete",t))})(e,t,r))),r={animate:nA(!0),whileInView:nA(),whileHover:nA(),whileTap:nA(),whileDrag:nA(),whileFocus:nA(),exit:nA()},n=!0,a=(t,r)=>{let n=tO(e,r);if(n){let{transition:e,transitionEnd:r,...a}=n;t={...t,...a,...r}}return t};function o(o,i){let s=e.getProps(),l=e.getVariantContext(!0)||{},A=[],c=new Set,d={},u=1/0;for(let t=0;t<nl;t++){var h;let f=ns[t],p=r[f],m=void 0!==s[f]?s[f]:l[f],g=er(m),x=f===i?p.isActive:null;!1===x&&(u=t);let b=m===l[f]&&m!==s[f]&&g;if(b&&n&&e.manuallyAnimateOnMount&&(b=!1),p.protectedKeys={...d},!p.isActive&&null===x||!m&&!p.prevProp||en(m)||"boolean"==typeof m)continue;let y=(h=p.prevProp,("string"==typeof m?m!==h:!!Array.isArray(m)&&!tE(m,h))||f===i&&p.isActive&&!b&&g||t>u&&g),v=!1,w=Array.isArray(m)?m:[m],k=w.reduce(a,{});!1===x&&(k={});let{prevResolvedValues:B={}}=p,j={...B,...k},C=e=>{y=!0,c.has(e)&&(v=!0,c.delete(e)),p.needsAnimating[e]=!0};for(let e in j){let t=k[e],r=B[e];if(!d.hasOwnProperty(e))(e7(t)&&e7(r)?tE(t,r):t===r)?void 0!==t&&c.has(e)?C(e):p.protectedKeys[e]=!0:void 0!==t?C(e):c.add(e)}p.prevProp=m,p.prevResolvedValues=k,p.isActive&&(d={...d,...k}),n&&e.blockInitialAnimation&&(y=!1),y&&(!b||v)&&A.push(...w.map(e=>({animation:e,options:{type:f,...o}})))}if(c.size){let t={};c.forEach(r=>{let n=e.getBaseTarget(r);void 0!==n&&(t[r]=n)}),A.push({animation:t})}let f=!!A.length;return n&&(!1===s.initial||s.initial===s.animate)&&!e.manuallyAnimateOnMount&&(f=!1),n=!1,f?t(A):Promise.resolve()}return{animateChanges:o,setActive:function(t,n,a){var i;if(r[t].isActive===n)return Promise.resolve();null===(i=e.variantChildren)||void 0===i||i.forEach(e=>{var r;return null===(r=e.animationState)||void 0===r?void 0:r.setActive(t,n)}),r[t].isActive=n;let s=o(a,t);for(let e in r)r[e].protectedKeys={};return s},setAnimateFunction:function(r){t=r(e)},getState:()=>r}}(e))}updateAnimationControlsSubscription(){let{animate:e}=this.node.getProps();this.unmount(),en(e)&&(this.unmount=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){let{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){}}let nd=0;class nu extends tg{constructor(){super(...arguments),this.id=nd++}update(){if(!this.node.presenceContext)return;let{isPresent:e,onExitComplete:t,custom:r}=this.node.presenceContext,{isPresent:n}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===n)return;let a=this.node.animationState.setActive("exit",!e,{custom:null!=r?r:this.node.getProps().custom});t&&!e&&a.then(()=>t(this.id))}mount(){let{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}let nh=(e,t)=>Math.abs(e-t);class nf{constructor(e,t,{transformPagePoint:r,contextWindow:n,dragSnapToOrigin:a=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;let e=ng(this.lastMoveEventInfo,this.history),t=null!==this.startEvent,r=function(e,t){return Math.sqrt(nh(e.x,t.x)**2+nh(e.y,t.y)**2)}(e.offset,{x:0,y:0})>=3;if(!t&&!r)return;let{point:n}=e,{timestamp:a}=N;this.history.push({...n,timestamp:a});let{onStart:o,onMove:i}=this.handlers;t||(o&&o(this.lastMoveEvent,e),this.startEvent=this.lastMoveEvent),i&&i(this.lastMoveEvent,e)},this.handlePointerMove=(e,t)=>{this.lastMoveEvent=e,this.lastMoveEventInfo=np(t,this.transformPagePoint),j.update(this.updatePoint,!0)},this.handlePointerUp=(e,t)=>{this.end();let{onEnd:r,onSessionEnd:n,resumeAnimation:a}=this.handlers;if(this.dragSnapToOrigin&&a&&a(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;let o=ng("pointercancel"===e.type?this.lastMoveEventInfo:np(t,this.transformPagePoint),this.history);this.startEvent&&r&&r(e,o),n&&n(e,o)},!ti(e))return;this.dragSnapToOrigin=a,this.handlers=t,this.transformPagePoint=r,this.contextWindow=n||window;let o=np(ts(e),this.transformPagePoint),{point:i}=o,{timestamp:s}=N;this.history=[{...i,timestamp:s}];let{onSessionStart:l}=t;l&&l(e,ng(o,this.history)),this.removeListeners=td(tA(this.contextWindow,"pointermove",this.handlePointerMove),tA(this.contextWindow,"pointerup",this.handlePointerUp),tA(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),C(this.updatePoint)}}function np(e,t){return t?{point:t(e.point)}:e}function nm(e,t){return{x:e.x-t.x,y:e.y-t.y}}function ng({point:e},t){return{point:e,delta:nm(e,nx(t)),offset:nm(e,t[0]),velocity:function(e,t){if(e.length<2)return{x:0,y:0};let r=e.length-1,n=null,a=nx(e);for(;r>=0&&(n=e[r],!(a.timestamp-n.timestamp>tP(.1)));)r--;if(!n)return{x:0,y:0};let o=tI(a.timestamp-n.timestamp);if(0===o)return{x:0,y:0};let i={x:(a.x-n.x)/o,y:(a.y-n.y)/o};return i.x===1/0&&(i.x=0),i.y===1/0&&(i.y=0),i}(t,0)}}function nx(e){return e[e.length-1]}function nb(e){return e.max-e.min}function ny(e,t=0,r=.01){return Math.abs(e-t)<=r}function nv(e,t,r,n=.5){e.origin=n,e.originPoint=t7(t.min,t.max,e.origin),e.scale=nb(r)/nb(t),(ny(e.scale,1,1e-4)||isNaN(e.scale))&&(e.scale=1),e.translate=t7(r.min,r.max,e.origin)-e.originPoint,(ny(e.translate)||isNaN(e.translate))&&(e.translate=0)}function nw(e,t,r,n){nv(e.x,t.x,r.x,n?n.originX:void 0),nv(e.y,t.y,r.y,n?n.originY:void 0)}function nk(e,t,r){e.min=r.min+t.min,e.max=e.min+nb(t)}function nB(e,t,r){e.min=t.min-r.min,e.max=e.min+nb(t)}function nj(e,t,r){nB(e.x,t.x,r.x),nB(e.y,t.y,r.y)}function nC(e,t,r){return{min:void 0!==t?e.min+t:void 0,max:void 0!==r?e.max+r-(e.max-e.min):void 0}}function nN(e,t){let r=t.min-e.min,n=t.max-e.max;return t.max-t.min<e.max-e.min&&([r,n]=[n,r]),{min:r,max:n}}function nS(e,t,r){return{min:nF(e,t),max:nF(e,r)}}function nF(e,t){return"number"==typeof e?e:e[t]||0}let nE=()=>({translate:0,scale:1,origin:0,originPoint:0}),nO=()=>({x:nE(),y:nE()}),nP=()=>({min:0,max:0}),nI=()=>({x:nP(),y:nP()});function nU(e){return[e("x"),e("y")]}function nL({top:e,left:t,right:r,bottom:n}){return{x:{min:t,max:r},y:{min:e,max:n}}}function n_(e){return void 0===e||1===e}function nQ({scale:e,scaleX:t,scaleY:r}){return!n_(e)||!n_(t)||!n_(r)}function nT(e){return nQ(e)||nD(e)||e.z||e.rotate||e.rotateX||e.rotateY}function nD(e){var t,r;return(t=e.x)&&"0%"!==t||(r=e.y)&&"0%"!==r}function nM(e,t,r,n,a){return void 0!==a&&(e=n+a*(e-n)),n+r*(e-n)+t}function nH(e,t=0,r=1,n,a){e.min=nM(e.min,t,r,n,a),e.max=nM(e.max,t,r,n,a)}function nR(e,{x:t,y:r}){nH(e.x,t.translate,t.scale,t.originPoint),nH(e.y,r.translate,r.scale,r.originPoint)}function nK(e){return Number.isInteger(e)?e:e>1.0000000000001||e<.999999999999?e:1}function nV(e,t){e.min=e.min+t,e.max=e.max+t}function nq(e,t,[r,n,a]){let o=void 0!==t[a]?t[a]:.5,i=t7(e.min,e.max,o);nH(e,t[r],t[n],i,t.scale)}let nG=["x","scaleX","originX"],nz=["y","scaleY","originY"];function nW(e,t){nq(e.x,t,nG),nq(e.y,t,nz)}function n$(e,t){return nL(function(e,t){if(!t)return e;let r=t({x:e.left,y:e.top}),n=t({x:e.right,y:e.bottom});return{top:r.y,left:r.x,bottom:n.y,right:n.x}}(e.getBoundingClientRect(),t))}let nX=({current:e})=>e?e.ownerDocument.defaultView:null,nY=new WeakMap;class nJ{constructor(e){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=nI(),this.visualElement=e}start(e,{snapToCursor:t=!1}={}){let{presenceContext:r}=this.visualElement;if(r&&!1===r.isPresent)return;let{dragSnapToOrigin:n}=this.getProps();this.panSession=new nf(e,{onSessionStart:e=>{let{dragSnapToOrigin:r}=this.getProps();r?this.pauseAnimation():this.stopAnimation(),t&&this.snapToCursor(ts(e,"page").point)},onStart:(e,t)=>{let{drag:r,dragPropagation:n,onDragStart:a}=this.getProps();if(r&&!n&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=tp(r),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),nU(e=>{let t=this.getAxisMotionValue(e).get()||0;if(eQ.test(t)){let{projection:r}=this.visualElement;if(r&&r.layout){let n=r.layout.layoutBox[e];if(n){let e=nb(n);t=parseFloat(t)/100*e}}}this.originPoint[e]=t}),a&&j.update(()=>a(e,t),!1,!0);let{animationState:o}=this.visualElement;o&&o.setActive("whileDrag",!0)},onMove:(e,t)=>{let{dragPropagation:r,dragDirectionLock:n,onDirectionLock:a,onDrag:o}=this.getProps();if(!r&&!this.openGlobalLock)return;let{offset:i}=t;if(n&&null===this.currentDirection){this.currentDirection=function(e,t=10){let r=null;return Math.abs(e.y)>t?r="y":Math.abs(e.x)>t&&(r="x"),r}(i),null!==this.currentDirection&&a&&a(this.currentDirection);return}this.updateAxis("x",t.point,i),this.updateAxis("y",t.point,i),this.visualElement.render(),o&&o(e,t)},onSessionEnd:(e,t)=>this.stop(e,t),resumeAnimation:()=>nU(e=>{var t;return"paused"===this.getAnimationState(e)&&(null===(t=this.getAxisMotionValue(e).animation)||void 0===t?void 0:t.play())})},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:n,contextWindow:nX(this.visualElement)})}stop(e,t){let r=this.isDragging;if(this.cancel(),!r)return;let{velocity:n}=t;this.startAnimation(n);let{onDragEnd:a}=this.getProps();a&&j.update(()=>a(e,t))}cancel(){this.isDragging=!1;let{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;let{dragPropagation:r}=this.getProps();!r&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,r){let{drag:n}=this.getProps();if(!r||!nZ(e,n,this.currentDirection))return;let a=this.getAxisMotionValue(e),o=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(o=function(e,{min:t,max:r},n){return void 0!==t&&e<t?e=n?t7(t,e,n.min):Math.max(e,t):void 0!==r&&e>r&&(e=n?t7(r,e,n.max):Math.min(e,r)),e}(o,this.constraints[e],this.elastic[e])),a.set(o)}resolveConstraints(){var e;let{dragConstraints:t,dragElastic:r}=this.getProps(),n=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):null===(e=this.visualElement.projection)||void 0===e?void 0:e.layout,a=this.constraints;t&&et(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&n?this.constraints=function(e,{top:t,left:r,bottom:n,right:a}){return{x:nC(e.x,r,a),y:nC(e.y,t,n)}}(n.layoutBox,t):this.constraints=!1,this.elastic=function(e=.35){return!1===e?e=0:!0===e&&(e=.35),{x:nS(e,"left","right"),y:nS(e,"top","bottom")}}(r),a!==this.constraints&&n&&this.constraints&&!this.hasMutatedConstraints&&nU(e=>{this.getAxisMotionValue(e)&&(this.constraints[e]=function(e,t){let r={};return void 0!==t.min&&(r.min=t.min-e.min),void 0!==t.max&&(r.max=t.max-e.min),r}(n.layoutBox[e],this.constraints[e]))})}resolveRefConstraints(){var e;let{dragConstraints:t,onMeasureDragConstraints:r}=this.getProps();if(!t||!et(t))return!1;let n=t.current;w(null!==n,"If `dragConstraints` is set as a React ref, that ref must be passed to another component's `ref` prop.");let{projection:a}=this.visualElement;if(!a||!a.layout)return!1;let o=function(e,t,r){let n=n$(e,r),{scroll:a}=t;return a&&(nV(n.x,a.offset.x),nV(n.y,a.offset.y)),n}(n,a.root,this.visualElement.getTransformPagePoint()),i={x:nN((e=a.layout.layoutBox).x,o.x),y:nN(e.y,o.y)};if(r){let e=r(function({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}(i));this.hasMutatedConstraints=!!e,e&&(i=nL(e))}return i}startAnimation(e){let{drag:t,dragMomentum:r,dragElastic:n,dragTransition:a,dragSnapToOrigin:o,onDragTransitionEnd:i}=this.getProps(),s=this.constraints||{};return Promise.all(nU(i=>{if(!nZ(i,t,this.currentDirection))return;let l=s&&s[i]||{};o&&(l={min:0,max:0});let A={type:"inertia",velocity:r?e[i]:0,bounceStiffness:n?200:1e6,bounceDamping:n?40:1e7,timeConstant:750,restDelta:1,restSpeed:10,...a,...l};return this.startAxisValueAnimation(i,A)})).then(i)}startAxisValueAnimation(e,t){let r=this.getAxisMotionValue(e);return r.start(rZ(e,r,0,t))}stopAnimation(){nU(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){nU(e=>{var t;return null===(t=this.getAxisMotionValue(e).animation)||void 0===t?void 0:t.pause()})}getAnimationState(e){var t;return null===(t=this.getAxisMotionValue(e).animation)||void 0===t?void 0:t.state}getAxisMotionValue(e){let t="_drag"+e.toUpperCase(),r=this.visualElement.getProps();return r[t]||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){nU(t=>{let{drag:r}=this.getProps();if(!nZ(t,r,this.currentDirection))return;let{projection:n}=this.visualElement,a=this.getAxisMotionValue(t);if(n&&n.layout){let{min:r,max:o}=n.layout.layoutBox[t];a.set(e[t]-t7(r,o,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;let{drag:e,dragConstraints:t}=this.getProps(),{projection:r}=this.visualElement;if(!et(t)||!r||!this.constraints)return;this.stopAnimation();let n={x:0,y:0};nU(e=>{let t=this.getAxisMotionValue(e);if(t){let r=t.get();n[e]=function(e,t){let r=.5,n=nb(e),a=nb(t);return a>n?r=rb(t.min,t.max-n,e.min):n>a&&(r=rb(e.min,e.max-a,t.min)),eC(0,1,r)}({min:r,max:r},this.constraints[e])}});let{transformTemplate:a}=this.visualElement.getProps();this.visualElement.current.style.transform=a?a({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),nU(t=>{if(!nZ(t,e,null))return;let r=this.getAxisMotionValue(t),{min:a,max:o}=this.constraints[t];r.set(t7(a,o,n[t]))})}addListeners(){if(!this.visualElement.current)return;nY.set(this.visualElement,this);let e=tA(this.visualElement.current,"pointerdown",e=>{let{drag:t,dragListener:r=!0}=this.getProps();t&&r&&this.start(e)}),t=()=>{let{dragConstraints:e}=this.getProps();et(e)&&(this.constraints=this.resolveRefConstraints())},{projection:r}=this.visualElement,n=r.addEventListener("measure",t);r&&!r.layout&&(r.root&&r.root.updateScroll(),r.updateLayout()),t();let a=to(window,"resize",()=>this.scalePositionWithinConstraints()),o=r.addEventListener("didUpdate",({delta:e,hasLayoutChanged:t})=>{this.isDragging&&t&&(nU(t=>{let r=this.getAxisMotionValue(t);r&&(this.originPoint[t]+=e[t].translate,r.set(r.get()+e[t].translate))}),this.visualElement.render())});return()=>{a(),e(),n(),o&&o()}}getProps(){let e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:r=!1,dragPropagation:n=!1,dragConstraints:a=!1,dragElastic:o=.35,dragMomentum:i=!0}=e;return{...e,drag:t,dragDirectionLock:r,dragPropagation:n,dragConstraints:a,dragElastic:o,dragMomentum:i}}}function nZ(e,t,r){return(!0===t||t===e)&&(null===r||r===e)}class n0 extends tg{constructor(e){super(e),this.removeGroupControls=w,this.removeListeners=w,this.controls=new nJ(e)}mount(){let{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||w}unmount(){this.removeGroupControls(),this.removeListeners()}}let n1=e=>(t,r)=>{e&&j.update(()=>e(t,r))};class n2 extends tg{constructor(){super(...arguments),this.removePointerDownListener=w}onPointerDown(e){this.session=new nf(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:nX(this.node)})}createPanHandlers(){let{onPanSessionStart:e,onPanStart:t,onPan:r,onPanEnd:n}=this.node.getProps();return{onSessionStart:n1(e),onStart:n1(t),onMove:r,onEnd:(e,t)=>{delete this.session,n&&j.update(()=>n(e,t))}}}mount(){this.removePointerDownListener=tA(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}let n5={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function n4(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}let n3={correct:(e,t)=>{if(!t.target)return e;if("string"==typeof e){if(!eT.test(e))return e;e=parseFloat(e)}let r=n4(e,t.target.x),n=n4(e,t.target.y);return`${r}% ${n}%`}};class n6 extends g.Component{componentDidMount(){let{visualElement:e,layoutGroup:t,switchLayoutGroup:r,layoutId:n}=this.props,{projection:a}=e;Object.assign(ep,n7),a&&(t.group&&t.group.add(a),r&&r.register&&n&&r.register(a),a.root.didUpdate(),a.addEventListener("animationComplete",()=>{this.safeToRemove()}),a.setOptions({...a.options,onExitComplete:()=>this.safeToRemove()})),n5.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){let{layoutDependency:t,visualElement:r,drag:n,isPresent:a}=this.props,o=r.projection;return o&&(o.isPresent=a,n||e.layoutDependency!==t||void 0===t?o.willUpdate():this.safeToRemove(),e.isPresent===a||(a?o.promote():o.relegate()||j.postRender(()=>{let e=o.getStack();e&&e.members.length||this.safeToRemove()}))),null}componentDidUpdate(){let{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),queueMicrotask(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){let{visualElement:e,layoutGroup:t,switchLayoutGroup:r}=this.props,{projection:n}=e;n&&(n.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(n),r&&r.deregister&&r.deregister(n))}safeToRemove(){let{safeToRemove:e}=this.props;e&&e()}render(){return null}}function n8(e){let[t,r]=function(){let e=(0,g.useContext)(F);if(null===e)return[!0,null];let{isPresent:t,onExitComplete:r,register:n}=e,a=(0,g.useId)();return(0,g.useEffect)(()=>n(a),[]),!t&&r?[!1,()=>r&&r(a)]:[!0]}(),n=(0,g.useContext)(L);return g.createElement(n6,{...e,layoutGroup:n,switchLayoutGroup:(0,g.useContext)(ed),isPresent:t,safeToRemove:r})}let n7={borderRadius:{...n3,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:n3,borderTopRightRadius:n3,borderBottomLeftRadius:n3,borderBottomRightRadius:n3,boxShadow:{correct:(e,{treeScale:t,projectionDelta:r})=>{let n=rh.parse(e);if(n.length>5)return e;let a=rh.createTransformer(e),o="number"!=typeof n[0]?1:0,i=r.x.scale*t.x,s=r.y.scale*t.y;n[0+o]/=i,n[1+o]/=s;let l=t7(i,s,.5);return"number"==typeof n[2+o]&&(n[2+o]/=l),"number"==typeof n[3+o]&&(n[3+o]/=l),a(n)}}},n9=["TopLeft","TopRight","BottomLeft","BottomRight"],ae=n9.length,at=e=>"string"==typeof e?parseFloat(e):e,ar=e=>"number"==typeof e||eT.test(e);function an(e,t){return void 0!==e[t]?e[t]:e.borderRadius}let aa=ai(0,.5,tz),ao=ai(.5,.95,w);function ai(e,t,r){return n=>n<e?0:n>t?1:r(rb(e,t,n))}function as(e,t){e.min=t.min,e.max=t.max}function al(e,t){as(e.x,t.x),as(e.y,t.y)}function aA(e,t,r,n,a){return e-=t,e=n+1/r*(e-n),void 0!==a&&(e=n+1/a*(e-n)),e}function ac(e,t,[r,n,a],o,i){!function(e,t=0,r=1,n=.5,a,o=e,i=e){if(eQ.test(t)&&(t=parseFloat(t),t=t7(i.min,i.max,t/100)-i.min),"number"!=typeof t)return;let s=t7(o.min,o.max,n);e===o&&(s-=t),e.min=aA(e.min,t,r,s,a),e.max=aA(e.max,t,r,s,a)}(e,t[r],t[n],t[a],t.scale,o,i)}let ad=["x","scaleX","originX"],au=["y","scaleY","originY"];function ah(e,t,r,n){ac(e.x,t,ad,r?r.x:void 0,n?n.x:void 0),ac(e.y,t,au,r?r.y:void 0,n?n.y:void 0)}function af(e){return 0===e.translate&&1===e.scale}function ap(e){return af(e.x)&&af(e.y)}function am(e,t){return Math.round(e.x.min)===Math.round(t.x.min)&&Math.round(e.x.max)===Math.round(t.x.max)&&Math.round(e.y.min)===Math.round(t.y.min)&&Math.round(e.y.max)===Math.round(t.y.max)}function ag(e){return nb(e.x)/nb(e.y)}class ax{constructor(){this.members=[]}add(e){r2(this.members,e),e.scheduleRender()}remove(e){if(r5(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){let e=this.members[this.members.length-1];e&&this.promote(e)}}relegate(e){let t;let r=this.members.findIndex(t=>e===t);if(0===r)return!1;for(let e=r;e>=0;e--){let r=this.members[e];if(!1!==r.isPresent){t=r;break}}return!!t&&(this.promote(t),!0)}promote(e,t){let r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,t&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);let{crossfade:n}=e.options;!1===n&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{let{options:t,resumingFrom:r}=e;t.onExitComplete&&t.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function ab(e,t,r){let n="",a=e.x.translate/t.x,o=e.y.translate/t.y;if((a||o)&&(n=`translate3d(${a}px, ${o}px, 0) `),(1!==t.x||1!==t.y)&&(n+=`scale(${1/t.x}, ${1/t.y}) `),r){let{rotate:e,rotateX:t,rotateY:a}=r;e&&(n+=`rotate(${e}deg) `),t&&(n+=`rotateX(${t}deg) `),a&&(n+=`rotateY(${a}deg) `)}let i=e.x.scale*t.x,s=e.y.scale*t.y;return(1!==i||1!==s)&&(n+=`scale(${i}, ${s})`),n||"none"}let ay=(e,t)=>e.depth-t.depth;class av{constructor(){this.children=[],this.isDirty=!1}add(e){r2(this.children,e),this.isDirty=!0}remove(e){r5(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(ay),this.isDirty=!1,this.children.forEach(e)}}let aw=["","X","Y","Z"],ak={visibility:"hidden"},aB=0,aj={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function aC({attachResizeListener:e,defaultParent:t,measureScroll:r,checkIsScrollRoot:n,resetTransform:a}){return class{constructor(e={},r=null==t?void 0:t()){this.id=aB++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,aj.totalNodes=aj.resolvedTargetDeltas=aj.recalculatedProjection=0,this.nodes.forEach(aF),this.nodes.forEach(a_),this.nodes.forEach(aQ),this.nodes.forEach(aE),window.MotionDebug&&window.MotionDebug.record(aj)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=e,this.root=r?r.root||r:this,this.path=r?[...r.path,r]:[],this.parent=r,this.depth=r?r.depth+1:0;for(let e=0;e<this.path.length;e++)this.path[e].shouldResetTransform=!0;this.root===this&&(this.nodes=new av)}addEventListener(e,t){return this.eventHandlers.has(e)||this.eventHandlers.set(e,new r4),this.eventHandlers.get(e).add(t)}notifyListeners(e,...t){let r=this.eventHandlers.get(e);r&&r.notify(...t)}hasListeners(e){return this.eventHandlers.has(e)}mount(t,r=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=t instanceof SVGElement&&"svg"!==t.tagName,this.instance=t;let{layoutId:n,layout:a,visualElement:o}=this.options;if(o&&!o.current&&o.mount(t),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),r&&(a||n)&&(this.isLayoutDirty=!0),e){let r;let n=()=>this.root.updateBlockedByResize=!1;e(t,()=>{this.root.updateBlockedByResize=!0,r&&r(),r=function(e,t){let r=performance.now(),n=({timestamp:t})=>{let a=t-r;a>=250&&(C(n),e(a-250))};return j.read(n,!0),()=>C(n)}(n,0),n5.hasAnimatedSinceResize&&(n5.hasAnimatedSinceResize=!1,this.nodes.forEach(aL))})}n&&this.root.registerSharedNode(n,this),!1!==this.options.animate&&o&&(n||a)&&this.addEventListener("didUpdate",({delta:e,hasLayoutChanged:t,hasRelativeTargetChanged:r,layout:n})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}let a=this.options.transition||o.getDefaultTransition()||aK,{onLayoutAnimationStart:i,onLayoutAnimationComplete:s}=o.getProps(),l=!this.targetLayout||!am(this.targetLayout,n)||r,A=!t&&r;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||A||t&&(l||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(e,A);let t={...rY(a,"layout"),onPlay:i,onComplete:s};(o.shouldReduceMotion||this.options.layoutRoot)&&(t.delay=0,t.type=!1),this.startAnimation(t)}else t||aL(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=n})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);let e=this.getStack();e&&e.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,C(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){!this.isUpdateBlocked()&&(this.isUpdating=!0,this.nodes&&this.nodes.forEach(aT),this.animationId++)}getTransformTemplate(){let{visualElement:e}=this.options;return e&&e.getProps().transformTemplate}willUpdate(e=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(this.root.isUpdating||this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let e=0;e<this.path.length;e++){let t=this.path[e];t.shouldResetTransform=!0,t.updateScroll("snapshot"),t.options.layoutRoot&&t.willUpdate(!1)}let{layoutId:t,layout:r}=this.options;if(void 0===t&&!r)return;let n=this.getTransformTemplate();this.prevTransformTemplateValue=n?n(this.latestValues,""):void 0,this.updateSnapshot(),e&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(aP);return}this.isUpdating||this.nodes.forEach(aI),this.isUpdating=!1,this.nodes.forEach(aU),this.nodes.forEach(aN),this.nodes.forEach(aS),this.clearAllSnapshots();let e=performance.now();N.delta=eC(0,1e3/60,e-N.timestamp),N.timestamp=e,N.isProcessing=!0,S.update.process(N),S.preRender.process(N),S.render.process(N),N.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,queueMicrotask(()=>this.update()))}clearAllSnapshots(){this.nodes.forEach(aO),this.sharedNodes.forEach(aD)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,j.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){j.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){!this.snapshot&&this.instance&&(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let e=0;e<this.path.length;e++)this.path[e].updateScroll();let e=this.layout;this.layout=this.measure(!1),this.layoutCorrected=nI(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);let{visualElement:t}=this.options;t&&t.notify("LayoutMeasure",this.layout.layoutBox,e?e.layoutBox:void 0)}updateScroll(e="measure"){let t=!!(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===e&&(t=!1),t&&(this.scroll={animationId:this.root.animationId,phase:e,isRoot:n(this.instance),offset:r(this.instance)})}resetTransform(){if(!a)return;let e=this.isLayoutDirty||this.shouldResetTransform,t=this.projectionDelta&&!ap(this.projectionDelta),r=this.getTransformTemplate(),n=r?r(this.latestValues,""):void 0,o=n!==this.prevTransformTemplateValue;e&&(t||nT(this.latestValues)||o)&&(a(this.instance,n),this.shouldResetTransform=!1,this.scheduleRender())}measure(e=!0){var t;let r=this.measurePageBox(),n=this.removeElementScroll(r);return e&&(n=this.removeTransform(n)),aG((t=n).x),aG(t.y),{animationId:this.root.animationId,measuredBox:r,layoutBox:n,latestValues:{},source:this.id}}measurePageBox(){let{visualElement:e}=this.options;if(!e)return nI();let t=e.measureViewportBox(),{scroll:r}=this.root;return r&&(nV(t.x,r.offset.x),nV(t.y,r.offset.y)),t}removeElementScroll(e){let t=nI();al(t,e);for(let r=0;r<this.path.length;r++){let n=this.path[r],{scroll:a,options:o}=n;if(n!==this.root&&a&&o.layoutScroll){if(a.isRoot){al(t,e);let{scroll:r}=this.root;r&&(nV(t.x,-r.offset.x),nV(t.y,-r.offset.y))}nV(t.x,a.offset.x),nV(t.y,a.offset.y)}}return t}applyTransform(e,t=!1){let r=nI();al(r,e);for(let e=0;e<this.path.length;e++){let n=this.path[e];!t&&n.options.layoutScroll&&n.scroll&&n!==n.root&&nW(r,{x:-n.scroll.offset.x,y:-n.scroll.offset.y}),nT(n.latestValues)&&nW(r,n.latestValues)}return nT(this.latestValues)&&nW(r,this.latestValues),r}removeTransform(e){let t=nI();al(t,e);for(let e=0;e<this.path.length;e++){let r=this.path[e];if(!r.instance||!nT(r.latestValues))continue;nQ(r.latestValues)&&r.updateSnapshot();let n=nI();al(n,r.measurePageBox()),ah(t,r.latestValues,r.snapshot?r.snapshot.layoutBox:void 0,n)}return nT(this.latestValues)&&ah(t,this.latestValues),t}setTargetDelta(e){this.targetDelta=e,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(e){this.options={...this.options,...e,crossfade:void 0===e.crossfade||e.crossfade}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==N.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(e=!1){var t,r,n,a;let o=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=o.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=o.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=o.isSharedProjectionDirty);let i=!!this.resumingFrom||this!==o;if(!(e||i&&this.isSharedProjectionDirty||this.isProjectionDirty||(null===(t=this.parent)||void 0===t?void 0:t.isProjectionDirty)||this.attemptToResolveRelativeTarget))return;let{layout:s,layoutId:l}=this.options;if(this.layout&&(s||l)){if(this.resolvedRelativeTargetAt=N.timestamp,!this.targetDelta&&!this.relativeTarget){let e=this.getClosestProjectingParent();e&&e.layout&&1!==this.animationProgress?(this.relativeParent=e,this.forceRelativeParentToResolveTarget(),this.relativeTarget=nI(),this.relativeTargetOrigin=nI(),nj(this.relativeTargetOrigin,this.layout.layoutBox,e.layout.layoutBox),al(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(this.relativeTarget||this.targetDelta){if((this.target||(this.target=nI(),this.targetWithTransforms=nI()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target)?(this.forceRelativeParentToResolveTarget(),r=this.target,n=this.relativeTarget,a=this.relativeParent.target,nk(r.x,n.x,a.x),nk(r.y,n.y,a.y)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):al(this.target,this.layout.layoutBox),nR(this.target,this.targetDelta)):al(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;let e=this.getClosestProjectingParent();e&&!!e.resumingFrom==!!this.resumingFrom&&!e.options.layoutScroll&&e.target&&1!==this.animationProgress?(this.relativeParent=e,this.forceRelativeParentToResolveTarget(),this.relativeTarget=nI(),this.relativeTargetOrigin=nI(),nj(this.relativeTargetOrigin,this.target,e.target),al(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}aj.resolvedTargetDeltas++}}}getClosestProjectingParent(){return!this.parent||nQ(this.parent.latestValues)||nD(this.parent.latestValues)?void 0:this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var e;let t=this.getLead(),r=!!this.resumingFrom||this!==t,n=!0;if((this.isProjectionDirty||(null===(e=this.parent)||void 0===e?void 0:e.isProjectionDirty))&&(n=!1),r&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(n=!1),this.resolvedRelativeTargetAt===N.timestamp&&(n=!1),n)return;let{layout:a,layoutId:o}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(a||o))return;al(this.layoutCorrected,this.layout.layoutBox);let i=this.treeScale.x,s=this.treeScale.y;(function(e,t,r,n=!1){let a,o;let i=r.length;if(i){t.x=t.y=1;for(let s=0;s<i;s++){o=(a=r[s]).projectionDelta;let i=a.instance;(!i||!i.style||"contents"!==i.style.display)&&(n&&a.options.layoutScroll&&a.scroll&&a!==a.root&&nW(e,{x:-a.scroll.offset.x,y:-a.scroll.offset.y}),o&&(t.x*=o.x.scale,t.y*=o.y.scale,nR(e,o)),n&&nT(a.latestValues)&&nW(e,a.latestValues))}t.x=nK(t.x),t.y=nK(t.y)}})(this.layoutCorrected,this.treeScale,this.path,r),t.layout&&!t.target&&(1!==this.treeScale.x||1!==this.treeScale.y)&&(t.target=t.layout.layoutBox);let{target:l}=t;if(!l){this.projectionTransform&&(this.projectionDelta=nO(),this.projectionTransform="none",this.scheduleRender());return}this.projectionDelta||(this.projectionDelta=nO(),this.projectionDeltaWithTransform=nO());let A=this.projectionTransform;nw(this.projectionDelta,this.layoutCorrected,l,this.latestValues),this.projectionTransform=ab(this.projectionDelta,this.treeScale),(this.projectionTransform!==A||this.treeScale.x!==i||this.treeScale.y!==s)&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",l)),aj.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(e=!0){if(this.options.scheduleRender&&this.options.scheduleRender(),e){let e=this.getStack();e&&e.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(e,t=!1){let r;let n=this.snapshot,a=n?n.latestValues:{},o={...this.latestValues},i=nO();this.relativeParent&&this.relativeParent.options.layoutRoot||(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!t;let s=nI(),l=(n?n.source:void 0)!==(this.layout?this.layout.source:void 0),A=this.getStack(),c=!A||A.members.length<=1,d=!!(l&&!c&&!0===this.options.crossfade&&!this.path.some(aR));this.animationProgress=0,this.mixTargetDelta=t=>{let n=t/1e3;if(aM(i.x,e.x,n),aM(i.y,e.y,n),this.setTargetDelta(i),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout){var A,u,h,f;nj(s,this.layout.layoutBox,this.relativeParent.layout.layoutBox),h=this.relativeTarget,f=this.relativeTargetOrigin,aH(h.x,f.x,s.x,n),aH(h.y,f.y,s.y,n),r&&(A=this.relativeTarget,u=r,A.x.min===u.x.min&&A.x.max===u.x.max&&A.y.min===u.y.min&&A.y.max===u.y.max)&&(this.isProjectionDirty=!1),r||(r=nI()),al(r,this.relativeTarget)}l&&(this.animationValues=o,function(e,t,r,n,a,o){a?(e.opacity=t7(0,void 0!==r.opacity?r.opacity:1,aa(n)),e.opacityExit=t7(void 0!==t.opacity?t.opacity:1,0,ao(n))):o&&(e.opacity=t7(void 0!==t.opacity?t.opacity:1,void 0!==r.opacity?r.opacity:1,n));for(let a=0;a<ae;a++){let o=`border${n9[a]}Radius`,i=an(t,o),s=an(r,o);(void 0!==i||void 0!==s)&&(i||(i=0),s||(s=0),0===i||0===s||ar(i)===ar(s)?(e[o]=Math.max(t7(at(i),at(s),n),0),(eQ.test(s)||eQ.test(i))&&(e[o]+="%")):e[o]=s)}(t.rotate||r.rotate)&&(e.rotate=t7(t.rotate||0,r.rotate||0,n))}(o,a,this.latestValues,n,d,c)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=n},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(e){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(C(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=j.update(()=>{n5.hasAnimatedSinceResize=!0,this.currentAnimation=function(e,t,r){let n=eb(0)?0:r7(0);return n.start(rZ("",n,1e3,r)),n.animation}(0,0,{...e,onUpdate:t=>{this.mixTargetDelta(t),e.onUpdate&&e.onUpdate(t)},onComplete:()=>{e.onComplete&&e.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);let e=this.getStack();e&&e.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(1e3),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){let e=this.getLead(),{targetWithTransforms:t,target:r,layout:n,latestValues:a}=e;if(t&&r&&n){if(this!==e&&this.layout&&n&&az(this.options.animationType,this.layout.layoutBox,n.layoutBox)){r=this.target||nI();let t=nb(this.layout.layoutBox.x);r.x.min=e.target.x.min,r.x.max=r.x.min+t;let n=nb(this.layout.layoutBox.y);r.y.min=e.target.y.min,r.y.max=r.y.min+n}al(t,r),nW(t,a),nw(this.projectionDeltaWithTransform,this.layoutCorrected,t,a)}}registerSharedNode(e,t){this.sharedNodes.has(e)||this.sharedNodes.set(e,new ax),this.sharedNodes.get(e).add(t);let r=t.options.initialPromotionConfig;t.promote({transition:r?r.transition:void 0,preserveFollowOpacity:r&&r.shouldPreserveFollowOpacity?r.shouldPreserveFollowOpacity(t):void 0})}isLead(){let e=this.getStack();return!e||e.lead===this}getLead(){var e;let{layoutId:t}=this.options;return t&&(null===(e=this.getStack())||void 0===e?void 0:e.lead)||this}getPrevLead(){var e;let{layoutId:t}=this.options;return t?null===(e=this.getStack())||void 0===e?void 0:e.prevLead:void 0}getStack(){let{layoutId:e}=this.options;if(e)return this.root.sharedNodes.get(e)}promote({needsReset:e,transition:t,preserveFollowOpacity:r}={}){let n=this.getStack();n&&n.promote(this,r),e&&(this.projectionDelta=void 0,this.needsReset=!0),t&&this.setOptions({transition:t})}relegate(){let e=this.getStack();return!!e&&e.relegate(this)}resetRotation(){let{visualElement:e}=this.options;if(!e)return;let t=!1,{latestValues:r}=e;if((r.rotate||r.rotateX||r.rotateY||r.rotateZ)&&(t=!0),!t)return;let n={};for(let t=0;t<aw.length;t++){let a="rotate"+aw[t];r[a]&&(n[a]=r[a],e.setStaticValue(a,0))}for(let t in e.render(),n)e.setStaticValue(t,n[t]);e.scheduleRender()}getProjectionStyles(e){var t,r;if(!this.instance||this.isSVG)return;if(!this.isVisible)return ak;let n={visibility:""},a=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,n.opacity="",n.pointerEvents=tt(null==e?void 0:e.pointerEvents)||"",n.transform=a?a(this.latestValues,""):"none",n;let o=this.getLead();if(!this.projectionDelta||!this.layout||!o.target){let t={};return this.options.layoutId&&(t.opacity=void 0!==this.latestValues.opacity?this.latestValues.opacity:1,t.pointerEvents=tt(null==e?void 0:e.pointerEvents)||""),this.hasProjected&&!nT(this.latestValues)&&(t.transform=a?a({},""):"none",this.hasProjected=!1),t}let i=o.animationValues||o.latestValues;this.applyTransformsToTarget(),n.transform=ab(this.projectionDeltaWithTransform,this.treeScale,i),a&&(n.transform=a(i,n.transform));let{x:s,y:l}=this.projectionDelta;for(let e in n.transformOrigin=`${100*s.origin}% ${100*l.origin}% 0`,o.animationValues?n.opacity=o===this?null!==(r=null!==(t=i.opacity)&&void 0!==t?t:this.latestValues.opacity)&&void 0!==r?r:1:this.preserveOpacity?this.latestValues.opacity:i.opacityExit:n.opacity=o===this?void 0!==i.opacity?i.opacity:"":void 0!==i.opacityExit?i.opacityExit:0,ep){if(void 0===i[e])continue;let{correct:t,applyTo:r}=ep[e],a="none"===n.transform?i[e]:t(i[e],o);if(r){let e=r.length;for(let t=0;t<e;t++)n[r[t]]=a}else n[e]=a}return this.options.layoutId&&(n.pointerEvents=o===this?tt(null==e?void 0:e.pointerEvents)||"":"none"),n}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(e=>{var t;return null===(t=e.currentAnimation)||void 0===t?void 0:t.stop()}),this.root.nodes.forEach(aP),this.root.sharedNodes.clear()}}}function aN(e){e.updateLayout()}function aS(e){var t;let r=(null===(t=e.resumeFrom)||void 0===t?void 0:t.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&r&&e.hasListeners("didUpdate")){let{layoutBox:t,measuredBox:n}=e.layout,{animationType:a}=e.options,o=r.source!==e.layout.source;"size"===a?nU(e=>{let n=o?r.measuredBox[e]:r.layoutBox[e],a=nb(n);n.min=t[e].min,n.max=n.min+a}):az(a,r.layoutBox,t)&&nU(n=>{let a=o?r.measuredBox[n]:r.layoutBox[n],i=nb(t[n]);a.max=a.min+i,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[n].max=e.relativeTarget[n].min+i)});let i=nO();nw(i,t,r.layoutBox);let s=nO();o?nw(s,e.applyTransform(n,!0),r.measuredBox):nw(s,t,r.layoutBox);let l=!ap(i),A=!1;if(!e.resumeFrom){let n=e.getClosestProjectingParent();if(n&&!n.resumeFrom){let{snapshot:a,layout:o}=n;if(a&&o){let i=nI();nj(i,r.layoutBox,a.layoutBox);let s=nI();nj(s,t,o.layoutBox),am(i,s)||(A=!0),n.options.layoutRoot&&(e.relativeTarget=s,e.relativeTargetOrigin=i,e.relativeParent=n)}}}e.notifyListeners("didUpdate",{layout:t,snapshot:r,delta:s,layoutDelta:i,hasLayoutChanged:l,hasRelativeTargetChanged:A})}else if(e.isLead()){let{onExitComplete:t}=e.options;t&&t()}e.options.transition=void 0}function aF(e){aj.totalNodes++,e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function aE(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function aO(e){e.clearSnapshot()}function aP(e){e.clearMeasurements()}function aI(e){e.isLayoutDirty=!1}function aU(e){let{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function aL(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function a_(e){e.resolveTargetDelta()}function aQ(e){e.calcProjection()}function aT(e){e.resetRotation()}function aD(e){e.removeLeadSnapshot()}function aM(e,t,r){e.translate=t7(t.translate,0,r),e.scale=t7(t.scale,1,r),e.origin=t.origin,e.originPoint=t.originPoint}function aH(e,t,r,n){e.min=t7(t.min,r.min,n),e.max=t7(t.max,r.max,n)}function aR(e){return e.animationValues&&void 0!==e.animationValues.opacityExit}let aK={duration:.45,ease:[.4,0,.1,1]},aV=e=>"undefined"!=typeof navigator&&navigator.userAgent.toLowerCase().includes(e),aq=aV("applewebkit/")&&!aV("chrome/")?Math.round:w;function aG(e){e.min=aq(e.min),e.max=aq(e.max)}function az(e,t,r){return"position"===e||"preserve-aspect"===e&&!ny(ag(t),ag(r),.2)}let aW=aC({attachResizeListener:(e,t)=>to(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),a$={current:void 0},aX=aC({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!a$.current){let e=new aW({});e.mount(window),e.setOptions({layoutScroll:!0}),a$.current=e}return a$.current},resetTransform:(e,t)=>{e.style.transform=void 0!==t?t:"none"},checkIsScrollRoot:e=>"fixed"===window.getComputedStyle(e).position}),aY=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function aJ(e,t,r=1){w(r<=4,`Max CSS variable fallback depth detected in property "${e}". This may indicate a circular fallback dependency.`);let[n,a]=function(e){let t=aY.exec(e);if(!t)return[,];let[,r,n]=t;return[r,n]}(e);if(!n)return;let o=window.getComputedStyle(t).getPropertyValue(n);if(o){let e=o.trim();return r1(e)?parseFloat(e):e}return eB(a)?aJ(a,t,r+1):a}let aZ=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),a0=e=>aZ.has(e),a1=e=>Object.keys(e).some(a0),a2=e=>e===eN||e===eT,a5=(e,t)=>parseFloat(e.split(", ")[t]),a4=(e,t)=>(r,{transform:n})=>{if("none"===n||!n)return 0;let a=n.match(/^matrix3d\((.+)\)$/);if(a)return a5(a[1],t);{let t=n.match(/^matrix\((.+)\)$/);return t?a5(t[1],e):0}},a3=new Set(["x","y","z"]),a6=em.filter(e=>!a3.has(e)),a8={width:({x:e},{paddingLeft:t="0",paddingRight:r="0"})=>e.max-e.min-parseFloat(t)-parseFloat(r),height:({y:e},{paddingTop:t="0",paddingBottom:r="0"})=>e.max-e.min-parseFloat(t)-parseFloat(r),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:a4(4,13),y:a4(5,14)};a8.translateX=a8.x,a8.translateY=a8.y;let a7=(e,t,r)=>{let n=t.measureViewportBox(),a=getComputedStyle(t.current),{display:o}=a,i={};"none"===o&&t.setStaticValue("display",e.display||"block"),r.forEach(e=>{i[e]=a8[e](n,a)}),t.render();let s=t.measureViewportBox();return r.forEach(r=>{let n=t.getValue(r);n&&n.jump(i[r]),e[r]=a8[r](s,a)}),e},a9=(e,t,r={},n={})=>{t={...t},n={...n};let a=Object.keys(t).filter(a0),o=[],i=!1,s=[];if(a.forEach(a=>{let l;let A=e.getValue(a);if(!e.hasValue(a))return;let c=r[a],d=nt(c),u=t[a];if(e7(u)){let e=u.length,t=null===u[0]?1:0;d=nt(c=u[t]);for(let r=t;r<e&&null!==u[r];r++)l?w(nt(u[r])===l,"All keyframes must be of the same type"):w((l=nt(u[r]))===d||a2(d)&&a2(l),"Keyframes must be of the same dimension as the current value")}else l=nt(u);if(d!==l){if(a2(d)&&a2(l)){let e=A.get();"string"==typeof e&&A.set(parseFloat(e)),"string"==typeof u?t[a]=parseFloat(u):Array.isArray(u)&&l===eT&&(t[a]=u.map(parseFloat))}else(null==d?void 0:d.transform)&&(null==l?void 0:l.transform)&&(0===c||0===u)?0===c?A.set(l.transform(c)):t[a]=d.transform(u):(i||(o=function(e){let t=[];return a6.forEach(r=>{let n=e.getValue(r);void 0!==n&&(t.push([r,n.get()]),n.set(r.startsWith("scale")?1:0))}),t.length&&e.render(),t}(e),i=!0),s.push(a),n[a]=void 0!==n[a]?n[a]:t[a],A.jump(u))}}),!s.length)return{target:t,transitionEnd:n};{let r=s.indexOf("height")>=0?window.pageYOffset:null,a=a7(t,e,s);return o.length&&o.forEach(([t,r])=>{e.getValue(t).set(r)}),e.render(),b&&null!==r&&window.scrollTo({top:r}),{target:a,transitionEnd:n}}},oe=(e,t,r,n)=>{let a=function(e,{...t},r){let n=e.current;if(!(n instanceof Element))return{target:t,transitionEnd:r};for(let a in r&&(r={...r}),e.values.forEach(e=>{let t=e.get();if(!eB(t))return;let r=aJ(t,n);r&&e.set(r)}),t){let e=t[a];if(!eB(e))continue;let o=aJ(e,n);o&&(t[a]=o,r||(r={}),void 0===r[a]&&(r[a]=e))}return{target:t,transitionEnd:r}}(e,t,n);return function(e,t,r,n){return a1(t)?a9(e,t,r,n):{target:t,transitionEnd:n}}(e,t=a.target,r,n=a.transitionEnd)},ot={current:null},or={current:!1},on=new WeakMap,oa=Object.keys(ec),oo=oa.length,oi=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],os=eo.length;class ol{constructor({parent:e,props:t,presenceContext:r,reducedMotionConfig:n,visualState:a},o={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>j.render(this.render,!1,!0);let{latestValues:i,renderState:s}=a;this.latestValues=i,this.baseTarget={...i},this.initialValues=t.initial?{...i}:{},this.renderState=s,this.parent=e,this.props=t,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=n,this.options=o,this.isControllingVariants=ei(t),this.isVariantNode=es(t),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);let{willChange:l,...A}=this.scrapeMotionValuesFromProps(t,{});for(let e in A){let t=A[e];void 0!==i[e]&&eb(t)&&(t.set(i[e],!1),r0(l)&&l.add(e))}}scrapeMotionValuesFromProps(e,t){return{}}mount(e){this.current=e,on.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((e,t)=>this.bindToMotionValue(t,e)),or.current||function(){if(or.current=!0,b){if(window.matchMedia){let e=window.matchMedia("(prefers-reduced-motion)"),t=()=>ot.current=e.matches;e.addListener(t),t()}else ot.current=!1}}(),this.shouldReduceMotion="never"!==this.reducedMotionConfig&&("always"===this.reducedMotionConfig||ot.current),this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){for(let e in on.delete(this.current),this.projection&&this.projection.unmount(),C(this.notifyUpdate),C(this.render),this.valueSubscriptions.forEach(e=>e()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this),this.events)this.events[e].clear();for(let e in this.features)this.features[e].unmount();this.current=null}bindToMotionValue(e,t){let r=eg.has(e),n=t.on("change",t=>{this.latestValues[e]=t,this.props.onUpdate&&j.update(this.notifyUpdate,!1,!0),r&&this.projection&&(this.projection.isTransformDirty=!0)}),a=t.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(e,()=>{n(),a()})}sortNodePosition(e){return this.current&&this.sortInstanceNodePosition&&this.type===e.type?this.sortInstanceNodePosition(this.current,e.current):0}loadFeatures({children:e,...t},r,n,a){let o,i;for(let e=0;e<oo;e++){let r=oa[e],{isEnabled:n,Feature:a,ProjectionNode:s,MeasureLayout:l}=ec[r];s&&(o=s),n(t)&&(!this.features[r]&&a&&(this.features[r]=new a(this)),l&&(i=l))}if(("html"===this.type||"svg"===this.type)&&!this.projection&&o){this.projection=new o(this.latestValues,this.parent&&this.parent.projection);let{layoutId:e,layout:r,drag:n,dragConstraints:i,layoutScroll:s,layoutRoot:l}=t;this.projection.setOptions({layoutId:e,layout:r,alwaysMeasureLayout:!!n||i&&et(i),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:"string"==typeof r?r:"both",initialPromotionConfig:a,layoutScroll:s,layoutRoot:l})}return i}updateFeatures(){for(let e in this.features){let t=this.features[e];t.isMounted?t.update():(t.mount(),t.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):nI()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}makeTargetAnimatable(e,t=!0){return this.makeTargetAnimatableFromInstance(e,this.props,t)}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let t=0;t<oi.length;t++){let r=oi[t];this.propEventSubscriptions[r]&&(this.propEventSubscriptions[r](),delete this.propEventSubscriptions[r]);let n=e["on"+r];n&&(this.propEventSubscriptions[r]=this.on(r,n))}this.prevMotionValues=function(e,t,r){let{willChange:n}=t;for(let a in t){let o=t[a],i=r[a];if(eb(o))e.addValue(a,o),r0(n)&&n.add(a);else if(eb(i))e.addValue(a,r7(o,{owner:e})),r0(n)&&n.remove(a);else if(i!==o){if(e.hasValue(a)){let t=e.getValue(a);t.hasAnimated||t.set(o)}else{let t=e.getStaticValue(a);e.addValue(a,r7(void 0!==t?t:o,{owner:e}))}}}for(let n in r)void 0===t[n]&&e.removeValue(n);return t}(this,this.scrapeMotionValuesFromProps(e,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(e=!1){if(e)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){let e=this.parent&&this.parent.getVariantContext()||{};return void 0!==this.props.initial&&(e.initial=this.props.initial),e}let t={};for(let e=0;e<os;e++){let r=eo[e],n=this.props[r];(er(n)||!1===n)&&(t[r]=n)}return t}addVariantChild(e){let t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){t!==this.values.get(e)&&(this.removeValue(e),this.bindToMotionValue(e,t)),this.values.set(e,t),this.latestValues[e]=t.get()}removeValue(e){this.values.delete(e);let t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return void 0===r&&void 0!==t&&(r=r7(t,{owner:this}),this.addValue(e,r)),r}readValue(e){var t;return void 0===this.latestValues[e]&&this.current?null!==(t=this.getBaseTargetFromProps(this.props,e))&&void 0!==t?t:this.readValueFromInstance(this.current,e,this.options):this.latestValues[e]}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){var t;let{initial:r}=this.props,n="string"==typeof r||"object"==typeof r?null===(t=e8(this.props,r))||void 0===t?void 0:t[e]:void 0;if(r&&void 0!==n)return n;let a=this.getBaseTargetFromProps(this.props,e);return void 0===a||eb(a)?void 0!==this.initialValues[e]&&void 0===n?void 0:this.baseTarget[e]:a}on(e,t){return this.events[e]||(this.events[e]=new r4),this.events[e].add(t)}notify(e,...t){this.events[e]&&this.events[e].notify(...t)}}class oA extends ol{sortInstanceNodePosition(e,t){return 2&e.compareDocumentPosition(t)?1:-1}getBaseTargetFromProps(e,t){return e.style?e.style[t]:void 0}removeValueFromRenderState(e,{vars:t,style:r}){delete t[e],delete r[e]}makeTargetAnimatableFromInstance({transition:e,transitionEnd:t,...r},{transformValues:n},a){let o=function(e,t,r){let n={};for(let a in e){let e=function(e,t){if(t)return(t[e]||t.default||t).from}(a,t);if(void 0!==e)n[a]=e;else{let e=r.getValue(a);e&&(n[a]=e.get())}}return n}(r,e||{},this);if(n&&(t&&(t=n(t)),r&&(r=n(r)),o&&(o=n(o))),a){!function(e,t,r){var n,a;let o=Object.keys(t).filter(t=>!e.hasValue(t)),i=o.length;if(i)for(let s=0;s<i;s++){let i=o[s],l=t[i],A=null;Array.isArray(l)&&(A=l[0]),null===A&&(A=null!==(a=null!==(n=r[i])&&void 0!==n?n:e.readValue(i))&&void 0!==a?a:t[i]),null!=A&&("string"==typeof A&&(r1(A)||rX(A))?A=parseFloat(A):!nn(A)&&rh.test(l)&&(A=r$(i,l)),e.addValue(i,r7(A,{owner:e})),void 0===r[i]&&(r[i]=A),null!==A&&e.setBaseTarget(i,A))}}(this,r,o);let e=oe(this,r,o,t);t=e.transitionEnd,r=e.target}return{transition:e,transitionEnd:t,...r}}}class oc extends oA{constructor(){super(...arguments),this.type="html"}readValueFromInstance(e,t){if(eg.has(t)){let e=rW(t);return e&&e.default||0}{let r=window.getComputedStyle(e),n=(ek(t)?r.getPropertyValue(t):r[t])||0;return"string"==typeof n?n.trim():n}}measureInstanceViewportBox(e,{transformPagePoint:t}){return n$(e,t)}build(e,t,r,n){eV(e,t,r,n.transformTemplate)}scrapeMotionValuesFromProps(e,t){return e3(e,t)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);let{children:e}=this.props;eb(e)&&(this.childSubscription=e.on("change",e=>{this.current&&(this.current.textContent=`${e}`)}))}renderInstance(e,t,r,n){e2(e,t,r,n)}}class od extends oA{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(eg.has(t)){let e=rW(t);return e&&e.default||0}return t=e5.has(t)?t:Z(t),e.getAttribute(t)}measureInstanceViewportBox(){return nI()}scrapeMotionValuesFromProps(e,t){return e6(e,t)}build(e,t,r,n){eZ(e,t,r,this.isSVGTag,n.transformTemplate)}renderInstance(e,t,r,n){e4(e,t,r,n)}mount(e){this.isSVGTag=e1(e.tagName),super.mount(e)}}let ou=(e,t)=>ef(e)?new od(t,{enableHardwareAcceleration:!1}):new oc(t,{enableHardwareAcceleration:!0}),oh={animation:{Feature:nc},exit:{Feature:nu},inView:{Feature:tF},tap:{Feature:tk},focus:{Feature:ty},hover:{Feature:tb},pan:{Feature:n2},drag:{Feature:n0,ProjectionNode:aX,MeasureLayout:n8},layout:{ProjectionNode:aX,MeasureLayout:n8}},of=function(e){function t(t,r={}){return function({preloadedFeatures:e,createVisualElement:t,useRender:r,useVisualState:n,Component:a}){e&&function(e){for(let t in e)ec[t]={...ec[t],...e[t]}}(e);let o=(0,g.forwardRef)(function(o,i){var s;let l;let A={...(0,g.useContext)(X),...o,layoutId:function({layoutId:e}){let t=(0,g.useContext)(L).id;return t&&void 0!==e?t+"-"+e:e}(o)},{isStatic:c}=A,d=function(e){let{initial:t,animate:r}=function(e,t){if(ei(e)){let{initial:t,animate:r}=e;return{initial:!1===t||er(t)?t:void 0,animate:er(r)?r:void 0}}return!1!==e.inherit?t:{}}(e,(0,g.useContext)(Y));return(0,g.useMemo)(()=>({initial:t,animate:r}),[el(t),el(r)])}(o),u=n(o,c);if(!c&&b){d.visualElement=function(e,t,r,n){let{visualElement:a}=(0,g.useContext)(Y),o=(0,g.useContext)(J),i=(0,g.useContext)(F),s=(0,g.useContext)(X).reducedMotion,l=(0,g.useRef)();n=n||o.renderer,!l.current&&n&&(l.current=n(e,{visualState:t,parent:a,props:r,presenceContext:i,blockInitialAnimation:!!i&&!1===i.initial,reducedMotionConfig:s}));let A=l.current;(0,g.useInsertionEffect)(()=>{A&&A.update(r,i)});let c=(0,g.useRef)(!!(r[ee]&&!window.HandoffComplete));return y(()=>{A&&(A.render(),c.current&&A.animationState&&A.animationState.animateChanges())}),(0,g.useEffect)(()=>{A&&(A.updateFeatures(),!c.current&&A.animationState&&A.animationState.animateChanges(),c.current&&(c.current=!1,window.HandoffComplete=!0))}),A}(a,u,A,t);let r=(0,g.useContext)(ed),n=(0,g.useContext)(J).strict;d.visualElement&&(l=d.visualElement.loadFeatures(A,n,e,r))}return g.createElement(Y.Provider,{value:d},l&&d.visualElement?g.createElement(l,{visualElement:d.visualElement,...A}):null,r(a,o,(s=d.visualElement,(0,g.useCallback)(e=>{e&&u.mount&&u.mount(e),s&&(e?s.mount(e):s.unmount()),i&&("function"==typeof i?i(e):et(i)&&(i.current=e))},[s])),u,c,d.visualElement))});return o[eu]=a,o}(e(t,r))}if("undefined"==typeof Proxy)return t;let r=new Map;return new Proxy(t,{get:(e,n)=>(r.has(n)||r.set(n,t(n)),r.get(n))})}((e,t)=>(function(e,{forwardMotionProps:t=!1},r,n){return{...ef(e)?tn:ta,preloadedFeatures:r,useRender:function(e=!1){return(t,r,n,{latestValues:a},o)=>{let i=(ef(t)?function(e,t,r,n){let a=(0,g.useMemo)(()=>{let r=e0();return eZ(r,t,{enableHardwareAcceleration:!1},e1(n),e.transformTemplate),{...r.attrs,style:{...r.style}}},[t]);if(e.style){let t={};eG(t,e.style,e),a.style={...t,...a.style}}return a}:function(e,t,r){let n={},a=function(e,t,r){let n=e.style||{},a={};return eG(a,n,e),Object.assign(a,function({transformTemplate:e},t,r){return(0,g.useMemo)(()=>{let n=eq();return eV(n,t,{enableHardwareAcceleration:!r},e),Object.assign({},n.vars,n.style)},[t])}(e,t,r)),e.transformValues?e.transformValues(a):a}(e,t,r);return e.drag&&!1!==e.dragListener&&(n.draggable=!1,a.userSelect=a.WebkitUserSelect=a.WebkitTouchCallout="none",a.touchAction=!0===e.drag?"none":`pan-${"x"===e.drag?"y":"x"}`),void 0===e.tabIndex&&(e.onTap||e.onTapStart||e.whileTap)&&(n.tabIndex=0),n.style=a,n})(r,a,o,t),s={...function(e,t,r){let n={};for(let a in e)("values"!==a||"object"!=typeof e.values)&&(e$(a)||!0===r&&eW(a)||!t&&!eW(a)||e.draggable&&a.startsWith("onDrag"))&&(n[a]=e[a]);return n}(r,"string"==typeof t,e),...i,ref:n},{children:l}=r,A=(0,g.useMemo)(()=>eb(l)?l.get():l,[l]);return(0,g.createElement)(t,{...s,children:A})}}(t),createVisualElement:n,Component:e}})(e,t,oh,ou));!function(e){e.POS="POS",e.Dashboard="Dashboard",e.Inventory="Inventory",e.Purchases="Purchases",e.Suppliers="Suppliers",e.AccountsPayable="AccountsPayable",e.PaymentSummary="PaymentSummary",e.ShiftReport="ShiftReport",e.SalesHistory="SalesHistory",e.Customers="Customers",e.Quotations="Quotations",e.CreateQuotation="CreateQuotation",e.Staff="Staff",e.TimeSheets="TimeSheets",e.Settings="Settings",e.TaxReport="TaxReport",e.ProfitReport="ProfitReport",e.FiscalPeriodReport="FiscalPeriodReport",e.Accounts="Accounts",e.GeneralLedger="GeneralLedger",e.ChartOfAccounts="ChartOfAccounts",e.ReturnReceipt="ReturnReceipt",e.NewExpense="NewExpense",e.Expenditures="Expenditures",e.SalesOrder="SalesOrder",e.Layaway="Layaway",e.WorkOrder="WorkOrder",e.HeldReceipts="HeldReceipts",e.SalesOrderList="SalesOrderList",e.LayawayList="LayawayList",e.WorkOrderList="WorkOrderList",e.OpenCashDrawer="OpenCashDrawer",e.WhatsAppOrders="WhatsAppOrders"}(sf||(sf={}));let op=["Cost of Goods Sold","Rent","Salaries & Wages","Utilities (Electricity, Water)","Marketing & Advertising","Office Supplies","Repairs & Maintenance","Transportation & Fuel","Bank Fees & Charges","Insurance","Taxes & Licenses","Travel & Entertainment","Meals & Refreshments","Miscellaneous"],om={id:"banduka_pos_settings",isSetupComplete:!1,businessType:"GeneralRetail",businessInfo:{name:"ERUNS TECHNOLOGIES",kraPin:"",logoUrl:"",location:"",phone:"",email:"admin@pos.pos",branch:"Main Branch",currency:"KES",language:"en-US"},tax:{vatEnabled:!0,vatRate:16,pricingType:"inclusive",etimsEnabled:!1},discount:{enabled:!0,type:"percentage",maxValue:10},receipt:{footer:"Thank you for your business!\nBidhaa zilizouzwa hazirudishwi.",invoicePrefix:"INV-",quotePrefix:"QUO-",poNumberPrefix:"PO-",layawayPrefix:"LAY-",workOrderPrefix:"WO-",salesOrderPrefix:"SO-"},layaway:{minDepositPercentage:20,maxDurationDays:90},hardware:{printer:{type:"ESC/POS",connection:"USB",name:"",address:""},barcodeScanner:{enabled:!0},barcodePrinter:{enabled:!1,type:"Image",connection:"USB",name:""}},loyalty:{enabled:!0,pointsPerKsh:100,redemptionRate:.5,minRedeemablePoints:100,maxRedemptionPercentage:50},measurements:{enabled:!1,units:["pc(s)","in","cm","m","kg","g","sq ft","ltr","hr"]},permissions:{Admin:["view_dashboard","view_pos","view_inventory","edit_inventory","delete_inventory","view_purchases","manage_purchases","view_ap","manage_ap","view_shift_report","view_sales_history","view_customers","manage_customers","view_settings","view_quotations","manage_quotations","view_staff","manage_staff","view_timesheets","manage_timesheets","manage_returns","manage_expenditures","manage_sales_orders","manage_layaways","manage_work_orders","view_held_receipts","open_cash_drawer","view_payment_summary","manage_whatsapp_orders","view_suppliers","manage_suppliers","view_profit_report","view_general_ledger"],Cashier:["view_pos","view_shift_report","view_customers","open_cash_drawer"],Supervisor:["view_dashboard","view_pos","view_inventory","edit_inventory","view_purchases","manage_purchases","view_ap","manage_ap","view_shift_report","view_sales_history","view_customers","manage_customers","view_quotations","manage_quotations","view_staff","view_timesheets","manage_timesheets","manage_returns","manage_expenditures","manage_sales_orders","manage_layaways","manage_work_orders","view_held_receipts","open_cash_drawer","view_payment_summary","manage_whatsapp_orders","view_suppliers","manage_suppliers","view_profit_report","view_general_ledger"],Accountant:["view_dashboard","view_purchases","manage_purchases","view_ap","manage_ap","view_sales_history","view_customers","view_payment_summary","view_suppliers","manage_suppliers","view_profit_report","view_general_ledger"]},paymentMethods:{enabled:!1,displayOnDocuments:["Invoice","Quotation","Receipt"],bank:[],mpesaPaybill:{paybillNumber:"",accountNumber:""},mpesaTill:{tillNumber:""}},inventory:{lowStockThreshold:10,definedCategories:[],expenseCategories:op},accounting:{defaultCashAccountId:"",defaultMpesaAccountId:"",defaultCardAccountId:"",defaultBankAccountId:"",defaultSalesAccountId:"",defaultVatPayableAccountId:"",defaultVatReceivableAccountId:"acc_vat_receivable",defaultCogsAccountId:"",defaultInventoryAccountId:"",defaultSalesReturnAccountId:"",defaultAccountsPayableId:"",defaultCustomerDepositsId:"",defaultShiftClearingId:""}},og={GeneralRetail:{name:"General Retail",description:"For kiosks, shops, boutiques, hardware stores, or any business selling physical items.",icon:(0,m.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24",fill:"currentColor",children:[m.jsx("path",{d:"M17.21 9 12.83 2.44a1 1 0 0 0-1.66 0L6.79 9H2l4 12h12l4-12h-4.79Z"}),m.jsx("path",{d:"M9 9h6l-3-5Z"})]})},Restaurant:{name:"Restaurant / Cafe",description:"For businesses serving food and drinks, with features for table management and kitchen orders.",icon:(0,m.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24",fill:"currentColor",children:[m.jsx("path",{d:"M12 6a3 3 0 0 1 3 3H9a3 3 0 0 1 3-3Z"}),m.jsx("path",{d:"M21.94 11.3C21.74 10.54 21 10 20.14 10H3.86c-.86 0-1.6.54-1.8 1.3l-1.06 4.24A1 1 0 0 0 2 17h20a1 1 0 0 0 .94-1.46l-1-4.24Z"}),m.jsx("path",{d:"M2 20h20v2H2z"})]})},Salon:{name:"Salon / Barber",description:"For spas, salons, and barbershops with appointment booking and stylist management.",icon:(0,m.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24",fill:"currentColor",children:[m.jsx("path",{d:"M21 2H3v2h18V2Zm0 4H3v2h18V6Zm0 4H3v2h18v-2Zm0 4H3v2h18v-2Z"}),m.jsx("path",{d:"M7 16a3 3 0 1 0 0-6 3 3 0 0 0 0 6Zm0 2a5 5 0 1 1 0-10 5 5 0 0 1 0 10Zm9.46-3.54L9.5 7.5a1 1 0 0 1 1.41-1.41l6.96 6.96a1 1 0 0 1-1.41 1.42Z"}),m.jsx("path",{d:"M17 10a3 3 0 1 0 0-6 3 3 0 0 0 0 6Zm0 2a5 5 0 1 1 0-10 5 5 0 0 1 0 10Z"})]})},Services:{name:"Professional Services",description:"For consultants, repair shops, or any business selling time-based or custom services.",icon:(0,m.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24",fill:"currentColor",children:[m.jsx("path",{d:"M19.43 12.98c.04-.32.07-.64.07-.98s-.03-.66-.07-.98l2.11-1.65c.19-.15.24-.42.12-.64l-2-3.46a.5.5 0 0 0-.61-.22l-2.49 1c-.52-.4-1.08-.73-1.69-.98l-.38-2.65A.5.5 0 0 0 14 2H10a.5.5 0 0 0-.49.42l-.38 2.65c-.61.25-1.17.59-1.69.98l-2.49-1a.5.5 0 0 0-.61.22l-2 3.46a.5.5 0 0 0 .12.64l2.11 1.65c-.04.32-.07.65-.07.98s.03.66.07.98l-2.11 1.65a.5.5 0 0 0-.12.64l2 3.46a.5.5 0 0 0 .61.22l2.49-1c.52.4 1.08.73 1.69.98l.38 2.65a.5.5 0 0 0 .49.42h4a.5.5 0 0 0 .49.42l.38-2.65c.61-.25 1.17-.59-1.69.98l2.49 1a.5.5 0 0 0 .61.22l2-3.46a.5.5 0 0 0-.12-.64l-2.11-1.65ZM12 15.5a3.5 3.5 0 1 1 0-7 3.5 3.5 0 0 1 0 7Z"}),m.jsx("path",{d:"M12 13.5a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Z"})]})}},ox={pos:(0,m.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("circle",{cx:"9",cy:"21",r:"1"}),m.jsx("circle",{cx:"20",cy:"21",r:"1"}),m.jsx("path",{d:"M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"})]}),dashboard:(0,m.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("rect",{x:"3",y:"3",width:"7",height:"7"}),m.jsx("rect",{x:"14",y:"3",width:"7",height:"7"}),m.jsx("rect",{x:"14",y:"14",width:"7",height:"7"}),m.jsx("rect",{x:"3",y:"14",width:"7",height:"7"})]}),inventory:(0,m.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("path",{d:"M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"}),m.jsx("polyline",{points:"3.27 6.96 12 12.01 20.73 6.96"}),m.jsx("line",{x1:"12",y1:"22.08",x2:"12",y2:"12"})]}),purchases:(0,m.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("path",{d:"M6 2L3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4z"}),m.jsx("line",{x1:"3",y1:"6",x2:"21",y2:"6"}),m.jsx("path",{d:"M16 10a4 4 0 0 1-8 0"})]}),suppliers:(0,m.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("path",{d:"M17.5 17.5c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm-11 0c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4z"}),m.jsx("path",{d:"M22 17.5v-2.2c0-2.09-1.7-3.8-3.79-3.8-1.49 0-2.8.88-3.47 2.22"}),m.jsx("path",{d:"M2 15.3c0-2.09 1.7-3.8 3.79-3.8 1.49 0 2.8.88 3.47 2.22"}),m.jsx("path",{d:"M12 11.3V5.5a2 2 0 0 1 2-2h4.5a2 2 0 0 1 2 2v2.5"}),m.jsx("path",{d:"M12 11.3V5.5a2 2 0 0 0-2-2H5.5a2 2 0 0 0-2 2v2.5"})]}),quotations:(0,m.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"}),m.jsx("rect",{x:"8",y:"2",width:"8",height:"4",rx:"1",ry:"1"}),m.jsx("path",{d:"m9 14 2 2 4-4"})]}),ap:(0,m.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24",fill:"currentColor",children:[m.jsx("path",{d:"M22 8a2 2 0 0 0-2-2h-1a3 3 0 0 0-3 3v2c0 1.1-.9 2-2 2h-4v2h4a4 4 0 0 1 4-4V8Zm-8 4H4a2 2 0 0 0-2 2v2a2 2 0 0 0 2 2h10v-6Z"}),m.jsx("path",{d:"M6.5 6.5A3.5 3.5 0 1 1 3 3a3.5 3.5 0 0 1 3.5 3.5Z"})]}),tax:(0,m.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24",fill:"currentColor",children:[m.jsx("path",{d:"M19 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V5a2 2 0 0 0-2-2Zm-8 14H9v-2h2v2Zm0-4H9v-2h2v2Zm0-4H9V7h2v2Zm4 8h-2v-2h2v2Zm0-4h-2v-2h2v2Zm0-4h-2V7h2v2Z"}),m.jsx("path",{d:"M9 17h2v-2H9v2Zm0-4h2v-2H9v2Zm0-4h2V7H9v2Zm4 8h2v-2h-2v2Zm0-4h2v-2h-2v2Zm0-4h2V7h-2v2Z"})]}),paymentSummary:(0,m.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24",fill:"currentColor",children:[m.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2Zm0 15a5 5 0 1 1 0-10 5 5 0 0 1 0 10Z"}),m.jsx("path",{d:"M12 14c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2Z"})]}),revenue:(0,m.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24",fill:"currentColor",children:[m.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2Zm0 15a5 5 0 1 1 0-10 5 5 0 0 1 0 10Z"}),m.jsx("path",{d:"M12 14c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2Z"})]}),shiftReport:(0,m.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24",fill:"currentColor",children:[m.jsx("path",{d:"M20 7h-2V4h-4v3H6V4H2v3h2v13h16V7h2V4h-4v3ZM8 6h8V2H8v4Z"}),m.jsx("path",{d:"M20 7V4h-4v3h-2V4h-4v3H8V4H4v3H2v13h18V7h-2Zm-4 11h-2v-2h2v2Zm0-4h-2v-2h2v2Zm0-4h-2V8h2v2Z"})]}),salesHistory:(0,m.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("path",{d:"M1 4v6h6"}),m.jsx("path",{d:"M3.51 15a9 9 0 1 0 2.13-9.36L1 10"})]}),customers:(0,m.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("path",{d:"M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"}),m.jsx("circle",{cx:"9",cy:"7",r:"4"}),m.jsx("path",{d:"M23 21v-2a4 4 0 0 0-3-3.87"}),m.jsx("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"})]}),staff:(0,m.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24",fill:"currentColor",children:[m.jsx("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4Z"}),m.jsx("path",{d:"M12 14c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4Z"})]}),timeSheets:(0,m.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("circle",{cx:"12",cy:"12",r:"10"}),m.jsx("polyline",{points:"12 6 12 12 16 14"})]}),settings:(0,m.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("circle",{cx:"12",cy:"12",r:"3"}),m.jsx("path",{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"})]}),profitReport:m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24",fill:"currentColor",children:m.jsx("path",{d:"M16 6l2.29 2.29-4.88 4.88-4-4L2 16.59 3.41 18l6-6 4 4 6.3-6.29L22 12V6z"})}),install:(0,m.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24",fill:"currentColor",children:[m.jsx("path",{d:"M19 9h-4V3H9v6H5l7 7 7-7Z"}),m.jsx("path",{d:"M5 18v2h14v-2H5Z"})]}),bell:m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24",fill:"currentColor",children:m.jsx("path",{d:"M12 22c1.1 0 2-.9 2-2h-4c0 1.1.9 2 2 2Zm6-6v-5c0-3.07-1.63-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.64 5.36 6 7.92 6 11v5l-2 2v1h16v-1l-2-2Z"})}),moon:m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24",fill:"currentColor",children:m.jsx("path",{d:"M10 2c-1.82 0-3.53.5-5 1.35C7.99 5.08 10 8.3 10 12s-2.01 6.92-5 8.65C6.47 21.5 8.18 22 10 22c5.52 0 10-4.48 10-10S15.52 2 10 2Z"})}),sun:m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24",fill:"currentColor",children:m.jsx("path",{d:"M12 7c-2.76 0-5 2.24-5 5s2.24 5 5 5 5-2.24 5-5-2.24-5-5-5zM2 13h2c.55 0 1-.45 1-1s-.45-1-1-1H2c-.55 0-1 .45-1 1s.45 1 1 1zm18 0h2c.55 0 1-.45 1-1s-.45-1-1-1h-2c-.55 0-1 .45-1 1s.45 1 1 1zM11 2v2c0 .55.45 1 1 1s1-.45 1-1V2c0-.55-.45-1-1-1s-1 .45-1 1zm0 18v2c0 .55.45 1 1 1s1-.45 1-1v-2c0-.55-.45-1-1-1s-1 .45-1 1zM5.64 5.64c.39.39 1.02.39 1.41 0 .39-.39.39-1.02 0-1.41-.39-.39-1.02-.39-1.41 0-.39.39-.39 1.02 0 1.41zm12.72 12.72c.39.39 1.02.39 1.41 0 .39-.39.39-1.02 0-1.41-.39-.39-1.02-.39-1.41 0-.39.39-.39 1.02 0 1.41zM5.64 18.36c-.39.39-.39 1.02 0 1.41.39.39 1.02.39 1.41 0 .39-.39.39-1.02 0-1.41-.39-.39-1.02-.39-1.41 0zm12.72-12.72c-.39.39-.39 1.02 0 1.41.39.39 1.02.39 1.41 0 .39-.39.39-1.02 0-1.41-.39-.39-1.02-.39-1.41 0z"})}),logout:(0,m.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}),m.jsx("polyline",{points:"16 17 21 12 16 7"}),m.jsx("line",{x1:"21",y1:"12",x2:"9",y2:"12"})]}),business:(0,m.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24",fill:"currentColor",children:[m.jsx("path",{d:"M12 7V3H2v18h20V7H12ZM6 19H4v-2h2v2Zm0-4H4v-2h2v2Zm0-4H4V9h2v2Zm0-4H4V5h2v2Zm4 12H8v-2h2v2Zm0-4H8v-2h2v2Zm0-4H8V9h2v2Zm0-4H8V5h2v2Zm10 12h-8v-2h2v-2h-2v-2h2v-2h-2V9h8v10Zm-2-8h-2v2h2v-2Zm0 4h-2v2h2v-2Z"}),m.jsx("path",{d:"M6 5h2v2H6V5Zm0 4h2v2H6V9Zm0 4h2v2H6v-2Zm0 4h2v2H6v-2Zm4-12h2v2h-2V5Zm0 4h2v2h-2V9Zm0 4h2v2h-2v-2Zm6-4h2v2h-2V9Zm0 4h2v2h-2v-2Z"})]}),hardware:(0,m.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24",fill:"currentColor",children:[m.jsx("path",{d:"M18 19H6v-4h12v4Z"}),m.jsx("path",{d:"M18 11H6c-1.66 0-3 1.34-3 3v6h4v-2h10v2h4v-6c0-1.66-1.34-3-3-3Zm1-7H5c-1.1 0-2 .9-2 2v4h18V6c0-1.1-.9-2-2-2Z"})]}),receipt:(0,m.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24",fill:"currentColor",children:[m.jsx("path",{d:"M18 17H6v-2h12v2Zm0-4H6v-2h12v2Zm0-4H6V7h12v2ZM3 22l1.5-1.5L6 22l1.5-1.5L9 22l1.5-1.5L12 22l1.5-1.5L15 22l1.5-1.5L18 22l1.5-1.5L21 22V2l-1.5 1.5L18 2l-1.5 1.5L15 2l-1.5 1.5L12 2l-1.5 1.5L9 2 7.5 3.5 6 2 4.5 3.5 3 2v20Z"}),m.jsx("path",{d:"M6 9h12V7H6v2Zm0 4h12v-2H6v2Zm0 4h12v-2H6v2Z"})]}),discount:(0,m.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24",fill:"currentColor",children:[m.jsx("path",{d:"M12.79 2.29a1 1 0 0 0-1.58 0L2.29 11.21a1 1 0 0 0 0 1.58l8.92 8.92a1 1 0 0 0 1.58 0l8.92-8.92a1 1 0 0 0 0-1.58L12.79 2.29ZM8 8a2 2 0 1 1 0-4 2 2 0 0 1 0 4Zm8 8a2 2 0 1 1 0-4 2 2 0 0 1 0 4Z"}),m.jsx("path",{d:"M8 7a1 1 0 1 0 0-2 1 1 0 0 0 0 2Zm8 8a1 1 0 1 0 0-2 1 1 0 0 0 0 2Z"})]}),loyalty:(0,m.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24",fill:"currentColor",children:[m.jsx("path",{d:"M12 21.35 10.55 20C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35Z"}),m.jsx("path",{d:"M7.5 5C5.5 5 4 6.5 4 8.5c0 2.5 2.5 4.5 6 7.5h4c3.5-3 6-5 6-7.5C20 6.5 18.5 5 16.5 5c-1.5 0-2.8.9-3.5 2.1-.2.3-.5.5-.9.5s-.7-.2-.9-.5C10.3 5.9 9 5 7.5 5Z"})]}),rewardManager:(0,m.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24",fill:"currentColor",children:[m.jsx("path",{d:"M12 21.35 10.55 20C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35Z"}),m.jsx("path",{d:"M7.5 5C5.5 5 4 6.5 4 8.5c0 2.5 2.5 4.5 6 7.5h4c3.5-3 6-5 6-7.5C20 6.5 18.5 5 16.5 5c-1.5 0-2.8.9-3.5 2.1-.2.3-.5.5-.9.5s-.7-.2-.9-.5C10.3 5.9 9 5 7.5 5Z"})]}),measurements:(0,m.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24",fill:"currentColor",children:[m.jsx("path",{d:"M21 6H3c-1.1 0-2 .9-2 2v8c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2Zm0 10H3V8h18v8Z"}),m.jsx("path",{d:"M9 10h2v4H9v-4Zm4 0h2v4h-2v-4Zm-8-2h2v4H5v-4Z"})]}),users:(0,m.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24",fill:"currentColor",children:[m.jsx("path",{d:"M12 12.25c1.24 0 2.25-1.01 2.25-2.25S13.24 7.75 12 7.75 9.75 8.76 9.75 10s1.01 2.25 2.25 2.25Z"}),m.jsx("path",{d:"M12 2a4 4 0 1 0 0 8 4 4 0 0 0 0-8Zm0 10c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4Z"})]}),email:(0,m.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24",fill:"currentColor",children:[m.jsx("path",{d:"M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2Zm0 4-8 5-8-5V6l8 5 8-5v2Z"}),m.jsx("path",{d:"m4 8 8 5 8-5v-2l-8 5-8-5Z"})]}),sms:(0,m.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24",fill:"currentColor",children:[m.jsx("path",{d:"M20 2H4c-1.1 0-2 .9-2 2v18l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2Z"}),m.jsx("path",{d:"M6 9h12v2H6V9Zm0 3h8v2H6v-2Z"})]}),whatsapp:(0,m.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24",fill:"currentColor",children:[m.jsx("path",{d:"M16.75 13.96c.25.41.4 1.12.28 1.66-.12.54-1.03 1.1-1.33 1.15-.3.05-.72.23-2.93-1.07-2.21-1.3-3.66-3.48-3.8-3.68-.14-.2-.72-1.02-.72-1.92s.44-1.35.6-1.55c.16-.2.35-.25.5-.25s.33-.04.48.11c.15.15.48.55.53.59s.05.15.11.39c.06.24.03.4-.03.55-.06.15-.22.38-.33.5s-.22.25-.09.5c.13.25.64 1.13 1.45 1.83.99.88 1.63 1.12 1.88 1.23.25.11.4.1.54-.04.14-.14.61-.7.78-.92.17-.22.34-.18.54-.08l.15.08Z"}),m.jsx("path",{d:"M20.1 3.9C17.9 1.7 15.1 0 12 0 5.4 0 0 5.4 0 12c0 2.2.6 4.3 1.7 6.1L0 24l6.3-1.6c1.8.9 3.8 1.5 5.9 1.5h.1c6.6 0 12-5.4 12-12 0-3.1-1.2-6-3.3-8.1Z"})]}),mpesa:(0,m.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24",fill:"currentColor",children:[m.jsx("path",{d:"M17 1H7c-1.1 0-2 .9-2 2v18c0 1.1.9 2 2 2h10c1.1 0 2-.9 2-2V3c0-1.1-.9-2-2-2Zm0 18H7V5h10v14Z"}),m.jsx("path",{d:"M8 7h8v2H8V7Z"})]}),audit:(0,m.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24",fill:"currentColor",children:[m.jsx("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8l-6-6Z"}),m.jsx("path",{d:"M11 15H8v-2h3v2Zm0-4H8V9h3v2Zm3 4h-2v-2h2v2Zm0-4h-2V9h2v2Z"})]}),accounts:(0,m.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("line",{x1:"12",y1:"1",x2:"12",y2:"23"}),m.jsx("path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"})]}),clipboardList:(0,m.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"}),m.jsx("rect",{x:"8",y:"2",width:"8",height:"4",rx:"1",ry:"1"}),m.jsx("line",{x1:"8",y1:"12",x2:"16",y2:"12"}),m.jsx("line",{x1:"8",y1:"16",x2:"16",y2:"16"}),m.jsx("line",{x1:"10",y1:"8",x2:"10",y2:"8"})]}),generalLedger:(0,m.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24",fill:"currentColor",children:[m.jsx("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8l-6-6Z"}),m.jsx("path",{d:"M11 15H8v-2h3v2Zm0-4H8V9h3v2Zm3 4h-2v-2h2v2Zm0-4h-2V9h2v2Z"})]}),data:(0,m.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24",fill:"currentColor",children:[m.jsx("path",{d:"M12 2C6.5 2 2 3.8 2 6v12c0 2.2 4.5 4 10 4s10-1.8 10-4V6c0-2.2-4.5-4-10-4Z"}),m.jsx("path",{d:"M12 4c4.4 0 8 1.3 8 3s-3.6 3-8 3-8-1.3-8-3 3.6-3 8-3Z"})]}),reset:(0,m.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24",fill:"currentColor",children:[m.jsx("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12Z"}),m.jsx("path",{d:"M19 4h-3.5l-1-1h-5l-1 1H5v2h14V4Z"})]}),barcode:m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24",fill:"currentColor",children:m.jsx("path",{d:"M4 6h2v12H4V6Zm4 0h2v12H8V6Zm3 0h1v12h-1V6Zm3 0h2v12h-2V6Zm3 0h2v12h-2V6Z"})}),production:(0,m.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24",fill:"currentColor",children:[m.jsx("path",{d:"M22 22H2V10l7-5 3 2.25L15 5l7 5v12ZM16 13h-2v2h2v-2Zm0 4h-2v2h2v-2Zm-4-4h-2v2h2v-2Zm0 4h-2v2h2v-2Z"}),m.jsx("path",{d:"M10 13h2v2h-2v-2Zm0 4h2v2h-2v-2Zm4-4h2v2h-2v-2Zm0 4h2v2h-2v-2Z"})]}),categories:m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:m.jsx("path",{d:"M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"})}),returnReceipt:(0,m.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24",fill:"currentColor",children:[m.jsx("path",{d:"M7 10h2v7H7v-7Zm4 0h2v7h-2v-7Zm4 0h2v7h-2v-7Z"}),m.jsx("path",{d:"M19 5H5v3h14V5Z"}),m.jsx("path",{d:"M20 3H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h4v2l2.5-1.5L13 21v-2h7c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2Z"})]}),payout:(0,m.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24",fill:"currentColor",children:[m.jsx("path",{d:"M15 15H3c-1.1 0-2-.9-2-2V5c0-1.1.9-2 2-2h12c1.1 0 2 .9 2 2v2h-4c-1.1 0-2 .9-2 2v2c0 1.1.9 2 2 2h4v2c0 1.1-.9 2-2 2Z"}),m.jsx("path",{d:"M23 7v10c0 1.1-.9 2-2 2h-1V7h3Zm-5 2h2v6h-2V9Z"})]}),salesOrder:(0,m.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"}),m.jsx("rect",{x:"8",y:"2",width:"8",height:"4",rx:"1",ry:"1"}),m.jsx("line",{x1:"8",y1:"12",x2:"16",y2:"12"}),m.jsx("line",{x1:"8",y1:"16",x2:"16",y2:"16"}),m.jsx("line",{x1:"10",y1:"8",x2:"10",y2:"8"})]}),layaway:(0,m.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("rect",{x:"1",y:"4",width:"22",height:"16",rx:"2",ry:"2"}),m.jsx("line",{x1:"1",y1:"10",x2:"23",y2:"10"})]}),workOrder:m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:m.jsx("path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z"})}),heldReceipts:m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24",fill:"currentColor",children:m.jsx("path",{d:"M16.5 6v11.5c0 2.21-1.79 4-4 4s-4-1.79-4-4V5a2.5 2.5 0 0 1 5 0v10.5c0 .55-.45 1-1 1s-1-.45-1-1V6H9v9.5c0 1.38 1.12 2.5 2.5 2.5s2.5-1.12 2.5-2.5V5c0-1.93-1.57-3.5-3.5-3.5S7 3.07 7 5v12.5c0 2.21 1.79 4 4 4s4-1.79 4-4V6h-1.5Z"})}),openDrawer:(0,m.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24",fill:"currentColor",children:[m.jsx("path",{d:"M8.5 10.5h7v3h-7v-3Z"}),m.jsx("path",{d:"M8.5 15.5h7v3h-7v-3Z"}),m.jsx("path",{d:"M21 4H3c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2Zm-1 14H4V7h16v11Z"})]})},ob=[{module:"Core Access",permissions:[{id:"view_dashboard",label:"View Dashboard"},{id:"view_pos",label:"Access Point of Sale"},{id:"view_settings",label:"View Settings"}]},{module:"Point of Sale Actions",permissions:[{id:"manage_returns",label:"Process Returns"},{id:"manage_expenditures",label:"Manage Expenditures"},{id:"manage_sales_orders",label:"Manage Sales Orders"},{id:"manage_layaways",label:"Manage Layaways"},{id:"manage_work_orders",label:"Manage Work Orders"},{id:"view_held_receipts",label:"View Held Receipts"},{id:"open_cash_drawer",label:"Open Cash Drawer Manually"},{id:"manage_whatsapp_orders",label:"Manage WhatsApp Orders"}]},{module:"Inventory & Products",permissions:[{id:"view_inventory",label:"View Inventory"},{id:"edit_inventory",label:"Edit Inventory (add, update stock)"},{id:"delete_inventory",label:"Delete Inventory Items"}]},{module:"Purchasing & Suppliers",permissions:[{id:"view_purchases",label:"View Purchase Orders"},{id:"manage_purchases",label:"Manage Purchase Orders"},{id:"view_suppliers",label:"View Suppliers"},{id:"manage_suppliers",label:"Manage Suppliers"},{id:"view_ap",label:"View Accounts Payable"},{id:"manage_ap",label:"Manage Accounts Payable"}]},{module:"Sales & Customers",permissions:[{id:"view_sales_history",label:"View Sales History"},{id:"view_customers",label:"View Customers"},{id:"manage_customers",label:"Manage Customers"},{id:"view_quotations",label:"View Quotations"},{id:"manage_quotations",label:"Manage Quotations"}]},{module:"Staff & Reporting",permissions:[{id:"view_staff",label:"View Staff Members"},{id:"manage_staff",label:"Manage Staff Members"},{id:"view_timesheets",label:"View Time Sheets"},{id:"manage_timesheets",label:"Manage Time Sheets"},{id:"view_shift_report",label:"View Shift Reports"},{id:"view_payment_summary",label:"View Payment Summary"},{id:"view_profit_report",label:"View Profitability Report"}]}],oy=()=>((0,g.useEffect)(()=>{let e=window.document.documentElement;e.classList.remove("dark"),e.classList.add("light")},[]),["light",()=>{console.warn("Theme toggling is disabled.")}]),ov=null,ow=null;async function ok(){return!!(ov&&ov.opened)}async function oB(){if(ov)try{await ov.releaseInterface(0),await ov.close(),console.log("Printer disconnected:",ov.productName)}catch(e){console.warn("Error during device disconnect (may be harmless):",e)}finally{ov=null,ow=null}}async function oj(){if(!navigator.usb)throw Error("WebUSB not supported. Please use a compatible browser (like Chrome) and ensure the page is served over HTTPS.");await oB();try{let e=await navigator.usb.requestDevice({filters:[]});await e.open(),null===e.configuration&&await e.selectConfiguration(1);try{await e.reset()}catch(e){console.warn("Could not reset device, continuing without reset.",e)}await e.claimInterface(0);let t=e.configuration?.interfaces[0],r=t?.alternates[0].endpoints.find(e=>"out"===e.direction);if(!r)throw Error("Could not find an OUT endpoint on the printer.");return ov=e,ow=r.endpointNumber,console.log("Printer connected:",ov.productName),ov}catch(e){if("NotFoundError"===e.name)console.log("User cancelled the device selection dialog.");else{let t=e.message?.toLowerCase()||"";if(t.includes("unable to claim interface")||t.includes("access denied")||"SecurityError"===e.name)throw await oB(),Error("Direct connection failed. The printer's driver may be blocking access. Try using 'Browser Print' mode instead for wider compatibility.");console.error("WebUSB connection error:",e)}throw await oB(),e}}async function oC(e,t){if(!navigator.usb)throw Error("WebUSB is not supported by this browser. Cannot reconnect.");await oB();try{let r=(await navigator.usb.getDevices()).find(r=>r.vendorId===e&&r.productId===t);if(r){await r.open(),null===r.configuration&&await r.selectConfiguration(1);try{await r.reset()}catch(e){console.warn("Could not reset device on reconnect, continuing without reset.",e)}await r.claimInterface(0);let e=r.configuration?.interfaces[0],t=e?.alternates[0].endpoints.find(e=>"out"===e.direction);if(!t)throw Error("Could not find OUT endpoint on reconnect.");ov=r,ow=t.endpointNumber,console.log("Reconnected to printer:",ov.productName)}else throw Error("Previously permitted device not found. Please connect again.")}catch(t){let e=t.message?.toLowerCase()||"";if(e.includes("unable to claim interface")||e.includes("access denied")||"SecurityError"===t.name)throw await oB(),Error("Direct connection failed. The printer's driver may be blocking access. Try using 'Browser Print' mode instead for wider compatibility.");throw console.error("WebUSB reconnection error:",t),await oB(),t}}async function oN(e,t){if(!navigator.usb)return console.warn("WebUSB is not supported by this browser."),null;try{return(await navigator.usb.getDevices()).find(r=>r.vendorId===e&&r.productId===t)||null}catch(e){return console.error("Error finding permitted device:",e),null}}let oS=new TextEncoder,oF={HW_INIT:[27,64],PAPER_FULL_CUT:[29,86,0],CD_KICK_2:[27,112,0,25,250],TXT_ALIGN_L:[27,97,0],TXT_ALIGN_C:[27,97,1],TXT_ALIGN_R:[27,97,2],TXT_BOLD_ON:[27,69,1],TXT_BOLD_OFF:[27,69,0],TXT_UNDERLINE_OFF:[27,45,0],TXT_UNDERLINE_ON:[27,45,1],TXT_FONT_A:[27,77,0],TXT_FONT_B:[27,77,1],TXT_NORMAL:[29,33,0],TXT_2HEIGHT:[29,33,16],TXT_2WIDTH:[29,33,32]};async function oE(e){if(!ov||!ow)throw Error("Printer is not connected.");return ov.transferOut(ow,e)}async function oO(e){if(await ok())return;let{vendorId:t,productId:r}=e;if(t&&r)console.log("Printer not connected, attempting reconnect..."),await oC(t,r);else throw Error("Printer not configured. Please connect via Hardware Settings.");if(!await ok())throw Error("Printer reconnection failed. Please connect manually in settings.")}async function oP(e){await oO(e),await oE(new Uint8Array(oF.CD_KICK_2)),console.log("Cash drawer kick command sent.")}function oI(...e){let t=e.map(e=>e instanceof Uint8Array?e:new Uint8Array(e)),r=new Uint8Array(t.reduce((e,t)=>e+t.length,0)),n=0;return t.forEach(e=>{r.set(e,n),n+=e.length}),r}function oU(e){return oS.encode(e)}function oL(e,t,r=48){return e.padEnd(r-t.length)+t+"\n"}function o_(e="-",t=48){return"".padStart(t,e)+"\n"}async function oQ(e,t,r){await oO(t.hardware.printer),await oE(new Uint8Array(oF.CD_KICK_2));let n=function(e,t,r){let n=oI(oF.HW_INIT,oF.TXT_ALIGN_C,oF.TXT_BOLD_ON,oF.TXT_2HEIGHT,oU(t.businessInfo.name+"\n"),oF.TXT_NORMAL,oF.TXT_BOLD_OFF,oU(t.businessInfo.location+"\n"),oU(`Tel: ${t.businessInfo.phone}
`),oU(`PIN: ${t.businessInfo.kraPin}

`),oF.TXT_ALIGN_L,oU(o_("-",48)),oU(`Date: ${new Date(e.date).toLocaleString("en-GB")}
`),oU(`Receipt: ${e.id}
`),oU(`Cashier: ${r}
`),oU(o_("-",48))),a=oU("");e.items.forEach(e=>{a=oI(a,oU(function(e,t,r,n=48){let a=(r*t).toFixed(2),o=`${e} (x${t})`,i=n-a.length-1;return(o.length>i?o.substring(0,i):o).padEnd(n-a.length)+a+"\n"}(e.name,e.quantity,e.price,48)))}),n=oI(n,a,oU(o_("-",48)));let o=oI(oU(oL("Subtotal",e.subtotal.toFixed(2),48)),e.discountAmount>0?oU(oL("Discount",`-${e.discountAmount.toFixed(2)}`,48)):new Uint8Array,oU(oL("VAT",e.tax.toFixed(2),48)),oU(o_("=",48)),oF.TXT_BOLD_ON,oF.TXT_2HEIGHT,oU(oL("TOTAL",`Ksh ${e.total.toFixed(2)}`,24)),oF.TXT_NORMAL,oF.TXT_BOLD_OFF,oU(o_("=",48)));n=oI(n,o);let i=oU("");e.payments.forEach(e=>{i=oI(i,oU(oL(e.method,e.amount.toFixed(2),48)))}),e.change>0&&(i=oI(i,oF.TXT_BOLD_ON,oU(oL("Change",e.change.toFixed(2),48)),oF.TXT_BOLD_OFF)),n=oI(n,i);let s=oI(oU("\n\n"),oF.TXT_ALIGN_C,oU(t.receipt.footer+"\n"),oU("Goods once sold are not returnable.\n\n\n"),oF.PAPER_FULL_CUT);return oI(n,s)}(e,t,r);await oE(n)}async function oT(e){await oO(e);let t=oI(oF.HW_INIT,oF.TXT_ALIGN_C,oF.TXT_BOLD_ON,oF.TXT_2HEIGHT,oF.TXT_2WIDTH,oU("Banduka POS\n"),oF.TXT_NORMAL,oF.TXT_BOLD_OFF,oU("Printer Test\n"),oU(o_("=",48)),oF.TXT_ALIGN_L,oU("This is a test print to confirm your\n"),oU("printer is connected and working correctly.\n\n"),oF.TXT_BOLD_ON,oU("Features:\n"),oF.TXT_BOLD_OFF,oU("Default Text (Font A)\n"),new Uint8Array(oF.TXT_FONT_B),oU("Smaller Text (Font B)\n"),new Uint8Array(oF.TXT_FONT_A),new Uint8Array(oF.TXT_UNDERLINE_ON),oU("Underlined Text\n"),new Uint8Array(oF.TXT_UNDERLINE_OFF),oU("\n"),oF.TXT_ALIGN_C,oU("Centered Text\n"),oF.TXT_ALIGN_R,oU("Right-Aligned Text\n"),oF.TXT_ALIGN_L,oU(o_("=",48)),oF.TXT_ALIGN_C,oU("Connection Successful!\n\n\n"),oF.CD_KICK_2,oF.PAPER_FULL_CUT);await oE(t)}let oD=e=>Math.round((e+Number.EPSILON)*100)/100,oM=(e,t,r)=>{if("inclusive"!==t)return{basePrice:e,vatAmount:e*r};{let t=e/(1+r);return{basePrice:t,vatAmount:e-t}}},oH=(e,t,r)=>{let n=0,a=0,o=e.map(e=>{let t=e.price*e.quantity;n+=t;let r=0;e.discount&&(r="percentage"===e.discount.type?e.discount.value/100*t:e.discount.value,r=Math.min(t,r)),a+=r;let o=t-r;return{...e,itemGrossTotal:t,itemDiscountAmount:r,itemNetTotal:o}}),i=n-a,s=0;t.value>0&&(s="percentage"===t.type?t.value/100*i:t.value),s=Math.min(i,s);let l=0,A=0;o.forEach(e=>{if(e.itemNetTotal>0&&i>0){let t=e.itemNetTotal/i,n=s*t,{basePrice:a,vatAmount:o}=oM(e.itemNetTotal-n,e.pricingType,r);l+=a,A+=o}else{let{basePrice:t,vatAmount:n}=oM(e.itemNetTotal,e.pricingType,r);l+=t,A+=n}});let c=a+s,d=l+A;return{subtotal:oD(n),lineItemsDiscountAmount:oD(a),cartDiscountAmount:oD(s),totalDiscountAmount:oD(c),taxableAmount:oD(l),tax:oD(A),total:oD(d)}};of.button;let oR=({view:e,label:t,currentView:r,onClick:n,children:a})=>{let o=r===e;return(0,m.jsxs)("button",{onClick:()=>n(e),className:`flex items-center w-full text-left p-3 rounded-lg transition-colors duration-200 group ${o?"bg-primary text-primary-content shadow-md hover:bg-primary-focus":"text-gray-400 hover:bg-primary hover:text-primary-content"}`,"aria-current":o?"page":void 0,"aria-label":t,children:[m.jsx("div",{className:"flex-shrink-0 mr-3 w-5 h-5",children:a}),m.jsx("span",{className:"text-sm font-medium",children:t})]})},oK=()=>(0,m.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("path",{d:"M18 6L12 2L6 6"}),m.jsx("path",{d:"M2 6v14a2 2 0 002 2h16a2 2 0 002-2V6"}),m.jsx("path",{d:"M12 22V12"})]}),oV=({layout:e="vertical"})=>"horizontal"===e?(0,m.jsxs)("div",{className:"flex items-center space-x-3",children:[m.jsx("div",{className:"bg-orange-500 p-2 rounded-lg text-white",children:m.jsx(oK,{})}),(0,m.jsxs)("div",{children:[m.jsx("h1",{className:"font-bold text-base leading-tight text-foreground dark:text-dark-foreground",children:"Banduka POS"}),m.jsx("p",{className:"text-xs text-foreground-muted dark:text-dark-foreground-muted",children:"Point of Sale System"})]})]}):(0,m.jsxs)("div",{className:"flex items-center p-4 border-b border-gray-700 flex-shrink-0",children:[m.jsx("div",{className:"bg-orange-500 p-2 rounded-lg mr-3",children:m.jsx(oK,{})}),(0,m.jsxs)("div",{children:[m.jsx("h1",{className:"font-bold text-base leading-tight",children:"Banduka POS"}),m.jsx("p",{className:"text-xs text-gray-400",children:"Point of Sale System"})]})]}),oq=[{view:sf.Dashboard,label:"Dashboard",icon:ox.dashboard,permission:"view_dashboard"},{view:sf.POS,label:"Point of Sale",icon:ox.pos,permission:"view_pos"},{view:sf.Inventory,label:"Inventory",icon:ox.inventory,permission:"view_inventory"},{view:sf.Customers,label:"Customers",icon:ox.customers,permission:"view_customers"},{view:sf.Suppliers,label:"Suppliers",icon:ox.suppliers,permission:"view_suppliers"},{view:sf.AccountsPayable,label:"Accounts Payable",icon:ox.ap,permission:"view_ap"},{view:sf.Purchases,label:"Purchase Orders",icon:ox.clipboardList,permission:"view_purchases"},{view:sf.SalesOrderList,label:"Sales Orders",icon:ox.clipboardList,permission:"manage_sales_orders"},{view:sf.Quotations,label:"Quotations",icon:ox.quotations,permission:"view_quotations"},{view:sf.WorkOrderList,label:"Work Orders",icon:ox.workOrder,permission:"manage_work_orders"},{view:sf.LayawayList,label:"Layaways",icon:ox.layaway,permission:"manage_layaways"},{view:sf.HeldReceipts,label:"Held Receipts",icon:ox.heldReceipts,permission:"view_held_receipts"},{view:sf.SalesHistory,label:"Sales History",icon:ox.salesHistory,permission:"view_sales_history"},{view:sf.Staff,label:"Staff",icon:ox.staff,permission:"view_staff"},{view:sf.TimeSheets,label:"Shifts",icon:ox.timeSheets,permission:"view_timesheets"},{view:sf.Accounts,label:"Accounts & Finance",icon:ox.accounts,permission:"view_general_ledger"},{view:sf.ProfitReport,label:"Reports & Analytics",icon:ox.profitReport,permission:"view_profit_report"},{view:sf.FiscalPeriodReport,label:"Fiscal Period Report",icon:ox.generalLedger,permission:"view_profit_report"},{view:sf.TaxReport,label:"Tax Report",icon:ox.tax,permission:"view_profit_report"},{view:sf.Settings,label:"Settings",icon:ox.settings,permission:"view_settings"}],oG=({currentView:e,setCurrentView:t,permissions:r,currentUser:n,onLogout:a})=>{let o=(0,g.useMemo)(()=>oq.filter(e=>r.includes(e.permission)),[r]),i=(0,g.useMemo)(()=>{if(!n||!n.name)return"";let e=n.name.split(" ").filter(Boolean);return e.length>1?`${e[0][0]}${e[1][0]}`.toUpperCase():e[0]?e[0][0].toUpperCase():""},[n]);return(0,m.jsxs)("div",{className:"w-full md:w-64 bg-gray-800 text-white flex flex-col h-full shadow-lg",children:[m.jsx(oV,{}),(0,m.jsxs)("nav",{className:"flex-grow p-4 overflow-y-auto",children:[m.jsx("h2",{className:"text-xs font-bold uppercase text-gray-500 mb-2",children:"Main Menu"}),m.jsx("div",{className:"space-y-1",children:o.map(r=>m.jsx(oR,{view:r.view,label:r.label,currentView:e,onClick:t,children:x().cloneElement(r.icon,{className:"w-5 h-5"})},r.view))})]}),(0,m.jsxs)("div",{className:"mt-auto p-4 border-t border-gray-700 flex-shrink-0",children:[(0,m.jsxs)("div",{className:"flex items-center mb-4",children:[m.jsx("div",{className:"w-9 h-9 rounded-full bg-gray-600 flex items-center justify-center font-bold text-sm mr-3",children:i}),(0,m.jsxs)("div",{children:[m.jsx("p",{className:"text-sm font-semibold",children:n.name}),m.jsx("p",{className:"text-xs text-gray-400",children:n.role})]})]}),(0,m.jsxs)("button",{onClick:a,className:"w-full flex items-center justify-center p-2 text-sm font-medium text-orange-400 border border-orange-400 rounded-lg hover:bg-orange-400 hover:text-gray-800 transition-colors",children:[m.jsx("div",{className:"w-5 h-5 mr-2",children:ox.logout}),"Logout"]})]})]})},oz=({currentView:e,setCurrentView:t,isOpen:r,setIsOpen:n,currentUser:a,onLogout:o,permissions:i,settings:s})=>(0,m.jsxs)(m.Fragment,{children:[m.jsx("div",{className:"hidden md:block flex-shrink-0 no-print",children:m.jsx(oG,{currentView:e,setCurrentView:t,permissions:i,settings:s,currentUser:a,onLogout:o})}),m.jsx(Q,{children:r&&(0,m.jsxs)("div",{className:"md:hidden no-print",children:[m.jsx("div",{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3},className:"fixed inset-0 bg-black bg-opacity-50 z-30",onClick:()=>n(!1)}),m.jsx("div",{initial:{x:"-100%"},animate:{x:0},exit:{x:"-100%"},transition:{type:"spring",stiffness:300,damping:30},className:"fixed top-0 left-0 h-full z-40 w-64",children:m.jsx(oG,{currentView:e,setCurrentView:e=>{t(e),n(!1)},permissions:i,settings:s,currentUser:a,onLogout:o})})]})})]}),oW=({lowStockProducts:e,onClose:t})=>(0,m.jsxs)(m.Fragment,{children:[m.jsx("div",{className:"fixed inset-0 z-10",onClick:t}),(0,m.jsxs)("div",{initial:{opacity:0,y:-10,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-10,scale:.95},className:"absolute right-0 mt-2 w-80 bg-white/50 dark:bg-dark-card/70 backdrop-blur-2xl rounded-lg shadow-xl py-1 z-20 border border-white/20 dark:border-white/10",children:[(0,m.jsxs)("div",{className:"px-4 py-3 border-b border-white/20 dark:border-white/10",children:[m.jsx("h4",{className:"font-bold text-foreground dark:text-dark-foreground",children:"Low Stock Alerts"}),m.jsx("p",{className:"text-sm text-foreground-muted dark:text-dark-foreground-muted",children:"The following items are running low on stock."})]}),m.jsx("div",{className:"max-h-80 overflow-y-auto",children:e.length>0?m.jsx("ul",{className:"divide-y divide-white/20 dark:divide-white/10",children:e.map(e=>m.jsx("li",{className:"p-3 hover:bg-white/20 dark:hover:bg-white/10",children:(0,m.jsxs)("div",{children:[m.jsx("p",{className:"font-semibold text-sm text-foreground dark:text-dark-foreground",children:e.name}),(0,m.jsxs)("p",{className:"text-xs text-warning font-bold",children:["LOW STOCK (",e.stock," left)"]})]})},e.id))}):m.jsx("div",{className:"p-4 text-center text-sm text-foreground-muted dark:text-dark-foreground-muted",children:"No low stock alerts. Good job!"})})]})]}),o$=of.svg,oX=of.div,oY=of.span,oJ=of.button,oZ=()=>m.jsx(o$,{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-secondary dark:text-dark-secondary",fill:"none",viewBox:"0 0 24 24",strokeWidth:"2.5",stroke:"currentColor",animate:{rotate:360},transition:{duration:1.5,repeat:1/0,ease:"linear"},children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0l3.181 3.183a8.25 8.25 0 0011.664 0l3.181-3.183m-4.991-2.69a8.25 8.25 0 00-11.664 0l-3.181 3.183"})}),o0=({isOnline:e,isSyncing:t,queuedSalesCount:r,onMenuClick:n,currentUser:a,products:o,settings:i,onInstallClick:s,installPromptEvent:l,activeTimeClockEvent:A,onLogout:c})=>{let[d,u]=(0,g.useState)(new Date),[h,f]=(0,g.useState)(!1),[p,x]=(0,g.useState)(!1),[b,y]=(0,g.useState)(""),v=i.inventory?.lowStockThreshold??3,w=(0,g.useMemo)(()=>o.filter(e=>"Inventory"===e.productType&&e.stock>0&&e.stock<=v),[o,v]);(0,g.useEffect)(()=>{let e=setInterval(()=>u(new Date),1e3);return()=>clearInterval(e)},[]),(0,g.useEffect)(()=>{let e;if(A){let t=()=>{let e=new Date,t=new Date(A.clockInTime),r=e.getTime()-t.getTime(),n=Math.floor(r/36e5).toString().padStart(2,"0"),a=Math.floor(r%36e5/6e4).toString().padStart(2,"0"),o=Math.floor(r%6e4/1e3).toString().padStart(2,"0");y(`${n}:${a}:${o}`)};t(),e=setInterval(t,1e3)}return()=>clearInterval(e)},[A]);let k=(0,g.useMemo)(()=>{if(!a||!a.name)return"";let e=a.name.split(" ").filter(Boolean);return e.length>1?`${e[0][0]}${e[1][0]}`.toUpperCase():e[0]?e[0][0].toUpperCase():""},[a]);return(0,m.jsxs)("header",{className:"bg-white/30 dark:bg-dark-card/50 backdrop-blur-2xl border-b border-white/20 dark:border-white/10 h-16 flex items-center justify-between px-4 md:px-6 flex-shrink-0 relative z-30 no-print shadow-lg",children:[(0,m.jsxs)("div",{className:"flex items-center space-x-4",children:[m.jsx("button",{onClick:n,className:"md:hidden text-foreground-muted hover:text-primary dark:text-dark-foreground-muted dark:hover:text-dark-primary p-2 rounded-full hover:bg-muted dark:hover:bg-dark-muted",children:m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})}),m.jsx("div",{className:"md:hidden",children:m.jsx(oV,{layout:"horizontal"})}),(0,m.jsxs)("div",{className:"text-left hidden sm:block",children:[m.jsx("div",{className:"font-bold text-sm text-foreground dark:text-dark-foreground",children:d.toLocaleTimeString("en-GB",{timeZone:"Africa/Nairobi"})}),m.jsx("div",{className:"text-xs text-foreground-muted dark:text-dark-foreground-muted",children:d.toLocaleDateString("en-GB",{day:"numeric",month:"long",timeZone:"Africa/Nairobi"})})]})]}),(0,m.jsxs)("div",{className:"flex items-center space-x-2 md:space-x-4",children:[l&&(0,m.jsxs)(oJ,{onClick:s,whileTap:{scale:.95},className:"hidden sm:flex items-center space-x-2 bg-primary text-primary-content font-bold px-3 py-1.5 rounded-xl transition-shadow shadow-clay-light active:shadow-clay-light-inset dark:bg-dark-primary dark:text-dark-primary-content dark:shadow-clay-dark dark:active:shadow-clay-dark-inset",children:[ox.install,m.jsx("span",{className:"text-sm",children:"Install App"})]}),(0,m.jsxs)("div",{className:"hidden md:flex items-center space-x-2 px-2 py-1.5 bg-muted/50 dark:bg-dark-muted/50 rounded-lg",children:[m.jsx("div",{className:`w-3 h-3 rounded-full ${e?"bg-green-500":"bg-red-500"}`,title:e?"Online":"Offline"}),(0,m.jsxs)("div",{className:"flex items-center space-x-1",title:`${r} unsynced sales`,children:[t?m.jsx(oZ,{}):m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-secondary dark:text-dark-secondary",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 15a4 4 0 004 4h9a5 5 0 10-.1-9.999 5.002 5.002 0 10-9.78 2.096A4.001 4.001 0 003 15z"})}),m.jsx("span",{className:"text-sm font-bold text-secondary dark:text-dark-secondary",children:r})]})]}),(0,m.jsxs)("div",{className:"relative",children:[(0,m.jsxs)(oJ,{whileTap:{scale:.95},onClick:()=>x(!p),className:"p-2 rounded-full transition-all duration-200 hover:shadow-clay-light active:shadow-clay-light-inset dark:hover:shadow-clay-dark dark:active:shadow-clay-dark-inset",children:[ox.bell,w.length>0&&(0,m.jsxs)(oY,{className:"absolute -top-0.5 -right-0.5 flex h-3 w-3",initial:{scale:0},animate:{scale:1},children:[m.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-danger opacity-75"}),m.jsx("span",{className:"relative inline-flex rounded-full h-3 w-3 bg-danger"})]})]}),m.jsx(Q,{children:p&&m.jsx(oW,{lowStockProducts:w,onClose:()=>x(!1)})})]}),(0,m.jsxs)("div",{className:"relative",children:[(0,m.jsxs)("button",{onClick:()=>f(!h),className:"flex items-center space-x-2 p-1 rounded-full transition-all duration-200 hover:shadow-clay-light active:shadow-clay-light-inset dark:hover:shadow-clay-dark dark:active:shadow-clay-dark-inset",children:[(0,m.jsxs)("div",{className:"text-right hidden md:block",children:[m.jsx("div",{className:"font-bold text-sm text-foreground dark:text-dark-foreground",children:a.name}),m.jsx("div",{className:"text-xs text-foreground-muted dark:text-dark-foreground-muted",children:a.role})]}),m.jsx("div",{className:"w-10 h-10 rounded-full bg-primary text-primary-content flex items-center justify-center font-bold text-lg border-2 border-primary/50",children:m.jsx("span",{children:k})})]}),m.jsx(Q,{children:h&&(0,m.jsxs)(m.Fragment,{children:[m.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>f(!1)}),(0,m.jsxs)(oX,{initial:{opacity:0,y:-10,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-10,scale:.95},className:"absolute right-0 mt-2 w-56 bg-white/50 dark:bg-dark-card/70 backdrop-blur-2xl border border-white/20 dark:border-white/10 rounded-xl shadow-xl py-1 z-20",children:[A&&m.jsx("div",{className:"px-4 py-2 text-sm text-foreground dark:text-dark-foreground border-b dark:border-white/10",children:(0,m.jsxs)("p",{children:["Shift Active: ",m.jsx("span",{className:"font-bold",children:b})]})}),m.jsx("div",{className:"border-t border-border dark:border-white/10 my-1"}),(0,m.jsxs)("button",{onClick:c,className:"w-full text-left px-4 py-2 text-sm text-danger flex items-center space-x-2 hover:bg-danger/10",children:[ox.logout,m.jsx("span",{children:"Logout"})]})]})]})})]})]})]})},o1=of.div,o2=({product:e,onAddToCart:t})=>(0,m.jsxs)(o1,{layout:!0,whileHover:{y:-4,scale:1.02,boxShadow:"0px 10px 15px -3px rgba(0,0,0,0.05)"},whileTap:{scale:.98},transition:{type:"spring",stiffness:400,damping:17},className:"bg-card dark:bg-dark-card rounded-lg shadow-md overflow-hidden cursor-pointer flex flex-col border border-border dark:border-dark-border",onClick:()=>t(e),children:[(0,m.jsxs)("div",{className:"relative",children:[m.jsx("img",{src:e.imageUrl||`https://placehold.co/300x300/e2e8f0/475569?text=${e.name.charAt(0)}`,alt:e.name,className:"w-full h-32 object-cover"}),e.stock<=0&&"Inventory"===e.productType&&m.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center",children:m.jsx("span",{className:"text-white font-bold text-sm bg-danger px-2 py-1 rounded",children:"OUT OF STOCK"})})]}),(0,m.jsxs)("div",{className:"p-3 flex flex-col flex-grow",children:[m.jsx("h3",{className:"font-bold text-foreground dark:text-dark-foreground text-sm flex-grow",children:e.name}),(0,m.jsxs)("div",{className:"flex justify-between items-center mt-2",children:[m.jsx("p",{className:"text-xs text-foreground-muted dark:text-dark-foreground-muted",children:e.category}),(0,m.jsxs)("p",{className:"text-primary dark:text-dark-primary font-bold",children:["Ksh ",e.price.toFixed(2)]})]})]})]}),o5=()=>m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-10 w-10 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"1.5",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})}),o4=({product:e,onAddToCart:t})=>(0,m.jsxs)(o1,{layout:!0,whileHover:{borderColor:"var(--tw-color-primary)",y:-2,boxShadow:"0 4px 12px -1px rgb(0 0 0 / 0.05), 0 2px 4px -2px rgb(0 0 0 / 0.05)"},whileTap:{scale:.99},transition:{type:"spring",stiffness:400,damping:20},className:"bg-card dark:bg-dark-card rounded-lg shadow-sm overflow-hidden cursor-pointer flex items-center p-3 space-x-4 w-full border border-border dark:border-dark-border",onClick:()=>t(e),children:[m.jsx("div",{className:"bg-muted dark:bg-dark-muted p-2 rounded-lg flex-shrink-0",children:m.jsx(o5,{})}),(0,m.jsxs)("div",{className:"flex-grow min-w-0",children:[m.jsx("p",{className:"font-bold text-foreground dark:text-dark-foreground truncate",title:e.name,children:e.name}),(0,m.jsxs)("p",{className:"text-xs text-foreground-muted dark:text-dark-foreground-muted font-mono",children:["SKU: ",e.inventoryCode]})]}),(0,m.jsxs)("div",{className:"text-right flex-shrink-0 ml-4",children:[(0,m.jsxs)("p",{className:"text-primary dark:text-dark-primary font-bold text-base",children:["KES ",e.price.toFixed(2)]}),(0,m.jsxs)("div",{className:"mt-1 inline-block px-2 py-0.5 rounded bg-black text-white text-xs font-bold",children:["Stock: ",e.stock]})]})]}),o3=({products:e,onAddToCart:t,settings:r})=>{let[n,a]=(0,g.useState)(""),[o,i]=(0,g.useState)("All"),[s,l]=(0,g.useState)("list"),A=(0,g.useRef)(null);(0,g.useEffect)(()=>{A.current?.focus()},[]);let c=(0,g.useMemo)(()=>{let t=new Set;return e.forEach(e=>{e.category&&t.add(e.category.split(" > ")[0])}),["All",...Array.from(t).sort()]},[e]),d=(0,g.useMemo)(()=>e.filter(e=>{if(!("All"===o||e.category===o||e.category.startsWith(o+" > ")))return!1;let t=n.toLowerCase();return e.name.toLowerCase().includes(t)||e.inventoryCode.toLowerCase().includes(t)||e.upc&&e.upc.toLowerCase().includes(t)}),[e,n,o]);return(0,m.jsxs)("div",{className:"flex flex-col h-full",children:[(0,m.jsxs)("div",{className:"flex-shrink-0",children:[(0,m.jsxs)("div",{className:"flex gap-4 items-center",children:[(0,m.jsxs)("div",{className:"relative flex-grow",children:[m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-foreground-muted dark:text-dark-foreground-muted absolute top-1/2 left-4 -translate-y-1/2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),m.jsx("input",{ref:A,type:"text",placeholder:"Search products...",className:"w-full pl-12 pr-4 py-3 rounded-lg bg-card dark:bg-dark-card text-foreground dark:text-dark-foreground placeholder-foreground-muted dark:placeholder-dark-foreground-muted border border-border dark:border-dark-border focus:outline-none focus:ring-2 focus:ring-primary dark:focus:ring-dark-primary",value:n,onChange:e=>a(e.target.value),onKeyDown:r=>{if("Enter"===r.key){let o=n.trim().toLowerCase(),i=e.find(e=>e.inventoryCode.trim().toLowerCase()===o||e.upc&&e.upc.trim().toLowerCase()===o);i&&(r.preventDefault(),t(i),a(""))}}})]}),(0,m.jsxs)("div",{className:"flex bg-muted dark:bg-dark-muted p-1 rounded-lg",children:[m.jsx("button",{onClick:()=>l("grid"),className:`p-2 rounded-md transition-colors ${"grid"===s?"bg-primary text-primary-content":"text-foreground-muted dark:text-dark-foreground-muted hover:bg-border dark:hover:bg-dark-border"}`,"aria-label":"Grid view",children:m.jsx(()=>m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:m.jsx("path",{d:"M5 3a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2V5a2 2 0 00-2-2H5zM5 11a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2v-2a2 2 0 00-2-2H5zM11 5a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V5zM11 13a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"})}),{})}),m.jsx("button",{onClick:()=>l("list"),className:`p-2 rounded-md transition-colors ${"list"===s?"bg-primary text-primary-content":"text-foreground-muted dark:text-dark-foreground-muted hover:bg-border dark:hover:bg-dark-border"}`,"aria-label":"List view",children:m.jsx(()=>m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:m.jsx("path",{fillRule:"evenodd",d:"M3 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z",clipRule:"evenodd"})}),{})})]})]}),m.jsx("div",{className:"flex space-x-2 mt-4 overflow-x-auto pb-2",children:c.map(e=>m.jsx("button",{onClick:()=>i(e),className:`px-4 py-1.5 rounded-md text-sm font-semibold whitespace-nowrap transition-colors duration-200 ${o===e?"bg-primary text-primary-content":"bg-muted text-foreground-muted hover:bg-border dark:bg-dark-muted dark:text-dark-foreground-muted dark:hover:bg-dark-border"}`,children:e},e))})]}),(0,m.jsxs)("div",{className:"flex-grow overflow-y-auto mt-4 pr-1",children:["grid"===s?m.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-4",children:d.map(e=>m.jsx(o2,{product:e,onAddToCart:t},e.id))}):m.jsx("div",{className:"space-y-2",children:d.map(e=>m.jsx(o4,{product:e,onAddToCart:t},e.id))}),0===d.length&&m.jsx("div",{className:"text-center py-10 text-foreground-muted dark:text-dark-foreground-muted",children:m.jsx("p",{children:"No products found matching your search."})})]})]})},o6=({customers:e,selectedCustomerId:t,onCustomerChange:r,disabled:n=!1,filter:a})=>{let[o,i]=(0,g.useState)(""),[s,l]=(0,g.useState)(!1),A=(0,g.useRef)(null),c=(0,g.useMemo)(()=>a?e.filter(a):e,[e,a]),d=(0,g.useMemo)(()=>e.find(e=>e.id===t),[e,t]),u=(0,g.useMemo)(()=>{if(!o)return c;let e=o.toLowerCase();return c.filter(t=>t.name.toLowerCase().includes(e)||t.phone.toLowerCase().includes(e))},[c,o]);(0,g.useEffect)(()=>{function e(e){A.current&&!A.current.contains(e.target)&&(l(!1),i(""))}return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[A]);let h=e=>{r(e),i(""),l(!1)},f=s?o:d?.name||"";return(0,m.jsxs)("div",{className:"relative",ref:A,children:[m.jsx("input",{type:"text",value:f,onChange:e=>{i(e.target.value),s||l(!0)},onFocus:()=>{i(""),l(!0)},placeholder:"Search by name or phone...",disabled:n,className:"w-full bg-background dark:bg-dark-card border border-border dark:border-dark-border rounded-md p-2 text-sm text-foreground dark:text-dark-foreground focus:outline-none focus:ring-2 focus:ring-primary dark:focus:ring-dark-primary"}),s&&!n&&m.jsx("ul",{className:"absolute z-10 w-full mt-1 bg-card dark:bg-dark-card border border-border dark:border-dark-border rounded-md shadow-lg max-h-60 overflow-y-auto",children:u.length>0?u.map(e=>(0,m.jsxs)("li",{onClick:()=>h(e.id),className:"px-4 py-2 text-sm hover:bg-muted dark:hover:bg-dark-muted cursor-pointer",children:[m.jsx("p",{className:"font-semibold text-foreground dark:text-dark-foreground",children:e.name}),m.jsx("p",{className:"text-xs text-foreground-muted dark:text-dark-foreground-muted",children:e.phone})]},e.id)):m.jsx("li",{className:"px-4 py-2 text-sm text-foreground-muted dark:text-dark-foreground-muted",children:"No customers found."})})]})},o8=["m","kg","g","ltr","sq ft"],o7=({item:e,onApply:t,onClose:r})=>{let[n,a]=(0,g.useState)(e.discount?.type||"fixed"),[o,i]=(0,g.useState)(e.discount?.value||""),s=()=>{Number(o)>0?t({type:n,value:Number(o)}):t(void 0),r()};return(0,m.jsxs)("div",{className:"absolute right-0 top-full mt-1 bg-white/50 dark:bg-dark-border/80 backdrop-blur-md p-2 rounded-lg shadow-xl z-20 w-48 border border-white/20 dark:border-white/10",onClick:e=>e.stopPropagation(),children:[(0,m.jsxs)("div",{className:"flex bg-muted dark:bg-dark-muted p-0.5 rounded-md mb-2",children:[m.jsx("button",{onClick:()=>a("fixed"),className:`w-1/2 text-xs py-1 rounded ${"fixed"===n?"bg-white dark:bg-dark-card font-bold text-primary dark:text-dark-primary":"text-foreground-muted"}`,children:"Fixed"}),m.jsx("button",{onClick:()=>a("percentage"),className:`w-1/2 text-xs py-1 rounded ${"percentage"===n?"bg-white dark:bg-dark-card font-bold text-primary dark:text-dark-primary":"text-foreground-muted"}`,children:"%"})]}),m.jsx("input",{type:"number",value:o,onChange:e=>i(e.target.value),className:"w-full p-1 border rounded-md text-sm bg-background dark:bg-dark-background border-border dark:border-dark-border",placeholder:"fixed"===n?"e.g. 100":"e.g. 10",autoFocus:!0,onKeyDown:e=>{"Enter"===e.key&&s()}}),m.jsx("button",{onClick:s,className:"w-full mt-2 bg-primary text-primary-content text-xs font-bold py-1.5 rounded",children:"Apply"})]})},o9=({cartItems:e,customers:t,selectedCustomerId:r,onCustomerChange:n,updateQuantity:a,updateCartItemDiscount:o,removeItem:i,onCharge:s,isOnline:l,settings:A,activeShift:c,onStartShift:d,onEndShiftRequest:u,onHoldRequest:h,onLayawayRequest:f,currentUser:p,depositApplied:b=0})=>{let[y,v]=(0,g.useState)(0),[w,k]=(0,g.useState)(!1),[B,j]=(0,g.useState)(""),[C,N]=(0,g.useState)(null),S=A.discount,F={type:S.type,value:y},{subtotal:E,lineItemsDiscountAmount:O,cartDiscountAmount:P,taxableAmount:I,tax:U,total:L}=(0,g.useMemo)(()=>oH(e,F,A.tax.vatRate/100),[e,F,A.tax.vatRate]),_=(e,t,r)=>{a(e,t+r)},T=(e,t)=>{let r=parseFloat(t);isNaN(r)||a(e,r)};return(0,m.jsxs)("div",{className:"flex-1 flex flex-col bg-transparent relative min-h-0",children:[m.jsx(Q,{children:w&&(0,m.jsxs)("div",{className:"absolute inset-0 bg-white/50 dark:bg-dark-card/70 backdrop-blur-xl z-20 flex flex-col items-center justify-center p-6 space-y-4",children:[m.jsx("div",{className:"mx-auto bg-primary-soft text-primary dark:bg-dark-primary-soft dark:text-dark-primary w-16 h-16 rounded-full flex items-center justify-center mb-2",children:m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),m.jsx("h4",{className:"text-lg font-bold text-foreground dark:text-dark-foreground",children:"Enter Starting Float"}),(0,m.jsxs)("form",{onSubmit:e=>{e.preventDefault(),"number"==typeof B&&B>=0&&(d(B),k(!1),j(""))},className:"w-full space-y-4",children:[m.jsx("input",{type:"number",value:B,onChange:e=>j(""===e.target.value?"":Number(e.target.value)),className:"block w-full text-center text-xl font-bold p-2 bg-background dark:bg-dark-background border border-border dark:border-dark-border rounded-md shadow-sm focus:outline-none focus:ring-primary focus:border-primary",placeholder:"e.g., 5000",autoFocus:!0}),(0,m.jsxs)("div",{className:"flex space-x-2",children:[m.jsx("button",{type:"button",onClick:()=>k(!1),whileTap:{scale:.95},className:"flex-1 bg-muted dark:bg-dark-muted text-foreground dark:text-dark-foreground font-bold py-2 rounded-xl transition-shadow shadow-clay-light active:shadow-clay-light-inset dark:shadow-clay-dark dark:active:shadow-clay-dark-inset",children:"Cancel"}),m.jsx("button",{type:"submit",whileTap:{scale:.95},className:"flex-1 bg-primary dark:bg-dark-primary text-primary-content dark:text-dark-primary-content font-bold py-2 rounded-xl transition-shadow shadow-clay-light active:shadow-clay-light-inset dark:shadow-clay-dark dark:active:shadow-clay-dark-inset",children:"Confirm"})]})]})]})}),m.jsx("div",{className:"p-4 border-b border-white/20 dark:border-white/10 bg-white/10 dark:bg-black/10",children:(0,m.jsxs)("div",{className:"flex justify-between items-center",children:[(0,m.jsxs)("div",{children:[m.jsx("h3",{className:"font-bold text-foreground dark:text-dark-foreground",children:"Shift Status"}),m.jsx("p",{className:`text-sm font-bold ${c?"text-accent dark:text-dark-accent":"text-foreground-muted dark:text-dark-foreground-muted"}`,children:c?`Active (${new Date(c.startTime).toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit",timeZone:"Africa/Nairobi"})})`:"Inactive"})]}),m.jsx("button",{onClick:()=>{c?u():k(!0)},className:`relative inline-flex items-center h-6 rounded-full w-11 transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary shadow-clay-light-inset dark:shadow-clay-dark-inset ${c?"bg-accent dark:bg-dark-accent":"bg-border dark:bg-dark-border"}`,"aria-label":c?"End Shift":"Start Shift",children:m.jsx("span",{className:`inline-block w-4 h-4 bg-white rounded-full transform transition-transform shadow-clay-light dark:shadow-clay-dark ${c?"translate-x-6":"translate-x-1"}`})})]})}),(0,m.jsxs)("div",{className:"p-4 border-b border-white/20 dark:border-white/10",children:[(0,m.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[m.jsx("h2",{className:"text-xl font-bold text-foreground dark:text-dark-foreground",children:"Current Sale"}),e.length>0&&(0,m.jsxs)("span",{className:"text-sm font-bold bg-muted/50 dark:bg-dark-muted/50 text-foreground-muted dark:text-dark-foreground-muted px-2.5 py-1 rounded-full",children:[e.reduce((e,t)=>e+t.quantity,0)," items"]})]}),m.jsx(o6,{customers:t,selectedCustomerId:r,onCustomerChange:n,disabled:!c})]}),m.jsx("div",{className:"flex-grow overflow-y-auto",children:0===e.length?m.jsx("div",{className:"h-full flex items-center justify-center text-foreground-muted dark:text-dark-foreground-muted",children:m.jsx("p",{children:"Cart is empty. Add products to start."})}):m.jsx("ul",{className:"divide-y divide-white/20 dark:divide-white/10",children:m.jsx(Q,{children:e.map(e=>{let t=o8.includes(e.unitOfMeasure);return(0,m.jsxs)("li",{className:"p-4 flex space-x-3",children:[(0,m.jsxs)("div",{className:"flex-grow",children:[m.jsx("p",{className:"font-bold text-sm text-foreground dark:text-dark-foreground",children:e.name}),(0,m.jsxs)("p",{className:"text-xs text-foreground-muted dark:text-dark-foreground-muted",children:["Ksh ",e.price.toFixed(2)," / ",e.unitOfMeasure]}),e.discount&&(0,m.jsxs)("p",{className:"text-xs text-accent dark:text-dark-accent font-semibold",children:["Discount: -","fixed"===e.discount.type?`Ksh ${e.discount.value.toFixed(2)}`:`${e.discount.value}%`]})]}),m.jsx("div",{className:"flex items-center",children:t?m.jsx("input",{type:"number",value:e.quantity,onChange:t=>T(e.id,t.target.value),step:"0.01",className:"w-20 p-1 text-center font-bold bg-transparent border border-white/20 dark:border-white/10 rounded-md shadow-sm focus:outline-none focus:ring-primary focus:border-primary"}):(0,m.jsxs)("div",{className:"flex items-center space-x-2",children:[m.jsx("button",{whileTap:{scale:.9},onClick:()=>_(e.id,e.quantity,-1),className:"w-6 h-6 rounded-full bg-background/50 text-foreground hover:bg-border dark:bg-dark-border/50 dark:text-dark-foreground dark:hover:bg-dark-border",children:"-"}),m.jsx("span",{className:"font-bold w-6 text-center text-foreground dark:text-dark-foreground",children:e.quantity}),m.jsx("button",{whileTap:{scale:.9},onClick:()=>_(e.id,e.quantity,1),className:"w-6 h-6 rounded-full bg-background/50 text-foreground hover:bg-border dark:bg-dark-border/50 dark:text-dark-foreground dark:hover:bg-dark-border",children:"+"})]})}),(0,m.jsxs)("p",{className:"font-bold w-20 text-right text-foreground dark:text-dark-foreground",children:["Ksh ",(e.price*e.quantity).toFixed(2)]}),(0,m.jsxs)("div",{className:"flex flex-col items-center justify-center space-y-1",children:[(0,m.jsxs)("div",{className:"relative",children:[m.jsx("button",{whileTap:{scale:.9},onClick:()=>N(C===e.id?null:e.id),className:`p-1 rounded-full ${e.discount?"text-accent dark:text-dark-accent":"text-foreground-muted dark:text-dark-foreground-muted hover:text-accent"}`,children:x().cloneElement(ox.discount,{className:"h-5 w-5"})}),C===e.id&&m.jsx(o7,{item:e,onApply:t=>o(e.id,t),onClose:()=>N(null)})]}),m.jsx("button",{whileTap:{scale:.9},onClick:()=>i(e.id),className:"text-danger/70 hover:text-danger",children:m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]},e.id)})})})}),(0,m.jsxs)("div",{className:"p-4 border-t border-white/20 dark:border-white/10 bg-white/10 dark:bg-black/10 space-y-2",children:[(0,m.jsxs)("div",{className:"flex justify-between text-sm",children:[m.jsx("span",{className:"text-foreground-muted dark:text-dark-foreground-muted",children:"Gross Subtotal"}),(0,m.jsxs)("span",{className:"font-bold text-foreground dark:text-dark-foreground",children:["Ksh ",E.toFixed(2)]})]}),O>0&&(0,m.jsxs)("div",{className:"flex justify-between text-sm text-danger",children:[m.jsx("span",{children:"Item Discounts"}),(0,m.jsxs)("span",{children:["- Ksh ",O.toFixed(2)]})]}),S.enabled&&(0,m.jsxs)("div",{className:"flex justify-between items-center text-sm",children:[(0,m.jsxs)("span",{className:"text-foreground-muted dark:text-dark-foreground-muted",children:["Cart Discount (","percentage"===F.type?"%":"KES",")"]}),m.jsx("input",{type:"number",value:y,onChange:e=>{let t=parseFloat(e.target.value)||0;v(t=Math.max(0,Math.min(S.maxValue,t)))},max:S.maxValue,className:"w-20 text-right font-bold text-foreground dark:text-dark-foreground bg-transparent border rounded-md px-2 py-1 dark:border-white/20"})]}),P>0&&(0,m.jsxs)("div",{className:"flex justify-between text-sm text-danger",children:[m.jsx("span",{children:"Cart Discount Amount"}),(0,m.jsxs)("span",{children:["- Ksh ",P.toFixed(2)]})]}),(0,m.jsxs)("div",{className:"flex justify-between text-sm",children:[m.jsx("span",{className:"text-foreground-muted dark:text-dark-foreground-muted",children:"Taxable Amount"}),(0,m.jsxs)("span",{className:"font-bold text-foreground dark:text-dark-foreground",children:["Ksh ",I.toFixed(2)]})]}),(0,m.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,m.jsxs)("span",{className:"text-foreground-muted dark:text-dark-foreground-muted",children:["VAT (",A.tax.vatRate,"%)"]}),(0,m.jsxs)("span",{className:"font-bold text-foreground dark:text-dark-foreground",children:["Ksh ",U.toFixed(2)]})]}),b>0&&(0,m.jsxs)("div",{className:"flex justify-between text-sm text-accent dark:text-dark-accent",children:[m.jsx("span",{children:"Deposit Paid"}),(0,m.jsxs)("span",{children:["- Ksh ",b.toFixed(2)]})]}),m.jsx("div",{className:"rounded-xl p-4 bg-gradient-to-r from-primary to-secondary dark:from-dark-primary dark:to-dark-secondary text-primary-content dark:text-dark-primary-content animate-neural-pulse",children:(0,m.jsxs)("div",{className:"flex justify-between text-lg",children:[m.jsx("span",{className:"font-bold",children:"Total"}),(0,m.jsxs)("span",{className:"font-bold",children:["Ksh ",(L-b).toFixed(2)]})]})}),(0,m.jsxs)("div",{className:"flex gap-2 mt-4",children:[m.jsx("button",{onClick:h,disabled:0===e.length||!c,whileTap:{scale:.98},className:"flex-1 bg-muted dark:bg-dark-background text-foreground dark:text-dark-foreground font-bold py-3 rounded-xl transition-shadow shadow-clay-light active:shadow-clay-light-inset dark:shadow-clay-dark-strong dark:active:shadow-clay-dark-inset disabled:bg-slate-400 dark:disabled:bg-slate-600 disabled:shadow-none flex items-center justify-center text-lg",children:"Hold"}),m.jsx("button",{onClick:f,disabled:0===e.length||!c,whileTap:{scale:.98},className:"flex-1 bg-muted dark:bg-dark-background text-foreground dark:text-dark-foreground font-bold py-3 rounded-xl transition-shadow shadow-clay-light active:shadow-clay-light-inset dark:shadow-clay-dark-strong dark:active:shadow-clay-dark-inset disabled:bg-slate-400 dark:disabled:bg-slate-600 disabled:shadow-none flex items-center justify-center text-lg",children:"Layaway"}),(0,m.jsxs)("button",{onClick:()=>s(F),disabled:0===e.length||!c,whileTap:{scale:.98},className:"flex-1 bg-primary dark:bg-dark-primary text-primary-content dark:text-dark-primary-content font-bold py-3 rounded-xl transition-shadow shadow-clay-light active:shadow-clay-light-inset dark:shadow-clay-dark-strong dark:active:shadow-clay-dark-inset disabled:bg-slate-400 dark:disabled:bg-slate-600 disabled:shadow-none flex items-center justify-center text-lg",children:["Charge",!l&&m.jsx("span",{className:"text-xs ml-2",children:"(Offline)"})]})]})]})]})},ie=({cartItems:e,discount:t,onClose:r,onCompleteSale:n,customer:a,settings:o,depositApplied:i=0})=>{let[s,l]=(0,g.useState)("Cash"),[A,c]=(0,g.useState)(""),[d,u]=(0,g.useState)("prompting"),[h,f]=(0,g.useState)("N/A"!==a.phone?a.phone:""),[p,x]=(0,g.useState)(null),[b,y]=(0,g.useState)(null),[v,w]=(0,g.useState)(""),[k,B]=(0,g.useState)(!0),[j,C]=(0,g.useState)("keypad"),{total:N}=(0,g.useMemo)(()=>oH(e,t,o.tax.vatRate/100),[e,t,o.tax.vatRate]),S=N-i,F=(0,g.useMemo)(()=>o.loyalty.enabled&&a&&"cust001"!==a.id?Math.min(o.loyalty.maxRedemptionPercentage/100*S,a.loyaltyPoints*o.loyalty.redemptionRate):0,[a,S,o.loyalty]),E=(0,g.useMemo)(()=>o.loyalty.enabled&&""!==v?Math.min(Number(v)*o.loyalty.redemptionRate,F):0,[v,F,o.loyalty]),O=S-E,P=(0,g.useMemo)(()=>{if(""===A)return 0;let e=Number(A);return isNaN(e)?0:Math.max(0,e-O)},[A,O]),I=(0,g.useMemo)(()=>{if(O<=0)return[];let e=[],t=Math.ceil(O);for(let r of(e.push(t),[100,200,500,1e3,2e3,5e3]))r>t&&e.push(r);if(t>100){let r=100*Math.ceil(t/100);r>t&&e.push(r)}if(t>1e3){let r=1e3*Math.ceil(t/1e3);r>t&&e.push(r)}return[...new Set(e)].sort((e,t)=>e-t).slice(0,4)},[O]),U=async()=>{u("sending"),y(null),console.log("Initiating STK Push to",h,"for",O),setTimeout(()=>{u("waiting"),setTimeout(()=>{Math.random()>.2?(u("success"),x(`R${Math.random().toString(36).substring(2,12).toUpperCase()}`)):(u("failure"),y("The transaction was cancelled by the user."))},5e3)},1e3)},L=({onKeyPress:e})=>m.jsx("div",{className:"grid grid-cols-3 gap-2",children:["7","8","9","4","5","6","1","2","3",".","0",""].map(t=>m.jsx("button",{type:"button",whileTap:{scale:.95},onClick:()=>e(t),className:"bg-muted/50 dark:bg-dark-muted/50 text-foreground dark:text-dark-foreground font-bold py-4 rounded-xl text-xl hover:bg-border dark:hover:bg-dark-border transition-colors shadow-clay active:shadow-clay-inset",children:t},t))}),_=e=>{if(""===e)c(e=>e.slice(0,-1));else{if("."===e&&A.includes("."))return;c(t=>`${t}${e}`)}},T=({onAdd:e})=>m.jsx("div",{className:"grid grid-cols-4 gap-2",children:[1e3,500,200,100,50,20,10,5].map(t=>(0,m.jsxs)("button",{type:"button",whileTap:{scale:.95},onClick:()=>e(t),className:"bg-emerald-100 dark:bg-emerald-900/50 text-emerald-800 dark:text-emerald-300 font-bold py-3 rounded-xl text-sm hover:bg-emerald-200 dark:hover:bg-emerald-800 transition-colors shadow-clay active:shadow-clay-inset",children:["Ksh ",t]},t))}),D=e=>{c(t=>String((Number(t)||0)+e))};return m.jsx("div",{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50 p-4",onClick:r,children:(0,m.jsxs)("div",{initial:{scale:.9,y:20,opacity:0},animate:{scale:1,y:0,opacity:1},exit:{scale:.9,y:20,opacity:0},transition:{type:"spring",stiffness:300,damping:30},className:"bg-white/50 dark:bg-dark-card/50 backdrop-blur-2xl border border-white/20 dark:border-white/10 rounded-2xl shadow-2xl w-full max-w-3xl max-h-[90vh] flex flex-col",onClick:e=>e.stopPropagation(),children:[(0,m.jsxs)("div",{className:"flex-shrink-0 flex justify-between items-center p-6 border-b border-white/20 dark:border-white/10",children:[m.jsx("h2",{className:"text-2xl font-bold text-foreground dark:text-dark-foreground",children:"Finalize Payment"}),m.jsx("button",{onClick:r,className:"text-foreground/60 hover:text-foreground dark:text-dark-foreground/60 dark:hover:text-dark-foreground text-2xl",children:"\xd7"})]}),(0,m.jsxs)("div",{className:"flex-grow flex flex-col md:flex-row overflow-hidden",children:[(0,m.jsxs)("div",{className:"w-full md:w-1/3 border-b md:border-b-0 md:border-r border-white/20 dark:border-white/10 p-6 space-y-4 overflow-y-auto",children:[m.jsx("h3",{className:"font-bold text-lg",children:"Order Summary"}),(0,m.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,m.jsxs)("div",{className:"flex justify-between",children:[m.jsx("span",{className:"text-foreground/70 dark:text-dark-foreground/70",children:"Total (Pre-deposit)"})," ",m.jsx("span",{className:"font-mono",children:N.toFixed(2)})]}),i>0&&(0,m.jsxs)("div",{className:"flex justify-between text-accent dark:text-dark-accent",children:[m.jsx("span",{children:"Deposit Paid"})," ",(0,m.jsxs)("span",{className:"font-mono",children:["- ",i.toFixed(2)]})]}),(0,m.jsxs)("div",{className:"flex justify-between",children:[m.jsx("span",{className:"text-foreground/70 dark:text-dark-foreground/70",children:"Balance Due"})," ",m.jsx("span",{className:"font-mono",children:S.toFixed(2)})]}),o.loyalty.enabled&&"cust001"!==a.id&&(0,m.jsxs)(m.Fragment,{children:[m.jsx("div",{className:"pt-2 border-t border-white/20 dark:border-white/10"}),m.jsx("label",{className:"block font-medium",children:"Use Loyalty Points"}),(0,m.jsxs)("p",{className:"text-xs text-foreground/60 dark:text-dark-foreground/60",children:["Balance: ",a.loyaltyPoints," pts (Max Value: Ksh ",F.toFixed(2),")"]}),m.jsx("input",{type:"number",value:v,onChange:e=>w(""===e.target.value?"":Math.max(0,Math.min(Number(e.target.value),a.loyaltyPoints))),className:"w-full p-2 border rounded-lg bg-white/20 dark:bg-dark-background/50 border-white/20 dark:border-dark-border"}),E>0&&(0,m.jsxs)("div",{className:"flex justify-between text-accent dark:text-dark-accent",children:[m.jsx("span",{children:"Points Value"})," ",(0,m.jsxs)("span",{className:"font-mono",children:["- ",E.toFixed(2)]})]})]})]}),(0,m.jsxs)("div",{className:"pt-4 border-t border-white/20 dark:border-white/10 text-2xl font-bold text-primary dark:text-dark-primary flex justify-between",children:[m.jsx("span",{children:"To Pay"}),(0,m.jsxs)("span",{className:"font-mono",children:["Ksh ",O.toFixed(2)]})]})]}),(0,m.jsxs)("div",{className:"w-full md:w-2/3 p-6 flex flex-col overflow-y-auto",children:[m.jsx("div",{className:"flex bg-background/50 dark:bg-dark-background/50 p-1 rounded-xl mb-4",children:[{type:"Cash",name:"Cash"},{type:"M-Pesa",name:"M-Pesa"},{type:"Card",name:"Card"}].map(e=>m.jsx("button",{onClick:()=>l(e.type),className:`w-1/3 py-2 text-sm font-bold transition-colors rounded-lg ${s===e.type?"bg-card dark:bg-dark-card shadow text-primary dark:text-dark-primary":"text-foreground/70 dark:text-dark-foreground/70"}`,children:e.name},e.type))}),m.jsx(Q,{mode:"wait",children:m.jsx("div",{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},children:(()=>{switch(s){case"Cash":return(0,m.jsxs)("div",{className:"space-y-4",children:[(0,m.jsxs)("div",{className:"space-y-2 text-center",children:[m.jsx("label",{htmlFor:"cashReceived",className:"block text-sm font-medium text-foreground dark:text-dark-foreground",children:"Cash Received"}),m.jsx("input",{id:"cashReceived",type:"text",inputMode:"decimal",value:A,onChange:e=>{let t=e.target.value;/^$|^\d*\.?\d*$/.test(t)&&c(t)},className:"block w-full text-center text-4xl font-bold p-2 bg-transparent border-0 border-b-2 border-border dark:border-dark-border focus:outline-none focus:ring-0 focus:border-primary dark:focus:border-dark-primary transition-colors",placeholder:O.toFixed(2),autoFocus:!0}),m.jsx("div",{className:"flex flex-wrap gap-2 justify-center pt-2",children:I.map(e=>m.jsx("button",{type:"button",whileTap:{scale:.95},onClick:()=>c(String(e)),className:"bg-muted/50 dark:bg-dark-muted/50 text-foreground dark:text-dark-foreground font-bold py-1 px-4 rounded-xl text-sm hover:bg-border dark:hover:bg-dark-border shadow-clay active:shadow-clay-inset",children:e},e))}),P>0&&(0,m.jsxs)("div",{className:"text-center font-bold text-xl text-primary dark:text-dark-primary pt-2",children:["Change Due: Ksh ",P.toFixed(2)]})]}),(0,m.jsxs)("div",{className:"w-full max-w-xs mx-auto pt-2",children:[(0,m.jsxs)("div",{className:"flex justify-center bg-background/50 dark:bg-dark-background/50 p-1 rounded-xl mb-2",children:[m.jsx("button",{type:"button",onClick:()=>C("keypad"),className:`px-4 py-1.5 rounded-lg text-sm font-bold transition-colors w-1/2 ${"keypad"===j?"bg-card dark:bg-dark-card shadow text-primary dark:text-dark-primary":"text-foreground/70 dark:text-dark-foreground/70"}`,children:"Keypad"}),m.jsx("button",{type:"button",onClick:()=>C("notes"),className:`px-4 py-1.5 rounded-lg text-sm font-bold transition-colors w-1/2 ${"notes"===j?"bg-card dark:bg-dark-card shadow text-primary dark:text-dark-primary":"text-foreground/70 dark:text-dark-foreground/70"}`,children:"Notes"})]}),m.jsx(Q,{mode:"wait",children:m.jsx("div",{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},children:"keypad"===j?m.jsx(L,{onKeyPress:_}):m.jsx(T,{onAdd:D})},j)})]})]});case"M-Pesa":return(0,m.jsxs)("div",{className:"space-y-4 text-center",children:["prompting"===d&&(0,m.jsxs)(m.Fragment,{children:[m.jsx("p",{className:"text-sm text-foreground/70 dark:text-dark-foreground/70",children:"Enter customer's phone number to trigger STK push."}),m.jsx("input",{type:"tel",value:h,onChange:e=>f(e.target.value),className:"block w-full text-center text-lg font-bold p-2 bg-background dark:bg-dark-background border border-border dark:border-dark-border rounded-xl shadow-sm",placeholder:"0712345678"}),m.jsx("button",{whileTap:{scale:.95},onClick:U,className:"w-full bg-accent dark:bg-dark-accent text-white font-bold py-2 rounded-xl shadow-clay active:shadow-clay-inset",children:"Send STK Push"})]}),("sending"===d||"waiting"===d)&&(0,m.jsxs)("div",{className:"flex flex-col items-center p-4 space-y-2",children:[m.jsx("div",{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},className:"w-8 h-8 border-4 border-accent dark:border-dark-accent border-t-transparent rounded-full"}),m.jsx("p",{className:"font-semibold",children:"sending"===d?"Sending request to phone...":"Waiting for customer to enter M-Pesa PIN..."})]}),"success"===d&&(0,m.jsxs)("div",{className:"p-4 bg-accent/10 text-accent dark:text-dark-accent rounded-xl space-y-1",children:[m.jsx("h4",{className:"font-bold",children:"Payment Successful!"}),(0,m.jsxs)("p",{className:"text-sm",children:["Ref: ",p]})]}),"failure"===d&&(0,m.jsxs)("div",{className:"p-4 bg-danger/10 text-danger rounded-xl space-y-1",children:[m.jsx("h4",{className:"font-bold",children:"Payment Failed"}),m.jsx("p",{className:"text-sm",children:b}),m.jsx("button",{onClick:()=>u("prompting"),className:"text-sm font-bold underline",children:"Try Again"})]})]});case"Card":return(0,m.jsxs)("div",{className:"text-center p-4 bg-accent/10 dark:bg-dark-accent/20 text-accent dark:text-dark-accent rounded-xl font-semibold",children:["Please use your card terminal to process Ksh ",O.toFixed(2),"."]});default:return null}})()},s)})]})]}),(0,m.jsxs)("div",{className:"flex-shrink-0 flex justify-between items-center p-4 border-t border-white/20 dark:border-white/10",children:[(0,m.jsxs)("div",{className:"flex items-center",children:[m.jsx("input",{type:"checkbox",id:"autoPrint",checked:k,onChange:e=>B(e.target.checked),className:"h-4 w-4 text-primary rounded border-border focus:ring-primary"}),m.jsx("label",{htmlFor:"autoPrint",className:"ml-2 text-sm font-medium text-foreground dark:text-dark-foreground",children:"Print receipt after sale"})]}),m.jsx("button",{onClick:()=>{let{subtotal:r,totalDiscountAmount:l,lineItemsDiscountAmount:c,cartDiscountAmount:d,taxableAmount:u,tax:f}=oH(e,t,o.tax.vatRate/100),m=[];"Cash"===s?m.push({method:"Cash",amount:Number(A)||O}):"M-Pesa"===s?m.push({method:"M-Pesa",amount:O,details:{transactionCode:p||"N/A_MANUAL",phoneNumber:h}}):"Card"===s&&m.push({method:"Card",amount:O}),E>0&&m.push({method:"Points",amount:E}),n({items:e,subtotal:r,lineItemsDiscountAmount:c,cartDiscountAmount:d,cartDiscount:t,discountAmount:l,taxableAmount:u,tax:f,total:O,payments:m,change:P,customerId:a.id,date:new Date,pointsUsed:Number(v)||0,pointsValue:E||0,depositApplied:i},{autoPrint:k})},disabled:"M-Pesa"===s&&"success"!==d||"Cash"===s&&Number(A)<O,className:"bg-primary text-primary-content font-bold py-3 px-8 rounded-xl text-lg transition-shadow shadow-clay dark:shadow-clay-dark active:shadow-clay-inset dark:active:shadow-clay-dark-inset disabled:bg-slate-400 dark:disabled:bg-slate-600",whileTap:{scale:.98},children:"Complete Sale"})]})]})})};var it=r(31270),ir=r(41923),ia=r.n(ir);let io=()=>m.jsx("div",{className:"border-t border-dashed border-black my-2"}),ii=({sale:e,cashierName:t,settings:r,layaway:n})=>{let a=e.payments.find(e=>"Cash"===e.method),o=a&&e.change>0?a.amount:null,i=(0,g.useRef)(null),s=(0,g.useRef)(null);(0,g.useEffect)(()=>{if(i.current&&e.kraQrCodeData&&it.toCanvas(i.current,e.kraQrCodeData,{width:128,margin:1},e=>{e&&console.error("KRA QR Code Error:",e)}),s.current&&e.id)try{ia()(s.current,e.id,{format:"CODE128",width:1,height:40,displayValue:!1,margin:0})}catch(e){console.error("Barcode generation failed:",e)}},[e.id,e.kraQrCodeData]);let l=!!n,A=!l&&e.grandTotal&&(void 0!==e.balanceDue||void 0!==e.depositApplied),c=l&&n.payments.length>0&&n.payments[0].saleId===e.id,d=l&&c?n.items:e.items,u=l&&n.balance<=0,h="SALE RECEIPT";return l&&(h=c?"LAYAWAY DEPOSIT RECEIPT":u?"LAYAWAY - PAID IN FULL":"LAYAWAY INSTALLMENT"),(0,m.jsxs)("div",{className:"bg-white p-4 font-mono text-xs text-black w-full max-w-xs mx-auto",children:[(0,m.jsxs)("div",{className:"text-center mb-2",children:[r.businessInfo.logoUrl&&m.jsx("img",{src:r.businessInfo.logoUrl,alt:"Business Logo",className:"mx-auto h-16 w-auto object-contain mb-2"}),m.jsx("h2",{className:"text-base font-bold uppercase",children:r.businessInfo.name}),r.businessInfo.branch&&m.jsx("p",{className:"font-semibold",children:r.businessInfo.branch}),m.jsx("p",{children:r.businessInfo.location}),(0,m.jsxs)("p",{children:["Tel: ",r.businessInfo.phone]}),r.businessInfo.email&&(0,m.jsxs)("p",{children:["Email: ",r.businessInfo.email]}),r.tax.etimsEnabled&&r.businessInfo.kraPin&&(0,m.jsxs)("p",{children:["VAT PIN: ",r.businessInfo.kraPin]})]}),m.jsx(io,{}),m.jsx("div",{className:"text-center font-bold text-base my-1",children:h}),m.jsx("table",{className:"w-full",children:m.jsx("tbody",{children:(0,m.jsxs)("tr",{children:[(0,m.jsxs)("td",{className:"text-left",children:["Date: ",new Date(e.date).toLocaleDateString("en-GB",{timeZone:"Africa/Nairobi"})]}),(0,m.jsxs)("td",{className:"text-right",children:["Time: ",new Date(e.date).toLocaleTimeString("en-GB",{hour12:!1,timeZone:"Africa/Nairobi"})]})]})})}),(0,m.jsxs)("p",{children:["Receipt No: ",e.id]}),(0,m.jsxs)("p",{children:["Serial No: ",e.id]}),(0,m.jsxs)("p",{children:["Cashier: ",t]}),m.jsx(io,{}),(0,m.jsxs)("table",{className:"w-full",children:[m.jsx("thead",{children:(0,m.jsxs)("tr",{className:"font-bold border-b border-dashed border-black",children:[m.jsx("th",{className:"text-left py-1",colSpan:3,children:"Item"}),m.jsx("th",{className:"text-right py-1",children:"Total"})]})}),m.jsx("tbody",{children:(d||[]).map(e=>{let t=e.price*Math.abs(e.quantity),r=0;return e.discount&&(r="percentage"===e.discount.type?e.discount.value/100*t:e.discount.value,r=Math.min(t,r)),(0,m.jsxs)(x().Fragment,{children:[m.jsx("tr",{children:m.jsx("td",{colSpan:4,className:"pt-1 font-semibold",children:e.name})}),(0,m.jsxs)("tr",{children:[(0,m.jsxs)("td",{colSpan:3,className:"pl-2 text-xs",children:[Math.abs(e.quantity)," x ",e.price.toFixed(2)]}),m.jsx("td",{className:"text-right",children:t.toFixed(2)})]}),r>0&&m.jsx("tr",{children:(0,m.jsxs)("td",{colSpan:4,className:"text-right text-xs italic text-gray-600",children:["Discount: -",r.toFixed(2)]})})]},e.id)})})]}),m.jsx(io,{}),m.jsx("table",{className:"w-full",children:m.jsx("tbody",{children:l&&n?(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)("tr",{children:[m.jsx("td",{className:"py-0.5",children:"Layaway Total Value:"}),m.jsx("td",{className:"text-right py-0.5 font-semibold",children:n.total.toFixed(2)})]}),!c&&(0,m.jsxs)("tr",{children:[m.jsx("td",{className:"py-0.5",children:"Previous Balance:"}),m.jsx("td",{className:"text-right py-0.5 font-semibold",children:(n.balance+e.total).toFixed(2)})]}),(0,m.jsxs)("tr",{children:[(0,m.jsxs)("td",{className:"py-0.5",children:[c?"Deposit Paid":"Amount Paid Now",":"]}),m.jsx("td",{className:"text-right py-0.5 font-semibold",children:e.total.toFixed(2)})]}),(0,m.jsxs)("tr",{className:"font-bold",children:[m.jsx("td",{className:"py-0.5",children:"Total Paid to Date:"}),m.jsx("td",{className:"text-right py-0.5",children:(n.total-n.balance).toFixed(2)})]}),(0,m.jsxs)("tr",{className:"font-bold text-base border-y-2 border-double border-black my-1",children:[m.jsx("td",{className:"py-1",children:"BALANCE DUE:"}),(0,m.jsxs)("td",{className:"text-right py-1",children:["KSH ",n.balance.toFixed(2)]})]}),m.jsx("tr",{children:(0,m.jsxs)("td",{colSpan:2,className:"py-1 text-xs",children:["Due By: ",new Date(n.expiryDate).toLocaleDateString("en-GB")]})})]}):A?(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)("tr",{children:[m.jsx("td",{className:"py-0.5",children:"Order Total:"}),m.jsx("td",{className:"text-right py-0.5 font-semibold",children:(e.grandTotal||0).toFixed(2)})]}),e.depositApplied&&e.depositApplied>0&&(0,m.jsxs)("tr",{children:[m.jsx("td",{className:"py-0.5",children:"Less Deposit Paid:"}),(0,m.jsxs)("td",{className:"text-right py-0.5 font-semibold",children:["-",e.depositApplied.toFixed(2)]})]}),(0,m.jsxs)("tr",{children:[m.jsx("td",{className:"py-0.5",children:"Amount Paid Now:"}),m.jsx("td",{className:"text-right py-0.5 font-semibold",children:e.total.toFixed(2)})]}),(0,m.jsxs)("tr",{className:"font-bold text-base border-y-2 border-double border-black my-1",children:[m.jsx("td",{className:"py-1",children:"TOTAL PAID TO DATE:"}),(0,m.jsxs)("td",{className:"text-right py-1",children:["KSH ",((e.depositApplied||0)+e.total).toFixed(2)]})]}),(0,m.jsxs)("tr",{children:[m.jsx("td",{className:"py-0.5",children:"Balance Due:"}),m.jsx("td",{className:"text-right py-0.5 font-semibold",children:(e.balanceDue??0).toFixed(2)})]})]}):(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)("tr",{children:[m.jsx("td",{className:"py-0.5",children:"Gross Total:"}),m.jsx("td",{className:"text-right py-0.5 font-semibold",children:e.subtotal.toFixed(2)})]}),e.discountAmount>0&&(0,m.jsxs)("tr",{children:[m.jsx("td",{className:"py-0.5",children:"Total Discounts:"}),(0,m.jsxs)("td",{className:"text-right py-0.5 font-semibold",children:["-",e.discountAmount.toFixed(2)]})]}),(0,m.jsxs)("tr",{className:"font-bold text-base border-y-2 border-double border-black my-1",children:[m.jsx("td",{className:"py-1",children:"TOTAL PAID:"}),(0,m.jsxs)("td",{className:"text-right py-1",children:["KSH ",e.total.toFixed(2)]})]})]})})}),r.tax.vatEnabled&&(0,m.jsxs)(m.Fragment,{children:[m.jsx(io,{}),(0,m.jsxs)("div",{className:"space-y-1",children:[m.jsx("p",{className:"font-bold",children:"VAT Breakdown:"}),m.jsx("table",{className:"w-full",children:(0,m.jsxs)("tbody",{children:[(0,m.jsxs)("tr",{children:[m.jsx("td",{className:"py-0.5",children:"Taxable Amount:"}),m.jsx("td",{className:"text-right py-0.5",children:e.taxableAmount.toFixed(2)})]}),(0,m.jsxs)("tr",{children:[(0,m.jsxs)("td",{className:"py-0.5",children:["VAT (",r.tax.vatRate,"%):"]}),m.jsx("td",{className:"text-right py-0.5",children:e.tax.toFixed(2)})]})]})})]})]}),m.jsx(io,{}),(0,m.jsxs)("div",{children:[m.jsx("p",{className:"font-bold mb-1",children:"Payment Details:"}),m.jsx("table",{className:"w-full",children:(0,m.jsxs)("tbody",{children:[null!==o&&(0,m.jsxs)("tr",{children:[m.jsx("td",{className:"py-0.5",children:"Amount Tendered (Cash):"}),m.jsx("td",{className:"text-right py-0.5",children:o.toFixed(2)})]}),e.payments.map((e,t)=>"Cash"===e.method&&null!==o?null:(0,m.jsxs)("tr",{children:[(0,m.jsxs)("td",{className:"py-0.5",children:["Points"===e.method?"Loyalty Points":e.method,":"]}),m.jsx("td",{className:"text-right py-0.5",children:"Points"===e.method?`-${e.amount.toFixed(2)}`:e.amount.toFixed(2)})]},t)),e.change>0&&(0,m.jsxs)("tr",{className:"font-bold",children:[m.jsx("td",{className:"py-0.5",children:"Change:"}),m.jsx("td",{className:"text-right py-0.5",children:e.change.toFixed(2)})]})]})})]}),r.tax.etimsEnabled&&e.kraIcn&&(0,m.jsxs)(m.Fragment,{children:[m.jsx(io,{}),(0,m.jsxs)("div",{className:"text-center my-2",children:[m.jsx("p",{className:"font-bold",children:"KRA eTIMS INVOICE"}),(0,m.jsxs)("p",{className:"text-xs",children:["ICN: ",m.jsx("span",{className:"font-mono",children:e.kraIcn})]}),m.jsx("div",{className:"flex justify-center my-2",children:m.jsx("canvas",{ref:i})}),m.jsx("p",{className:"text-[10px]",children:"This is an official KRA receipt."})]})]}),m.jsx("div",{className:"flex flex-col items-center my-4",children:m.jsx("canvas",{ref:s})}),m.jsx("div",{className:"text-center space-y-1",children:r.receipt.footer.split("\n").map((e,t)=>m.jsx("p",{children:e},t))})]})},is=({sale:e,layaway:t,onNewSale:r,currentUser:n,settings:a,onWhatsAppReceiptRequest:o,shouldAutoPrint:i,onAutoPrintDone:s,showToast:l})=>{let A=async()=>{let{type:t,vendorId:r,productId:n}=a.hardware.printer;if("ESC/POS"===t){if(!r||!n){l("ESC/POS printer not configured. Please connect one in Settings > Hardware.","warning"),setTimeout(()=>window.print(),500);return}try{await oQ(e,a,e.cashierName)}catch(e){console.error("Direct print failed:",e),e.message?.includes("driver may be blocking access")?(l("Direct print failed. Falling back to Browser Print.","warning"),setTimeout(()=>window.print(),500)):l(e.message||"Direct print failed. Please check printer connection.","error")}}else window.print()};return(0,g.useEffect)(()=>{if(i){let e=setTimeout(()=>{A(),s&&s()},500);return()=>clearTimeout(e)}},[i,s,a.hardware.printer.type]),m.jsx("div",{className:"h-full flex flex-col bg-background dark:bg-dark-background p-4 md:p-8 md:items-center md:justify-center",children:(0,m.jsxs)("div",{className:"w-full max-w-5xl flex flex-col md:flex-row gap-8 h-full md:h-auto",children:[(0,m.jsxs)("div",{className:"flex-shrink-0 md:flex-grow bg-card dark:bg-dark-card p-8 rounded-2xl shadow-lg text-center flex flex-col items-center justify-center no-print",children:[m.jsx("div",{initial:{scale:0},animate:{scale:1},transition:{type:"spring",stiffness:260,damping:20,delay:.2},className:"bg-success/10 dark:bg-dark-success/10 rounded-full p-4 mb-4",children:m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-16 w-16 text-success dark:text-dark-success",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),m.jsx("h1",{className:"text-3xl font-bold text-foreground dark:text-dark-foreground",children:"Sale Complete!"}),(0,m.jsxs)("p",{className:"text-foreground/70 dark:text-dark-foreground/70 mt-2",children:["Transaction ID: ",e.id]}),a.tax.etimsEnabled&&m.jsx("div",{className:"mt-4",children:e.kraIcn?m.jsx("div",{initial:{opacity:0},animate:{opacity:1},className:"bg-success/10 dark:bg-dark-success/10 text-success dark:text-dark-success text-sm font-semibold px-4 py-2 rounded-full inline-block",children:"eTIMS Submission Successful"}):m.jsx("div",{initial:{opacity:0},animate:{opacity:1},className:"bg-amber-100 dark:bg-dark-warning/10 text-amber-800 dark:text-dark-warning text-sm font-semibold px-4 py-2 rounded-full inline-block",children:"eTIMS submission pending, will retry automatically."})}),(0,m.jsxs)("div",{className:"mt-8 flex flex-wrap justify-center gap-4",children:[m.jsx("button",{onClick:r,whileHover:{scale:1.05},whileTap:{scale:.95},className:"bg-primary dark:bg-dark-primary text-primary-content dark:text-dark-primary-content font-bold py-3 px-8 rounded-xl hover:bg-primary-focus dark:hover:bg-dark-primary-focus transition-shadow shadow-clay dark:shadow-clay-dark active:shadow-clay-inset dark:active:shadow-clay-dark-inset text-lg",children:t?"Close":"New Sale"}),(0,m.jsxs)("button",{onClick:()=>o(e.id,e.customerId),whileHover:{scale:1.05},whileTap:{scale:.95},className:"bg-[#25D366] text-white font-bold py-3 px-6 rounded-xl hover:bg-[#1EAE53] transition-shadow shadow-clay dark:shadow-clay-dark active:shadow-clay-inset dark:active:shadow-clay-dark-inset text-lg flex items-center",children:[m.jsx("div",{className:"w-5 h-5 mr-2",children:ox.whatsapp}),"WhatsApp"]}),m.jsx("button",{onClick:A,whileHover:{scale:1.05},whileTap:{scale:.95},className:"bg-foreground/80 dark:bg-dark-border text-white font-bold py-3 px-6 rounded-lg hover:bg-foreground dark:hover:bg-dark-border/80 transition-shadow shadow-clay dark:shadow-clay-dark active:shadow-clay-inset dark:active:shadow-clay-dark-inset text-lg flex items-center",children:"Print"})]})]}),m.jsx("div",{className:"flex-grow w-full md:w-96 md:flex-grow-0 flex-shrink-0 overflow-y-auto print-area",children:m.jsx("div",{id:"receipt-container",children:m.jsx("div",{id:"receipt-to-print",children:m.jsx(ii,{sale:e,cashierName:e.cashierName,settings:a,layaway:t})})})})]})})},il=({label:e,value:t,isNegative:r,isBold:n})=>(0,m.jsxs)("div",{className:`flex justify-between items-center py-2 ${n?"font-bold":""}`,children:[m.jsx("span",{className:"text-foreground/70 dark:text-dark-foreground/70",children:e}),(0,m.jsxs)("span",{className:`font-mono ${r?"text-danger":"text-foreground dark:text-dark-foreground"}`,children:[r?"-":"","Ksh ",Math.abs(t).toFixed(2)]})]}),iA=({activeShift:e,sales:t,expenses:r,onConfirmEndShift:n,onCancel:a})=>{let[o,i]=(0,g.useState)(""),[s,l]=(0,g.useState)(""),A=(0,g.useMemo)(()=>{let n=t.filter(t=>e.salesIds.includes(t.id)),a=r.filter(t=>e.expenseIds?.includes(t.id)).reduce((e,t)=>e+t.amount,0),o={},i=0;n.forEach(e=>{e.payments.forEach(e=>{o[e.method]=(o[e.method]||0)+e.amount}),i+=e.change});let s=e.startingFloat+(o.Cash||0)-i-a;return{breakdown:o,expectedCash:s,cashChange:i,cashSales:o.Cash||0,totalPayouts:a}},[e,t,r]),c=(0,g.useMemo)(()=>""===o?0:Number((Number(o)-A.expectedCash).toFixed(2)),[o,A.expectedCash]);return m.jsx("div",{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4",children:(0,m.jsxs)("div",{initial:{scale:.9,y:20,opacity:0},animate:{scale:1,y:0,opacity:1},exit:{scale:.9,y:20,opacity:0},transition:{type:"spring",stiffness:300,damping:30},className:"bg-card dark:bg-dark-card rounded-xl shadow-2xl w-full max-w-lg p-8",children:[(0,m.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[m.jsx("h2",{className:"text-2xl font-bold text-foreground dark:text-dark-foreground",children:"End Shift & Reconcile"}),m.jsx("button",{onClick:a,className:"text-foreground/60 hover:text-foreground dark:text-dark-foreground/60 dark:hover:text-dark-foreground",children:m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,m.jsxs)("div",{className:"bg-background dark:bg-dark-background/50 p-4 rounded-lg space-y-1 text-sm",children:[m.jsx("h3",{className:"font-bold text-foreground dark:text-dark-foreground/90 mb-2",children:"Cash Reconciliation"}),m.jsx(il,{label:"Starting Float",value:e.startingFloat}),m.jsx(il,{label:"Cash Received",value:A.cashSales}),m.jsx(il,{label:"Change Given",value:A.cashChange,isNegative:!0}),A.totalPayouts>0&&m.jsx(il,{label:"Cash Expenses",value:A.totalPayouts,isNegative:!0}),m.jsx("div",{className:"border-t border-border dark:border-dark-border !my-2"}),m.jsx(il,{label:"Expected in Drawer",value:A.expectedCash,isBold:!0})]}),(0,m.jsxs)("form",{onSubmit:e=>{e.preventDefault(),n(Number(o)||0,s)},className:"mt-6 space-y-4",children:[(0,m.jsxs)("div",{children:[m.jsx("label",{htmlFor:"actualCash",className:"block text-sm font-medium text-foreground/80 dark:text-dark-foreground/80",children:"Actual Counted Cash in Drawer"}),m.jsx("input",{type:"number",id:"actualCash",value:o,onChange:e=>i(""===e.target.value?"":parseFloat(e.target.value)),placeholder:"Enter counted amount",required:!0,autoFocus:!0,className:"mt-1 block w-full text-lg font-bold p-3 bg-background dark:bg-dark-background border border-border dark:border-dark-border rounded-md shadow-sm focus:outline-none focus:ring-primary focus:border-primary"})]}),(0,m.jsxs)("div",{children:[m.jsx("label",{htmlFor:"shiftNotes",className:"block text-sm font-medium text-foreground/80 dark:text-dark-foreground/80",children:"Shift Notes (Optional)"}),m.jsx("textarea",{id:"shiftNotes",value:s,onChange:e=>l(e.target.value),rows:2,placeholder:"e.g., Stayed late to restock shelves.",className:"mt-1 block w-full p-2 bg-background dark:bg-dark-background border border-border dark:border-dark-border rounded-md shadow-sm"})]}),""!==o&&(0,m.jsxs)("div",{className:`p-4 rounded-lg font-bold text-center text-lg
                            ${0===c?"bg-green-100 text-green-800 dark:bg-green-900/50 dark:text-green-300":"bg-red-100 text-red-800 dark:bg-red-900/50 dark:text-red-400"}`,children:[0===c&&"Drawer is Balanced",c>0&&`Overage: Ksh ${c.toFixed(2)}`,c<0&&`Shortage: Ksh ${Math.abs(c).toFixed(2)}`]}),(0,m.jsxs)("div",{className:"pt-4 flex justify-end space-x-3",children:[m.jsx("button",{type:"button",onClick:a,whileTap:{scale:.95},className:"px-4 py-2 text-sm font-bold bg-background text-foreground dark:bg-dark-border dark:text-dark-foreground rounded-md hover:bg-border dark:hover:bg-dark-border/50",children:"Cancel"}),m.jsx("button",{type:"submit",whileTap:{scale:.98},className:"px-6 py-2 text-sm font-bold text-white rounded-md bg-primary hover:bg-primary-focus",children:"Confirm & End Shift"})]})]})]})})};var ic=r(12054),id=r.n(ic),iu=(0,require("module").createRequire)("/");try{iu("worker_threads").Worker}catch(e){}var ih=Uint8Array,ip=Uint16Array,im=Int32Array,ig=new ih([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),ix=new ih([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),ib=new ih([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),iy=function(e,t){for(var r=new ip(31),n=0;n<31;++n)r[n]=t+=1<<e[n-1];for(var a=new im(r[30]),n=1;n<30;++n)for(var o=r[n];o<r[n+1];++o)a[o]=o-r[n]<<5|n;return{b:r,r:a}},iv=iy(ig,2),iw=iv.b,ik=iv.r;iw[28]=258,ik[258]=28;for(var iB=iy(ix,0),ij=iB.b,iC=iB.r,iN=new ip(32768),iS=0;iS<32768;++iS){var iF=(43690&iS)>>1|(21845&iS)<<1;iF=(61680&(iF=(52428&iF)>>2|(13107&iF)<<2))>>4|(3855&iF)<<4,iN[iS]=((65280&iF)>>8|(255&iF)<<8)>>1}for(var iE=function(e,t,r){for(var n,a=e.length,o=0,i=new ip(t);o<a;++o)e[o]&&++i[e[o]-1];var s=new ip(t);for(o=1;o<t;++o)s[o]=s[o-1]+i[o-1]<<1;if(r){n=new ip(1<<t);var l=15-t;for(o=0;o<a;++o)if(e[o])for(var A=o<<4|e[o],c=t-e[o],d=s[e[o]-1]++<<c,u=d|(1<<c)-1;d<=u;++d)n[iN[d]>>l]=A}else for(o=0,n=new ip(a);o<a;++o)e[o]&&(n[o]=iN[s[e[o]-1]++]>>15-e[o]);return n},iO=new ih(288),iS=0;iS<144;++iS)iO[iS]=8;for(var iS=144;iS<256;++iS)iO[iS]=9;for(var iS=256;iS<280;++iS)iO[iS]=7;for(var iS=280;iS<288;++iS)iO[iS]=8;for(var iP=new ih(32),iS=0;iS<32;++iS)iP[iS]=5;var iI=iE(iO,9,0),iU=iE(iO,9,1),iL=iE(iP,5,0),i_=iE(iP,5,1),iQ=function(e){for(var t=e[0],r=1;r<e.length;++r)e[r]>t&&(t=e[r]);return t},iT=function(e,t,r){var n=t/8|0;return(e[n]|e[n+1]<<8)>>(7&t)&r},iD=function(e,t){var r=t/8|0;return(e[r]|e[r+1]<<8|e[r+2]<<16)>>(7&t)},iM=function(e){return(e+7)/8|0},iH=function(e,t,r){return(null==t||t<0)&&(t=0),(null==r||r>e.length)&&(r=e.length),new ih(e.subarray(t,r))},iR=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],iK=function(e,t,r){var n=Error(t||iR[e]);if(n.code=e,Error.captureStackTrace&&Error.captureStackTrace(n,iK),!r)throw n;return n},iV=function(e,t,r,n){var a=e.length,o=n?n.length:0;if(!a||t.f&&!t.l)return r||new ih(0);var i=!r,s=i||2!=t.i,l=t.i;i&&(r=new ih(3*a));var A=function(e){var t=r.length;if(e>t){var n=new ih(Math.max(2*t,e));n.set(r),r=n}},c=t.f||0,d=t.p||0,u=t.b||0,h=t.l,f=t.d,p=t.m,m=t.n,g=8*a;do{if(!h){c=iT(e,d,1);var x=iT(e,d+1,3);if(d+=3,x){if(1==x)h=iU,f=i_,p=9,m=5;else if(2==x){var b=iT(e,d,31)+257,y=iT(e,d+10,15)+4,v=b+iT(e,d+5,31)+1;d+=14;for(var w=new ih(v),k=new ih(19),B=0;B<y;++B)k[ib[B]]=iT(e,d+3*B,7);d+=3*y;for(var j=iQ(k),C=(1<<j)-1,N=iE(k,j,1),B=0;B<v;){var S=N[iT(e,d,C)];d+=15&S;var F=S>>4;if(F<16)w[B++]=F;else{var E=0,O=0;for(16==F?(O=3+iT(e,d,3),d+=2,E=w[B-1]):17==F?(O=3+iT(e,d,7),d+=3):18==F&&(O=11+iT(e,d,127),d+=7);O--;)w[B++]=E}}var P=w.subarray(0,b),I=w.subarray(b);p=iQ(P),m=iQ(I),h=iE(P,p,1),f=iE(I,m,1)}else iK(1)}else{var F=iM(d)+4,U=e[F-4]|e[F-3]<<8,L=F+U;if(L>a){l&&iK(0);break}s&&A(u+U),r.set(e.subarray(F,L),u),t.b=u+=U,t.p=d=8*L,t.f=c;continue}if(d>g){l&&iK(0);break}}s&&A(u+131072);for(var _=(1<<p)-1,Q=(1<<m)-1,T=d;;T=d){var E=h[iD(e,d)&_],D=E>>4;if((d+=15&E)>g){l&&iK(0);break}if(E||iK(2),D<256)r[u++]=D;else if(256==D){T=d,h=null;break}else{var M=D-254;if(D>264){var B=D-257,H=ig[B];M=iT(e,d,(1<<H)-1)+iw[B],d+=H}var R=f[iD(e,d)&Q],K=R>>4;R||iK(3),d+=15&R;var I=ij[K];if(K>3){var H=ix[K];I+=iD(e,d)&(1<<H)-1,d+=H}if(d>g){l&&iK(0);break}s&&A(u+131072);var V=u+M;if(u<I){var q=o-I,G=Math.min(I,V);for(q+u<0&&iK(3);u<G;++u)r[u]=n[q+u]}for(;u<V;++u)r[u]=r[u-I]}}t.l=h,t.p=T,t.b=u,t.f=c,h&&(c=1,t.m=p,t.d=f,t.n=m)}while(!c);return u!=r.length&&i?iH(r,0,u):r.subarray(0,u)},iq=function(e,t,r){r<<=7&t;var n=t/8|0;e[n]|=r,e[n+1]|=r>>8},iG=function(e,t,r){r<<=7&t;var n=t/8|0;e[n]|=r,e[n+1]|=r>>8,e[n+2]|=r>>16},iz=function(e,t){for(var r=[],n=0;n<e.length;++n)e[n]&&r.push({s:n,f:e[n]});var a=r.length,o=r.slice();if(!a)return{t:i0,l:0};if(1==a){var i=new ih(r[0].s+1);return i[r[0].s]=1,{t:i,l:1}}r.sort(function(e,t){return e.f-t.f}),r.push({s:-1,f:25001});var s=r[0],l=r[1],A=0,c=1,d=2;for(r[0]={s:-1,f:s.f+l.f,l:s,r:l};c!=a-1;)s=r[r[A].f<r[d].f?A++:d++],l=r[A!=c&&r[A].f<r[d].f?A++:d++],r[c++]={s:-1,f:s.f+l.f,l:s,r:l};for(var u=o[0].s,n=1;n<a;++n)o[n].s>u&&(u=o[n].s);var h=new ip(u+1),f=iW(r[c-1],h,0);if(f>t){var n=0,p=0,m=f-t,g=1<<m;for(o.sort(function(e,t){return h[t.s]-h[e.s]||e.f-t.f});n<a;++n){var x=o[n].s;if(h[x]>t)p+=g-(1<<f-h[x]),h[x]=t;else break}for(p>>=m;p>0;){var b=o[n].s;h[b]<t?p-=1<<t-h[b]++-1:++n}for(;n>=0&&p;--n){var y=o[n].s;h[y]==t&&(--h[y],++p)}f=t}return{t:new ih(h),l:f}},iW=function(e,t,r){return -1==e.s?Math.max(iW(e.l,t,r+1),iW(e.r,t,r+1)):t[e.s]=r},i$=function(e){for(var t=e.length;t&&!e[--t];);for(var r=new ip(++t),n=0,a=e[0],o=1,i=function(e){r[n++]=e},s=1;s<=t;++s)if(e[s]==a&&s!=t)++o;else{if(!a&&o>2){for(;o>138;o-=138)i(32754);o>2&&(i(o>10?o-11<<5|28690:o-3<<5|12305),o=0)}else if(o>3){for(i(a),--o;o>6;o-=6)i(8304);o>2&&(i(o-3<<5|8208),o=0)}for(;o--;)i(a);o=1,a=e[s]}return{c:r.subarray(0,n),n:t}},iX=function(e,t){for(var r=0,n=0;n<t.length;++n)r+=e[n]*t[n];return r},iY=function(e,t,r){var n=r.length,a=iM(t+2);e[a]=255&n,e[a+1]=n>>8,e[a+2]=255^e[a],e[a+3]=255^e[a+1];for(var o=0;o<n;++o)e[a+o+4]=r[o];return(a+4+n)*8},iJ=function(e,t,r,n,a,o,i,s,l,A,c){iq(t,c++,r),++a[256];for(var d,u,h,f,p=iz(a,15),m=p.t,g=p.l,x=iz(o,15),b=x.t,y=x.l,v=i$(m),w=v.c,k=v.n,B=i$(b),j=B.c,C=B.n,N=new ip(19),S=0;S<w.length;++S)++N[31&w[S]];for(var S=0;S<j.length;++S)++N[31&j[S]];for(var F=iz(N,7),E=F.t,O=F.l,P=19;P>4&&!E[ib[P-1]];--P);var I=A+5<<3,U=iX(a,iO)+iX(o,iP)+i,L=iX(a,m)+iX(o,b)+i+14+3*P+iX(N,E)+2*N[16]+3*N[17]+7*N[18];if(l>=0&&I<=U&&I<=L)return iY(t,c,e.subarray(l,l+A));if(iq(t,c,1+(L<U)),c+=2,L<U){d=iE(m,g,0),u=m,h=iE(b,y,0),f=b;var _=iE(E,O,0);iq(t,c,k-257),iq(t,c+5,C-1),iq(t,c+10,P-4),c+=14;for(var S=0;S<P;++S)iq(t,c+3*S,E[ib[S]]);c+=3*P;for(var Q=[w,j],T=0;T<2;++T)for(var D=Q[T],S=0;S<D.length;++S){var M=31&D[S];iq(t,c,_[M]),c+=E[M],M>15&&(iq(t,c,D[S]>>5&127),c+=D[S]>>12)}}else d=iI,u=iO,h=iL,f=iP;for(var S=0;S<s;++S){var H=n[S];if(H>255){var M=H>>18&31;iG(t,c,d[M+257]),c+=u[M+257],M>7&&(iq(t,c,H>>23&31),c+=ig[M]);var R=31&H;iG(t,c,h[R]),c+=f[R],R>3&&(iG(t,c,H>>5&8191),c+=ix[R])}else iG(t,c,d[H]),c+=u[H]}return iG(t,c,d[256]),c+u[256]},iZ=new im([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),i0=new ih(0),i1=function(e,t,r,n,a,o){var i=o.z||e.length,s=new ih(n+i+5*(1+Math.ceil(i/7e3))+a),l=s.subarray(n,s.length-a),A=o.l,c=7&(o.r||0);if(t){c&&(l[0]=o.r>>3);for(var d=iZ[t-1],u=d>>13,h=8191&d,f=(1<<r)-1,p=o.p||new ip(32768),m=o.h||new ip(f+1),g=Math.ceil(r/3),x=2*g,b=function(t){return(e[t]^e[t+1]<<g^e[t+2]<<x)&f},y=new im(25e3),v=new ip(288),w=new ip(32),k=0,B=0,j=o.i||0,C=0,N=o.w||0,S=0;j+2<i;++j){var F=b(j),E=32767&j,O=m[F];if(p[E]=O,m[F]=E,N<=j){var P=i-j;if((k>7e3||C>24576)&&(P>423||!A)){c=iJ(e,l,0,y,v,w,B,C,S,j-S,c),C=k=B=0,S=j;for(var I=0;I<286;++I)v[I]=0;for(var I=0;I<30;++I)w[I]=0}var U=2,L=0,_=h,Q=E-O&32767;if(P>2&&F==b(j-Q))for(var T=Math.min(u,P)-1,D=Math.min(32767,j),M=Math.min(258,P);Q<=D&&--_&&E!=O;){if(e[j+U]==e[j+U-Q]){for(var H=0;H<M&&e[j+H]==e[j+H-Q];++H);if(H>U){if(U=H,L=Q,H>T)break;for(var R=Math.min(Q,H-2),K=0,I=0;I<R;++I){var V=j-Q+I&32767,q=p[V],G=V-q&32767;G>K&&(K=G,O=V)}}}O=p[E=O],Q+=E-O&32767}if(L){y[C++]=268435456|ik[U]<<18|iC[L];var z=31&ik[U],W=31&iC[L];B+=ig[z]+ix[W],++v[257+z],++w[W],N=j+U,++k}else y[C++]=e[j],++v[e[j]]}}for(j=Math.max(j,N);j<i;++j)y[C++]=e[j],++v[e[j]];c=iJ(e,l,A,y,v,w,B,C,S,j-S,c),A||(o.r=7&c|l[c/8|0]<<3,c-=7,o.h=m,o.p=p,o.i=j,o.w=N)}else{for(var j=o.w||0;j<i+A;j+=65535){var $=j+65535;$>=i&&(l[c/8|0]=A,$=i),c=iY(l,c+1,e.subarray(j,$))}o.i=i}return iH(s,0,n+iM(c)+a)},i2=function(){var e=1,t=0;return{p:function(r){for(var n=e,a=t,o=0|r.length,i=0;i!=o;){for(var s=Math.min(i+2655,o);i<s;++i)a+=n+=r[i];n=(65535&n)+15*(n>>16),a=(65535&a)+15*(a>>16)}e=n,t=a},d:function(){return e%=65521,t%=65521,(255&e)<<24|(65280&e)<<8|(255&t)<<8|t>>8}}},i5=function(e,t,r,n,a){if(!a&&(a={l:1},t.dictionary)){var o=t.dictionary.subarray(-32768),i=new ih(o.length+e.length);i.set(o),i.set(e,o.length),e=i,a.w=o.length}return i1(e,null==t.level?6:t.level,null==t.mem?a.l?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(e.length)))):20:12+t.mem,r,n,a)},i4=function(e,t){var r={};for(var n in e)r[n]=e[n];for(var n in t)r[n]=t[n];return r},i3=function(e,t,r){for(var n=e(),a=e.toString(),o=a.slice(a.indexOf("[")+1,a.lastIndexOf("]")).replace(/\s+/g,"").split(","),i=0;i<n.length;++i){var s=n[i],l=o[i];if("function"==typeof s){t+=";"+l+"=";var A=s.toString();if(s.prototype){if(-1!=A.indexOf("[native code]")){var c=A.indexOf(" ",8)+1;t+=A.slice(c,A.indexOf("(",c))}else for(var d in t+=A,s.prototype)t+=";"+l+".prototype."+d+"="+s.prototype[d].toString()}else t+=A}else r[l]=s}return t},i6=function(e){var t=[];for(var r in e)e[r].buffer&&t.push((e[r]=new e[r].constructor(e[r])).buffer);return t},i8=function(e,t,r,n){if(!null[r]){for(var a="",o={},i=e.length-1,s=0;s<i;++s)a=i3(e[s],a,o);null[r]={c:i3(e[i],a,o),e:o}}var l=i4({},null[r].e);return(null)(null[r].c+";onmessage=function(e){for(var k in e.data)self[k]=e.data[k];onmessage="+t.toString()+"}",r,l,i6(l),n)},i7=function(e){return postMessage(e,[e.buffer])},i9=function(e){return e&&{out:e.size&&new ih(e.size),dictionary:e.dictionary}},se=function(e,t){return e[t]|e[t+1]<<8},st=function(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24)>>>0},sr=function(e,t){return st(e,t)+4294967296*st(e,t+4)},sn=function(e,t,r){for(;r;++t)e[t]=r,r>>>=8},sa=function(e,t){var r=t.level;if(e[0]=120,e[1]=(0==r?0:r<6?1:9==r?3:2)<<6|(t.dictionary&&32),e[1]|=31-(e[0]<<8|e[1])%31,t.dictionary){var n=i2();n.p(t.dictionary),sn(e,2,n.d())}};function so(e,t){return iV(e,{i:2},t&&t.out,t&&t.dictionary)}function si(e,t){t||(t={});var r=i2();r.p(e);var n=i5(e,t,t.dictionary?6:2,4);return sa(n,t),sn(n,n.length-4,r.d()),n}var ss="undefined"!=typeof TextDecoder&&new TextDecoder;try{ss.decode(i0,{stream:!0})}catch(e){}var sl=("function"==typeof queueMicrotask?queueMicrotask:"function"==typeof setTimeout&&setTimeout,function(){return"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this}());function sA(){sl.console&&"function"==typeof sl.console.log&&sl.console.log.apply(sl.console,arguments)}var sc={log:sA,warn:function(e){sl.console&&("function"==typeof sl.console.warn?sl.console.warn.apply(sl.console,arguments):sA.call(null,arguments))},error:function(e){sl.console&&("function"==typeof sl.console.error?sl.console.error.apply(sl.console,arguments):sA(e))}};function sd(e,t,r){var n=new XMLHttpRequest;n.open("GET",e),n.responseType="blob",n.onload=function(){sg(n.response,t,r)},n.onerror=function(){sc.error("could not download file")},n.send()}function su(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch(e){}return t.status>=200&&t.status<=299}function sh(e){try{e.dispatchEvent(new MouseEvent("click"))}catch(r){var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var sf,sp,sm,sg=sl.saveAs||("object"!==("undefined"==typeof window?"undefined":id()(window))||window!==sl?function(){}:"undefined"!=typeof HTMLAnchorElement&&"download"in HTMLAnchorElement.prototype?function(e,t,r){var n=sl.URL||sl.webkitURL,a=document.createElement("a");t=t||e.name||"download",a.download=t,a.rel="noopener","string"==typeof e?(a.href=e,a.origin!==location.origin?su(a.href)?sd(e,t,r):sh(a,a.target="_blank"):sh(a)):(a.href=n.createObjectURL(e),setTimeout(function(){n.revokeObjectURL(a.href)},4e4),setTimeout(function(){sh(a)},0))}:"msSaveOrOpenBlob"in navigator?function(e,t,r){if(t=t||e.name||"download","string"==typeof e){if(su(e))sd(e,t,r);else{var n,a=document.createElement("a");a.href=e,a.target="_blank",setTimeout(function(){sh(a)})}}else navigator.msSaveOrOpenBlob((void 0===(n=r)?n={autoBom:!1}:"object"!==id()(n)&&(sc.warn("Deprecated: Expected third argument to be a object"),n={autoBom:!n}),n.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob([String.fromCharCode(65279),e],{type:e.type}):e),t)}:function(e,t,r,n){if((n=n||open("","_blank"))&&(n.document.title=n.document.body.innerText="downloading..."),"string"==typeof e)return sd(e,t,r);var a="application/octet-stream"===e.type,o=/constructor/i.test(sl.HTMLElement)||sl.safari,i=/CriOS\/[\d]+/.test(navigator.userAgent);if((i||a&&o)&&"object"===("undefined"==typeof FileReader?"undefined":id()(FileReader))){var s=new FileReader;s.onloadend=function(){var e=s.result;e=i?e:e.replace(/^data:[^;]*;/,"data:attachment/file;"),n?n.location.href=e:location=e,n=null},s.readAsDataURL(e)}else{var l=sl.URL||sl.webkitURL,A=l.createObjectURL(e);n?n.location=A:location.href=A,n=null,setTimeout(function(){l.revokeObjectURL(A)},4e4)}});function sx(e){var t;e=e||"",this.ok=!1,"#"==e.charAt(0)&&(e=e.substr(1,6)),e=({aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"})[e=(e=e.replace(/ /g,"")).toLowerCase()]||e;for(var r=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(e){return[parseInt(e[1]),parseInt(e[2]),parseInt(e[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(e){return[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(e){return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16)]}}],n=0;n<r.length;n++){var a=r[n].re,o=r[n].process,i=a.exec(e);i&&(t=o(i),this.r=t[0],this.g=t[1],this.b=t[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var e=this.r.toString(16),t=this.g.toString(16),r=this.b.toString(16);return 1==e.length&&(e="0"+e),1==t.length&&(t="0"+t),1==r.length&&(r="0"+r),"#"+e+t+r}}function sb(e,t){var r=e[0],n=e[1],a=e[2],o=e[3];r=sv(r,n,a,o,t[0],7,-680876936),o=sv(o,r,n,a,t[1],12,-389564586),a=sv(a,o,r,n,t[2],17,606105819),n=sv(n,a,o,r,t[3],22,-1044525330),r=sv(r,n,a,o,t[4],7,-176418897),o=sv(o,r,n,a,t[5],12,1200080426),a=sv(a,o,r,n,t[6],17,-1473231341),n=sv(n,a,o,r,t[7],22,-45705983),r=sv(r,n,a,o,t[8],7,1770035416),o=sv(o,r,n,a,t[9],12,-1958414417),a=sv(a,o,r,n,t[10],17,-42063),n=sv(n,a,o,r,t[11],22,-1990404162),r=sv(r,n,a,o,t[12],7,1804603682),o=sv(o,r,n,a,t[13],12,-40341101),a=sv(a,o,r,n,t[14],17,-1502002290),r=sw(r,n=sv(n,a,o,r,t[15],22,1236535329),a,o,t[1],5,-165796510),o=sw(o,r,n,a,t[6],9,-1069501632),a=sw(a,o,r,n,t[11],14,643717713),n=sw(n,a,o,r,t[0],20,-373897302),r=sw(r,n,a,o,t[5],5,-701558691),o=sw(o,r,n,a,t[10],9,38016083),a=sw(a,o,r,n,t[15],14,-660478335),n=sw(n,a,o,r,t[4],20,-405537848),r=sw(r,n,a,o,t[9],5,568446438),o=sw(o,r,n,a,t[14],9,-1019803690),a=sw(a,o,r,n,t[3],14,-187363961),n=sw(n,a,o,r,t[8],20,1163531501),r=sw(r,n,a,o,t[13],5,-1444681467),o=sw(o,r,n,a,t[2],9,-51403784),a=sw(a,o,r,n,t[7],14,1735328473),r=sk(r,n=sw(n,a,o,r,t[12],20,-1926607734),a,o,t[5],4,-378558),o=sk(o,r,n,a,t[8],11,-2022574463),a=sk(a,o,r,n,t[11],16,1839030562),n=sk(n,a,o,r,t[14],23,-35309556),r=sk(r,n,a,o,t[1],4,-1530992060),o=sk(o,r,n,a,t[4],11,1272893353),a=sk(a,o,r,n,t[7],16,-155497632),n=sk(n,a,o,r,t[10],23,-1094730640),r=sk(r,n,a,o,t[13],4,681279174),o=sk(o,r,n,a,t[0],11,-358537222),a=sk(a,o,r,n,t[3],16,-722521979),n=sk(n,a,o,r,t[6],23,76029189),r=sk(r,n,a,o,t[9],4,-640364487),o=sk(o,r,n,a,t[12],11,-421815835),a=sk(a,o,r,n,t[15],16,530742520),r=sB(r,n=sk(n,a,o,r,t[2],23,-995338651),a,o,t[0],6,-198630844),o=sB(o,r,n,a,t[7],10,1126891415),a=sB(a,o,r,n,t[14],15,-1416354905),n=sB(n,a,o,r,t[5],21,-57434055),r=sB(r,n,a,o,t[12],6,1700485571),o=sB(o,r,n,a,t[3],10,-1894986606),a=sB(a,o,r,n,t[10],15,-1051523),n=sB(n,a,o,r,t[1],21,-2054922799),r=sB(r,n,a,o,t[8],6,1873313359),o=sB(o,r,n,a,t[15],10,-30611744),a=sB(a,o,r,n,t[6],15,-1560198380),n=sB(n,a,o,r,t[13],21,1309151649),r=sB(r,n,a,o,t[4],6,-145523070),o=sB(o,r,n,a,t[11],10,-1120210379),a=sB(a,o,r,n,t[2],15,718787259),n=sB(n,a,o,r,t[9],21,-343485551),e[0]=sE(r,e[0]),e[1]=sE(n,e[1]),e[2]=sE(a,e[2]),e[3]=sE(o,e[3])}function sy(e,t,r,n,a,o){return t=sE(sE(t,e),sE(n,o)),sE(t<<a|t>>>32-a,r)}function sv(e,t,r,n,a,o,i){return sy(t&r|~t&n,e,t,a,o,i)}function sw(e,t,r,n,a,o,i){return sy(t&n|r&~n,e,t,a,o,i)}function sk(e,t,r,n,a,o,i){return sy(t^r^n,e,t,a,o,i)}function sB(e,t,r,n,a,o,i){return sy(r^(t|~n),e,t,a,o,i)}function sj(e){var t,r=e.length,n=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=e.length;t+=64)sb(n,function(e){var t,r=[];for(t=0;t<64;t+=4)r[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return r}(e.substring(t-64,t)));e=e.substring(t-64);var a=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<e.length;t++)a[t>>2]|=e.charCodeAt(t)<<(t%4<<3);if(a[t>>2]|=128<<(t%4<<3),t>55)for(sb(n,a),t=0;t<16;t++)a[t]=0;return a[14]=8*r,sb(n,a),n}sp=sl.atob.bind(sl),sm=sl.btoa.bind(sl);var sC="0123456789abcdef".split("");function sN(e){return String.fromCharCode((255&e)>>0,(65280&e)>>8,(16711680&e)>>16,(4278190080&e)>>24)}function sS(e){return sj(e).map(sN).join("")}var sF="5d41402abc4b2a76b9719d911017c592"!=function(e){for(var t=0;t<e.length;t++)e[t]=function(e){for(var t="",r=0;r<4;r++)t+=sC[e>>8*r+4&15]+sC[e>>8*r&15];return t}(e[t]);return e.join("")}(sj("hello"));function sE(e,t){if(sF){var r=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(r>>16)<<16|65535&r}return e+t&4294967295}function sO(e,t){if(e!==r){for(var r,n,a=Array(1+(256/e.length>>0)+1).join(e),o=[],i=0;i<256;i++)o[i]=i;var s=0;for(i=0;i<256;i++){var l=o[i];s=(s+l+a.charCodeAt(i))%256,o[i]=o[s],o[s]=l}r=e,n=o}else o=n;var A=t.length,c=0,d=0,u="";for(i=0;i<A;i++)d=(d+(l=o[c=(c+1)%256]))%256,o[c]=o[d],o[d]=l,a=o[(o[c]+o[d])%256],u+=String.fromCharCode(t.charCodeAt(i)^a);return u}var sP={print:4,modify:8,copy:16,"annot-forms":32};function sI(e,t,r,n){this.v=1,this.r=2;var a=192;e.forEach(function(e){if(void 0!==sP.perm)throw Error("Invalid permission: "+e);a+=sP[e]}),this.padding="(\xbfN^Nu\x8aAd\0NV\xff\xfa\x01\b..\0\xb6\xd0h>\x80/\f\xa9\xfedSiz";var o=(t+this.padding).substr(0,32),i=(r+this.padding).substr(0,32);this.O=this.processOwnerPassword(o,i),this.P=-(1+(255^a)),this.encryptionKey=sS(o+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(n)).substr(0,5),this.U=sO(this.encryptionKey,this.padding)}function sU(e){if(/[^\u0000-\u00ff]/.test(e))throw Error("Invalid PDF Name Object: "+e+", Only accept ASCII characters.");for(var t="",r=e.length,n=0;n<r;n++){var a=e.charCodeAt(n);a<33||35===a||37===a||40===a||41===a||47===a||60===a||62===a||91===a||93===a||123===a||125===a||a>126?t+="#"+("0"+a.toString(16)).slice(-2):t+=e[n]}return t}function sL(e){if("object"!==id()(e))throw Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var t={};this.subscribe=function(e,r,n){if(n=n||!1,"string"!=typeof e||"function"!=typeof r||"boolean"!=typeof n)throw Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");t.hasOwnProperty(e)||(t[e]={});var a=Math.random().toString(35);return t[e][a]=[r,!!n],a},this.unsubscribe=function(e){for(var r in t)if(t[r][e])return delete t[r][e],0===Object.keys(t[r]).length&&delete t[r],!0;return!1},this.publish=function(r){if(t.hasOwnProperty(r)){var n=Array.prototype.slice.call(arguments,1),a=[];for(var o in t[r]){var i=t[r][o];try{i[0].apply(e,n)}catch(e){sl.console&&sc.error("jsPDF PubSub Error",e.message,e)}i[1]&&a.push(o)}a.length&&a.forEach(this.unsubscribe)}},this.getTopics=function(){return t}}function s_(e){if(!(this instanceof s_))return new s_(e);var t="opacity,stroke-opacity".split(",");for(var r in e)e.hasOwnProperty(r)&&t.indexOf(r)>=0&&(this[r]=e[r]);this.id="",this.objectNumber=-1}function sQ(e,t){this.gState=e,this.matrix=t,this.id="",this.objectNumber=-1}function sT(e,t,r,n,a){if(!(this instanceof sT))return new sT(e,t,r,n,a);this.type="axial"===e?2:3,this.coords=t,this.colors=r,sQ.call(this,n,a)}function sD(e,t,r,n,a){if(!(this instanceof sD))return new sD(e,t,r,n,a);this.boundingBox=e,this.xStep=t,this.yStep=r,this.stream="",this.cloneIndex=0,sQ.call(this,n,a)}function sM(e){var t,r="string"==typeof arguments[0]?arguments[0]:"p",n=arguments[1],a=arguments[2],o=arguments[3],i=[],s=1,l=16,A="S",c=null;"object"===id()(e=e||{})&&(r=e.orientation,n=e.unit||n,a=e.format||a,o=e.compress||e.compressPdf||o,null!==(c=e.encryption||null)&&(c.userPassword=c.userPassword||"",c.ownerPassword=c.ownerPassword||"",c.userPermissions=c.userPermissions||[]),s="number"==typeof e.userUnit?Math.abs(e.userUnit):1,void 0!==e.precision&&(t=e.precision),void 0!==e.floatPrecision&&(l=e.floatPrecision),A=e.defaultPathOperation||"S"),i=e.filters||(!0===o?["FlateEncode"]:i),n=n||"mm",r=(""+(r||"P")).toLowerCase();var d=e.putOnlyUsedFonts||!1,u={},h={internal:{},__private__:{}};h.__private__.PubSub=sL;var f="1.3",p=h.__private__.getPdfVersion=function(){return f};h.__private__.setPdfVersion=function(e){f=e};var m={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};h.__private__.getPageFormats=function(){return m};var g=h.__private__.getPageFormat=function(e){return m[e]};a=a||"a4";var x={COMPAT:"compat",ADVANCED:"advanced"},b=x.COMPAT;function y(){this.saveGraphicsState(),Y(new eO(eu,0,0,-eu,0,rn()*eu).toString()+" cm"),this.setFontSize(this.getFontSize()/eu),A="n",b=x.ADVANCED}function v(){this.restoreGraphicsState(),A="S",b=x.COMPAT}var w=h.__private__.combineFontStyleAndFontWeight=function(e,t){if("bold"==e&&"normal"==t||"bold"==e&&400==t||"normal"==e&&"italic"==t||"bold"==e&&"italic"==t)throw Error("Invalid Combination of fontweight and fontstyle");return t&&(e=400==t||"normal"===t?"italic"===e?"italic":"normal":700!=t&&"bold"!==t||"normal"!==e?(700==t?"bold":t)+""+e:"bold"),e};h.advancedAPI=function(e){var t=b===x.COMPAT;return t&&y.call(this),"function"!=typeof e||(e(this),t&&v.call(this)),this},h.compatAPI=function(e){var t=b===x.ADVANCED;return t&&v.call(this),"function"!=typeof e||(e(this),t&&y.call(this)),this},h.isAdvancedAPI=function(){return b===x.ADVANCED};var k,B=function(e){if(b!==x.ADVANCED)throw Error(e+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},j=h.roundToPrecision=h.__private__.roundToPrecision=function(e,r){var n=t||r;if(isNaN(e)||isNaN(n))throw Error("Invalid argument passed to jsPDF.roundToPrecision");return e.toFixed(n).replace(/0+$/,"")};k=h.hpf=h.__private__.hpf="number"==typeof l?function(e){if(isNaN(e))throw Error("Invalid argument passed to jsPDF.hpf");return j(e,l)}:"smart"===l?function(e){if(isNaN(e))throw Error("Invalid argument passed to jsPDF.hpf");return j(e,e>-1&&e<1?16:5)}:function(e){if(isNaN(e))throw Error("Invalid argument passed to jsPDF.hpf");return j(e,16)};var C=h.f2=h.__private__.f2=function(e){if(isNaN(e))throw Error("Invalid argument passed to jsPDF.f2");return j(e,2)},N=h.__private__.f3=function(e){if(isNaN(e))throw Error("Invalid argument passed to jsPDF.f3");return j(e,3)},S=h.scale=h.__private__.scale=function(e){if(isNaN(e))throw Error("Invalid argument passed to jsPDF.scale");return b===x.COMPAT?e*eu:b===x.ADVANCED?e:void 0},F=function(e){return S(b===x.COMPAT?rn()-e:b===x.ADVANCED?e:void 0)};h.__private__.setPrecision=h.setPrecision=function(e){"number"==typeof parseInt(e,10)&&(t=parseInt(e,10))};var E,O="00000000000000000000000000000000",P=h.__private__.getFileId=function(){return O},I=h.__private__.setFileId=function(e){return O=void 0!==e&&/^[a-fA-F0-9]{32}$/.test(e)?e.toUpperCase():O.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),null!==c&&(tv=new sI(c.userPermissions,c.userPassword,c.ownerPassword,O)),O};h.setFileId=function(e){return I(e),this},h.getFileId=function(){return P()};var U=h.__private__.convertDateToPDFDate=function(e){var t=e.getTimezoneOffset(),r=[t<0?"+":"-",D(Math.floor(Math.abs(t/60))),"'",D(Math.abs(t%60)),"'"].join("");return["D:",e.getFullYear(),D(e.getMonth()+1),D(e.getDate()),D(e.getHours()),D(e.getMinutes()),D(e.getSeconds()),r].join("")},L=h.__private__.convertPDFDateToDate=function(e){return new Date(parseInt(e.substr(2,4),10),parseInt(e.substr(6,2),10)-1,parseInt(e.substr(8,2),10),parseInt(e.substr(10,2),10),parseInt(e.substr(12,2),10),parseInt(e.substr(14,2),10),0)},_=h.__private__.setCreationDate=function(e){var t;if(void 0===e&&(e=new Date),e instanceof Date)t=U(e);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(e))throw Error("Invalid argument passed to jsPDF.setCreationDate");t=e}return E=t},Q=h.__private__.getCreationDate=function(e){var t=E;return"jsDate"===e&&(t=L(E)),t};h.setCreationDate=function(e){return _(e),this},h.getCreationDate=function(e){return Q(e)};var T,D=h.__private__.padd2=function(e){return("0"+parseInt(e)).slice(-2)},M=h.__private__.padd2Hex=function(e){return("00"+(e=e.toString())).substr(e.length)},H=0,R=[],K=[],V=0,q=[],G=[],z=!1,W=K,$=function(){H=0,V=0,K=[],R=[],q=[],eD=e_(),eM=e_()};h.__private__.setCustomOutputDestination=function(e){z=!0,W=e};var X=function(e){z||(W=e)};h.__private__.resetCustomOutputDestination=function(){z=!1,W=K};var Y=h.__private__.out=function(e){return e=e.toString(),V+=e.length+1,W.push(e),W},J=h.__private__.write=function(e){return Y(1==arguments.length?e.toString():Array.prototype.join.call(arguments," "))},Z=h.__private__.getArrayBuffer=function(e){for(var t=e.length,r=new ArrayBuffer(t),n=new Uint8Array(r);t--;)n[t]=e.charCodeAt(t);return r},ee=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];h.__private__.getStandardFonts=function(){return ee};var et=e.fontSize||16;h.__private__.setFontSize=h.setFontSize=function(e){return et=b===x.ADVANCED?e/eu:e,this};var er,en=h.__private__.getFontSize=h.getFontSize=function(){return b===x.COMPAT?et:et*eu},ea=e.R2L||!1;h.__private__.setR2L=h.setR2L=function(e){return ea=e,this},h.__private__.getR2L=h.getR2L=function(){return ea};var eo,ei=h.__private__.setZoomMode=function(e){if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(e))er=e;else if(isNaN(e)){if(-1===[void 0,null,"fullwidth","fullheight","fullpage","original"].indexOf(e))throw Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+e+'" is not recognized.');er=e}else er=parseInt(e,10)};h.__private__.getZoomMode=function(){return er};var es,el=h.__private__.setPageMode=function(e){if(-1==[void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(e))throw Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+e+'" is not recognized.');eo=e};h.__private__.getPageMode=function(){return eo};var eA=h.__private__.setLayoutMode=function(e){if(-1==[void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(e))throw Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+e+'" is not recognized.');es=e};h.__private__.getLayoutMode=function(){return es},h.__private__.setDisplayMode=h.setDisplayMode=function(e,t,r){return ei(e),eA(t),el(r),this};var ec={title:"",subject:"",author:"",keywords:"",creator:""};h.__private__.getDocumentProperty=function(e){if(-1===Object.keys(ec).indexOf(e))throw Error("Invalid argument passed to jsPDF.getDocumentProperty");return ec[e]},h.__private__.getDocumentProperties=function(){return ec},h.__private__.setDocumentProperties=h.setProperties=h.setDocumentProperties=function(e){for(var t in ec)ec.hasOwnProperty(t)&&e[t]&&(ec[t]=e[t]);return this},h.__private__.setDocumentProperty=function(e,t){if(-1===Object.keys(ec).indexOf(e))throw Error("Invalid arguments passed to jsPDF.setDocumentProperty");return ec[e]=t};var ed,eu,eh,ef,ep,em={},eg={},ex=[],eb={},ey={},ev={},ew={},ek=null,eB=0,ej=[],eC=new sL(h),eN=e.hotfixes||[],eS={},eF={},eE=[],eO=function e(t,r,n,a,o,i){if(!(this instanceof e))return new e(t,r,n,a,o,i);isNaN(t)&&(t=1),isNaN(r)&&(r=0),isNaN(n)&&(n=0),isNaN(a)&&(a=1),isNaN(o)&&(o=0),isNaN(i)&&(i=0),this._matrix=[t,r,n,a,o,i]};Object.defineProperty(eO.prototype,"sx",{get:function(){return this._matrix[0]},set:function(e){this._matrix[0]=e}}),Object.defineProperty(eO.prototype,"shy",{get:function(){return this._matrix[1]},set:function(e){this._matrix[1]=e}}),Object.defineProperty(eO.prototype,"shx",{get:function(){return this._matrix[2]},set:function(e){this._matrix[2]=e}}),Object.defineProperty(eO.prototype,"sy",{get:function(){return this._matrix[3]},set:function(e){this._matrix[3]=e}}),Object.defineProperty(eO.prototype,"tx",{get:function(){return this._matrix[4]},set:function(e){this._matrix[4]=e}}),Object.defineProperty(eO.prototype,"ty",{get:function(){return this._matrix[5]},set:function(e){this._matrix[5]=e}}),Object.defineProperty(eO.prototype,"a",{get:function(){return this._matrix[0]},set:function(e){this._matrix[0]=e}}),Object.defineProperty(eO.prototype,"b",{get:function(){return this._matrix[1]},set:function(e){this._matrix[1]=e}}),Object.defineProperty(eO.prototype,"c",{get:function(){return this._matrix[2]},set:function(e){this._matrix[2]=e}}),Object.defineProperty(eO.prototype,"d",{get:function(){return this._matrix[3]},set:function(e){this._matrix[3]=e}}),Object.defineProperty(eO.prototype,"e",{get:function(){return this._matrix[4]},set:function(e){this._matrix[4]=e}}),Object.defineProperty(eO.prototype,"f",{get:function(){return this._matrix[5]},set:function(e){this._matrix[5]=e}}),Object.defineProperty(eO.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(eO.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(eO.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(eO.prototype,"isIdentity",{get:function(){return 1===this.sx&&0===this.shy&&0===this.shx&&1===this.sy&&0===this.tx&&0===this.ty}}),eO.prototype.join=function(e){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(k).join(e)},eO.prototype.multiply=function(e){return new eO(e.sx*this.sx+e.shy*this.shx,e.sx*this.shy+e.shy*this.sy,e.shx*this.sx+e.sy*this.shx,e.shx*this.shy+e.sy*this.sy,e.tx*this.sx+e.ty*this.shx+this.tx,e.tx*this.shy+e.ty*this.sy+this.ty)},eO.prototype.decompose=function(){var e=this.sx,t=this.shy,r=this.shx,n=this.sy,a=this.tx,o=this.ty,i=Math.sqrt(e*e+t*t),s=(e/=i)*r+(t/=i)*n,l=Math.sqrt((r-=e*s)*r+(n-=t*s)*n);return s/=l,e*(n/=l)<t*(r/=l)&&(e=-e,t=-t,s=-s,i=-i),{scale:new eO(i,0,0,l,0,0),translate:new eO(1,0,0,1,a,o),rotate:new eO(e,t,-t,e,0,0),skew:new eO(1,0,s,1,0,0)}},eO.prototype.toString=function(e){return this.join(" ")},eO.prototype.inversed=function(){var e=this.sx,t=this.shy,r=this.shx,n=this.sy,a=this.tx,o=this.ty,i=1/(e*n-t*r),s=n*i,l=-t*i,A=-r*i,c=e*i;return new eO(s,l,A,c,-s*a-A*o,-l*a-c*o)},eO.prototype.applyToPoint=function(e){return new t3(e.x*this.sx+e.y*this.shx+this.tx,e.x*this.shy+e.y*this.sy+this.ty)},eO.prototype.applyToRectangle=function(e){var t=this.applyToPoint(e),r=this.applyToPoint(new t3(e.x+e.w,e.y+e.h));return new t6(t.x,t.y,r.x-t.x,r.y-t.y)},eO.prototype.clone=function(){return new eO(this.sx,this.shy,this.shx,this.sy,this.tx,this.ty)},h.Matrix=eO;var eP=h.matrixMult=function(e,t){return t.multiply(e)},eI=new eO(1,0,0,1,0,0);h.unitMatrix=h.identityMatrix=eI;var eU=function(e,t){if(!ey[e]){var r=(t instanceof sT?"Sh":"P")+(Object.keys(eb).length+1).toString(10);t.id=r,ey[e]=r,eb[r]=t,eC.publish("addPattern",t)}};h.ShadingPattern=sT,h.TilingPattern=sD,h.addShadingPattern=function(e,t){return B("addShadingPattern()"),eU(e,t),this},h.beginTilingPattern=function(e){B("beginTilingPattern()"),t7(e.boundingBox[0],e.boundingBox[1],e.boundingBox[2]-e.boundingBox[0],e.boundingBox[3]-e.boundingBox[1],e.matrix)},h.endTilingPattern=function(e,t){B("endTilingPattern()"),t.stream=G[T].join("\n"),eU(e,t),eC.publish("endTilingPattern",t),eE.pop().restore()};var eL=h.__private__.newObject=function(){var e=e_();return eQ(e,!0),e},e_=h.__private__.newObjectDeferred=function(){return R[++H]=function(){return V},H},eQ=function(e,t){return t="boolean"==typeof t&&t,R[e]=V,t&&Y(e+" 0 obj"),e},eT=h.__private__.newAdditionalObject=function(){var e={objId:e_(),content:""};return q.push(e),e},eD=e_(),eM=e_(),eH=h.__private__.decodeColorString=function(e){var t=e.split(" ");if(2!==t.length||"g"!==t[1]&&"G"!==t[1])5===t.length&&("k"===t[4]||"K"===t[4])&&(t=[(1-t[0])*(1-t[3]),(1-t[1])*(1-t[3]),(1-t[2])*(1-t[3]),"r"]);else{var r=parseFloat(t[0]);t=[r,r,r,"r"]}for(var n="#",a=0;a<3;a++)n+=("0"+Math.floor(255*parseFloat(t[a])).toString(16)).slice(-2);return n},eR=h.__private__.encodeColorString=function(e){"string"==typeof e&&(e={ch1:e});var t,r=e.ch1,n=e.ch2,a=e.ch3,o=e.ch4,i="draw"===e.pdfColorType?["G","RG","K"]:["g","rg","k"];if("string"==typeof r&&"#"!==r.charAt(0)){var s=new sx(r);if(s.ok)r=s.toHex();else if(!/^\d*\.?\d*$/.test(r))throw Error('Invalid color "'+r+'" passed to jsPDF.encodeColorString.')}if("string"==typeof r&&/^#[0-9A-Fa-f]{3}$/.test(r)&&(r="#"+r[1]+r[1]+r[2]+r[2]+r[3]+r[3]),"string"==typeof r&&/^#[0-9A-Fa-f]{6}$/.test(r)){var l=parseInt(r.substr(1),16);r=l>>16&255,n=l>>8&255,a=255&l}if(void 0===n||void 0===o&&r===n&&n===a)t="string"==typeof r?r+" "+i[0]:2===e.precision?C(r/255)+" "+i[0]:N(r/255)+" "+i[0];else if(void 0===o||"object"===id()(o)){if(o&&!isNaN(o.a)&&0===o.a)return["1.","1.","1.",i[1]].join(" ");t="string"==typeof r?[r,n,a,i[1]].join(" "):2===e.precision?[C(r/255),C(n/255),C(a/255),i[1]].join(" "):[N(r/255),N(n/255),N(a/255),i[1]].join(" ")}else t="string"==typeof r?[r,n,a,o,i[2]].join(" "):2===e.precision?[C(r),C(n),C(a),C(o),i[2]].join(" "):[N(r),N(n),N(a),N(o),i[2]].join(" ");return t},eK=h.__private__.getFilters=function(){return i},eV=h.__private__.putStream=function(e){var t=(e=e||{}).data||"",r=e.filters||eK(),n=e.alreadyAppliedFilters||[],a=e.addLength1||!1,o=t.length,i=e.objectId,s=function(e){return e};if(null!==c&&void 0===i)throw Error("ObjectId must be passed to putStream for file encryption");null!==c&&(s=tv.encryptor(i,0));var l={};!0===r&&(r=["FlateEncode"]);var A=e.additionalKeyValues||[],d=(l=void 0!==sM.API.processDataByFilters?sM.API.processDataByFilters(t,r):{data:t,reverseChain:[]}).reverseChain+(Array.isArray(n)?n.join(" "):n.toString());if(0!==l.data.length&&(A.push({key:"Length",value:l.data.length}),!0===a&&A.push({key:"Length1",value:o})),0!=d.length){if(d.split("/").length-1==1)A.push({key:"Filter",value:d});else{A.push({key:"Filter",value:"["+d+"]"});for(var u=0;u<A.length;u+=1)if("DecodeParms"===A[u].key){for(var h=[],f=0;f<l.reverseChain.split("/").length-1;f+=1)h.push("null");h.push(A[u].value),A[u].value="["+h.join(" ")+"]"}}}Y("<<");for(var p=0;p<A.length;p++)Y("/"+A[p].key+" "+A[p].value);Y(">>"),0!==l.data.length&&(Y("stream"),Y(s(l.data)),Y("endstream"))},eq=h.__private__.putPage=function(e){var t=e.number,r=e.data,n=e.objId,a=e.contentsObjId;eQ(n,!0),Y("<</Type /Page"),Y("/Parent "+e.rootDictionaryObjId+" 0 R"),Y("/Resources "+e.resourceDictionaryObjId+" 0 R"),Y("/MediaBox ["+parseFloat(k(e.mediaBox.bottomLeftX))+" "+parseFloat(k(e.mediaBox.bottomLeftY))+" "+k(e.mediaBox.topRightX)+" "+k(e.mediaBox.topRightY)+"]"),null!==e.cropBox&&Y("/CropBox ["+k(e.cropBox.bottomLeftX)+" "+k(e.cropBox.bottomLeftY)+" "+k(e.cropBox.topRightX)+" "+k(e.cropBox.topRightY)+"]"),null!==e.bleedBox&&Y("/BleedBox ["+k(e.bleedBox.bottomLeftX)+" "+k(e.bleedBox.bottomLeftY)+" "+k(e.bleedBox.topRightX)+" "+k(e.bleedBox.topRightY)+"]"),null!==e.trimBox&&Y("/TrimBox ["+k(e.trimBox.bottomLeftX)+" "+k(e.trimBox.bottomLeftY)+" "+k(e.trimBox.topRightX)+" "+k(e.trimBox.topRightY)+"]"),null!==e.artBox&&Y("/ArtBox ["+k(e.artBox.bottomLeftX)+" "+k(e.artBox.bottomLeftY)+" "+k(e.artBox.topRightX)+" "+k(e.artBox.topRightY)+"]"),"number"==typeof e.userUnit&&1!==e.userUnit&&Y("/UserUnit "+e.userUnit),eC.publish("putPage",{objId:n,pageContext:ej[t],pageNumber:t,page:r}),Y("/Contents "+a+" 0 R"),Y(">>"),Y("endobj");var o=r.join("\n");return b===x.ADVANCED&&(o+="\nQ"),eQ(a,!0),eV({data:o,filters:eK(),objectId:a}),Y("endobj"),n},eG=h.__private__.putPages=function(){var e,t,r=[];for(e=1;e<=eB;e++)ej[e].objId=e_(),ej[e].contentsObjId=e_();for(e=1;e<=eB;e++)r.push(eq({number:e,data:G[e],objId:ej[e].objId,contentsObjId:ej[e].contentsObjId,mediaBox:ej[e].mediaBox,cropBox:ej[e].cropBox,bleedBox:ej[e].bleedBox,trimBox:ej[e].trimBox,artBox:ej[e].artBox,userUnit:ej[e].userUnit,rootDictionaryObjId:eD,resourceDictionaryObjId:eM}));eQ(eD,!0),Y("<</Type /Pages");var n="/Kids [";for(t=0;t<eB;t++)n+=r[t]+" 0 R ";Y(n+"]"),Y("/Count "+eB),Y(">>"),Y("endobj"),eC.publish("postPutPages")},ez=function(e){eC.publish("putFont",{font:e,out:Y,newObject:eL,putStream:eV}),!0!==e.isAlreadyPutted&&(e.objectNumber=eL(),Y("<<"),Y("/Type /Font"),Y("/BaseFont /"+sU(e.postScriptName)),Y("/Subtype /Type1"),"string"==typeof e.encoding&&Y("/Encoding /"+e.encoding),Y("/FirstChar 32"),Y("/LastChar 255"),Y(">>"),Y("endobj"))},eW=function(){for(var e in em)em.hasOwnProperty(e)&&(!1===d||!0===d&&u.hasOwnProperty(e))&&ez(em[e])},e$=function(e){e.objectNumber=eL();var t=[];t.push({key:"Type",value:"/XObject"}),t.push({key:"Subtype",value:"/Form"}),t.push({key:"BBox",value:"["+[k(e.x),k(e.y),k(e.x+e.width),k(e.y+e.height)].join(" ")+"]"}),t.push({key:"Matrix",value:"["+e.matrix.toString()+"]"}),eV({data:e.pages[1].join("\n"),additionalKeyValues:t,objectId:e.objectNumber}),Y("endobj")},eX=function(){for(var e in eS)eS.hasOwnProperty(e)&&e$(eS[e])},eY=function(e,t){var r,n=[],a=1/(t-1);for(r=0;r<1;r+=a)n.push(r);if(n.push(1),0!=e[0].offset){var o={offset:0,color:e[0].color};e.unshift(o)}if(1!=e[e.length-1].offset){var i={offset:1,color:e[e.length-1].color};e.push(i)}for(var s="",l=0,A=0;A<n.length;A++){for(r=n[A];r>e[l+1].offset;)l++;var c=e[l].offset,d=(r-c)/(e[l+1].offset-c),u=e[l].color,h=e[l+1].color;s+=M(Math.round((1-d)*u[0]+d*h[0]).toString(16))+M(Math.round((1-d)*u[1]+d*h[1]).toString(16))+M(Math.round((1-d)*u[2]+d*h[2]).toString(16))}return s.trim()},eJ=function(e,t){t||(t=21);var r=eL(),n=eY(e.colors,t),a=[];a.push({key:"FunctionType",value:"0"}),a.push({key:"Domain",value:"[0.0 1.0]"}),a.push({key:"Size",value:"["+t+"]"}),a.push({key:"BitsPerSample",value:"8"}),a.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),a.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),eV({data:n,additionalKeyValues:a,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:r}),Y("endobj"),e.objectNumber=eL(),Y("<< /ShadingType "+e.type),Y("/ColorSpace /DeviceRGB");var o="/Coords ["+k(parseFloat(e.coords[0]))+" "+k(parseFloat(e.coords[1]))+" ";2===e.type?o+=k(parseFloat(e.coords[2]))+" "+k(parseFloat(e.coords[3])):o+=k(parseFloat(e.coords[2]))+" "+k(parseFloat(e.coords[3]))+" "+k(parseFloat(e.coords[4]))+" "+k(parseFloat(e.coords[5])),Y(o+="]"),e.matrix&&Y("/Matrix ["+e.matrix.toString()+"]"),Y("/Function "+r+" 0 R"),Y("/Extend [true true]"),Y(">>"),Y("endobj")},eZ=function(e,t){var r=e_(),n=eL();t.push({resourcesOid:r,objectOid:n}),e.objectNumber=n;var a=[];a.push({key:"Type",value:"/Pattern"}),a.push({key:"PatternType",value:"1"}),a.push({key:"PaintType",value:"1"}),a.push({key:"TilingType",value:"1"}),a.push({key:"BBox",value:"["+e.boundingBox.map(k).join(" ")+"]"}),a.push({key:"XStep",value:k(e.xStep)}),a.push({key:"YStep",value:k(e.yStep)}),a.push({key:"Resources",value:r+" 0 R"}),e.matrix&&a.push({key:"Matrix",value:"["+e.matrix.toString()+"]"}),eV({data:e.stream,additionalKeyValues:a,objectId:e.objectNumber}),Y("endobj")},e0=function(e){var t;for(t in eb)eb.hasOwnProperty(t)&&(eb[t]instanceof sT?eJ(eb[t]):eb[t]instanceof sD&&eZ(eb[t],e))},e1=function(e){for(var t in e.objectNumber=eL(),Y("<<"),e)switch(t){case"opacity":Y("/ca "+C(e[t]));break;case"stroke-opacity":Y("/CA "+C(e[t]))}Y(">>"),Y("endobj")},e2=function(){var e;for(e in ev)ev.hasOwnProperty(e)&&e1(ev[e])},e5=function(){for(var e in Y("/XObject <<"),eS)eS.hasOwnProperty(e)&&eS[e].objectNumber>=0&&Y("/"+e+" "+eS[e].objectNumber+" 0 R");eC.publish("putXobjectDict"),Y(">>")},e4=function(){tv.oid=eL(),Y("<<"),Y("/Filter /Standard"),Y("/V "+tv.v),Y("/R "+tv.r),Y("/U <"+tv.toHexString(tv.U)+">"),Y("/O <"+tv.toHexString(tv.O)+">"),Y("/P "+tv.P),Y(">>"),Y("endobj")},e3=function(){for(var e in Y("/Font <<"),em)em.hasOwnProperty(e)&&(!1===d||!0===d&&u.hasOwnProperty(e))&&Y("/"+e+" "+em[e].objectNumber+" 0 R");Y(">>")},e6=function(){if(Object.keys(eb).length>0){for(var e in Y("/Shading <<"),eb)eb.hasOwnProperty(e)&&eb[e]instanceof sT&&eb[e].objectNumber>=0&&Y("/"+e+" "+eb[e].objectNumber+" 0 R");eC.publish("putShadingPatternDict"),Y(">>")}},e8=function(e){if(Object.keys(eb).length>0){for(var t in Y("/Pattern <<"),eb)eb.hasOwnProperty(t)&&eb[t]instanceof h.TilingPattern&&eb[t].objectNumber>=0&&eb[t].objectNumber<e&&Y("/"+t+" "+eb[t].objectNumber+" 0 R");eC.publish("putTilingPatternDict"),Y(">>")}},e7=function(){if(Object.keys(ev).length>0){var e;for(e in Y("/ExtGState <<"),ev)ev.hasOwnProperty(e)&&ev[e].objectNumber>=0&&Y("/"+e+" "+ev[e].objectNumber+" 0 R");eC.publish("putGStateDict"),Y(">>")}},e9=function(e){eQ(e.resourcesOid,!0),Y("<<"),Y("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),e3(),e6(),e8(e.objectOid),e7(),e5(),Y(">>"),Y("endobj")},te=function(){var e=[];eW(),e2(),eX(),e0(e),eC.publish("putResources"),e.forEach(e9),e9({resourcesOid:eM,objectOid:Number.MAX_SAFE_INTEGER}),eC.publish("postPutResources")},tt=function(){eC.publish("putAdditionalObjects");for(var e=0;e<q.length;e++){var t=q[e];eQ(t.objId,!0),Y(t.content),Y("endobj")}eC.publish("postPutAdditionalObjects")},tr=function(e){eg[e.fontName]=eg[e.fontName]||{},eg[e.fontName][e.fontStyle]=e.id},tn=function(e,t,r,n,a){var o={id:"F"+(Object.keys(em).length+1).toString(10),postScriptName:e,fontName:t,fontStyle:r,encoding:n,isStandardFont:a||!1,metadata:{}};return eC.publish("addFont",{font:o,instance:this}),em[o.id]=o,tr(o),o.id},ta=function(e,t){var r,n,a,o,i,s,l,A,c;if(a=(t=t||{}).sourceEncoding||"Unicode",i=t.outputEncoding,(t.autoencode||i)&&em[ed].metadata&&em[ed].metadata[a]&&em[ed].metadata[a].encoding&&(o=em[ed].metadata[a].encoding,!i&&em[ed].encoding&&(i=em[ed].encoding),!i&&o.codePages&&(i=o.codePages[0]),"string"==typeof i&&(i=o[i]),i)){for(l=!1,s=[],r=0,n=e.length;r<n;r++)(A=i[e.charCodeAt(r)])?s.push(String.fromCharCode(A)):s.push(e[r]),s[r].charCodeAt(0)>>8&&(l=!0);e=s.join("")}for(r=e.length;void 0===l&&0!==r;)e.charCodeAt(r-1)>>8&&(l=!0),r--;if(!l)return e;for(s=t.noBOM?[]:[254,255],r=0,n=e.length;r<n;r++){if((c=(A=e.charCodeAt(r))>>8)>>8)throw Error("Character at position "+r+" of string '"+e+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");s.push(c),s.push(A-(c<<8))}return String.fromCharCode.apply(void 0,s)},to=h.__private__.pdfEscape=h.pdfEscape=function(e,t){return ta(e,t).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},ti=h.__private__.beginPage=function(e){G[++eB]=[],ej[eB]={objId:0,contentsObjId:0,userUnit:Number(s),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(e[0]),topRightY:Number(e[1])}},tA(eB),X(G[T])},ts=function(e,t){var n,o,i;switch(r=t||r,"string"==typeof e&&Array.isArray(n=g(e.toLowerCase()))&&(o=n[0],i=n[1]),Array.isArray(e)&&(o=e[0]*eu,i=e[1]*eu),isNaN(o)&&(o=a[0],i=a[1]),(o>14400||i>14400)&&(sc.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),o=Math.min(14400,o),i=Math.min(14400,i)),a=[o,i],r.substr(0,1)){case"l":i>o&&(a=[i,o]);break;case"p":o>i&&(a=[i,o])}ti(a),tR(tM),Y(tX),0!==t2&&Y(t2+" J"),0!==t5&&Y(t5+" j"),eC.publish("addPage",{pageNumber:eB})},tl=function(e){e>0&&e<=eB&&(G.splice(e,1),ej.splice(e,1),eB--,T>eB&&(T=eB),this.setPage(T))},tA=function(e){e>0&&e<=eB&&(T=e)},tc=h.__private__.getNumberOfPages=h.getNumberOfPages=function(){return G.length-1},td=function(e,t,r){var n,a=void 0;return r=r||{},e=void 0!==e?e:em[ed].fontName,t=void 0!==t?t:em[ed].fontStyle,void 0!==eg[n=e.toLowerCase()]&&void 0!==eg[n][t]?a=eg[n][t]:void 0!==eg[e]&&void 0!==eg[e][t]?a=eg[e][t]:!1===r.disableWarning&&sc.warn("Unable to look up font label for font '"+e+"', '"+t+"'. Refer to getFontList() for available fonts."),a||r.noFallback||null==(a=eg.times[t])&&(a=eg.times.normal),a},tu=h.__private__.putInfo=function(){var e=eL(),t=function(e){return e};for(var r in null!==c&&(t=tv.encryptor(e,0)),Y("<<"),Y("/Producer ("+to(t("jsPDF "+sM.version))+")"),ec)ec.hasOwnProperty(r)&&ec[r]&&Y("/"+r.substr(0,1).toUpperCase()+r.substr(1)+" ("+to(t(ec[r]))+")");Y("/CreationDate ("+to(t(E))+")"),Y(">>"),Y("endobj")},th=h.__private__.putCatalog=function(e){var t=(e=e||{}).rootDictionaryObjId||eD;switch(eL(),Y("<<"),Y("/Type /Catalog"),Y("/Pages "+t+" 0 R"),er||(er="fullwidth"),er){case"fullwidth":Y("/OpenAction [3 0 R /FitH null]");break;case"fullheight":Y("/OpenAction [3 0 R /FitV null]");break;case"fullpage":Y("/OpenAction [3 0 R /Fit]");break;case"original":Y("/OpenAction [3 0 R /XYZ null null 1]");break;default:var r=""+er;"%"===r.substr(r.length-1)&&(er=parseInt(er)/100),"number"==typeof er&&Y("/OpenAction [3 0 R /XYZ null null "+C(er)+"]")}switch(es||(es="continuous"),es){case"continuous":Y("/PageLayout /OneColumn");break;case"single":Y("/PageLayout /SinglePage");break;case"two":case"twoleft":Y("/PageLayout /TwoColumnLeft");break;case"tworight":Y("/PageLayout /TwoColumnRight")}eo&&Y("/PageMode /"+eo),eC.publish("putCatalog"),Y(">>"),Y("endobj")},tf=h.__private__.putTrailer=function(){Y("trailer"),Y("<<"),Y("/Size "+(H+1)),Y("/Root "+H+" 0 R"),Y("/Info "+(H-1)+" 0 R"),null!==c&&Y("/Encrypt "+tv.oid+" 0 R"),Y("/ID [ <"+O+"> <"+O+"> ]"),Y(">>")},tp=h.__private__.putHeader=function(){Y("%PDF-"+f),Y("%\xba\xdf\xac\xe0")},tm=h.__private__.putXRef=function(){var e="0000000000";Y("xref"),Y("0 "+(H+1)),Y("0000000000 65535 f ");for(var t=1;t<=H;t++)"function"==typeof R[t]?Y((e+R[t]()).slice(-10)+" 00000 n "):void 0!==R[t]?Y((e+R[t]).slice(-10)+" 00000 n "):Y("0000000000 00000 n ")},tg=h.__private__.buildDocument=function(){$(),X(K),eC.publish("buildDocument"),tp(),eG(),tt(),te(),null!==c&&e4(),tu(),th();var e=V;return tm(),tf(),Y("startxref"),Y(""+e),Y("%%EOF"),X(G[T]),K.join("\n")},tx=h.__private__.getBlob=function(e){return new Blob([Z(e)],{type:"application/pdf"})},tb=h.output=h.__private__.output=((tT=function(e,t){switch("string"==typeof(t=t||{})?t={filename:t}:t.filename=t.filename||"generated.pdf",e){case void 0:return tg();case"save":h.save(t.filename);break;case"arraybuffer":return Z(tg());case"blob":return tx(tg());case"bloburi":case"bloburl":if(void 0!==sl.URL&&"function"==typeof sl.URL.createObjectURL)return sl.URL&&sl.URL.createObjectURL(tx(tg()))||void 0;sc.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var r="",n=tg();try{r=sm(n)}catch(e){r=sm(unescape(encodeURIComponent(n)))}return"data:application/pdf;filename="+t.filename+";base64,"+r;case"pdfobjectnewwindow":if("[object Window]"===Object.prototype.toString.call(sl)){var a="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",o=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';t.pdfObjectUrl&&(a=t.pdfObjectUrl,o="");var i='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+a+'"'+o+'></script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(t)+");</script></body></html>",s=sl.open();return null!==s&&s.document.write(i),s}throw Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if("[object Window]"===Object.prototype.toString.call(sl)){var l='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(t.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+t.filename+'" width="500px" height="400px" /></body></html>',A=sl.open();if(null!==A){A.document.write(l);var c=this;A.document.documentElement.querySelector("#pdfViewer").onload=function(){A.document.title=t.filename,A.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(c.output("bloburl"))}}return A}throw Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if("[object Window]"!==Object.prototype.toString.call(sl))throw Error("The option dataurlnewwindow just works in a browser-environment.");var d='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",t)+'"></iframe></body></html>',u=sl.open();if(null!==u&&(u.document.write(d),u.document.title=t.filename),u||"undefined"==typeof safari)return u;break;case"datauri":case"dataurl":return sl.document.location.href=this.output("datauristring",t);default:return null}}).foo=function(){try{return tT.apply(this,arguments)}catch(r){var e=r.stack||"";~e.indexOf(" at ")&&(e=e.split(" at ")[1]);var t="Error in function "+e.split("\n")[0].split("<")[0]+": "+r.message;if(!sl.console)throw Error(t);sl.console.error(t,r),sl.alert&&alert(t)}},tT.foo.bar=tT,tT.foo),ty=function(e){return!0===Array.isArray(eN)&&eN.indexOf(e)>-1};switch(n){case"pt":eu=1;break;case"mm":eu=72/25.4;break;case"cm":eu=72/2.54;break;case"in":eu=72;break;case"px":eu=1==ty("px_scaling")?.75:96/72;break;case"pc":case"em":eu=12;break;case"ex":eu=6;break;default:if("number"!=typeof n)throw Error("Invalid unit: "+n);eu=n}var tv=null;_(),I();var tw=h.__private__.getPageInfo=h.getPageInfo=function(e){if(isNaN(e)||e%1!=0)throw Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:ej[e].objId,pageNumber:e,pageContext:ej[e]}},tk=h.__private__.getPageInfoByObjId=function(e){if(isNaN(e)||e%1!=0)throw Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var t in ej)if(ej[t].objId===e)break;return tw(t)},tB=h.__private__.getCurrentPageInfo=h.getCurrentPageInfo=function(){return{objId:ej[T].objId,pageNumber:T,pageContext:ej[T]}};h.addPage=function(){return ts.apply(this,arguments),this},h.setPage=function(){return tA.apply(this,arguments),X.call(this,G[T]),this},h.insertPage=function(e){return this.addPage(),this.movePage(T,e),this},h.movePage=function(e,t){var r,n;if(e>t){r=G[e],n=ej[e];for(var a=e;a>t;a--)G[a]=G[a-1],ej[a]=ej[a-1];G[t]=r,ej[t]=n,this.setPage(t)}else if(e<t){r=G[e],n=ej[e];for(var o=e;o<t;o++)G[o]=G[o+1],ej[o]=ej[o+1];G[t]=r,ej[t]=n,this.setPage(t)}return this},h.deletePage=function(){return tl.apply(this,arguments),this},h.__private__.text=h.text=function(e,t,r,n,a){var o,i,s,l,A,c,d,h,f,p=(n=n||{}).scope||this;if("number"==typeof e&&"number"==typeof t&&("string"==typeof r||Array.isArray(r))){var m=r;r=t,t=e,e=m}if(arguments[3]instanceof eO==!1?(s=arguments[4],l=arguments[5],"object"===id()(d=arguments[3])&&null!==d||("string"==typeof s&&(l=s,s=null),"string"==typeof d&&(l=d,d=null),"number"==typeof d&&(s=d,d=null),n={flags:d,angle:s,align:l})):(B("The transform parameter of text() with a Matrix value"),f=a),isNaN(t)||isNaN(r)||null==e)throw Error("Invalid arguments passed to jsPDF.text");if(0===e.length)return p;var g="",y=!1,v="number"==typeof n.lineHeightFactor?n.lineHeightFactor:tD,w=p.internal.scaleFactor;function j(e){for(var t,r=e.concat(),n=[],a=r.length;a--;)"string"==typeof(t=r.shift())?n.push(t):Array.isArray(e)&&(1===t.length||void 0===t[1]&&void 0===t[2])?n.push(t[0]):n.push([t[0],t[1],t[2]]);return n}function C(e,t){var r;if("string"==typeof e)r=t(e)[0];else if(Array.isArray(e)){for(var n,a,o=e.concat(),i=[],s=o.length;s--;)"string"==typeof(n=o.shift())?i.push(t(n)[0]):Array.isArray(n)&&"string"==typeof n[0]&&i.push([(a=t(n[0],n[1],n[2]))[0],a[1],a[2]]);r=i}return r}var N=!1,F=!0;if("string"==typeof e)N=!0;else if(Array.isArray(e)){var E=e.concat();i=[];for(var O,P=E.length;P--;)("string"!=typeof(O=E.shift())||Array.isArray(O)&&"string"!=typeof O[0])&&(F=!1);N=F}if(!1===N)throw Error('Type of text must be string or Array. "'+e+'" is not recognized.');"string"==typeof e&&(e=e.match(/[\r?\n]/)?e.split(/\r\n|\r|\n/g):[e]);var I=et/p.internal.scaleFactor,U=I*(v-1);switch(n.baseline){case"bottom":r-=U;break;case"top":r+=I-U;break;case"hanging":r+=I-2*U;break;case"middle":r+=I/2-U}if((c=n.maxWidth||0)>0&&("string"==typeof e?e=p.splitTextToSize(e,c):"[object Array]"===Object.prototype.toString.call(e)&&(e=e.reduce(function(e,t){return e.concat(p.splitTextToSize(t,c))},[]))),o={text:e,x:t,y:r,options:n,mutex:{pdfEscape:to,activeFontKey:ed,fonts:em,activeFontSize:et}},eC.publish("preProcessText",o),e=o.text,s=(n=o.options).angle,f instanceof eO==!1&&s&&"number"==typeof s){s*=Math.PI/180,0===n.rotationDirection&&(s=-s),b===x.ADVANCED&&(s=-s);var L=Math.cos(s),_=Math.sin(s);f=new eO(L,_,-_,L,0,0)}else s&&s instanceof eO&&(f=s);b!==x.ADVANCED||f||(f=eI),void 0!==(A=n.charSpace||t0)&&(g+=k(S(A))+" Tc\n",this.setCharSpace(this.getCharSpace()||0)),void 0!==(h=n.horizontalScale)&&(g+=k(100*h)+" Tz\n"),n.lang;var Q=-1,T=void 0!==n.renderingMode?n.renderingMode:n.stroke,D=p.internal.getCurrentPageInfo().pageContext;switch(T){case 0:case!1:case"fill":Q=0;break;case 1:case!0:case"stroke":Q=1;break;case 2:case"fillThenStroke":Q=2;break;case 3:case"invisible":Q=3;break;case 4:case"fillAndAddForClipping":Q=4;break;case 5:case"strokeAndAddPathForClipping":Q=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":Q=6;break;case 7:case"addToPathForClipping":Q=7}var M=void 0!==D.usedRenderingMode?D.usedRenderingMode:-1;-1!==Q?g+=Q+" Tr\n":-1!==M&&(g+="0 Tr\n"),-1!==Q&&(D.usedRenderingMode=Q),l=n.align||"left";var H,R=et*v,K=p.internal.pageSize.getWidth(),V=em[ed];A=n.charSpace||t0,c=n.maxWidth||0,d=Object.assign({autoencode:!0,noBOM:!0},n.flags);var q=[],G=function(e){return p.getStringUnitWidth(e,{font:V,charSpace:A,fontSize:et,doKerning:!1})*et/w};if("[object Array]"===Object.prototype.toString.call(e)){i=j(e),"left"!==l&&(H=i.map(G));var z,W,$=0;if("right"===l){t-=H[0],e=[],P=i.length;for(var X=0;X<P;X++)0===X?(W=tG(t),z=tz(r)):(W=S($-H[X]),z=-R),e.push([i[X],W,z]),$=H[X]}else if("center"===l){t-=H[0]/2,e=[],P=i.length;for(var J=0;J<P;J++)0===J?(W=tG(t),z=tz(r)):(W=S(($-H[J])/2),z=-R),e.push([i[J],W,z]),$=H[J]}else if("left"===l){e=[],P=i.length;for(var Z=0;Z<P;Z++)e.push(i[Z])}else if("justify"===l&&"Identity-H"===V.encoding){e=[],P=i.length,c=0!==c?c:K;for(var ee=0,er=0;er<P;er++)if(z=0===er?tz(r):-R,W=0===er?tG(t):ee,er<P-1){var en=S((c-H[er])/(i[er].split(" ").length-1)),eo=i[er].split(" ");e.push([eo[0]+" ",W,z]),ee=0;for(var ei=1;ei<eo.length;ei++){var es=(G(eo[ei-1]+" "+eo[ei])-G(eo[ei]))*w+en;ei==eo.length-1?e.push([eo[ei],es,0]):e.push([eo[ei]+" ",es,0]),ee-=es}}else e.push([i[er],W,z]);e.push(["",ee,0])}else{if("justify"!==l)throw Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(e=[],P=i.length,c=0!==c?c:K,er=0;er<P;er++)z=0===er?tz(r):-R,W=0===er?tG(t):0,er<P-1?q.push(k(S((c-H[er])/(i[er].split(" ").length-1)))):q.push(0),e.push([i[er],W,z])}}!0===("boolean"==typeof n.R2L?n.R2L:ea)&&(e=C(e,function(e,t,r){return[e.split("").reverse().join(""),t,r]})),o={text:e,x:t,y:r,options:n,mutex:{pdfEscape:to,activeFontKey:ed,fonts:em,activeFontSize:et}},eC.publish("postProcessText",o),e=o.text,y=o.mutex.isHex||!1;var el=em[ed].encoding;"WinAnsiEncoding"!==el&&"StandardEncoding"!==el||(e=C(e,function(e,t,r){return[to(e.split("	").join(Array(n.TabLen||9).join(" ")),d),t,r]})),i=j(e),e=[];for(var eA,ec,eu,eh=Array.isArray(i[0])?1:0,ef="",ep=function(e,t,r){var a="";return r instanceof eO?(r="number"==typeof n.angle?eP(r,new eO(1,0,0,1,e,t)):eP(new eO(1,0,0,1,e,t),r),b===x.ADVANCED&&(r=eP(new eO(1,0,0,-1,0,0),r)),a=r.join(" ")+" Tm\n"):a=k(e)+" "+k(t)+" Td\n",a},eg=0;eg<i.length;eg++){switch(ef="",eh){case 1:eu=(y?"<":"(")+i[eg][0]+(y?">":")"),eA=parseFloat(i[eg][1]),ec=parseFloat(i[eg][2]);break;case 0:eu=(y?"<":"(")+i[eg]+(y?">":")"),eA=tG(t),ec=tz(r)}void 0!==q&&void 0!==q[eg]&&(ef=q[eg]+" Tw\n"),0===eg?e.push(ef+ep(eA,ec,f)+eu):0===eh?e.push(ef+eu):1===eh&&e.push(ef+ep(eA,ec,f)+eu)}e=(0===eh?e.join(" Tj\nT* "):e.join(" Tj\n"))+" Tj\n";var ex="BT\n/";return Y(ex+=ed+" "+et+" Tf\n"+k(et*v)+" TL\n"+tJ+"\n"+g+e+"ET"),u[ed]=!0,p};var tj=h.__private__.clip=h.clip=function(e){return Y("evenodd"===e?"W*":"W"),this};h.clipEvenOdd=function(){return tj("evenodd")},h.__private__.discardPath=h.discardPath=function(){return Y("n"),this};var tC=h.__private__.isValidStyle=function(e){var t=!1;return -1!==[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(e)&&(t=!0),t};h.__private__.setDefaultPathOperation=h.setDefaultPathOperation=function(e){return tC(e)&&(A=e),this};var tN=h.__private__.getStyle=h.getStyle=function(e){var t=A;switch(e){case"D":case"S":t="S";break;case"F":t="f";break;case"FD":case"DF":t="B";break;case"f":case"f*":case"B":case"B*":t=e}return t},tS=h.close=function(){return Y("h"),this};h.stroke=function(){return Y("S"),this},h.fill=function(e){return tF("f",e),this},h.fillEvenOdd=function(e){return tF("f*",e),this},h.fillStroke=function(e){return tF("B",e),this},h.fillStrokeEvenOdd=function(e){return tF("B*",e),this};var tF=function(e,t){"object"===id()(t)?tP(t,e):Y(e)},tE=function(e){null===e||b===x.ADVANCED&&void 0===e||Y(e=tN(e))};function tO(e,t,r,n,a){var o=new sD(t||this.boundingBox,r||this.xStep,n||this.yStep,this.gState,a||this.matrix);return o.stream=this.stream,eU(e+"$$"+this.cloneIndex+++"$$",o),o}var tP=function(e,t){var r=ey[e.key],n=eb[r];if(n instanceof sT)Y("q"),Y(tI(t)),n.gState&&h.setGState(n.gState),Y(e.matrix.toString()+" cm"),Y("/"+r+" sh"),Y("Q");else if(n instanceof sD){var a=new eO(1,0,0,-1,0,rn());e.matrix&&(a=a.multiply(e.matrix||eI),r=tO.call(n,e.key,e.boundingBox,e.xStep,e.yStep,a).id),Y("q"),Y("/Pattern cs"),Y("/"+r+" scn"),n.gState&&h.setGState(n.gState),Y(t),Y("Q")}},tI=function(e){switch(e){case"f":case"F":case"n":return"W n";case"f*":return"W* n";case"B":case"S":return"W S";case"B*":return"W* S"}},tU=h.moveTo=function(e,t){return Y(k(S(e))+" "+k(F(t))+" m"),this},tL=h.lineTo=function(e,t){return Y(k(S(e))+" "+k(F(t))+" l"),this},t_=h.curveTo=function(e,t,r,n,a,o){return Y([k(S(e)),k(F(t)),k(S(r)),k(F(n)),k(S(a)),k(F(o)),"c"].join(" ")),this};h.__private__.line=h.line=function(e,t,r,n,a){if(isNaN(e)||isNaN(t)||isNaN(r)||isNaN(n)||!tC(a))throw Error("Invalid arguments passed to jsPDF.line");return b===x.COMPAT?this.lines([[r-e,n-t]],e,t,[1,1],a||"S"):this.lines([[r-e,n-t]],e,t,[1,1]).stroke()},h.__private__.lines=h.lines=function(e,t,r,n,a,o){var i,s,l,A,c,d,u,h,f,p,m;if("number"==typeof e&&(m=r,r=t,t=e,e=m),n=n||[1,1],o=o||!1,isNaN(t)||isNaN(r)||!Array.isArray(e)||!Array.isArray(n)||!tC(a)||"boolean"!=typeof o)throw Error("Invalid arguments passed to jsPDF.lines");for(tU(t,r),i=n[0],s=n[1],A=e.length,f=t,p=r,l=0;l<A;l++)2===(c=e[l]).length?tL(f=c[0]*i+f,p=c[1]*s+p):(d=c[0]*i+f,u=c[1]*s+p,h=c[2]*i+f,t_(d,u,h,c[3]*s+p,f=c[4]*i+f,p=c[5]*s+p));return o&&tS(),tE(a),this},h.path=function(e){for(var t=0;t<e.length;t++){var r=e[t],n=r.c;switch(r.op){case"m":tU(n[0],n[1]);break;case"l":tL(n[0],n[1]);break;case"c":t_.apply(this,n);break;case"h":tS()}}return this},h.__private__.rect=h.rect=function(e,t,r,n,a){if(isNaN(e)||isNaN(t)||isNaN(r)||isNaN(n)||!tC(a))throw Error("Invalid arguments passed to jsPDF.rect");return b===x.COMPAT&&(n=-n),Y([k(S(e)),k(F(t)),k(S(r)),k(S(n)),"re"].join(" ")),tE(a),this},h.__private__.triangle=h.triangle=function(e,t,r,n,a,o,i){if(isNaN(e)||isNaN(t)||isNaN(r)||isNaN(n)||isNaN(a)||isNaN(o)||!tC(i))throw Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[r-e,n-t],[a-r,o-n],[e-a,t-o]],e,t,[1,1],i,!0),this},h.__private__.roundedRect=h.roundedRect=function(e,t,r,n,a,o,i){if(isNaN(e)||isNaN(t)||isNaN(r)||isNaN(n)||isNaN(a)||isNaN(o)||!tC(i))throw Error("Invalid arguments passed to jsPDF.roundedRect");var s=4/3*(Math.SQRT2-1);return a=Math.min(a,.5*r),o=Math.min(o,.5*n),this.lines([[r-2*a,0],[a*s,0,a,o-o*s,a,o],[0,n-2*o],[0,o*s,-a*s,o,-a,o],[2*a-r,0],[-a*s,0,-a,-o*s,-a,-o],[0,2*o-n],[0,-o*s,a*s,-o,a,-o]],e+a,t,[1,1],i,!0),this},h.__private__.ellipse=h.ellipse=function(e,t,r,n,a){if(isNaN(e)||isNaN(t)||isNaN(r)||isNaN(n)||!tC(a))throw Error("Invalid arguments passed to jsPDF.ellipse");var o=4/3*(Math.SQRT2-1)*r,i=4/3*(Math.SQRT2-1)*n;return tU(e+r,t),t_(e+r,t-i,e+o,t-n,e,t-n),t_(e-o,t-n,e-r,t-i,e-r,t),t_(e-r,t+i,e-o,t+n,e,t+n),t_(e+o,t+n,e+r,t+i,e+r,t),tE(a),this},h.__private__.circle=h.circle=function(e,t,r,n){if(isNaN(e)||isNaN(t)||isNaN(r)||!tC(n))throw Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(e,t,r,r,n)},h.setFont=function(e,t,r){return r&&(t=w(t,r)),ed=td(e,t,{disableWarning:!1}),this};var tQ=h.__private__.getFont=h.getFont=function(){return em[td.apply(h,arguments)]};h.__private__.getFontList=h.getFontList=function(){var e,t,r={};for(e in eg)if(eg.hasOwnProperty(e))for(t in r[e]=[],eg[e])eg[e].hasOwnProperty(t)&&r[e].push(t);return r},h.addFont=function(e,t,r,n,a){var o=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&-1!==o.indexOf(arguments[3])?a=arguments[3]:arguments[3]&&-1==o.indexOf(arguments[3])&&(r=w(r,n)),a=a||"Identity-H",tn.call(this,e,t,r,a)};var tT,tD,tM=e.lineWidth||.200025,tH=h.__private__.getLineWidth=h.getLineWidth=function(){return tM},tR=h.__private__.setLineWidth=h.setLineWidth=function(e){return tM=e,Y(k(S(e))+" w"),this};h.__private__.setLineDash=sM.API.setLineDash=sM.API.setLineDashPattern=function(e,t){if(e=e||[],isNaN(t=t||0)||!Array.isArray(e))throw Error("Invalid arguments passed to jsPDF.setLineDash");return Y("["+(e=e.map(function(e){return k(S(e))}).join(" "))+"] "+(t=k(S(t)))+" d"),this};var tK=h.__private__.getLineHeight=h.getLineHeight=function(){return et*tD};h.__private__.getLineHeight=h.getLineHeight=function(){return et*tD};var tV=h.__private__.setLineHeightFactor=h.setLineHeightFactor=function(e){return"number"==typeof(e=e||1.15)&&(tD=e),this},tq=h.__private__.getLineHeightFactor=h.getLineHeightFactor=function(){return tD};tV(e.lineHeight);var tG=h.__private__.getHorizontalCoordinate=function(e){return S(e)},tz=h.__private__.getVerticalCoordinate=function(e){return b===x.ADVANCED?e:ej[T].mediaBox.topRightY-ej[T].mediaBox.bottomLeftY-S(e)},tW=h.__private__.getHorizontalCoordinateString=h.getHorizontalCoordinateString=function(e){return k(tG(e))},t$=h.__private__.getVerticalCoordinateString=h.getVerticalCoordinateString=function(e){return k(tz(e))},tX=e.strokeColor||"0 G";h.__private__.getStrokeColor=h.getDrawColor=function(){return eH(tX)},h.__private__.setStrokeColor=h.setDrawColor=function(e,t,r,n){return Y(tX=eR({ch1:e,ch2:t,ch3:r,ch4:n,pdfColorType:"draw",precision:2})),this};var tY=e.fillColor||"0 g";h.__private__.getFillColor=h.getFillColor=function(){return eH(tY)},h.__private__.setFillColor=h.setFillColor=function(e,t,r,n){return Y(tY=eR({ch1:e,ch2:t,ch3:r,ch4:n,pdfColorType:"fill",precision:2})),this};var tJ=e.textColor||"0 g",tZ=h.__private__.getTextColor=h.getTextColor=function(){return eH(tJ)};h.__private__.setTextColor=h.setTextColor=function(e,t,r,n){return tJ=eR({ch1:e,ch2:t,ch3:r,ch4:n,pdfColorType:"text",precision:3}),this};var t0=e.charSpace,t1=h.__private__.getCharSpace=h.getCharSpace=function(){return parseFloat(t0||0)};h.__private__.setCharSpace=h.setCharSpace=function(e){if(isNaN(e))throw Error("Invalid argument passed to jsPDF.setCharSpace");return t0=e,this};var t2=0;h.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},h.__private__.setLineCap=h.setLineCap=function(e){var t=h.CapJoinStyles[e];if(void 0===t)throw Error("Line cap style of '"+e+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return t2=t,Y(t+" J"),this};var t5=0;h.__private__.setLineJoin=h.setLineJoin=function(e){var t=h.CapJoinStyles[e];if(void 0===t)throw Error("Line join style of '"+e+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return t5=t,Y(t+" j"),this},h.__private__.setLineMiterLimit=h.__private__.setMiterLimit=h.setLineMiterLimit=h.setMiterLimit=function(e){if(isNaN(e=e||0))throw Error("Invalid argument passed to jsPDF.setLineMiterLimit");return Y(k(S(e))+" M"),this},h.GState=s_,h.setGState=function(e){(e="string"==typeof e?ev[ew[e]]:t4(null,e)).equals(ek)||(Y("/"+e.id+" gs"),ek=e)};var t4=function(e,t){if(!e||!ew[e]){var r=!1;for(var n in ev)if(ev.hasOwnProperty(n)&&ev[n].equals(t)){r=!0;break}if(r)t=ev[n];else{var a="GS"+(Object.keys(ev).length+1).toString(10);ev[a]=t,t.id=a}return e&&(ew[e]=t.id),eC.publish("addGState",t),t}};h.addGState=function(e,t){return t4(e,t),this},h.saveGraphicsState=function(){return Y("q"),ex.push({key:ed,size:et,color:tJ}),this},h.restoreGraphicsState=function(){Y("Q");var e=ex.pop();return ed=e.key,et=e.size,tJ=e.color,ek=null,this},h.setCurrentTransformationMatrix=function(e){return Y(e.toString()+" cm"),this},h.comment=function(e){return Y("#"+e),this};var t3=function(e,t){var r=e||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return r},set:function(e){isNaN(e)||(r=parseFloat(e))}});var n=t||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return n},set:function(e){isNaN(e)||(n=parseFloat(e))}});var a="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return a},set:function(e){a=e.toString()}}),this},t6=function(e,t,r,n){t3.call(this,e,t),this.type="rect";var a=r||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return a},set:function(e){isNaN(e)||(a=parseFloat(e))}});var o=n||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return o},set:function(e){isNaN(e)||(o=parseFloat(e))}}),this},t8=function(){this.page=eB,this.currentPage=T,this.pages=G.slice(0),this.pagesContext=ej.slice(0),this.x=eh,this.y=ef,this.matrix=ep,this.width=rt(T),this.height=rn(T),this.outputDestination=W,this.id="",this.objectNumber=-1};t8.prototype.restore=function(){eB=this.page,T=this.currentPage,ej=this.pagesContext,G=this.pages,eh=this.x,ef=this.y,ep=this.matrix,rr(T,this.width),ra(T,this.height),W=this.outputDestination};var t7=function(e,t,r,n,a){eE.push(new t8),eB=T=0,G=[],eh=e,ef=t,ep=a,ti([r,n])},t9=function(e){if(eF[e])eE.pop().restore();else{var t=new t8,r="Xo"+(Object.keys(eS).length+1).toString(10);t.id=r,eF[e]=r,eS[r]=t,eC.publish("addFormObject",t),eE.pop().restore()}};for(var re in h.beginFormObject=function(e,t,r,n,a){return t7(e,t,r,n,a),this},h.endFormObject=function(e){return t9(e),this},h.doFormObject=function(e,t){var r=eS[eF[e]];return Y("q"),Y(t.toString()+" cm"),Y("/"+r.id+" Do"),Y("Q"),this},h.getFormObject=function(e){var t=eS[eF[e]];return{x:t.x,y:t.y,width:t.width,height:t.height,matrix:t.matrix}},h.save=function(e,t){return e=e||"generated.pdf",(t=t||{}).returnPromise=t.returnPromise||!1,!1===t.returnPromise?(sg(tx(tg()),e),"function"==typeof sg.unload&&sl.setTimeout&&setTimeout(sg.unload,911),this):new Promise(function(t,r){try{var n=sg(tx(tg()),e);"function"==typeof sg.unload&&sl.setTimeout&&setTimeout(sg.unload,911),t(n)}catch(e){r(e.message)}})},sM.API)sM.API.hasOwnProperty(re)&&("events"===re&&sM.API.events.length?function(e,t){var r,n,a;for(a=t.length-1;-1!==a;a--)r=t[a][0],n=t[a][1],e.subscribe.apply(e,[r].concat("function"==typeof n?[n]:n))}(eC,sM.API.events):h[re]=sM.API[re]);var rt=h.getPageWidth=function(e){return(ej[e=e||T].mediaBox.topRightX-ej[e].mediaBox.bottomLeftX)/eu},rr=h.setPageWidth=function(e,t){ej[e].mediaBox.topRightX=t*eu+ej[e].mediaBox.bottomLeftX},rn=h.getPageHeight=function(e){return(ej[e=e||T].mediaBox.topRightY-ej[e].mediaBox.bottomLeftY)/eu},ra=h.setPageHeight=function(e,t){ej[e].mediaBox.topRightY=t*eu+ej[e].mediaBox.bottomLeftY};return h.internal={pdfEscape:to,getStyle:tN,getFont:tQ,getFontSize:en,getCharSpace:t1,getTextColor:tZ,getLineHeight:tK,getLineHeightFactor:tq,getLineWidth:tH,write:J,getHorizontalCoordinate:tG,getVerticalCoordinate:tz,getCoordinateString:tW,getVerticalCoordinateString:t$,collections:{},newObject:eL,newAdditionalObject:eT,newObjectDeferred:e_,newObjectDeferredBegin:eQ,getFilters:eK,putStream:eV,events:eC,scaleFactor:eu,pageSize:{getWidth:function(){return rt(T)},setWidth:function(e){rr(T,e)},getHeight:function(){return rn(T)},setHeight:function(e){ra(T,e)}},encryptionOptions:c,encryption:tv,getEncryptor:function(e){return null!==c?tv.encryptor(e,0):function(e){return e}},output:tb,getNumberOfPages:tc,pages:G,out:Y,f2:C,f3:N,getPageInfo:tw,getPageInfoByObjId:tk,getCurrentPageInfo:tB,getPDFVersion:p,Point:t3,Rectangle:t6,Matrix:eO,hasHotfix:ty},Object.defineProperty(h.internal.pageSize,"width",{get:function(){return rt(T)},set:function(e){rr(T,e)},enumerable:!0,configurable:!0}),Object.defineProperty(h.internal.pageSize,"height",{get:function(){return rn(T)},set:function(e){ra(T,e)},enumerable:!0,configurable:!0}),(function(e){for(var t=0,r=ee.length;t<r;t++){var n=tn.call(this,e[t][0],e[t][1],e[t][2],ee[t][3],!0);!1===d&&(u[n]=!0);var a=e[t][0].split("-");tr({id:n,fontName:a[0],fontStyle:a[1]||""})}eC.publish("addFonts",{fonts:em,dictionary:eg})}).call(h,ee),ed="F1",ts(a,r),eC.publish("initialized"),h}sI.prototype.lsbFirstWord=function(e){return String.fromCharCode(e>>0&255,e>>8&255,e>>16&255,e>>24&255)},sI.prototype.toHexString=function(e){return e.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},sI.prototype.hexToBytes=function(e){for(var t=[],r=0;r<e.length;r+=2)t.push(String.fromCharCode(parseInt(e.substr(r,2),16)));return t.join("")},sI.prototype.processOwnerPassword=function(e,t){return sO(sS(t).substr(0,5),e)},sI.prototype.encryptor=function(e,t){var r=sS(this.encryptionKey+String.fromCharCode(255&e,e>>8&255,e>>16&255,255&t,t>>8&255)).substr(0,10);return function(e){return sO(r,e)}},s_.prototype.equals=function(e){var t,r="id,objectNumber,equals";if(!e||id()(e)!==id()(this))return!1;var n=0;for(t in this)if(!(r.indexOf(t)>=0)){if(this.hasOwnProperty(t)&&!e.hasOwnProperty(t)||this[t]!==e[t])return!1;n++}for(t in e)e.hasOwnProperty(t)&&0>r.indexOf(t)&&n--;return 0===n},sM.API={events:[]},sM.version="2.5.2";var sH=sM.API,sR=1,sK=function(e){return e.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},sV=function(e){return e.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},sq=function(e){return e.toFixed(2)},sG=function(e){return e.toFixed(5)};sH.__acroform__={};var sz=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e},sW=function(e){return e*sR},s$=function(e){var t=new ln,r=lg.internal.getHeight(e)||0,n=lg.internal.getWidth(e)||0;return t.BBox=[0,0,Number(sq(n)),Number(sq(r))],t},sX=sH.__acroform__.setBit=function(e,t){if(t=t||0,isNaN(e=e||0)||isNaN(t))throw Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return e|1<<t},sY=sH.__acroform__.clearBit=function(e,t){if(t=t||0,isNaN(e=e||0)||isNaN(t))throw Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return e&~(1<<t)},sJ=sH.__acroform__.getBit=function(e,t){if(isNaN(e)||isNaN(t))throw Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return 0==(e&1<<t)?0:1},sZ=sH.__acroform__.getBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return sJ(e,t-1)},s0=sH.__acroform__.setBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return sX(e,t-1)},s1=sH.__acroform__.clearBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return sY(e,t-1)},s2=sH.__acroform__.calculateCoordinates=function(e,t){var r=t.internal.getHorizontalCoordinate,n=t.internal.getVerticalCoordinate,a=e[0],o=e[1],i=e[2],s=e[3],l={};return l.lowerLeft_X=r(a)||0,l.lowerLeft_Y=n(o+s)||0,l.upperRight_X=r(a+i)||0,l.upperRight_Y=n(o)||0,[Number(sq(l.lowerLeft_X)),Number(sq(l.lowerLeft_Y)),Number(sq(l.upperRight_X)),Number(sq(l.upperRight_Y))]},s5=function(e){if(e.appearanceStreamContent)return e.appearanceStreamContent;if(e.V||e.DV){var t=[],r=e._V||e.DV,n=s4(e,r),a=e.scope.internal.getFont(e.fontName,e.fontStyle).id;t.push("/Tx BMC"),t.push("q"),t.push("BT"),t.push(e.scope.__private__.encodeColorString(e.color)),t.push("/"+a+" "+sq(n.fontSize)+" Tf"),t.push("1 0 0 1 0 0 Tm"),t.push(n.text),t.push("ET"),t.push("Q"),t.push("EMC");var o=s$(e);return o.scope=e.scope,o.stream=t.join("\n"),o}},s4=function(e,t){var r=0===e.fontSize?e.maxFontSize:e.fontSize,n={text:"",fontSize:""},a=(t=")"==(t="("==t.substr(0,1)?t.substr(1):t).substr(t.length-1)?t.substr(0,t.length-1):t).split(" ");a=e.multiline?a.map(function(e){return e.split("\n")}):a.map(function(e){return[e]});var o=r,i=lg.internal.getHeight(e)||0;i=i<0?-i:i;var s=lg.internal.getWidth(e)||0;s=s<0?-s:s,o++;e:for(;o>0;){t="";var l,A,c=s3("3",e,--o).height,d=e.multiline?i-o:(i-c)/2,u=d+=2,h=0,f=0,p=0;if(o<=0){t="(...) Tj\n",t+="% Width of Text: "+s3(t,e,o=12).width+", FieldWidth:"+s+"\n";break}for(var m="",g=0,x=0;x<a.length;x++)if(a.hasOwnProperty(x)){var b=!1;if(1!==a[x].length&&p!==a[x].length-1){if((c+2)*(g+2)+2>i)continue e;m+=a[x][p],b=!0,f=x,x--}else{m=" "==(m+=a[x][p]+" ").substr(m.length-1)?m.substr(0,m.length-1):m;var y,v,w=parseInt(x),k=(y=m,v=o,w+1<a.length&&s3(y+" "+a[w+1][0],e,v).width<=s-4),B=x>=a.length-1;if(k&&!B){m+=" ",p=0;continue}if(k||B){if(B)f=w;else if(e.multiline&&(c+2)*(g+2)+2>i)continue e}else{if(!e.multiline||(c+2)*(g+2)+2>i)continue e;f=w}}for(var j="",C=h;C<=f;C++){var N=a[C];if(e.multiline){if(C===f){j+=N[p]+" ",p=(p+1)%N.length;continue}if(C===h){j+=N[N.length-1]+" ";continue}}j+=N[0]+" "}switch(A=s3(j=" "==j.substr(j.length-1)?j.substr(0,j.length-1):j,e,o).width,e.textAlign){case"right":l=s-A-2;break;case"center":l=(s-A)/2;break;default:l=2}t+=sq(l)+" "+sq(u)+" Td\n("+sK(j)+") Tj\n"+-sq(l)+" 0 Td\n",u=-(o+2),A=0,h=b?f:f+1,g++,m=""}break}return n.text=t,n.fontSize=o,n},s3=function(e,t,r){var n=t.scope.internal.getFont(t.fontName,t.fontStyle),a=t.scope.getStringUnitWidth(e,{font:n,fontSize:parseFloat(r),charSpace:0})*parseFloat(r);return{height:t.scope.getStringUnitWidth("3",{font:n,fontSize:parseFloat(r),charSpace:0})*parseFloat(r)*1.5,width:a}},s6={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},s8=function(e,t){var r={type:"reference",object:e};void 0===t.internal.getPageInfo(e.page).pageContext.annotations.find(function(e){return e.type===r.type&&e.object===r.object})&&t.internal.getPageInfo(e.page).pageContext.annotations.push(r)},s7=function(e,t){for(var r in e)if(e.hasOwnProperty(r)){var n=e[r];t.internal.newObjectDeferredBegin(n.objId,!0),"object"===id()(n)&&"function"==typeof n.putStream&&n.putStream(),delete e[r]}},s9=function(e,t){if(t.scope=e,void 0!==e.internal&&(void 0===e.internal.acroformPlugin||!1===e.internal.acroformPlugin.isInitialized)){if(lo.FieldNum=0,e.internal.acroformPlugin=JSON.parse(JSON.stringify(s6)),e.internal.acroformPlugin.acroFormDictionaryRoot)throw Error("Exception while creating AcroformDictionary");sR=e.internal.scaleFactor,e.internal.acroformPlugin.acroFormDictionaryRoot=new la,e.internal.acroformPlugin.acroFormDictionaryRoot.scope=e,e.internal.acroformPlugin.acroFormDictionaryRoot._eventID=e.internal.events.subscribe("postPutResources",function(){e.internal.events.unsubscribe(e.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete e.internal.acroformPlugin.acroFormDictionaryRoot._eventID,e.internal.acroformPlugin.printedOut=!0}),e.internal.events.subscribe("buildDocument",function(){!function(e){e.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var t=e.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var r in t)if(t.hasOwnProperty(r)){var n=t[r];n.objId=void 0,n.hasAnnotation&&s8(n,e)}}(e)}),e.internal.events.subscribe("putCatalog",function(){!function(e){if(void 0===e.internal.acroformPlugin.acroFormDictionaryRoot)throw Error("putCatalogCallback: Root missing.");e.internal.write("/AcroForm "+e.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")}(e)}),e.internal.events.subscribe("postPutPages",function(t){!function(e,t){var r=!e;for(var n in e||(t.internal.newObjectDeferredBegin(t.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),t.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),e=e||t.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(e.hasOwnProperty(n)){var a=e[n],o=[],i=a.Rect;if(a.Rect&&(a.Rect=s2(a.Rect,t)),t.internal.newObjectDeferredBegin(a.objId,!0),a.DA=lg.createDefaultAppearanceStream(a),"object"===id()(a)&&"function"==typeof a.getKeyValueListForStream&&(o=a.getKeyValueListForStream()),a.Rect=i,a.hasAppearanceStream&&!a.appearanceStreamContent){var s=s5(a);o.push({key:"AP",value:"<</N "+s+">>"}),t.internal.acroformPlugin.xForms.push(s)}if(a.appearanceStreamContent){var l="";for(var A in a.appearanceStreamContent)if(a.appearanceStreamContent.hasOwnProperty(A)){var c=a.appearanceStreamContent[A];if(l+="/"+A+" <<",Object.keys(c).length>=1||Array.isArray(c)){for(var n in c)if(c.hasOwnProperty(n)){var d=c[n];"function"==typeof d&&(d=d.call(t,a)),l+="/"+n+" "+d+" ",t.internal.acroformPlugin.xForms.indexOf(d)>=0||t.internal.acroformPlugin.xForms.push(d)}}else"function"==typeof(d=c)&&(d=d.call(t,a)),l+="/"+n+" "+d,t.internal.acroformPlugin.xForms.indexOf(d)>=0||t.internal.acroformPlugin.xForms.push(d);l+=">>"}o.push({key:"AP",value:"<<\n"+l+">>"})}t.internal.putStream({additionalKeyValues:o,objectId:a.objId}),t.internal.out("endobj")}r&&s7(t.internal.acroformPlugin.xForms,t)}(t,e)}),e.internal.acroformPlugin.isInitialized=!0}},le=sH.__acroform__.arrayToPdfArray=function(e,t,r){var n=function(e){return e};if(Array.isArray(e)){for(var a="[",o=0;o<e.length;o++)switch(0!==o&&(a+=" "),id()(e[o])){case"boolean":case"number":case"object":a+=e[o].toString();break;case"string":"/"!==e[o].substr(0,1)?(void 0!==t&&r&&(n=r.internal.getEncryptor(t)),a+="("+sK(n(e[o].toString()))+")"):a+=e[o].toString()}return a+"]"}throw Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},lt=function(e,t,r){var n=function(e){return e};return void 0!==t&&r&&(n=r.internal.getEncryptor(t)),(e=e||"").toString(),e="("+sK(n(e))+")"},lr=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(void 0===this._objId){if(void 0===this.scope)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(e){this._objId=e}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};lr.prototype.toString=function(){return this.objId+" 0 R"},lr.prototype.putStream=function(){var e=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:e,objectId:this.objId}),this.scope.internal.out("endobj")},lr.prototype.getKeyValueListForStream=function(){var e=[],t=Object.getOwnPropertyNames(this).filter(function(e){return"content"!=e&&"appearanceStreamContent"!=e&&"scope"!=e&&"objId"!=e&&"_"!=e.substring(0,1)});for(var r in t)if(!1===Object.getOwnPropertyDescriptor(this,t[r]).configurable){var n=t[r],a=this[n];a&&(Array.isArray(a)?e.push({key:n,value:le(a,this.objId,this.scope)}):a instanceof lr?(a.scope=this.scope,e.push({key:n,value:a.objId+" 0 R"})):"function"!=typeof a&&e.push({key:n,value:a}))}return e};var ln=function(){lr.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var e,t=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(t){e=t.trim()},get:function(){return e||null}})};sz(ln,lr);var la=function(){lr.call(this);var e,t=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return t.length>0?t:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return t}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(e){var t=function(e){return e};return this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),"("+sK(t(e))+")"}},set:function(t){e=t}})};sz(la,lr);var lo=function e(){lr.call(this);var t=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return t},set:function(e){if(isNaN(e))throw Error('Invalid value "'+e+'" for attribute F supplied.');t=e}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!sZ(t,3)},set:function(e){!0==!!e?this.F=s0(t,3):this.F=s1(t,3)}});var r=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return r},set:function(e){if(isNaN(e))throw Error('Invalid value "'+e+'" for attribute Ff supplied.');r=e}});var n=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(0!==n.length)return n},set:function(e){n=void 0!==e?e:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[0])?0:n[0]},set:function(e){n[0]=e}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[1])?0:n[1]},set:function(e){n[1]=e}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[2])?0:n[2]},set:function(e){n[2]=e}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[3])?0:n[3]},set:function(e){n[3]=e}});var a="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return a},set:function(e){switch(e){case"/Btn":case"/Tx":case"/Ch":case"/Sig":a=e;break;default:throw Error('Invalid value "'+e+'" for attribute FT supplied.')}}});var o=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!o||o.length<1){if(this instanceof lh)return;o="FieldObject"+e.FieldNum++}var t=function(e){return e};return this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),"("+sK(t(o))+")"},set:function(e){o=e.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return o},set:function(e){o=e}});var i="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return i},set:function(e){i=e}});var s="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return s},set:function(e){s=e}});var l=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return l},set:function(e){l=e}});var A=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return void 0===A?50/sR:A},set:function(e){A=e}});var c="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return c},set:function(e){c=e}});var d="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!d||this instanceof lh||this instanceof lp))return lt(d,this.objId,this.scope)},set:function(e){d=e=e.toString()}});var u=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(u)return this instanceof lc==!1?lt(u,this.objId,this.scope):u},set:function(e){e=e.toString(),u=this instanceof lc==!1?"("===e.substr(0,1)?sV(e.substr(1,e.length-2)):sV(e):e}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof lc==!0?sV(u.substr(1,u.length-1)):u},set:function(e){e=e.toString(),u=this instanceof lc==!0?"/"+e:e}});var h=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(h)return h},set:function(e){this.V=e}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(h)return this instanceof lc==!1?lt(h,this.objId,this.scope):h},set:function(e){e=e.toString(),h=this instanceof lc==!1?"("===e.substr(0,1)?sV(e.substr(1,e.length-2)):sV(e):e}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof lc==!0?sV(h.substr(1,h.length-1)):h},set:function(e){e=e.toString(),h=this instanceof lc==!0?"/"+e:e}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var f,p=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return p},set:function(e){p=e=!!e}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(f)return f},set:function(e){f=e}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!sZ(this.Ff,1)},set:function(e){!0==!!e?this.Ff=s0(this.Ff,1):this.Ff=s1(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!sZ(this.Ff,2)},set:function(e){!0==!!e?this.Ff=s0(this.Ff,2):this.Ff=s1(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!sZ(this.Ff,3)},set:function(e){!0==!!e?this.Ff=s0(this.Ff,3):this.Ff=s1(this.Ff,3)}});var m=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(null!==m)return m},set:function(e){if(-1===[0,1,2].indexOf(e))throw Error('Invalid value "'+e+'" for attribute Q supplied.');m=e}}),Object.defineProperty(this,"textAlign",{get:function(){var e;switch(m){case 0:default:e="left";break;case 1:e="center";break;case 2:e="right"}return e},configurable:!0,enumerable:!0,set:function(e){switch(e){case"right":case 2:m=2;break;case"center":case 1:m=1;break;default:m=0}}})};sz(lo,lr);var li=function(){lo.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var e=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return e},set:function(t){e=t}});var t=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return le(t,this.objId,this.scope)},set:function(e){var r;r=[],"string"==typeof e&&(r=function(e,t,r){r||(r=1);for(var n,a=[];n=t.exec(e);)a.push(n[r]);return a}(e,/\((.*?)\)/g)),t=r}}),this.getOptions=function(){return t},this.setOptions=function(e){t=e,this.sort&&t.sort()},this.addOption=function(e){e=(e=e||"").toString(),t.push(e),this.sort&&t.sort()},this.removeOption=function(e,r){for(r=r||!1,e=(e=e||"").toString();-1!==t.indexOf(e)&&(t.splice(t.indexOf(e),1),!1!==r););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!sZ(this.Ff,18)},set:function(e){!0==!!e?this.Ff=s0(this.Ff,18):this.Ff=s1(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!sZ(this.Ff,19)},set:function(e){!0===this.combo&&(!0==!!e?this.Ff=s0(this.Ff,19):this.Ff=s1(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!sZ(this.Ff,20)},set:function(e){!0==!!e?(this.Ff=s0(this.Ff,20),t.sort()):this.Ff=s1(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!sZ(this.Ff,22)},set:function(e){!0==!!e?this.Ff=s0(this.Ff,22):this.Ff=s1(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!sZ(this.Ff,23)},set:function(e){!0==!!e?this.Ff=s0(this.Ff,23):this.Ff=s1(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!sZ(this.Ff,27)},set:function(e){!0==!!e?this.Ff=s0(this.Ff,27):this.Ff=s1(this.Ff,27)}}),this.hasAppearanceStream=!1};sz(li,lo);var ls=function(){li.call(this),this.fontName="helvetica",this.combo=!1};sz(ls,li);var ll=function(){ls.call(this),this.combo=!0};sz(ll,ls);var lA=function(){ll.call(this),this.edit=!0};sz(lA,ll);var lc=function(){lo.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!sZ(this.Ff,15)},set:function(e){!0==!!e?this.Ff=s0(this.Ff,15):this.Ff=s1(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!sZ(this.Ff,16)},set:function(e){!0==!!e?this.Ff=s0(this.Ff,16):this.Ff=s1(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!sZ(this.Ff,17)},set:function(e){!0==!!e?this.Ff=s0(this.Ff,17):this.Ff=s1(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!sZ(this.Ff,26)},set:function(e){!0==!!e?this.Ff=s0(this.Ff,26):this.Ff=s1(this.Ff,26)}});var e,t={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var e=function(e){return e};if(this.scope&&(e=this.scope.internal.getEncryptor(this.objId)),0!==Object.keys(t).length){var r,n=[];for(r in n.push("<<"),t)n.push("/"+r+" ("+sK(e(t[r]))+")");return n.push(">>"),n.join("\n")}},set:function(e){"object"===id()(e)&&(t=e)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return t.CA||""},set:function(e){"string"==typeof e&&(t.CA=e)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return e.substr(1,e.length-1)},set:function(t){e="/"+t}})};sz(lc,lo);var ld=function(){lc.call(this),this.pushButton=!0};sz(ld,lc);var lu=function(){lc.call(this),this.radio=!0,this.pushButton=!1;var e=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=void 0!==t?t:[]}})};sz(lu,lc);var lh=function(){lo.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return t},set:function(e){t=e}});var e,t,r,n={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var e=function(e){return e};this.scope&&(e=this.scope.internal.getEncryptor(this.objId));var t,r=[];for(t in r.push("<<"),n)r.push("/"+t+" ("+sK(e(n[t]))+")");return r.push(">>"),r.join("\n")},set:function(e){"object"===id()(e)&&(n=e)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return n.CA||""},set:function(e){"string"==typeof e&&(n.CA=e)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return r},set:function(e){r=e}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return r.substr(1,r.length-1)},set:function(e){r="/"+e}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=lg.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};sz(lh,lo),lu.prototype.setAppearance=function(e){if(!("createAppearanceStream"in e)||!("getCA"in e))throw Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var t in this.Kids)if(this.Kids.hasOwnProperty(t)){var r=this.Kids[t];r.appearanceStreamContent=e.createAppearanceStream(r.optionName),r.caption=e.getCA()}},lu.prototype.createOption=function(e){var t=new lh;return t.Parent=this,t.optionName=e,this.Kids.push(t),lx.call(this.scope,t),t};var lf=function(){lc.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=lg.CheckBox.createAppearanceStream()};sz(lf,lc);var lp=function(){lo.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!sZ(this.Ff,13)},set:function(e){!0==!!e?this.Ff=s0(this.Ff,13):this.Ff=s1(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!sZ(this.Ff,21)},set:function(e){!0==!!e?this.Ff=s0(this.Ff,21):this.Ff=s1(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!sZ(this.Ff,23)},set:function(e){!0==!!e?this.Ff=s0(this.Ff,23):this.Ff=s1(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!sZ(this.Ff,24)},set:function(e){!0==!!e?this.Ff=s0(this.Ff,24):this.Ff=s1(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!sZ(this.Ff,25)},set:function(e){!0==!!e?this.Ff=s0(this.Ff,25):this.Ff=s1(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!sZ(this.Ff,26)},set:function(e){!0==!!e?this.Ff=s0(this.Ff,26):this.Ff=s1(this.Ff,26)}});var e=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return e},set:function(t){Number.isInteger(t)&&(e=t)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};sz(lp,lo);var lm=function(){lp.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!sZ(this.Ff,14)},set:function(e){!0==!!e?this.Ff=s0(this.Ff,14):this.Ff=s1(this.Ff,14)}}),this.password=!0};sz(lm,lp);var lg={CheckBox:{createAppearanceStream:function(){return{N:{On:lg.CheckBox.YesNormal},D:{On:lg.CheckBox.YesPushDown,Off:lg.CheckBox.OffPushDown}}},YesPushDown:function(e){var t=s$(e);t.scope=e.scope;var r=[],n=e.scope.internal.getFont(e.fontName,e.fontStyle).id,a=e.scope.__private__.encodeColorString(e.color),o=s4(e,e.caption);return r.push("0.749023 g"),r.push("0 0 "+sq(lg.internal.getWidth(e))+" "+sq(lg.internal.getHeight(e))+" re"),r.push("f"),r.push("BMC"),r.push("q"),r.push("0 0 1 rg"),r.push("/"+n+" "+sq(o.fontSize)+" Tf "+a),r.push("BT"),r.push(o.text),r.push("ET"),r.push("Q"),r.push("EMC"),t.stream=r.join("\n"),t},YesNormal:function(e){var t=s$(e);t.scope=e.scope;var r=e.scope.internal.getFont(e.fontName,e.fontStyle).id,n=e.scope.__private__.encodeColorString(e.color),a=[],o=lg.internal.getHeight(e),i=lg.internal.getWidth(e),s=s4(e,e.caption);return a.push("1 g"),a.push("0 0 "+sq(i)+" "+sq(o)+" re"),a.push("f"),a.push("q"),a.push("0 0 1 rg"),a.push("0 0 "+sq(i-1)+" "+sq(o-1)+" re"),a.push("W"),a.push("n"),a.push("0 g"),a.push("BT"),a.push("/"+r+" "+sq(s.fontSize)+" Tf "+n),a.push(s.text),a.push("ET"),a.push("Q"),t.stream=a.join("\n"),t},OffPushDown:function(e){var t=s$(e);t.scope=e.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+sq(lg.internal.getWidth(e))+" "+sq(lg.internal.getHeight(e))+" re"),r.push("f"),t.stream=r.join("\n"),t}},RadioButton:{Circle:{createAppearanceStream:function(e){var t={D:{Off:lg.RadioButton.Circle.OffPushDown},N:{}};return t.N[e]=lg.RadioButton.Circle.YesNormal,t.D[e]=lg.RadioButton.Circle.YesPushDown,t},getCA:function(){return"l"},YesNormal:function(e){var t=s$(e);t.scope=e.scope;var r=[],n=lg.internal.getWidth(e)<=lg.internal.getHeight(e)?lg.internal.getWidth(e)/4:lg.internal.getHeight(e)/4,a=Number(((n=Number((.9*n).toFixed(5)))*lg.internal.Bezier_C).toFixed(5));return r.push("q"),r.push("1 0 0 1 "+sG(lg.internal.getWidth(e)/2)+" "+sG(lg.internal.getHeight(e)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+a+" "+a+" "+n+" 0 "+n+" c"),r.push("-"+a+" "+n+" -"+n+" "+a+" -"+n+" 0 c"),r.push("-"+n+" -"+a+" -"+a+" -"+n+" 0 -"+n+" c"),r.push(a+" -"+n+" "+n+" -"+a+" "+n+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join("\n"),t},YesPushDown:function(e){var t=s$(e);t.scope=e.scope;var r=[],n=lg.internal.getWidth(e)<=lg.internal.getHeight(e)?lg.internal.getWidth(e)/4:lg.internal.getHeight(e)/4,a=Number((2*(n=Number((.9*n).toFixed(5)))).toFixed(5)),o=Number((a*lg.internal.Bezier_C).toFixed(5)),i=Number((n*lg.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+sG(lg.internal.getWidth(e)/2)+" "+sG(lg.internal.getHeight(e)/2)+" cm"),r.push(a+" 0 m"),r.push(a+" "+o+" "+o+" "+a+" 0 "+a+" c"),r.push("-"+o+" "+a+" -"+a+" "+o+" -"+a+" 0 c"),r.push("-"+a+" -"+o+" -"+o+" -"+a+" 0 -"+a+" c"),r.push(o+" -"+a+" "+a+" -"+o+" "+a+" 0 c"),r.push("f"),r.push("Q"),r.push("0 g"),r.push("q"),r.push("1 0 0 1 "+sG(lg.internal.getWidth(e)/2)+" "+sG(lg.internal.getHeight(e)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+i+" "+i+" "+n+" 0 "+n+" c"),r.push("-"+i+" "+n+" -"+n+" "+i+" -"+n+" 0 c"),r.push("-"+n+" -"+i+" -"+i+" -"+n+" 0 -"+n+" c"),r.push(i+" -"+n+" "+n+" -"+i+" "+n+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join("\n"),t},OffPushDown:function(e){var t=s$(e);t.scope=e.scope;var r=[],n=lg.internal.getWidth(e)<=lg.internal.getHeight(e)?lg.internal.getWidth(e)/4:lg.internal.getHeight(e)/4,a=Number((2*(n=Number((.9*n).toFixed(5)))).toFixed(5)),o=Number((a*lg.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+sG(lg.internal.getWidth(e)/2)+" "+sG(lg.internal.getHeight(e)/2)+" cm"),r.push(a+" 0 m"),r.push(a+" "+o+" "+o+" "+a+" 0 "+a+" c"),r.push("-"+o+" "+a+" -"+a+" "+o+" -"+a+" 0 c"),r.push("-"+a+" -"+o+" -"+o+" -"+a+" 0 -"+a+" c"),r.push(o+" -"+a+" "+a+" -"+o+" "+a+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join("\n"),t}},Cross:{createAppearanceStream:function(e){var t={D:{Off:lg.RadioButton.Cross.OffPushDown},N:{}};return t.N[e]=lg.RadioButton.Cross.YesNormal,t.D[e]=lg.RadioButton.Cross.YesPushDown,t},getCA:function(){return"8"},YesNormal:function(e){var t=s$(e);t.scope=e.scope;var r=[],n=lg.internal.calculateCross(e);return r.push("q"),r.push("1 1 "+sq(lg.internal.getWidth(e)-2)+" "+sq(lg.internal.getHeight(e)-2)+" re"),r.push("W"),r.push("n"),r.push(sq(n.x1.x)+" "+sq(n.x1.y)+" m"),r.push(sq(n.x2.x)+" "+sq(n.x2.y)+" l"),r.push(sq(n.x4.x)+" "+sq(n.x4.y)+" m"),r.push(sq(n.x3.x)+" "+sq(n.x3.y)+" l"),r.push("s"),r.push("Q"),t.stream=r.join("\n"),t},YesPushDown:function(e){var t=s$(e);t.scope=e.scope;var r=lg.internal.calculateCross(e),n=[];return n.push("0.749023 g"),n.push("0 0 "+sq(lg.internal.getWidth(e))+" "+sq(lg.internal.getHeight(e))+" re"),n.push("f"),n.push("q"),n.push("1 1 "+sq(lg.internal.getWidth(e)-2)+" "+sq(lg.internal.getHeight(e)-2)+" re"),n.push("W"),n.push("n"),n.push(sq(r.x1.x)+" "+sq(r.x1.y)+" m"),n.push(sq(r.x2.x)+" "+sq(r.x2.y)+" l"),n.push(sq(r.x4.x)+" "+sq(r.x4.y)+" m"),n.push(sq(r.x3.x)+" "+sq(r.x3.y)+" l"),n.push("s"),n.push("Q"),t.stream=n.join("\n"),t},OffPushDown:function(e){var t=s$(e);t.scope=e.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+sq(lg.internal.getWidth(e))+" "+sq(lg.internal.getHeight(e))+" re"),r.push("f"),t.stream=r.join("\n"),t}}},createDefaultAppearanceStream:function(e){var t=e.scope.internal.getFont(e.fontName,e.fontStyle).id,r=e.scope.__private__.encodeColorString(e.color);return"/"+t+" "+e.fontSize+" Tf "+r}};lg.internal={Bezier_C:.551915024494,calculateCross:function(e){var t=lg.internal.getWidth(e),r=lg.internal.getHeight(e),n=Math.min(t,r);return{x1:{x:(t-n)/2,y:(r-n)/2+n},x2:{x:(t-n)/2+n,y:(r-n)/2},x3:{x:(t-n)/2,y:(r-n)/2},x4:{x:(t-n)/2+n,y:(r-n)/2+n}}}},lg.internal.getWidth=function(e){var t=0;return"object"===id()(e)&&(t=sW(e.Rect[2])),t},lg.internal.getHeight=function(e){var t=0;return"object"===id()(e)&&(t=sW(e.Rect[3])),t};var lx=sH.addField=function(e){if(s9(this,e),!(e instanceof lo))throw Error("Invalid argument passed to jsPDF.addField.");return e.scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),e.page=e.scope.internal.getCurrentPageInfo().pageNumber,this};function lb(e){return e.reduce(function(e,t,r){return e[t]=r,e},{})}sH.AcroFormChoiceField=li,sH.AcroFormListBox=ls,sH.AcroFormComboBox=ll,sH.AcroFormEditBox=lA,sH.AcroFormButton=lc,sH.AcroFormPushButton=ld,sH.AcroFormRadioButton=lu,sH.AcroFormCheckBox=lf,sH.AcroFormTextField=lp,sH.AcroFormPasswordField=lm,sH.AcroFormAppearance=lg,sH.AcroForm={ChoiceField:li,ListBox:ls,ComboBox:ll,EditBox:lA,Button:lc,PushButton:ld,RadioButton:lu,CheckBox:lf,TextField:lp,PasswordField:lm,Appearance:lg},sM.AcroForm={ChoiceField:li,ListBox:ls,ComboBox:ll,EditBox:lA,Button:lc,PushButton:ld,RadioButton:lu,CheckBox:lf,TextField:lp,PasswordField:lm,Appearance:lg},sM.AcroForm,function(e){e.__addimage__={};var t="UNKNOWN",r={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},n=e.__addimage__.getImageFileTypeByImageData=function(e,n){var a,o,i,s,l,A=t;if("RGBA"===(n=n||t)||void 0!==e.data&&e.data instanceof Uint8ClampedArray&&"height"in e&&"width"in e)return"RGBA";if(w(e))for(l in r)for(i=r[l],a=0;a<i.length;a+=1){for(s=!0,o=0;o<i[a].length;o+=1)if(void 0!==i[a][o]&&i[a][o]!==e[o]){s=!1;break}if(!0===s){A=l;break}}else for(l in r)for(i=r[l],a=0;a<i.length;a+=1){for(s=!0,o=0;o<i[a].length;o+=1)if(void 0!==i[a][o]&&i[a][o]!==e.charCodeAt(o)){s=!1;break}if(!0===s){A=l;break}}return A===t&&n!==t&&(A=n),A},a=function e(t){for(var r=this.internal.write,n=this.internal.putStream,a=(0,this.internal.getFilters)();-1!==a.indexOf("FlateEncode");)a.splice(a.indexOf("FlateEncode"),1);t.objectId=this.internal.newObject();var o=[];if(o.push({key:"Type",value:"/XObject"}),o.push({key:"Subtype",value:"/Image"}),o.push({key:"Width",value:t.width}),o.push({key:"Height",value:t.height}),t.colorSpace===m.INDEXED?o.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(t.palette.length/3-1)+" "+("sMask"in t&&void 0!==t.sMask?t.objectId+2:t.objectId+1)+" 0 R]"}):(o.push({key:"ColorSpace",value:"/"+t.colorSpace}),t.colorSpace===m.DEVICE_CMYK&&o.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),o.push({key:"BitsPerComponent",value:t.bitsPerComponent}),"decodeParameters"in t&&void 0!==t.decodeParameters&&o.push({key:"DecodeParms",value:"<<"+t.decodeParameters+">>"}),"transparency"in t&&Array.isArray(t.transparency)){for(var i="",s=0,l=t.transparency.length;s<l;s++)i+=t.transparency[s]+" "+t.transparency[s]+" ";o.push({key:"Mask",value:"["+i+"]"})}void 0!==t.sMask&&o.push({key:"SMask",value:t.objectId+1+" 0 R"});var A=void 0!==t.filter?["/"+t.filter]:void 0;if(n({data:t.data,additionalKeyValues:o,alreadyAppliedFilters:A,objectId:t.objectId}),r("endobj"),"sMask"in t&&void 0!==t.sMask){var c="/Predictor "+t.predictor+" /Colors 1 /BitsPerComponent "+t.bitsPerComponent+" /Columns "+t.width,d={width:t.width,height:t.height,colorSpace:"DeviceGray",bitsPerComponent:t.bitsPerComponent,decodeParameters:c,data:t.sMask};"filter"in t&&(d.filter=t.filter),e.call(this,d)}if(t.colorSpace===m.INDEXED){var u=this.internal.newObject();n({data:B(new Uint8Array(t.palette)),objectId:u}),r("endobj")}},o=function(){var e=this.internal.collections.addImage_images;for(var t in e)a.call(this,e[t])},i=function(){var e,t=this.internal.collections.addImage_images,r=this.internal.write;for(var n in t)r("/I"+(e=t[n]).index,e.objectId,"0","R")},s=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",o),this.internal.events.subscribe("putXobjectDict",i))},l=function(){var e=this.internal.collections.addImage_images;return s.call(this),e},A=function(){return Object.keys(this.internal.collections.addImage_images).length},c=function(t){return"function"==typeof e["process"+t.toUpperCase()]},d=function(e){return"object"===id()(e)&&1===e.nodeType},u=function(t,r){if("IMG"===t.nodeName&&t.hasAttribute("src")){var n,a=""+t.getAttribute("src");if(0===a.indexOf("data:image/"))return sp(unescape(a).split("base64,").pop());var o=e.loadFile(a,!0);if(void 0!==o)return o}if("CANVAS"===t.nodeName){if(0===t.width||0===t.height)throw Error("Given canvas must have data. Canvas width: "+t.width+", height: "+t.height);switch(r){case"PNG":n="image/png";break;case"WEBP":n="image/webp";break;default:n="image/jpeg"}return sp(t.toDataURL(n,1).split("base64,").pop())}},h=function(e){var t=this.internal.collections.addImage_images;if(t){for(var r in t)if(e===t[r].alias)return t[r]}},f=function(e,t,r){return e||t||(e=-96,t=-96),e<0&&(e=-1*r.width*72/e/this.internal.scaleFactor),t<0&&(t=-1*r.height*72/t/this.internal.scaleFactor),0===e&&(e=t*r.width/r.height),0===t&&(t=e*r.height/r.width),[e,t]},p=function(e,t,r,n,a,o){var i=f.call(this,r,n,a),s=this.internal.getCoordinateString,A=this.internal.getVerticalCoordinateString,c=l.call(this);if(r=i[0],n=i[1],c[a.index]=a,o)var d=Math.cos(o*=Math.PI/180),u=Math.sin(o),h=function(e){return e.toFixed(4)},p=[h(d),h(u),h(-1*u),h(d),0,0,"cm"];this.internal.write("q"),o?(this.internal.write([1,"0","0",1,s(e),A(t+n),"cm"].join(" ")),this.internal.write(p.join(" ")),this.internal.write([s(r),"0","0",s(n),"0","0","cm"].join(" "))):this.internal.write([s(r),"0","0",s(n),s(e),A(t+n),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write("1 0 0 -1 0 0 cm"),this.internal.write("/I"+a.index+" Do"),this.internal.write("Q")},m=e.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};e.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var g=e.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},x=e.__addimage__.sHashCode=function(e){var t,r,n=0;if("string"==typeof e)for(r=e.length,t=0;t<r;t++)n=(n<<5)-n+e.charCodeAt(t)|0;else if(w(e))for(r=e.byteLength/2,t=0;t<r;t++)n=(n<<5)-n+e[t]|0;return n},b=e.__addimage__.validateStringAsBase64=function(e){(e=e||"").toString().trim();var t=!0;return 0===e.length&&(t=!1),e.length%4!=0&&(t=!1),!1===/^[A-Za-z0-9+/]+$/.test(e.substr(0,e.length-2))&&(t=!1),!1===/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(e.substr(-2))&&(t=!1),t},y=e.__addimage__.extractImageFromDataUrl=function(e){var t=(e=e||"").split("base64,"),r=null;if(2===t.length){var n=/^data:(\w*\/\w*);*(charset=(?!charset=)[\w=-]*)*;*$/.exec(t[0]);Array.isArray(n)&&(r={mimeType:n[1],charset:n[2],data:t[1]})}return r},v=e.__addimage__.supportsArrayBuffer=function(){return"undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array};e.__addimage__.isArrayBuffer=function(e){return v()&&e instanceof ArrayBuffer};var w=e.__addimage__.isArrayBufferView=function(e){return v()&&"undefined"!=typeof Uint32Array&&(e instanceof Int8Array||e instanceof Uint8Array||"undefined"!=typeof Uint8ClampedArray&&e instanceof Uint8ClampedArray||e instanceof Int16Array||e instanceof Uint16Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Float32Array||e instanceof Float64Array)},k=e.__addimage__.binaryStringToUint8Array=function(e){for(var t=e.length,r=new Uint8Array(t),n=0;n<t;n++)r[n]=e.charCodeAt(n);return r},B=e.__addimage__.arrayBufferToBinaryString=function(e){for(var t="",r=w(e)?e:new Uint8Array(e),n=0;n<r.length;n+=8192)t+=String.fromCharCode.apply(null,r.subarray(n,n+8192));return t};e.addImage=function(){if("number"==typeof arguments[1]?(r=t,n=arguments[1],a=arguments[2],o=arguments[3],i=arguments[4],l=arguments[5],A=arguments[6],c=arguments[7]):(r=arguments[1],n=arguments[2],a=arguments[3],o=arguments[4],i=arguments[5],l=arguments[6],A=arguments[7],c=arguments[8]),"object"===id()(e=arguments[0])&&!d(e)&&"imageData"in e){var e,r,n,a,o,i,l,A,c,u=e;e=u.imageData,r=u.format||r||t,n=u.x||n||0,a=u.y||a||0,o=u.w||u.width||o,i=u.h||u.height||i,l=u.alias||l,A=u.compression||A,c=u.rotation||u.angle||c}var h=this.internal.getFilters();if(void 0===A&&-1!==h.indexOf("FlateEncode")&&(A="SLOW"),isNaN(n)||isNaN(a))throw Error("Invalid coordinates passed to jsPDF.addImage");s.call(this);var f=j.call(this,e,r,l,A);return p.call(this,n,a,o,i,f,c),this};var j=function(r,a,o,i){if("string"==typeof r&&n(r)===t){var s,l,f,p,m,b=C(r=unescape(r),!1);(""!==b||void 0!==(b=e.loadFile(r,!0)))&&(r=b)}if(d(r)&&(r=u(r,a)),!c(a=n(r,a)))throw Error("addImage does not support files of type '"+a+"', please ensure that a plugin for '"+a+"' support is added.");if((null==(f=o)||0===f.length)&&(o="string"==typeof(p=r)||w(p)?x(p):w(p.data)?x(p.data):null),(s=h.call(this,o))||(v()&&(r instanceof Uint8Array||"RGBA"===a||(l=r,r=k(r))),s=this["process"+a.toUpperCase()](r,A.call(this),o,((m=i)&&"string"==typeof m&&(m=m.toUpperCase()),m in e.image_compression?m:g.NONE),l)),!s)throw Error("An unknown error occurred whilst processing the image.");return s},C=e.__addimage__.convertBase64ToBinaryString=function(e,t){t="boolean"!=typeof t||t;var r,n,a="";if("string"==typeof e){n=null!==(r=y(e))?r.data:e;try{a=sp(n)}catch(e){if(t)throw b(n)?Error("atob-Error in jsPDF.convertBase64ToBinaryString "+e.message):Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return a};e.getImageProperties=function(r){var a,o,i="";if(d(r)&&(r=u(r)),"string"==typeof r&&n(r)===t&&(""===(i=C(r,!1))&&(i=e.loadFile(r)||""),r=i),!c(o=n(r)))throw Error("addImage does not support files of type '"+o+"', please ensure that a plugin for '"+o+"' support is added.");if(!v()||r instanceof Uint8Array||(r=k(r)),!(a=this["process"+o.toUpperCase()](r)))throw Error("An unknown error occurred whilst processing the image");return a.fileType=o,a}}(sM.API),function(e){var t=function(e){if(void 0!==e&&""!=e)return!0};sM.API.events.push(["addPage",function(e){this.internal.getPageInfo(e.pageNumber).pageContext.annotations=[]}]),e.events.push(["putPage",function(e){for(var r,n,a,o=this.internal.getCoordinateString,i=this.internal.getVerticalCoordinateString,s=this.internal.getPageInfoByObjId(e.objId),l=e.pageContext.annotations,A=!1,c=0;c<l.length&&!A;c++)switch((r=l[c]).type){case"link":(t(r.options.url)||t(r.options.pageNumber))&&(A=!0);break;case"reference":case"text":case"freetext":A=!0}if(0!=A){this.internal.write("/Annots [");for(var d=0;d<l.length;d++){r=l[d];var u=this.internal.pdfEscape,h=this.internal.getEncryptor(e.objId);switch(r.type){case"reference":this.internal.write(" "+r.object.objId+" 0 R ");break;case"text":var f=this.internal.newAdditionalObject(),p=this.internal.newAdditionalObject(),m=this.internal.getEncryptor(f.objId),g=r.title||"Note";a="<</Type /Annot /Subtype /Text "+(n="/Rect ["+o(r.bounds.x)+" "+i(r.bounds.y+r.bounds.h)+" "+o(r.bounds.x+r.bounds.w)+" "+i(r.bounds.y)+"] ")+"/Contents ("+u(m(r.contents))+") /Popup "+p.objId+" 0 R /P "+s.objId+" 0 R /T ("+u(m(g))+") >>",f.content=a;var x=f.objId+" 0 R";a="<</Type /Annot /Subtype /Popup "+(n="/Rect ["+o(r.bounds.x+30)+" "+i(r.bounds.y+r.bounds.h)+" "+o(r.bounds.x+r.bounds.w+30)+" "+i(r.bounds.y)+"] ")+" /Parent "+x,r.open&&(a+=" /Open true"),a+=" >>",p.content=a,this.internal.write(f.objId,"0 R",p.objId,"0 R");break;case"freetext":n="/Rect ["+o(r.bounds.x)+" "+i(r.bounds.y)+" "+o(r.bounds.x+r.bounds.w)+" "+i(r.bounds.y+r.bounds.h)+"] ";var b=r.color||"#000000";a="<</Type /Annot /Subtype /FreeText "+n+"/Contents ("+u(h(r.contents))+") /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+b+") /Border [0 0 0] >>",this.internal.write(a);break;case"link":if(r.options.name){var y=this.annotations._nameMap[r.options.name];r.options.pageNumber=y.page,r.options.top=y.y}else r.options.top||(r.options.top=0);if(n="/Rect ["+r.finalBounds.x+" "+r.finalBounds.y+" "+r.finalBounds.w+" "+r.finalBounds.h+"] ",a="",r.options.url)a="<</Type /Annot /Subtype /Link "+n+"/Border [0 0 0] /A <</S /URI /URI ("+u(h(r.options.url))+") >>";else if(r.options.pageNumber)switch(a="<</Type /Annot /Subtype /Link "+n+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(r.options.pageNumber).objId+" 0 R",r.options.magFactor=r.options.magFactor||"XYZ",r.options.magFactor){case"Fit":a+=" /Fit]";break;case"FitH":a+=" /FitH "+r.options.top+"]";break;case"FitV":r.options.left=r.options.left||0,a+=" /FitV "+r.options.left+"]";break;default:var v=i(r.options.top);r.options.left=r.options.left||0,void 0===r.options.zoom&&(r.options.zoom=0),a+=" /XYZ "+r.options.left+" "+v+" "+r.options.zoom+"]"}""!=a&&(a+=" >>",this.internal.write(a))}}this.internal.write("]")}}]),e.createAnnotation=function(e){var t=this.internal.getCurrentPageInfo();switch(e.type){case"link":this.link(e.bounds.x,e.bounds.y,e.bounds.w,e.bounds.h,e);break;case"text":case"freetext":t.pageContext.annotations.push(e)}},e.link=function(e,t,r,n,a){var o=this.internal.getCurrentPageInfo(),i=this.internal.getCoordinateString,s=this.internal.getVerticalCoordinateString;o.pageContext.annotations.push({finalBounds:{x:i(e),y:s(t),w:i(e+r),h:s(t+n)},options:a,type:"link"})},e.textWithLink=function(e,t,r,n){var a,o,i=this.getTextWidth(e),s=this.internal.getLineHeight()/this.internal.scaleFactor;return void 0!==n.maxWidth?(o=n.maxWidth,a=Math.ceil(s*this.splitTextToSize(e,o).length)):(o=i,a=s),this.text(e,t,r,n),r+=.2*s,"center"===n.align&&(t-=i/2),"right"===n.align&&(t-=i),this.link(t,r-s,o,a,n),i},e.getTextWidth=function(e){var t=this.internal.getFontSize();return this.getStringUnitWidth(e)*t/this.internal.scaleFactor}}(sM.API),function(e){var t={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},r={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},n={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},a=[1570,1571,1573,1575];e.__arabicParser__={};var o=e.__arabicParser__.isInArabicSubstitutionA=function(e){return void 0!==t[e.charCodeAt(0)]},i=e.__arabicParser__.isArabicLetter=function(e){return"string"==typeof e&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(e)},s=e.__arabicParser__.isArabicEndLetter=function(e){return i(e)&&o(e)&&t[e.charCodeAt(0)].length<=2},l=e.__arabicParser__.isArabicAlfLetter=function(e){return i(e)&&a.indexOf(e.charCodeAt(0))>=0};e.__arabicParser__.arabicLetterHasIsolatedForm=function(e){return i(e)&&o(e)&&t[e.charCodeAt(0)].length>=1};var A=e.__arabicParser__.arabicLetterHasFinalForm=function(e){return i(e)&&o(e)&&t[e.charCodeAt(0)].length>=2};e.__arabicParser__.arabicLetterHasInitialForm=function(e){return i(e)&&o(e)&&t[e.charCodeAt(0)].length>=3};var c=e.__arabicParser__.arabicLetterHasMedialForm=function(e){return i(e)&&o(e)&&4==t[e.charCodeAt(0)].length},d=e.__arabicParser__.resolveLigatures=function(e){var t=0,n=r,a="",o=0;for(t=0;t<e.length;t+=1)void 0!==n[e.charCodeAt(t)]?(o++,"number"==typeof(n=n[e.charCodeAt(t)])&&(a+=String.fromCharCode(n),n=r,o=0),t===e.length-1&&(n=r,a+=e.charAt(t-(o-1)),t-=o-1,o=0)):(n=r,a+=e.charAt(t-o),t-=o,o=0);return a};e.__arabicParser__.isArabicDiacritic=function(e){return void 0!==e&&void 0!==n[e.charCodeAt(0)]};var u=e.__arabicParser__.getCorrectForm=function(e,t,r){return i(e)?!1===o(e)?-1:!A(e)||!i(t)&&!i(r)||!i(r)&&s(t)||s(e)&&!i(t)||s(e)&&l(t)||s(e)&&s(t)?0:c(e)&&i(t)&&!s(t)&&i(r)&&A(r)?3:s(e)||!i(r)?1:2:-1},h=function(e){var r=0,n=0,a=0,o="",s="",l="",A=(e=e||"").split("\\s+"),c=[];for(r=0;r<A.length;r+=1){for(c.push(""),n=0;n<A[r].length;n+=1)o=A[r][n],s=A[r][n-1],l=A[r][n+1],i(o)?(a=u(o,s,l),c[r]+=-1!==a?String.fromCharCode(t[o.charCodeAt(0)][a]):o):c[r]+=o;c[r]=d(c[r])}return c.join(" ")},f=e.__arabicParser__.processArabic=e.processArabic=function(){var e,t="string"==typeof arguments[0]?arguments[0]:arguments[0].text,r=[];if(Array.isArray(t)){var n=0;for(r=[],n=0;n<t.length;n+=1)Array.isArray(t[n])?r.push([h(t[n][0]),t[n][1],t[n][2]]):r.push([h(t[n])]);e=r}else e=h(t);return"string"==typeof arguments[0]?e:(arguments[0].text=e,arguments[0])};e.events.push(["preProcessText",f])}(sM.API),sM.API.autoPrint=function(e){var t;return((e=e||{}).variant=e.variant||"non-conform","javascript"===e.variant)?this.addJS("print({});"):(this.internal.events.subscribe("postPutResources",function(){t=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+t+" 0 R")})),this},function(e){var t=function(){var e=void 0;Object.defineProperty(this,"pdf",{get:function(){return e},set:function(t){e=t}});var t=150;Object.defineProperty(this,"width",{get:function(){return t},set:function(e){t=isNaN(e)||!1===Number.isInteger(e)||e<0?150:e,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=t+1)}});var r=300;Object.defineProperty(this,"height",{get:function(){return r},set:function(e){r=isNaN(e)||!1===Number.isInteger(e)||e<0?300:e,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=r+1)}});var n=[];Object.defineProperty(this,"childNodes",{get:function(){return n},set:function(e){n=e}});var a={};Object.defineProperty(this,"style",{get:function(){return a},set:function(e){a=e}}),Object.defineProperty(this,"parentNode",{})};t.prototype.getContext=function(e,t){var r;if("2d"!==(e=e||"2d"))return null;for(r in t)this.pdf.context2d.hasOwnProperty(r)&&(this.pdf.context2d[r]=t[r]);return this.pdf.context2d._canvas=this,this.pdf.context2d},t.prototype.toDataURL=function(){throw Error("toDataURL is not implemented.")},e.events.push(["initialized",function(){this.canvas=new t,this.canvas.pdf=this}])}(sM.API),function(e){var t={left:0,top:0,bottom:0,right:0},r=!1,n=function(){void 0===this.internal.__cell__&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},t),this.internal.__cell__.margins.width=this.getPageWidth(),a.call(this))},a=function(){this.internal.__cell__.lastCell=new o,this.internal.__cell__.pages=1},o=function(){var e=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return e},set:function(t){e=t}});var t=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return t},set:function(e){t=e}});var r=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return r},set:function(e){r=e}});var n=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return n},set:function(e){n=e}});var a=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return a},set:function(e){a=e}});var o=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return o},set:function(e){o=e}});var i=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return i},set:function(e){i=e}}),this};o.prototype.clone=function(){return new o(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},o.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},e.setHeaderFunction=function(e){return n.call(this),this.internal.__cell__.headerFunction="function"==typeof e?e:void 0,this},e.getTextDimensions=function(e,t){n.call(this);var r=(t=t||{}).fontSize||this.getFontSize(),a=t.font||this.getFont(),o=t.scaleFactor||this.internal.scaleFactor,i=0,s=0,l=0,A=this;if(!Array.isArray(e)&&"string"!=typeof e){if("number"!=typeof e)throw Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");e=String(e)}var c=t.maxWidth;c>0?"string"==typeof e?e=this.splitTextToSize(e,c):"[object Array]"===Object.prototype.toString.call(e)&&(e=e.reduce(function(e,t){return e.concat(A.splitTextToSize(t,c))},[])):e=Array.isArray(e)?e:[e];for(var d=0;d<e.length;d++)i<(l=this.getStringUnitWidth(e[d],{font:a})*r)&&(i=l);return 0!==i&&(s=e.length),{w:i/=o,h:Math.max((s*r*this.getLineHeightFactor()-r*(this.getLineHeightFactor()-1))/o,0)}},e.cellAddPage=function(){n.call(this),this.addPage();var e=this.internal.__cell__.margins||t;return this.internal.__cell__.lastCell=new o(e.left,e.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var i=e.cell=function(){e=arguments[0]instanceof o?arguments[0]:new o(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),n.call(this);var e,a=this.internal.__cell__.lastCell,i=this.internal.__cell__.padding,s=this.internal.__cell__.margins||t,l=this.internal.__cell__.tableHeaderRow,A=this.internal.__cell__.printHeaders;return void 0!==a.lineNumber&&(a.lineNumber===e.lineNumber?(e.x=(a.x||0)+(a.width||0),e.y=a.y||0):a.y+a.height+e.height+s.bottom>this.getPageHeight()?(this.cellAddPage(),e.y=s.top,A&&l&&(this.printHeaderRow(e.lineNumber,!0),e.y+=l[0].height)):e.y=a.y+a.height||e.y),void 0!==e.text[0]&&(this.rect(e.x,e.y,e.width,e.height,!0===r?"FD":void 0),"right"===e.align?this.text(e.text,e.x+e.width-i,e.y+i,{align:"right",baseline:"top"}):"center"===e.align?this.text(e.text,e.x+e.width/2,e.y+i,{align:"center",baseline:"top",maxWidth:e.width-i-i}):this.text(e.text,e.x+i,e.y+i,{align:"left",baseline:"top",maxWidth:e.width-i-i})),this.internal.__cell__.lastCell=e,this};e.table=function(e,r,l,A,c){if(n.call(this),!l)throw Error("No data for PDF table.");var d,u,h,f,p=[],m=[],g=[],x={},b={},y=[],v=[],w=(c=c||{}).autoSize||!1,k=!1!==c.printHeaders,B=c.css&&void 0!==c.css["font-size"]?16*c.css["font-size"]:c.fontSize||12,j=c.margins||Object.assign({width:this.getPageWidth()},t),C="number"==typeof c.padding?c.padding:3,N=c.headerBackgroundColor||"#c8c8c8",S=c.headerTextColor||"#000";if(a.call(this),this.internal.__cell__.printHeaders=k,this.internal.__cell__.margins=j,this.internal.__cell__.table_font_size=B,this.internal.__cell__.padding=C,this.internal.__cell__.headerBackgroundColor=N,this.internal.__cell__.headerTextColor=S,this.setFontSize(B),null==A)m=p=Object.keys(l[0]),g=p.map(function(){return"left"});else if(Array.isArray(A)&&"object"===id()(A[0]))for(p=A.map(function(e){return e.name}),m=A.map(function(e){return e.prompt||e.name||""}),g=A.map(function(e){return e.align||"left"}),d=0;d<A.length;d+=1)b[A[d].name]=A[d].width*(19.049976/25.4);else Array.isArray(A)&&"string"==typeof A[0]&&(m=p=A,g=p.map(function(){return"left"}));if(w||Array.isArray(A)&&"string"==typeof A[0])for(d=0;d<p.length;d+=1){for(x[f=p[d]]=l.map(function(e){return e[f]}),this.setFont(void 0,"bold"),y.push(this.getTextDimensions(m[d],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),u=x[f],this.setFont(void 0,"normal"),h=0;h<u.length;h+=1)y.push(this.getTextDimensions(u[h],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);b[f]=Math.max.apply(null,y)+C+C,y=[]}if(k){var F={};for(d=0;d<p.length;d+=1)F[p[d]]={},F[p[d]].text=m[d],F[p[d]].align=g[d];var E=s.call(this,F,b);v=p.map(function(t){return new o(e,r,b[t],E,F[t].text,void 0,F[t].align)}),this.setTableHeaderRow(v),this.printHeaderRow(1,!1)}var O=A.reduce(function(e,t){return e[t.name]=t.align,e},{});for(d=0;d<l.length;d+=1){"rowStart"in c&&c.rowStart instanceof Function&&c.rowStart({row:d,data:l[d]},this);var P=s.call(this,l[d],b);for(h=0;h<p.length;h+=1){var I=l[d][p[h]];"cellStart"in c&&c.cellStart instanceof Function&&c.cellStart({row:d,col:h,data:I},this),i.call(this,new o(e,r,b[p[h]],P,I,d+2,O[p[h]]))}}return this.internal.__cell__.table_x=e,this.internal.__cell__.table_y=r,this};var s=function(e,t){var r=this.internal.__cell__.padding,n=this.internal.__cell__.table_font_size,a=this.internal.scaleFactor;return Object.keys(e).map(function(n){var a=e[n];return this.splitTextToSize(a.hasOwnProperty("text")?a.text:a,t[n]-r-r)},this).map(function(e){return this.getLineHeightFactor()*e.length*n/a+r+r},this).reduce(function(e,t){return Math.max(e,t)},0)};e.setTableHeaderRow=function(e){n.call(this),this.internal.__cell__.tableHeaderRow=e},e.printHeaderRow=function(e,t){if(n.call(this),!this.internal.__cell__.tableHeaderRow)throw Error("Property tableHeaderRow does not exist.");if(r=!0,"function"==typeof this.internal.__cell__.headerFunction){var a,s=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new o(s[0],s[1],s[2],s[3],void 0,-1)}this.setFont(void 0,"bold");for(var l=[],A=0;A<this.internal.__cell__.tableHeaderRow.length;A+=1){a=this.internal.__cell__.tableHeaderRow[A].clone(),t&&(a.y=this.internal.__cell__.margins.top||0,l.push(a)),a.lineNumber=e;var c=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),i.call(this,a),this.setTextColor(c)}l.length>0&&this.setTableHeaderRow(l),this.setFont(void 0,"normal"),r=!1}}(sM.API);var ly={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},lv=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],lw=lb(lv),lk=[100,200,300,400,500,600,700,800,900],lB=lb(lk);function lj(e){var t,r,n,a=e.family.replace(/"|'/g,"").toLowerCase(),o=ly[r=(r=e.style)||"normal"]?r:"normal",i=(t=e.weight)?"number"==typeof t?t>=100&&t<=900&&t%100==0?t:400:/^\d00$/.test(t)?parseInt(t):"bold"===t?700:400:400,s="number"==typeof lw[n=(n=e.stretch)||"normal"]?n:"normal";return{family:a,style:o,weight:i,stretch:s,src:e.src||[],ref:e.ref||{name:a,style:[s,o,i].join(" ")}}}function lC(e,t,r,n){var a;for(a=r;a>=0&&a<t.length;a+=n)if(e[t[a]])return e[t[a]];for(a=r;a>=0&&a<t.length;a-=n)if(e[t[a]])return e[t[a]]}var lN={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},lS={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function lF(e){return[e.stretch,e.style,e.weight,e.family].join(" ")}function lE(e){return e.trimLeft()}var lO,lP,lI,lU=["times"];(function(e){var t,r,n,a,o,i,s,l,A,c=function(e){return e=e||{},this.isStrokeTransparent=e.isStrokeTransparent||!1,this.strokeOpacity=e.strokeOpacity||1,this.strokeStyle=e.strokeStyle||"#000000",this.fillStyle=e.fillStyle||"#000000",this.isFillTransparent=e.isFillTransparent||!1,this.fillOpacity=e.fillOpacity||1,this.font=e.font||"10px sans-serif",this.textBaseline=e.textBaseline||"alphabetic",this.textAlign=e.textAlign||"left",this.lineWidth=e.lineWidth||1,this.lineJoin=e.lineJoin||"miter",this.lineCap=e.lineCap||"butt",this.path=e.path||[],this.transform=void 0!==e.transform?e.transform.clone():new l,this.globalCompositeOperation=e.globalCompositeOperation||"normal",this.globalAlpha=e.globalAlpha||1,this.clip_path=e.clip_path||[],this.currentPoint=e.currentPoint||new i,this.miterLimit=e.miterLimit||10,this.lastPoint=e.lastPoint||new i,this.lineDashOffset=e.lineDashOffset||0,this.lineDash=e.lineDash||[],this.margin=e.margin||[0,0,0,0],this.prevPageLastElemOffset=e.prevPageLastElemOffset||0,this.ignoreClearRect="boolean"!=typeof e.ignoreClearRect||e.ignoreClearRect,this};e.events.push(["initialized",function(){this.context2d=new d(this),t=this.internal.f2,r=this.internal.getCoordinateString,n=this.internal.getVerticalCoordinateString,a=this.internal.getHorizontalCoordinate,o=this.internal.getVerticalCoordinate,i=this.internal.Point,s=this.internal.Rectangle,l=this.internal.Matrix,A=new c}]);var d=function(e){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}}),Object.defineProperty(this,"pdf",{get:function(){return e}});var t=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return t},set:function(e){t=!!e}});var r=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return r},set:function(e){r=!!e}});var n=0;Object.defineProperty(this,"posX",{get:function(){return n},set:function(e){isNaN(e)||(n=e)}});var a=0;Object.defineProperty(this,"posY",{get:function(){return a},set:function(e){isNaN(e)||(a=e)}}),Object.defineProperty(this,"margin",{get:function(){return A.margin},set:function(e){var t;"number"==typeof e?t=[e,e,e,e]:((t=[,,,,])[0]=e[0],t[1]=e.length>=2?e[1]:t[0],t[2]=e.length>=3?e[2]:t[0],t[3]=e.length>=4?e[3]:t[1]),A.margin=t}});var o=!1;Object.defineProperty(this,"autoPaging",{get:function(){return o},set:function(e){o=e}});var i=0;Object.defineProperty(this,"lastBreak",{get:function(){return i},set:function(e){i=e}});var s=[];Object.defineProperty(this,"pageBreaks",{get:function(){return s},set:function(e){s=e}}),Object.defineProperty(this,"ctx",{get:function(){return A},set:function(e){e instanceof c&&(A=e)}}),Object.defineProperty(this,"path",{get:function(){return A.path},set:function(e){A.path=e}});var l=[];Object.defineProperty(this,"ctxStack",{get:function(){return l},set:function(e){l=e}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(e){var t;t=u(e),this.ctx.fillStyle=t.style,this.ctx.isFillTransparent=0===t.a,this.ctx.fillOpacity=t.a,this.pdf.setFillColor(t.r,t.g,t.b,{a:t.a}),this.pdf.setTextColor(t.r,t.g,t.b,{a:t.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(e){var t=u(e);this.ctx.strokeStyle=t.style,this.ctx.isStrokeTransparent=0===t.a,this.ctx.strokeOpacity=t.a,0===t.a?this.pdf.setDrawColor(255,255,255):(t.a,this.pdf.setDrawColor(t.r,t.g,t.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(e){-1!==["butt","round","square"].indexOf(e)&&(this.ctx.lineCap=e,this.pdf.setLineCap(e))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(e){isNaN(e)||(this.ctx.lineWidth=e,this.pdf.setLineWidth(e))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(e){-1!==["bevel","round","miter"].indexOf(e)&&(this.ctx.lineJoin=e,this.pdf.setLineJoin(e))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(e){isNaN(e)||(this.ctx.miterLimit=e,this.pdf.setMiterLimit(e))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(e){this.ctx.textBaseline=e}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(e){-1!==["right","end","center","left","start"].indexOf(e)&&(this.ctx.textAlign=e)}});var d=null,h=null;Object.defineProperty(this,"fontFaces",{get:function(){return h},set:function(e){d=null,h=e}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(e){var t;if(this.ctx.font=e,null!==(t=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(e))){var r=t[1],n=(t[2],t[3]),a=t[4],o=(t[5],t[6]),i=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(a)[2];a="px"===i?Math.floor(parseFloat(a)*this.pdf.internal.scaleFactor):"em"===i?Math.floor(parseFloat(a)*this.pdf.getFontSize()):Math.floor(parseFloat(a)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(a);var s=function(e){var t,r,n=[],a=e.trim();if(""===a)return lU;if(a in lS)return[lS[a]];for(;""!==a;){switch(r=null,t=(a=lE(a)).charAt(0)){case'"':case"'":r=function(e,t){for(var r=0;r<e.length;){if(e.charAt(r)===t)return[e.substring(0,r),e.substring(r+1)];r+=1}return null}(a.substring(1),t);break;default:r=function(e){var t=e.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return null===t?null:[t[0],e.substring(t[0].length)]}(a)}if(null===r||(n.push(r[0]),""!==(a=lE(r[1]))&&","!==a.charAt(0)))return lU;a=a.replace(/^,/,"")}return n}(o);if(this.fontFaces){var l=function(e,t,r){for(var n=(r=r||{}).defaultFontFamily||"times",a=Object.assign({},lN,r.genericFontFamilies||{}),o=null,i=null,s=0;s<t.length;++s)if(a[(o=lj(t[s])).family]&&(o.family=a[o.family]),e.hasOwnProperty(o.family)){i=e[o.family];break}if(!(i=i||e[n]))throw Error("Could not find a font-family for the rule '"+lF(o)+"' and default family '"+n+"'.");if(i=function(e,t){if(t[e])return t[e];var r=lw[e],n=r<=lw.normal?-1:1,a=lC(t,lv,r,n);if(!a)throw Error("Could not find a matching font-stretch value for "+e);return a}(o.stretch,i),i=function(e,t){if(t[e])return t[e];for(var r=ly[e],n=0;n<r.length;++n)if(t[r[n]])return t[r[n]];throw Error("Could not find a matching font-style for "+e)}(o.style,i),!(i=function(e,t){if(t[e])return t[e];if(400===e&&t[500])return t[500];if(500===e&&t[400])return t[400];var r=lC(t,lk,lB[e],e<400?-1:1);if(!r)throw Error("Could not find a matching font-weight for value "+e);return r}(o.weight,i)))throw Error("Failed to resolve a font for the rule '"+lF(o)+"'.");return i}(function(e,t){if(null===d){var r,n;d=function(e){for(var t={},r=0;r<e.length;++r){var n=lj(e[r]),a=n.family,o=n.stretch,i=n.style,s=n.weight;t[a]=t[a]||{},t[a][o]=t[a][o]||{},t[a][o][i]=t[a][o][i]||{},t[a][o][i][s]=n}return t}((r=e.getFontList(),n=[],Object.keys(r).forEach(function(e){r[e].forEach(function(t){var r=null;switch(t){case"bold":r={family:e,weight:"bold"};break;case"italic":r={family:e,style:"italic"};break;case"bolditalic":r={family:e,weight:"bold",style:"italic"};break;case"":case"normal":r={family:e}}null!==r&&(r.ref={name:e,style:t},n.push(r))})}),n).concat(t))}return d}(this.pdf,this.fontFaces),s.map(function(e){return{family:e,stretch:"normal",weight:n,style:r}}));this.pdf.setFont(l.ref.name,l.ref.style)}else{var A="";("bold"===n||parseInt(n,10)>=700||"bold"===r)&&(A="bold"),"italic"===r&&(A+="italic"),0===A.length&&(A="normal");for(var c="",u={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},h=0;h<s.length;h++){if(void 0!==this.pdf.internal.getFont(s[h],A,{noFallback:!0,disableWarning:!0})){c=s[h];break}if("bolditalic"===A&&void 0!==this.pdf.internal.getFont(s[h],"bold",{noFallback:!0,disableWarning:!0}))c=s[h],A="bold";else if(void 0!==this.pdf.internal.getFont(s[h],"normal",{noFallback:!0,disableWarning:!0})){c=s[h],A="normal";break}}if(""===c){for(var f=0;f<s.length;f++)if(u[s[f]]){c=u[s[f]];break}}c=""===c?"Times":c,this.pdf.setFont(c,A)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(e){this.ctx.globalCompositeOperation=e}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(e){this.ctx.globalAlpha=e}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(e){this.ctx.lineDashOffset=e,Q.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(e){this.ctx.lineDash=e,Q.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(e){this.ctx.ignoreClearRect=!!e}})};d.prototype.setLineDash=function(e){this.lineDash=e},d.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},d.prototype.fill=function(){y.call(this,"fill",!1)},d.prototype.stroke=function(){y.call(this,"stroke",!1)},d.prototype.beginPath=function(){this.path=[{type:"begin"}]},d.prototype.moveTo=function(e,t){if(isNaN(e)||isNaN(t))throw sc.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),Error("Invalid arguments passed to jsPDF.context2d.moveTo");var r=this.ctx.transform.applyToPoint(new i(e,t));this.path.push({type:"mt",x:r.x,y:r.y}),this.ctx.lastPoint=new i(e,t)},d.prototype.closePath=function(){var e=new i(0,0),t=0;for(t=this.path.length-1;-1!==t;t--)if("begin"===this.path[t].type&&"object"===id()(this.path[t+1])&&"number"==typeof this.path[t+1].x){e=new i(this.path[t+1].x,this.path[t+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new i(e.x,e.y)},d.prototype.lineTo=function(e,t){if(isNaN(e)||isNaN(t))throw sc.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),Error("Invalid arguments passed to jsPDF.context2d.lineTo");var r=this.ctx.transform.applyToPoint(new i(e,t));this.path.push({type:"lt",x:r.x,y:r.y}),this.ctx.lastPoint=new i(r.x,r.y)},d.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),y.call(this,null,!0)},d.prototype.quadraticCurveTo=function(e,t,r,n){if(isNaN(r)||isNaN(n)||isNaN(e)||isNaN(t))throw sc.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var a=this.ctx.transform.applyToPoint(new i(r,n)),o=this.ctx.transform.applyToPoint(new i(e,t));this.path.push({type:"qct",x1:o.x,y1:o.y,x:a.x,y:a.y}),this.ctx.lastPoint=new i(a.x,a.y)},d.prototype.bezierCurveTo=function(e,t,r,n,a,o){if(isNaN(a)||isNaN(o)||isNaN(e)||isNaN(t)||isNaN(r)||isNaN(n))throw sc.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var s=this.ctx.transform.applyToPoint(new i(a,o)),l=this.ctx.transform.applyToPoint(new i(e,t)),A=this.ctx.transform.applyToPoint(new i(r,n));this.path.push({type:"bct",x1:l.x,y1:l.y,x2:A.x,y2:A.y,x:s.x,y:s.y}),this.ctx.lastPoint=new i(s.x,s.y)},d.prototype.arc=function(e,t,r,n,a,o){if(isNaN(e)||isNaN(t)||isNaN(r)||isNaN(n)||isNaN(a))throw sc.error("jsPDF.context2d.arc: Invalid arguments",arguments),Error("Invalid arguments passed to jsPDF.context2d.arc");if(o=!!o,!this.ctx.transform.isIdentity){var s=this.ctx.transform.applyToPoint(new i(e,t));e=s.x,t=s.y;var l=this.ctx.transform.applyToPoint(new i(0,r)),A=this.ctx.transform.applyToPoint(new i(0,0));r=Math.sqrt(Math.pow(l.x-A.x,2)+Math.pow(l.y-A.y,2))}Math.abs(a-n)>=2*Math.PI&&(n=0,a=2*Math.PI),this.path.push({type:"arc",x:e,y:t,radius:r,startAngle:n,endAngle:a,counterclockwise:o})},d.prototype.arcTo=function(e,t,r,n,a){throw Error("arcTo not implemented.")},d.prototype.rect=function(e,t,r,n){if(isNaN(e)||isNaN(t)||isNaN(r)||isNaN(n))throw sc.error("jsPDF.context2d.rect: Invalid arguments",arguments),Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(e,t),this.lineTo(e+r,t),this.lineTo(e+r,t+n),this.lineTo(e,t+n),this.lineTo(e,t),this.lineTo(e+r,t),this.lineTo(e,t)},d.prototype.fillRect=function(e,t,r,n){if(isNaN(e)||isNaN(t)||isNaN(r)||isNaN(n))throw sc.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!h.call(this)){var a={};"butt"!==this.lineCap&&(a.lineCap=this.lineCap,this.lineCap="butt"),"miter"!==this.lineJoin&&(a.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(e,t,r,n),this.fill(),a.hasOwnProperty("lineCap")&&(this.lineCap=a.lineCap),a.hasOwnProperty("lineJoin")&&(this.lineJoin=a.lineJoin)}},d.prototype.strokeRect=function(e,t,r,n){if(isNaN(e)||isNaN(t)||isNaN(r)||isNaN(n))throw sc.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),Error("Invalid arguments passed to jsPDF.context2d.strokeRect");f.call(this)||(this.beginPath(),this.rect(e,t,r,n),this.stroke())},d.prototype.clearRect=function(e,t,r,n){if(isNaN(e)||isNaN(t)||isNaN(r)||isNaN(n))throw sc.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(e,t,r,n))},d.prototype.save=function(e){e="boolean"!=typeof e||e;for(var t=this.pdf.internal.getCurrentPageInfo().pageNumber,r=0;r<this.pdf.internal.getNumberOfPages();r++)this.pdf.setPage(r+1),this.pdf.internal.out("q");if(this.pdf.setPage(t),e){this.ctx.fontSize=this.pdf.internal.getFontSize();var n=new c(this.ctx);this.ctxStack.push(this.ctx),this.ctx=n}},d.prototype.restore=function(e){e="boolean"!=typeof e||e;for(var t=this.pdf.internal.getCurrentPageInfo().pageNumber,r=0;r<this.pdf.internal.getNumberOfPages();r++)this.pdf.setPage(r+1),this.pdf.internal.out("Q");this.pdf.setPage(t),e&&0!==this.ctxStack.length&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},d.prototype.toDataURL=function(){throw Error("toDataUrl not implemented.")};var u=function(e){var t,r,n,a;if(!0===e.isCanvasGradient&&(e=e.getColor()),!e)return{r:0,g:0,b:0,a:0,style:e};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(e))t=0,r=0,n=0,a=0;else{var o=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(e);if(null!==o)t=parseInt(o[1]),r=parseInt(o[2]),n=parseInt(o[3]),a=1;else if(null!==(o=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(e)))t=parseInt(o[1]),r=parseInt(o[2]),n=parseInt(o[3]),a=parseFloat(o[4]);else{if(a=1,"string"==typeof e&&"#"!==e.charAt(0)){var i=new sx(e);e=i.ok?i.toHex():"#000000"}4===e.length?(t=e.substring(1,2),t+=t,r=e.substring(2,3),r+=r,n=e.substring(3,4),n+=n):(t=e.substring(1,3),r=e.substring(3,5),n=e.substring(5,7)),t=parseInt(t,16),r=parseInt(r,16),n=parseInt(n,16)}}return{r:t,g:r,b:n,a:a,style:e}},h=function(){return this.ctx.isFillTransparent||0==this.globalAlpha},f=function(){return!!(this.ctx.isStrokeTransparent||0==this.globalAlpha)};d.prototype.fillText=function(e,t,r,n){if(isNaN(t)||isNaN(r)||"string"!=typeof e)throw sc.error("jsPDF.context2d.fillText: Invalid arguments",arguments),Error("Invalid arguments passed to jsPDF.context2d.fillText");if(n=isNaN(n)?void 0:n,!h.call(this)){var a=U(this.ctx.transform.rotation);S.call(this,{text:e,x:t,y:r,scale:this.ctx.transform.scaleX,angle:a,align:this.textAlign,maxWidth:n})}},d.prototype.strokeText=function(e,t,r,n){if(isNaN(t)||isNaN(r)||"string"!=typeof e)throw sc.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!f.call(this)){n=isNaN(n)?void 0:n;var a=U(this.ctx.transform.rotation);S.call(this,{text:e,x:t,y:r,scale:this.ctx.transform.scaleX,renderingMode:"stroke",angle:a,align:this.textAlign,maxWidth:n})}},d.prototype.measureText=function(e){if("string"!=typeof e)throw sc.error("jsPDF.context2d.measureText: Invalid arguments",arguments),Error("Invalid arguments passed to jsPDF.context2d.measureText");var t=this.pdf,r=this.pdf.internal.scaleFactor,n=t.internal.getFontSize(),a=t.getStringUnitWidth(e)*n/t.internal.scaleFactor;return new function(e){var t=(e=e||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return t}}),this}({width:a*=Math.round(96*r/72*1e4)/1e4})},d.prototype.scale=function(e,t){if(isNaN(e)||isNaN(t))throw sc.error("jsPDF.context2d.scale: Invalid arguments",arguments),Error("Invalid arguments passed to jsPDF.context2d.scale");var r=new l(e,0,0,t,0,0);this.ctx.transform=this.ctx.transform.multiply(r)},d.prototype.rotate=function(e){if(isNaN(e))throw sc.error("jsPDF.context2d.rotate: Invalid arguments",arguments),Error("Invalid arguments passed to jsPDF.context2d.rotate");var t=new l(Math.cos(e),Math.sin(e),-Math.sin(e),Math.cos(e),0,0);this.ctx.transform=this.ctx.transform.multiply(t)},d.prototype.translate=function(e,t){if(isNaN(e)||isNaN(t))throw sc.error("jsPDF.context2d.translate: Invalid arguments",arguments),Error("Invalid arguments passed to jsPDF.context2d.translate");var r=new l(1,0,0,1,e,t);this.ctx.transform=this.ctx.transform.multiply(r)},d.prototype.transform=function(e,t,r,n,a,o){if(isNaN(e)||isNaN(t)||isNaN(r)||isNaN(n)||isNaN(a)||isNaN(o))throw sc.error("jsPDF.context2d.transform: Invalid arguments",arguments),Error("Invalid arguments passed to jsPDF.context2d.transform");var i=new l(e,t,r,n,a,o);this.ctx.transform=this.ctx.transform.multiply(i)},d.prototype.setTransform=function(e,t,r,n,a,o){e=isNaN(e)?1:e,t=isNaN(t)?0:t,r=isNaN(r)?0:r,n=isNaN(n)?1:n,a=isNaN(a)?0:a,o=isNaN(o)?0:o,this.ctx.transform=new l(e,t,r,n,a,o)};var p=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};d.prototype.drawImage=function(e,t,r,n,a,o,i,A,c){var d=this.pdf.getImageProperties(e),u=1,h=1,f=1,g=1;void 0!==n&&void 0!==A&&(f=A/n,g=c/a,u=d.width/n*A/n,h=d.height/a*c/a),void 0===o&&(o=t,i=r,t=0,r=0),void 0!==n&&void 0===A&&(A=n,c=a),void 0===n&&void 0===A&&(A=d.width,c=d.height);for(var y,w=this.ctx.transform.decompose(),k=U(w.rotate.shx),B=new l,j=(B=(B=(B=B.multiply(w.translate)).multiply(w.skew)).multiply(w.scale)).applyToRectangle(new s(o-t*f,i-r*g,n*u,a*h)),C=m.call(this,j),N=[],S=0;S<C.length;S+=1)-1===N.indexOf(C[S])&&N.push(C[S]);if(b(N),this.autoPaging)for(var F=N[0],E=N[N.length-1],O=F;O<E+1;O++){this.pdf.setPage(O);var P=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],I=1===O?this.posY+this.margin[0]:this.margin[0],L=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],_=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Q=1===O?0:L+(O-2)*_;if(0!==this.ctx.clip_path.length){var T=this.path;y=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=x(y,this.posX+this.margin[3],-Q+I+this.ctx.prevPageLastElemOffset),v.call(this,"fill",!0),this.path=T}var D=JSON.parse(JSON.stringify(j));D=x([D],this.posX+this.margin[3],-Q+I+this.ctx.prevPageLastElemOffset)[0];var M=(O>F||O<E)&&p.call(this);M&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],P,_,null).clip().discardPath()),this.pdf.addImage(e,"JPEG",D.x,D.y,D.w,D.h,null,null,k),M&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(e,"JPEG",j.x,j.y,j.w,j.h,null,null,k)};var m=function(e,t,r){var n=[];t=t||this.pdf.internal.pageSize.width,r=r||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var a=this.posY+this.ctx.prevPageLastElemOffset;switch(e.type){default:case"mt":case"lt":n.push(Math.floor((e.y+a)/r)+1);break;case"arc":n.push(Math.floor((e.y+a-e.radius)/r)+1),n.push(Math.floor((e.y+a+e.radius)/r)+1);break;case"qct":var o=L(this.ctx.lastPoint.x,this.ctx.lastPoint.y,e.x1,e.y1,e.x,e.y);n.push(Math.floor((o.y+a)/r)+1),n.push(Math.floor((o.y+o.h+a)/r)+1);break;case"bct":var i=_(this.ctx.lastPoint.x,this.ctx.lastPoint.y,e.x1,e.y1,e.x2,e.y2,e.x,e.y);n.push(Math.floor((i.y+a)/r)+1),n.push(Math.floor((i.y+i.h+a)/r)+1);break;case"rect":n.push(Math.floor((e.y+a)/r)+1),n.push(Math.floor((e.y+e.h+a)/r)+1)}for(var s=0;s<n.length;s+=1)for(;this.pdf.internal.getNumberOfPages()<n[s];)g.call(this);return n},g=function(){var e=this.fillStyle,t=this.strokeStyle,r=this.font,n=this.lineCap,a=this.lineWidth,o=this.lineJoin;this.pdf.addPage(),this.fillStyle=e,this.strokeStyle=t,this.font=r,this.lineCap=n,this.lineWidth=a,this.lineJoin=o},x=function(e,t,r){for(var n=0;n<e.length;n++)switch(e[n].type){case"bct":e[n].x2+=t,e[n].y2+=r;case"qct":e[n].x1+=t,e[n].y1+=r;default:e[n].x+=t,e[n].y+=r}return e},b=function(e){return e.sort(function(e,t){return e-t})},y=function(e,t){for(var r,n,a=this.fillStyle,o=this.strokeStyle,i=this.lineCap,s=this.lineWidth,l=Math.abs(s*this.ctx.transform.scaleX),A=this.lineJoin,c=JSON.parse(JSON.stringify(this.path)),d=JSON.parse(JSON.stringify(this.path)),u=[],h=0;h<d.length;h++)if(void 0!==d[h].x)for(var f=m.call(this,d[h]),y=0;y<f.length;y+=1)-1===u.indexOf(f[y])&&u.push(f[y]);for(var w=0;w<u.length;w++)for(;this.pdf.internal.getNumberOfPages()<u[w];)g.call(this);if(b(u),this.autoPaging)for(var k=u[0],B=u[u.length-1],j=k;j<B+1;j++){this.pdf.setPage(j),this.fillStyle=a,this.strokeStyle=o,this.lineCap=i,this.lineWidth=l,this.lineJoin=A;var C=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],N=1===j?this.posY+this.margin[0]:this.margin[0],S=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],F=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],E=1===j?0:S+(j-2)*F;if(0!==this.ctx.clip_path.length){var O=this.path;r=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=x(r,this.posX+this.margin[3],-E+N+this.ctx.prevPageLastElemOffset),v.call(this,e,!0),this.path=O}if(n=JSON.parse(JSON.stringify(c)),this.path=x(n,this.posX+this.margin[3],-E+N+this.ctx.prevPageLastElemOffset),!1===t||0===j){var P=(j>k||j<B)&&p.call(this);P&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],C,F,null).clip().discardPath()),v.call(this,e,t),P&&this.pdf.restoreGraphicsState()}this.lineWidth=s}else this.lineWidth=l,v.call(this,e,t),this.lineWidth=s;this.path=c},v=function(e,t){if(("stroke"!==e||t||!f.call(this))&&("stroke"===e||t||!h.call(this))){for(var r,n,a=[],o=this.path,i=0;i<o.length;i++){var s=o[i];switch(s.type){case"begin":a.push({begin:!0});break;case"close":a.push({close:!0});break;case"mt":a.push({start:s,deltas:[],abs:[]});break;case"lt":var l=a.length;if(o[i-1]&&!isNaN(o[i-1].x)&&(r=[s.x-o[i-1].x,s.y-o[i-1].y],l>0)){for(;l>=0;l--)if(!0!==a[l-1].close&&!0!==a[l-1].begin){a[l-1].deltas.push(r),a[l-1].abs.push(s);break}}break;case"bct":r=[s.x1-o[i-1].x,s.y1-o[i-1].y,s.x2-o[i-1].x,s.y2-o[i-1].y,s.x-o[i-1].x,s.y-o[i-1].y],a[a.length-1].deltas.push(r);break;case"qct":var A=o[i-1].x+2/3*(s.x1-o[i-1].x),c=o[i-1].y+2/3*(s.y1-o[i-1].y),d=s.x+2/3*(s.x1-s.x),u=s.y+2/3*(s.y1-s.y),p=s.x,m=s.y;r=[A-o[i-1].x,c-o[i-1].y,d-o[i-1].x,u-o[i-1].y,p-o[i-1].x,m-o[i-1].y],a[a.length-1].deltas.push(r);break;case"arc":a.push({deltas:[],abs:[],arc:!0}),Array.isArray(a[a.length-1].abs)&&a[a.length-1].abs.push(s)}}n=t?null:"stroke"===e?"stroke":"fill";for(var g=!1,x=0;x<a.length;x++)if(a[x].arc)for(var b=a[x].abs,y=0;y<b.length;y++){var v=b[y];"arc"===v.type?B.call(this,v.x,v.y,v.radius,v.startAngle,v.endAngle,v.counterclockwise,void 0,t,!g):F.call(this,v.x,v.y),g=!0}else if(!0===a[x].close)this.pdf.internal.out("h"),g=!1;else if(!0!==a[x].begin){var w=a[x].start.x,k=a[x].start.y;E.call(this,a[x].deltas,w,k),g=!0}n&&j.call(this,n),t&&C.call(this)}},w=function(e){var t=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,r=t*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return e-r;case"top":return e+t-r;case"hanging":return e+t-2*r;case"middle":return e+t/2-r;default:return e}},k=function(e){return e+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};d.prototype.createLinearGradient=function(){var e=function(){};return e.colorStops=[],e.addColorStop=function(e,t){this.colorStops.push([e,t])},e.getColor=function(){return 0===this.colorStops.length?"#000000":this.colorStops[0][1]},e.isCanvasGradient=!0,e},d.prototype.createPattern=function(){return this.createLinearGradient()},d.prototype.createRadialGradient=function(){return this.createLinearGradient()};var B=function(e,t,r,n,a,o,i,s,l){for(var A=P.call(this,r,n,a,o),c=0;c<A.length;c++){var d=A[c];0===c&&(l?N.call(this,d.x1+e,d.y1+t):F.call(this,d.x1+e,d.y1+t)),O.call(this,e,t,d.x2,d.y2,d.x3,d.y3,d.x4,d.y4)}s?C.call(this):j.call(this,i)},j=function(e){switch(e){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},C=function(){this.pdf.clip(),this.pdf.discardPath()},N=function(e,t){this.pdf.internal.out(r(e)+" "+n(t)+" m")},S=function(e){switch(e.align){case"right":case"end":c="right";break;case"center":c="center";break;default:c="left"}var t=this.pdf.getTextDimensions(e.text),r=w.call(this,e.y),n=k.call(this,r)-t.h,a=this.ctx.transform.applyToPoint(new i(e.x,r)),o=this.ctx.transform.decompose(),A=new l;A=(A=(A=A.multiply(o.translate)).multiply(o.skew)).multiply(o.scale);for(var c,d,u,h,f=this.ctx.transform.applyToRectangle(new s(e.x,r,t.w,t.h)),g=A.applyToRectangle(new s(e.x,n,t.w,t.h)),y=m.call(this,g),B=[],j=0;j<y.length;j+=1)-1===B.indexOf(y[j])&&B.push(y[j]);if(b(B),this.autoPaging)for(var C=B[0],N=B[B.length-1],S=C;S<N+1;S++){this.pdf.setPage(S);var F=1===S?this.posY+this.margin[0]:this.margin[0],E=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],O=this.pdf.internal.pageSize.height-this.margin[2],P=O-this.margin[0],I=this.pdf.internal.pageSize.width-this.margin[1],U=I-this.margin[3],L=1===S?0:E+(S-2)*P;if(0!==this.ctx.clip_path.length){var _=this.path;d=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=x(d,this.posX+this.margin[3],-1*L+F),v.call(this,"fill",!0),this.path=_}var Q=x([JSON.parse(JSON.stringify(g))],this.posX+this.margin[3],-L+F+this.ctx.prevPageLastElemOffset)[0];e.scale>=.01&&(u=this.pdf.internal.getFontSize(),this.pdf.setFontSize(u*e.scale),h=this.lineWidth,this.lineWidth=h*e.scale);var T="text"!==this.autoPaging;if(T||Q.y+Q.h<=O){if(T||Q.y>=F&&Q.x<=I){var D=T?e.text:this.pdf.splitTextToSize(e.text,e.maxWidth||I-Q.x)[0],M=x([JSON.parse(JSON.stringify(f))],this.posX+this.margin[3],-L+F+this.ctx.prevPageLastElemOffset)[0],H=T&&(S>C||S<N)&&p.call(this);H&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],U,P,null).clip().discardPath()),this.pdf.text(D,M.x,M.y,{angle:e.angle,align:c,renderingMode:e.renderingMode}),H&&this.pdf.restoreGraphicsState()}}else Q.y<O&&(this.ctx.prevPageLastElemOffset+=O-Q.y);e.scale>=.01&&(this.pdf.setFontSize(u),this.lineWidth=h)}else e.scale>=.01&&(u=this.pdf.internal.getFontSize(),this.pdf.setFontSize(u*e.scale),h=this.lineWidth,this.lineWidth=h*e.scale),this.pdf.text(e.text,a.x+this.posX,a.y+this.posY,{angle:e.angle,align:c,renderingMode:e.renderingMode,maxWidth:e.maxWidth}),e.scale>=.01&&(this.pdf.setFontSize(u),this.lineWidth=h)},F=function(e,t,a,o){a=a||0,o=o||0,this.pdf.internal.out(r(e+a)+" "+n(t+o)+" l")},E=function(e,t,r){return this.pdf.lines(e,t,r,null,null)},O=function(e,r,n,i,s,l,A,c){this.pdf.internal.out([t(a(n+e)),t(o(i+r)),t(a(s+e)),t(o(l+r)),t(a(A+e)),t(o(c+r)),"c"].join(" "))},P=function(e,t,r,n){for(var a=2*Math.PI,o=Math.PI/2;t>r;)t-=a;var i=Math.abs(r-t);i<a&&n&&(i=a-i);for(var s=[],l=n?-1:1,A=t;i>1e-5;){var c=A+l*Math.min(i,o);s.push(I.call(this,e,A,c)),i-=Math.abs(c-A),A=c}return s},I=function(e,t,r){var n=(r-t)/2,a=e*Math.cos(n),o=e*Math.sin(n),i=-o,s=a*a+i*i,l=s+a*a+i*o,A=4/3*(Math.sqrt(2*s*l)-l)/(a*o-i*a),c=a-A*i,d=i+A*a,u=-d,h=n+t,f=Math.cos(h),p=Math.sin(h);return{x1:e*Math.cos(t),y1:e*Math.sin(t),x2:c*f-d*p,y2:c*p+d*f,x3:c*f-u*p,y3:c*p+u*f,x4:e*Math.cos(r),y4:e*Math.sin(r)}},U=function(e){return 180*e/Math.PI},L=function(e,t,r,n,a,o){var i=e+.5*(r-e),l=t+.5*(n-t),A=a+.5*(r-a),c=o+.5*(n-o),d=Math.min(e,a,i,A),u=Math.min(t,o,l,c);return new s(d,u,Math.max(e,a,i,A)-d,Math.max(t,o,l,c)-u)},_=function(e,t,r,n,a,o,i,l){var A,c,d,u,h,f,p,m,g,x,b,y,v,w,k=r-e,B=n-t,j=a-r,C=o-n,N=i-a,S=l-o;for(c=0;c<41;c++)g=(p=(d=e+(A=c/40)*k)+A*((h=r+A*j)-d))+A*(h+A*(a+A*N-h)-p),x=(m=(u=t+A*B)+A*((f=n+A*C)-u))+A*(f+A*(o+A*S-f)-m),0==c?(b=g,y=x,v=g,w=x):(b=Math.min(b,g),y=Math.min(y,x),v=Math.max(v,g),w=Math.max(w,x));return new s(Math.round(b),Math.round(y),Math.round(v-b),Math.round(w-y))},Q=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var e=JSON.stringify({lineDash:this.ctx.lineDash,lineDashOffset:this.ctx.lineDashOffset});this.prevLineDash!==e&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=e)}}})(sM.API),function(e){var t=function(e){var t,r,n,a,o,i,s,l,A,c;for(/[^\x00-\xFF]/.test(e),r=[],n=0,a=(e+=t="\0\0\0\0".slice(e.length%4||4)).length;a>n;n+=4)0!==(o=(e.charCodeAt(n)<<24)+(e.charCodeAt(n+1)<<16)+(e.charCodeAt(n+2)<<8)+e.charCodeAt(n+3))?(i=(o=((o=((o=((o=(o-(c=o%85))/85)-(A=o%85))/85)-(l=o%85))/85)-(s=o%85))/85)%85,r.push(i+33,s+33,l+33,A+33,c+33)):r.push(122);return function(e,t){for(var r=t;r>0;r--)e.pop()}(r,t.length),String.fromCharCode.apply(String,r)+"~>"},r=function(e){var t,r,n,a,o,i=String,s="length",l="charCodeAt",A="slice",c="replace";for(e[A](-2),e=e[A](0,-2)[c](/\s/g,"")[c]("z","!!!!!"),n=[],a=0,o=(e+=t="uuuuu"[A](e[s]%5||5))[s];o>a;a+=5)r=52200625*(e[l](a)-33)+614125*(e[l](a+1)-33)+7225*(e[l](a+2)-33)+85*(e[l](a+3)-33)+(e[l](a+4)-33),n.push(255&r>>24,255&r>>16,255&r>>8,255&r);return function(e,t){for(var r=t;r>0;r--)e.pop()}(n,t[s]),i.fromCharCode.apply(i,n)},n=function(e){var t=new RegExp(/^([0-9A-Fa-f]{2})+$/);if(-1!==(e=e.replace(/\s/g,"")).indexOf(">")&&(e=e.substr(0,e.indexOf(">"))),e.length%2&&(e+="0"),!1===t.test(e))return"";for(var r="",n=0;n<e.length;n+=2)r+=String.fromCharCode("0x"+(e[n]+e[n+1]));return r},a=function(e){for(var t=new Uint8Array(e.length),r=e.length;r--;)t[r]=e.charCodeAt(r);return e=(t=si(t)).reduce(function(e,t){return e+String.fromCharCode(t)},"")};e.processDataByFilters=function(e,o){var i=0,s=e||"",l=[];for("string"==typeof(o=o||[])&&(o=[o]),i=0;i<o.length;i+=1)switch(o[i]){case"ASCII85Decode":case"/ASCII85Decode":s=r(s),l.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":s=t(s),l.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":s=n(s),l.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":s=s.split("").map(function(e){return("0"+e.charCodeAt().toString(16)).slice(-2)}).join("")+">",l.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":s=a(s),l.push("/FlateDecode");break;default:throw Error('The filter: "'+o[i]+'" is not implemented')}return{data:s,reverseChain:l.reverse().join(" ")}}}(sM.API),function(e){e.loadFile=function(e,t,r){return function(e,t,r){t=!1!==t,r="function"==typeof r?r:function(){};var n=void 0;try{n=function(e,t,r){var n=new XMLHttpRequest,a=0,o=function(e){var t=e.length,r=[],n=String.fromCharCode;for(a=0;a<t;a+=1)r.push(n(255&e.charCodeAt(a)));return r.join("")};if(n.open("GET",e,!t),n.overrideMimeType("text/plain; charset=x-user-defined"),!1===t&&(n.onload=function(){200===n.status?r(o(this.responseText)):r(void 0)}),n.send(null),t&&200===n.status)return o(n.responseText)}(e,t,r)}catch(e){}return n}(e,t,r)},e.loadImageFile=e.loadFile}(sM.API),function(e){function t(){return(sl.html2canvas?Promise.resolve(sl.html2canvas):Promise.resolve().then(r.bind(r,39642))).catch(function(e){return Promise.reject(Error("Could not load html2canvas: "+e))}).then(function(e){return e.default?e.default:e})}function n(){return(sl.DOMPurify?Promise.resolve(sl.DOMPurify):r.e(785).then(r.bind(r,31785))).catch(function(e){return Promise.reject(Error("Could not load dompurify: "+e))}).then(function(e){return e.default?e.default:e})}var a=function(e){var t=id()(e);return"undefined"===t?"undefined":"string"===t||e instanceof String?"string":"number"===t||e instanceof Number?"number":"function"===t||e instanceof Function?"function":e&&e.constructor===Array?"array":e&&1===e.nodeType?"element":"object"===t?"object":"unknown"},o=function(e,t){var r=document.createElement(e);for(var n in t.className&&(r.className=t.className),t.innerHTML&&t.dompurify&&(r.innerHTML=t.dompurify.sanitize(t.innerHTML)),t.style)r.style[n]=t.style[n];return r},i=function e(t){var r=Object.assign(e.convert(Promise.resolve()),JSON.parse(JSON.stringify(e.template))),n=e.convert(Promise.resolve(),r);return(n=n.setProgress(1,e,1,[e])).set(t)};(i.prototype=Object.create(Promise.prototype)).constructor=i,i.convert=function(e,t){return e.__proto__=t||i.prototype,e},i.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},i.prototype.from=function(e,t){return this.then(function(){switch(t=t||function(e){switch(a(e)){case"string":return"string";case"element":return"canvas"===e.nodeName.toLowerCase()?"canvas":"element";default:return"unknown"}}(e)){case"string":return this.then(n).then(function(t){return this.set({src:o("div",{innerHTML:e,dompurify:t})})});case"element":return this.set({src:e});case"canvas":return this.set({canvas:e});case"img":return this.set({img:e});default:return this.error("Unknown source type.")}})},i.prototype.to=function(e){switch(e){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},i.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var e={position:"relative",display:"inline-block",width:("number"!=typeof this.opt.width||isNaN(this.opt.width)||"number"!=typeof this.opt.windowWidth||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},t=function e(t,r){for(var n=3===t.nodeType?document.createTextNode(t.nodeValue):t.cloneNode(!1),a=t.firstChild;a;a=a.nextSibling)!0!==r&&1===a.nodeType&&"SCRIPT"===a.nodeName||n.appendChild(e(a,r));return 1===t.nodeType&&("CANVAS"===t.nodeName?(n.width=t.width,n.height=t.height,n.getContext("2d").drawImage(t,0,0)):"TEXTAREA"!==t.nodeName&&"SELECT"!==t.nodeName||(n.value=t.value),n.addEventListener("load",function(){n.scrollTop=t.scrollTop,n.scrollLeft=t.scrollLeft},!0)),n}(this.prop.src,this.opt.html2canvas.javascriptEnabled);"BODY"===t.tagName&&(e.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=o("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=o("div",{className:"html2pdf__container",style:e}),this.prop.container.appendChild(t),this.prop.container.firstChild.appendChild(o("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},i.prototype.toCanvas=function(){var e=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(e).then(t).then(function(e){var t=Object.assign({},this.opt.html2canvas);return delete t.onrendered,e(this.prop.container,t)}).then(function(e){(this.opt.html2canvas.onrendered||function(){})(e),this.prop.canvas=e,document.body.removeChild(this.prop.overlay)})},i.prototype.toContext2d=function(){var e=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(e).then(t).then(function(e){var t=this.opt.jsPDF,r=this.opt.fontFaces,n=Object.assign({async:!0,allowTaint:!0,scale:"number"!=typeof this.opt.width||isNaN(this.opt.width)||"number"!=typeof this.opt.windowWidth||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete n.onrendered,t.context2d.autoPaging=void 0===this.opt.autoPaging||this.opt.autoPaging,t.context2d.posX=this.opt.x,t.context2d.posY=this.opt.y,t.context2d.margin=this.opt.margin,t.context2d.fontFaces=r,r)for(var a=0;a<r.length;++a){var o=r[a],i=o.src.find(function(e){return"truetype"===e.format});i&&t.addFont(i.url,o.ref.name,o.ref.style)}return n.windowHeight=n.windowHeight||0,n.windowHeight=0==n.windowHeight?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):n.windowHeight,t.context2d.save(!0),e(this.prop.container,n)}).then(function(e){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(e),this.prop.canvas=e,document.body.removeChild(this.prop.overlay)})},i.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var e=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=e})},i.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},i.prototype.output=function(e,t,r){return"img"===(r=r||"pdf").toLowerCase()||"image"===r.toLowerCase()?this.outputImg(e,t):this.outputPdf(e,t)},i.prototype.outputPdf=function(e,t){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(e,t)})},i.prototype.outputImg=function(e){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(e){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+e+'" is not supported.'}})},i.prototype.save=function(e){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(e?{filename:e}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},i.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},i.prototype.set=function(e){if("object"!==a(e))return this;var t=Object.keys(e||{}).map(function(t){if(t in i.template.prop)return function(){this.prop[t]=e[t]};switch(t){case"margin":return this.setMargin.bind(this,e.margin);case"jsPDF":return function(){return this.opt.jsPDF=e.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,e.pageSize);default:return function(){this.opt[t]=e[t]}}},this);return this.then(function(){return this.thenList(t)})},i.prototype.get=function(e,t){return this.then(function(){var r=e in i.template.prop?this.prop[e]:this.opt[e];return t?t(r):r})},i.prototype.setMargin=function(e){return this.then(function(){switch(a(e)){case"number":e=[e,e,e,e];case"array":if(2===e.length&&(e=[e[0],e[1],e[0],e[1]]),4===e.length)break;default:return this.error("Invalid margin array.")}this.opt.margin=e}).then(this.setPageSize)},i.prototype.setPageSize=function(e){function t(e,t){return Math.floor(e*t/72*96)}return this.then(function(){(e=e||sM.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(e.inner={width:e.width-this.opt.margin[1]-this.opt.margin[3],height:e.height-this.opt.margin[0]-this.opt.margin[2]},e.inner.px={width:t(e.inner.width,e.k),height:t(e.inner.height,e.k)},e.inner.ratio=e.inner.height/e.inner.width),this.prop.pageSize=e})},i.prototype.setProgress=function(e,t,r,n){return null!=e&&(this.progress.val=e),null!=t&&(this.progress.state=t),null!=r&&(this.progress.n=r),null!=n&&(this.progress.stack=n),this.progress.ratio=this.progress.val/this.progress.state,this},i.prototype.updateProgress=function(e,t,r,n){return this.setProgress(e?this.progress.val+e:null,t||null,r?this.progress.n+r:null,n?this.progress.stack.concat(n):null)},i.prototype.then=function(e,t){var r=this;return this.thenCore(e,t,function(e,t){return r.updateProgress(null,null,1,[e]),Promise.prototype.then.call(this,function(t){return r.updateProgress(null,e),t}).then(e,t).then(function(e){return r.updateProgress(1),e})})},i.prototype.thenCore=function(e,t,r){r=r||Promise.prototype.then,e&&(e=e.bind(this)),t&&(t=t.bind(this));var n=-1!==Promise.toString().indexOf("[native code]")&&"Promise"===Promise.name?this:i.convert(Object.assign({},this),Promise.prototype),a=r.call(n,e,t);return i.convert(a,this.__proto__)},i.prototype.thenExternal=function(e,t){return Promise.prototype.then.call(this,e,t)},i.prototype.thenList=function(e){var t=this;return e.forEach(function(e){t=t.thenCore(e)}),t},i.prototype.catch=function(e){e&&(e=e.bind(this));var t=Promise.prototype.catch.call(this,e);return i.convert(t,this)},i.prototype.catchExternal=function(e){return Promise.prototype.catch.call(this,e)},i.prototype.error=function(e){return this.then(function(){throw Error(e)})},i.prototype.using=i.prototype.set,i.prototype.saveAs=i.prototype.save,i.prototype.export=i.prototype.output,i.prototype.run=i.prototype.then,sM.getPageSize=function(e,t,r){if("object"===id()(e)){var n=e;e=n.orientation,t=n.unit||t,r=n.format||r}t=t||"mm",r=r||"a4",e=(""+(e||"P")).toLowerCase();var a,o=(""+r).toLowerCase(),i={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(t){case"pt":a=1;break;case"mm":a=72/25.4;break;case"cm":a=72/2.54;break;case"in":a=72;break;case"px":a=.75;break;case"pc":case"em":a=12;break;case"ex":a=6;break;default:throw"Invalid unit: "+t}var s,l=0,A=0;if(i.hasOwnProperty(o))l=i[o][1]/a,A=i[o][0]/a;else try{l=r[1],A=r[0]}catch(e){throw Error("Invalid format: "+r)}if("p"===e||"portrait"===e)e="p",A>l&&(s=A,A=l,l=s);else{if("l"!==e&&"landscape"!==e)throw"Invalid orientation: "+e;e="l",l>A&&(s=A,A=l,l=s)}return{width:A,height:l,unit:t,k:a,orientation:e}},e.html=function(e,t){(t=t||{}).callback=t.callback||function(){},t.html2canvas=t.html2canvas||{},t.html2canvas.canvas=t.html2canvas.canvas||this.canvas,t.jsPDF=t.jsPDF||this,t.fontFaces=t.fontFaces?t.fontFaces.map(lj):null;var r=new i(t);return t.worker?r:r.from(e).doCallback()}}(sM.API),sM.API.addJS=function(e){return lI=e,this.internal.events.subscribe("postPutResources",function(){lO=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(lO+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),lP=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+lI+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){void 0!==lO&&void 0!==lP&&this.internal.out("/Names <</JavaScript "+lO+" 0 R>>")}),this},function(e){var t;e.events.push(["postPutResources",function(){var e=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var r=this.outline.render().split(/\r\n/),n=0;n<r.length;n++){var a=r[n],o=e.exec(a);if(null!=o){var i=o[1];this.internal.newObjectDeferredBegin(i,!1)}this.internal.write(a)}if(this.outline.createNamedDestinations){var s=this.internal.pages.length,l=[];for(n=0;n<s;n++){var A=this.internal.newObject();l.push(A);var c=this.internal.getPageInfo(n+1);this.internal.write("<< /D["+c.objId+" 0 R /XYZ null null null]>> endobj")}var d=this.internal.newObject();for(this.internal.write("<< /Names [ "),n=0;n<l.length;n++)this.internal.write("(page_"+(n+1)+")"+l[n]+" 0 R");this.internal.write(" ] >>","endobj"),t=this.internal.newObject(),this.internal.write("<< /Dests "+d+" 0 R"),this.internal.write(">>","endobj")}}]),e.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+t+" 0 R"))}]),e.events.push(["initialized",function(){var e=this;e.outline={createNamedDestinations:!1,root:{children:[]}},e.outline.add=function(e,t,r){var n={title:t,options:r,children:[]};return null==e&&(e=this.root),e.children.push(n),n},e.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=e,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},e.outline.genIds_r=function(t){t.id=e.internal.newObjectDeferred();for(var r=0;r<t.children.length;r++)this.genIds_r(t.children[r])},e.outline.renderRoot=function(e){this.objStart(e),this.line("/Type /Outlines"),e.children.length>0&&(this.line("/First "+this.makeRef(e.children[0])),this.line("/Last "+this.makeRef(e.children[e.children.length-1]))),this.line("/Count "+this.count_r({count:0},e)),this.objEnd()},e.outline.renderItems=function(t){for(var r=this.ctx.pdf.internal.getVerticalCoordinateString,n=0;n<t.children.length;n++){var a=t.children[n];this.objStart(a),this.line("/Title "+this.makeString(a.title)),this.line("/Parent "+this.makeRef(t)),n>0&&this.line("/Prev "+this.makeRef(t.children[n-1])),n<t.children.length-1&&this.line("/Next "+this.makeRef(t.children[n+1])),a.children.length>0&&(this.line("/First "+this.makeRef(a.children[0])),this.line("/Last "+this.makeRef(a.children[a.children.length-1])));var o=this.count=this.count_r({count:0},a);if(o>0&&this.line("/Count "+o),a.options&&a.options.pageNumber){var i=e.internal.getPageInfo(a.options.pageNumber);this.line("/Dest ["+i.objId+" 0 R /XYZ 0 "+r(0)+" 0]")}this.objEnd()}for(var s=0;s<t.children.length;s++)this.renderItems(t.children[s])},e.outline.line=function(e){this.ctx.val+=e+"\r\n"},e.outline.makeRef=function(e){return e.id+" 0 R"},e.outline.makeString=function(t){return"("+e.internal.pdfEscape(t)+")"},e.outline.objStart=function(e){this.ctx.val+="\r\n"+e.id+" 0 obj\r\n<<\r\n"},e.outline.objEnd=function(){this.ctx.val+=">> \r\nendobj\r\n"},e.outline.count_r=function(e,t){for(var r=0;r<t.children.length;r++)e.count++,this.count_r(e,t.children[r]);return e.count}}])}(sM.API),function(e){var t=[192,193,194,195,196,197,198,199];e.processJPEG=function(e,r,n,a,o,i){var s,l=this.decode.DCT_DECODE,A=null;if("string"==typeof e||this.__addimage__.isArrayBuffer(e)||this.__addimage__.isArrayBufferView(e)){switch(e=o||e,e=this.__addimage__.isArrayBuffer(e)?new Uint8Array(e):e,(s=function(e){for(var r,n=256*e.charCodeAt(4)+e.charCodeAt(5),a=e.length,o={width:0,height:0,numcomponents:1},i=4;i<a;i+=2){if(i+=n,-1!==t.indexOf(e.charCodeAt(i+1))){r=256*e.charCodeAt(i+5)+e.charCodeAt(i+6),o={width:256*e.charCodeAt(i+7)+e.charCodeAt(i+8),height:r,numcomponents:e.charCodeAt(i+9)};break}n=256*e.charCodeAt(i+2)+e.charCodeAt(i+3)}return o}(e=this.__addimage__.isArrayBufferView(e)?this.__addimage__.arrayBufferToBinaryString(e):e)).numcomponents){case 1:i=this.color_spaces.DEVICE_GRAY;break;case 4:i=this.color_spaces.DEVICE_CMYK;break;case 3:i=this.color_spaces.DEVICE_RGB}A={data:e,width:s.width,height:s.height,colorSpace:i,bitsPerComponent:8,filter:l,index:r,alias:n}}return A}}(sM.API);var lL,l_,lQ,lT,lD,lM=function(){function e(e){var t,r,n,a,o,i,s,l,A,c,d,u,h,f;for(this.data=e,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},i=null;;){switch(t=this.readUInt32(),A=(function(){var e,t;for(t=[],e=0;e<4;++e)t.push(String.fromCharCode(this.data[this.pos++]));return t}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(t);break;case"fcTL":i&&this.animation.frames.push(i),this.pos+=4,i={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},o=this.readUInt16(),a=this.readUInt16()||100,i.delay=1e3*o/a,i.disposeOp=this.data[this.pos++],i.blendOp=this.data[this.pos++],i.data=[];break;case"IDAT":case"fdAT":for("fdAT"===A&&(this.pos+=4,t-=4),e=(null!=i?i.data:void 0)||this.imgData,u=0;0<=t?u<t:u>t;0<=t?++u:--u)e.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(n=this.palette.length/3,this.transparency.indexed=this.read(t),this.transparency.indexed.length>n)throw Error("More transparent colors than palette size");if((c=n-this.transparency.indexed.length)>0)for(h=0;0<=c?h<c:h>c;0<=c?++h:--h)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(t)[0];break;case 2:this.transparency.rgb=this.read(t)}break;case"tEXt":s=(d=this.read(t)).indexOf(0),l=String.fromCharCode.apply(String,d.slice(0,s)),this.text[l]=String.fromCharCode.apply(String,d.slice(s+1));break;case"IEND":return i&&this.animation.frames.push(i),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=4===(f=this.colorType)||6===f,r=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*r,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=t}if(this.pos+=4,this.pos>this.data.length)throw Error("Incomplete or corrupt PNG file")}}e.prototype.read=function(e){var t,r;for(r=[],t=0;0<=e?t<e:t>e;0<=e?++t:--t)r.push(this.data[this.pos++]);return r},e.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},e.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},e.prototype.decodePixels=function(e){var t,r,n,a,o=this.pixelBitlength/8,i=new Uint8Array(this.width*this.height*o),s=0,l=this;if(null==e&&(e=this.imgData),0===e.length)return new Uint8Array(0);function A(t,r,n,a){var A,c,d,u,h,f,p,m,g,x,b,y,v,w,k,B,j,C,N,S,F,E=Math.ceil((l.width-t)/n),O=Math.ceil((l.height-r)/a),P=l.width==E&&l.height==O;for(w=o*E,y=P?i:new Uint8Array(w*O),f=e.length,v=0,c=0;v<O&&s<f;){switch(e[s++]){case 0:for(u=j=0;j<w;u=j+=1)y[c++]=e[s++];break;case 1:for(u=C=0;C<w;u=C+=1)A=e[s++],h=u<o?0:y[c-o],y[c++]=(A+h)%256;break;case 2:for(u=N=0;N<w;u=N+=1)A=e[s++],d=(u-u%o)/o,k=v&&y[(v-1)*w+d*o+u%o],y[c++]=(k+A)%256;break;case 3:for(u=S=0;S<w;u=S+=1)A=e[s++],d=(u-u%o)/o,h=u<o?0:y[c-o],k=v&&y[(v-1)*w+d*o+u%o],y[c++]=(A+Math.floor((h+k)/2))%256;break;case 4:for(u=F=0;F<w;u=F+=1)A=e[s++],d=(u-u%o)/o,h=u<o?0:y[c-o],0===v?k=B=0:(k=y[(v-1)*w+d*o+u%o],B=d&&y[(v-1)*w+(d-1)*o+u%o]),m=Math.abs((p=h+k-B)-h),x=Math.abs(p-k),b=Math.abs(p-B),g=m<=x&&m<=b?h:x<=b?k:B,y[c++]=(A+g)%256;break;default:throw Error("Invalid filter algorithm: "+e[s-1])}if(!P){var I=((r+v*a)*l.width+t)*o,U=v*w;for(u=0;u<E;u+=1){for(var L=0;L<o;L+=1)i[I++]=y[U++];I+=(n-1)*o}}v++}}return e=iV((n=e).subarray((r=void 0,((15&(t=n)[0])!=8||t[0]>>4>7||(t[0]<<8|t[1])%31)&&iK(6,"invalid zlib data"),(t[1]>>5&1)==+!r&&iK(6,"invalid zlib data: "+(32&t[1]?"need":"unexpected")+" dictionary"),(t[1]>>3&4)+2),-4),{i:2},a&&a.out,a&&a.dictionary),1==l.interlaceMethod?(A(0,0,8,8),A(4,0,8,8),A(0,4,4,8),A(2,0,4,4),A(0,2,2,4),A(1,0,2,2),A(0,1,1,2)):A(0,0,1,1),i},e.prototype.decodePalette=function(){var e,t,r,n,a,o,i,s,l;for(r=this.palette,a=new Uint8Array(((o=this.transparency.indexed||[]).length||0)+r.length),n=0,e=0,t=i=0,s=r.length;i<s;t=i+=3)a[n++]=r[t],a[n++]=r[t+1],a[n++]=r[t+2],a[n++]=null!=(l=o[e++])?l:255;return a},e.prototype.copyToImageData=function(e,t){var r,n,a,o,i,s,l,A,c,d,u;if(n=this.colors,c=null,r=this.hasAlphaChannel,this.palette.length&&(c=null!=(u=this._decodedPalette)?u:this._decodedPalette=this.decodePalette(),n=4,r=!0),A=(a=e.data||e).length,i=c||t,o=s=0,1===n)for(;o<A;)l=c?4*t[o/4]:s,d=i[l++],a[o++]=d,a[o++]=d,a[o++]=d,a[o++]=r?i[l++]:255,s=l;else for(;o<A;)l=c?4*t[o/4]:s,a[o++]=i[l++],a[o++]=i[l++],a[o++]=i[l++],a[o++]=r?i[l++]:255,s=l},e.prototype.decode=function(){var e;return e=new Uint8Array(this.width*this.height*4),this.copyToImageData(e,this.decodePixels()),e};var t,r,n,a=function(){if("[object Window]"===Object.prototype.toString.call(sl)){try{n=(r=sl.document.createElement("canvas")).getContext("2d")}catch(e){return!1}return!0}return!1};return a(),t=function(e){var t;if(!0===a())return n.width=e.width,n.height=e.height,n.clearRect(0,0,e.width,e.height),n.putImageData(e,0,0),(t=new Image).src=r.toDataURL(),t;throw Error("This method requires a Browser with Canvas-capability.")},e.prototype.decodeFrames=function(e){var r,n,a,o,i,s,l,A;if(this.animation){for(A=[],n=i=0,s=(l=this.animation.frames).length;i<s;n=++i)r=l[n],a=e.createImageData(r.width,r.height),o=this.decodePixels(new Uint8Array(r.data)),this.copyToImageData(a,o),r.imageData=a,A.push(r.image=t(a));return A}},e.prototype.renderFrame=function(e,t){var r,n,a;return r=(n=this.animation.frames)[t],a=n[t-1],0===t&&e.clearRect(0,0,this.width,this.height),1===(null!=a?a.disposeOp:void 0)?e.clearRect(a.xOffset,a.yOffset,a.width,a.height):2===(null!=a?a.disposeOp:void 0)&&e.putImageData(a.imageData,a.xOffset,a.yOffset),0===r.blendOp&&e.clearRect(r.xOffset,r.yOffset,r.width,r.height),e.drawImage(r.image,r.xOffset,r.yOffset)},e.prototype.animate=function(e){var t,r,n,a,o,i,s=this;return r=0,a=(i=this.animation).numFrames,n=i.frames,o=i.numPlays,(t=function(){var i,l;if(l=n[i=r++%a],s.renderFrame(e,i),a>1&&r/a<o)return s.animation._timeout=setTimeout(t,l.delay)})()},e.prototype.stopAnimation=function(){var e;return clearTimeout(null!=(e=this.animation)?e._timeout:void 0)},e.prototype.render=function(e){var t,r;return e._png&&e._png.stopAnimation(),e._png=this,e.width=this.width,e.height=this.height,t=e.getContext("2d"),this.animation?(this.decodeFrames(t),this.animate(t)):(r=t.createImageData(this.width,this.height),this.copyToImageData(r,this.decodePixels()),t.putImageData(r,0,0))},e}();function lH(e){var t=0;if(71!==e[t++]||73!==e[t++]||70!==e[t++]||56!==e[t++]||56!=(e[t++]+1&253)||97!==e[t++])throw Error("Invalid GIF 87a/89a header.");var r=e[t++]|e[t++]<<8,n=e[t++]|e[t++]<<8,a=e[t++],o=1<<(7&a)+1;e[t++],e[t++];var i=null,s=null;a>>7&&(i=t,s=o,t+=3*o);var l=!0,A=[],c=0,d=null,u=0,h=null;for(this.width=r,this.height=n;l&&t<e.length;)switch(e[t++]){case 33:switch(e[t++]){case 255:if(11!==e[t]||78==e[t+1]&&69==e[t+2]&&84==e[t+3]&&83==e[t+4]&&67==e[t+5]&&65==e[t+6]&&80==e[t+7]&&69==e[t+8]&&50==e[t+9]&&46==e[t+10]&&48==e[t+11]&&3==e[t+12]&&1==e[t+13]&&0==e[t+16])t+=14,h=e[t++]|e[t++]<<8,t++;else for(t+=12;;){if(!((p=e[t++])>=0))throw Error("Invalid block size");if(0===p)break;t+=p}break;case 249:if(4!==e[t++]||0!==e[t+4])throw Error("Invalid graphics extension block.");var f=e[t++];c=e[t++]|e[t++]<<8,d=e[t++],0==(1&f)&&(d=null),u=f>>2&7,t++;break;case 254:for(;;){if(!((p=e[t++])>=0))throw Error("Invalid block size");if(0===p)break;t+=p}break;default:throw Error("Unknown graphic control label: 0x"+e[t-1].toString(16))}break;case 44:var p,m=e[t++]|e[t++]<<8,g=e[t++]|e[t++]<<8,x=e[t++]|e[t++]<<8,b=e[t++]|e[t++]<<8,y=e[t++],v=y>>6&1,w=1<<(7&y)+1,k=i,B=s,j=!1;y>>7&&(j=!0,k=t,B=w,t+=3*w);var C=t;for(t++;;){if(!((p=e[t++])>=0))throw Error("Invalid block size");if(0===p)break;t+=p}A.push({x:m,y:g,width:x,height:b,has_local_palette:j,palette_offset:k,palette_size:B,data_offset:C,data_length:t-C,transparent_index:d,interlaced:!!v,delay:c,disposal:u});break;case 59:l=!1;break;default:throw Error("Unknown gif block: 0x"+e[t-1].toString(16))}this.numFrames=function(){return A.length},this.loopCount=function(){return h},this.frameInfo=function(e){if(e<0||e>=A.length)throw Error("Frame index out of range.");return A[e]},this.decodeAndBlitFrameBGRA=function(t,n){var a=this.frameInfo(t),o=a.width*a.height,i=new Uint8Array(o);lR(e,a.data_offset,i,o);var s=a.palette_offset,l=a.transparent_index;null===l&&(l=256);var A=a.width,c=r-A,d=A,u=4*(a.y*r+a.x),h=4*((a.y+a.height)*r+a.x),f=u,p=4*c;!0===a.interlaced&&(p+=4*r*7);for(var m=8,g=0,x=i.length;g<x;++g){var b=i[g];if(0===d&&(d=A,(f+=p)>=h&&(p=4*c+4*r*(m-1),f=u+(A+c)*(m<<1),m>>=1)),b===l)f+=4;else{var y=e[s+3*b],v=e[s+3*b+1],w=e[s+3*b+2];n[f++]=w,n[f++]=v,n[f++]=y,n[f++]=255}--d}},this.decodeAndBlitFrameRGBA=function(t,n){var a=this.frameInfo(t),o=a.width*a.height,i=new Uint8Array(o);lR(e,a.data_offset,i,o);var s=a.palette_offset,l=a.transparent_index;null===l&&(l=256);var A=a.width,c=r-A,d=A,u=4*(a.y*r+a.x),h=4*((a.y+a.height)*r+a.x),f=u,p=4*c;!0===a.interlaced&&(p+=4*r*7);for(var m=8,g=0,x=i.length;g<x;++g){var b=i[g];if(0===d&&(d=A,(f+=p)>=h&&(p=4*c+4*r*(m-1),f=u+(A+c)*(m<<1),m>>=1)),b===l)f+=4;else{var y=e[s+3*b],v=e[s+3*b+1],w=e[s+3*b+2];n[f++]=y,n[f++]=v,n[f++]=w,n[f++]=255}--d}}}function lR(e,t,r,n){for(var a=e[t++],o=1<<a,i=o+1,s=i+1,l=a+1,A=(1<<l)-1,c=0,d=0,u=0,h=e[t++],f=new Int32Array(4096),p=null;;){for(;c<16&&0!==h;)d|=e[t++]<<c,c+=8,1===h?h=e[t++]:--h;if(c<l)break;var m=d&A;if(d>>=l,c-=l,m!==o){if(m===i)break;for(var g=m<s?m:p,x=0,b=g;b>o;)b=f[b]>>8,++x;var y=b;if(u+x+(g!==m?1:0)>n)return void sc.log("Warning, gif stream longer than expected.");r[u++]=y;var v=u+=x;for(g!==m&&(r[u++]=y),b=g;x--;)b=f[b],r[--v]=255&b,b>>=8;null!==p&&s<4096&&(f[s++]=p<<8|y,s>=A+1&&l<12&&(++l,A=A<<1|1)),p=m}else s=i+1,A=(1<<(l=a+1))-1,p=null}return u!==n&&sc.log("Warning, gif stream shorter than expected."),r}function lK(e){var t,r,n,a,o,i=Math.floor,s=Array(64),l=Array(64),A=Array(64),c=Array(64),d=Array(65535),u=Array(65535),h=Array(64),f=Array(64),p=[],m=0,g=7,x=Array(64),b=Array(64),y=Array(64),v=Array(256),w=Array(2048),k=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],B=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],j=[0,1,2,3,4,5,6,7,8,9,10,11],C=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],N=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],S=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],F=[0,1,2,3,4,5,6,7,8,9,10,11],E=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],O=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function P(e,t){for(var r=0,n=0,a=[],o=1;o<=16;o++){for(var i=1;i<=e[o];i++)a[t[n]]=[],a[t[n]][0]=r,a[t[n]][1]=o,n++,r++;r*=2}return a}function I(e){for(var t=e[0],r=e[1]-1;r>=0;)t&1<<r&&(m|=1<<g),r--,--g<0&&(255==m?(U(255),U(0)):U(m),g=7,m=0)}function U(e){p.push(e)}function L(e){U(e>>8&255),U(255&e)}function _(e,t,r,n,a){for(var o,i=a[0],s=a[240],l=function(e,t){var r,n,a,o,i,s,l,A,c,d,u=0;for(c=0;c<8;++c){r=e[u],n=e[u+1],a=e[u+2],o=e[u+3],i=e[u+4],s=e[u+5],l=e[u+6];var f=r+(A=e[u+7]),p=r-A,m=n+l,g=n-l,x=a+s,b=a-s,y=o+i,v=o-i,w=f+y,k=f-y,B=m+x,j=m-x;e[u]=w+B,e[u+4]=w-B;var C=.707106781*(j+k);e[u+2]=k+C,e[u+6]=k-C;var N=.382683433*((w=v+b)-(j=g+p)),S=.5411961*w+N,F=1.306562965*j+N,E=.707106781*(B=b+g),O=p+E,P=p-E;e[u+5]=P+S,e[u+3]=P-S,e[u+1]=O+F,e[u+7]=O-F,u+=8}for(u=0,c=0;c<8;++c){r=e[u],n=e[u+8],a=e[u+16],o=e[u+24],i=e[u+32],s=e[u+40],l=e[u+48];var I=r+(A=e[u+56]),U=r-A,L=n+l,_=n-l,Q=a+s,T=a-s,D=o+i,M=o-i,H=I+D,R=I-D,K=L+Q,V=L-Q;e[u]=H+K,e[u+32]=H-K;var q=.707106781*(V+R);e[u+16]=R+q,e[u+48]=R-q;var G=.382683433*((H=M+T)-(V=_+U)),z=.5411961*H+G,W=1.306562965*V+G,$=.707106781*(K=T+_),X=U+$,Y=U-$;e[u+40]=Y+z,e[u+24]=Y-z,e[u+8]=X+W,e[u+56]=X-W,u++}for(c=0;c<64;++c)d=e[c]*t[c],h[c]=d>0?d+.5|0:d-.5|0;return h}(e,t),A=0;A<64;++A)f[k[A]]=l[A];var c=f[0]-r;r=f[0],0==c?I(n[0]):(I(n[u[o=32767+c]]),I(d[o]));for(var p=63;p>0&&0==f[p];)p--;if(0==p)return I(i),r;for(var m,g=1;g<=p;){for(var x=g;0==f[g]&&g<=p;)++g;var b=g-x;if(b>=16){m=b>>4;for(var y=1;y<=m;++y)I(s);b&=15}I(a[(b<<4)+u[o=32767+f[g]]]),I(d[o]),g++}return 63!=p&&I(i),r}function Q(e){o!=(e=Math.min(Math.max(e,1),100))&&(function(e){for(var t=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],r=0;r<64;r++){var n=i((t[r]*e+50)/100);n=Math.min(Math.max(n,1),255),s[k[r]]=n}for(var a=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],o=0;o<64;o++){var d=i((a[o]*e+50)/100);d=Math.min(Math.max(d,1),255),l[k[o]]=d}for(var u=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],h=0,f=0;f<8;f++)for(var p=0;p<8;p++)A[h]=1/(s[k[h]]*u[f]*u[p]*8),c[h]=1/(l[k[h]]*u[f]*u[p]*8),h++}(e<50?Math.floor(5e3/e):Math.floor(200-2*e)),o=e)}this.encode=function(e,o){o&&Q(o),p=[],m=0,g=7,L(65496),L(65504),L(16),U(74),U(70),U(73),U(70),U(0),U(1),U(1),U(0),L(1),L(1),U(0),U(0),function(){L(65499),L(132),U(0);for(var e=0;e<64;e++)U(s[e]);U(1);for(var t=0;t<64;t++)U(l[t])}(),h=e.width,f=e.height,L(65472),L(17),U(8),L(f),L(h),U(3),U(1),U(17),U(0),U(2),U(17),U(1),U(3),U(17),U(1),function(){L(65476),L(418),U(0);for(var e=0;e<16;e++)U(B[e+1]);for(var t=0;t<=11;t++)U(j[t]);U(16);for(var r=0;r<16;r++)U(C[r+1]);for(var n=0;n<=161;n++)U(N[n]);U(1);for(var a=0;a<16;a++)U(S[a+1]);for(var o=0;o<=11;o++)U(F[o]);U(17);for(var i=0;i<16;i++)U(E[i+1]);for(var s=0;s<=161;s++)U(O[s])}(),L(65498),L(12),U(3),U(1),U(0),U(2),U(17),U(3),U(17),U(0),U(63),U(0);var i=0,d=0,u=0;m=0,g=7,this.encode.displayName="_encode_";for(var h,f,v,k,P,T,D,M,H,R,K,V=e.data,q=e.width,G=e.height,z=4*q,W=0;W<G;){for(v=0;v<z;){for(D=z*W+v,H=-1,R=0,K=0;K<64;K++)M=D+(R=K>>3)*z+(H=4*(7&K)),W+R>=G&&(M-=z*(W+1+R-G)),v+H>=z&&(M-=v+H-z+4),k=V[M++],P=V[M++],T=V[M++],x[K]=(w[k]+w[P+256>>0]+w[T+512>>0]>>16)-128,b[K]=(w[k+768>>0]+w[P+1024>>0]+w[T+1280>>0]>>16)-128,y[K]=(w[k+1280>>0]+w[P+1536>>0]+w[T+1792>>0]>>16)-128;i=_(x,A,i,t,n),d=_(b,c,d,r,a),u=_(y,c,u,r,a),v+=32}W+=8}if(g>=0){var $=[];$[1]=g+1,$[0]=(1<<g+1)-1,I($)}return L(65497),new Uint8Array(p)},e=e||50,function(){for(var e=String.fromCharCode,t=0;t<256;t++)v[t]=e(t)}(),t=P(B,j),r=P(S,F),n=P(C,N),a=P(E,O),function(){for(var e=1,t=2,r=1;r<=15;r++){for(var n=e;n<t;n++)u[32767+n]=r,d[32767+n]=[],d[32767+n][1]=r,d[32767+n][0]=n;for(var a=-(t-1);a<=-e;a++)u[32767+a]=r,d[32767+a]=[],d[32767+a][1]=r,d[32767+a][0]=t-1+a;e<<=1,t<<=1}}(),function(){for(var e=0;e<256;e++)w[e]=19595*e,w[e+256>>0]=38470*e,w[e+512>>0]=7471*e+32768,w[e+768>>0]=-11059*e,w[e+1024>>0]=-21709*e,w[e+1280>>0]=32768*e+8421375,w[e+1536>>0]=-27439*e,w[e+1792>>0]=-5329*e}(),Q(e)}function lV(e,t){if(this.pos=0,this.buffer=e,this.datav=new DataView(e.buffer),this.is_with_alpha=!!t,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,-1===["BM","BA","CI","CP","IC","PT"].indexOf(this.flag))throw Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function lq(e){function t(e){if(!e)throw Error("assert :P")}function r(e,t,r){for(var n=0;4>n;n++)if(e[t+n]!=r.charCodeAt(n))return!0;return!1}function n(e,t,r,n,a){for(var o=0;o<a;o++)e[t+o]=r[n+o]}function a(e,t,r,n){for(var a=0;a<n;a++)e[t+a]=r}function o(e){return new Int32Array(e)}function i(e,t){for(var r=[],n=0;n<e;n++)r.push(new t);return r}function s(e,t){var r=[];return function e(r,n,a){for(var o=a[n],i=0;i<o&&(r.push(a.length>n+1?[]:new t),!(a.length<n+1));i++)e(r[i],n+1,a)}(r,0,e),r}var l=function(){var e=this;function l(e,t){for(var r=1<<t-1>>>0;e&r;)r>>>=1;return r?(e&r-1)+r:e}function A(e,r,n,a,o){t(!(a%n));do e[r+(a-=n)]=o;while(0<a)}function c(e,r,n,a,i){if(t(2328>=i),512>=i)var s=o(512);else if(null==(s=o(i)))return 0;return function(e,r,n,a,i,s){var c,u,h=r,f=1<<n,p=o(16),m=o(16);for(t(0!=i),t(null!=a),t(null!=e),t(0<n),u=0;u<i;++u){if(15<a[u])return 0;++p[a[u]]}if(p[0]==i)return 0;for(m[1]=0,c=1;15>c;++c){if(p[c]>1<<c)return 0;m[c+1]=m[c]+p[c]}for(u=0;u<i;++u)c=a[u],0<a[u]&&(s[m[c]++]=u);if(1==m[15])return(a=new d).g=0,a.value=s[0],A(e,h,1,f,a),f;var g,x=-1,b=f-1,y=0,v=1,w=1,k=1<<n;for(u=0,c=1,i=2;c<=n;++c,i<<=1){if(v+=w<<=1,0>(w-=p[c]))return 0;for(;0<p[c];--p[c])(a=new d).g=c,a.value=s[u++],A(e,h+y,i,k,a),y=l(y,c)}for(c=n+1,i=2;15>=c;++c,i<<=1){if(v+=w<<=1,0>(w-=p[c]))return 0;for(;0<p[c];--p[c]){if(a=new d,(y&b)!=x){for(h+=k,g=1<<(x=c)-n;15>x&&!(0>=(g-=p[x]));)++x,g<<=1;f+=k=1<<(g=x-n),e[r+(x=y&b)].g=g+n,e[r+x].value=h-r-x}a.g=c-n,a.value=s[u++],A(e,h+(y>>n),i,k,a),y=l(y,c)}}return v!=2*m[15]-1?0:f}(e,r,n,a,i,s)}function d(){this.value=this.g=0}function u(){this.value=this.g=0}function h(){this.G=i(5,d),this.H=o(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=i(rm,u)}function f(e,r,n,a){t(null!=e),t(null!=r),t(2147483648>a),e.Ca=254,e.I=0,e.b=-8,e.Ka=0,e.oa=r,e.pa=n,e.Jd=r,e.Yc=n+a,e.Zc=4<=a?n+a-4+1:n,C(e)}function p(e,t){for(var r=0;0<t--;)r|=S(e,128)<<t;return r}function m(e,t){var r=p(e,t);return N(e)?-r:r}function g(e,r,n,a){var o,i=0;for(t(null!=e),t(null!=r),t(4294967288>a),e.Sb=a,e.Ra=0,e.u=0,e.h=0,4<a&&(a=4),o=0;o<a;++o)i+=r[n+o]<<8*o;e.Ra=i,e.bb=a,e.oa=r,e.pa=n}function x(e){for(;8<=e.u&&e.bb<e.Sb;)e.Ra>>>=8,e.Ra+=e.oa[e.pa+e.bb]<<rb-8>>>0,++e.bb,e.u-=8;k(e)&&(e.h=1,e.u=0)}function b(e,r){if(t(0<=r),!e.h&&r<=rx){var n=w(e)&rg[r];return e.u+=r,x(e),n}return e.h=1,e.u=0}function y(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function v(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function w(e){return e.Ra>>>(e.u&rb-1)>>>0}function k(e){return t(e.bb<=e.Sb),e.h||e.bb==e.Sb&&e.u>rb}function B(e,t){e.u=t,e.h=k(e)}function j(e){e.u>=ry&&(t(e.u>=ry),x(e))}function C(e){t(null!=e&&null!=e.oa),e.pa<e.Zc?(e.I=(e.oa[e.pa++]|e.I<<8)>>>0,e.b+=8):(t(null!=e&&null!=e.oa),e.pa<e.Yc?(e.b+=8,e.I=e.oa[e.pa++]|e.I<<8):e.Ka?e.b=0:(e.I<<=8,e.b+=8,e.Ka=1))}function N(e){return p(e,1)}function S(e,t){var r=e.Ca;0>e.b&&C(e);var n=e.b,a=r*t>>>8,o=(e.I>>>n>a)+0;for(o?(r-=a,e.I-=a+1<<n>>>0):r=a+1,n=r,a=0;256<=n;)a+=8,n>>=8;return n=7^a+rv[n],e.b-=n,e.Ca=(r<<n)-1,o}function F(e,t,r){e[t+0]=r>>24&255,e[t+1]=r>>16&255,e[t+2]=r>>8&255,e[t+3]=r>>0&255}function E(e,t){return e[t+0]<<0|e[t+1]<<8}function O(e,t){return E(e,t)|e[t+2]<<16}function P(e,t){return E(e,t)|E(e,t+2)<<16}function I(e,r){return t(null!=e),t(0<r),e.X=o(1<<r),null==e.X?0:(e.Mb=32-r,e.Xa=r,1)}function U(e,r){t(null!=e),t(null!=r),t(e.Xa==r.Xa),n(r.X,0,e.X,0,1<<r.Xa)}function L(){this.X=[],this.Xa=this.Mb=0}function _(e,r,n,a){t(null!=n),t(null!=a);var o=n[0],i=a[0];return 0==o&&(o=(e*i+r/2)/r),0==i&&(i=(r*o+e/2)/e),0>=o||0>=i?0:(n[0]=o,a[0]=i,1)}function Q(e,t){return e+(1<<t)-1>>>t}function T(e,t){return((4278255360&e)+(4278255360&t)>>>0&4278255360)+((16711935&e)+(16711935&t)>>>0&16711935)>>>0}function D(t,r){e[r]=function(r,n,a,o,i,s,l){var A;for(A=0;A<i;++A){var c=e[t](s[l+A-1],a,o+A);s[l+A]=T(r[n+A],c)}}}function M(){this.ud=this.hd=this.jd=0}function H(e,t){return((4278124286&(e^t))>>>1)+(e&t)>>>0}function R(e){return 0<=e&&256>e?e:0>e?0:255<e?255:void 0}function K(e,t){return R(e+(e-t+.5>>1))}function V(e,t,r){return Math.abs(t-r)-Math.abs(e-r)}function q(e,t,r,n,a,o,i){for(n=o[i-1],r=0;r<a;++r)o[i+r]=n=T(e[t+r],n)}function G(e,t,r,n,a){var o;for(o=0;o<r;++o){var i=e[t+o],s=i>>8&255,l=16711935&(l=(l=16711935&i)+((s<<16)+s));n[a+o]=(4278255360&i)+l>>>0}}function z(e,t){t.jd=e>>0&255,t.hd=e>>8&255,t.ud=e>>16&255}function W(e,t,r,n,a,o){var i;for(i=0;i<n;++i){var s=t[r+i],l=s>>>8,A=s,c=255&(c=(c=s>>>16)+((e.jd<<24>>24)*(l<<24>>24)>>>5));A=255&(A=(A+=(e.hd<<24>>24)*(l<<24>>24)>>>5)+((e.ud<<24>>24)*(c<<24>>24)>>>5)),a[o+i]=(4278255360&s)+(c<<16)+A}}function $(t,r,n,a,o){e[r]=function(e,t,r,n,i,s,l,A,c){for(n=l;n<A;++n)for(l=0;l<c;++l)i[s++]=o(r[a(e[t++])])},e[t]=function(t,r,i,s,l,A,c){var d=8>>t.b,u=t.Ea,h=t.K[0],f=t.w;if(8>d)for(t=(1<<t.b)-1,f=(1<<d)-1;r<i;++r){var p,m=0;for(p=0;p<u;++p)p&t||(m=a(s[l++])),A[c++]=o(h[m&f]),m>>=d}else e["VP8LMapColor"+n](s,l,h,f,A,c,r,i,u)}}function X(e,t,r,n,a){for(r=t+r;t<r;){var o=e[t++];n[a++]=o>>16&255,n[a++]=o>>8&255,n[a++]=o>>0&255}}function Y(e,t,r,n,a){for(r=t+r;t<r;){var o=e[t++];n[a++]=o>>16&255,n[a++]=o>>8&255,n[a++]=o>>0&255,n[a++]=o>>24&255}}function J(e,t,r,n,a){for(r=t+r;t<r;){var o=(i=e[t++])>>16&240|i>>12&15,i=i>>0&240|i>>28&15;n[a++]=o,n[a++]=i}}function Z(e,t,r,n,a){for(r=t+r;t<r;){var o=(i=e[t++])>>16&248|i>>13&7,i=i>>5&224|i>>3&31;n[a++]=o,n[a++]=i}}function ee(e,t,r,n,a){for(r=t+r;t<r;){var o=e[t++];n[a++]=o>>0&255,n[a++]=o>>8&255,n[a++]=o>>16&255}}function et(e,t,r,a,o,i){if(0==i)for(r=t+r;t<r;)F(a,((i=e[t++])[0]>>24|i[1]>>8&65280|i[2]<<8&16711680|i[3]<<24)>>>0),o+=32;else n(a,o,e,t,r)}function er(t,r){e[r][0]=e[t+"0"],e[r][1]=e[t+"1"],e[r][2]=e[t+"2"],e[r][3]=e[t+"3"],e[r][4]=e[t+"4"],e[r][5]=e[t+"5"],e[r][6]=e[t+"6"],e[r][7]=e[t+"7"],e[r][8]=e[t+"8"],e[r][9]=e[t+"9"],e[r][10]=e[t+"10"],e[r][11]=e[t+"11"],e[r][12]=e[t+"12"],e[r][13]=e[t+"13"],e[r][14]=e[t+"0"],e[r][15]=e[t+"0"]}function en(e){return e==nc||e==nd||e==nu||e==nh}function ea(){this.eb=[],this.size=this.A=this.fb=0}function eo(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function ei(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new ea,this.f.kb=new eo,this.sd=null}function es(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function el(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function eA(e){return alert("todo:WebPSamplerProcessPlane"),e.T}function ec(e,t){var r=e.T,a=t.ba.f.RGBA,o=a.eb,i=a.fb+e.ka*a.A,s=nT[t.ba.S],l=e.y,A=e.O,c=e.f,d=e.N,u=e.ea,h=e.W,f=t.cc,p=t.dc,m=t.Mc,g=t.Nc,x=e.ka,b=e.ka+e.T,y=e.U,v=y+1>>1;for(0==x?s(l,A,null,null,c,d,u,h,c,d,u,h,o,i,null,null,y):(s(t.ec,t.fc,l,A,f,p,m,g,c,d,u,h,o,i-a.A,o,i,y),++r);x+2<b;x+=2)f=c,p=d,m=u,g=h,d+=e.Rc,h+=e.Rc,i+=2*a.A,s(l,(A+=2*e.fa)-e.fa,l,A,f,p,m,g,c,d,u,h,o,i-a.A,o,i,y);return A+=e.fa,e.j+b<e.o?(n(t.ec,t.fc,l,A,y),n(t.cc,t.dc,c,d,v),n(t.Mc,t.Nc,u,h,v),r--):1&b||s(l,A,null,null,c,d,u,h,c,d,u,h,o,i+a.A,null,null,y),r}function ed(e,r,n){var a=e.F,o=[e.J];if(null!=a){var i=e.U,s=r.ba.S,l=s==ns||s==nu;r=r.ba.f.RGBA;var A=[0],c=e.ka;A[0]=e.T,e.Kb&&(0==c?--A[0]:(--c,o[0]-=e.width),e.j+e.ka+e.T==e.o&&(A[0]=e.o-e.j-c));var d=r.eb;c=r.fb+c*r.A,e=r2(a,o[0],e.width,i,A,d,c+(l?0:3),r.A),t(n==A),e&&en(s)&&r0(d,c,l,i,A,r.A)}return 0}function eu(e){var t=e.ma,r=t.ba.S,n=11>r,a=r==na||r==ni||r==ns||r==nl||12==r||en(r);if(t.memory=null,t.Ib=null,t.Jb=null,t.Nd=null,!rh(t.Oa,e,a?11:12))return 0;if(a&&en(r)&&t6(),e.da)alert("todo:use_scaling");else{if(n){if(t.Ib=eA,e.Kb){if(r=e.U+1>>1,t.memory=o(e.U+2*r),null==t.memory)return 0;t.ec=t.memory,t.fc=0,t.cc=t.ec,t.dc=t.fc+e.U,t.Mc=t.cc,t.Nc=t.dc+r,t.Ib=ec,t6()}}else alert("todo:EmitYUV");a&&(t.Jb=ed,n&&t4())}if(n&&!nJ){for(e=0;256>e;++e)nZ[e]=89858*(e-128)+nz>>nG,n2[e]=-22014*(e-128)+nz,n1[e]=-45773*(e-128),n0[e]=113618*(e-128)+nz>>nG;for(e=nW;e<n$;++e)t=76283*(e-16)+nz>>nG,n5[e-nW]=eq(t,255),n4[e-nW]=eq(t+8>>4,15);nJ=1}return 1}function eh(e){var r=e.ma,n=e.U,a=e.T;return t(!(1&e.ka)),0>=n||0>=a?0:(n=r.Ib(e,r),null!=r.Jb&&r.Jb(e,r,n),r.Dc+=n,1)}function ef(e){e.ma.memory=null}function ep(e,t,r,n){return 47!=b(e,8)?0:(t[0]=b(e,14)+1,r[0]=b(e,14)+1,n[0]=b(e,1),0!=b(e,3)?0:!e.h)}function em(e,t){if(4>e)return e+1;var r=e-2>>1;return(2+(1&e)<<r)+b(t,r)+1}function eg(e,t){var r;return 120<t?t-120:1<=(r=((r=nb[t-1])>>4)*e+(8-(15&r)))?r:1}function ex(e,t,r){var n=w(r),a=e[t+=255&n].g-8;return 0<a&&(B(r,r.u+8),n=w(r),t+=e[t].value,t+=n&(1<<a)-1),B(r,r.u+e[t].g),e[t].value}function eb(e,r,n){return n.g+=e.g,n.value+=e.value<<r>>>0,t(8>=n.g),e.g}function ey(e,r,n){var a=e.xc;return t((r=0==a?0:e.vc[e.md*(n>>a)+(r>>a)])<e.Wb),e.Ya[r]}function ev(e,r,a,o){var i=e.ab,s=e.c*r,l=e.C;r=l+r;var A=a,c=o;for(o=e.Ta,a=e.Ua;0<i--;){var d=e.gc[i],u=l,h=r,f=A,p=c,m=(c=o,A=a,d.Ea);switch(t(u<h),t(h<=d.nc),d.hc){case 2:rB(f,p,(h-u)*m,c,A);break;case 0:var g=u,x=h,b=c,y=A,v=(C=d).Ea;0==g&&(rw(f,p,null,null,1,b,y),q(f,p+1,0,0,v-1,b,y+1),p+=v,y+=v,++g);for(var w=1<<C.b,k=w-1,B=Q(v,C.b),j=C.K,C=C.w+(g>>C.b)*B;g<x;){var N=j,S=C,F=1;for(rk(f,p,b,y-v,1,b,y);F<v;){var E=(F&~k)+w;E>v&&(E=v),(0,rF[N[S++]>>8&15])(f,p+ +F,b,y+F-v,E-F,b,y+F),F=E}p+=v,y+=v,++g&k||(C+=B)}h!=d.nc&&n(c,A-m,c,A+(h-u-1)*m,m);break;case 1:for(m=f,x=p,v=(f=d.Ea)-(y=f&~(b=(p=1<<d.b)-1)),g=Q(f,d.b),w=d.K,d=d.w+(u>>d.b)*g;u<h;){for(k=w,B=d,j=new M,C=x+y,N=x+f;x<C;)z(k[B++],j),rE(j,m,x,p,c,A),x+=p,A+=p;x<N&&(z(k[B++],j),rE(j,m,x,v,c,A),x+=v,A+=v),++u&b||(d+=g)}break;case 3:if(f==c&&p==A&&0<d.b){for(x=c,f=m=A+(h-u)*m-(y=(h-u)*Q(d.Ea,d.b)),p=c,b=A,g=[],y=(v=y)-1;0<=y;--y)g[y]=p[b+y];for(y=v-1;0<=y;--y)x[f+y]=g[y];rj(d,u,h,c,m,c,A)}else rj(d,u,h,f,p,c,A)}A=o,c=a}c!=a&&n(o,a,A,c,s)}function ew(e,r){var n=e.V,a=e.Ba+e.c*e.C,o=r-e.C;if(t(r<=e.l.o),t(16>=o),0<o){var i=e.l,s=e.Ta,l=e.Ua,A=i.width;if(ev(e,o,n,a),o=l=[l],t((n=e.C)<(a=r)),t(i.v<i.va),a>i.o&&(a=i.o),n<i.j){var c=i.j-n;n=i.j,o[0]+=c*A}if(n>=a?n=0:(o[0]+=4*i.v,i.ka=n-i.j,i.U=i.va-i.v,i.T=a-n,n=1),n){if(l=l[0],11>(n=e.ca).S){var d=n.f.RGBA,u=(a=n.S,o=i.U,i=i.T,c=d.eb,d.A),h=i;for(d=d.fb+e.Ma*d.A;0<h--;){var f=l,p=o,m=c,g=d;switch(a){case nn:rO(s,f,p,m,g);break;case na:rP(s,f,p,m,g);break;case nc:rP(s,f,p,m,g),r0(m,g,0,p,1,0);break;case no:rL(s,f,p,m,g);break;case ni:et(s,f,p,m,g,1);break;case nd:et(s,f,p,m,g,1),r0(m,g,0,p,1,0);break;case ns:et(s,f,p,m,g,0);break;case nu:et(s,f,p,m,g,0),r0(m,g,1,p,1,0);break;case nl:rI(s,f,p,m,g);break;case nh:rI(s,f,p,m,g),r1(m,g,p,1,0);break;case nA:rU(s,f,p,m,g);break;default:t(0)}l+=A,d+=u}e.Ma+=i}else alert("todo:EmitRescaledRowsYUVA");t(e.Ma<=n.height)}}e.C=r,t(e.C<=e.i)}function ek(e){var t;if(0<e.ua)return 0;for(t=0;t<e.Wb;++t){var r=e.Ya[t].G,n=e.Ya[t].H;if(0<r[1][n[1]+0].g||0<r[2][n[2]+0].g||0<r[3][n[3]+0].g)return 0}return 1}function eB(e,r,n,a,o,i){if(0!=e.Z){var s=e.qd,l=e.rd;for(t(null!=nQ[e.Z]);r<n;++r)nQ[e.Z](s,l,a,o,a,o,i),s=a,l=o,o+=i;e.qd=s,e.rd=l}}function ej(e,r){var n=e.l.ma,a=0==n.Z||1==n.Z?e.l.j:e.C;if(a=e.C<a?a:e.C,t(r<=e.l.o),r>a){var o=e.l.width,i=n.ca,s=n.tb+o*a,l=e.V,A=e.Ba+e.c*a,c=e.gc;t(1==e.ab),t(3==c[0].hc),rN(c[0],a,r,l,A,i,s),eB(n,a,r,i,s,o)}e.C=e.Ma=r}function eC(e,r,n,a,o,i,s){var l=e.$/a,A=e.$%a,c=e.m,d=e.s,u=n+e.$,h=u;o=n+a*o;var f=n+a*i,p=280+d.ua,m=e.Pb?l:16777216,g=0<d.ua?d.Wa:null,x=d.wc,b=u<f?ey(d,A,l):null;t(e.C<i),t(f<=o);var y=!1;e:for(;;){for(;y||u<f;){var v=0;if(l>=m){var C=u-n;t((m=e).Pb),m.wd=m.m,m.xd=C,0<m.s.ua&&U(m.s.Wa,m.s.vb),m=l+nv}if(A&x||(b=ey(d,A,l)),t(null!=b),b.Qb&&(r[u]=b.qb,y=!0),!y){if(j(c),b.jc){v=c,C=r;var N=u,S=b.pd[w(v)&rm-1];t(b.jc),256>S.g?(B(v,v.u+S.g),C[N]=S.value,v=0):(B(v,v.u+S.g-256),t(256<=S.value),v=S.value),0==v&&(y=!0)}else v=ex(b.G[0],b.H[0],c)}if(c.h)break;if(y||256>v){if(!y){if(b.nd)r[u]=(b.qb|v<<8)>>>0;else{if(j(c),y=ex(b.G[1],b.H[1],c),j(c),C=ex(b.G[2],b.H[2],c),N=ex(b.G[3],b.H[3],c),c.h)break;r[u]=(N<<24|y<<16|v<<8|C)>>>0}}if(y=!1,++u,++A>=a&&(A=0,++l,null!=s&&l<=i&&!(l%16)&&s(e,l),null!=g))for(;h<u;)v=r[h++],g.X[(506832829*v&4294967295)>>>g.Mb]=v}else if(280>v){if(v=em(v-256,c),C=ex(b.G[4],b.H[4],c),j(c),C=eg(a,C=em(C,c)),c.h)break;if(u-n<C||o-u<v)break e;for(N=0;N<v;++N)r[u+N]=r[u+N-C];for(u+=v,A+=v;A>=a;)A-=a,++l,null!=s&&l<=i&&!(l%16)&&s(e,l);if(t(u<=o),A&x&&(b=ey(d,A,l)),null!=g)for(;h<u;)v=r[h++],g.X[(506832829*v&4294967295)>>>g.Mb]=v}else{if(!(v<p))break e;for(y=v-280,t(null!=g);h<u;)v=r[h++],g.X[(506832829*v&4294967295)>>>g.Mb]=v;v=u,t(!(y>>>(C=g).Xa)),r[v]=C.X[y],y=!0}y||t(c.h==k(c))}if(e.Pb&&c.h&&u<o)t(e.m.h),e.a=5,e.m=e.wd,e.$=e.xd,0<e.s.ua&&U(e.s.vb,e.s.Wa);else{if(c.h)break;null!=s&&s(e,l>i?i:l),e.a=0,e.$=u-n}return 1}return e.a=3,0}function eN(e){t(null!=e),e.vc=null,e.yc=null,e.Ya=null;var r=e.Wa;null!=r&&(r.X=null),e.vb=null,t(null!=e)}function eS(){var t=new t$;return null==t?null:(t.a=0,t.xb=n_,er("Predictor","VP8LPredictors"),er("Predictor","VP8LPredictors_C"),er("PredictorAdd","VP8LPredictorsAdd"),er("PredictorAdd","VP8LPredictorsAdd_C"),rB=G,rE=W,rO=X,rP=Y,rI=J,rU=Z,rL=ee,e.VP8LMapColor32b=rC,e.VP8LMapColor8b=rS,t)}function eF(e,r,n,s,l){for(var A=1,u=[e],f=[r],p=s.m,m=s.s,g=null,x=0;;){if(n)for(;A&&b(p,1);){var y=u,v=f,k=1,C=s.m,N=s.gc[s.ab],S=b(C,2);if(s.Oc&1<<S)A=0;else{switch(s.Oc|=1<<S,N.hc=S,N.Ea=y[0],N.nc=v[0],N.K=[null],++s.ab,t(4>=s.ab),S){case 0:case 1:N.b=b(C,3)+2,k=eF(Q(N.Ea,N.b),Q(N.nc,N.b),0,s,N.K),N.K=N.K[0];break;case 3:var F,E=b(C,8)+1,O=16<E?0:4<E?1:2<E?2:3;if(y[0]=Q(N.Ea,O),N.b=O,F=k=eF(E,1,0,s,N.K)){var P,U=1<<(8>>N.b),L=o(U);if(null==L)F=0;else{var _=N.K[0],D=N.w;for(L[0]=N.K[0][0],P=1;P<1*E;++P)L[P]=T(_[D+P],L[P-1]);for(;P<4*U;++P)L[P]=0;N.K[0]=null,N.K[0]=L,F=1}}k=F;break;case 2:break;default:t(0)}A=k}}if(u=u[0],f=f[0],A&&b(p,1)&&!(A=1<=(x=b(p,4))&&11>=x)){s.a=3;break}if(M=A)t:{var M,H,R,K,V=u,q=f,G=x,z=s.m,W=s.s,$=[null],X=1,Y=0,J=ny[G];r:for(;;){if(n&&b(z,1)){var Z=b(z,3)+2,ee=Q(V,Z),et=Q(q,Z),er=ee*et;if(!eF(ee,et,0,s,$))break;for($=$[0],W.xc=Z,H=0;H<er;++H){var en=$[H]>>8&65535;$[H]=en,en>=X&&(X=en+1)}}if(z.h)break;for(R=0;5>R;++R){var ea=nm[R];!R&&0<G&&(ea+=1<<G),Y<ea&&(Y=ea)}var eo=i(X*J,d),ei=X,es=i(ei,h);if(null==es)var el=null;else t(65536>=ei),el=es;var eA=o(Y);if(null==el||null==eA||null==eo){s.a=1;break}for(H=K=0;H<X;++H){var ec,ed=el[H],eu=ed.G,eh=ed.H,ef=0,ep=1,em=0;for(R=0;5>R;++R){ea=nm[R],eu[R]=eo,eh[R]=K,!R&&0<G&&(ea+=1<<G);n:{var eg,ex=ea,ey=K,ev=0,ew=s.m,ek=b(ew,1);if(a(eA,0,0,ex),ek){var eB=b(ew,1)+1,ej=b(ew,1),eS=b(ew,0==ej?1:8);eA[eS]=1,2==eB&&(eA[eS=b(ew,8)]=1);var eE=1}else{var eO=o(19),eP=b(ew,4)+4;if(19<eP){s.a=3;var eI=0;break n}for(eg=0;eg<eP;++eg)eO[nx[eg]]=b(ew,3);var eU=void 0,eL=void 0,e_=0,eQ=s.m,eT=8,eD=i(128,d);a:for(;c(eD,0,7,eO,19);){if(b(eQ,1)){var eM=2+2*b(eQ,3);if((eU=2+b(eQ,eM))>ex)break}else eU=ex;for(eL=0;eL<ex&&eU--;){j(eQ);var eH=eD[0+(127&w(eQ))];B(eQ,eQ.u+eH.g);var eR=eH.value;if(16>eR)eA[eL++]=eR,0!=eR&&(eT=eR);else{var eK=16==eR,eV=eR-16,eq=np[eV],eG=b(eQ,nf[eV])+eq;if(eL+eG>ex)break a;for(var ez=eK?eT:0;0<eG--;)eA[eL++]=ez}}e_=1;break}e_||(s.a=3),eE=e_}(eE=eE&&!ew.h)&&(ev=c(eo,ey,8,eA,ex)),eE&&0!=ev?eI=ev:(s.a=3,eI=0)}if(0==eI)break r;if(ep&&1==ng[R]&&(ep=0==eo[K].g),ef+=eo[K].g,K+=eI,3>=R){var eW,e$=eA[0];for(eW=1;eW<ea;++eW)eA[eW]>e$&&(e$=eA[eW]);em+=e$}}if(ed.nd=ep,ed.Qb=0,ep&&(ed.qb=(eu[3][eh[3]+0].value<<24|eu[1][eh[1]+0].value<<16|eu[2][eh[2]+0].value)>>>0,0==ef&&256>eu[0][eh[0]+0].value&&(ed.Qb=1,ed.qb+=eu[0][eh[0]+0].value<<8)),ed.jc=!ed.Qb&&6>em,ed.jc)for(ec=0;ec<rm;++ec){var eX=ec,eY=ed.pd[eX],eJ=ed.G[0][ed.H[0]+eX];256<=eJ.value?(eY.g=eJ.g+256,eY.value=eJ.value):(eY.g=0,eY.value=0,eX>>=eb(eJ,8,eY),eX>>=eb(ed.G[1][ed.H[1]+eX],16,eY),eX>>=eb(ed.G[2][ed.H[2]+eX],0,eY),eb(ed.G[3][ed.H[3]+eX],24,eY))}}W.vc=$,W.Wb=X,W.Ya=el,W.yc=eo,M=1;break t}M=0}if(!(A=M)){s.a=3;break}if(0<x){if(m.ua=1<<x,!I(m.Wa,x)){s.a=1,A=0;break}}else m.ua=0;var eZ=u,e0=f,e1=s.s,e2=e1.xc;if(s.c=eZ,s.i=e0,e1.md=Q(eZ,e2),e1.wc=0==e2?-1:(1<<e2)-1,n){s.xb=nL;break}if(null==(g=o(u*f))){s.a=1,A=0;break}A=(A=eC(s,g,0,u,f,f,null))&&!p.h;break}return A?(null!=l?l[0]=g:(t(null==g),t(n)),s.$=0,n||eN(m)):eN(m),A}function eE(e,r){var n=e.c*e.i;return t(e.c<=r),e.V=o(n+r+16*r),null==e.V?(e.Ta=null,e.Ua=0,e.a=1,0):(e.Ta=e.V,e.Ua=e.Ba+n+r,1)}function eO(e,r){var n=e.C,a=r-n,o=e.V,i=e.Ba+e.c*n;for(t(r<=e.l.o);0<a;){var s=16<a?16:a,l=e.l.ma,A=e.l.width,c=A*s,d=l.ca,u=l.tb+A*n,h=e.Ta,f=e.Ua;ev(e,s,o,i),r5(h,f,d,u,c),eB(l,n,n+s,d,u,A),a-=s,o+=s*e.c,n+=s}t(n==r),e.C=e.Ma=r}function eP(){this.ub=this.yd=this.td=this.Rb=0}function eI(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function eU(){this.Fb=this.Bb=this.Cb=0,this.Zb=o(4),this.Lb=o(4)}function eL(){var e;this.Yb=(function e(t,r,n){for(var a=n[r],o=0;o<a&&(t.push(n.length>r+1?[]:0),!(n.length<r+1));o++)e(t[o],r+1,n)}(e=[],0,[3,11]),e)}function e_(){this.jb=o(3),this.Wc=s([4,8],eL),this.Xc=s([4,17],eL)}function eQ(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new o(4),this.od=new o(4)}function eT(){this.ld=this.La=this.dd=this.tc=0}function eD(){this.Na=this.la=0}function eM(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function eH(){this.ad=o(384),this.Za=0,this.Ob=o(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function eR(){this.uc=this.M=this.Nb=0,this.wa=Array(new eT),this.Y=0,this.ya=Array(new eH),this.aa=0,this.l=new eG}function eK(){this.y=o(16),this.f=o(8),this.ea=o(8)}function eV(){this.cb=this.a=0,this.sc="",this.m=new y,this.Od=new eP,this.Kc=new eI,this.ed=new eQ,this.Qa=new eU,this.Ic=this.$c=this.Aa=0,this.D=new eR,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=i(8,y),this.ia=0,this.pb=i(4,eM),this.Pa=new e_,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new eK),this.Hd=0,this.rb=Array(new eD),this.sb=0,this.wa=Array(new eT),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new eH),this.L=this.aa=0,this.gd=s([4,2],eT),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function eq(e,t){return 0>e?0:e>t?t:e}function eG(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function ez(){var e=new eV;return null!=e&&(e.a=0,e.sc="OK",e.cb=0,e.Xb=0,nB||(nB=eY)),e}function eW(e,t,r){return 0==e.a&&(e.a=t,e.sc=r,e.cb=0),0}function e$(e,t,r){return 3<=r&&157==e[t+0]&&1==e[t+1]&&42==e[t+2]}function eX(e,r){if(null==e)return 0;if(e.a=0,e.sc="OK",null==r)return eW(e,2,"null VP8Io passed to VP8GetHeaders()");var n=r.data,o=r.w,i=r.ha;if(4>i)return eW(e,7,"Truncated header.");var s=n[o+0]|n[o+1]<<8|n[o+2]<<16,l=e.Od;if(l.Rb=!(1&s),l.td=s>>1&7,l.yd=s>>4&1,l.ub=s>>5,3<l.td)return eW(e,3,"Incorrect keyframe parameters.");if(!l.yd)return eW(e,4,"Frame not displayable.");o+=3,i-=3;var A=e.Kc;if(l.Rb){if(7>i)return eW(e,7,"cannot parse picture header");if(!e$(n,o,i))return eW(e,3,"Bad code word");A.c=16383&(n[o+4]<<8|n[o+3]),A.Td=n[o+4]>>6,A.i=16383&(n[o+6]<<8|n[o+5]),A.Ud=n[o+6]>>6,o+=7,i-=7,e.za=A.c+15>>4,e.Ub=A.i+15>>4,r.width=A.c,r.height=A.i,r.Da=0,r.j=0,r.v=0,r.va=r.width,r.o=r.height,r.da=0,r.ib=r.width,r.hb=r.height,r.U=r.width,r.T=r.height,a((s=e.Pa).jb,0,255,s.jb.length),t(null!=(s=e.Qa)),s.Cb=0,s.Bb=0,s.Fb=1,a(s.Zb,0,0,s.Zb.length),a(s.Lb,0,0,s.Lb)}if(l.ub>i)return eW(e,7,"bad partition length");f(s=e.m,n,o,l.ub),o+=l.ub,i-=l.ub,l.Rb&&(A.Ld=N(s),A.Kd=N(s)),A=e.Qa;var c,d=e.Pa;if(t(null!=s),t(null!=A),A.Cb=N(s),A.Cb){if(A.Bb=N(s),N(s)){for(A.Fb=N(s),c=0;4>c;++c)A.Zb[c]=N(s)?m(s,7):0;for(c=0;4>c;++c)A.Lb[c]=N(s)?m(s,6):0}if(A.Bb)for(c=0;3>c;++c)d.jb[c]=N(s)?p(s,8):255}else A.Bb=0;if(s.Ka)return eW(e,3,"cannot parse segment header");if((A=e.ed).zd=N(s),A.Tb=p(s,6),A.wb=p(s,3),A.Pc=N(s),A.Pc&&N(s)){for(d=0;4>d;++d)N(s)&&(A.vd[d]=m(s,6));for(d=0;4>d;++d)N(s)&&(A.od[d]=m(s,6))}if(e.L=0==A.Tb?0:A.zd?1:2,s.Ka)return eW(e,3,"cannot parse filter header");var u=i;if(i=c=o,o=c+u,A=u,e.Xb=(1<<p(e.m,2))-1,u<3*(d=e.Xb))n=7;else{for(c+=3*d,A-=3*d,u=0;u<d;++u){var h=n[i+0]|n[i+1]<<8|n[i+2]<<16;h>A&&(h=A),f(e.Jc[+u],n,c,h),c+=h,A-=h,i+=3}f(e.Jc[+d],n,c,A),n=c<o?0:5}if(0!=n)return eW(e,n,"cannot parse partitions");for(n=p(c=e.m,7),i=N(c)?m(c,4):0,o=N(c)?m(c,4):0,A=N(c)?m(c,4):0,d=N(c)?m(c,4):0,c=N(c)?m(c,4):0,u=e.Qa,h=0;4>h;++h){if(u.Cb){var g=u.Zb[h];u.Fb||(g+=n)}else{if(0<h){e.pb[h]=e.pb[0];continue}g=n}var x=e.pb[h];x.Sc[0]=nw[eq(g+i,127)],x.Sc[1]=nk[eq(g+0,127)],x.Eb[0]=2*nw[eq(g+o,127)],x.Eb[1]=101581*nk[eq(g+A,127)]>>16,8>x.Eb[1]&&(x.Eb[1]=8),x.Qc[0]=nw[eq(g+d,117)],x.Qc[1]=nk[eq(g+c,127)],x.lc=g+c}if(!l.Rb)return eW(e,4,"Not a key frame.");for(N(s),l=e.Pa,n=0;4>n;++n){for(i=0;8>i;++i)for(o=0;3>o;++o)for(A=0;11>A;++A)d=S(s,nE[n][i][o][A])?p(s,8):nS[n][i][o][A],l.Wc[n][i].Yb[o][A]=d;for(i=0;17>i;++i)l.Xc[n][i]=l.Wc[n][nO[i]]}return e.kc=N(s),e.kc&&(e.Bd=p(s,8)),e.cb=1}function eY(e,t,r,n,a,o,i){var s=t[a].Yb[r];for(r=0;16>a;++a){if(!S(e,s[r+0]))return a;for(;!S(e,s[r+1]);)if(s=t[++a].Yb[0],r=0,16==a)return 16;var l=t[a+1].Yb;if(S(e,s[r+2])){var A=e,c=0;if(S(A,(u=s)[(d=r)+3])){if(S(A,u[d+6])){for(s=0,d=2*(c=S(A,u[d+8]))+(u=S(A,u[d+9+c])),c=0,u=nj[d];u[s];++s)c+=c+S(A,u[s]);c+=3+(8<<d)}else c=S(A,u[d+7])?7+2*S(A,165)+S(A,145):5+S(A,159)}else c=S(A,u[d+4])?3+S(A,u[d+5]):2;s=l[2]}else c=1,s=l[1];l=i+nC[a],0>(A=e).b&&C(A);var d,u=A.b,h=(d=A.Ca>>1)-(A.I>>u)>>31;--A.b,A.Ca+=h,A.Ca|=1,A.I-=(d+1&h)<<u,o[l]=((c^h)-h)*n[(0<a)+0]}return 16}function eJ(e){var t=e.rb[e.sb-1];t.la=0,t.Na=0,a(e.zc,0,0,e.zc.length),e.ja=0}function eZ(e,t,r,n,a){a=e[t+r+32*n]+(a>>3),e[t+r+32*n]=-256&a?0>a?0:255:a}function e0(e,t,r,n,a,o){eZ(e,t,0,r,n+a),eZ(e,t,1,r,n+o),eZ(e,t,2,r,n-o),eZ(e,t,3,r,n-a)}function e1(e){return(20091*e>>16)+e}function e2(e,t,r,n){var a,i=0,s=o(16);for(a=0;4>a;++a){var l=e[t+0]+e[t+8],A=e[t+0]-e[t+8],c=(35468*e[t+4]>>16)-e1(e[t+12]),d=e1(e[t+4])+(35468*e[t+12]>>16);s[i+0]=l+d,s[i+1]=A+c,s[i+2]=A-c,s[i+3]=l-d,i+=4,t++}for(a=i=0;4>a;++a)l=(e=s[i+0]+4)+s[i+8],A=e-s[i+8],c=(35468*s[i+4]>>16)-e1(s[i+12]),eZ(r,n,0,0,l+(d=e1(s[i+4])+(35468*s[i+12]>>16))),eZ(r,n,1,0,A+c),eZ(r,n,2,0,A-c),eZ(r,n,3,0,l-d),i++,n+=32}function e5(e,t,r,n){var a=e[t+0]+4,o=35468*e[t+4]>>16,i=e1(e[t+4]),s=35468*e[t+1]>>16;e0(r,n,0,a+i,e=e1(e[t+1]),s),e0(r,n,1,a+o,e,s),e0(r,n,2,a-o,e,s),e0(r,n,3,a-i,e,s)}function e4(e,t,r,n,a){e2(e,t,r,n),a&&e2(e,t+16,r,n+4)}function e3(e,t,r,n){rQ(e,t+0,r,n,1),rQ(e,t+32,r,n+128,1)}function e6(e,t,r,n){var a;for(e=e[t+0]+4,a=0;4>a;++a)for(t=0;4>t;++t)eZ(r,n,t,a,e)}function e8(e,t,r,n){e[t+0]&&rM(e,t+0,r,n),e[t+16]&&rM(e,t+16,r,n+4),e[t+32]&&rM(e,t+32,r,n+128),e[t+48]&&rM(e,t+48,r,n+128+4)}function e7(e,t,r,n){var a,i=o(16);for(a=0;4>a;++a){var s=e[t+0+a]+e[t+12+a],l=e[t+4+a]+e[t+8+a],A=e[t+4+a]-e[t+8+a],c=e[t+0+a]-e[t+12+a];i[0+a]=s+l,i[8+a]=s-l,i[4+a]=c+A,i[12+a]=c-A}for(a=0;4>a;++a)s=(e=i[0+4*a]+3)+i[3+4*a],l=i[1+4*a]+i[2+4*a],A=i[1+4*a]-i[2+4*a],c=e-i[3+4*a],r[n+0]=s+l>>3,r[n+16]=c+A>>3,r[n+32]=s-l>>3,r[n+48]=c-A>>3,n+=64}function e9(e,t,r){var n,a=t-32,o=255-e[a-1];for(n=0;n<r;++n){var i,s=o+e[t-1];for(i=0;i<r;++i)e[t+i]=nt[s+e[a+i]];t+=32}}function te(e,t){e9(e,t,4)}function tt(e,t){e9(e,t,8)}function tr(e,t){e9(e,t,16)}function tn(e,t){var r;for(r=0;16>r;++r)n(e,t+32*r,e,t-32,16)}function ta(e,t){var r;for(r=16;0<r;--r)a(e,t,e[t-1],16),t+=32}function to(e,t,r){var n;for(n=0;16>n;++n)a(t,r+32*n,e,16)}function ti(e,t){var r,n=16;for(r=0;16>r;++r)n+=e[t-1+32*r]+e[t+r-32];to(n>>5,e,t)}function ts(e,t){var r,n=8;for(r=0;16>r;++r)n+=e[t-1+32*r];to(n>>4,e,t)}function tl(e,t){var r,n=8;for(r=0;16>r;++r)n+=e[t+r-32];to(n>>4,e,t)}function tA(e,t){to(128,e,t)}function tc(e,t,r){return e+2*t+r+2>>2}function td(e,t){var r,a=t-32;for(r=0,a=new Uint8Array([tc(e[a-1],e[a+0],e[a+1]),tc(e[a+0],e[a+1],e[a+2]),tc(e[a+1],e[a+2],e[a+3]),tc(e[a+2],e[a+3],e[a+4])]);4>r;++r)n(e,t+32*r,a,0,a.length)}function tu(e,t){var r=e[t-1],n=e[t-1+32],a=e[t-1+64],o=e[t-1+96];F(e,t+0,16843009*tc(e[t-1-32],r,n)),F(e,t+32,16843009*tc(r,n,a)),F(e,t+64,16843009*tc(n,a,o)),F(e,t+96,16843009*tc(a,o,o))}function th(e,t){var r,n=4;for(r=0;4>r;++r)n+=e[t+r-32]+e[t-1+32*r];for(n>>=3,r=0;4>r;++r)a(e,t+32*r,n,4)}function tf(e,t){var r=e[t-1+0],n=e[t-1+32],a=e[t-1+64],o=e[t-1-32],i=e[t+0-32],s=e[t+1-32],l=e[t+2-32],A=e[t+3-32];e[t+0+96]=tc(n,a,e[t-1+96]),e[t+1+96]=e[t+0+64]=tc(r,n,a),e[t+2+96]=e[t+1+64]=e[t+0+32]=tc(o,r,n),e[t+3+96]=e[t+2+64]=e[t+1+32]=e[t+0+0]=tc(i,o,r),e[t+3+64]=e[t+2+32]=e[t+1+0]=tc(s,i,o),e[t+3+32]=e[t+2+0]=tc(l,s,i),e[t+3+0]=tc(A,l,s)}function tp(e,t){var r=e[t+1-32],n=e[t+2-32],a=e[t+3-32],o=e[t+4-32],i=e[t+5-32],s=e[t+6-32],l=e[t+7-32];e[t+0+0]=tc(e[t+0-32],r,n),e[t+1+0]=e[t+0+32]=tc(r,n,a),e[t+2+0]=e[t+1+32]=e[t+0+64]=tc(n,a,o),e[t+3+0]=e[t+2+32]=e[t+1+64]=e[t+0+96]=tc(a,o,i),e[t+3+32]=e[t+2+64]=e[t+1+96]=tc(o,i,s),e[t+3+64]=e[t+2+96]=tc(i,s,l),e[t+3+96]=tc(s,l,l)}function tm(e,t){var r=e[t-1+0],n=e[t-1+32],a=e[t-1+64],o=e[t-1-32],i=e[t+0-32],s=e[t+1-32],l=e[t+2-32],A=e[t+3-32];e[t+0+0]=e[t+1+64]=o+i+1>>1,e[t+1+0]=e[t+2+64]=i+s+1>>1,e[t+2+0]=e[t+3+64]=s+l+1>>1,e[t+3+0]=l+A+1>>1,e[t+0+96]=tc(a,n,r),e[t+0+64]=tc(n,r,o),e[t+0+32]=e[t+1+96]=tc(r,o,i),e[t+1+32]=e[t+2+96]=tc(o,i,s),e[t+2+32]=e[t+3+96]=tc(i,s,l),e[t+3+32]=tc(s,l,A)}function tg(e,t){var r=e[t+0-32],n=e[t+1-32],a=e[t+2-32],o=e[t+3-32],i=e[t+4-32],s=e[t+5-32],l=e[t+6-32],A=e[t+7-32];e[t+0+0]=r+n+1>>1,e[t+1+0]=e[t+0+64]=n+a+1>>1,e[t+2+0]=e[t+1+64]=a+o+1>>1,e[t+3+0]=e[t+2+64]=o+i+1>>1,e[t+0+32]=tc(r,n,a),e[t+1+32]=e[t+0+96]=tc(n,a,o),e[t+2+32]=e[t+1+96]=tc(a,o,i),e[t+3+32]=e[t+2+96]=tc(o,i,s),e[t+3+64]=tc(i,s,l),e[t+3+96]=tc(s,l,A)}function tx(e,t){var r=e[t-1+0],n=e[t-1+32],a=e[t-1+64],o=e[t-1+96];e[t+0+0]=r+n+1>>1,e[t+2+0]=e[t+0+32]=n+a+1>>1,e[t+2+32]=e[t+0+64]=a+o+1>>1,e[t+1+0]=tc(r,n,a),e[t+3+0]=e[t+1+32]=tc(n,a,o),e[t+3+32]=e[t+1+64]=tc(a,o,o),e[t+3+64]=e[t+2+64]=e[t+0+96]=e[t+1+96]=e[t+2+96]=e[t+3+96]=o}function tb(e,t){var r=e[t-1+0],n=e[t-1+32],a=e[t-1+64],o=e[t-1+96],i=e[t-1-32],s=e[t+0-32],l=e[t+1-32],A=e[t+2-32];e[t+0+0]=e[t+2+32]=r+i+1>>1,e[t+0+32]=e[t+2+64]=n+r+1>>1,e[t+0+64]=e[t+2+96]=a+n+1>>1,e[t+0+96]=o+a+1>>1,e[t+3+0]=tc(s,l,A),e[t+2+0]=tc(i,s,l),e[t+1+0]=e[t+3+32]=tc(r,i,s),e[t+1+32]=e[t+3+64]=tc(n,r,i),e[t+1+64]=e[t+3+96]=tc(a,n,r),e[t+1+96]=tc(o,a,n)}function ty(e,t){var r;for(r=0;8>r;++r)n(e,t+32*r,e,t-32,8)}function tv(e,t){var r;for(r=0;8>r;++r)a(e,t,e[t-1],8),t+=32}function tw(e,t,r){var n;for(n=0;8>n;++n)a(t,r+32*n,e,8)}function tk(e,t){var r,n=8;for(r=0;8>r;++r)n+=e[t+r-32]+e[t-1+32*r];tw(n>>4,e,t)}function tB(e,t){var r,n=4;for(r=0;8>r;++r)n+=e[t+r-32];tw(n>>3,e,t)}function tj(e,t){var r,n=4;for(r=0;8>r;++r)n+=e[t-1+32*r];tw(n>>3,e,t)}function tC(e,t){tw(128,e,t)}function tN(e,t,r){var n=e[t-r],a=e[t+0],o=3*(a-n)+r9[1020+e[t-2*r]-e[t+r]],i=ne[112+(o+4>>3)];e[t-r]=nt[255+n+ne[112+(o+3>>3)]],e[t+0]=nt[255+a-i]}function tS(e,t,r,n){var a=e[t+0],o=e[t+r];return nr[255+e[t-2*r]-e[t-r]]>n||nr[255+o-a]>n}function tF(e,t,r,n){return 4*nr[255+e[t-r]-e[t+0]]+nr[255+e[t-2*r]-e[t+r]]<=n}function tE(e,t,r,n,a){var o=e[t-3*r],i=e[t-2*r],s=e[t-r],l=e[t+0],A=e[t+r],c=e[t+2*r],d=e[t+3*r];return 4*nr[255+s-l]+nr[255+i-A]>n?0:nr[255+e[t-4*r]-o]<=a&&nr[255+o-i]<=a&&nr[255+i-s]<=a&&nr[255+d-c]<=a&&nr[255+c-A]<=a&&nr[255+A-l]<=a}function tO(e,t,r,n){var a=2*n+1;for(n=0;16>n;++n)tF(e,t+n,r,a)&&tN(e,t+n,r)}function tP(e,t,r,n){var a=2*n+1;for(n=0;16>n;++n)tF(e,t+n*r,1,a)&&tN(e,t+n*r,1)}function tI(e,t,r,n){var a;for(a=3;0<a;--a)tO(e,t+=4*r,r,n)}function tU(e,t,r,n){var a;for(a=3;0<a;--a)tP(e,t+=4,r,n)}function tL(e,t,r,n,a,o,i,s){for(o=2*o+1;0<a--;){if(tE(e,t,r,o,i)){if(tS(e,t,r,s))tN(e,t,r);else{var l=t,A=e[l-2*r],c=e[l-r],d=e[l+0],u=e[l+r],h=e[l+2*r],f=27*(m=r9[1020+3*(d-c)+r9[1020+A-u]])+63>>7,p=18*m+63>>7,m=9*m+63>>7;e[l-3*r]=nt[255+e[l-3*r]+m],e[l-2*r]=nt[255+A+p],e[l-r]=nt[255+c+f],e[l+0]=nt[255+d-f],e[l+r]=nt[255+u-p],e[l+2*r]=nt[255+h-m]}}t+=n}}function t_(e,t,r,n,a,o,i,s){for(o=2*o+1;0<a--;){if(tE(e,t,r,o,i)){if(tS(e,t,r,s))tN(e,t,r);else{var l=t,A=e[l-r],c=e[l+0],d=e[l+r],u=ne[112+((h=3*(c-A))+4>>3)],h=ne[112+(h+3>>3)],f=u+1>>1;e[l-2*r]=nt[255+e[l-2*r]+f],e[l-r]=nt[255+A+h],e[l+0]=nt[255+c-u],e[l+r]=nt[255+d-f]}}t+=n}}function tQ(e,t,r,n,a,o){tL(e,t,r,1,16,n,a,o)}function tT(e,t,r,n,a,o){tL(e,t,1,r,16,n,a,o)}function tD(e,t,r,n,a,o){var i;for(i=3;0<i;--i)t_(e,t+=4*r,r,1,16,n,a,o)}function tM(e,t,r,n,a,o){var i;for(i=3;0<i;--i)t_(e,t+=4,1,r,16,n,a,o)}function tH(e,t,r,n,a,o,i,s){tL(e,t,a,1,8,o,i,s),tL(r,n,a,1,8,o,i,s)}function tR(e,t,r,n,a,o,i,s){tL(e,t,1,a,8,o,i,s),tL(r,n,1,a,8,o,i,s)}function tK(e,t,r,n,a,o,i,s){t_(e,t+4*a,a,1,8,o,i,s),t_(r,n+4*a,a,1,8,o,i,s)}function tV(e,t,r,n,a,o,i,s){t_(e,t+4,1,a,8,o,i,s),t_(r,n+4,1,a,8,o,i,s)}function tq(){this.ba=new ei,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new el,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function tG(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function tz(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function tW(){this.ua=0,this.Wa=new L,this.vb=new L,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new h,this.yc=new d}function t$(){this.xb=this.a=0,this.l=new eG,this.ca=new ei,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new v,this.Pb=0,this.wd=new v,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new tW,this.ab=0,this.gc=i(4,tz),this.Oc=0}function tX(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new eG,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function tY(e,t,r,n,a,o,i){for(e=null==e?0:e[t+0],t=0;t<i;++t)a[o+t]=e+r[n+t]&255,e=a[o+t]}function tJ(e,t,r,n,a,o,i){var s;if(null==e)tY(null,null,r,n,a,o,i);else for(s=0;s<i;++s)a[o+s]=e[t+s]+r[n+s]&255}function tZ(e,t,r,n,a,o,i){if(null==e)tY(null,null,r,n,a,o,i);else{var s,l=e[t+0],A=l,c=l;for(s=0;s<i;++s)A=c+(l=e[t+s])-A,c=r[n+s]+(-256&A?0>A?0:255:A)&255,A=l,a[o+s]=c}}function t0(e,t,r,n,a,o){for(;0<a--;){var i,s=t+(r?1:0),l=t+(r?0:3);for(i=0;i<n;++i){var A=e[l+4*i];255!=A&&(A*=32897,e[s+4*i+0]=e[s+4*i+0]*A>>23,e[s+4*i+1]=e[s+4*i+1]*A>>23,e[s+4*i+2]=e[s+4*i+2]*A>>23)}t+=o}}function t1(e,t,r,n,a){for(;0<n--;){var o;for(o=0;o<r;++o){var i=e[t+2*o+0],s=15&(A=e[t+2*o+1]),l=4369*s,A=(240&A|A>>4)*l>>16;e[t+2*o+0]=(240&i|i>>4)*l>>16&240|(15&i|i<<4)*l>>16>>4&15,e[t+2*o+1]=240&A|s}t+=a}}function t2(e,t,r,n,a,o,i,s){var l,A,c=255;for(A=0;A<a;++A){for(l=0;l<n;++l){var d=e[t+l];o[i+4*l]=d,c&=d}t+=r,i+=s}return 255!=c}function t5(e,t,r,n,a){var o;for(o=0;o<a;++o)r[n+o]=e[t+o]>>8}function t4(){r0=t0,r1=t1,r2=t2,r5=t5}function t3(r,n,a){e[r]=function(e,r,o,i,s,l,A,c,d,u,h,f,p,m,g,x,b){var y,v=b-1>>1,w=s[l+0]|A[c+0]<<16,k=d[u+0]|h[f+0]<<16;t(null!=e);var B=3*w+k+131074>>2;for(n(e[r+0],255&B,B>>16,p,m),null!=o&&(B=3*k+w+131074>>2,n(o[i+0],255&B,B>>16,g,x)),y=1;y<=v;++y){var j=s[l+y]|A[c+y]<<16,C=d[u+y]|h[f+y]<<16,N=w+j+k+C+524296,S=N+2*(j+k)>>3;B=S+w>>1,w=(N=N+2*(w+C)>>3)+j>>1,n(e[r+2*y-1],255&B,B>>16,p,m+(2*y-1)*a),n(e[r+2*y-0],255&w,w>>16,p,m+(2*y-0)*a),null!=o&&(B=N+k>>1,w=S+C>>1,n(o[i+2*y-1],255&B,B>>16,g,x+(2*y-1)*a),n(o[i+2*y+0],255&w,w>>16,g,x+(2*y+0)*a)),w=j,k=C}1&b||(B=3*w+k+131074>>2,n(e[r+b-1],255&B,B>>16,p,m+(b-1)*a),null!=o&&(B=3*k+w+131074>>2,n(o[i+b-1],255&B,B>>16,g,x+(b-1)*a)))}}function t6(){nT[nn]=nD,nT[na]=nH,nT[no]=nM,nT[ni]=nR,nT[ns]=nK,nT[nl]=nV,nT[nA]=nq,nT[nc]=nH,nT[nd]=nR,nT[nu]=nK,nT[nh]=nV}function t8(e){return e&~nY?0>e?0:255:e>>nX}function t7(e,t){return t8((19077*e>>8)+(26149*t>>8)-14234)}function t9(e,t,r){return t8((19077*e>>8)-(6419*t>>8)-(13320*r>>8)+8708)}function re(e,t){return t8((19077*e>>8)+(33050*t>>8)-17685)}function rt(e,t,r,n,a){n[a+0]=t7(e,r),n[a+1]=t9(e,t,r),n[a+2]=re(e,t)}function rr(e,t,r,n,a){n[a+0]=re(e,t),n[a+1]=t9(e,t,r),n[a+2]=t7(e,r)}function rn(e,t,r,n,a){var o=t9(e,t,r);t=o<<3&224|re(e,t)>>3,n[a+0]=248&t7(e,r)|o>>5,n[a+1]=t}function ra(e,t,r,n,a){var o=240&re(e,t)|15;n[a+0]=240&t7(e,r)|t9(e,t,r)>>4,n[a+1]=o}function ro(e,t,r,n,a){n[a+0]=255,rt(e,t,r,n,a+1)}function ri(e,t,r,n,a){rr(e,t,r,n,a),n[a+3]=255}function rs(e,t,r,n,a){rt(e,t,r,n,a),n[a+3]=255}function eq(e,t){return 0>e?0:e>t?t:e}function rl(t,r,n){e[t]=function(e,t,a,o,i,s,l,A,c){for(var d=A+(-2&c)*n;A!=d;)r(e[t+0],a[o+0],i[s+0],l,A),r(e[t+1],a[o+0],i[s+0],l,A+n),t+=2,++o,++s,A+=2*n;1&c&&r(e[t+0],a[o+0],i[s+0],l,A)}}function rA(e,t,r){return 0==r?0==e?0==t?6:5:0==t?4:0:r}function rc(e,t,r,n,a){switch(e>>>30){case 3:rQ(t,r,n,a,0);break;case 2:rT(t,r,n,a);break;case 1:rM(t,r,n,a)}}function rd(e,t){var r,o,i=t.M,s=t.Nb,l=e.oc,A=e.pc+40,c=e.oc,d=e.pc+584,u=e.oc,h=e.pc+600;for(r=0;16>r;++r)l[A+32*r-1]=129;for(r=0;8>r;++r)c[d+32*r-1]=129,u[h+32*r-1]=129;for(0<i?l[A-1-32]=c[d-1-32]=u[h-1-32]=129:(a(l,A-32-1,127,21),a(c,d-32-1,127,9),a(u,h-32-1,127,9)),o=0;o<e.za;++o){var f=t.ya[t.aa+o];if(0<o){for(r=-1;16>r;++r)n(l,A+32*r-4,l,A+32*r+12,4);for(r=-1;8>r;++r)n(c,d+32*r-4,c,d+32*r+4,4),n(u,h+32*r-4,u,h+32*r+4,4)}var p=e.Gd,m=e.Hd+o,g=f.ad,x=f.Hc;if(0<i&&(n(l,A-32,p[m].y,0,16),n(c,d-32,p[m].f,0,8),n(u,h-32,p[m].ea,0,8)),f.Za){var b=l,y=A-32+16;for(0<i&&(o>=e.za-1?a(b,y,p[m].y[15],4):n(b,y,p[m+1].y,0,4)),r=0;4>r;r++)b[y+128+r]=b[y+256+r]=b[y+384+r]=b[y+0+r];for(r=0;16>r;++r,x<<=2)b=l,y=A+n3[r],nI[f.Ob[r]](b,y),rc(x,g,16*+r,b,y)}else if(nP[b=rA(o,i,f.Ob[0])](l,A),0!=x)for(r=0;16>r;++r,x<<=2)rc(x,g,16*+r,l,A+n3[r]);for(r=f.Gc,nU[b=rA(o,i,f.Dd)](c,d),nU[b](u,h),x=g,b=c,y=d,255&(f=r>>0)&&(170&f?rD(x,256,b,y):rH(x,256,b,y)),f=u,x=h,255&(r>>=8)&&(170&r?rD(g,320,f,x):rH(g,320,f,x)),i<e.Ub-1&&(n(p[m].y,0,l,A+480,16),n(p[m].f,0,c,d+224,8),n(p[m].ea,0,u,h+224,8)),r=8*s*e.B,p=e.sa,m=e.ta+16*o+16*s*e.R,g=e.qa,f=e.ra+8*o+r,x=e.Ha,b=e.Ia+8*o+r,r=0;16>r;++r)n(p,m+r*e.R,l,A+32*r,16);for(r=0;8>r;++r)n(g,f+r*e.B,c,d+32*r,8),n(x,b+r*e.B,u,h+32*r,8)}}function ru(e,n,a,o,i,s,l,A,c){var d=[0],u=[0],h=0,f=null!=c?c.kd:0,p=null!=c?c:new tG;if(null==e||12>a)return 7;p.data=e,p.w=n,p.ha=a,n=[n],a=[a],p.gb=[p.gb];e:{var m=n,x=a,b=p.gb;if(t(null!=e),t(null!=x),t(null!=b),b[0]=0,12<=x[0]&&!r(e,m[0],"RIFF")){if(r(e,m[0]+8,"WEBP")){b=3;break e}var y=P(e,m[0]+4);if(12>y||4294967286<y){b=3;break e}if(f&&y>x[0]-8){b=7;break e}b[0]=y,m[0]+=12,x[0]-=12}b=0}if(0!=b)return b;for(y=0<p.gb[0],a=a[0];;){e:{var w=e;x=n,b=a;var k=d,B=u,j=m=[0];if((S=h=[h])[0]=0,8>b[0])b=7;else{if(!r(w,x[0],"VP8X")){if(10!=P(w,x[0]+4)){b=3;break e}if(18>b[0]){b=7;break e}var C=P(w,x[0]+8),N=1+O(w,x[0]+12);if(2147483648<=N*(w=1+O(w,x[0]+15))){b=3;break e}null!=j&&(j[0]=C),null!=k&&(k[0]=N),null!=B&&(B[0]=w),x[0]+=18,b[0]-=18,S[0]=1}b=0}}if(h=h[0],m=m[0],0!=b)return b;if(x=!!(2&m),!y&&h)return 3;if(null!=s&&(s[0]=!!(16&m)),null!=l&&(l[0]=x),null!=A&&(A[0]=0),l=0,m=0,h&&x&&null==c){b=0;break}if(4>a){b=7;break}if(y&&h||!y&&!h&&!r(e,n[0],"ALPH")){a=[a],p.na=[p.na],p.P=[p.P],p.Sa=[p.Sa];e:{C=e,b=n,y=a;var S=p.gb;k=p.na,B=p.P,j=p.Sa,N=22,t(null!=C),t(null!=y),w=b[0];var F=y[0];for(t(null!=k),t(null!=j),k[0]=null,B[0]=null,j[0]=0;;){if(b[0]=w,y[0]=F,8>F){b=7;break e}var E=P(C,w+4);if(4294967286<E){b=3;break e}var I=8+E+1&-2;if(N+=I,0<S&&N>S){b=3;break e}if(!r(C,w,"VP8 ")||!r(C,w,"VP8L")){b=0;break e}if(F[0]<I){b=7;break e}r(C,w,"ALPH")||(k[0]=C,B[0]=w+8,j[0]=E),w+=I,F-=I}}if(a=a[0],p.na=p.na[0],p.P=p.P[0],p.Sa=p.Sa[0],0!=b)break}a=[a],p.Ja=[p.Ja],p.xa=[p.xa];e:if(S=e,b=n,y=a,k=p.gb[0],B=p.Ja,j=p.xa,w=!r(S,C=b[0],"VP8 "),N=!r(S,C,"VP8L"),t(null!=S),t(null!=y),t(null!=B),t(null!=j),8>y[0])b=7;else{if(w||N){if(S=P(S,C+4),12<=k&&S>k-12){b=3;break e}if(f&&S>y[0]-8){b=7;break e}B[0]=S,b[0]+=8,y[0]-=8,j[0]=N}else j[0]=5<=y[0]&&47==S[C+0]&&!(S[C+4]>>5),B[0]=y[0];b=0}if(a=a[0],p.Ja=p.Ja[0],p.xa=p.xa[0],n=n[0],0!=b)break;if(4294967286<p.Ja)return 3;if(null==A||x||(A[0]=p.xa?2:1),l=[l],m=[m],p.xa){if(5>a){b=7;break}A=l,f=m,x=s,null==e||5>a?e=0:5<=a&&47==e[n+0]&&!(e[n+4]>>5)?(y=[0],S=[0],k=[0],g(B=new v,e,n,a),ep(B,y,S,k)?(null!=A&&(A[0]=y[0]),null!=f&&(f[0]=S[0]),null!=x&&(x[0]=k[0]),e=1):e=0):e=0}else{if(10>a){b=7;break}A=m,null==e||10>a||!e$(e,n+3,a-3)?e=0:(f=e[n+0]|e[n+1]<<8|e[n+2]<<16,x=16383&(e[n+7]<<8|e[n+6]),e=16383&(e[n+9]<<8|e[n+8]),1&f||3<(f>>1&7)||!(f>>4&1)||f>>5>=p.Ja||!x||!e?e=0:(l&&(l[0]=x),A&&(A[0]=e),e=1))}if(!e||(l=l[0],m=m[0],h&&(0!=l||0!=m)))return 3;null!=c&&(c[0]=p,c.offset=n-c.w,t(4294967286>n-c.w),t(c.offset==c.ha-a));break}return 0==b||7==b&&h&&null==c?(null!=s&&(s[0]|=null!=p.na&&0<p.na.length),null!=o&&(o[0]=l),null!=i&&(i[0]=m),0):b}function rh(e,t,r){var n=t.width,a=t.height,o=0,i=0,s=n,l=a;if(t.Da=null!=e&&0<e.Da,t.Da&&(s=e.cd,l=e.bd,o=e.v,i=e.j,11>r||(o&=-2,i&=-2),0>o||0>i||0>=s||0>=l||o+s>n||i+l>a))return 0;if(t.v=o,t.j=i,t.va=o+s,t.o=i+l,t.U=s,t.T=l,t.da=null!=e&&0<e.da,t.da){if(!_(s,l,r=[e.ib],o=[e.hb]))return 0;t.ib=r[0],t.hb=o[0]}return t.ob=null!=e&&e.ob,t.Kb=null==e||!e.Sd,t.da&&(t.ob=t.ib<3*n/4&&t.hb<3*a/4,t.Kb=0),1}function rf(e){if(null==e)return 2;if(11>e.S){var t=e.f.RGBA;t.fb+=(e.height-1)*t.A,t.A=-t.A}else t=e.f.kb,e=e.height,t.O+=(e-1)*t.fa,t.fa=-t.fa,t.N+=(e-1>>1)*t.Ab,t.Ab=-t.Ab,t.W+=(e-1>>1)*t.Db,t.Db=-t.Db,null!=t.F&&(t.J+=(e-1)*t.lb,t.lb=-t.lb);return 0}function rp(e,t,r,n){if(null==n||0>=e||0>=t)return 2;if(null!=r){if(r.Da){var a=r.cd,i=r.bd,s=-2&r.v,l=-2&r.j;if(0>s||0>l||0>=a||0>=i||s+a>e||l+i>t)return 2;e=a,t=i}if(r.da){if(!_(e,t,a=[r.ib],i=[r.hb]))return 2;e=a[0],t=i[0]}}n.width=e,n.height=t;e:{var A=n.width,c=n.height;if(e=n.S,0>=A||0>=c||!(e>=nn&&13>e))e=2;else{if(0>=n.Rd&&null==n.sd){s=i=a=t=0;var d=(l=A*n7[e])*c;if(11>e||(i=(c+1)/2*(t=(A+1)/2),12==e&&(s=(a=A)*c)),null==(c=o(d+2*i+s))){e=1;break e}n.sd=c,11>e?((A=n.f.RGBA).eb=c,A.fb=0,A.A=l,A.size=d):((A=n.f.kb).y=c,A.O=0,A.fa=l,A.Fd=d,A.f=c,A.N=0+d,A.Ab=t,A.Cd=i,A.ea=c,A.W=0+d+i,A.Db=t,A.Ed=i,12==e&&(A.F=c,A.J=0+d+2*i),A.Tc=s,A.lb=a)}if(t=1,a=n.S,i=n.width,s=n.height,a>=nn&&13>a){if(11>a)t&=(l=Math.abs((e=n.f.RGBA).A))*(s-1)+i<=e.size,t&=l>=i*n7[a],t&=null!=e.eb;else{e=n.f.kb,l=(i+1)/2,d=(s+1)/2,A=Math.abs(e.fa),c=Math.abs(e.Ab);var u=Math.abs(e.Db),h=Math.abs(e.lb),f=h*(s-1)+i;t&=A*(s-1)+i<=e.Fd,t&=c*(d-1)+l<=e.Cd,t=(t&=u*(d-1)+l<=e.Ed)&A>=i&c>=l&u>=l&null!=e.y&null!=e.f&null!=e.ea,12==a&&(t&=h>=i,t&=f<=e.Tc,t&=null!=e.F)}}else t=0;e=t?0:2}}return 0!=e||null!=r&&r.fd&&(e=rf(n)),e}var rm=64,rg=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],rx=24,rb=32,ry=8,rv=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];D("Predictor0","PredictorAdd0"),e.Predictor0=function(){return 4278190080},e.Predictor1=function(e){return e},e.Predictor2=function(e,t,r){return t[r+0]},e.Predictor3=function(e,t,r){return t[r+1]},e.Predictor4=function(e,t,r){return t[r-1]},e.Predictor5=function(e,t,r){return H(H(e,t[r+1]),t[r+0])},e.Predictor6=function(e,t,r){return H(e,t[r-1])},e.Predictor7=function(e,t,r){return H(e,t[r+0])},e.Predictor8=function(e,t,r){return H(t[r-1],t[r+0])},e.Predictor9=function(e,t,r){return H(t[r+0],t[r+1])},e.Predictor10=function(e,t,r){return H(H(e,t[r-1]),H(t[r+0],t[r+1]))},e.Predictor11=function(e,t,r){var n=t[r+0];return 0>=V(n>>24&255,e>>24&255,(t=t[r-1])>>24&255)+V(n>>16&255,e>>16&255,t>>16&255)+V(n>>8&255,e>>8&255,t>>8&255)+V(255&n,255&e,255&t)?n:e},e.Predictor12=function(e,t,r){var n=t[r+0];return(R((e>>24&255)+(n>>24&255)-((t=t[r-1])>>24&255))<<24|R((e>>16&255)+(n>>16&255)-(t>>16&255))<<16|R((e>>8&255)+(n>>8&255)-(t>>8&255))<<8|R((255&e)+(255&n)-(255&t)))>>>0},e.Predictor13=function(e,t,r){var n=t[r-1];return(K((e=H(e,t[r+0]))>>24&255,n>>24&255)<<24|K(e>>16&255,n>>16&255)<<16|K(e>>8&255,n>>8&255)<<8|K(e>>0&255,n>>0&255))>>>0};var rw=e.PredictorAdd0;e.PredictorAdd1=q,D("Predictor2","PredictorAdd2"),D("Predictor3","PredictorAdd3"),D("Predictor4","PredictorAdd4"),D("Predictor5","PredictorAdd5"),D("Predictor6","PredictorAdd6"),D("Predictor7","PredictorAdd7"),D("Predictor8","PredictorAdd8"),D("Predictor9","PredictorAdd9"),D("Predictor10","PredictorAdd10"),D("Predictor11","PredictorAdd11"),D("Predictor12","PredictorAdd12"),D("Predictor13","PredictorAdd13");var rk=e.PredictorAdd2;$("ColorIndexInverseTransform","MapARGB","32b",function(e){return e>>8&255},function(e){return e}),$("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(e){return e},function(e){return e>>8&255});var rB,rj=e.ColorIndexInverseTransform,rC=e.MapARGB,rN=e.VP8LColorIndexInverseTransformAlpha,rS=e.MapAlpha,rF=e.VP8LPredictorsAdd=[];rF.length=16,(e.VP8LPredictors=[]).length=16,(e.VP8LPredictorsAdd_C=[]).length=16,(e.VP8LPredictors_C=[]).length=16;var rE,rO,rP,rI,rU,rL,r_,rQ,rT,rD,rM,rH,rR,rK,rV,rq,rG,rz,rW,r$,rX,rY,rJ,rZ,r0,r1,r2,r5,r4=o(511),r3=o(2041),r6=o(225),r8=o(767),r7=0,r9=r3,ne=r6,nt=r8,nr=r4,nn=0,na=1,no=2,ni=3,ns=4,nl=5,nA=6,nc=7,nd=8,nu=9,nh=10,nf=[2,3,7],np=[3,3,11],nm=[280,256,256,256,40],ng=[0,1,1,1,0],nx=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],nb=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],ny=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],nv=8,nw=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],nk=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],nB=null,nj=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],nC=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],nN=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],nS=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],nF=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],nE=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],nO=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],nP=[],nI=[],nU=[],nL=1,n_=2,nQ=[],nT=[];t3("UpsampleRgbLinePair",rt,3),t3("UpsampleBgrLinePair",rr,3),t3("UpsampleRgbaLinePair",rs,4),t3("UpsampleBgraLinePair",ri,4),t3("UpsampleArgbLinePair",ro,4),t3("UpsampleRgba4444LinePair",ra,2),t3("UpsampleRgb565LinePair",rn,2);var nD=e.UpsampleRgbLinePair,nM=e.UpsampleBgrLinePair,nH=e.UpsampleRgbaLinePair,nR=e.UpsampleBgraLinePair,nK=e.UpsampleArgbLinePair,nV=e.UpsampleRgba4444LinePair,nq=e.UpsampleRgb565LinePair,nG=16,nz=32768,nW=-227,n$=482,nX=6,nY=16383,nJ=0,nZ=o(256),n0=o(256),n1=o(256),n2=o(256),n5=o(n$-nW),n4=o(n$-nW);rl("YuvToRgbRow",rt,3),rl("YuvToBgrRow",rr,3),rl("YuvToRgbaRow",rs,4),rl("YuvToBgraRow",ri,4),rl("YuvToArgbRow",ro,4),rl("YuvToRgba4444Row",ra,2),rl("YuvToRgb565Row",rn,2);var n3=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],n6=[0,2,8],n8=[8,7,6,4,4,2,2,2,1,1,1,1];this.WebPDecodeRGBA=function(e,r,s,l,A){var c=na,d=new tq,u=new ei;d.ba=u,u.S=c,u.width=[u.width],u.height=[u.height];var h=u.width,f=u.height,p=new es;if(null==p||null==e)var m=2;else t(null!=p),m=ru(e,r,s,p.width,p.height,p.Pd,p.Qd,p.format,null);if(0!=m?h=0:(null!=h&&(h[0]=p.width[0]),null!=f&&(f[0]=p.height[0]),h=1),h){u.width=u.width[0],u.height=u.height[0],null!=l&&(l[0]=u.width),null!=A&&(A[0]=u.height);e:{if(l=new eG,(A=new tG).data=e,A.w=r,A.ha=s,A.kd=1,r=[0],t(null!=A),(0==(e=ru(A.data,A.w,A.ha,null,null,null,r,null,A))||7==e)&&r[0]&&(e=4),0==(r=e)){if(t(null!=d),l.data=A.data,l.w=A.w+A.offset,l.ha=A.ha-A.offset,l.put=eh,l.ac=eu,l.bc=ef,l.ma=d,A.xa){if(null==(e=eS())){d=1;break e}if(function(e,r){for(var n=[0],a=[0],o=[0];;){if(null==e)return 0;if(null==r)return e.a=2,0;if(e.l=r,e.a=0,g(e.m,r.data,r.w,r.ha),!ep(e.m,n,a,o)){e.a=3;break}if(e.xb=n_,r.width=n[0],r.height=a[0],!eF(n[0],a[0],1,e,null))break;return 1}return t(0!=e.a),0}(e,l)){if(l=0==(r=rp(l.width,l.height,d.Oa,d.ba))){t:{for(l=e;;){if(null==l){l=0;break t}if(t(null!=l.s.yc),t(null!=l.s.Ya),t(0<l.s.Wb),t(null!=(s=l.l)),t(null!=(A=s.ma)),0!=l.xb){if(l.ca=A.ba,l.tb=A.tb,t(null!=l.ca),!rh(A.Oa,s,ni)){l.a=2;break}if(!eE(l,s.width)||s.da)break;if((s.da||en(l.ca.S))&&t4(),11>l.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),null!=l.ca.f.kb.F&&t4()),l.Pb&&0<l.s.ua&&null==l.s.vb.X&&!I(l.s.vb,l.s.Wa.Xa)){l.a=1;break}l.xb=0}if(!eC(l,l.V,l.Ba,l.c,l.i,s.o,ew))break;A.Dc=l.Ma,l=1;break t}t(0!=l.a),l=0}l=!l}l&&(r=e.a)}else r=e.a}else if((e=new ez).Fa=A.na,e.P=A.P,e.qc=A.Sa,eX(e,l)){if(0==(r=rp(l.width,l.height,d.Oa,d.ba))){if(e.Aa=0,s=d.Oa,t(null!=(A=e)),null!=s){if(0<(h=0>(h=s.Md)?0:100<h?255:255*h/100)){for(f=p=0;4>f;++f)12>(m=A.pb[f]).lc&&(m.ia=h*n8[0>m.lc?0:m.lc]>>3),p|=m.ia;p&&(alert("todo:VP8InitRandom"),A.ia=1)}A.Ga=s.Id,100<A.Ga?A.Ga=100:0>A.Ga&&(A.Ga=0)}(function(e,r){if(null==e)return 0;if(null==r)return eW(e,2,"NULL VP8Io parameter in VP8Decode().");if(!e.cb&&!eX(e,r))return 0;if(t(e.cb),null==r.ac||r.ac(r)){r.ob&&(e.L=0);var s=n6[e.L];if(2==e.L?(e.yb=0,e.zb=0):(e.yb=r.v-s>>4,e.zb=r.j-s>>4,0>e.yb&&(e.yb=0),0>e.zb&&(e.zb=0)),e.Va=r.o+15+s>>4,e.Hb=r.va+15+s>>4,e.Hb>e.za&&(e.Hb=e.za),e.Va>e.Ub&&(e.Va=e.Ub),0<e.L){var l,A=e.ed;for(s=0;4>s;++s){if(e.Qa.Cb){var c=e.Qa.Lb[s];e.Qa.Fb||(c+=A.Tb)}else c=A.Tb;for(l=0;1>=l;++l){var d=e.gd[s][l],u=c;if(A.Pc&&(u+=A.vd[0],l&&(u+=A.od[0])),0<(u=0>u?0:63<u?63:u)){var h=u;0<A.wb&&(h=4<A.wb?h>>2:h>>1)>9-A.wb&&(h=9-A.wb),1>h&&(h=1),d.dd=h,d.tc=2*u+h,d.ld=40<=u?2:15<=u?1:0}else d.tc=0;d.La=l}}}s=0}else eW(e,6,"Frame setup failed"),s=e.a;if(s=0==s){if(s){e.$c=0,0<e.Aa||(e.Ic=1);e:{s=e.Ic,A=4*(h=e.za);var f=32*h,p=h+1,m=0<e.L?h*(0<e.Aa?2:1):0,x=(2==e.Aa?2:1)*h;if((d=A+832+(l=3*(16*s+n6[e.L])/2*f)+(c=null!=e.Fa&&0<e.Fa.length?e.Kc.c*e.Kc.i:0))!=d)s=0;else{if(d>e.Vb){if(e.Vb=0,e.Ec=o(d),e.Fc=0,null==e.Ec){s=eW(e,1,"no memory during frame initialization.");break e}e.Vb=d}d=e.Ec,u=e.Fc,e.Ac=d,e.Bc=u,u+=A,e.Gd=i(f,eK),e.Hd=0,e.rb=i(p+1,eD),e.sb=1,e.wa=m?i(m,eT):null,e.Y=0,e.D.Nb=0,e.D.wa=e.wa,e.D.Y=e.Y,0<e.Aa&&(e.D.Y+=h),t(!0),e.oc=d,e.pc=u,u+=832,e.ya=i(x,eH),e.aa=0,e.D.ya=e.ya,e.D.aa=e.aa,2==e.Aa&&(e.D.aa+=h),e.R=16*h,e.B=8*h,h=(f=n6[e.L])*e.R,f=f/2*e.B,e.sa=d,e.ta=u+h,e.qa=e.sa,e.ra=e.ta+16*s*e.R+f,e.Ha=e.qa,e.Ia=e.ra+8*s*e.B+f,e.$c=0,u+=l,e.mb=c?d:null,e.nb=c?u:null,t(u+c<=e.Fc+e.Vb),eJ(e),a(e.Ac,e.Bc,0,A),s=1}}if(s){if(r.ka=0,r.y=e.sa,r.O=e.ta,r.f=e.qa,r.N=e.ra,r.ea=e.Ha,r.Vd=e.Ia,r.fa=e.R,r.Rc=e.B,r.F=null,r.J=0,!r7){for(s=-255;255>=s;++s)r4[255+s]=0>s?-s:s;for(s=-1020;1020>=s;++s)r3[1020+s]=-128>s?-128:127<s?127:s;for(s=-112;112>=s;++s)r6[112+s]=-16>s?-16:15<s?15:s;for(s=-255;510>=s;++s)r8[255+s]=0>s?0:255<s?255:s;r7=1}r_=e7,rQ=e4,rD=e3,rM=e6,rH=e8,rT=e5,rR=tQ,rK=tT,rV=tH,rq=tR,rG=tD,rz=tM,rW=tK,r$=tV,rX=tO,rY=tP,rJ=tI,rZ=tU,nI[0]=th,nI[1]=te,nI[2]=td,nI[3]=tu,nI[4]=tf,nI[5]=tm,nI[6]=tp,nI[7]=tg,nI[8]=tb,nI[9]=tx,nP[0]=ti,nP[1]=tr,nP[2]=tn,nP[3]=ta,nP[4]=ts,nP[5]=tl,nP[6]=tA,nU[0]=tk,nU[1]=tt,nU[2]=ty,nU[3]=tv,nU[4]=tj,nU[5]=tB,nU[6]=tC,s=1}else s=0}s&&(s=function(e,r){for(e.M=0;e.M<e.Va;++e.M){var i,s=e.Jc[e.M&e.Xb],l=e.m,A=e;for(i=0;i<A.za;++i){var c=l,d=A,u=d.Ac,h=d.Bc+4*i,f=d.zc,p=d.ya[d.aa+i];if(d.Qa.Bb?p.$b=S(c,d.Pa.jb[0])?2+S(c,d.Pa.jb[2]):S(c,d.Pa.jb[1]):p.$b=0,d.kc&&(p.Ad=S(c,d.Bd)),p.Za=!S(c,145)+0,p.Za){var m=p.Ob,x=0;for(d=0;4>d;++d){var b,y=f[0+d];for(b=0;4>b;++b){y=nF[u[h+b]][y];for(var v=nN[S(c,y[0])];0<v;)v=nN[2*v+S(c,y[v])];y=-v,u[h+b]=y}n(m,x,u,h,4),x+=4,f[0+d]=y}}else y=S(c,156)?S(c,128)?1:3:S(c,163)?2:0,p.Ob[0]=y,a(u,h,y,4),a(f,0,y,4);p.Dd=S(c,142)?S(c,114)?S(c,183)?1:3:2:0}if(A.m.Ka)return eW(e,7,"Premature end-of-partition0 encountered.");for(;e.ja<e.za;++e.ja){if(A=s,c=(l=e).rb[l.sb-1],u=l.rb[l.sb+l.ja],i=l.ya[l.aa+l.ja],h=l.kc?i.Ad:0)c.la=u.la=0,i.Za||(c.Na=u.Na=0),i.Hc=0,i.Gc=0,i.ia=0;else{if(c=u,u=A,h=l.Pa.Xc,f=l.ya[l.aa+l.ja],p=l.pb[f.$b],d=f.ad,m=0,x=l.rb[l.sb-1],y=b=0,a(d,m,0,384),f.Za)var w,B,C=0,N=h[3];else{v=o(16);var F=c.Na+x.Na;if(F=nB(u,h[1],F,p.Eb,0,v,0),c.Na=x.Na=(0<F)+0,1<F)r_(v,0,d,m);else{var E=v[0]+3>>3;for(v=0;256>v;v+=16)d[m+v]=E}C=1,N=h[0]}var O=15&c.la,P=15&x.la;for(v=0;4>v;++v){var I=1&P;for(E=B=0;4>E;++E)O=O>>1|(I=(F=nB(u,N,F=I+(1&O),p.Sc,C,d,m))>C)<<7,B=B<<2|(3<F?3:1<F?2:0!=d[m+0]),m+=16;O>>=4,P=P>>1|I<<7,b=(b<<8|B)>>>0}for(N=O,C=P>>4,w=0;4>w;w+=2){for(B=0,O=c.la>>4+w,P=x.la>>4+w,v=0;2>v;++v){for(I=1&P,E=0;2>E;++E)F=I+(1&O),O=O>>1|(I=0<(F=nB(u,h[2],F,p.Qc,0,d,m)))<<3,B=B<<2|(3<F?3:1<F?2:0!=d[m+0]),m+=16;O>>=2,P=P>>1|I<<5}y|=B<<4*w,N|=O<<4<<w,C|=(240&P)<<w}c.la=N,x.la=C,f.Hc=b,f.Gc=y,f.ia=43690&y?0:p.ia,h=!(b|y)}if(0<l.L&&(l.wa[l.Y+l.ja]=l.gd[i.$b][i.Za],l.wa[l.Y+l.ja].La|=!h),A.Ka)return eW(e,7,"Premature end-of-file encountered.")}if(eJ(e),l=r,A=1,i=(s=e).D,c=0<s.L&&s.M>=s.zb&&s.M<=s.Va,0==s.Aa)e:{if(i.M=s.M,i.uc=c,rd(s,i),A=1,i=(B=s.D).Nb,c=(y=n6[s.L])*s.R,u=y/2*s.B,v=16*i*s.R,E=8*i*s.B,h=s.sa,f=s.ta-c+v,p=s.qa,d=s.ra-u+E,m=s.Ha,x=s.Ia-u+E,P=0==(O=B.M),b=O>=s.Va-1,2==s.Aa&&rd(s,B),B.uc)for(I=(F=s).D.M,t(F.D.uc),B=F.yb;B<F.Hb;++B){C=B,N=I;var U=(L=(V=F).D).Nb;w=V.R;var L=L.wa[L.Y+C],_=V.sa,Q=V.ta+16*U*w+16*C,T=L.dd,D=L.tc;if(0!=D){if(t(3<=D),1==V.L)0<C&&rY(_,Q,w,D+4),L.La&&rZ(_,Q,w,D),0<N&&rX(_,Q,w,D+4),L.La&&rJ(_,Q,w,D);else{var M=V.B,H=V.qa,R=V.ra+8*U*M+8*C,K=V.Ha,V=V.Ia+8*U*M+8*C;U=L.ld,0<C&&(rK(_,Q,w,D+4,T,U),rq(H,R,K,V,M,D+4,T,U)),L.La&&(rz(_,Q,w,D,T,U),r$(H,R,K,V,M,D,T,U)),0<N&&(rR(_,Q,w,D+4,T,U),rV(H,R,K,V,M,D+4,T,U)),L.La&&(rG(_,Q,w,D,T,U),rW(H,R,K,V,M,D,T,U))}}}if(s.ia&&alert("todo:DitherRow"),null!=l.put){if(B=16*O,O=16*(O+1),P?(l.y=s.sa,l.O=s.ta+v,l.f=s.qa,l.N=s.ra+E,l.ea=s.Ha,l.W=s.Ia+E):(B-=y,l.y=h,l.O=f,l.f=p,l.N=d,l.ea=m,l.W=x),b||(O-=y),O>l.o&&(O=l.o),l.F=null,l.J=null,null!=s.Fa&&0<s.Fa.length&&B<O&&(l.J=function(e,r,a,i){var s=r.width,l=r.o;if(t(null!=e&&null!=r),0>a||0>=i||a+i>l)return null;if(!e.Cc){if(null==e.ga){if(e.ga=new tX,(C=null==e.ga)||(C=r.width*r.o,t(0==e.Gb.length),e.Gb=o(C),e.Uc=0,null==e.Gb?C=0:(e.mb=e.Gb,e.nb=e.Uc,e.rc=null,C=1),C=!C),!C){C=e.ga;var A=e.Fa,c=e.P,d=e.qc,u=e.mb,h=e.nb,f=c+1,p=d-1,m=C.l;if(t(null!=A&&null!=u&&null!=r),nQ[0]=null,nQ[1]=tY,nQ[2]=tJ,nQ[3]=tZ,C.ca=u,C.tb=h,C.c=r.width,C.i=r.height,t(0<C.c&&0<C.i),1>=d)r=0;else if(C.$a=A[c+0]>>0&3,C.Z=A[c+0]>>2&3,C.Lc=A[c+0]>>4&3,c=A[c+0]>>6&3,0>C.$a||1<C.$a||4<=C.Z||1<C.Lc||c)r=0;else if(m.put=eh,m.ac=eu,m.bc=ef,m.ma=C,m.width=r.width,m.height=r.height,m.Da=r.Da,m.v=r.v,m.va=r.va,m.j=r.j,m.o=r.o,C.$a)e:{for(t(1==C.$a),r=eS();;){if(null==r){r=0;break e}if(t(null!=C),C.mc=r,r.c=C.c,r.i=C.i,r.l=C.l,r.l.ma=C,r.l.width=C.c,r.l.height=C.i,r.a=0,g(r.m,A,f,p),!eF(C.c,C.i,1,r,null)||(1==r.ab&&3==r.gc[0].hc&&ek(r.s)?(C.ic=1,A=r.c*r.i,r.Ta=null,r.Ua=0,r.V=o(A),r.Ba=0,null==r.V?(r.a=1,r=0):r=1):(C.ic=0,r=eE(r,C.c)),!r))break;r=1;break e}C.mc=null,r=0}else r=p>=C.c*C.i;C=!r}if(C)return null;1!=e.ga.Lc?e.Ga=0:i=l-a}t(null!=e.ga),t(a+i<=l);e:{if(r=(A=e.ga).c,l=A.l.o,0==A.$a){if(f=e.rc,p=e.Vc,m=e.Fa,c=e.P+1+a*r,d=e.mb,u=e.nb+a*r,t(c<=e.P+e.qc),0!=A.Z)for(t(null!=nQ[A.Z]),C=0;C<i;++C)nQ[A.Z](f,p,m,c,d,u,r),f=d,p=u,u+=r,c+=r;else for(C=0;C<i;++C)n(d,u,m,c,r),f=d,p=u,u+=r,c+=r;e.rc=f,e.Vc=p}else{if(t(null!=A.mc),r=a+i,t(null!=(C=A.mc)),t(r<=C.i),C.C>=r)r=1;else if(A.ic||t4(),A.ic){A=C.V,f=C.Ba,p=C.c;var x=C.i,b=(m=1,c=C.$/p,d=C.$%p,u=C.m,h=C.s,C.$),y=p*x,v=p*r,w=h.wc,B=b<v?ey(h,d,c):null;t(b<=y),t(r<=x),t(ek(h));t:for(;;){for(;!u.h&&b<v;){if(d&w||(B=ey(h,d,c)),t(null!=B),j(u),256>(x=ex(B.G[0],B.H[0],u)))A[f+b]=x,++b,++d>=p&&(d=0,++c<=r&&!(c%16)&&ej(C,c));else{if(!(280>x)){m=0;break t}x=em(x-256,u);var C,N,S=ex(B.G[4],B.H[4],u);if(j(u),!(b>=(S=eg(p,S=em(S,u)))&&y-b>=x)){m=0;break t}for(N=0;N<x;++N)A[f+b+N]=A[f+b+N-S];for(b+=x,d+=x;d>=p;)d-=p,++c<=r&&!(c%16)&&ej(C,c);b<v&&d&w&&(B=ey(h,d,c))}t(u.h==k(u))}ej(C,c>r?r:c);break}!m||u.h&&b<y?(m=0,C.a=u.h?5:3):C.$=b,r=m}else r=eC(C,C.V,C.Ba,C.c,C.i,r,eO);if(!r){i=0;break e}}a+i>=l&&(e.Cc=1),i=1}if(!i)return null;if(e.Cc&&(null!=(i=e.ga)&&(i.mc=null),e.ga=null,0<e.Ga))return alert("todo:WebPDequantizeLevels"),null}return e.nb+a*s}(s,l,B,O-B),l.F=s.mb,null==l.F&&0==l.F.length)){A=eW(s,3,"Could not decode alpha data.");break e}B<l.j&&(y=l.j-B,B=l.j,t(!(1&y)),l.O+=s.R*y,l.N+=s.B*(y>>1),l.W+=s.B*(y>>1),null!=l.F&&(l.J+=l.width*y)),B<O&&(l.O+=l.v,l.N+=l.v>>1,l.W+=l.v>>1,null!=l.F&&(l.J+=l.v),l.ka=B-l.j,l.U=l.va-l.v,l.T=O-B,A=l.put(l))}i+1!=s.Ic||b||(n(s.sa,s.ta-c,h,f+16*s.R,c),n(s.qa,s.ra-u,p,d+8*s.B,u),n(s.Ha,s.Ia-u,m,x+8*s.B,u))}if(!A)return eW(e,6,"Output aborted.")}return 1}(e,r)),null!=r.bc&&r.bc(r),s&=1}return s?(e.cb=0,s):0})(e,l)||(r=e.a)}}else r=e.a;0==r&&null!=d.Oa&&d.Oa.fd&&(r=rf(d.ba))}d=r}c=0!=d?null:11>c?u.f.RGBA.eb:u.f.kb.y}else c=null;return c};var n7=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function A(e,t){return(e[t+0]<<0|e[t+1]<<8|e[t+2]<<16)>>>0}function c(e,t){return(e[t+0]<<0|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24)>>>0}new l;var d=[0],u=[0],h=[],f=new l,p=function(e,t){var r={},n=0,a=!1,o=0,i=0;if(r.frames=[],!function(e,t,r,n){for(var a=0;a<4;a++)if(e[t+a]!=r.charCodeAt(a))return!0;return!1}(e,t,"RIFF",0)){for(c(e,t+=4),t+=8;t<e.length;){var s,l,d,u=function(e,t){for(var r="",n=0;n<4;n++)r+=String.fromCharCode(e[t++]);return r}(e,t),h=c(e,t+=4);t+=4;var f=h+(1&h);switch(u){case"VP8 ":case"VP8L":void 0===r.frames[n]&&(r.frames[n]={}),(d=r.frames[n]).src_off=a?i:t-8,d.src_size=o+h+8,n++,a&&(a=!1,o=0,i=0);break;case"VP8X":(d=r.header={}).feature_flags=e[t];var p=t+4;d.canvas_width=1+A(e,p),p+=3,d.canvas_height=1+A(e,p),p+=3;break;case"ALPH":a=!0,o=f+8,i=t-8;break;case"ANIM":(d=r.header).bgcolor=c(e,t),p=t+4,d.loop_count=e[(s=p)+0]<<0|e[s+1]<<8,p+=2;break;case"ANMF":(d=r.frames[n]={}).offset_x=2*A(e,t),t+=3,d.offset_y=2*A(e,t),t+=3,d.width=1+A(e,t),t+=3,d.height=1+A(e,t),t+=3,d.duration=A(e,t),t+=3,l=e[t++],d.dispose=1&l,d.blend=l>>1&1}"ANMF"!=u&&(t+=f)}return r}}(e,0);p.response=e,p.rgbaoutput=!0,p.dataurl=!1;var m=p.header?p.header:null,g=p.frames?p.frames:null;if(m){m.loop_counter=m.loop_count,d=[m.canvas_height],u=[m.canvas_width];for(var x=0;x<g.length&&0!=g[x].blend;x++);}var b=g[0],y=f.WebPDecodeRGBA(e,b.src_off,b.src_size,u,d);b.rgba=y,b.imgwidth=u[0],b.imgheight=d[0];for(var v=0;v<u[0]*d[0]*4;v++)h[v]=y[v];return this.width=u,this.height=d,this.data=h,this}(function(e){var t=function(t,n,l,A){var c=4,d=o;switch(A){case e.image_compression.FAST:c=1,d=a;break;case e.image_compression.MEDIUM:c=6,d=i;break;case e.image_compression.SLOW:c=9,d=s}var u=si(t=r(t,n,l,d),{level:c});return e.__addimage__.arrayBufferToBinaryString(u)},r=function(e,t,r,n){for(var a,o,i,s=e.length/t,l=new Uint8Array(e.length+s),d=A(),u=0;u<s;u+=1){if(i=u*t,a=e.subarray(i,i+t),n)l.set(n(a,r,o),i+u);else{for(var h,f=d.length,p=[];h<f;h+=1)p[h]=d[h](a,r,o);var m=c(p.concat());l.set(p[m],i+u)}o=a}return l},n=function(e){var t=Array.apply([],e);return t.unshift(0),t},a=function(e,t){var r,n=[],a=e.length;n[0]=1;for(var o=0;o<a;o+=1)r=e[o-t]||0,n[o+1]=e[o]-r+256&255;return n},o=function(e,t,r){var n,a=[],o=e.length;a[0]=2;for(var i=0;i<o;i+=1)n=r&&r[i]||0,a[i+1]=e[i]-n+256&255;return a},i=function(e,t,r){var n,a,o=[],i=e.length;o[0]=3;for(var s=0;s<i;s+=1)n=e[s-t]||0,a=r&&r[s]||0,o[s+1]=e[s]+256-(n+a>>>1)&255;return o},s=function(e,t,r){var n,a=[],o=e.length;a[0]=4;for(var i=0;i<o;i+=1)n=l(e[i-t]||0,r&&r[i]||0,r&&r[i-t]||0),a[i+1]=e[i]-n+256&255;return a},l=function(e,t,r){if(e===t&&t===r)return e;var n=Math.abs(t-r),a=Math.abs(e-r),o=Math.abs(e+t-r-r);return n<=a&&n<=o?e:a<=o?t:r},A=function(){return[n,a,o,i,s]},c=function(e){var t=e.map(function(e){return e.reduce(function(e,t){return e+Math.abs(t)},0)});return t.indexOf(Math.min.apply(null,t))};e.processPNG=function(r,n,a,o){var i,s,l,A,c,d,u,h,f,p,m,g,x,b,y,v=this.decode.FLATE_DECODE,w="";if(this.__addimage__.isArrayBuffer(r)&&(r=new Uint8Array(r)),this.__addimage__.isArrayBufferView(r)){if(r=(l=new lM(r)).imgData,s=l.bits,i=l.colorSpace,c=l.colors,-1!==[4,6].indexOf(l.colorType)){if(8===l.bits){f=(h=32==l.pixelBitlength?new Uint32Array(l.decodePixels().buffer):16==l.pixelBitlength?new Uint16Array(l.decodePixels().buffer):new Uint8Array(l.decodePixels().buffer)).length,m=new Uint8Array(f*l.colors),p=new Uint8Array(f);var k,B=l.pixelBitlength-l.bits;for(b=0,y=0;b<f;b++){for(x=h[b],k=0;k<B;)m[y++]=x>>>k&255,k+=l.bits;p[b]=x>>>k&255}}if(16===l.bits){f=(h=new Uint32Array(l.decodePixels().buffer)).length,m=new Uint8Array(32/l.pixelBitlength*f*l.colors),p=new Uint8Array(32/l.pixelBitlength*f),g=l.colors>1,b=0,y=0;for(var j=0;b<f;)x=h[b++],m[y++]=x>>>0&255,g&&(m[y++]=x>>>16&255,x=h[b++],m[y++]=x>>>0&255),p[j++]=x>>>16&255;s=8}o!==e.image_compression.NONE?(r=t(m,l.width*l.colors,l.colors,o),u=t(p,l.width,1,o)):(r=m,u=p,v=void 0)}if(3===l.colorType&&(i=this.color_spaces.INDEXED,d=l.palette,l.transparency.indexed)){var C=l.transparency.indexed,N=0;for(b=0,f=C.length;b<f;++b)N+=C[b];if((N/=255)==f-1&&-1!==C.indexOf(0))A=[C.indexOf(0)];else if(N!==f){for(p=new Uint8Array((h=l.decodePixels()).length),b=0,f=h.length;b<f;b++)p[b]=C[h[b]];u=t(p,l.width,1)}}var S=function(t){var r;switch(t){case e.image_compression.FAST:r=11;break;case e.image_compression.MEDIUM:r=13;break;case e.image_compression.SLOW:r=14;break;default:r=12}return r}(o);return v===this.decode.FLATE_DECODE&&(w="/Predictor "+S+" "),w+="/Colors "+c+" /BitsPerComponent "+s+" /Columns "+l.width,(this.__addimage__.isArrayBuffer(r)||this.__addimage__.isArrayBufferView(r))&&(r=this.__addimage__.arrayBufferToBinaryString(r)),(u&&this.__addimage__.isArrayBuffer(u)||this.__addimage__.isArrayBufferView(u))&&(u=this.__addimage__.arrayBufferToBinaryString(u)),{alias:a,data:r,index:n,filter:v,decodeParameters:w,transparency:A,palette:d,sMask:u,predictor:S,width:l.width,height:l.height,bitsPerComponent:s,colorSpace:i}}}})(sM.API),function(e){e.processGIF89A=function(t,r,n,a){var o=new lH(t),i=o.width,s=o.height,l=[];o.decodeAndBlitFrameRGBA(0,l);var A=new lK(100).encode({data:l,width:i,height:s},100);return e.processJPEG.call(this,A,r,n,a)},e.processGIF87A=e.processGIF89A}(sM.API),lV.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,16===this.bitPP&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var e=0===this.colors?1<<this.bitPP:this.colors;this.palette=Array(e);for(var t=0;t<e;t++){var r=this.datav.getUint8(this.pos++,!0),n=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0);this.palette[t]={red:a,green:n,blue:r,quad:o}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},lV.prototype.parseBGR=function(){this.pos=this.offset;try{var e="bit"+this.bitPP,t=this.width*this.height*4;this.data=new Uint8Array(t),this[e]()}catch(e){sc.log("bit decode error:"+e)}},lV.prototype.bit1=function(){var e,t=Math.ceil(this.width/8),r=t%4;for(e=this.height-1;e>=0;e--){for(var n=this.bottom_up?e:this.height-1-e,a=0;a<t;a++)for(var o=this.datav.getUint8(this.pos++,!0),i=n*this.width*4+8*a*4,s=0;s<8&&8*a+s<this.width;s++){var l=this.palette[o>>7-s&1];this.data[i+4*s]=l.blue,this.data[i+4*s+1]=l.green,this.data[i+4*s+2]=l.red,this.data[i+4*s+3]=255}0!==r&&(this.pos+=4-r)}},lV.prototype.bit4=function(){for(var e=Math.ceil(this.width/2),t=e%4,r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,a=0;a<e;a++){var o=this.datav.getUint8(this.pos++,!0),i=n*this.width*4+2*a*4,s=o>>4,l=15&o,A=this.palette[s];if(this.data[i]=A.blue,this.data[i+1]=A.green,this.data[i+2]=A.red,this.data[i+3]=255,2*a+1>=this.width)break;A=this.palette[l],this.data[i+4]=A.blue,this.data[i+4+1]=A.green,this.data[i+4+2]=A.red,this.data[i+4+3]=255}0!==t&&(this.pos+=4-t)}},lV.prototype.bit8=function(){for(var e=this.width%4,t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var a=this.datav.getUint8(this.pos++,!0),o=r*this.width*4+4*n;if(a<this.palette.length){var i=this.palette[a];this.data[o]=i.red,this.data[o+1]=i.green,this.data[o+2]=i.blue,this.data[o+3]=255}else this.data[o]=255,this.data[o+1]=255,this.data[o+2]=255,this.data[o+3]=255}0!==e&&(this.pos+=4-e)}},lV.prototype.bit15=function(){for(var e=this.width%3,t=parseInt("11111",2),r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,a=0;a<this.width;a++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var i=(o&t)/t*255|0,s=(o>>5&t)/t*255|0,l=(o>>10&t)/t*255|0,A=o>>15?255:0,c=n*this.width*4+4*a;this.data[c]=l,this.data[c+1]=s,this.data[c+2]=i,this.data[c+3]=A}this.pos+=e}},lV.prototype.bit16=function(){for(var e=this.width%3,t=parseInt("11111",2),r=parseInt("111111",2),n=this.height-1;n>=0;n--){for(var a=this.bottom_up?n:this.height-1-n,o=0;o<this.width;o++){var i=this.datav.getUint16(this.pos,!0);this.pos+=2;var s=(i&t)/t*255|0,l=(i>>5&r)/r*255|0,A=(i>>11)/t*255|0,c=a*this.width*4+4*o;this.data[c]=A,this.data[c+1]=l,this.data[c+2]=s,this.data[c+3]=255}this.pos+=e}},lV.prototype.bit24=function(){for(var e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),i=t*this.width*4+4*r;this.data[i]=o,this.data[i+1]=a,this.data[i+2]=n,this.data[i+3]=255}this.pos+=this.width%4}},lV.prototype.bit32=function(){for(var e=this.height-1;e>=0;e--)for(var t=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=t*this.width*4+4*r;this.data[s]=o,this.data[s+1]=a,this.data[s+2]=n,this.data[s+3]=i}},lV.prototype.getData=function(){return this.data},function(e){e.processBMP=function(t,r,n,a){var o=new lV(t,!1),i=o.width,s=o.height,l={data:o.getData(),width:i,height:s},A=new lK(100).encode(l,100);return e.processJPEG.call(this,A,r,n,a)}}(sM.API),lq.prototype.getData=function(){return this.data},function(e){e.processWEBP=function(t,r,n,a){var o=new lq(t,!1),i=o.width,s=o.height,l={data:o.getData(),width:i,height:s},A=new lK(100).encode(l,100);return e.processJPEG.call(this,A,r,n,a)}}(sM.API),sM.API.processRGBA=function(e,t,r){for(var n=e.data,a=n.length,o=new Uint8Array(a/4*3),i=new Uint8Array(a/4),s=0,l=0,A=0;A<a;A+=4){var c=n[A],d=n[A+1],u=n[A+2],h=n[A+3];o[s++]=c,o[s++]=d,o[s++]=u,i[l++]=h}var f=this.__addimage__.arrayBufferToBinaryString(o);return{alpha:this.__addimage__.arrayBufferToBinaryString(i),data:f,index:t,alias:r,colorSpace:"DeviceRGB",bitsPerComponent:8,width:e.width,height:e.height}},sM.API.setLanguage=function(e){return void 0===this.internal.languageSettings&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),void 0!==({af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"})[e]&&(this.internal.languageSettings.languageCode=e,!1===this.internal.languageSettings.isSubscribed&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},l_=(lL=sM.API).getCharWidthsArray=function(e,t){var r,n,a=(t=t||{}).font||this.internal.getFont(),o=t.fontSize||this.internal.getFontSize(),i=t.charSpace||this.internal.getCharSpace(),s=t.widths?t.widths:a.metadata.Unicode.widths,l=s.fof?s.fof:1,A=t.kerning?t.kerning:a.metadata.Unicode.kerning,c=A.fof?A.fof:1,d=!1!==t.doKerning,u=0,h=e.length,f=0,p=s[0]||l,m=[];for(r=0;r<h;r++)n=e.charCodeAt(r),"function"==typeof a.metadata.widthOfString?m.push((a.metadata.widthOfGlyph(a.metadata.characterToGlyph(n))+1e3/o*i||0)/1e3):(u=d&&"object"===id()(A[n])&&!isNaN(parseInt(A[n][f],10))?A[n][f]/c:0,m.push((s[n]||p)/l+u)),f=n;return m},lQ=lL.getStringUnitWidth=function(e,t){var r=(t=t||{}).fontSize||this.internal.getFontSize(),n=t.font||this.internal.getFont(),a=t.charSpace||this.internal.getCharSpace();return lL.processArabic&&(e=lL.processArabic(e)),"function"==typeof n.metadata.widthOfString?n.metadata.widthOfString(e,r,a)/r:l_.apply(this,arguments).reduce(function(e,t){return e+t},0)},lT=function(e,t,r,n){for(var a=[],o=0,i=e.length,s=0;o!==i&&s+t[o]<r;)s+=t[o],o++;a.push(e.slice(0,o));var l=o;for(s=0;o!==i;)s+t[o]>n&&(a.push(e.slice(l,o)),s=0,l=o),s+=t[o],o++;return l!==o&&a.push(e.slice(l,o)),a},lD=function(e,t,r){r||(r={});var n,a,o,i,s,l,A,c=[],d=[c],u=r.textIndent||0,h=0,f=0,p=e.split(" "),m=l_.apply(this,[" ",r])[0];if(l=-1===r.lineIndent?p[0].length+2:r.lineIndent||0){var g=Array(l).join(" "),x=[];p.map(function(e){(e=e.split(/\s*\n/)).length>1?x=x.concat(e.map(function(e,t){return(t&&e.length?"\n":"")+e})):x.push(e[0])}),p=x,l=lQ.apply(this,[g,r])}for(o=0,i=p.length;o<i;o++){var b=0;if(n=p[o],l&&"\n"==n[0]&&(n=n.substr(1),b=1),u+h+(f=(a=l_.apply(this,[n,r])).reduce(function(e,t){return e+t},0))>t||b){if(f>t){for(s=lT.apply(this,[n,a,t-(u+h),t]),c.push(s.shift()),c=[s.pop()];s.length;)d.push([s.shift()]);f=a.slice(n.length-(c[0]?c[0].length:0)).reduce(function(e,t){return e+t},0)}else c=[n];d.push(c),u=f+l,h=m}else c.push(n),u+=h+f,h=m}return A=l?function(e,t){return(t?g:"")+e.join(" ")}:function(e){return e.join(" ")},d.map(A)},lL.splitTextToSize=function(e,t,r){var n,a=(r=r||{}).fontSize||this.internal.getFontSize(),o=(function(e){if(e.widths&&e.kerning)return{widths:e.widths,kerning:e.kerning};var t=this.internal.getFont(e.fontName,e.fontStyle);return t.metadata.Unicode?{widths:t.metadata.Unicode.widths||{0:1},kerning:t.metadata.Unicode.kerning||{}}:{font:t.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,r);n=Array.isArray(e)?e:String(e).split(/\r?\n/);var i=1*this.internal.scaleFactor*t/a;o.textIndent=r.textIndent?1*r.textIndent*this.internal.scaleFactor/a:0,o.lineIndent=r.lineIndent;var s,l,A=[];for(s=0,l=n.length;s<l;s++)A=A.concat(lD.apply(this,[n[s],i,o]));return A},function(e){e.__fontmetrics__=e.__fontmetrics__||{};for(var t="klmnopqrstuvwxyz",r={},n={},a=0;a<t.length;a++)r[t[a]]="0123456789abcdef"[a],n["0123456789abcdef"[a]]=t[a];var o=function(e){return"0x"+parseInt(e,10).toString(16)},i=e.__fontmetrics__.compress=function(e){var t,r,a,s,l=["{"];for(var A in e){if(t=e[A],r=isNaN(parseInt(A,10))?"'"+A+"'":(r=o(A=parseInt(A,10)).slice(2)).slice(0,-1)+n[r.slice(-1)],"number"==typeof t)t<0?(a=o(t).slice(3),s="-"):(a=o(t).slice(2),s=""),a=s+a.slice(0,-1)+n[a.slice(-1)];else{if("object"!==id()(t))throw Error("Don't know what to do with value type "+id()(t)+".");a=i(t)}l.push(r+a)}return l.push("}"),l.join("")},s=e.__fontmetrics__.uncompress=function(e){if("string"!=typeof e)throw Error("Invalid argument passed to uncompress.");for(var t,n,a,o,i={},s=1,l=i,A=[],c="",d="",u=e.length-1,h=1;h<u;h+=1)"'"==(o=e[h])?t?(a=t.join(""),t=void 0):t=[]:t?t.push(o):"{"==o?(A.push([l,a]),l={},a=void 0):"}"==o?((n=A.pop())[0][n[1]]=l,a=void 0,l=n[0]):"-"==o?s=-1:void 0===a?r.hasOwnProperty(o)?(c+=r[o],a=parseInt(c,16)*s,s=1,c=""):c+=o:r.hasOwnProperty(o)?(d+=r[o],l[a]=parseInt(d,16)*s,s=1,a=void 0,d=""):d+=o;return i},l={codePages:["WinAnsiEncoding"],WinAnsiEncoding:s("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},A={Courier:l,"Courier-Bold":l,"Courier-BoldOblique":l,"Courier-Oblique":l,Helvetica:l,"Helvetica-Bold":l,"Helvetica-BoldOblique":l,"Helvetica-Oblique":l,"Times-Roman":l,"Times-Bold":l,"Times-BoldItalic":l,"Times-Italic":l},c={Unicode:{"Courier-Oblique":s("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":s("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":s("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:s("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":s("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":s("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:s("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:s("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":s("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:s("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":s("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":s("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":s("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":s("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};e.events.push(["addFont",function(e){var t=e.font,r=c.Unicode[t.postScriptName];r&&(t.metadata.Unicode={},t.metadata.Unicode.widths=r.widths,t.metadata.Unicode.kerning=r.kerning);var n=A[t.postScriptName];n&&(t.metadata.Unicode.encoding=n,t.encoding=n.codePages[0])}])}(sM.API),function(e){var t=function(e){for(var t=e.length,r=new Uint8Array(t),n=0;n<t;n++)r[n]=e.charCodeAt(n);return r};e.API.events.push(["addFont",function(r){var n,a=void 0,o=r.font,i=r.instance;if(!o.isStandardFont){if(void 0===i)throw Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+o.postScriptName+"').");if("string"!=typeof(a=!1===i.existsFileInVFS(o.postScriptName)?i.loadFile(o.postScriptName):i.getFileFromVFS(o.postScriptName)))throw Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+o.postScriptName+"').");n=a,n=/^\x00\x01\x00\x00/.test(n)?t(n):t(sp(n)),o.metadata=e.API.TTFFont.open(n),o.metadata.Unicode=o.metadata.Unicode||{encoding:{},kerning:{},widths:[]},o.metadata.glyIdsUsed=[0]}}])}(sM),sM.API.addSvgAsImage=function(e,t,n,a,o,i,s,l){if(isNaN(t)||isNaN(n))throw sc.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(a)||isNaN(o))throw sc.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var A=document.createElement("canvas");A.width=a,A.height=o;var c=A.getContext("2d");c.fillStyle="#fff",c.fillRect(0,0,A.width,A.height);var d={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},u=this;return(sl.canvg?Promise.resolve(sl.canvg):r.e(380).then(r.bind(r,44380))).catch(function(e){return Promise.reject(Error("Could not load canvg: "+e))}).then(function(e){return e.default?e.default:e}).then(function(t){return t.fromString(c,e,d)},function(){return Promise.reject(Error("Could not load canvg."))}).then(function(e){return e.render(d)}).then(function(){u.addImage(A.toDataURL("image/jpeg",1),t,n,a,o,s,l)})},sM.API.putTotalPages=function(e){var t,r=0;15>parseInt(this.internal.getFont().id.substr(1),10)?(t=RegExp(e,"g"),r=this.internal.getNumberOfPages()):(t=RegExp(this.pdfEscape16(e,this.internal.getFont()),"g"),r=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var n=1;n<=this.internal.getNumberOfPages();n++)for(var a=0;a<this.internal.pages[n].length;a++)this.internal.pages[n][a]=this.internal.pages[n][a].replace(t,r);return this},sM.API.viewerPreferences=function(e,t){e=e||{},t=t||!1;var r,n,a,o,i={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},s=Object.keys(i),l=[],A=0,c=0,d=0;function u(e,t){var r,n=!1;for(r=0;r<e.length;r+=1)e[r]===t&&(n=!0);return n}if(void 0===this.internal.viewerpreferences&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(i)),this.internal.viewerpreferences.isSubscribed=!1),r=this.internal.viewerpreferences.configuration,"reset"===e||!0===t){var h=s.length;for(d=0;d<h;d+=1)r[s[d]].value=r[s[d]].defaultValue,r[s[d]].explicitSet=!1}if("object"===id()(e)){for(a in e)if(o=e[a],u(s,a)&&void 0!==o){if("boolean"===r[a].type&&"boolean"==typeof o)r[a].value=o;else if("name"===r[a].type&&u(r[a].valueSet,o))r[a].value=o;else if("integer"===r[a].type&&Number.isInteger(o))r[a].value=o;else if("array"===r[a].type){for(A=0;A<o.length;A+=1)if(n=!0,1===o[A].length&&"number"==typeof o[A][0])l.push(String(o[A]-1));else if(o[A].length>1){for(c=0;c<o[A].length;c+=1)"number"!=typeof o[A][c]&&(n=!1);!0===n&&l.push([o[A][0]-1,o[A][1]-1].join(" "))}r[a].value="["+l.join(" ")+"]"}else r[a].value=r[a].defaultValue;r[a].explicitSet=!0}}return!1===this.internal.viewerpreferences.isSubscribed&&(this.internal.events.subscribe("putCatalog",function(){var e,t=[];for(e in r)!0===r[e].explicitSet&&("name"===r[e].type?t.push("/"+e+" /"+r[e].value):t.push("/"+e+" "+r[e].value));0!==t.length&&this.internal.write("/ViewerPreferences\n<<\n"+t.join("\n")+"\n>>")}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=r,this},function(e){var t=function(){var e='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',t=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),r=unescape(encodeURIComponent(e)),n=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),a=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),o=unescape(encodeURIComponent("</x:xmpmeta>")),i=r.length+n.length+a.length+t.length+o.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+i+" >>"),this.internal.write("stream"),this.internal.write(t+r+n+a+o),this.internal.write("endstream"),this.internal.write("endobj")},r=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};e.addMetadata=function(e,n){return void 0===this.internal.__metadata__&&(this.internal.__metadata__={metadata:e,namespaceuri:n||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",r),this.internal.events.subscribe("postPutResources",t)),this}}(sM.API),function(e){var t=e.API,r=t.pdfEscape16=function(e,t){for(var r,n=t.metadata.Unicode.widths,a=["","0","00","000","0000"],o=[""],i=0,s=e.length;i<s&&(r=t.metadata.characterToGlyph(e.charCodeAt(i)),t.metadata.glyIdsUsed.push(r),t.metadata.toUnicode[r]=e.charCodeAt(i),-1==n.indexOf(r)&&(n.push(r),n.push([parseInt(t.metadata.widthOfGlyph(r),10)])),"0"!=r);++i)o.push(a[4-(r=r.toString(16)).length],r);return o.join("")},n=function(e){var t,r,n,a,o,i,s;for(o="/CIDInit /ProcSet findresource begin\n12 dict begin\nbegincmap\n/CIDSystemInfo <<\n  /Registry (Adobe)\n  /Ordering (UCS)\n  /Supplement 0\n>> def\n/CMapName /Adobe-Identity-UCS def\n/CMapType 2 def\n1 begincodespacerange\n<0000><ffff>\nendcodespacerange",n=[],i=0,s=(r=Object.keys(e).sort(function(e,t){return e-t})).length;i<s;i++)t=r[i],n.length>=100&&(o+="\n"+n.length+" beginbfchar\n"+n.join("\n")+"\nendbfchar",n=[]),void 0!==e[t]&&null!==e[t]&&"function"==typeof e[t].toString&&(a=("0000"+e[t].toString(16)).slice(-4),t=("0000"+(+t).toString(16)).slice(-4),n.push("<"+t+"><"+a+">"));return n.length&&(o+="\n"+n.length+" beginbfchar\n"+n.join("\n")+"\nendbfchar\n"),o+="endcmap\nCMapName currentdict /CMap defineresource pop\nend\nend"};t.events.push(["putFont",function(t){!function(t){var r=t.font,a=t.out,o=t.newObject,i=t.putStream;if(r.metadata instanceof e.API.TTFFont&&"Identity-H"===r.encoding){for(var s=r.metadata.Unicode.widths,l=r.metadata.subset.encode(r.metadata.glyIdsUsed,1),A="",c=0;c<l.length;c++)A+=String.fromCharCode(l[c]);var d=o();i({data:A,addLength1:!0,objectId:d}),a("endobj");var u=o();i({data:n(r.metadata.toUnicode),addLength1:!0,objectId:u}),a("endobj");var h=o();a("<<"),a("/Type /FontDescriptor"),a("/FontName /"+sU(r.fontName)),a("/FontFile2 "+d+" 0 R"),a("/FontBBox "+e.API.PDFObject.convert(r.metadata.bbox)),a("/Flags "+r.metadata.flags),a("/StemV "+r.metadata.stemV),a("/ItalicAngle "+r.metadata.italicAngle),a("/Ascent "+r.metadata.ascender),a("/Descent "+r.metadata.decender),a("/CapHeight "+r.metadata.capHeight),a(">>"),a("endobj");var f=o();a("<<"),a("/Type /Font"),a("/BaseFont /"+sU(r.fontName)),a("/FontDescriptor "+h+" 0 R"),a("/W "+e.API.PDFObject.convert(s)),a("/CIDToGIDMap /Identity"),a("/DW 1000"),a("/Subtype /CIDFontType2"),a("/CIDSystemInfo"),a("<<"),a("/Supplement 0"),a("/Registry (Adobe)"),a("/Ordering ("+r.encoding+")"),a(">>"),a(">>"),a("endobj"),r.objectNumber=o(),a("<<"),a("/Type /Font"),a("/Subtype /Type0"),a("/ToUnicode "+u+" 0 R"),a("/BaseFont /"+sU(r.fontName)),a("/Encoding /"+r.encoding),a("/DescendantFonts ["+f+" 0 R]"),a(">>"),a("endobj"),r.isAlreadyPutted=!0}}(t)}]),t.events.push(["putFont",function(t){!function(t){var r=t.font,a=t.out,o=t.newObject,i=t.putStream;if(r.metadata instanceof e.API.TTFFont&&"WinAnsiEncoding"===r.encoding){for(var s=r.metadata.rawData,l="",A=0;A<s.length;A++)l+=String.fromCharCode(s[A]);var c=o();i({data:l,addLength1:!0,objectId:c}),a("endobj");var d=o();i({data:n(r.metadata.toUnicode),addLength1:!0,objectId:d}),a("endobj");var u=o();a("<<"),a("/Descent "+r.metadata.decender),a("/CapHeight "+r.metadata.capHeight),a("/StemV "+r.metadata.stemV),a("/Type /FontDescriptor"),a("/FontFile2 "+c+" 0 R"),a("/Flags 96"),a("/FontBBox "+e.API.PDFObject.convert(r.metadata.bbox)),a("/FontName /"+sU(r.fontName)),a("/ItalicAngle "+r.metadata.italicAngle),a("/Ascent "+r.metadata.ascender),a(">>"),a("endobj"),r.objectNumber=o();for(var h=0;h<r.metadata.hmtx.widths.length;h++)r.metadata.hmtx.widths[h]=parseInt(r.metadata.hmtx.widths[h]*(1e3/r.metadata.head.unitsPerEm));a("<</Subtype/TrueType/Type/Font/ToUnicode "+d+" 0 R/BaseFont/"+sU(r.fontName)+"/FontDescriptor "+u+" 0 R/Encoding/"+r.encoding+" /FirstChar 29 /LastChar 255 /Widths "+e.API.PDFObject.convert(r.metadata.hmtx.widths)+">>"),a("endobj"),r.isAlreadyPutted=!0}}(t)}]);var a=function(e){var t,n=e.text||"",a=e.x,o=e.y,i=e.options||{},s=e.mutex||{},l=s.pdfEscape,A=s.activeFontKey,c=s.fonts,d=A,u="",h=0,f="",p=c[d].encoding;if("Identity-H"!==c[d].encoding)return{text:n,x:a,y:o,options:i,mutex:s};for(f=n,d=A,Array.isArray(n)&&(f=n[0]),h=0;h<f.length;h+=1)c[d].metadata.hasOwnProperty("cmap")&&(t=c[d].metadata.cmap.unicode.codeMap[f[h].charCodeAt(0)]),t||256>f[h].charCodeAt(0)&&c[d].metadata.hasOwnProperty("Unicode")?u+=f[h]:u+="";var m="";return 14>parseInt(d.slice(1))||"WinAnsiEncoding"===p?m=l(u,d).split("").map(function(e){return e.charCodeAt(0).toString(16)}).join(""):"Identity-H"===p&&(m=r(u,c[d])),s.isHex=!0,{text:m,x:a,y:o,options:i,mutex:s}};t.events.push(["postProcessText",function(e){var t=e.text||"",r=[],n={text:t,x:e.x,y:e.y,options:e.options,mutex:e.mutex};if(Array.isArray(t)){var o=0;for(o=0;o<t.length;o+=1)Array.isArray(t[o])&&3===t[o].length?r.push([a(Object.assign({},n,{text:t[o][0]})).text,t[o][1],t[o][2]]):r.push(a(Object.assign({},n,{text:t[o]})).text);e.text=r}else e.text=a(Object.assign({},n,{text:t})).text}])}(sM),function(e){var t=function(){return void 0===this.internal.vFS&&(this.internal.vFS={}),!0};e.existsFileInVFS=function(e){return t.call(this),void 0!==this.internal.vFS[e]},e.addFileToVFS=function(e,r){return t.call(this),this.internal.vFS[e]=r,this},e.getFileFromVFS=function(e){return t.call(this),void 0!==this.internal.vFS[e]?this.internal.vFS[e]:null}}(sM.API),function(e){e.__bidiEngine__=e.prototype.__bidiEngine__=function(e){var r,n,a,o,i,s,l,A=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],c=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],d={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},u={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},h=["(",")","(","<",">","<","[","]","[","{","}","{","\xab","\xbb","\xab","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],f=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),p=!1,m=0;this.__bidiEngine__={};var g=function(e){var r=e.charCodeAt(),n=r>>8,a=u[n];return void 0!==a?t[256*a+(255&r)]:252===n||253===n?"AL":f.test(n)?"L":8===n?"R":"N"},x=function(e){for(var t,r=0;r<e.length&&"L"!==(t=g(e.charAt(r)));r++)if("R"===t)return!0;return!1},b=function(e,t,i,s){var l,A,c,d,u=t[s];switch(u){case"L":case"R":case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":p=!1;break;case"N":case"AN":break;case"EN":p&&(u="AN");break;case"AL":p=!0,u="R";break;case"WS":case"BN":u="N";break;case"CS":s<1||s+1>=t.length||"EN"!==(l=i[s-1])&&"AN"!==l||"EN"!==(A=t[s+1])&&"AN"!==A?u="N":p&&(A="AN"),u=A===l?A:"N";break;case"ES":u="EN"===(l=s>0?i[s-1]:"B")&&s+1<t.length&&"EN"===t[s+1]?"EN":"N";break;case"ET":if(s>0&&"EN"===i[s-1]){u="EN";break}if(p){u="N";break}for(c=s+1,d=t.length;c<d&&"ET"===t[c];)c++;u=c<d&&"EN"===t[c]?"EN":"N";break;case"NSM":if(a&&!o){for(d=t.length,c=s+1;c<d&&"NSM"===t[c];)c++;if(c<d){var h=e[s];if(l=t[c],(h>=1425&&h<=2303||64286===h)&&("R"===l||"AL"===l)){u="R";break}}}u=s<1||"B"===(l=t[s-1])?"N":i[s-1];break;case"B":p=!1,r=!0,u=m;break;case"S":n=!0,u="N"}return u},y=function(e,t,r){var n=e.split("");return r&&v(n,r,{hiLevel:m}),n.reverse(),t&&t.reverse(),n.join("")},v=function(e,t,a){var o,i,s,l,u,h=-1,f=e.length,x=0,y=[],v=m?c:A,w=[];for(p=!1,r=!1,n=!1,i=0;i<f;i++)w[i]=g(e[i]);for(s=0;s<f;s++){if(u=x,y[s]=b(e,w,y,s),o=240&(x=v[u][d[y[s]]]),x&=15,t[s]=l=v[x][5],o>0){if(16===o){for(i=h;i<s;i++)t[i]=1;h=-1}else h=-1}if(v[x][6])-1===h&&(h=s);else if(h>-1){for(i=h;i<s;i++)t[i]=l;h=-1}"B"===w[s]&&(t[s]=0),a.hiLevel|=l}n&&function(e,t,r){for(var n=0;n<r;n++)if("S"===e[n]){t[n]=m;for(var a=n-1;a>=0&&"WS"===e[a];a--)t[a]=m}}(w,t,f)},w=function(e,t,n,a,o){if(!(o.hiLevel<e)){if(1===e&&1===m&&!r)return t.reverse(),void(n&&n.reverse());for(var i,s,l,A,c=t.length,d=0;d<c;){if(a[d]>=e){for(l=d+1;l<c&&a[l]>=e;)l++;for(A=d,s=l-1;A<s;A++,s--)i=t[A],t[A]=t[s],t[s]=i,n&&(i=n[A],n[A]=n[s],n[s]=i);d=l}d++}}},k=function(e,t,r){var n=e.split(""),a={hiLevel:m};return r||(r=[]),v(n,r,a),function(e,t,r){if(0!==r.hiLevel&&l)for(var n,a=0;a<e.length;a++)1===t[a]&&(n=h.indexOf(e[a]))>=0&&(e[a]=h[n+1])}(n,r,a),w(2,n,t,r,a),w(1,n,t,r,a),n.join("")};return this.__bidiEngine__.doBidiReorder=function(e,t,r){if(function(e,t){if(t)for(var r=0;r<e.length;r++)t[r]=r;void 0===o&&(o=x(e)),void 0===s&&(s=x(e))}(e,t),a||!i||s){if(a&&i&&o^s)m=o?1:0,e=y(e,t,r);else if(!a&&i&&s)m=o?1:0,e=y(e=k(e,t,r),t);else if(!a||o||i||s){if(a&&!i&&o^s)e=y(e,t),o?(m=0,e=k(e,t,r)):(m=1,e=y(e=k(e,t,r),t));else if(a&&o&&!i&&s)m=1,e=y(e=k(e,t,r),t);else if(!a&&!i&&o^s){var n=l;o?(m=1,e=k(e,t,r),m=0,l=!1,e=k(e,t,r),l=n):(m=0,e=y(e=k(e,t,r),t),m=1,l=!1,e=k(e,t,r),l=n,e=y(e,t))}}else m=0,e=k(e,t,r)}else m=o?1:0,e=k(e,t,r);return e},this.__bidiEngine__.setOptions=function(e){e&&(a=e.isInputVisual,i=e.isOutputVisual,o=e.isInputRtl,s=e.isOutputRtl,l=e.isSymmetricSwapping)},this.__bidiEngine__.setOptions(e),this.__bidiEngine__};var t=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],r=new e.__bidiEngine__({isInputVisual:!0});e.API.events.push(["postProcessText",function(e){var t=e.text,n=(e.x,e.y,e.options||{}),a=(e.mutex,n.lang,[]);if(n.isInputVisual="boolean"!=typeof n.isInputVisual||n.isInputVisual,r.setOptions(n),"[object Array]"===Object.prototype.toString.call(t)){var o=0;for(a=[],o=0;o<t.length;o+=1)"[object Array]"===Object.prototype.toString.call(t[o])?a.push([r.doBidiReorder(t[o][0]),t[o][1],t[o][2]]):a.push([r.doBidiReorder(t[o])]);e.text=a}else e.text=r.doBidiReorder(t);r.setOptions({isInputVisual:!0})}])}(sM),sM.API.TTFFont=function(){function e(e){var t;if(this.rawData=e,t=this.contents=new lz(e),this.contents.pos=4,"ttcf"===t.readString(4))throw Error("TTCF not supported.");t.pos=0,this.parse(),this.subset=new Ar(this),this.registerTTF()}return e.open=function(t){return new e(t)},e.prototype.parse=function(){return this.directory=new lW(this.contents),this.head=new lY(this),this.name=new l4(this),this.cmap=new lZ(this),this.toUnicode={},this.hhea=new l0(this),this.maxp=new l3(this),this.hmtx=new l6(this),this.post=new l2(this),this.os2=new l1(this),this.loca=new At(this),this.glyf=new l7(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},e.prototype.registerTTF=function(){var e,t,r,n,a;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var t,r,n,a;for(a=[],t=0,r=(n=this.bbox).length;t<r;t++)e=n[t],a.push(Math.round(e*this.scaleFactor));return a}).call(this),this.stemV=0,this.post.exists?(r=255&(n=this.post.italic_angle),0!=(32768&(t=n>>16))&&(t=-(1+(65535^t))),this.italicAngle=+(t+"."+r)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=1===(a=this.familyClass)||2===a||3===a||4===a||5===a||7===a,this.isScript=10===this.familyClass,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),0!==this.italicAngle&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw Error("No unicode cmap for font")},e.prototype.characterToGlyph=function(e){var t;return(null!=(t=this.cmap.unicode)?t.codeMap[e]:void 0)||0},e.prototype.widthOfGlyph=function(e){var t;return t=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*t},e.prototype.widthOfString=function(e,t,r){var n,a,o,i;for(o=0,a=0,i=(e=""+e).length;0<=i?a<i:a>i;a=0<=i?++a:--a)n=e.charCodeAt(a),o+=this.widthOfGlyph(this.characterToGlyph(n))+1e3/t*r||0;return t/1e3*o},e.prototype.lineHeight=function(e,t){var r;return null==t&&(t=!1),r=t?this.lineGap:0,(this.ascender+r-this.decender)/1e3*e},e}();var lG,lz=function(){function e(e){this.data=null!=e?e:[],this.pos=0,this.length=this.data.length}return e.prototype.readByte=function(){return this.data[this.pos++]},e.prototype.writeByte=function(e){return this.data[this.pos++]=e},e.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},e.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},e.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},e.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},e.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},e.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},e.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},e.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},e.prototype.readString=function(e){var t,r;for(r=[],t=0;0<=e?t<e:t>e;t=0<=e?++t:--t)r[t]=String.fromCharCode(this.readByte());return r.join("")},e.prototype.writeString=function(e){var t,r,n;for(n=[],t=0,r=e.length;0<=r?t<r:t>r;t=0<=r?++t:--t)n.push(this.writeByte(e.charCodeAt(t)));return n},e.prototype.readShort=function(){return this.readInt16()},e.prototype.writeShort=function(e){return this.writeInt16(e)},e.prototype.readLongLong=function(){var e,t,r,n,a,o,i,s;return e=this.readByte(),t=this.readByte(),r=this.readByte(),n=this.readByte(),a=this.readByte(),o=this.readByte(),i=this.readByte(),s=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^t)+1099511627776*(255^r)+4294967296*(255^n)+16777216*(255^a)+65536*(255^o)+256*(255^i)+(255^s)+1):72057594037927940*e+281474976710656*t+1099511627776*r+4294967296*n+16777216*a+65536*o+256*i+s},e.prototype.writeLongLong=function(e){var t,r;return t=Math.floor(e/4294967296),r=4294967295&e,this.writeByte(t>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t),this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r)},e.prototype.readInt=function(){return this.readInt32()},e.prototype.writeInt=function(e){return this.writeInt32(e)},e.prototype.read=function(e){var t,r;for(t=[],r=0;0<=e?r<e:r>e;r=0<=e?++r:--r)t.push(this.readByte());return t},e.prototype.write=function(e){var t,r,n,a;for(a=[],r=0,n=e.length;r<n;r++)t=e[r],a.push(this.writeByte(t));return a},e}(),lW=function(){var e;function t(e){var t,r,n;for(this.scalarType=e.readInt(),this.tableCount=e.readShort(),this.searchRange=e.readShort(),this.entrySelector=e.readShort(),this.rangeShift=e.readShort(),this.tables={},r=0,n=this.tableCount;0<=n?r<n:r>n;r=0<=n?++r:--r)t={tag:e.readString(4),checksum:e.readInt(),offset:e.readInt(),length:e.readInt()},this.tables[t.tag]=t}return t.prototype.encode=function(t){var r,n,a,o,i,s,l,A,c,d,u,h,f;for(f in o=Math.floor((c=16*Math.floor(Math.log(u=Object.keys(t).length)/(s=Math.log(2))))/s),A=16*u-c,(n=new lz).writeInt(this.scalarType),n.writeShort(u),n.writeShort(c),n.writeShort(o),n.writeShort(A),a=16*u,l=n.pos+a,i=null,h=[],t)for(d=t[f],n.writeString(f),n.writeInt(e(d)),n.writeInt(l),n.writeInt(d.length),h=h.concat(d),"head"===f&&(i=l),l+=d.length;l%4;)h.push(0),l++;return n.write(h),r=2981146554-e(n.data),n.pos=i+8,n.writeUInt32(r),n.data},e=function(e){var t,r,n,a;for(e=l8.call(e);e.length%4;)e.push(0);for(n=new lz(e),r=0,t=0,a=e.length;t<a;t=t+=4)r+=n.readUInt32();return 4294967295&r},t}(),l$={}.hasOwnProperty,lX=function(e,t){for(var r in t)l$.call(t,r)&&(e[r]=t[r]);function n(){this.constructor=e}return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e};lG=function(){function e(e){var t;this.file=e,t=this.file.directory.tables[this.tag],this.exists=!!t,t&&(this.offset=t.offset,this.length=t.length,this.parse(this.file.contents))}return e.prototype.parse=function(){},e.prototype.encode=function(){},e.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},e}();var lY=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return lX(t,lG),t.prototype.tag="head",t.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.revision=e.readInt(),this.checkSumAdjustment=e.readInt(),this.magicNumber=e.readInt(),this.flags=e.readShort(),this.unitsPerEm=e.readShort(),this.created=e.readLongLong(),this.modified=e.readLongLong(),this.xMin=e.readShort(),this.yMin=e.readShort(),this.xMax=e.readShort(),this.yMax=e.readShort(),this.macStyle=e.readShort(),this.lowestRecPPEM=e.readShort(),this.fontDirectionHint=e.readShort(),this.indexToLocFormat=e.readShort(),this.glyphDataFormat=e.readShort()},t.prototype.encode=function(e){var t;return(t=new lz).writeInt(this.version),t.writeInt(this.revision),t.writeInt(this.checkSumAdjustment),t.writeInt(this.magicNumber),t.writeShort(this.flags),t.writeShort(this.unitsPerEm),t.writeLongLong(this.created),t.writeLongLong(this.modified),t.writeShort(this.xMin),t.writeShort(this.yMin),t.writeShort(this.xMax),t.writeShort(this.yMax),t.writeShort(this.macStyle),t.writeShort(this.lowestRecPPEM),t.writeShort(this.fontDirectionHint),t.writeShort(e),t.writeShort(this.glyphDataFormat),t.data},t}(),lJ=function(){function e(e,t){var r,n,a,o,i,s,l,A,c,d,u,h,f,p,m,g;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=t+e.readInt(),c=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=3===this.platformID&&1===this.encodingID&&4===this.format||0===this.platformID&&4===this.format,this.codeMap={},this.format){case 0:for(s=0;s<256;++s)this.codeMap[s]=e.readByte();break;case 4:for(d=e.readUInt16()/2,e.pos+=6,a=function(){var t,r;for(r=[],s=t=0;0<=d?t<d:t>d;s=0<=d?++t:--t)r.push(e.readUInt16());return r}(),e.pos+=2,h=function(){var t,r;for(r=[],s=t=0;0<=d?t<d:t>d;s=0<=d?++t:--t)r.push(e.readUInt16());return r}(),l=function(){var t,r;for(r=[],s=t=0;0<=d?t<d:t>d;s=0<=d?++t:--t)r.push(e.readUInt16());return r}(),A=function(){var t,r;for(r=[],s=t=0;0<=d?t<d:t>d;s=0<=d?++t:--t)r.push(e.readUInt16());return r}(),n=(this.length-e.pos+this.offset)/2,i=function(){var t,r;for(r=[],s=t=0;0<=n?t<n:t>n;s=0<=n?++t:--t)r.push(e.readUInt16());return r}(),s=p=0,g=a.length;p<g;s=++p)for(f=a[s],r=m=u=h[s];u<=f?m<=f:m>=f;r=u<=f?++m:--m)0===A[s]?o=r+l[s]:0!==(o=i[A[s]/2+(r-u)-(d-s)]||0)&&(o+=l[s]),this.codeMap[r]=65535&o}e.pos=c}return e.encode=function(e,t){var r,n,a,o,i,s,l,A,c,d,u,h,f,p,m,g,x,b,y,v,w,k,B,j,C,N,S,F,E,O,P,I,U,L,_,Q,T,D,M,H,R,K,V,q,G,z;switch(F=new lz,o=Object.keys(e).sort(function(e,t){return e-t}),t){case"macroman":for(f=0,p=function(){var e=[];for(h=0;h<256;++h)e.push(0);return e}(),g={0:0},a={},E=0,U=o.length;E<U;E++)null==g[V=e[n=o[E]]]&&(g[V]=++f),a[n]={old:e[n],new:g[e[n]]},p[n]=g[e[n]];return F.writeUInt16(1),F.writeUInt16(0),F.writeUInt32(12),F.writeUInt16(0),F.writeUInt16(262),F.writeUInt16(0),F.write(p),{charMap:a,subtable:F.data,maxGlyphID:f+1};case"unicode":for(N=[],c=[],x=0,g={},r={},m=l=null,O=0,L=o.length;O<L;O++)null==g[y=e[n=o[O]]]&&(g[y]=++x),r[n]={old:y,new:g[y]},i=g[y]-n,null!=m&&i===l||(m&&c.push(m),N.push(n),l=i),m=n;for(m&&c.push(m),c.push(65535),N.push(65535),j=2*(B=N.length),d=Math.log((k=2*Math.pow(Math.log(B)/Math.LN2,2))/2)/Math.LN2,w=2*B-k,s=[],v=[],u=[],h=P=0,_=N.length;P<_;h=++P){if(C=N[h],A=c[h],65535===C){s.push(0),v.push(0);break}if(C-(S=r[C].new)>=32768)for(s.push(0),v.push(2*(u.length+B-h)),n=I=C;C<=A?I<=A:I>=A;n=C<=A?++I:--I)u.push(r[n].new);else s.push(S-C),v.push(0)}for(F.writeUInt16(3),F.writeUInt16(1),F.writeUInt32(12),F.writeUInt16(4),F.writeUInt16(16+8*B+2*u.length),F.writeUInt16(0),F.writeUInt16(j),F.writeUInt16(k),F.writeUInt16(d),F.writeUInt16(w),R=0,Q=c.length;R<Q;R++)n=c[R],F.writeUInt16(n);for(F.writeUInt16(0),K=0,T=N.length;K<T;K++)n=N[K],F.writeUInt16(n);for(q=0,D=s.length;q<D;q++)i=s[q],F.writeUInt16(i);for(G=0,M=v.length;G<M;G++)b=v[G],F.writeUInt16(b);for(z=0,H=u.length;z<H;z++)f=u[z],F.writeUInt16(f);return{charMap:r,subtable:F.data,maxGlyphID:x+1}}},e}(),lZ=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return lX(t,lG),t.prototype.tag="cmap",t.prototype.parse=function(e){var t,r,n;for(e.pos=this.offset,this.version=e.readUInt16(),n=e.readUInt16(),this.tables=[],this.unicode=null,r=0;0<=n?r<n:r>n;r=0<=n?++r:--r)t=new lJ(e,this.offset),this.tables.push(t),t.isUnicode&&null==this.unicode&&(this.unicode=t);return!0},t.encode=function(e,t){var r,n;return null==t&&(t="macroman"),r=lJ.encode(e,t),(n=new lz).writeUInt16(0),n.writeUInt16(1),r.table=n.data.concat(r.subtable),r},t}(),l0=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return lX(t,lG),t.prototype.tag="hhea",t.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.ascender=e.readShort(),this.decender=e.readShort(),this.lineGap=e.readShort(),this.advanceWidthMax=e.readShort(),this.minLeftSideBearing=e.readShort(),this.minRightSideBearing=e.readShort(),this.xMaxExtent=e.readShort(),this.caretSlopeRise=e.readShort(),this.caretSlopeRun=e.readShort(),this.caretOffset=e.readShort(),e.pos+=8,this.metricDataFormat=e.readShort(),this.numberOfMetrics=e.readUInt16()},t}(),l1=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return lX(t,lG),t.prototype.tag="OS/2",t.prototype.parse=function(e){if(e.pos=this.offset,this.version=e.readUInt16(),this.averageCharWidth=e.readShort(),this.weightClass=e.readUInt16(),this.widthClass=e.readUInt16(),this.type=e.readShort(),this.ySubscriptXSize=e.readShort(),this.ySubscriptYSize=e.readShort(),this.ySubscriptXOffset=e.readShort(),this.ySubscriptYOffset=e.readShort(),this.ySuperscriptXSize=e.readShort(),this.ySuperscriptYSize=e.readShort(),this.ySuperscriptXOffset=e.readShort(),this.ySuperscriptYOffset=e.readShort(),this.yStrikeoutSize=e.readShort(),this.yStrikeoutPosition=e.readShort(),this.familyClass=e.readShort(),this.panose=function(){var t,r;for(r=[],t=0;t<10;++t)r.push(e.readByte());return r}(),this.charRange=function(){var t,r;for(r=[],t=0;t<4;++t)r.push(e.readInt());return r}(),this.vendorID=e.readString(4),this.selection=e.readShort(),this.firstCharIndex=e.readShort(),this.lastCharIndex=e.readShort(),this.version>0&&(this.ascent=e.readShort(),this.descent=e.readShort(),this.lineGap=e.readShort(),this.winAscent=e.readShort(),this.winDescent=e.readShort(),this.codePageRange=function(){var t,r;for(r=[],t=0;t<2;t=++t)r.push(e.readInt());return r}(),this.version>1))return this.xHeight=e.readShort(),this.capHeight=e.readShort(),this.defaultChar=e.readShort(),this.breakChar=e.readShort(),this.maxContext=e.readShort()},t}(),l2=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return lX(t,lG),t.prototype.tag="post",t.prototype.parse=function(e){var t,r,n,a;switch(e.pos=this.offset,this.format=e.readInt(),this.italicAngle=e.readInt(),this.underlinePosition=e.readShort(),this.underlineThickness=e.readShort(),this.isFixedPitch=e.readInt(),this.minMemType42=e.readInt(),this.maxMemType42=e.readInt(),this.minMemType1=e.readInt(),this.maxMemType1=e.readInt(),this.format){case 65536:case 196608:break;case 131072:for(r=e.readUInt16(),this.glyphNameIndex=[],a=0;0<=r?a<r:a>r;a=0<=r?++a:--a)this.glyphNameIndex.push(e.readUInt16());for(this.names=[],n=[];e.pos<this.offset+this.length;)t=e.readByte(),n.push(this.names.push(e.readString(t)));return n;case 151552:return r=e.readUInt16(),this.offsets=e.read(r);case 262144:return this.map=(function(){var t,r,n;for(n=[],a=t=0,r=this.file.maxp.numGlyphs;0<=r?t<r:t>r;a=0<=r?++t:--t)n.push(e.readUInt32());return n}).call(this)}},t}(),l5=function(e,t){this.raw=e,this.length=e.length,this.platformID=t.platformID,this.encodingID=t.encodingID,this.languageID=t.languageID},l4=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return lX(t,lG),t.prototype.tag="name",t.prototype.parse=function(e){var t,r,n,a,o,i,s,l,A,c;for(e.pos=this.offset,e.readShort(),t=e.readShort(),i=e.readShort(),r=[],a=0;0<=t?a<t:a>t;a=0<=t?++a:--a)r.push({platformID:e.readShort(),encodingID:e.readShort(),languageID:e.readShort(),nameID:e.readShort(),length:e.readShort(),offset:this.offset+i+e.readShort()});for(s={},a=l=0,A=r.length;l<A;a=++l)n=r[a],e.pos=n.offset,o=new l5(e.readString(n.length),n),null==s[c=n.nameID]&&(s[c]=[]),s[n.nameID].push(o);this.strings=s,this.copyright=s[0],this.fontFamily=s[1],this.fontSubfamily=s[2],this.uniqueSubfamily=s[3],this.fontName=s[4],this.version=s[5];try{this.postscriptName=s[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch(e){this.postscriptName=s[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=s[7],this.manufacturer=s[8],this.designer=s[9],this.description=s[10],this.vendorUrl=s[11],this.designerUrl=s[12],this.license=s[13],this.licenseUrl=s[14],this.preferredFamily=s[15],this.preferredSubfamily=s[17],this.compatibleFull=s[18],this.sampleText=s[19]},t}(),l3=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return lX(t,lG),t.prototype.tag="maxp",t.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.numGlyphs=e.readUInt16(),this.maxPoints=e.readUInt16(),this.maxContours=e.readUInt16(),this.maxCompositePoints=e.readUInt16(),this.maxComponentContours=e.readUInt16(),this.maxZones=e.readUInt16(),this.maxTwilightPoints=e.readUInt16(),this.maxStorage=e.readUInt16(),this.maxFunctionDefs=e.readUInt16(),this.maxInstructionDefs=e.readUInt16(),this.maxStackElements=e.readUInt16(),this.maxSizeOfInstructions=e.readUInt16(),this.maxComponentElements=e.readUInt16(),this.maxComponentDepth=e.readUInt16()},t}(),l6=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return lX(t,lG),t.prototype.tag="hmtx",t.prototype.parse=function(e){var t,r,n,a,o,i,s;for(e.pos=this.offset,this.metrics=[],t=0,i=this.file.hhea.numberOfMetrics;0<=i?t<i:t>i;t=0<=i?++t:--t)this.metrics.push({advance:e.readUInt16(),lsb:e.readInt16()});for(n=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var r,a;for(a=[],t=r=0;0<=n?r<n:r>n;t=0<=n?++r:--r)a.push(e.readInt16());return a}(),this.widths=(function(){var e,t,r,n;for(n=[],e=0,t=(r=this.metrics).length;e<t;e++)a=r[e],n.push(a.advance);return n}).call(this),r=this.widths[this.widths.length-1],s=[],t=o=0;0<=n?o<n:o>n;t=0<=n?++o:--o)s.push(this.widths.push(r));return s},t.prototype.forGlyph=function(e){return e in this.metrics?this.metrics[e]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[e-this.metrics.length]}},t}(),l8=[].slice,l7=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return lX(t,lG),t.prototype.tag="glyf",t.prototype.parse=function(){return this.cache={}},t.prototype.glyphFor=function(e){var t,r,n,a,o,i,s,l,A,c;return e in this.cache?this.cache[e]:(a=this.file.loca,t=this.file.contents,r=a.indexOf(e),0===(n=a.lengthOf(e))?this.cache[e]=null:(t.pos=this.offset+r,o=(i=new lz(t.read(n))).readShort(),l=i.readShort(),c=i.readShort(),s=i.readShort(),A=i.readShort(),this.cache[e]=-1===o?new Ae(i,l,c,s,A):new l9(i,o,l,c,s,A),this.cache[e]))},t.prototype.encode=function(e,t,r){var n,a,o,i,s;for(o=[],a=[],i=0,s=t.length;i<s;i++)n=e[t[i]],a.push(o.length),n&&(o=o.concat(n.encode(r)));return a.push(o.length),{table:o,offsets:a}},t}(),l9=function(){function e(e,t,r,n,a,o){this.raw=e,this.numberOfContours=t,this.xMin=r,this.yMin=n,this.xMax=a,this.yMax=o,this.compound=!1}return e.prototype.encode=function(){return this.raw.data},e}(),Ae=function(){function e(e,t,r,n,a){var o,i;for(this.raw=e,this.xMin=t,this.yMin=r,this.xMax=n,this.yMax=a,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],o=this.raw;i=o.readShort(),this.glyphOffsets.push(o.pos),this.glyphIDs.push(o.readUInt16()),32&i;)o.pos+=1&i?4:2,128&i?o.pos+=8:64&i?o.pos+=4:8&i&&(o.pos+=2)}return e.prototype.encode=function(){var e,t,r;for(t=new lz(l8.call(this.raw.data)),e=0,r=this.glyphIDs.length;e<r;++e)t.pos=this.glyphOffsets[e];return t.data},e}(),At=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return lX(t,lG),t.prototype.tag="loca",t.prototype.parse=function(e){var t,r;return e.pos=this.offset,t=this.file.head.indexToLocFormat,this.offsets=0===t?(function(){var t,n;for(n=[],r=0,t=this.length;r<t;r+=2)n.push(2*e.readUInt16());return n}).call(this):(function(){var t,n;for(n=[],r=0,t=this.length;r<t;r+=4)n.push(e.readUInt32());return n}).call(this)},t.prototype.indexOf=function(e){return this.offsets[e]},t.prototype.lengthOf=function(e){return this.offsets[e+1]-this.offsets[e]},t.prototype.encode=function(e,t){for(var r=new Uint32Array(this.offsets.length),n=0,a=0,o=0;o<r.length;++o)if(r[o]=n,a<t.length&&t[a]==o){++a,r[o]=n;var i=this.offsets[o],s=this.offsets[o+1]-i;s>0&&(n+=s)}for(var l=Array(4*r.length),A=0;A<r.length;++A)l[4*A+3]=255&r[A],l[4*A+2]=(65280&r[A])>>8,l[4*A+1]=(16711680&r[A])>>16,l[4*A]=(4278190080&r[A])>>24;return l},t}(),Ar=function(){function e(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return e.prototype.generateCmap=function(){var e,t,r,n,a;for(t in n=this.font.cmap.tables[0].codeMap,e={},a=this.subset)r=a[t],e[t]=n[r];return e},e.prototype.glyphsFor=function(e){var t,r,n,a,o,i,s;for(n={},o=0,i=e.length;o<i;o++)n[a=e[o]]=this.font.glyf.glyphFor(a);for(a in t=[],n)(null!=(r=n[a])?r.compound:void 0)&&t.push.apply(t,r.glyphIDs);if(t.length>0)for(a in s=this.glyphsFor(t))r=s[a],n[a]=r;return n},e.prototype.encode=function(e,t){var r,n,a,o,i,s,l,A,c,d,u,h,f,p,m;for(n in r=lZ.encode(this.generateCmap(),"unicode"),o=this.glyphsFor(e),u={0:0},m=r.charMap)u[(s=m[n]).old]=s.new;for(h in d=r.maxGlyphID,o)h in u||(u[h]=d++);return c=Object.keys(A=function(e){var t,r;for(t in r={},e)r[e[t]]=t;return r}(u)).sort(function(e,t){return e-t}),f=function(){var e,t,r;for(r=[],e=0,t=c.length;e<t;e++)i=c[e],r.push(A[i]);return r}(),a=this.font.glyf.encode(o,f,u),l=this.font.loca.encode(a.offsets,f),p={cmap:this.font.cmap.raw(),glyf:a.table,loca:l,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(t)},this.font.os2.exists&&(p["OS/2"]=this.font.os2.raw()),this.font.directory.encode(p)},e}();sM.API.PDFObject=function(){var e;function t(){}return e=function(e,t){return(Array(t+1).join("0")+e).slice(-t)},t.convert=function(r){var n,a,o,i;if(Array.isArray(r))return"["+(function(){var e,a,o;for(o=[],e=0,a=r.length;e<a;e++)n=r[e],o.push(t.convert(n));return o})().join(" ")+"]";if("string"==typeof r)return"/"+r;if(null!=r?r.isString:void 0)return"("+r+")";if(r instanceof Date)return"(D:"+e(r.getUTCFullYear(),4)+e(r.getUTCMonth(),2)+e(r.getUTCDate(),2)+e(r.getUTCHours(),2)+e(r.getUTCMinutes(),2)+e(r.getUTCSeconds(),2)+"Z)";if("[object Object]"===({}).toString.call(r)){for(a in o=["<<"],r)i=r[a],o.push("/"+a+" "+t.convert(i));return o.push(">>"),o.join("\n")}return""+r},t}();var An=r(39642);let Aa=({title:e})=>m.jsx("div",{className:"my-3",children:m.jsx("p",{className:"font-bold tracking-wider uppercase",style:{textDecoration:"underline",textUnderlineOffset:"4px",textDecorationThickness:"1px"},children:e})}),Ao=({label:e,value:t,isBold:r,className:n=""})=>(0,m.jsxs)("div",{className:`flex justify-between items-center ${r?"font-bold":""} ${n}`,children:[(0,m.jsxs)("span",{children:[e,":"]}),m.jsx("span",{children:"number"==typeof t?Al(t,""):t})]}),Ai=()=>m.jsx("div",{className:"border-t border-dashed border-black my-2"}),As=()=>m.jsx("div",{className:"border-t border-solid border-black my-2"}),Al=(e,t="KES")=>{let r=t?`${t} `:"";return e<0?`-${r}${Math.abs(e).toFixed(2)}`:`${r}${e.toFixed(2)}`},AA=({shift:e,sales:t,expenses:r,supplierPayments:n,bankDeposits:a,onClose:o,settings:i,isHistoricalView:s=!1})=>{let l=(0,g.useRef)(null),[A,c]=(0,g.useState)(!1),d=t.filter(t=>e.salesIds.includes(t.id)),u=d.reduce((e,t)=>e+t.items.reduce((e,t)=>e+t.quantity,0),0),h=d.reduce((e,t)=>e+t.subtotal,0),f=d.reduce((e,t)=>e+t.discountAmount,0),p=d.reduce((e,t)=>e+t.tax,0),x=e.totalSales||0,b=e.paymentBreakdown?.Cash||0,y=d.reduce((e,t)=>e+t.change,0),v=r.filter(t=>e.expenseIds?.includes(t.id)&&"Cash Drawer"===t.source),w=v.reduce((e,t)=>e+t.amount,0),k=n.filter(t=>t.shiftId===e.id&&"Cash"===t.method),B=k.reduce((e,t)=>e+t.amount,0),j=a.filter(t=>t.shiftId===e.id).reduce((e,t)=>e+t.breakdown.cash,0),C=Object.values(e.paymentBreakdown||{}).reduce((e,t)=>e+(Number(t)||0),0),N=e.endTime?new Date(e.endTime).getTime()-new Date(e.startTime).getTime():0,S=`${Math.floor(N/36e5)} hours`,F=e.cashVariance||0,E=async()=>{if(l.current&&!A){c(!0);try{let t=await (0,An.default)(l.current,{scale:2,useCORS:!0,backgroundColor:"#ffffff"}),r=t.toDataURL("image/png"),n=new sM("p","mm","a4"),a=n.internal.pageSize.getWidth(),o=t.height*a/t.width;n.addImage(r,"PNG",0,0,a,o),n.save(`ZReport_${e.id}.pdf`)}catch(e){console.error("Failed to generate PDF:",e),alert("Sorry, there was an error generating the PDF.")}finally{c(!1)}}};return m.jsx("div",{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-slate-100 dark:bg-slate-900/80 z-40 p-4 md:p-8 overflow-y-auto no-print",children:(0,m.jsxs)("div",{className:"max-w-md mx-auto",children:[(0,m.jsxs)("div",{id:"shift-report-container",ref:l,className:"bg-white text-black font-mono text-xs w-full p-4 print:shadow-none print:border-none",children:[(0,m.jsxs)("div",{className:"flex justify-between items-start text-[10px] mb-2",children:[(0,m.jsxs)("span",{children:[new Date().toLocaleDateString("en-US",{timeZone:"Africa/Nairobi"}),", ",new Date().toLocaleTimeString("en-US",{timeZone:"Africa/Nairobi"})]}),(0,m.jsxs)("span",{children:["Z-Report - Shift ",e.id.substring(0,10)]})]}),(0,m.jsxs)("div",{className:"text-center",children:[m.jsx("h2",{className:"text-xl font-bold uppercase",children:i.businessInfo.name}),m.jsx("p",{className:"text-lg font-bold",children:"Z-REPORT"}),m.jsx("p",{className:"text-[10px]",children:"Shift Closure Report"}),m.jsx("p",{className:"text-[10px]",children:e.endTime?new Date(e.endTime).toLocaleString("en-GB",{timeZone:"Africa/Nairobi"}):"N/A"})]}),m.jsx(As,{}),m.jsx(Aa,{title:"SHIFT INFORMATION"}),m.jsx(Ao,{label:"Shift ID",value:e.id.substring(0,8)}),m.jsx(Ao,{label:"Staff Member",value:e.userName}),m.jsx(Ao,{label:"Shift Start",value:new Date(e.startTime).toLocaleString("en-GB",{timeZone:"Africa/Nairobi"})}),m.jsx(Ao,{label:"Shift End",value:e.endTime?new Date(e.endTime).toLocaleString("en-GB",{timeZone:"Africa/Nairobi"}):"N/A"}),m.jsx(Ao,{label:"Duration",value:S}),m.jsx(Ai,{}),m.jsx(Aa,{title:"SALES SUMMARY"}),m.jsx(Ao,{label:"Total Transactions",value:e.salesIds.length}),m.jsx(Ao,{label:"Items Sold",value:u}),m.jsx(Ao,{label:"Gross Sales",value:Al(h)}),m.jsx(Ao,{label:"Total Discounts",value:Al(-f)}),m.jsx(Ao,{label:`VAT (${i.tax.vatRate}%)`,value:Al(p)}),m.jsx("div",{className:"border-t border-black my-1 font-bold",children:m.jsx(Ao,{label:"NET SALES",value:Al(x),isBold:!0})}),m.jsx(Ai,{}),m.jsx(Aa,{title:"PAYMENT BREAKDOWN"}),m.jsx(Ao,{label:"Cash Sales",value:Al(e.paymentBreakdown?.Cash||0)}),m.jsx(Ao,{label:"M-Pesa Sales",value:Al(e.paymentBreakdown?.["M-Pesa"]||0)}),m.jsx(Ao,{label:"Card Sales",value:Al(e.paymentBreakdown?.Card||0)}),m.jsx(Ao,{label:"Loyalty Points",value:Al(e.paymentBreakdown?.Points||0)}),m.jsx(Ao,{label:"Total Payments",value:Al(C),isBold:!0}),m.jsx(Ai,{}),m.jsx(Aa,{title:"CASH PAYOUTS"}),0===v.length&&0===k.length?m.jsx("p",{className:"text-center text-gray-500 text-[10px]",children:"No cash payouts recorded this shift."}):(0,m.jsxs)(m.Fragment,{children:[v.map(e=>m.jsx(Ao,{label:e.reason,value:Al(e.amount)},e.id)),k.map(e=>m.jsx(Ao,{label:`Supplier Pymt: ${e.invoiceId.slice(-6)}`,value:Al(e.amount)},e.id))]}),m.jsx(Ai,{}),m.jsx(Aa,{title:"CASH RECONCILIATION"}),m.jsx(Ao,{label:"Starting Float",value:Al(e.startingFloat)}),m.jsx(Ao,{label:"Cash Sales",value:"+"+Al(b)}),y>0&&m.jsx(Ao,{label:"Change Given",value:"-"+Al(y)}),w>0&&m.jsx(Ao,{label:"Cash Expenses",value:"-"+Al(w)}),B>0&&m.jsx(Ao,{label:"Supplier Payments",value:"-"+Al(B)}),j>0&&m.jsx(Ao,{label:"Cash Banked",value:"-"+Al(j)}),m.jsx(Ai,{}),m.jsx(Ao,{label:"Expected Cash",value:Al(e.expectedCashInDrawer||0),isBold:!0}),m.jsx(Ao,{label:"Actual Cash Count",value:Al(e.actualCashInDrawer||0),isBold:!0}),(0,m.jsxs)("div",{className:`flex justify-between items-center font-bold text-base my-1 ${0===F?"text-green-600":""}`,children:[m.jsx("span",{children:"Variance:"}),m.jsx("span",{children:(F>=0?"+":"")+Al(F)})]}),m.jsx(Ai,{}),m.jsx("div",{className:`my-3 p-2 text-center border font-bold ${0===F?"border-green-600 text-green-600":"border-red-600 text-red-600"}`,children:0===F?" PERFECT BALANCE - NO VARIANCE":F>0?`OVERAGE OF ${Al(F)}`:`SHORTAGE OF ${Al(Math.abs(F))}`}),m.jsx(As,{}),(0,m.jsxs)("div",{className:"text-center text-[10px] space-y-1 mt-4",children:[m.jsx("p",{children:"This is an official Z-Report"}),m.jsx("p",{className:"font-bold",children:i.businessInfo.name})]}),m.jsx("div",{className:"text-right text-[9px] mt-4",children:"1/2"})]}),(0,m.jsxs)("div",{className:"flex justify-between items-center mt-6",children:[m.jsx("button",{onClick:o,whileTap:{scale:.95},className:"bg-slate-200 text-slate-800 font-semibold px-4 py-2 rounded-lg hover:bg-slate-300 transition-colors",children:"Close"}),(0,m.jsxs)("div",{className:"flex space-x-3",children:[(0,m.jsxs)("button",{onClick:()=>window.print(),whileTap:{scale:.95},className:"bg-slate-600 text-white font-semibold px-4 py-2 rounded-lg hover:bg-slate-700 transition-colors flex items-center gap-2",children:[m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:m.jsx("path",{fillRule:"evenodd",d:"M5 4v3H4a2 2 0 00-2 2v6a2 2 0 002 2h1v-4a1 1 0 011-1h10a1 1 0 011 1v4h1a2 2 0 002-2v-6a2 2 0 00-2-2h-1V4a2 2 0 00-2-2H7a2 2 0 00-2 2zm8 0H7v3h6V4zm0 8H7v4h6v-4z",clipRule:"evenodd"})}),"Print"]}),(0,m.jsxs)("button",{onClick:E,disabled:A,whileTap:{scale:.95},className:"bg-primary text-white font-semibold px-4 py-2 rounded-lg hover:bg-primary-focus transition-colors flex items-center gap-2 disabled:bg-slate-400",children:[m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:m.jsx("path",{fillRule:"evenodd",d:"M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm3.293-7.707a1 1 0 011.414 0L9 10.586V3a1 1 0 112 0v7.586l1.293-1.293a1 1 0 111.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z",clipRule:"evenodd"})}),A?"Downloading...":"Download PDF"]})]})]})]})})},Ac=of.button,Ad=of.span,Au=of.div,Ah=({products:e,cart:t,customers:r,selectedCustomerId:n,onCustomerChange:a,addToCart:o,updateCartItemQuantity:i,updateCartItemDiscount:s,removeFromCart:l,clearCart:A,completeSale:c,isOnline:d,currentUser:u,settings:h,sales:f,payouts:p,supplierPayments:x,bankDeposits:b,activeShift:y,onStartShift:v,onEndShiftRequest:w,isEndingShift:k,onConfirmEndShift:B,onCancelEndShift:j,shiftReportToShow:C,onCloseShiftReport:N,onEmailReceiptRequest:S,onWhatsAppReceiptRequest:F,onHoldRequest:E,onLayawayRequest:O,workOrders:P,originatingWorkOrderId:I,salesOrders:U,originatingSalesOrderId:L,showToast:_})=>{let[T,D]=(0,g.useState)(!1),[M,H]=(0,g.useState)({type:"percentage",value:0}),[R,K]=(0,g.useState)(null),[V,q]=(0,g.useState)(!1),[G,z]=(0,g.useState)(!1),W=(0,g.useMemo)(()=>r.find(e=>e.id===n),[r,n]),$=(0,g.useMemo)(()=>0,[]),X=async(e,t)=>{try{let r=await c(e);K(r),t?.autoPrint&&z(!0)}catch(e){console.error("Sale completion failed in PosView:",e)}finally{D(!1),q(!1)}},Y=(0,g.useCallback)(()=>{A(),K(null),z(!1)},[A]),J=!!y&&!k&&!C;if(R)return m.jsx(is,{sale:R,onNewSale:Y,currentUser:u,settings:h,onEmailReceiptRequest:S,onWhatsAppReceiptRequest:F,shouldAutoPrint:G,onAutoPrintDone:()=>z(!1),showToast:_});let Z={cartItems:t,customers:r,selectedCustomerId:n,onCustomerChange:a,updateQuantity:i,updateCartItemDiscount:s,removeItem:l,onCharge:e=>{0!==t.length&&(H(e),D(!0))},isOnline:d,settings:h,activeShift:y,onStartShift:v,onEndShiftRequest:w,onHoldRequest:E,onLayawayRequest:O,currentUser:u,depositApplied:$};return(0,m.jsxs)("div",{className:"h-full flex flex-col md:grid md:grid-cols-[1fr_auto] md:overflow-hidden relative",children:[(0,m.jsxs)(Q,{children:[k&&y&&m.jsx(iA,{activeShift:y,sales:f,expenses:p,onConfirmEndShift:B,onCancel:j}),C&&m.jsx(AA,{shift:C,sales:f,expenses:p,supplierPayments:x,bankDeposits:b,onClose:N,settings:h})]}),m.jsx("div",{className:`flex-1 p-4 overflow-y-auto transition-opacity duration-300 ${J?"opacity-100":"opacity-20 pointer-events-none"}`,children:m.jsx(o3,{products:e,onAddToCart:o,settings:h})}),m.jsx("div",{className:`hidden md:flex md:w-96 bg-card dark:bg-dark-card shadow-lg flex-col min-h-0 transition-opacity duration-300 ${y?"opacity-100":"opacity-50"}`,children:m.jsx(o9,{...Z})}),m.jsx("div",{className:"md:hidden fixed bottom-6 right-6 z-20",children:(0,m.jsxs)(Ac,{onClick:()=>q(!0),whileTap:{scale:.95},className:"bg-primary dark:bg-dark-primary text-white rounded-full p-4 flex items-center justify-center shadow-clay-light dark:shadow-clay-dark active:shadow-clay-light-inset dark:active:shadow-clay-dark-inset transition-shadow","aria-label":`View Cart (${t.length} items)`,children:[m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z"})}),t.length>0&&m.jsx(Ad,{initial:{scale:0},animate:{scale:1},className:"absolute -top-1 -right-1 bg-danger text-white text-xs font-semibold rounded-full h-5 w-5 flex items-center justify-center border-2 border-white dark:border-dark-background",children:t.reduce((e,t)=>e+t.quantity,0)})]})}),m.jsx(Q,{children:V&&(0,m.jsxs)("div",{className:"md:hidden fixed inset-0 z-30","aria-modal":"true",role:"dialog",children:[m.jsx(Au,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3},className:"absolute inset-0 bg-black bg-opacity-50",onClick:()=>q(!1)}),(0,m.jsxs)(Au,{initial:{y:"100%"},animate:{y:0},exit:{y:"100%"},transition:{type:"spring",stiffness:400,damping:40},className:"absolute bottom-0 left-0 right-0 max-h-[90vh] h-auto bg-card dark:bg-dark-card rounded-t-2xl flex flex-col",children:[m.jsx("div",{className:"p-4 flex-shrink-0 cursor-grab",onPointerDown:()=>q(!1),children:m.jsx("div",{className:"mx-auto block w-12 h-1.5 bg-border dark:bg-dark-border/50 rounded-full"})}),m.jsx(o9,{...Z})]})]})}),m.jsx(Q,{children:T&&W&&J&&m.jsx(ie,{cartItems:t,discount:M,onClose:()=>D(!1),onCompleteSale:X,customer:W,settings:h,depositApplied:$})})]})},Af=function(){for(var e,t,r=0,n="",a=arguments.length;r<a;r++)(e=arguments[r])&&(t=function e(t){var r,n,a="";if("string"==typeof t||"number"==typeof t)a+=t;else if("object"==typeof t){if(Array.isArray(t)){var o=t.length;for(r=0;r<o;r++)t[r]&&(n=e(t[r]))&&(a&&(a+=" "),a+=n)}else for(n in t)t[n]&&(a&&(a+=" "),a+=n)}return a}(e))&&(n&&(n+=" "),n+=t);return n};var Ap=r(9459),Am=r.n(Ap),Ag=r(20119),Ax=r.n(Ag),Ab=r(4891),Ay=r.n(Ab),Av=r(85586),Aw=r.n(Av),Ak=r(62880),AB=r.n(Ak),Aj=r(16777),AC=r(81719),AN=r.n(AC),AS=r(77717),AF=r.n(AS),AE=function(e){return 0===e?0:e>0?1:-1},AO=function(e){return Ay()(e)&&e.indexOf("%")===e.length-1},AP=function(e){return AF()(e)&&!AN()(e)},AI=function(e){return AP(e)||Ay()(e)},AU=0,AL=function(e){var t=++AU;return"".concat(e||"").concat(t)},A_=function(e,t){var r,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(!AP(e)&&!Ay()(e))return n;if(AO(e)){var o=e.indexOf("%");r=t*parseFloat(e.slice(0,o))/100}else r=+e;return AN()(r)&&(r=n),a&&r>t&&(r=t),r},AQ=function(e){if(!e)return null;var t=Object.keys(e);return t&&t.length?e[t[0]]:null},AT=function(e){if(!Array.isArray(e))return!1;for(var t=e.length,r={},n=0;n<t;n++){if(r[e[n]])return!0;r[e[n]]=!0}return!1},AD=function(e,t){return AP(e)&&AP(t)?function(r){return e+r*(t-e)}:function(){return t}};function AM(e,t,r){return e&&e.length?e.find(function(e){return e&&("function"==typeof t?t(e):Am()(e,t))===r}):null}var AH=function(e,t){return AP(e)&&AP(t)?e-t:Ay()(e)&&Ay()(t)?e.localeCompare(t):e instanceof Date&&t instanceof Date?e.getTime()-t.getTime():String(e).localeCompare(String(t))};function AR(e,t){for(var r in e)if(({}).hasOwnProperty.call(e,r)&&(!({}).hasOwnProperty.call(t,r)||e[r]!==t[r]))return!1;for(var n in t)if(({}).hasOwnProperty.call(t,n)&&!({}).hasOwnProperty.call(e,n))return!1;return!0}function AK(e){return(AK="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var AV=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],Aq=["points","pathLength"],AG={svg:["viewBox","children"],polygon:Aq,polyline:Aq},Az=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],AW=function(e,t){if(!e||"function"==typeof e||"boolean"==typeof e)return null;var r=e;if((0,g.isValidElement)(e)&&(r=e.props),!AB()(r))return null;var n={};return Object.keys(r).forEach(function(e){Az.includes(e)&&(n[e]=t||function(t){return r[e](r,t)})}),n},A$=function(e,t,r){if(!AB()(e)||"object"!==AK(e))return null;var n=null;return Object.keys(e).forEach(function(a){var o=e[a];Az.includes(a)&&"function"==typeof o&&(n||(n={}),n[a]=function(e){return o(t,r,e),null})}),n},AX=["children"],AY=["children"];function AJ(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function AZ(e){return(AZ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var A0={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},A1=function(e){return"string"==typeof e?e:e?e.displayName||e.name||"Component":""},A2=null,A5=null,A4=function e(t){if(t===A2&&Array.isArray(A5))return A5;var r=[];return g.Children.forEach(t,function(t){Ax()(t)||((0,Aj.isFragment)(t)?r=r.concat(e(t.props.children)):r.push(t))}),A5=r,A2=t,r};function A3(e,t){var r=[],n=[];return n=Array.isArray(t)?t.map(function(e){return A1(e)}):[A1(t)],A4(e).forEach(function(e){var t=Am()(e,"type.displayName")||Am()(e,"type.name");-1!==n.indexOf(t)&&r.push(e)}),r}function A6(e,t){var r=A3(e,t);return r&&r[0]}var A8=function(e){if(!e||!e.props)return!1;var t=e.props,r=t.width,n=t.height;return!!AP(r)&&!(r<=0)&&!!AP(n)&&!(n<=0)},A7=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],A9=function(e,t,r,n){var a,o=null!==(a=null==AG?void 0:AG[n])&&void 0!==a?a:[];return t.startsWith("data-")||!Aw()(e)&&(n&&o.includes(t)||AV.includes(t))||r&&Az.includes(t)},ce=function(e,t,r){if(!e||"function"==typeof e||"boolean"==typeof e)return null;var n=e;if((0,g.isValidElement)(e)&&(n=e.props),!AB()(n))return null;var a={};return Object.keys(n).forEach(function(e){var o;A9(null===(o=n)||void 0===o?void 0:o[e],e,t,r)&&(a[e]=n[e])}),a},ct=function e(t,r){if(t===r)return!0;var n=g.Children.count(t);if(n!==g.Children.count(r))return!1;if(0===n)return!0;if(1===n)return cr(Array.isArray(t)?t[0]:t,Array.isArray(r)?r[0]:r);for(var a=0;a<n;a++){var o=t[a],i=r[a];if(Array.isArray(o)||Array.isArray(i)){if(!e(o,i))return!1}else if(!cr(o,i))return!1}return!0},cr=function(e,t){if(Ax()(e)&&Ax()(t))return!0;if(!Ax()(e)&&!Ax()(t)){var r=e.props||{},n=r.children,a=AJ(r,AX),o=t.props||{},i=o.children,s=AJ(o,AY);if(n&&i)return AR(a,s)&&ct(n,i);if(!n&&!i)return AR(a,s)}return!1},cn=function(e,t){var r=[],n={};return A4(e).forEach(function(e,a){if(e&&e.type&&Ay()(e.type)&&A7.indexOf(e.type)>=0)r.push(e);else if(e){var o=A1(e.type),i=t[o]||{},s=i.handler,l=i.once;if(s&&(!l||!n[o])){var A=s(e,o,a);r.push(A),n[o]=!0}}}),r},ca=function(e){var t=e&&e.type;return t&&A0[t]?A0[t]:null};function co(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e)}return this}function ci(e,t){switch(arguments.length){case 0:break;case 1:"function"==typeof e?this.interpolator(e):this.range(e);break;default:this.domain(e),"function"==typeof t?this.interpolator(t):this.range(t)}return this}class cs extends Map{constructor(e,t=cA){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:t}}),null!=e)for(let[t,r]of e)this.set(t,r)}get(e){return super.get(cl(this,e))}has(e){return super.has(cl(this,e))}set(e,t){return super.set(function({_intern:e,_key:t},r){let n=t(r);return e.has(n)?e.get(n):(e.set(n,r),r)}(this,e),t)}delete(e){return super.delete(function({_intern:e,_key:t},r){let n=t(r);return e.has(n)&&(r=e.get(n),e.delete(n)),r}(this,e))}}function cl({_intern:e,_key:t},r){let n=t(r);return e.has(n)?e.get(n):r}function cA(e){return null!==e&&"object"==typeof e?e.valueOf():e}let cc=Symbol("implicit");function cd(){var e=new cs,t=[],r=[],n=cc;function a(a){let o=e.get(a);if(void 0===o){if(n!==cc)return n;e.set(a,o=t.push(a)-1)}return r[o%r.length]}return a.domain=function(r){if(!arguments.length)return t.slice();for(let n of(t=[],e=new cs,r))e.has(n)||e.set(n,t.push(n)-1);return a},a.range=function(e){return arguments.length?(r=Array.from(e),a):r.slice()},a.unknown=function(e){return arguments.length?(n=e,a):n},a.copy=function(){return cd(t,r).unknown(n)},co.apply(a,arguments),a}function cu(){var e,t,r=cd().unknown(void 0),n=r.domain,a=r.range,o=0,i=1,s=!1,l=0,A=0,c=.5;function d(){var r=n().length,d=i<o,u=d?i:o,h=d?o:i;e=(h-u)/Math.max(1,r-l+2*A),s&&(e=Math.floor(e)),u+=(h-u-e*(r-l))*c,t=e*(1-l),s&&(u=Math.round(u),t=Math.round(t));var f=(function(e,t,r){e=+e,t=+t,r=(a=arguments.length)<2?(t=e,e=0,1):a<3?1:+r;for(var n=-1,a=0|Math.max(0,Math.ceil((t-e)/r)),o=Array(a);++n<a;)o[n]=e+n*r;return o})(r).map(function(t){return u+e*t});return a(d?f.reverse():f)}return delete r.unknown,r.domain=function(e){return arguments.length?(n(e),d()):n()},r.range=function(e){return arguments.length?([o,i]=e,o=+o,i=+i,d()):[o,i]},r.rangeRound=function(e){return[o,i]=e,o=+o,i=+i,s=!0,d()},r.bandwidth=function(){return t},r.step=function(){return e},r.round=function(e){return arguments.length?(s=!!e,d()):s},r.padding=function(e){return arguments.length?(l=Math.min(1,A=+e),d()):l},r.paddingInner=function(e){return arguments.length?(l=Math.min(1,e),d()):l},r.paddingOuter=function(e){return arguments.length?(A=+e,d()):A},r.align=function(e){return arguments.length?(c=Math.max(0,Math.min(1,e)),d()):c},r.copy=function(){return cu(n(),[o,i]).round(s).paddingInner(l).paddingOuter(A).align(c)},co.apply(d(),arguments)}function ch(){return function e(t){var r=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return e(r())},t}(cu.apply(null,arguments).paddingInner(1))}let cf=Math.sqrt(50),cp=Math.sqrt(10),cm=Math.sqrt(2);function cg(e,t,r){let n,a,o;let i=(t-e)/Math.max(0,r),s=Math.floor(Math.log10(i)),l=i/Math.pow(10,s),A=l>=cf?10:l>=cp?5:l>=cm?2:1;return(s<0?(n=Math.round(e*(o=Math.pow(10,-s)/A)),a=Math.round(t*o),n/o<e&&++n,a/o>t&&--a,o=-o):(n=Math.round(e/(o=Math.pow(10,s)*A)),a=Math.round(t/o),n*o<e&&++n,a*o>t&&--a),a<n&&.5<=r&&r<2)?cg(e,t,2*r):[n,a,o]}function cx(e,t,r){if(t=+t,e=+e,!((r=+r)>0))return[];if(e===t)return[e];let n=t<e,[a,o,i]=n?cg(t,e,r):cg(e,t,r);if(!(o>=a))return[];let s=o-a+1,l=Array(s);if(n){if(i<0)for(let e=0;e<s;++e)l[e]=-((o-e)/i);else for(let e=0;e<s;++e)l[e]=(o-e)*i}else if(i<0)for(let e=0;e<s;++e)l[e]=-((a+e)/i);else for(let e=0;e<s;++e)l[e]=(a+e)*i;return l}function cb(e,t,r){return cg(e=+e,t=+t,r=+r)[2]}function cy(e,t,r){t=+t,e=+e,r=+r;let n=t<e,a=n?cb(t,e,r):cb(e,t,r);return(n?-1:1)*(a<0?-(1/a):a)}function cv(e,t){return null==e||null==t?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function cw(e,t){return null==e||null==t?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function ck(e){let t,r,n;function a(e,n,a=0,o=e.length){if(a<o){if(0!==t(n,n))return o;do{let t=a+o>>>1;0>r(e[t],n)?a=t+1:o=t}while(a<o)}return a}return 2!==e.length?(t=cv,r=(t,r)=>cv(e(t),r),n=(t,r)=>e(t)-r):(t=e===cv||e===cw?e:cB,r=e,n=e),{left:a,center:function(e,t,r=0,o=e.length){let i=a(e,t,r,o-1);return i>r&&n(e[i-1],t)>-n(e[i],t)?i-1:i},right:function(e,n,a=0,o=e.length){if(a<o){if(0!==t(n,n))return o;do{let t=a+o>>>1;0>=r(e[t],n)?a=t+1:o=t}while(a<o)}return a}}}function cB(){return 0}function cj(e){return null===e?NaN:+e}let cC=ck(cv),cN=cC.right;function cS(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function cF(e,t){var r=Object.create(e.prototype);for(var n in t)r[n]=t[n];return r}function cE(){}cC.left,ck(cj).center;var cO="\\s*([+-]?\\d+)\\s*",cP="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",cI="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",cU=/^#([0-9a-f]{3,8})$/,cL=RegExp(`^rgb\\(${cO},${cO},${cO}\\)$`),c_=RegExp(`^rgb\\(${cI},${cI},${cI}\\)$`),cQ=RegExp(`^rgba\\(${cO},${cO},${cO},${cP}\\)$`),cT=RegExp(`^rgba\\(${cI},${cI},${cI},${cP}\\)$`),cD=RegExp(`^hsl\\(${cP},${cI},${cI}\\)$`),cM=RegExp(`^hsla\\(${cP},${cI},${cI},${cP}\\)$`),cH={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function cR(){return this.rgb().formatHex()}function cK(){return this.rgb().formatRgb()}function cV(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=cU.exec(e))?(r=t[1].length,t=parseInt(t[1],16),6===r?cq(t):3===r?new cW(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===r?cG(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===r?cG(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=cL.exec(e))?new cW(t[1],t[2],t[3],1):(t=c_.exec(e))?new cW(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=cQ.exec(e))?cG(t[1],t[2],t[3],t[4]):(t=cT.exec(e))?cG(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=cD.exec(e))?c0(t[1],t[2]/100,t[3]/100,1):(t=cM.exec(e))?c0(t[1],t[2]/100,t[3]/100,t[4]):cH.hasOwnProperty(e)?cq(cH[e]):"transparent"===e?new cW(NaN,NaN,NaN,0):null}function cq(e){return new cW(e>>16&255,e>>8&255,255&e,1)}function cG(e,t,r,n){return n<=0&&(e=t=r=NaN),new cW(e,t,r,n)}function cz(e,t,r,n){var a;return 1==arguments.length?((a=e)instanceof cE||(a=cV(a)),a)?new cW((a=a.rgb()).r,a.g,a.b,a.opacity):new cW:new cW(e,t,r,null==n?1:n)}function cW(e,t,r,n){this.r=+e,this.g=+t,this.b=+r,this.opacity=+n}function c$(){return`#${cZ(this.r)}${cZ(this.g)}${cZ(this.b)}`}function cX(){let e=cY(this.opacity);return`${1===e?"rgb(":"rgba("}${cJ(this.r)}, ${cJ(this.g)}, ${cJ(this.b)}${1===e?")":`, ${e})`}`}function cY(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function cJ(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function cZ(e){return((e=cJ(e))<16?"0":"")+e.toString(16)}function c0(e,t,r,n){return n<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new c2(e,t,r,n)}function c1(e){if(e instanceof c2)return new c2(e.h,e.s,e.l,e.opacity);if(e instanceof cE||(e=cV(e)),!e)return new c2;if(e instanceof c2)return e;var t=(e=e.rgb()).r/255,r=e.g/255,n=e.b/255,a=Math.min(t,r,n),o=Math.max(t,r,n),i=NaN,s=o-a,l=(o+a)/2;return s?(i=t===o?(r-n)/s+(r<n)*6:r===o?(n-t)/s+2:(t-r)/s+4,s/=l<.5?o+a:2-o-a,i*=60):s=l>0&&l<1?0:i,new c2(i,s,l,e.opacity)}function c2(e,t,r,n){this.h=+e,this.s=+t,this.l=+r,this.opacity=+n}function c5(e){return(e=(e||0)%360)<0?e+360:e}function c4(e){return Math.max(0,Math.min(1,e||0))}function c3(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}function c6(e,t,r,n,a){var o=e*e,i=o*e;return((1-3*e+3*o-i)*t+(4-6*o+3*i)*r+(1+3*e+3*o-3*i)*n+i*a)/6}cS(cE,cV,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:cR,formatHex:cR,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return c1(this).formatHsl()},formatRgb:cK,toString:cK}),cS(cW,cz,cF(cE,{brighter(e){return e=null==e?1.4285714285714286:Math.pow(1.4285714285714286,e),new cW(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=null==e?.7:Math.pow(.7,e),new cW(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new cW(cJ(this.r),cJ(this.g),cJ(this.b),cY(this.opacity))},displayable(){return -.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:c$,formatHex:c$,formatHex8:function(){return`#${cZ(this.r)}${cZ(this.g)}${cZ(this.b)}${cZ((isNaN(this.opacity)?1:this.opacity)*255)}`},formatRgb:cX,toString:cX})),cS(c2,function(e,t,r,n){return 1==arguments.length?c1(e):new c2(e,t,r,null==n?1:n)},cF(cE,{brighter(e){return e=null==e?1.4285714285714286:Math.pow(1.4285714285714286,e),new c2(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=null==e?.7:Math.pow(.7,e),new c2(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*t,a=2*r-n;return new cW(c3(e>=240?e-240:e+120,a,n),c3(e,a,n),c3(e<120?e+240:e-120,a,n),this.opacity)},clamp(){return new c2(c5(this.h),c4(this.s),c4(this.l),cY(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){let e=cY(this.opacity);return`${1===e?"hsl(":"hsla("}${c5(this.h)}, ${100*c4(this.s)}%, ${100*c4(this.l)}%${1===e?")":`, ${e})`}`}}));let c8=e=>()=>e;function c7(e,t){var r=t-e;return r?function(t){return e+t*r}:c8(isNaN(e)?t:e)}let c9=function e(t){var r,n=1==(r=+(r=t))?c7:function(e,t){var n,a,o;return t-e?(n=e,a=t,n=Math.pow(n,o=r),a=Math.pow(a,o)-n,o=1/o,function(e){return Math.pow(n+e*a,o)}):c8(isNaN(e)?t:e)};function a(e,t){var r=n((e=cz(e)).r,(t=cz(t)).r),a=n(e.g,t.g),o=n(e.b,t.b),i=c7(e.opacity,t.opacity);return function(t){return e.r=r(t),e.g=a(t),e.b=o(t),e.opacity=i(t),e+""}}return a.gamma=e,a}(1);function de(e){return function(t){var r,n,a=t.length,o=Array(a),i=Array(a),s=Array(a);for(r=0;r<a;++r)n=cz(t[r]),o[r]=n.r||0,i[r]=n.g||0,s[r]=n.b||0;return o=e(o),i=e(i),s=e(s),n.opacity=1,function(e){return n.r=o(e),n.g=i(e),n.b=s(e),n+""}}}function dt(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}de(function(e){var t=e.length-1;return function(r){var n=r<=0?r=0:r>=1?(r=1,t-1):Math.floor(r*t),a=e[n],o=e[n+1],i=n>0?e[n-1]:2*a-o,s=n<t-1?e[n+2]:2*o-a;return c6((r-n/t)*t,i,a,o,s)}}),de(function(e){var t=e.length;return function(r){var n=Math.floor(((r%=1)<0?++r:r)*t),a=e[(n+t-1)%t],o=e[n%t],i=e[(n+1)%t],s=e[(n+2)%t];return c6((r-n/t)*t,a,o,i,s)}});var dr=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,dn=RegExp(dr.source,"g");function da(e,t){var r,n,a=typeof t;return null==t||"boolean"===a?c8(t):("number"===a?dt:"string"===a?(n=cV(t))?(t=n,c9):function(e,t){var r,n,a,o,i,s=dr.lastIndex=dn.lastIndex=0,l=-1,A=[],c=[];for(e+="",t+="";(a=dr.exec(e))&&(o=dn.exec(t));)(i=o.index)>s&&(i=t.slice(s,i),A[l]?A[l]+=i:A[++l]=i),(a=a[0])===(o=o[0])?A[l]?A[l]+=o:A[++l]=o:(A[++l]=null,c.push({i:l,x:dt(a,o)})),s=dn.lastIndex;return s<t.length&&(i=t.slice(s),A[l]?A[l]+=i:A[++l]=i),A.length<2?c[0]?(r=c[0].x,function(e){return r(e)+""}):(n=t,function(){return n}):(t=c.length,function(e){for(var r,n=0;n<t;++n)A[(r=c[n]).i]=r.x(e);return A.join("")})}:t instanceof cV?c9:t instanceof Date?function(e,t){var r=new Date;return e=+e,t=+t,function(n){return r.setTime(e*(1-n)+t*n),r}}:!ArrayBuffer.isView(r=t)||r instanceof DataView?Array.isArray(t)?function(e,t){var r,n=t?t.length:0,a=e?Math.min(n,e.length):0,o=Array(a),i=Array(n);for(r=0;r<a;++r)o[r]=da(e[r],t[r]);for(;r<n;++r)i[r]=t[r];return function(e){for(r=0;r<a;++r)i[r]=o[r](e);return i}}:"function"!=typeof t.valueOf&&"function"!=typeof t.toString||isNaN(t)?function(e,t){var r,n={},a={};for(r in(null===e||"object"!=typeof e)&&(e={}),(null===t||"object"!=typeof t)&&(t={}),t)r in e?n[r]=da(e[r],t[r]):a[r]=t[r];return function(e){for(r in n)a[r]=n[r](e);return a}}:dt:function(e,t){t||(t=[]);var r,n=e?Math.min(t.length,e.length):0,a=t.slice();return function(o){for(r=0;r<n;++r)a[r]=e[r]*(1-o)+t[r]*o;return a}})(e,t)}function di(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}}function ds(e){return+e}var dl=[0,1];function dA(e){return e}function dc(e,t){var r;return(t-=e=+e)?function(r){return(r-e)/t}:(r=isNaN(t)?NaN:.5,function(){return r})}function dd(e,t,r){var n=e[0],a=e[1],o=t[0],i=t[1];return a<n?(n=dc(a,n),o=r(i,o)):(n=dc(n,a),o=r(o,i)),function(e){return o(n(e))}}function du(e,t,r){var n=Math.min(e.length,t.length)-1,a=Array(n),o=Array(n),i=-1;for(e[n]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++i<n;)a[i]=dc(e[i],e[i+1]),o[i]=r(t[i],t[i+1]);return function(t){var r=cN(e,t,1,n)-1;return o[r](a[r](t))}}function dh(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function df(){var e,t,r,n,a,o,i=dl,s=dl,l=da,A=dA;function c(){var e,t,r,l=Math.min(i.length,s.length);return A!==dA&&(e=i[0],t=i[l-1],e>t&&(r=e,e=t,t=r),A=function(r){return Math.max(e,Math.min(t,r))}),n=l>2?du:dd,a=o=null,d}function d(t){return null==t||isNaN(t=+t)?r:(a||(a=n(i.map(e),s,l)))(e(A(t)))}return d.invert=function(r){return A(t((o||(o=n(s,i.map(e),dt)))(r)))},d.domain=function(e){return arguments.length?(i=Array.from(e,ds),c()):i.slice()},d.range=function(e){return arguments.length?(s=Array.from(e),c()):s.slice()},d.rangeRound=function(e){return s=Array.from(e),l=di,c()},d.clamp=function(e){return arguments.length?(A=!!e||dA,c()):A!==dA},d.interpolate=function(e){return arguments.length?(l=e,c()):l},d.unknown=function(e){return arguments.length?(r=e,d):r},function(r,n){return e=r,t=n,c()}}function dp(){return df()(dA,dA)}var dm=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function dg(e){var t;if(!(t=dm.exec(e)))throw Error("invalid format: "+e);return new dx({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}function dx(e){this.fill=void 0===e.fill?" ":e.fill+"",this.align=void 0===e.align?">":e.align+"",this.sign=void 0===e.sign?"-":e.sign+"",this.symbol=void 0===e.symbol?"":e.symbol+"",this.zero=!!e.zero,this.width=void 0===e.width?void 0:+e.width,this.comma=!!e.comma,this.precision=void 0===e.precision?void 0:+e.precision,this.trim=!!e.trim,this.type=void 0===e.type?"":e.type+""}function db(e,t){if((r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var r,n=e.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+e.slice(r+1)]}function dy(e){return(e=db(Math.abs(e)))?e[1]:NaN}function dv(e,t){var r=db(e,t);if(!r)return e+"";var n=r[0],a=r[1];return a<0?"0."+Array(-a).join("0")+n:n.length>a+1?n.slice(0,a+1)+"."+n.slice(a+1):n+Array(a-n.length+2).join("0")}dg.prototype=dx.prototype,dx.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};let dw={"%":(e,t)=>(100*e).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:function(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)},e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>dv(100*e,t),r:dv,s:function(e,t){var r=db(e,t);if(!r)return e+"";var n=r[0],a=r[1],o=a-(hJ=3*Math.max(-8,Math.min(8,Math.floor(a/3))))+1,i=n.length;return o===i?n:o>i?n+Array(o-i+1).join("0"):o>0?n.slice(0,o)+"."+n.slice(o):"0."+Array(1-o).join("0")+db(e,Math.max(0,t+o-1))[0]},X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function dk(e){return e}var dB=Array.prototype.map,dj=["y","z","a","f","p","n","\xb5","m","","k","M","G","T","P","E","Z","Y"];function dC(e,t,r,n){var a,o,i=cy(e,t,r);switch((n=dg(null==n?",f":n)).type){case"s":var s=Math.max(Math.abs(e),Math.abs(t));return null!=n.precision||isNaN(o=Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(dy(s)/3)))-dy(Math.abs(i))))||(n.precision=o),h1(n,s);case"":case"e":case"g":case"p":case"r":null!=n.precision||isNaN(o=Math.max(0,dy(Math.abs(Math.max(Math.abs(e),Math.abs(t)))-(a=Math.abs(a=i)))-dy(a))+1)||(n.precision=o-("e"===n.type));break;case"f":case"%":null!=n.precision||isNaN(o=Math.max(0,-dy(Math.abs(i))))||(n.precision=o-("%"===n.type)*2)}return h0(n)}function dN(e){var t=e.domain;return e.ticks=function(e){var r=t();return cx(r[0],r[r.length-1],null==e?10:e)},e.tickFormat=function(e,r){var n=t();return dC(n[0],n[n.length-1],null==e?10:e,r)},e.nice=function(r){null==r&&(r=10);var n,a,o=t(),i=0,s=o.length-1,l=o[i],A=o[s],c=10;for(A<l&&(a=l,l=A,A=a,a=i,i=s,s=a);c-- >0;){if((a=cb(l,A,r))===n)return o[i]=l,o[s]=A,t(o);if(a>0)l=Math.floor(l/a)*a,A=Math.ceil(A/a)*a;else if(a<0)l=Math.ceil(l*a)/a,A=Math.floor(A*a)/a;else break;n=a}return e},e}function dS(){var e=dp();return e.copy=function(){return dh(e,dS())},co.apply(e,arguments),dN(e)}function dF(e,t){e=e.slice();var r,n=0,a=e.length-1,o=e[n],i=e[a];return i<o&&(r=n,n=a,a=r,r=o,o=i,i=r),e[n]=t.floor(o),e[a]=t.ceil(i),e}function dE(e){return Math.log(e)}function dO(e){return Math.exp(e)}function dP(e){return-Math.log(-e)}function dI(e){return-Math.exp(-e)}function dU(e){return isFinite(e)?+("1e"+e):e<0?0:e}function dL(e){return(t,r)=>-e(-t,r)}function d_(e){let t,r;let n=e(dE,dO),a=n.domain,o=10;function i(){var i,s;return t=(i=o)===Math.E?Math.log:10===i&&Math.log10||2===i&&Math.log2||(i=Math.log(i),e=>Math.log(e)/i),r=10===(s=o)?dU:s===Math.E?Math.exp:e=>Math.pow(s,e),a()[0]<0?(t=dL(t),r=dL(r),e(dP,dI)):e(dE,dO),n}return n.base=function(e){return arguments.length?(o=+e,i()):o},n.domain=function(e){return arguments.length?(a(e),i()):a()},n.ticks=e=>{let n,i;let s=a(),l=s[0],A=s[s.length-1],c=A<l;c&&([l,A]=[A,l]);let d=t(l),u=t(A),h=null==e?10:+e,f=[];if(!(o%1)&&u-d<h){if(d=Math.floor(d),u=Math.ceil(u),l>0){for(;d<=u;++d)for(n=1;n<o;++n)if(!((i=d<0?n/r(-d):n*r(d))<l)){if(i>A)break;f.push(i)}}else for(;d<=u;++d)for(n=o-1;n>=1;--n)if(!((i=d>0?n/r(-d):n*r(d))<l)){if(i>A)break;f.push(i)}2*f.length<h&&(f=cx(l,A,h))}else f=cx(d,u,Math.min(u-d,h)).map(r);return c?f.reverse():f},n.tickFormat=(e,a)=>{if(null==e&&(e=10),null==a&&(a=10===o?"s":","),"function"!=typeof a&&(o%1||null!=(a=dg(a)).precision||(a.trim=!0),a=h0(a)),e===1/0)return a;let i=Math.max(1,o*e/n.ticks().length);return e=>{let n=e/r(Math.round(t(e)));return n*o<o-.5&&(n*=o),n<=i?a(e):""}},n.nice=()=>a(dF(a(),{floor:e=>r(Math.floor(t(e))),ceil:e=>r(Math.ceil(t(e)))})),n}function dQ(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function dT(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function dD(e){var t=1,r=e(dQ(1),dT(t));return r.constant=function(r){return arguments.length?e(dQ(t=+r),dT(t)):t},dN(r)}function dM(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function dH(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function dR(e){return e<0?-e*e:e*e}function dK(e){var t=e(dA,dA),r=1;return t.exponent=function(t){return arguments.length?1==(r=+t)?e(dA,dA):.5===r?e(dH,dR):e(dM(r),dM(1/r)):r},dN(t)}function dV(){var e=dK(df());return e.copy=function(){return dh(e,dV()).exponent(e.exponent())},co.apply(e,arguments),e}function dq(){return dV.apply(null,arguments).exponent(.5)}function dG(e){return Math.sign(e)*e*e}function dz(e,t){let r;if(void 0===t)for(let t of e)null!=t&&(r<t||void 0===r&&t>=t)&&(r=t);else{let n=-1;for(let a of e)null!=(a=t(a,++n,e))&&(r<a||void 0===r&&a>=a)&&(r=a)}return r}function dW(e,t){let r;if(void 0===t)for(let t of e)null!=t&&(r>t||void 0===r&&t>=t)&&(r=t);else{let n=-1;for(let a of e)null!=(a=t(a,++n,e))&&(r>a||void 0===r&&a>=a)&&(r=a)}return r}function d$(e,t){return(null==e||!(e>=e))-(null==t||!(t>=t))||(e<t?-1:e>t?1:0)}function dX(e,t,r){let n=e[t];e[t]=e[r],e[r]=n}h0=(hZ=function(e){var t,r,n,a=void 0===e.grouping||void 0===e.thousands?dk:(t=dB.call(e.grouping,Number),r=e.thousands+"",function(e,n){for(var a=e.length,o=[],i=0,s=t[0],l=0;a>0&&s>0&&(l+s+1>n&&(s=Math.max(1,n-l)),o.push(e.substring(a-=s,a+s)),!((l+=s+1)>n));)s=t[i=(i+1)%t.length];return o.reverse().join(r)}),o=void 0===e.currency?"":e.currency[0]+"",i=void 0===e.currency?"":e.currency[1]+"",s=void 0===e.decimal?".":e.decimal+"",l=void 0===e.numerals?dk:(n=dB.call(e.numerals,String),function(e){return e.replace(/[0-9]/g,function(e){return n[+e]})}),A=void 0===e.percent?"%":e.percent+"",c=void 0===e.minus?"":e.minus+"",d=void 0===e.nan?"NaN":e.nan+"";function u(e){var t=(e=dg(e)).fill,r=e.align,n=e.sign,u=e.symbol,h=e.zero,f=e.width,p=e.comma,m=e.precision,g=e.trim,x=e.type;"n"===x?(p=!0,x="g"):dw[x]||(void 0===m&&(m=12),g=!0,x="g"),(h||"0"===t&&"="===r)&&(h=!0,t="0",r="=");var b="$"===u?o:"#"===u&&/[boxX]/.test(x)?"0"+x.toLowerCase():"",y="$"===u?i:/[%p]/.test(x)?A:"",v=dw[x],w=/[defgprs%]/.test(x);function k(e){var o,i,A,u=b,k=y;if("c"===x)k=v(e)+k,e="";else{var B=(e=+e)<0||1/e<0;if(e=isNaN(e)?d:v(Math.abs(e),m),g&&(e=function(e){o:for(var t,r=e.length,n=1,a=-1;n<r;++n)switch(e[n]){case".":a=t=n;break;case"0":0===a&&(a=n),t=n;break;default:if(!+e[n])break o;a>0&&(a=0)}return a>0?e.slice(0,a)+e.slice(t+1):e}(e)),B&&0==+e&&"+"!==n&&(B=!1),u=(B?"("===n?n:c:"-"===n||"("===n?"":n)+u,k=("s"===x?dj[8+hJ/3]:"")+k+(B&&"("===n?")":""),w){for(o=-1,i=e.length;++o<i;)if(48>(A=e.charCodeAt(o))||A>57){k=(46===A?s+e.slice(o+1):e.slice(o))+k,e=e.slice(0,o);break}}}p&&!h&&(e=a(e,1/0));var j=u.length+e.length+k.length,C=j<f?Array(f-j+1).join(t):"";switch(p&&h&&(e=a(C+e,C.length?f-k.length:1/0),C=""),r){case"<":e=u+e+k+C;break;case"=":e=u+C+e+k;break;case"^":e=C.slice(0,j=C.length>>1)+u+e+k+C.slice(j);break;default:e=C+u+e+k}return l(e)}return m=void 0===m?6:/[gprs]/.test(x)?Math.max(1,Math.min(21,m)):Math.max(0,Math.min(20,m)),k.toString=function(){return e+""},k}return{format:u,formatPrefix:function(e,t){var r=u(((e=dg(e)).type="f",e)),n=3*Math.max(-8,Math.min(8,Math.floor(dy(t)/3))),a=Math.pow(10,-n),o=dj[8+n/3];return function(e){return r(a*e)+o}}}}({thousands:",",grouping:[3],currency:["$",""]})).format,h1=hZ.formatPrefix;let dY=new Date,dJ=new Date;function dZ(e,t,r,n){function a(t){return e(t=0==arguments.length?new Date:new Date(+t)),t}return a.floor=t=>(e(t=new Date(+t)),t),a.ceil=r=>(e(r=new Date(r-1)),t(r,1),e(r),r),a.round=e=>{let t=a(e),r=a.ceil(e);return e-t<r-e?t:r},a.offset=(e,r)=>(t(e=new Date(+e),null==r?1:Math.floor(r)),e),a.range=(r,n,o)=>{let i;let s=[];if(r=a.ceil(r),o=null==o?1:Math.floor(o),!(r<n)||!(o>0))return s;do s.push(i=new Date(+r)),t(r,o),e(r);while(i<r&&r<n);return s},a.filter=r=>dZ(t=>{if(t>=t)for(;e(t),!r(t);)t.setTime(t-1)},(e,n)=>{if(e>=e){if(n<0)for(;++n<=0;)for(;t(e,-1),!r(e););else for(;--n>=0;)for(;t(e,1),!r(e););}}),r&&(a.count=(t,n)=>(dY.setTime(+t),dJ.setTime(+n),e(dY),e(dJ),Math.floor(r(dY,dJ))),a.every=e=>isFinite(e=Math.floor(e))&&e>0?e>1?a.filter(n?t=>n(t)%e==0:t=>a.count(0,t)%e==0):a:null),a}let d0=dZ(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);d0.every=e=>isFinite(e=Math.floor(e))&&e>0?e>1?dZ(t=>{t.setTime(Math.floor(t/e)*e)},(t,r)=>{t.setTime(+t+r*e)},(t,r)=>(r-t)/e):d0:null,d0.range;let d1=dZ(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+1e3*t)},(e,t)=>(t-e)/1e3,e=>e.getUTCSeconds());d1.range;let d2=dZ(e=>{e.setTime(e-e.getMilliseconds()-1e3*e.getSeconds())},(e,t)=>{e.setTime(+e+6e4*t)},(e,t)=>(t-e)/6e4,e=>e.getMinutes());d2.range;let d5=dZ(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+6e4*t)},(e,t)=>(t-e)/6e4,e=>e.getUTCMinutes());d5.range;let d4=dZ(e=>{e.setTime(e-e.getMilliseconds()-1e3*e.getSeconds()-6e4*e.getMinutes())},(e,t)=>{e.setTime(+e+36e5*t)},(e,t)=>(t-e)/36e5,e=>e.getHours());d4.range;let d3=dZ(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+36e5*t)},(e,t)=>(t-e)/36e5,e=>e.getUTCHours());d3.range;let d6=dZ(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*6e4)/864e5,e=>e.getDate()-1);d6.range;let d8=dZ(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/864e5,e=>e.getUTCDate()-1);d8.range;let d7=dZ(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/864e5,e=>Math.floor(e/864e5));function d9(e){return dZ(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(e,t)=>{e.setDate(e.getDate()+7*t)},(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*6e4)/6048e5)}d7.range;let ue=d9(0),ut=d9(1),ur=d9(2),un=d9(3),ua=d9(4),uo=d9(5),ui=d9(6);function us(e){return dZ(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+7*t)},(e,t)=>(t-e)/6048e5)}ue.range,ut.range,ur.range,un.range,ua.range,uo.range,ui.range;let ul=us(0),uA=us(1),uc=us(2),ud=us(3),uu=us(4),uh=us(5),uf=us(6);ul.range,uA.range,uc.range,ud.range,uu.range,uh.range,uf.range;let up=dZ(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());up.range;let um=dZ(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());um.range;let ug=dZ(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());ug.every=e=>isFinite(e=Math.floor(e))&&e>0?dZ(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,r)=>{t.setFullYear(t.getFullYear()+r*e)}):null,ug.range;let ux=dZ(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());function ub(e,t,r,n,a,o){let i=[[d1,1,1e3],[d1,5,5e3],[d1,15,15e3],[d1,30,3e4],[o,1,6e4],[o,5,3e5],[o,15,9e5],[o,30,18e5],[a,1,36e5],[a,3,108e5],[a,6,216e5],[a,12,432e5],[n,1,864e5],[n,2,1728e5],[r,1,6048e5],[t,1,2592e6],[t,3,7776e6],[e,1,31536e6]];function s(t,r,n){let a=Math.abs(r-t)/n,o=ck(([,,e])=>e).right(i,a);if(o===i.length)return e.every(cy(t/31536e6,r/31536e6,n));if(0===o)return d0.every(Math.max(cy(t,r,n),1));let[s,l]=i[a/i[o-1][2]<i[o][2]/a?o-1:o];return s.every(l)}return[function(e,t,r){let n=t<e;n&&([e,t]=[t,e]);let a=r&&"function"==typeof r.range?r:s(e,t,r),o=a?a.range(e,+t+1):[];return n?o.reverse():o},s]}ux.every=e=>isFinite(e=Math.floor(e))&&e>0?dZ(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCFullYear(t.getUTCFullYear()+r*e)}):null,ux.range;let[uy,uv]=ub(ux,um,ul,d7,d3,d5),[uw,uk]=ub(ug,up,ue,d6,d4,d2);function uB(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function uj(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function uC(e,t,r){return{y:e,m:t,d:r,H:0,M:0,S:0,L:0}}var uN={"-":"",_:" ",0:"0"},uS=/^\s*\d+/,uF=/^%/,uE=/[\\^$*+?|[\]().{}]/g;function uO(e,t,r){var n=e<0?"-":"",a=(n?-e:e)+"",o=a.length;return n+(o<r?Array(r-o+1).join(t)+a:a)}function uP(e){return e.replace(uE,"\\$&")}function uI(e){return RegExp("^(?:"+e.map(uP).join("|")+")","i")}function uU(e){return new Map(e.map((e,t)=>[e.toLowerCase(),t]))}function uL(e,t,r){var n=uS.exec(t.slice(r,r+1));return n?(e.w=+n[0],r+n[0].length):-1}function u_(e,t,r){var n=uS.exec(t.slice(r,r+1));return n?(e.u=+n[0],r+n[0].length):-1}function uQ(e,t,r){var n=uS.exec(t.slice(r,r+2));return n?(e.U=+n[0],r+n[0].length):-1}function uT(e,t,r){var n=uS.exec(t.slice(r,r+2));return n?(e.V=+n[0],r+n[0].length):-1}function uD(e,t,r){var n=uS.exec(t.slice(r,r+2));return n?(e.W=+n[0],r+n[0].length):-1}function uM(e,t,r){var n=uS.exec(t.slice(r,r+4));return n?(e.y=+n[0],r+n[0].length):-1}function uH(e,t,r){var n=uS.exec(t.slice(r,r+2));return n?(e.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function uR(e,t,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(r,r+6));return n?(e.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function uK(e,t,r){var n=uS.exec(t.slice(r,r+1));return n?(e.q=3*n[0]-3,r+n[0].length):-1}function uV(e,t,r){var n=uS.exec(t.slice(r,r+2));return n?(e.m=n[0]-1,r+n[0].length):-1}function uq(e,t,r){var n=uS.exec(t.slice(r,r+2));return n?(e.d=+n[0],r+n[0].length):-1}function uG(e,t,r){var n=uS.exec(t.slice(r,r+3));return n?(e.m=0,e.d=+n[0],r+n[0].length):-1}function uz(e,t,r){var n=uS.exec(t.slice(r,r+2));return n?(e.H=+n[0],r+n[0].length):-1}function uW(e,t,r){var n=uS.exec(t.slice(r,r+2));return n?(e.M=+n[0],r+n[0].length):-1}function u$(e,t,r){var n=uS.exec(t.slice(r,r+2));return n?(e.S=+n[0],r+n[0].length):-1}function uX(e,t,r){var n=uS.exec(t.slice(r,r+3));return n?(e.L=+n[0],r+n[0].length):-1}function uY(e,t,r){var n=uS.exec(t.slice(r,r+6));return n?(e.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function uJ(e,t,r){var n=uF.exec(t.slice(r,r+1));return n?r+n[0].length:-1}function uZ(e,t,r){var n=uS.exec(t.slice(r));return n?(e.Q=+n[0],r+n[0].length):-1}function u0(e,t,r){var n=uS.exec(t.slice(r));return n?(e.s=+n[0],r+n[0].length):-1}function u1(e,t){return uO(e.getDate(),t,2)}function u2(e,t){return uO(e.getHours(),t,2)}function u5(e,t){return uO(e.getHours()%12||12,t,2)}function u4(e,t){return uO(1+d6.count(ug(e),e),t,3)}function u3(e,t){return uO(e.getMilliseconds(),t,3)}function u6(e,t){return u3(e,t)+"000"}function u8(e,t){return uO(e.getMonth()+1,t,2)}function u7(e,t){return uO(e.getMinutes(),t,2)}function u9(e,t){return uO(e.getSeconds(),t,2)}function he(e){var t=e.getDay();return 0===t?7:t}function ht(e,t){return uO(ue.count(ug(e)-1,e),t,2)}function hr(e){var t=e.getDay();return t>=4||0===t?ua(e):ua.ceil(e)}function hn(e,t){return e=hr(e),uO(ua.count(ug(e),e)+(4===ug(e).getDay()),t,2)}function ha(e){return e.getDay()}function ho(e,t){return uO(ut.count(ug(e)-1,e),t,2)}function hi(e,t){return uO(e.getFullYear()%100,t,2)}function hs(e,t){return uO((e=hr(e)).getFullYear()%100,t,2)}function hl(e,t){return uO(e.getFullYear()%1e4,t,4)}function hA(e,t){var r=e.getDay();return uO((e=r>=4||0===r?ua(e):ua.ceil(e)).getFullYear()%1e4,t,4)}function hc(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+uO(t/60|0,"0",2)+uO(t%60,"0",2)}function hd(e,t){return uO(e.getUTCDate(),t,2)}function hu(e,t){return uO(e.getUTCHours(),t,2)}function hh(e,t){return uO(e.getUTCHours()%12||12,t,2)}function hf(e,t){return uO(1+d8.count(ux(e),e),t,3)}function hp(e,t){return uO(e.getUTCMilliseconds(),t,3)}function hm(e,t){return hp(e,t)+"000"}function hg(e,t){return uO(e.getUTCMonth()+1,t,2)}function hx(e,t){return uO(e.getUTCMinutes(),t,2)}function hb(e,t){return uO(e.getUTCSeconds(),t,2)}function hy(e){var t=e.getUTCDay();return 0===t?7:t}function hv(e,t){return uO(ul.count(ux(e)-1,e),t,2)}function hw(e){var t=e.getUTCDay();return t>=4||0===t?uu(e):uu.ceil(e)}function hk(e,t){return e=hw(e),uO(uu.count(ux(e),e)+(4===ux(e).getUTCDay()),t,2)}function hB(e){return e.getUTCDay()}function hj(e,t){return uO(uA.count(ux(e)-1,e),t,2)}function hC(e,t){return uO(e.getUTCFullYear()%100,t,2)}function hN(e,t){return uO((e=hw(e)).getUTCFullYear()%100,t,2)}function hS(e,t){return uO(e.getUTCFullYear()%1e4,t,4)}function hF(e,t){var r=e.getUTCDay();return uO((e=r>=4||0===r?uu(e):uu.ceil(e)).getUTCFullYear()%1e4,t,4)}function hE(){return"+0000"}function hO(){return"%"}function hP(e){return+e}function hI(e){return Math.floor(+e/1e3)}function hU(e){return new Date(e)}function hL(e){return e instanceof Date?+e:+new Date(+e)}function h_(e,t,r,n,a,o,i,s,l,A){var c=dp(),d=c.invert,u=c.domain,h=A(".%L"),f=A(":%S"),p=A("%I:%M"),m=A("%I %p"),g=A("%a %d"),x=A("%b %d"),b=A("%B"),y=A("%Y");function v(e){return(l(e)<e?h:s(e)<e?f:i(e)<e?p:o(e)<e?m:n(e)<e?a(e)<e?g:x:r(e)<e?b:y)(e)}return c.invert=function(e){return new Date(d(e))},c.domain=function(e){return arguments.length?u(Array.from(e,hL)):u().map(hU)},c.ticks=function(t){var r=u();return e(r[0],r[r.length-1],null==t?10:t)},c.tickFormat=function(e,t){return null==t?v:A(t)},c.nice=function(e){var r=u();return e&&"function"==typeof e.range||(e=t(r[0],r[r.length-1],null==e?10:e)),e?u(dF(r,e)):c},c.copy=function(){return dh(c,h_(e,t,r,n,a,o,i,s,l,A))},c}function hQ(){return co.apply(h_(uw,uk,ug,up,ue,d6,d4,d2,d1,h5).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function hT(){return co.apply(h_(uy,uv,ux,um,ul,d8,d3,d5,d1,h4).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function hD(){var e,t,r,n,a,o=0,i=1,s=dA,l=!1;function A(t){return null==t||isNaN(t=+t)?a:s(0===r?.5:(t=(n(t)-e)*r,l?Math.max(0,Math.min(1,t)):t))}function c(e){return function(t){var r,n;return arguments.length?([r,n]=t,s=e(r,n),A):[s(0),s(1)]}}return A.domain=function(a){return arguments.length?([o,i]=a,e=n(o=+o),t=n(i=+i),r=e===t?0:1/(t-e),A):[o,i]},A.clamp=function(e){return arguments.length?(l=!!e,A):l},A.interpolator=function(e){return arguments.length?(s=e,A):s},A.range=c(da),A.rangeRound=c(di),A.unknown=function(e){return arguments.length?(a=e,A):a},function(a){return n=a,e=a(o),t=a(i),r=e===t?0:1/(t-e),A}}function hM(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function hH(){var e=dK(hD());return e.copy=function(){return hM(e,hH()).exponent(e.exponent())},ci.apply(e,arguments)}function hR(){return hH.apply(null,arguments).exponent(.5)}function hK(){var e,t,r,n,a,o,i,s=0,l=.5,A=1,c=1,d=dA,u=!1;function h(e){return isNaN(e=+e)?i:(e=.5+((e=+o(e))-t)*(c*e<c*t?n:a),d(u?Math.max(0,Math.min(1,e)):e))}function f(e){return function(t){var r,n,a;return arguments.length?([r,n,a]=t,d=function(e,t){void 0===t&&(t=e,e=da);for(var r=0,n=t.length-1,a=t[0],o=Array(n<0?0:n);r<n;)o[r]=e(a,a=t[++r]);return function(e){var t=Math.max(0,Math.min(n-1,Math.floor(e*=n)));return o[t](e-t)}}(e,[r,n,a]),h):[d(0),d(.5),d(1)]}}return h.domain=function(i){return arguments.length?([s,l,A]=i,e=o(s=+s),t=o(l=+l),r=o(A=+A),n=e===t?0:.5/(t-e),a=t===r?0:.5/(r-t),c=t<e?-1:1,h):[s,l,A]},h.clamp=function(e){return arguments.length?(u=!!e,h):u},h.interpolator=function(e){return arguments.length?(d=e,h):d},h.range=f(da),h.rangeRound=f(di),h.unknown=function(e){return arguments.length?(i=e,h):i},function(i){return o=i,e=i(s),t=i(l),r=i(A),n=e===t?0:.5/(t-e),a=t===r?0:.5/(r-t),c=t<e?-1:1,h}}function hV(){var e=dK(hK());return e.copy=function(){return hM(e,hV()).exponent(e.exponent())},ci.apply(e,arguments)}function hq(){return hV.apply(null,arguments).exponent(.5)}function hG(e,t){if((a=e.length)>1)for(var r,n,a,o=1,i=e[t[0]],s=i.length;o<a;++o)for(n=i,i=e[t[o]],r=0;r<s;++r)i[r][1]+=i[r][0]=isNaN(n[r][1])?n[r][0]:n[r][1]}function hz(e){return"object"==typeof e&&"length"in e?e:Array.from(e)}function hW(e){return function(){return e}}function h$(e){for(var t=e.length,r=Array(t);--t>=0;)r[t]=t;return r}function hX(e,t){return e[t]}function hY(e){let t=[];return t.key=e,t}h5=(h2=function(e){var t=e.dateTime,r=e.date,n=e.time,a=e.periods,o=e.days,i=e.shortDays,s=e.months,l=e.shortMonths,A=uI(a),c=uU(a),d=uI(o),u=uU(o),h=uI(i),f=uU(i),p=uI(s),m=uU(s),g=uI(l),x=uU(l),b={a:function(e){return i[e.getDay()]},A:function(e){return o[e.getDay()]},b:function(e){return l[e.getMonth()]},B:function(e){return s[e.getMonth()]},c:null,d:u1,e:u1,f:u6,g:hs,G:hA,H:u2,I:u5,j:u4,L:u3,m:u8,M:u7,p:function(e){return a[+(e.getHours()>=12)]},q:function(e){return 1+~~(e.getMonth()/3)},Q:hP,s:hI,S:u9,u:he,U:ht,V:hn,w:ha,W:ho,x:null,X:null,y:hi,Y:hl,Z:hc,"%":hO},y={a:function(e){return i[e.getUTCDay()]},A:function(e){return o[e.getUTCDay()]},b:function(e){return l[e.getUTCMonth()]},B:function(e){return s[e.getUTCMonth()]},c:null,d:hd,e:hd,f:hm,g:hN,G:hF,H:hu,I:hh,j:hf,L:hp,m:hg,M:hx,p:function(e){return a[+(e.getUTCHours()>=12)]},q:function(e){return 1+~~(e.getUTCMonth()/3)},Q:hP,s:hI,S:hb,u:hy,U:hv,V:hk,w:hB,W:hj,x:null,X:null,y:hC,Y:hS,Z:hE,"%":hO},v={a:function(e,t,r){var n=h.exec(t.slice(r));return n?(e.w=f.get(n[0].toLowerCase()),r+n[0].length):-1},A:function(e,t,r){var n=d.exec(t.slice(r));return n?(e.w=u.get(n[0].toLowerCase()),r+n[0].length):-1},b:function(e,t,r){var n=g.exec(t.slice(r));return n?(e.m=x.get(n[0].toLowerCase()),r+n[0].length):-1},B:function(e,t,r){var n=p.exec(t.slice(r));return n?(e.m=m.get(n[0].toLowerCase()),r+n[0].length):-1},c:function(e,r,n){return B(e,t,r,n)},d:uq,e:uq,f:uY,g:uH,G:uM,H:uz,I:uz,j:uG,L:uX,m:uV,M:uW,p:function(e,t,r){var n=A.exec(t.slice(r));return n?(e.p=c.get(n[0].toLowerCase()),r+n[0].length):-1},q:uK,Q:uZ,s:u0,S:u$,u:u_,U:uQ,V:uT,w:uL,W:uD,x:function(e,t,n){return B(e,r,t,n)},X:function(e,t,r){return B(e,n,t,r)},y:uH,Y:uM,Z:uR,"%":uJ};function w(e,t){return function(r){var n,a,o,i=[],s=-1,l=0,A=e.length;for(r instanceof Date||(r=new Date(+r));++s<A;)37===e.charCodeAt(s)&&(i.push(e.slice(l,s)),null!=(a=uN[n=e.charAt(++s)])?n=e.charAt(++s):a="e"===n?" ":"0",(o=t[n])&&(n=o(r,a)),i.push(n),l=s+1);return i.push(e.slice(l,s)),i.join("")}}function k(e,t){return function(r){var n,a,o=uC(1900,void 0,1);if(B(o,e,r+="",0)!=r.length)return null;if("Q"in o)return new Date(o.Q);if("s"in o)return new Date(1e3*o.s+("L"in o?o.L:0));if(!t||"Z"in o||(o.Z=0),"p"in o&&(o.H=o.H%12+12*o.p),void 0===o.m&&(o.m="q"in o?o.q:0),"V"in o){if(o.V<1||o.V>53)return null;"w"in o||(o.w=1),"Z"in o?(n=(a=(n=uj(uC(o.y,0,1))).getUTCDay())>4||0===a?uA.ceil(n):uA(n),n=d8.offset(n,(o.V-1)*7),o.y=n.getUTCFullYear(),o.m=n.getUTCMonth(),o.d=n.getUTCDate()+(o.w+6)%7):(n=(a=(n=uB(uC(o.y,0,1))).getDay())>4||0===a?ut.ceil(n):ut(n),n=d6.offset(n,(o.V-1)*7),o.y=n.getFullYear(),o.m=n.getMonth(),o.d=n.getDate()+(o.w+6)%7)}else("W"in o||"U"in o)&&("w"in o||(o.w="u"in o?o.u%7:"W"in o?1:0),a="Z"in o?uj(uC(o.y,0,1)).getUTCDay():uB(uC(o.y,0,1)).getDay(),o.m=0,o.d="W"in o?(o.w+6)%7+7*o.W-(a+5)%7:o.w+7*o.U-(a+6)%7);return"Z"in o?(o.H+=o.Z/100|0,o.M+=o.Z%100,uj(o)):uB(o)}}function B(e,t,r,n){for(var a,o,i=0,s=t.length,l=r.length;i<s;){if(n>=l)return -1;if(37===(a=t.charCodeAt(i++))){if(!(o=v[(a=t.charAt(i++))in uN?t.charAt(i++):a])||(n=o(e,r,n))<0)return -1}else if(a!=r.charCodeAt(n++))return -1}return n}return b.x=w(r,b),b.X=w(n,b),b.c=w(t,b),y.x=w(r,y),y.X=w(n,y),y.c=w(t,y),{format:function(e){var t=w(e+="",b);return t.toString=function(){return e},t},parse:function(e){var t=k(e+="",!1);return t.toString=function(){return e},t},utcFormat:function(e){var t=w(e+="",y);return t.toString=function(){return e},t},utcParse:function(e){var t=k(e+="",!0);return t.toString=function(){return e},t}}}({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]})).format,h2.parse,h4=h2.utcFormat,h2.utcParse,Array.prototype.slice;var hJ,hZ,h0,h1,h2,h5,h4,h3,h6,h8=r(31955),h7=r.n(h8),h9=r(52692),fe=r.n(h9),ft=r(78352),fr=r.n(ft),fn=r(32009),fa=r.n(fn),fo=r(81711),fi=r.n(fo),fs=r(77529),fl=r.n(fs),fA=!0,fc="[DecimalError] ",fd=fc+"Invalid argument: ",fu=fc+"Exponent out of range: ",fh=Math.floor,ff=Math.pow,fp=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,fm=fh(1286742750677284.5),fg={};function fx(e,t){var r,n,a,o,i,s,l,A,c=e.constructor,d=c.precision;if(!e.s||!t.s)return t.s||(t=new c(e)),fA?fS(t,d):t;if(l=e.d,A=t.d,i=e.e,a=t.e,l=l.slice(),o=i-a){for(o<0?(n=l,o=-o,s=A.length):(n=A,a=i,s=l.length),o>(s=(i=Math.ceil(d/7))>s?i+1:s+1)&&(o=s,n.length=1),n.reverse();o--;)n.push(0);n.reverse()}for((s=l.length)-(o=A.length)<0&&(o=s,n=A,A=l,l=n),r=0;o;)r=(l[--o]=l[o]+A[o]+r)/1e7|0,l[o]%=1e7;for(r&&(l.unshift(r),++a),s=l.length;0==l[--s];)l.pop();return t.d=l,t.e=a,fA?fS(t,d):t}function fb(e,t,r){if(e!==~~e||e<t||e>r)throw Error(fd+e)}function fy(e){var t,r,n,a=e.length-1,o="",i=e[0];if(a>0){for(o+=i,t=1;t<a;t++)(r=7-(n=e[t]+"").length)&&(o+=fj(r)),o+=n;(r=7-(n=(i=e[t])+"").length)&&(o+=fj(r))}else if(0===i)return"0";for(;i%10==0;)i/=10;return o+i}fg.absoluteValue=fg.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e},fg.comparedTo=fg.cmp=function(e){var t,r,n,a;if(e=new this.constructor(e),this.s!==e.s)return this.s||-e.s;if(this.e!==e.e)return this.e>e.e^this.s<0?1:-1;for(t=0,r=(n=this.d.length)<(a=e.d.length)?n:a;t<r;++t)if(this.d[t]!==e.d[t])return this.d[t]>e.d[t]^this.s<0?1:-1;return n===a?0:n>a^this.s<0?1:-1},fg.decimalPlaces=fg.dp=function(){var e=this.d.length-1,t=(e-this.e)*7;if(e=this.d[e])for(;e%10==0;e/=10)t--;return t<0?0:t},fg.dividedBy=fg.div=function(e){return fv(this,new this.constructor(e))},fg.dividedToIntegerBy=fg.idiv=function(e){var t=this.constructor;return fS(fv(this,new t(e),0,1),t.precision)},fg.equals=fg.eq=function(e){return!this.cmp(e)},fg.exponent=function(){return fk(this)},fg.greaterThan=fg.gt=function(e){return this.cmp(e)>0},fg.greaterThanOrEqualTo=fg.gte=function(e){return this.cmp(e)>=0},fg.isInteger=fg.isint=function(){return this.e>this.d.length-2},fg.isNegative=fg.isneg=function(){return this.s<0},fg.isPositive=fg.ispos=function(){return this.s>0},fg.isZero=function(){return 0===this.s},fg.lessThan=fg.lt=function(e){return 0>this.cmp(e)},fg.lessThanOrEqualTo=fg.lte=function(e){return 1>this.cmp(e)},fg.logarithm=fg.log=function(e){var t,r=this.constructor,n=r.precision,a=n+5;if(void 0===e)e=new r(10);else if((e=new r(e)).s<1||e.eq(h6))throw Error(fc+"NaN");if(this.s<1)throw Error(fc+(this.s?"NaN":"-Infinity"));return this.eq(h6)?new r(0):(fA=!1,t=fv(fC(this,a),fC(e,a),a),fA=!0,fS(t,n))},fg.minus=fg.sub=function(e){return e=new this.constructor(e),this.s==e.s?fF(this,e):fx(this,(e.s=-e.s,e))},fg.modulo=fg.mod=function(e){var t,r=this.constructor,n=r.precision;if(!(e=new r(e)).s)throw Error(fc+"NaN");return this.s?(fA=!1,t=fv(this,e,0,1).times(e),fA=!0,this.minus(t)):fS(new r(this),n)},fg.naturalExponential=fg.exp=function(){return fw(this)},fg.naturalLogarithm=fg.ln=function(){return fC(this)},fg.negated=fg.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e},fg.plus=fg.add=function(e){return e=new this.constructor(e),this.s==e.s?fx(this,e):fF(this,(e.s=-e.s,e))},fg.precision=fg.sd=function(e){var t,r,n;if(void 0!==e&&!!e!==e&&1!==e&&0!==e)throw Error(fd+e);if(t=fk(this)+1,r=7*(n=this.d.length-1)+1,n=this.d[n]){for(;n%10==0;n/=10)r--;for(n=this.d[0];n>=10;n/=10)r++}return e&&t>r?t:r},fg.squareRoot=fg.sqrt=function(){var e,t,r,n,a,o,i,s=this.constructor;if(this.s<1){if(!this.s)return new s(0);throw Error(fc+"NaN")}for(e=fk(this),fA=!1,0==(a=Math.sqrt(+this))||a==1/0?(((t=fy(this.d)).length+e)%2==0&&(t+="0"),a=Math.sqrt(t),e=fh((e+1)/2)-(e<0||e%2),n=new s(t=a==1/0?"5e"+e:(t=a.toExponential()).slice(0,t.indexOf("e")+1)+e)):n=new s(a.toString()),a=i=(r=s.precision)+3;;)if(n=(o=n).plus(fv(this,o,i+2)).times(.5),fy(o.d).slice(0,i)===(t=fy(n.d)).slice(0,i)){if(t=t.slice(i-3,i+1),a==i&&"4999"==t){if(fS(o,r+1,0),o.times(o).eq(this)){n=o;break}}else if("9999"!=t)break;i+=4}return fA=!0,fS(n,r)},fg.times=fg.mul=function(e){var t,r,n,a,o,i,s,l,A,c=this.constructor,d=this.d,u=(e=new c(e)).d;if(!this.s||!e.s)return new c(0);for(e.s*=this.s,r=this.e+e.e,(l=d.length)<(A=u.length)&&(o=d,d=u,u=o,i=l,l=A,A=i),o=[],n=i=l+A;n--;)o.push(0);for(n=A;--n>=0;){for(t=0,a=l+n;a>n;)s=o[a]+u[n]*d[a-n-1]+t,o[a--]=s%1e7|0,t=s/1e7|0;o[a]=(o[a]+t)%1e7|0}for(;!o[--i];)o.pop();return t?++r:o.shift(),e.d=o,e.e=r,fA?fS(e,c.precision):e},fg.toDecimalPlaces=fg.todp=function(e,t){var r=this,n=r.constructor;return(r=new n(r),void 0===e)?r:(fb(e,0,1e9),void 0===t?t=n.rounding:fb(t,0,8),fS(r,e+fk(r)+1,t))},fg.toExponential=function(e,t){var r,n=this,a=n.constructor;return void 0===e?r=fE(n,!0):(fb(e,0,1e9),void 0===t?t=a.rounding:fb(t,0,8),r=fE(n=fS(new a(n),e+1,t),!0,e+1)),r},fg.toFixed=function(e,t){var r,n,a=this.constructor;return void 0===e?fE(this):(fb(e,0,1e9),void 0===t?t=a.rounding:fb(t,0,8),r=fE((n=fS(new a(this),e+fk(this)+1,t)).abs(),!1,e+fk(n)+1),this.isneg()&&!this.isZero()?"-"+r:r)},fg.toInteger=fg.toint=function(){var e=this.constructor;return fS(new e(this),fk(this)+1,e.rounding)},fg.toNumber=function(){return+this},fg.toPower=fg.pow=function(e){var t,r,n,a,o,i,s=this,l=s.constructor,A=+(e=new l(e));if(!e.s)return new l(h6);if(!(s=new l(s)).s){if(e.s<1)throw Error(fc+"Infinity");return s}if(s.eq(h6))return s;if(n=l.precision,e.eq(h6))return fS(s,n);if(i=(t=e.e)>=(r=e.d.length-1),o=s.s,i){if((r=A<0?-A:A)<=9007199254740991){for(a=new l(h6),t=Math.ceil(n/7+4),fA=!1;r%2&&fO((a=a.times(s)).d,t),0!==(r=fh(r/2));)fO((s=s.times(s)).d,t);return fA=!0,e.s<0?new l(h6).div(a):fS(a,n)}}else if(o<0)throw Error(fc+"NaN");return o=o<0&&1&e.d[Math.max(t,r)]?-1:1,s.s=1,fA=!1,a=e.times(fC(s,n+12)),fA=!0,(a=fw(a)).s=o,a},fg.toPrecision=function(e,t){var r,n,a=this,o=a.constructor;return void 0===e?(r=fk(a),n=fE(a,r<=o.toExpNeg||r>=o.toExpPos)):(fb(e,1,1e9),void 0===t?t=o.rounding:fb(t,0,8),r=fk(a=fS(new o(a),e,t)),n=fE(a,e<=r||r<=o.toExpNeg,e)),n},fg.toSignificantDigits=fg.tosd=function(e,t){var r=this.constructor;return void 0===e?(e=r.precision,t=r.rounding):(fb(e,1,1e9),void 0===t?t=r.rounding:fb(t,0,8)),fS(new r(this),e,t)},fg.toString=fg.valueOf=fg.val=fg.toJSON=fg[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=fk(this),t=this.constructor;return fE(this,e<=t.toExpNeg||e>=t.toExpPos)};var fv=function(){function e(e,t){var r,n=0,a=e.length;for(e=e.slice();a--;)r=e[a]*t+n,e[a]=r%1e7|0,n=r/1e7|0;return n&&e.unshift(n),e}function t(e,t,r,n){var a,o;if(r!=n)o=r>n?1:-1;else for(a=o=0;a<r;a++)if(e[a]!=t[a]){o=e[a]>t[a]?1:-1;break}return o}function r(e,t,r){for(var n=0;r--;)e[r]-=n,n=e[r]<t[r]?1:0,e[r]=1e7*n+e[r]-t[r];for(;!e[0]&&e.length>1;)e.shift()}return function(n,a,o,i){var s,l,A,c,d,u,h,f,p,m,g,x,b,y,v,w,k,B,j=n.constructor,C=n.s==a.s?1:-1,N=n.d,S=a.d;if(!n.s)return new j(n);if(!a.s)throw Error(fc+"Division by zero");for(A=0,l=n.e-a.e,k=S.length,v=N.length,f=(h=new j(C)).d=[];S[A]==(N[A]||0);)++A;if(S[A]>(N[A]||0)&&--l,(x=null==o?o=j.precision:i?o+(fk(n)-fk(a))+1:o)<0)return new j(0);if(x=x/7+2|0,A=0,1==k)for(c=0,S=S[0],x++;(A<v||c)&&x--;A++)b=1e7*c+(N[A]||0),f[A]=b/S|0,c=b%S|0;else{for((c=1e7/(S[0]+1)|0)>1&&(S=e(S,c),N=e(N,c),k=S.length,v=N.length),y=k,m=(p=N.slice(0,k)).length;m<k;)p[m++]=0;(B=S.slice()).unshift(0),w=S[0],S[1]>=1e7/2&&++w;do c=0,(s=t(S,p,k,m))<0?(g=p[0],k!=m&&(g=1e7*g+(p[1]||0)),(c=g/w|0)>1?(c>=1e7&&(c=1e7-1),u=(d=e(S,c)).length,m=p.length,1==(s=t(d,p,u,m))&&(c--,r(d,k<u?B:S,u))):(0==c&&(s=c=1),d=S.slice()),(u=d.length)<m&&d.unshift(0),r(p,d,m),-1==s&&(m=p.length,(s=t(S,p,k,m))<1&&(c++,r(p,k<m?B:S,m))),m=p.length):0===s&&(c++,p=[0]),f[A++]=c,s&&p[0]?p[m++]=N[y]||0:(p=[N[y]],m=1);while((y++<v||void 0!==p[0])&&x--)}return f[0]||f.shift(),h.e=l,fS(h,i?o+fk(h)+1:o)}}();function fw(e,t){var r,n,a,o,i,s=0,l=0,A=e.constructor,c=A.precision;if(fk(e)>16)throw Error(fu+fk(e));if(!e.s)return new A(h6);for(null==t?(fA=!1,i=c):i=t,o=new A(.03125);e.abs().gte(.1);)e=e.times(o),l+=5;for(i+=Math.log(ff(2,l))/Math.LN10*2+5|0,r=n=a=new A(h6),A.precision=i;;){if(n=fS(n.times(e),i),r=r.times(++s),fy((o=a.plus(fv(n,r,i))).d).slice(0,i)===fy(a.d).slice(0,i)){for(;l--;)a=fS(a.times(a),i);return A.precision=c,null==t?(fA=!0,fS(a,c)):a}a=o}}function fk(e){for(var t=7*e.e,r=e.d[0];r>=10;r/=10)t++;return t}function fB(e,t,r){if(t>e.LN10.sd())throw fA=!0,r&&(e.precision=r),Error(fc+"LN10 precision limit exceeded");return fS(new e(e.LN10),t)}function fj(e){for(var t="";e--;)t+="0";return t}function fC(e,t){var r,n,a,o,i,s,l,A,c,d=1,u=e,h=u.d,f=u.constructor,p=f.precision;if(u.s<1)throw Error(fc+(u.s?"NaN":"-Infinity"));if(u.eq(h6))return new f(0);if(null==t?(fA=!1,A=p):A=t,u.eq(10))return null==t&&(fA=!0),fB(f,A);if(A+=10,f.precision=A,n=(r=fy(h)).charAt(0),!(15e14>Math.abs(o=fk(u))))return l=fB(f,A+2,p).times(o+""),u=fC(new f(n+"."+r.slice(1)),A-10).plus(l),f.precision=p,null==t?(fA=!0,fS(u,p)):u;for(;n<7&&1!=n||1==n&&r.charAt(1)>3;)n=(r=fy((u=u.times(e)).d)).charAt(0),d++;for(o=fk(u),n>1?(u=new f("0."+r),o++):u=new f(n+"."+r.slice(1)),s=i=u=fv(u.minus(h6),u.plus(h6),A),c=fS(u.times(u),A),a=3;;){if(i=fS(i.times(c),A),fy((l=s.plus(fv(i,new f(a),A))).d).slice(0,A)===fy(s.d).slice(0,A))return s=s.times(2),0!==o&&(s=s.plus(fB(f,A+2,p).times(o+""))),s=fv(s,new f(d),A),f.precision=p,null==t?(fA=!0,fS(s,p)):s;s=l,a+=2}}function fN(e,t){var r,n,a;for((r=t.indexOf("."))>-1&&(t=t.replace(".","")),(n=t.search(/e/i))>0?(r<0&&(r=n),r+=+t.slice(n+1),t=t.substring(0,n)):r<0&&(r=t.length),n=0;48===t.charCodeAt(n);)++n;for(a=t.length;48===t.charCodeAt(a-1);)--a;if(t=t.slice(n,a)){if(a-=n,r=r-n-1,e.e=fh(r/7),e.d=[],n=(r+1)%7,r<0&&(n+=7),n<a){for(n&&e.d.push(+t.slice(0,n)),a-=7;n<a;)e.d.push(+t.slice(n,n+=7));n=7-(t=t.slice(n)).length}else n-=a;for(;n--;)t+="0";if(e.d.push(+t),fA&&(e.e>fm||e.e<-fm))throw Error(fu+r)}else e.s=0,e.e=0,e.d=[0];return e}function fS(e,t,r){var n,a,o,i,s,l,A,c,d=e.d;for(i=1,o=d[0];o>=10;o/=10)i++;if((n=t-i)<0)n+=7,a=t,A=d[c=0];else{if((c=Math.ceil((n+1)/7))>=(o=d.length))return e;for(i=1,A=o=d[c];o>=10;o/=10)i++;n%=7,a=n-7+i}if(void 0!==r&&(s=A/(o=ff(10,i-a-1))%10|0,l=t<0||void 0!==d[c+1]||A%o,l=r<4?(s||l)&&(0==r||r==(e.s<0?3:2)):s>5||5==s&&(4==r||l||6==r&&(n>0?a>0?A/ff(10,i-a):0:d[c-1])%10&1||r==(e.s<0?8:7))),t<1||!d[0])return l?(o=fk(e),d.length=1,t=t-o-1,d[0]=ff(10,(7-t%7)%7),e.e=fh(-t/7)||0):(d.length=1,d[0]=e.e=e.s=0),e;if(0==n?(d.length=c,o=1,c--):(d.length=c+1,o=ff(10,7-n),d[c]=a>0?(A/ff(10,i-a)%ff(10,a)|0)*o:0),l)for(;;){if(0==c){1e7==(d[0]+=o)&&(d[0]=1,++e.e);break}if(d[c]+=o,1e7!=d[c])break;d[c--]=0,o=1}for(n=d.length;0===d[--n];)d.pop();if(fA&&(e.e>fm||e.e<-fm))throw Error(fu+fk(e));return e}function fF(e,t){var r,n,a,o,i,s,l,A,c,d,u=e.constructor,h=u.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new u(e),fA?fS(t,h):t;if(l=e.d,d=t.d,n=t.e,A=e.e,l=l.slice(),i=A-n){for((c=i<0)?(r=l,i=-i,s=d.length):(r=d,n=A,s=l.length),i>(a=Math.max(Math.ceil(h/7),s)+2)&&(i=a,r.length=1),r.reverse(),a=i;a--;)r.push(0);r.reverse()}else{for((c=(a=l.length)<(s=d.length))&&(s=a),a=0;a<s;a++)if(l[a]!=d[a]){c=l[a]<d[a];break}i=0}for(c&&(r=l,l=d,d=r,t.s=-t.s),s=l.length,a=d.length-s;a>0;--a)l[s++]=0;for(a=d.length;a>i;){if(l[--a]<d[a]){for(o=a;o&&0===l[--o];)l[o]=1e7-1;--l[o],l[a]+=1e7}l[a]-=d[a]}for(;0===l[--s];)l.pop();for(;0===l[0];l.shift())--n;return l[0]?(t.d=l,t.e=n,fA?fS(t,h):t):new u(0)}function fE(e,t,r){var n,a=fk(e),o=fy(e.d),i=o.length;return t?(r&&(n=r-i)>0?o=o.charAt(0)+"."+o.slice(1)+fj(n):i>1&&(o=o.charAt(0)+"."+o.slice(1)),o=o+(a<0?"e":"e+")+a):a<0?(o="0."+fj(-a-1)+o,r&&(n=r-i)>0&&(o+=fj(n))):a>=i?(o+=fj(a+1-i),r&&(n=r-a-1)>0&&(o=o+"."+fj(n))):((n=a+1)<i&&(o=o.slice(0,n)+"."+o.slice(n)),r&&(n=r-i)>0&&(a+1===i&&(o+="."),o+=fj(n))),e.s<0?"-"+o:o}function fO(e,t){if(e.length>t)return e.length=t,!0}function fP(e){if(!e||"object"!=typeof e)throw Error(fc+"Object expected");var t,r,n,a=["precision",1,1e9,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<a.length;t+=3)if(void 0!==(n=e[r=a[t]])){if(fh(n)===n&&n>=a[t+1]&&n<=a[t+2])this[r]=n;else throw Error(fd+r+": "+n)}if(void 0!==(n=e[r="LN10"])){if(n==Math.LN10)this[r]=new this(n);else throw Error(fd+r+": "+n)}return this}var h3=function e(t){var r,n,a;function o(e){if(!(this instanceof o))return new o(e);if(this.constructor=o,e instanceof o){this.s=e.s,this.e=e.e,this.d=(e=e.d)?e.slice():e;return}if("number"==typeof e){if(0*e!=0)throw Error(fd+e);if(e>0)this.s=1;else if(e<0)e=-e,this.s=-1;else{this.s=0,this.e=0,this.d=[0];return}if(e===~~e&&e<1e7){this.e=0,this.d=[e];return}return fN(this,e.toString())}if("string"!=typeof e)throw Error(fd+e);if(45===e.charCodeAt(0)?(e=e.slice(1),this.s=-1):this.s=1,fp.test(e))fN(this,e);else throw Error(fd+e)}if(o.prototype=fg,o.ROUND_UP=0,o.ROUND_DOWN=1,o.ROUND_CEIL=2,o.ROUND_FLOOR=3,o.ROUND_HALF_UP=4,o.ROUND_HALF_DOWN=5,o.ROUND_HALF_EVEN=6,o.ROUND_HALF_CEIL=7,o.ROUND_HALF_FLOOR=8,o.clone=e,o.config=o.set=fP,void 0===t&&(t={}),t)for(r=0,a=["precision","rounding","toExpNeg","toExpPos","LN10"];r<a.length;)t.hasOwnProperty(n=a[r++])||(t[n]=this[n]);return o.config(t),o}({precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"});h6=new h3(1);let fI=h3;function fU(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var fL=function(e){return e},f_={},fQ=function(e){return e===f_},fT=function(e){return function t(){return 0==arguments.length||1==arguments.length&&fQ(arguments.length<=0?void 0:arguments[0])?t:e.apply(void 0,arguments)}},fD=function(e){return function e(t,r){return 1===t?r:fT(function(){for(var n=arguments.length,a=Array(n),o=0;o<n;o++)a[o]=arguments[o];var i=a.filter(function(e){return e!==f_}).length;return i>=t?r.apply(void 0,a):e(t-i,fT(function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var o=a.map(function(e){return fQ(e)?t.shift():e});return r.apply(void 0,((function(e){if(Array.isArray(e))return fU(e)})(o)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(o)||function(e,t){if(e){if("string"==typeof e)return fU(e,void 0);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return fU(e,void 0)}}(o)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).concat(t))}))})}(e.length,e)},fM=function(e,t){for(var r=[],n=e;n<t;++n)r[n-e]=n;return r},fH=fD(function(e,t){return Array.isArray(t)?t.map(e):Object.keys(t).map(function(e){return t[e]}).map(e)}),fR=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];if(!t.length)return fL;var n=t.reverse(),a=n[0],o=n.slice(1);return function(){return o.reduce(function(e,t){return t(e)},a.apply(void 0,arguments))}},fK=function(e){return Array.isArray(e)?e.reverse():e.split("").reverse.join("")},fV=function(e){var t=null,r=null;return function(){for(var n=arguments.length,a=Array(n),o=0;o<n;o++)a[o]=arguments[o];return t&&a.every(function(e,r){return e===t[r]})?r:(t=a,r=e.apply(void 0,a))}};fD(function(e,t,r){var n=+e;return n+r*(+t-n)}),fD(function(e,t,r){var n=t-+e;return(r-e)/(n=n||1/0)}),fD(function(e,t,r){var n=t-+e;return Math.max(0,Math.min(1,(r-e)/(n=n||1/0)))});let fq={rangeStep:function(e,t,r){for(var n=new fI(e),a=0,o=[];n.lt(t)&&a<1e5;)o.push(n.toNumber()),n=n.add(r),a++;return o},getDigitCount:function(e){return 0===e?1:Math.floor(new fI(e).abs().log(10).toNumber())+1}};function fG(e){return function(e){if(Array.isArray(e))return f$(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||fW(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function fz(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var r=[],n=!0,a=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(n=(i=s.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){a=!0,o=e}finally{try{n||null==s.return||s.return()}finally{if(a)throw o}}return r}}(e,t)||fW(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function fW(e,t){if(e){if("string"==typeof e)return f$(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return f$(e,t)}}function f$(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function fX(e){var t=fz(e,2),r=t[0],n=t[1],a=r,o=n;return r>n&&(a=n,o=r),[a,o]}function fY(e,t,r){if(e.lte(0))return new fI(0);var n=fq.getDigitCount(e.toNumber()),a=new fI(10).pow(n),o=e.div(a),i=1!==n?.05:.1,s=new fI(Math.ceil(o.div(i).toNumber())).add(r).mul(i).mul(a);return t?s:new fI(Math.ceil(s))}function fJ(e,t,r){var n=1,a=new fI(e);if(!a.isint()&&r){var o=Math.abs(e);o<1?(n=new fI(10).pow(fq.getDigitCount(e)-1),a=new fI(Math.floor(a.div(n).toNumber())).mul(n)):o>1&&(a=new fI(Math.floor(e)))}else 0===e?a=new fI(Math.floor((t-1)/2)):r||(a=new fI(Math.floor(e)));var i=Math.floor((t-1)/2);return fR(fH(function(e){return a.add(new fI(e-i).mul(n)).toNumber()}),fM)(0,t)}var fZ=fV(function(e){var t=fz(e,2),r=t[0],n=t[1],a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6,o=!(arguments.length>2)||void 0===arguments[2]||arguments[2],i=Math.max(a,2),s=fz(fX([r,n]),2),l=s[0],A=s[1];if(l===-1/0||A===1/0){var c=A===1/0?[l].concat(fG(fM(0,a-1).map(function(){return 1/0}))):[].concat(fG(fM(0,a-1).map(function(){return-1/0})),[A]);return r>n?fK(c):c}if(l===A)return fJ(l,a,o);var d=function e(t,r,n,a){var o,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;if(!Number.isFinite((r-t)/(n-1)))return{step:new fI(0),tickMin:new fI(0),tickMax:new fI(0)};var s=fY(new fI(r).sub(t).div(n-1),a,i),l=Math.ceil((o=t<=0&&r>=0?new fI(0):(o=new fI(t).add(r).div(2)).sub(new fI(o).mod(s))).sub(t).div(s).toNumber()),A=Math.ceil(new fI(r).sub(o).div(s).toNumber()),c=l+A+1;return c>n?e(t,r,n,a,i+1):(c<n&&(A=r>0?A+(n-c):A,l=r>0?l:l+(n-c)),{step:s,tickMin:o.sub(new fI(l).mul(s)),tickMax:o.add(new fI(A).mul(s))})}(l,A,i,o),u=d.step,h=d.tickMin,f=d.tickMax,p=fq.rangeStep(h,f.add(new fI(.1).mul(u)),u);return r>n?fK(p):p});fV(function(e){var t=fz(e,2),r=t[0],n=t[1],a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6,o=!(arguments.length>2)||void 0===arguments[2]||arguments[2],i=Math.max(a,2),s=fz(fX([r,n]),2),l=s[0],A=s[1];if(l===-1/0||A===1/0)return[r,n];if(l===A)return fJ(l,a,o);var c=fY(new fI(A).sub(l).div(i-1),o,0),d=fR(fH(function(e){return new fI(l).add(new fI(e).mul(c)).toNumber()}),fM)(0,i).filter(function(e){return e>=l&&e<=A});return r>n?fK(d):d});var f0=fV(function(e,t){var r=fz(e,2),n=r[0],a=r[1],o=!(arguments.length>2)||void 0===arguments[2]||arguments[2],i=fz(fX([n,a]),2),s=i[0],l=i[1];if(s===-1/0||l===1/0)return[n,a];if(s===l)return[s];var A=Math.max(t,2),c=fY(new fI(l).sub(s).div(A-1),o,0),d=[].concat(fG(fq.rangeStep(new fI(s),new fI(l).sub(new fI(.99).mul(c)),c)),[l]);return n>a?fK(d):d});function f1(e,t){if(!e)throw Error("Invariant failed")}var f2=["children","className"];function f5(){return(f5=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var f4=x().forwardRef(function(e,t){var r=e.children,n=e.className,a=function(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}(e,f2),o=Af("recharts-layer",n);return x().createElement("g",f5({className:o},ce(a,!0),{ref:t}),r)}),f3=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function f6(e){return(f6="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f8(){return(f8=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function f7(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function f9(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(f9=function(){return!!e})()}function pe(e){return(pe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function pt(e,t){return(pt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function pr(e,t,r){return(t=pn(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function pn(e){var t=function(e,t){if("object"!=f6(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=f6(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==f6(t)?t:t+""}var pa=function(e){var t;function r(){var e,t;return function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,r),e=r,t=arguments,e=pe(e),function(e,t){if(t&&("object"===f6(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,f9()?Reflect.construct(e,t||[],pe(this).constructor):e.apply(this,t))}return function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&pt(e,t)}(r,e),t=[{key:"render",value:function(){var e=this.props,t=e.offset,r=e.layout,n=e.width,a=e.dataKey,o=e.data,i=e.dataPointFormatter,s=e.xAxis,l=e.yAxis,A=ce(function(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}(e,f3),!1);"x"===this.props.direction&&"number"!==s.type&&f1(!1);var c=o.map(function(e){var o,c,d=i(e,a),u=d.x,h=d.y,f=d.value,p=d.errorVal;if(!p)return null;var m=[];if(Array.isArray(p)){var g=function(e){if(Array.isArray(e))return e}(p)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o,i,s=[],l=!0,A=!1;try{for(o=(r=r.call(e)).next;!(l=(n=o.call(r)).done)&&(s.push(n.value),2!==s.length);l=!0);}catch(e){A=!0,a=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(A)throw a}}return s}}(p,2)||function(e,t){if(e){if("string"==typeof e)return f7(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return f7(e,2)}}(p,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}();o=g[0],c=g[1]}else o=c=p;if("vertical"===r){var b=s.scale,y=h+t,v=y+n,w=y-n,k=b(f-o),B=b(f+c);m.push({x1:B,y1:v,x2:B,y2:w}),m.push({x1:k,y1:y,x2:B,y2:y}),m.push({x1:k,y1:v,x2:k,y2:w})}else if("horizontal"===r){var j=l.scale,C=u+t,N=C-n,S=C+n,F=j(f-o),E=j(f+c);m.push({x1:N,y1:E,x2:S,y2:E}),m.push({x1:C,y1:F,x2:C,y2:E}),m.push({x1:N,y1:F,x2:S,y2:F})}return x().createElement(f4,f8({className:"recharts-errorBar",key:"bar-".concat(m.map(function(e){return"".concat(e.x1,"-").concat(e.x2,"-").concat(e.y1,"-").concat(e.y2)}))},A),m.map(function(e){return x().createElement("line",f8({},e,{key:"line-".concat(e.x1,"-").concat(e.x2,"-").concat(e.y1,"-").concat(e.y2)}))}))});return x().createElement(f4,{className:"recharts-errorBars"},c)}}],function(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,pn(n.key),n)}}(r.prototype,t),Object.defineProperty(r,"prototype",{writable:!1}),r}(x().Component);pr(pa,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"}),pr(pa,"displayName","ErrorBar");var po=function(e,t){for(var r=arguments.length,n=Array(r>2?r-2:0),a=2;a<r;a++)n[a-2]=arguments[a]},pi=["children","width","height","viewBox","className","style","title","desc"];function ps(){return(ps=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function pl(e){var t=e.children,r=e.width,n=e.height,a=e.viewBox,o=e.className,i=e.style,s=e.title,l=e.desc,A=function(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}(e,pi),c=a||{width:r,height:n,x:0,y:0},d=Af("recharts-surface",o);return x().createElement("svg",ps({},ce(A,!0,"svg"),{className:d,width:r,height:n,style:i,viewBox:"".concat(c.x," ").concat(c.y," ").concat(c.width," ").concat(c.height)}),x().createElement("title",null,s),x().createElement("desc",null,l),t)}let pA=Math.cos,pc=Math.sin,pd=Math.sqrt,pu=Math.PI,ph=2*pu,pf={draw(e,t){let r=pd(t/pu);e.moveTo(r,0),e.arc(0,0,r,0,ph)}},pp=pd(1/3),pm=2*pp,pg=pc(pu/10)/pc(7*pu/10),px=pc(ph/10)*pg,pb=-pA(ph/10)*pg,py=pd(3),pv=pd(3)/2,pw=1/pd(12),pk=(pw/2+1)*3,pB=Math.PI,pj=2*pB,pC=pj-1e-6;function pN(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=arguments[t]+e[t]}class pS{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=null==e?pN:function(e){let t=Math.floor(e);if(!(t>=0))throw Error(`invalid digits: ${e}`);if(t>15)return pN;let r=10**t;return function(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=Math.round(arguments[t]*r)/r+e[t]}}(e)}moveTo(e,t){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+t}`}closePath(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,t){this._append`L${this._x1=+e},${this._y1=+t}`}quadraticCurveTo(e,t,r,n){this._append`Q${+e},${+t},${this._x1=+r},${this._y1=+n}`}bezierCurveTo(e,t,r,n,a,o){this._append`C${+e},${+t},${+r},${+n},${this._x1=+a},${this._y1=+o}`}arcTo(e,t,r,n,a){if(e=+e,t=+t,r=+r,n=+n,(a=+a)<0)throw Error(`negative radius: ${a}`);let o=this._x1,i=this._y1,s=r-e,l=n-t,A=o-e,c=i-t,d=A*A+c*c;if(null===this._x1)this._append`M${this._x1=e},${this._y1=t}`;else if(d>1e-6){if(Math.abs(c*s-l*A)>1e-6&&a){let u=r-o,h=n-i,f=s*s+l*l,p=Math.sqrt(f),m=Math.sqrt(d),g=a*Math.tan((pB-Math.acos((f+d-(u*u+h*h))/(2*p*m)))/2),x=g/m,b=g/p;Math.abs(x-1)>1e-6&&this._append`L${e+x*A},${t+x*c}`,this._append`A${a},${a},0,0,${+(c*u>A*h)},${this._x1=e+b*s},${this._y1=t+b*l}`}else this._append`L${this._x1=e},${this._y1=t}`}}arc(e,t,r,n,a,o){if(e=+e,t=+t,o=!!o,(r=+r)<0)throw Error(`negative radius: ${r}`);let i=r*Math.cos(n),s=r*Math.sin(n),l=e+i,A=t+s,c=1^o,d=o?n-a:a-n;null===this._x1?this._append`M${l},${A}`:(Math.abs(this._x1-l)>1e-6||Math.abs(this._y1-A)>1e-6)&&this._append`L${l},${A}`,r&&(d<0&&(d=d%pj+pj),d>pC?this._append`A${r},${r},0,1,${c},${e-i},${t-s}A${r},${r},0,1,${c},${this._x1=l},${this._y1=A}`:d>1e-6&&this._append`A${r},${r},0,${+(d>=pB)},${c},${this._x1=e+r*Math.cos(a)},${this._y1=t+r*Math.sin(a)}`)}rect(e,t,r,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+t}h${r=+r}v${+n}h${-r}Z`}toString(){return this._}}function pF(e){let t=3;return e.digits=function(r){if(!arguments.length)return t;if(null==r)t=null;else{let e=Math.floor(r);if(!(e>=0))throw RangeError(`invalid digits: ${r}`);t=e}return e},()=>new pS(t)}function pE(e){return(pE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}pS.prototype,pd(3),pd(3);var pO=["type","size","sizeType"];function pP(){return(pP=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function pI(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function pU(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?pI(Object(r),!0).forEach(function(t){var n,a;n=t,a=r[t],(n=function(e){var t=function(e,t){if("object"!=pE(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=pE(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==pE(t)?t:t+""}(n))in e?Object.defineProperty(e,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[n]=a}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):pI(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var pL={symbolCircle:pf,symbolCross:{draw(e,t){let r=pd(t/5)/2;e.moveTo(-3*r,-r),e.lineTo(-r,-r),e.lineTo(-r,-3*r),e.lineTo(r,-3*r),e.lineTo(r,-r),e.lineTo(3*r,-r),e.lineTo(3*r,r),e.lineTo(r,r),e.lineTo(r,3*r),e.lineTo(-r,3*r),e.lineTo(-r,r),e.lineTo(-3*r,r),e.closePath()}},symbolDiamond:{draw(e,t){let r=pd(t/pm),n=r*pp;e.moveTo(0,-r),e.lineTo(n,0),e.lineTo(0,r),e.lineTo(-n,0),e.closePath()}},symbolSquare:{draw(e,t){let r=pd(t),n=-r/2;e.rect(n,n,r,r)}},symbolStar:{draw(e,t){let r=pd(.8908130915292852*t),n=px*r,a=pb*r;e.moveTo(0,-r),e.lineTo(n,a);for(let t=1;t<5;++t){let o=ph*t/5,i=pA(o),s=pc(o);e.lineTo(s*r,-i*r),e.lineTo(i*n-s*a,s*n+i*a)}e.closePath()}},symbolTriangle:{draw(e,t){let r=-pd(t/(3*py));e.moveTo(0,2*r),e.lineTo(-py*r,-r),e.lineTo(py*r,-r),e.closePath()}},symbolWye:{draw(e,t){let r=pd(t/pk),n=r/2,a=r*pw,o=r*pw+r,i=-n;e.moveTo(n,a),e.lineTo(n,o),e.lineTo(i,o),e.lineTo(-.5*n-pv*a,pv*n+-.5*a),e.lineTo(-.5*n-pv*o,pv*n+-.5*o),e.lineTo(-.5*i-pv*o,pv*i+-.5*o),e.lineTo(-.5*n+pv*a,-.5*a-pv*n),e.lineTo(-.5*n+pv*o,-.5*o-pv*n),e.lineTo(-.5*i+pv*o,-.5*o-pv*i),e.closePath()}}},p_=Math.PI/180,pQ=function(e,t,r){if("area"===t)return e;switch(r){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":var n=18*p_;return 1.25*e*e*(Math.tan(n)-Math.tan(2*n)*Math.pow(Math.tan(n),2));case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},pT=function(e){var t,r=e.type,n=void 0===r?"circle":r,a=e.size,o=void 0===a?64:a,i=e.sizeType,s=void 0===i?"area":i,l=pU(pU({},function(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}(e,pO)),{},{type:n,size:o,sizeType:s}),A=l.className,c=l.cx,d=l.cy,u=ce(l,!0);return c===+c&&d===+d&&o===+o?x().createElement("path",pP({},u,{className:Af("recharts-symbols",A),transform:"translate(".concat(c,", ").concat(d,")"),d:(t=pL["symbol".concat(fa()(n))]||pf,(function(e,t){let r=null,n=pF(a);function a(){let a;if(r||(r=a=n()),e.apply(this,arguments).draw(r,+t.apply(this,arguments)),a)return r=null,a+""||null}return e="function"==typeof e?e:hW(e||pf),t="function"==typeof t?t:hW(void 0===t?64:+t),a.type=function(t){return arguments.length?(e="function"==typeof t?t:hW(t),a):e},a.size=function(e){return arguments.length?(t="function"==typeof e?e:hW(+e),a):t},a.context=function(e){return arguments.length?(r=null==e?null:e,a):r},a})().type(t).size(pQ(o,s,n))())})):null};function pD(e){return(pD="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function pM(){return(pM=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function pH(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function pR(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(pR=function(){return!!e})()}function pK(e){return(pK=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function pV(e,t){return(pV=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function pq(e,t,r){return(t=pG(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function pG(e){var t=function(e,t){if("object"!=pD(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=pD(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==pD(t)?t:t+""}pT.registerSymbol=function(e,t){pL["symbol".concat(fa()(e))]=t};var pz=function(e){var t;function r(){var e,t;return function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,r),e=r,t=arguments,e=pK(e),function(e,t){if(t&&("object"===pD(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,pR()?Reflect.construct(e,t||[],pK(this).constructor):e.apply(this,t))}return function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&pV(e,t)}(r,e),t=[{key:"renderIcon",value:function(e){var t=this.props.inactiveColor,r=32/6,n=32/3,a=e.inactive?t:e.color;if("plainline"===e.type)return x().createElement("line",{strokeWidth:4,fill:"none",stroke:a,strokeDasharray:e.payload.strokeDasharray,x1:0,y1:16,x2:32,y2:16,className:"recharts-legend-icon"});if("line"===e.type)return x().createElement("path",{strokeWidth:4,fill:"none",stroke:a,d:"M0,".concat(16,"h").concat(n,"\n            A").concat(r,",").concat(r,",0,1,1,").concat(2*n,",").concat(16,"\n            H").concat(32,"M").concat(2*n,",").concat(16,"\n            A").concat(r,",").concat(r,",0,1,1,").concat(n,",").concat(16),className:"recharts-legend-icon"});if("rect"===e.type)return x().createElement("path",{stroke:"none",fill:a,d:"M0,".concat(4,"h").concat(32,"v").concat(24,"h").concat(-32,"z"),className:"recharts-legend-icon"});if(x().isValidElement(e.legendIcon)){var o=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?pH(Object(r),!0).forEach(function(t){pq(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):pH(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({},e);return delete o.legendIcon,x().cloneElement(e.legendIcon,o)}return x().createElement(pT,{fill:a,cx:16,cy:16,size:32,sizeType:"diameter",type:e.type})}},{key:"renderItems",value:function(){var e=this,t=this.props,r=t.payload,n=t.iconSize,a=t.layout,o=t.formatter,i=t.inactiveColor,s={x:0,y:0,width:32,height:32},l={display:"horizontal"===a?"inline-block":"block",marginRight:10},A={display:"inline-block",verticalAlign:"middle",marginRight:4};return r.map(function(t,r){var a=t.formatter||o,c=Af(pq(pq({"recharts-legend-item":!0},"legend-item-".concat(r),!0),"inactive",t.inactive));if("none"===t.type)return null;var d=Aw()(t.value)?null:t.value;po(!Aw()(t.value),'The name property is also required when using a function for the dataKey of a chart\'s cartesian components. Ex: <Bar name="Name of my Data"/>');var u=t.inactive?i:t.color;return x().createElement("li",pM({className:c,style:l,key:"legend-item-".concat(r)},A$(e.props,t,r)),x().createElement(pl,{width:n,height:n,viewBox:s,style:A},e.renderIcon(t)),x().createElement("span",{className:"recharts-legend-item-text",style:{color:u}},a?a(d,t,r):d))})}},{key:"render",value:function(){var e=this.props,t=e.payload,r=e.layout,n=e.align;return t&&t.length?x().createElement("ul",{className:"recharts-default-legend",style:{padding:0,margin:0,textAlign:"horizontal"===r?n:"left"}},this.renderItems()):null}}],function(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,pG(n.key),n)}}(r.prototype,t),Object.defineProperty(r,"prototype",{writable:!1}),r}(g.PureComponent);pq(pz,"displayName","Legend"),pq(pz,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var pW=r(82511),p$=r.n(pW);function pX(e,t,r){return!0===t?p$()(e,r):Aw()(t)?p$()(e,t):e}function pY(e){return(pY="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var pJ=["ref"];function pZ(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function p0(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?pZ(Object(r),!0).forEach(function(t){p3(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):pZ(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function p1(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,p6(n.key),n)}}function p2(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(p2=function(){return!!e})()}function p5(e){return(p5=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p4(e,t){return(p4=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function p3(e,t,r){return(t=p6(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function p6(e){var t=function(e,t){if("object"!=pY(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=pY(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==pY(t)?t:t+""}function p8(e){return e.value}var p7=function(e){var t,r;function n(){!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,n);for(var e,t,r,a=arguments.length,o=Array(a),i=0;i<a;i++)o[i]=arguments[i];return t=n,r=[].concat(o),t=p5(t),p3(e=function(e,t){if(t&&("object"===pY(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,p2()?Reflect.construct(t,r||[],p5(this).constructor):t.apply(this,r)),"lastBoundingBox",{width:-1,height:-1}),e}return function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&p4(e,t)}(n,e),t=[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var e=this.wrapperNode.getBoundingClientRect();return e.height=this.wrapperNode.offsetHeight,e.width=this.wrapperNode.offsetWidth,e}return null}},{key:"updateBBox",value:function(){var e=this.props.onBBoxUpdate,t=this.getBBox();t?(Math.abs(t.width-this.lastBoundingBox.width)>1||Math.abs(t.height-this.lastBoundingBox.height)>1)&&(this.lastBoundingBox.width=t.width,this.lastBoundingBox.height=t.height,e&&e(t)):(-1!==this.lastBoundingBox.width||-1!==this.lastBoundingBox.height)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,e&&e(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?p0({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(e){var t,r,n=this.props,a=n.layout,o=n.align,i=n.verticalAlign,s=n.margin,l=n.chartWidth,A=n.chartHeight;return e&&(void 0!==e.left&&null!==e.left||void 0!==e.right&&null!==e.right)||(t="center"===o&&"vertical"===a?{left:((l||0)-this.getBBoxSnapshot().width)/2}:"right"===o?{right:s&&s.right||0}:{left:s&&s.left||0}),e&&(void 0!==e.top&&null!==e.top||void 0!==e.bottom&&null!==e.bottom)||(r="middle"===i?{top:((A||0)-this.getBBoxSnapshot().height)/2}:"bottom"===i?{bottom:s&&s.bottom||0}:{top:s&&s.top||0}),p0(p0({},t),r)}},{key:"render",value:function(){var e=this,t=this.props,r=t.content,n=t.width,a=t.height,o=t.wrapperStyle,i=t.payloadUniqBy,s=t.payload,l=p0(p0({position:"absolute",width:n||"auto",height:a||"auto"},this.getDefaultPosition(o)),o);return x().createElement("div",{className:"recharts-legend-wrapper",style:l,ref:function(t){e.wrapperNode=t}},function(e,t){if(x().isValidElement(e))return x().cloneElement(e,t);if("function"==typeof e)return x().createElement(e,t);t.ref;var r=function(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}(t,pJ);return x().createElement(pz,r)}(r,p0(p0({},this.props),{},{payload:pX(s,i,p8)})))}}],r=[{key:"getWithHeight",value:function(e,t){var r=p0(p0({},this.defaultProps),e.props).layout;return"vertical"===r&&AP(e.props.height)?{height:e.props.height}:"horizontal"===r?{width:e.props.width||t}:null}}],t&&p1(n.prototype,t),r&&p1(n,r),Object.defineProperty(n,"prototype",{writable:!1}),n}(g.PureComponent);function p9(e){return(p9="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function me(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function mt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?me(Object(r),!0).forEach(function(t){var n,a;n=t,a=r[t],(n=function(e){var t=function(e,t){if("object"!=p9(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=p9(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==p9(t)?t:t+""}(n))in e?Object.defineProperty(e,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[n]=a}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):me(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}p3(p7,"displayName","Legend"),p3(p7,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var mr=function(e){var t,r=e.children,n=e.formattedGraphicalItems,a=e.legendWidth,o=e.legendContent,i=A6(r,p7);if(!i)return null;var s=p7.defaultProps,l=void 0!==s?mt(mt({},s),i.props):{};return t=i.props&&i.props.payload?i.props&&i.props.payload:"children"===o?(n||[]).reduce(function(e,t){var r=t.item,n=t.props,a=n.sectors||n.data||[];return e.concat(a.map(function(e){return{type:i.props.iconType||r.props.legendType,value:e.name,color:e.fill,payload:e}}))},[]):(n||[]).map(function(e){var t=e.item,r=t.type.defaultProps,n=void 0!==r?mt(mt({},r),t.props):{},a=n.dataKey,o=n.name,i=n.legendType;return{inactive:n.hide,dataKey:a,type:l.iconType||i||"square",color:mu(t),value:o||a,payload:n}}),mt(mt(mt({},l),p7.getWithHeight(i,a)),{},{payload:t,item:i})};function mn(e){return(mn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ma(e){return function(e){if(Array.isArray(e))return mo(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return mo(e,void 0);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return mo(e,void 0)}}(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function mo(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function mi(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function ms(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?mi(Object(r),!0).forEach(function(t){ml(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):mi(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function ml(e,t,r){var n;return(n=function(e,t){if("object"!=mn(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=mn(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==mn(n)?n:n+"")in e)?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function mA(e,t,r){return Ax()(e)||Ax()(t)?r:AI(t)?Am()(e,t,r):Aw()(t)?t(e):r}function mc(e,t,r,n){var a=fr()(e,function(e){return mA(e,t)});if("number"===r){var o=a.filter(function(e){return AP(e)||parseFloat(e)});return o.length?[fe()(o),h7()(o)]:[1/0,-1/0]}return(n?a.filter(function(e){return!Ax()(e)}):a).map(function(e){return AI(e)||e instanceof Date?e:""})}var md=function(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0,o=-1,i=null!==(t=null==r?void 0:r.length)&&void 0!==t?t:0;if(i<=1)return 0;if(a&&"angleAxis"===a.axisType&&1e-6>=Math.abs(Math.abs(a.range[1]-a.range[0])-360))for(var s=a.range,l=0;l<i;l++){var A=l>0?n[l-1].coordinate:n[i-1].coordinate,c=n[l].coordinate,d=l>=i-1?n[0].coordinate:n[l+1].coordinate,u=void 0;if(AE(c-A)!==AE(d-c)){var h=[];if(AE(d-c)===AE(s[1]-s[0])){u=d;var f=c+s[1]-s[0];h[0]=Math.min(f,(f+A)/2),h[1]=Math.max(f,(f+A)/2)}else{u=A;var p=d+s[1]-s[0];h[0]=Math.min(c,(p+c)/2),h[1]=Math.max(c,(p+c)/2)}var m=[Math.min(c,(u+c)/2),Math.max(c,(u+c)/2)];if(e>m[0]&&e<=m[1]||e>=h[0]&&e<=h[1]){o=n[l].index;break}}else{var g=Math.min(A,d),x=Math.max(A,d);if(e>(g+c)/2&&e<=(x+c)/2){o=n[l].index;break}}}else for(var b=0;b<i;b++)if(0===b&&e<=(r[b].coordinate+r[b+1].coordinate)/2||b>0&&b<i-1&&e>(r[b].coordinate+r[b-1].coordinate)/2&&e<=(r[b].coordinate+r[b+1].coordinate)/2||b===i-1&&e>(r[b].coordinate+r[b-1].coordinate)/2){o=r[b].index;break}return o},mu=function(e){var t,r,n=e.type.displayName,a=null!==(t=e.type)&&void 0!==t&&t.defaultProps?ms(ms({},e.type.defaultProps),e.props):e.props,o=a.stroke,i=a.fill;switch(n){case"Line":r=o;break;case"Area":case"Radar":r=o&&"none"!==o?o:i;break;default:r=i}return r},mh=function(e){var t=e.barSize,r=e.totalSize,n=e.stackGroups,a=void 0===n?{}:n;if(!a)return{};for(var o={},i=Object.keys(a),s=0,l=i.length;s<l;s++)for(var A=a[i[s]].stackGroups,c=Object.keys(A),d=0,u=c.length;d<u;d++){var h=A[c[d]],f=h.items,p=h.cateAxisId,m=f.filter(function(e){return A1(e.type).indexOf("Bar")>=0});if(m&&m.length){var g=m[0].type.defaultProps,x=void 0!==g?ms(ms({},g),m[0].props):m[0].props,b=x.barSize,y=x[p];o[y]||(o[y]=[]);var v=Ax()(b)?t:b;o[y].push({item:m[0],stackList:m.slice(1),barSize:Ax()(v)?void 0:A_(v,r,0)})}}return o},mf=function(e){var t,r=e.barGap,n=e.barCategoryGap,a=e.bandSize,o=e.sizeList,i=void 0===o?[]:o,s=e.maxBarSize,l=i.length;if(l<1)return null;var A=A_(r,a,0,!0),c=[];if(i[0].barSize===+i[0].barSize){var d=!1,u=a/l,h=i.reduce(function(e,t){return e+t.barSize||0},0);(h+=(l-1)*A)>=a&&(h-=(l-1)*A,A=0),h>=a&&u>0&&(d=!0,u*=.9,h=l*u);var f={offset:((a-h)/2>>0)-A,size:0};t=i.reduce(function(e,t){var r={item:t.item,position:{offset:f.offset+f.size+A,size:d?u:t.barSize}},n=[].concat(ma(e),[r]);return f=n[n.length-1].position,t.stackList&&t.stackList.length&&t.stackList.forEach(function(e){n.push({item:e,position:f})}),n},c)}else{var p=A_(n,a,0,!0);a-2*p-(l-1)*A<=0&&(A=0);var m=(a-2*p-(l-1)*A)/l;m>1&&(m>>=0);var g=s===+s?Math.min(m,s):m;t=i.reduce(function(e,t,r){var n=[].concat(ma(e),[{item:t.item,position:{offset:p+(m+A)*r+(m-g)/2,size:g}}]);return t.stackList&&t.stackList.length&&t.stackList.forEach(function(e){n.push({item:e,position:n[n.length-1].position})}),n},c)}return t},mp=function(e,t,r,n){var a=r.children,o=r.width,i=r.margin,s=mr({children:a,legendWidth:o-(i.left||0)-(i.right||0)});if(s){var l=n||{},A=l.width,c=l.height,d=s.align,u=s.verticalAlign,h=s.layout;if(("vertical"===h||"horizontal"===h&&"middle"===u)&&"center"!==d&&AP(e[d]))return ms(ms({},e),{},ml({},d,e[d]+(A||0)));if(("horizontal"===h||"vertical"===h&&"center"===d)&&"middle"!==u&&AP(e[u]))return ms(ms({},e),{},ml({},u,e[u]+(c||0)))}return e},mm=function(e,t,r,n,a){var o=A3(t.props.children,pa).filter(function(e){var t;return t=e.props.direction,!!Ax()(a)||("horizontal"===n?"yAxis"===a:"vertical"===n||"x"===t?"xAxis"===a:"y"!==t||"yAxis"===a)});if(o&&o.length){var i=o.map(function(e){return e.props.dataKey});return e.reduce(function(e,t){var n=mA(t,r);if(Ax()(n))return e;var a=Array.isArray(n)?[fe()(n),h7()(n)]:[n,n],o=i.reduce(function(e,r){var n=mA(t,r,0),o=a[0]-Math.abs(Array.isArray(n)?n[0]:n),i=a[1]+Math.abs(Array.isArray(n)?n[1]:n);return[Math.min(o,e[0]),Math.max(i,e[1])]},[1/0,-1/0]);return[Math.min(o[0],e[0]),Math.max(o[1],e[1])]},[1/0,-1/0])}return null},mg=function(e,t,r,n,a){var o=t.map(function(t){return mm(e,t,r,a,n)}).filter(function(e){return!Ax()(e)});return o&&o.length?o.reduce(function(e,t){return[Math.min(e[0],t[0]),Math.max(e[1],t[1])]},[1/0,-1/0]):null},mx=function(e,t,r,n,a){var o=t.map(function(t){var o=t.props.dataKey;return"number"===r&&o&&mm(e,t,o,n)||mc(e,o,r,a)});if("number"===r)return o.reduce(function(e,t){return[Math.min(e[0],t[0]),Math.max(e[1],t[1])]},[1/0,-1/0]);var i={};return o.reduce(function(e,t){for(var r=0,n=t.length;r<n;r++)i[t[r]]||(i[t[r]]=!0,e.push(t[r]));return e},[])},mb=function(e,t){return"horizontal"===e&&"xAxis"===t||"vertical"===e&&"yAxis"===t||"centric"===e&&"angleAxis"===t||"radial"===e&&"radiusAxis"===t},my=function(e,t,r,n){if(n)return e.map(function(e){return e.coordinate});var a,o,i=e.map(function(e){return e.coordinate===t&&(a=!0),e.coordinate===r&&(o=!0),e.coordinate});return a||i.push(t),o||i.push(r),i},mv=function(e,t,r){if(!e)return null;var n=e.scale,a=e.duplicateDomain,o=e.type,i=e.range,s="scaleBand"===e.realScaleType?n.bandwidth()/2:2,l=(t||r)&&"category"===o&&n.bandwidth?n.bandwidth()/s:0;return(l="angleAxis"===e.axisType&&(null==i?void 0:i.length)>=2?2*AE(i[0]-i[1])*l:l,t&&(e.ticks||e.niceTicks))?(e.ticks||e.niceTicks).map(function(e){return{coordinate:n(a?a.indexOf(e):e)+l,value:e,offset:l}}).filter(function(e){return!AN()(e.coordinate)}):e.isCategorical&&e.categoricalDomain?e.categoricalDomain.map(function(e,t){return{coordinate:n(e)+l,value:e,index:t,offset:l}}):n.ticks&&!r?n.ticks(e.tickCount).map(function(e){return{coordinate:n(e)+l,value:e,offset:l}}):n.domain().map(function(e,t){return{coordinate:n(e)+l,value:a?a[e]:e,index:t,offset:l}})},mw=new WeakMap,mk=function(e,t){if("function"!=typeof t)return e;mw.has(e)||mw.set(e,new WeakMap);var r=mw.get(e);if(r.has(t))return r.get(t);var n=function(){e.apply(void 0,arguments),t.apply(void 0,arguments)};return r.set(t,n),n},mB=function(e,t,r){var n=e.scale,a=e.type,o=e.layout,i=e.axisType;if("auto"===n)return"radial"===o&&"radiusAxis"===i?{scale:cu(),realScaleType:"band"}:"radial"===o&&"angleAxis"===i?{scale:dS(),realScaleType:"linear"}:"category"===a&&t&&(t.indexOf("LineChart")>=0||t.indexOf("AreaChart")>=0||t.indexOf("ComposedChart")>=0&&!r)?{scale:ch(),realScaleType:"point"}:"category"===a?{scale:cu(),realScaleType:"band"}:{scale:dS(),realScaleType:"linear"};if(Ay()(n)){var s="scale".concat(fa()(n));return{scale:(p[s]||ch)(),realScaleType:p[s]?s:"point"}}return Aw()(n)?{scale:n}:{scale:ch(),realScaleType:"point"}},mj=function(e){var t=e.domain();if(t&&!(t.length<=2)){var r=t.length,n=e.range(),a=Math.min(n[0],n[1])-1e-4,o=Math.max(n[0],n[1])+1e-4,i=e(t[0]),s=e(t[r-1]);(i<a||i>o||s<a||s>o)&&e.domain([t[0],t[r-1]])}},mC=function(e,t){if(!e)return null;for(var r=0,n=e.length;r<n;r++)if(e[r].item===t)return e[r].position;return null},mN=function(e,t){if(!t||2!==t.length||!AP(t[0])||!AP(t[1]))return e;var r=Math.min(t[0],t[1]),n=Math.max(t[0],t[1]),a=[e[0],e[1]];return(!AP(e[0])||e[0]<r)&&(a[0]=r),(!AP(e[1])||e[1]>n)&&(a[1]=n),a[0]>n&&(a[0]=n),a[1]<r&&(a[1]=r),a},mS={sign:function(e){var t=e.length;if(!(t<=0))for(var r=0,n=e[0].length;r<n;++r)for(var a=0,o=0,i=0;i<t;++i){var s=AN()(e[i][r][1])?e[i][r][0]:e[i][r][1];s>=0?(e[i][r][0]=a,e[i][r][1]=a+s,a=e[i][r][1]):(e[i][r][0]=o,e[i][r][1]=o+s,o=e[i][r][1])}},expand:function(e,t){if((n=e.length)>0){for(var r,n,a,o=0,i=e[0].length;o<i;++o){for(a=r=0;r<n;++r)a+=e[r][o][1]||0;if(a)for(r=0;r<n;++r)e[r][o][1]/=a}hG(e,t)}},none:hG,silhouette:function(e,t){if((r=e.length)>0){for(var r,n=0,a=e[t[0]],o=a.length;n<o;++n){for(var i=0,s=0;i<r;++i)s+=e[i][n][1]||0;a[n][1]+=a[n][0]=-s/2}hG(e,t)}},wiggle:function(e,t){if((a=e.length)>0&&(n=(r=e[t[0]]).length)>0){for(var r,n,a,o=0,i=1;i<n;++i){for(var s=0,l=0,A=0;s<a;++s){for(var c=e[t[s]],d=c[i][1]||0,u=(d-(c[i-1][1]||0))/2,h=0;h<s;++h){var f=e[t[h]];u+=(f[i][1]||0)-(f[i-1][1]||0)}l+=d,A+=u*d}r[i-1][1]+=r[i-1][0]=o,l&&(o-=A/l)}r[i-1][1]+=r[i-1][0]=o,hG(e,t)}},positive:function(e){var t=e.length;if(!(t<=0))for(var r=0,n=e[0].length;r<n;++r)for(var a=0,o=0;o<t;++o){var i=AN()(e[o][r][1])?e[o][r][0]:e[o][r][1];i>=0?(e[o][r][0]=a,e[o][r][1]=a+i,a=e[o][r][1]):(e[o][r][0]=0,e[o][r][1]=0)}}},mF=function(e,t,r){var n=t.map(function(e){return e.props.dataKey}),a=mS[r];return(function(){var e=hW([]),t=h$,r=hG,n=hX;function a(a){var o,i,s=Array.from(e.apply(this,arguments),hY),l=s.length,A=-1;for(let e of a)for(o=0,++A;o<l;++o)(s[o][A]=[0,+n(e,s[o].key,A,a)]).data=e;for(o=0,i=hz(t(s));o<l;++o)s[i[o]].index=o;return r(s,i),s}return a.keys=function(t){return arguments.length?(e="function"==typeof t?t:hW(Array.from(t)),a):e},a.value=function(e){return arguments.length?(n="function"==typeof e?e:hW(+e),a):n},a.order=function(e){return arguments.length?(t=null==e?h$:"function"==typeof e?e:hW(Array.from(e)),a):t},a.offset=function(e){return arguments.length?(r=null==e?hG:e,a):r},a})().keys(n).value(function(e,t){return+mA(e,t,0)}).order(h$).offset(a)(e)},mE=function(e,t,r,n,a,o){if(!e)return null;var i=(o?t.reverse():t).reduce(function(e,t){var a,o=null!==(a=t.type)&&void 0!==a&&a.defaultProps?ms(ms({},t.type.defaultProps),t.props):t.props,i=o.stackId;if(o.hide)return e;var s=o[r],l=e[s]||{hasStack:!1,stackGroups:{}};if(AI(i)){var A=l.stackGroups[i]||{numericAxisId:r,cateAxisId:n,items:[]};A.items.push(t),l.hasStack=!0,l.stackGroups[i]=A}else l.stackGroups[AL("_stackId_")]={numericAxisId:r,cateAxisId:n,items:[t]};return ms(ms({},e),{},ml({},s,l))},{});return Object.keys(i).reduce(function(t,o){var s=i[o];return s.hasStack&&(s.stackGroups=Object.keys(s.stackGroups).reduce(function(t,o){var i=s.stackGroups[o];return ms(ms({},t),{},ml({},o,{numericAxisId:r,cateAxisId:n,items:i.items,stackedData:mF(e,i.items,a)}))},{})),ms(ms({},t),{},ml({},o,s))},{})},mO=function(e,t){var r=t.realScaleType,n=t.type,a=t.tickCount,o=t.originalDomain,i=t.allowDecimals,s=r||t.scale;if("auto"!==s&&"linear"!==s)return null;if(a&&"number"===n&&o&&("auto"===o[0]||"auto"===o[1])){var l=e.domain();if(!l.length)return null;var A=fZ(l,a,i);return e.domain([fe()(A),h7()(A)]),{niceTicks:A}}return a&&"number"===n?{niceTicks:f0(e.domain(),a,i)}:null};function mP(e){var t=e.axis,r=e.ticks,n=e.bandSize,a=e.entry,o=e.index,i=e.dataKey;if("category"===t.type){if(!t.allowDuplicatedCategory&&t.dataKey&&!Ax()(a[t.dataKey])){var s=AM(r,"value",a[t.dataKey]);if(s)return s.coordinate+n/2}return r[o]?r[o].coordinate+n/2:null}var l=mA(a,Ax()(i)?t.dataKey:i);return Ax()(l)?null:t.scale(l)}var mI=function(e){var t=e.axis,r=e.ticks,n=e.offset,a=e.bandSize,o=e.entry,i=e.index;if("category"===t.type)return r[i]?r[i].coordinate+n:null;var s=mA(o,t.dataKey,t.domain[i]);return Ax()(s)?null:t.scale(s)-a/2+n},mU=function(e){var t=e.numericAxis,r=t.scale.domain();if("number"===t.type){var n=Math.min(r[0],r[1]),a=Math.max(r[0],r[1]);return n<=0&&a>=0?0:a<0?a:n}return r[0]},mL=function(e,t){var r,n=(null!==(r=e.type)&&void 0!==r&&r.defaultProps?ms(ms({},e.type.defaultProps),e.props):e.props).stackId;if(AI(n)){var a=t[n];if(a){var o=a.items.indexOf(e);return o>=0?a.stackedData[o]:null}}return null},m_=function(e,t,r){return Object.keys(e).reduce(function(n,a){var o=e[a].stackedData.reduce(function(e,n){var a=n.slice(t,r+1).reduce(function(e,t){return[fe()(t.concat([e[0]]).filter(AP)),h7()(t.concat([e[1]]).filter(AP))]},[1/0,-1/0]);return[Math.min(e[0],a[0]),Math.max(e[1],a[1])]},[1/0,-1/0]);return[Math.min(o[0],n[0]),Math.max(o[1],n[1])]},[1/0,-1/0]).map(function(e){return e===1/0||e===-1/0?0:e})},mQ=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,mT=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,mD=function(e,t,r){if(Aw()(e))return e(t,r);if(!Array.isArray(e))return t;var n=[];if(AP(e[0]))n[0]=r?e[0]:Math.min(e[0],t[0]);else if(mQ.test(e[0])){var a=+mQ.exec(e[0])[1];n[0]=t[0]-a}else Aw()(e[0])?n[0]=e[0](t[0]):n[0]=t[0];if(AP(e[1]))n[1]=r?e[1]:Math.max(e[1],t[1]);else if(mT.test(e[1])){var o=+mT.exec(e[1])[1];n[1]=t[1]+o}else Aw()(e[1])?n[1]=e[1](t[1]):n[1]=t[1];return n},mM=function(e,t,r){if(e&&e.scale&&e.scale.bandwidth){var n=e.scale.bandwidth();if(!r||n>0)return n}if(e&&t&&t.length>=2){for(var a=fl()(t,function(e){return e.coordinate}),o=1/0,i=1,s=a.length;i<s;i++){var l=a[i],A=a[i-1];o=Math.min((l.coordinate||0)-(A.coordinate||0),o)}return o===1/0?0:o}return r?void 0:0},mH=function(e,t,r){return!e||!e.length||fi()(e,Am()(r,"type.defaultProps.domain"))?t:e},mR=function(e,t){var r=e.type.defaultProps?ms(ms({},e.type.defaultProps),e.props):e.props,n=r.dataKey,a=r.name,o=r.unit,i=r.formatter,s=r.tooltipType,l=r.chartType,A=r.hide;return ms(ms({},ce(e,!1)),{},{dataKey:n,unit:o,formatter:i,name:a||n,color:mu(e),value:mA(t,n),type:s,payload:t,chartType:l,hide:A})};function mK(e){return(mK="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function mV(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function mq(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?mV(Object(r),!0).forEach(function(t){mG(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):mV(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function mG(e,t,r){var n;return(n=function(e,t){if("object"!=mK(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=mK(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==mK(n)?n:n+"")in e)?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function mz(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var mW=Math.PI/180,m$=function(e,t,r,n){return{x:e+Math.cos(-mW*n)*r,y:t+Math.sin(-mW*n)*r}},mX=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(e-(r.left||0)-(r.right||0)),Math.abs(t-(r.top||0)-(r.bottom||0)))/2},mY=function(e,t){var r=e.x,n=e.y;return Math.sqrt(Math.pow(r-t.x,2)+Math.pow(n-t.y,2))},mJ=function(e,t){var r=e.x,n=e.y,a=t.cx,o=t.cy,i=mY({x:r,y:n},{x:a,y:o});if(i<=0)return{radius:i};var s=Math.acos((r-a)/i);return n>o&&(s=2*Math.PI-s),{radius:i,angle:180*s/Math.PI,angleInRadian:s}},mZ=function(e){var t=e.startAngle,r=e.endAngle,n=Math.min(Math.floor(t/360),Math.floor(r/360));return{startAngle:t-360*n,endAngle:r-360*n}},m0=function(e,t){var r,n=mJ({x:e.x,y:e.y},t),a=n.radius,o=n.angle,i=t.innerRadius,s=t.outerRadius;if(a<i||a>s)return!1;if(0===a)return!0;var l=mZ(t),A=l.startAngle,c=l.endAngle,d=o;if(A<=c){for(;d>c;)d-=360;for(;d<A;)d+=360;r=d>=A&&d<=c}else{for(;d>A;)d-=360;for(;d<c;)d+=360;r=d>=c&&d<=A}return r?mq(mq({},t),{},{radius:a,angle:d+360*Math.min(Math.floor(t.startAngle/360),Math.floor(t.endAngle/360))}):null},m1=function(e){return(0,g.isValidElement)(e)||Aw()(e)||"boolean"==typeof e?"":e.className};function m2(e){return(m2="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function m5(){return(m5=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function m4(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function m3(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?m4(Object(r),!0).forEach(function(t){var n,a;n=t,a=r[t],(n=function(e){var t=function(e,t){if("object"!=m2(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=m2(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==m2(t)?t:t+""}(n))in e?Object.defineProperty(e,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[n]=a}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):m4(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var m6=function(e){var t=e.cx,r=e.cy,n=e.radius,a=e.angle,o=e.sign,i=e.isExternal,s=e.cornerRadius,l=e.cornerIsExternal,A=s*(i?1:-1)+n,c=Math.asin(s/A)/mW,d=l?a:a+o*c;return{center:m$(t,r,A,d),circleTangency:m$(t,r,n,d),lineTangency:m$(t,r,A*Math.cos(c*mW),l?a-o*c:a),theta:c}},m8=function(e){var t=e.cx,r=e.cy,n=e.innerRadius,a=e.outerRadius,o=e.startAngle,i=e.endAngle,s=AE(i-o)*Math.min(Math.abs(i-o),359.999),l=o+s,A=m$(t,r,a,o),c=m$(t,r,a,l),d="M ".concat(A.x,",").concat(A.y,"\n    A ").concat(a,",").concat(a,",0,\n    ").concat(+(Math.abs(s)>180),",").concat(+(o>l),",\n    ").concat(c.x,",").concat(c.y,"\n  ");if(n>0){var u=m$(t,r,n,o),h=m$(t,r,n,l);d+="L ".concat(h.x,",").concat(h.y,"\n            A ").concat(n,",").concat(n,",0,\n            ").concat(+(Math.abs(s)>180),",").concat(+(o<=l),",\n            ").concat(u.x,",").concat(u.y," Z")}else d+="L ".concat(t,",").concat(r," Z");return d},m7=function(e){var t=e.cx,r=e.cy,n=e.innerRadius,a=e.outerRadius,o=e.cornerRadius,i=e.forceCornerRadius,s=e.cornerIsExternal,l=e.startAngle,A=e.endAngle,c=AE(A-l),d=m6({cx:t,cy:r,radius:a,angle:l,sign:c,cornerRadius:o,cornerIsExternal:s}),u=d.circleTangency,h=d.lineTangency,f=d.theta,p=m6({cx:t,cy:r,radius:a,angle:A,sign:-c,cornerRadius:o,cornerIsExternal:s}),m=p.circleTangency,g=p.lineTangency,x=p.theta,b=s?Math.abs(l-A):Math.abs(l-A)-f-x;if(b<0)return i?"M ".concat(h.x,",").concat(h.y,"\n        a").concat(o,",").concat(o,",0,0,1,").concat(2*o,",0\n        a").concat(o,",").concat(o,",0,0,1,").concat(-(2*o),",0\n      "):m8({cx:t,cy:r,innerRadius:n,outerRadius:a,startAngle:l,endAngle:A});var y="M ".concat(h.x,",").concat(h.y,"\n    A").concat(o,",").concat(o,",0,0,").concat(+(c<0),",").concat(u.x,",").concat(u.y,"\n    A").concat(a,",").concat(a,",0,").concat(+(b>180),",").concat(+(c<0),",").concat(m.x,",").concat(m.y,"\n    A").concat(o,",").concat(o,",0,0,").concat(+(c<0),",").concat(g.x,",").concat(g.y,"\n  ");if(n>0){var v=m6({cx:t,cy:r,radius:n,angle:l,sign:c,isExternal:!0,cornerRadius:o,cornerIsExternal:s}),w=v.circleTangency,k=v.lineTangency,B=v.theta,j=m6({cx:t,cy:r,radius:n,angle:A,sign:-c,isExternal:!0,cornerRadius:o,cornerIsExternal:s}),C=j.circleTangency,N=j.lineTangency,S=j.theta,F=s?Math.abs(l-A):Math.abs(l-A)-B-S;if(F<0&&0===o)return"".concat(y,"L").concat(t,",").concat(r,"Z");y+="L".concat(N.x,",").concat(N.y,"\n      A").concat(o,",").concat(o,",0,0,").concat(+(c<0),",").concat(C.x,",").concat(C.y,"\n      A").concat(n,",").concat(n,",0,").concat(+(F>180),",").concat(+(c>0),",").concat(w.x,",").concat(w.y,"\n      A").concat(o,",").concat(o,",0,0,").concat(+(c<0),",").concat(k.x,",").concat(k.y,"Z")}else y+="L".concat(t,",").concat(r,"Z");return y},m9={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},ge=function(e){var t,r=m3(m3({},m9),e),n=r.cx,a=r.cy,o=r.innerRadius,i=r.outerRadius,s=r.cornerRadius,l=r.forceCornerRadius,A=r.cornerIsExternal,c=r.startAngle,d=r.endAngle,u=r.className;if(i<o||c===d)return null;var h=Af("recharts-sector",u),f=i-o,p=A_(s,f,0,!0);return t=p>0&&360>Math.abs(c-d)?m7({cx:n,cy:a,innerRadius:o,outerRadius:i,cornerRadius:Math.min(p,f/2),forceCornerRadius:l,cornerIsExternal:A,startAngle:c,endAngle:d}):m8({cx:n,cy:a,innerRadius:o,outerRadius:i,startAngle:c,endAngle:d}),x().createElement("path",m5({},ce(r,!0),{className:h,d:t,role:"img"}))},gt=r(69450),gr=r.n(gt);function gn(e){return(gn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ga(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function go(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ga(Object(r),!0).forEach(function(t){var n,a;n=t,a=r[t],(n=function(e){var t=function(e,t){if("object"!=gn(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=gn(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==gn(t)?t:t+""}(n))in e?Object.defineProperty(e,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[n]=a}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ga(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function gi(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var gs=(0,g.forwardRef)(function(e,t){var r,n=e.aspect,a=e.initialDimension,o=void 0===a?{width:-1,height:-1}:a,i=e.width,s=void 0===i?"100%":i,l=e.height,A=void 0===l?"100%":l,c=e.minWidth,d=void 0===c?0:c,u=e.minHeight,h=e.maxHeight,f=e.children,p=e.debounce,m=void 0===p?0:p,b=e.id,y=e.className,v=e.onResize,w=e.style,k=(0,g.useRef)(null),B=(0,g.useRef)();B.current=v,(0,g.useImperativeHandle)(t,function(){return Object.defineProperty(k.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),k.current},configurable:!0})});var j=function(e){if(Array.isArray(e))return e}(r=(0,g.useState)({containerWidth:o.width,containerHeight:o.height}))||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o,i,s=[],l=!0,A=!1;try{for(o=(r=r.call(e)).next;!(l=(n=o.call(r)).done)&&(s.push(n.value),2!==s.length);l=!0);}catch(e){A=!0,a=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(A)throw a}}return s}}(r,2)||function(e,t){if(e){if("string"==typeof e)return gi(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return gi(e,2)}}(r,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),C=j[0],N=j[1],S=(0,g.useCallback)(function(e,t){N(function(r){var n=Math.round(e),a=Math.round(t);return r.containerWidth===n&&r.containerHeight===a?r:{containerWidth:n,containerHeight:a}})},[]);(0,g.useEffect)(function(){var e=function(e){var t,r=e[0].contentRect,n=r.width,a=r.height;S(n,a),null===(t=B.current)||void 0===t||t.call(B,n,a)};m>0&&(e=gr()(e,m,{trailing:!0,leading:!1}));var t=new ResizeObserver(e),r=k.current.getBoundingClientRect();return S(r.width,r.height),t.observe(k.current),function(){t.disconnect()}},[S,m]);var F=(0,g.useMemo)(function(){var e=C.containerWidth,t=C.containerHeight;if(e<0||t<0)return null;po(AO(s)||AO(A),"The width(%s) and height(%s) are both fixed numbers,\n       maybe you don't need to use a ResponsiveContainer.",s,A),po(!n||n>0,"The aspect(%s) must be greater than zero.",n);var r=AO(s)?e:s,a=AO(A)?t:A;n&&n>0&&(r?a=r/n:a&&(r=a*n),h&&a>h&&(a=h)),po(r>0||a>0,"The width(%s) and height(%s) of chart should be greater than 0,\n       please check the style of container, or the props width(%s) and height(%s),\n       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the\n       height and width.",r,a,s,A,d,u,n);var o=!Array.isArray(f)&&A1(f.type).endsWith("Chart");return x().Children.map(f,function(e){return x().isValidElement(e)?(0,g.cloneElement)(e,go({width:r,height:a},o?{style:go({height:"100%",width:"100%",maxHeight:a,maxWidth:r},e.props.style)}:{})):e})},[n,f,A,h,u,d,C,s]);return x().createElement("div",{id:b?"".concat(b):void 0,className:Af("recharts-responsive-container",y),style:go(go({},void 0===w?{}:w),{},{width:s,height:A,minWidth:d,minHeight:u,maxHeight:h}),ref:k},F)}),gl=r(65680),gA=r.n(gl);function gc(e){return(gc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function gd(){return(gd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function gu(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function gh(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function gf(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?gh(Object(r),!0).forEach(function(t){var n,a;n=t,a=r[t],(n=function(e){var t=function(e,t){if("object"!=gc(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=gc(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==gc(t)?t:t+""}(n))in e?Object.defineProperty(e,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[n]=a}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):gh(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function gp(e){return Array.isArray(e)&&AI(e[0])&&AI(e[1])?e.join(" ~ "):e}var gm=function(e){var t=e.separator,r=void 0===t?" : ":t,n=e.contentStyle,a=e.itemStyle,o=void 0===a?{}:a,i=e.labelStyle,s=e.payload,l=e.formatter,A=e.itemSorter,c=e.wrapperClassName,d=e.labelClassName,u=e.label,h=e.labelFormatter,f=e.accessibilityLayer,p=gf({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},void 0===n?{}:n),m=gf({margin:0},void 0===i?{}:i),g=!Ax()(u),b=g?u:"",y=Af("recharts-default-tooltip",c),v=Af("recharts-tooltip-label",d);return g&&h&&null!=s&&(b=h(u,s)),x().createElement("div",gd({className:y,style:p},void 0!==f&&f?{role:"status","aria-live":"assertive"}:{}),x().createElement("p",{className:v,style:m},x().isValidElement(b)?b:"".concat(b)),function(){if(s&&s.length){var e=(A?fl()(s,A):s).map(function(e,t){if("none"===e.type)return null;var n=gf({display:"block",paddingTop:4,paddingBottom:4,color:e.color||"#000"},o),a=e.formatter||l||gp,i=e.value,A=e.name,c=i,d=A;if(a&&null!=c&&null!=d){var u=a(i,A,e,t,s);if(Array.isArray(u)){var h=function(e){if(Array.isArray(e))return e}(u)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o,i,s=[],l=!0,A=!1;try{for(o=(r=r.call(e)).next;!(l=(n=o.call(r)).done)&&(s.push(n.value),2!==s.length);l=!0);}catch(e){A=!0,a=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(A)throw a}}return s}}(u,2)||function(e,t){if(e){if("string"==typeof e)return gu(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return gu(e,2)}}(u,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}();c=h[0],d=h[1]}else c=u}return x().createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(t),style:n},AI(d)?x().createElement("span",{className:"recharts-tooltip-item-name"},d):null,AI(d)?x().createElement("span",{className:"recharts-tooltip-item-separator"},r):null,x().createElement("span",{className:"recharts-tooltip-item-value"},c),x().createElement("span",{className:"recharts-tooltip-item-unit"},e.unit||""))});return x().createElement("ul",{className:"recharts-tooltip-item-list",style:{padding:0,margin:0}},e)}return null}())};function gg(e){return(gg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function gx(e,t,r){var n;return(n=function(e,t){if("object"!=gg(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=gg(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==gg(n)?n:n+"")in e)?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var gb="recharts-tooltip-wrapper",gy={visibility:"hidden"};function gv(e){var t=e.allowEscapeViewBox,r=e.coordinate,n=e.key,a=e.offsetTopLeft,o=e.position,i=e.reverseDirection,s=e.tooltipDimension,l=e.viewBox,A=e.viewBoxDimension;if(o&&AP(o[n]))return o[n];var c=r[n]-s-a,d=r[n]+a;return t[n]?i[n]?c:d:i[n]?c<l[n]?Math.max(d,l[n]):Math.max(c,l[n]):d+s>l[n]+A?Math.max(c,l[n]):Math.max(d,l[n])}function gw(e){return(gw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function gk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function gB(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?gk(Object(r),!0).forEach(function(t){gS(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):gk(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function gj(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(gj=function(){return!!e})()}function gC(e){return(gC=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function gN(e,t){return(gN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function gS(e,t,r){return(t=gF(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function gF(e){var t=function(e,t){if("object"!=gw(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=gw(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==gw(t)?t:t+""}var gE=function(e){var t;function r(){!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,r);for(var e,t,n,a=arguments.length,o=Array(a),i=0;i<a;i++)o[i]=arguments[i];return t=r,n=[].concat(o),t=gC(t),gS(e=function(e,t){if(t&&("object"===gw(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,gj()?Reflect.construct(t,n||[],gC(this).constructor):t.apply(this,n)),"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),gS(e,"handleKeyDown",function(t){if("Escape"===t.key){var r,n,a,o;e.setState({dismissed:!0,dismissedAtCoordinate:{x:null!==(r=null===(n=e.props.coordinate)||void 0===n?void 0:n.x)&&void 0!==r?r:0,y:null!==(a=null===(o=e.props.coordinate)||void 0===o?void 0:o.y)&&void 0!==a?a:0}})}}),e}return function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&gN(e,t)}(r,e),t=[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var e=this.wrapperNode.getBoundingClientRect();(Math.abs(e.width-this.state.lastBoundingBox.width)>1||Math.abs(e.height-this.state.lastBoundingBox.height)>1)&&this.setState({lastBoundingBox:{width:e.width,height:e.height}})}else(-1!==this.state.lastBoundingBox.width||-1!==this.state.lastBoundingBox.height)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var e,t;this.props.active&&this.updateBBox(),this.state.dismissed&&((null===(e=this.props.coordinate)||void 0===e?void 0:e.x)!==this.state.dismissedAtCoordinate.x||(null===(t=this.props.coordinate)||void 0===t?void 0:t.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var e,t,r,n,a,o,i,s,l,A,c,d,u,h,f,p,m,g,b,y=this,v=this.props,w=v.active,k=v.allowEscapeViewBox,B=v.animationDuration,j=v.animationEasing,C=v.children,N=v.coordinate,S=v.hasPayload,F=v.isAnimationActive,E=v.offset,O=v.position,P=v.reverseDirection,I=v.useTranslate3d,U=v.viewBox,L=v.wrapperStyle,_=(d=(e={allowEscapeViewBox:k,coordinate:N,offsetTopLeft:E,position:O,reverseDirection:P,tooltipBox:this.state.lastBoundingBox,useTranslate3d:I,viewBox:U}).allowEscapeViewBox,u=e.coordinate,h=e.offsetTopLeft,f=e.position,p=e.reverseDirection,m=e.tooltipBox,g=e.useTranslate3d,b=e.viewBox,m.height>0&&m.width>0&&u?(r=(t={translateX:A=gv({allowEscapeViewBox:d,coordinate:u,key:"x",offsetTopLeft:h,position:f,reverseDirection:p,tooltipDimension:m.width,viewBox:b,viewBoxDimension:b.width}),translateY:c=gv({allowEscapeViewBox:d,coordinate:u,key:"y",offsetTopLeft:h,position:f,reverseDirection:p,tooltipDimension:m.height,viewBox:b,viewBoxDimension:b.height}),useTranslate3d:g}).translateX,n=t.translateY,l={transform:t.useTranslate3d?"translate3d(".concat(r,"px, ").concat(n,"px, 0)"):"translate(".concat(r,"px, ").concat(n,"px)")}):l=gy,{cssProperties:l,cssClasses:(o=(a={translateX:A,translateY:c,coordinate:u}).coordinate,i=a.translateX,s=a.translateY,Af(gb,gx(gx(gx(gx({},"".concat(gb,"-right"),AP(i)&&o&&AP(o.x)&&i>=o.x),"".concat(gb,"-left"),AP(i)&&o&&AP(o.x)&&i<o.x),"".concat(gb,"-bottom"),AP(s)&&o&&AP(o.y)&&s>=o.y),"".concat(gb,"-top"),AP(s)&&o&&AP(o.y)&&s<o.y)))}),Q=_.cssClasses,T=_.cssProperties,D=gB(gB({transition:F&&w?"transform ".concat(B,"ms ").concat(j):void 0},T),{},{pointerEvents:"none",visibility:!this.state.dismissed&&w&&S?"visible":"hidden",position:"absolute",top:0,left:0},L);return x().createElement("div",{tabIndex:-1,className:Q,style:D,ref:function(e){y.wrapperNode=e}},C)}}],function(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,gF(n.key),n)}}(r.prototype,t),Object.defineProperty(r,"prototype",{writable:!1}),r}(g.PureComponent),gO={isSsr:!0,get:function(e){return gO[e]},set:function(e,t){if("string"==typeof e)gO[e]=t;else{var r=Object.keys(e);r&&r.length&&r.forEach(function(t){gO[t]=e[t]})}}};function gP(e){return(gP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function gI(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function gU(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?gI(Object(r),!0).forEach(function(t){gT(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):gI(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function gL(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(gL=function(){return!!e})()}function g_(e){return(g_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function gQ(e,t){return(gQ=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function gT(e,t,r){return(t=gD(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function gD(e){var t=function(e,t){if("object"!=gP(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=gP(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==gP(t)?t:t+""}function gM(e){return e.dataKey}var gH=function(e){var t;function r(){var e,t;return function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,r),e=r,t=arguments,e=g_(e),function(e,t){if(t&&("object"===gP(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,gL()?Reflect.construct(e,t||[],g_(this).constructor):e.apply(this,t))}return function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&gQ(e,t)}(r,e),t=[{key:"render",value:function(){var e,t=this,r=this.props,n=r.active,a=r.allowEscapeViewBox,o=r.animationDuration,i=r.animationEasing,s=r.content,l=r.coordinate,A=r.filterNull,c=r.isAnimationActive,d=r.offset,u=r.payload,h=r.payloadUniqBy,f=r.position,p=r.reverseDirection,m=r.useTranslate3d,g=r.viewBox,b=r.wrapperStyle,y=null!=u?u:[];A&&y.length&&(y=pX(u.filter(function(e){return null!=e.value&&(!0!==e.hide||t.props.includeHidden)}),h,gM));var v=y.length>0;return x().createElement(gE,{allowEscapeViewBox:a,animationDuration:o,animationEasing:i,isAnimationActive:c,active:n,coordinate:l,hasPayload:v,offset:d,position:f,reverseDirection:p,useTranslate3d:m,viewBox:g,wrapperStyle:b},(e=gU(gU({},this.props),{},{payload:y}),x().isValidElement(s)?x().cloneElement(s,e):"function"==typeof s?x().createElement(s,e):x().createElement(gm,e)))}}],function(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,gD(n.key),n)}}(r.prototype,t),Object.defineProperty(r,"prototype",{writable:!1}),r}(g.PureComponent);function gR(){return(gR=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}gT(gH,"displayName","Tooltip"),gT(gH,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!gO.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var gK=function(e){var t=e.cx,r=e.cy,n=e.r,a=Af("recharts-dot",e.className);return t===+t&&r===+r&&n===+n?g.createElement("circle",gR({},ce(e,!1),AW(e),{className:a,cx:t,cy:r,r:n})):null},gV=r(78439),gq=r.n(gV),gG=Object.getOwnPropertyNames,gz=Object.getOwnPropertySymbols,gW=Object.prototype.hasOwnProperty;function g$(e,t){return function(r,n,a){return e(r,n,a)&&t(r,n,a)}}function gX(e){return function(t,r,n){if(!t||!r||"object"!=typeof t||"object"!=typeof r)return e(t,r,n);var a=n.cache,o=a.get(t),i=a.get(r);if(o&&i)return o===r&&i===t;a.set(t,r),a.set(r,t);var s=e(t,r,n);return a.delete(t),a.delete(r),s}}function gY(e){return gG(e).concat(gz(e))}var gJ=Object.hasOwn||function(e,t){return gW.call(e,t)};function gZ(e,t){return e===t||!e&&!t&&e!=e&&t!=t}var g0=Object.getOwnPropertyDescriptor,g1=Object.keys;function g2(e,t,r){var n=e.length;if(t.length!==n)return!1;for(;n-- >0;)if(!r.equals(e[n],t[n],n,n,e,t,r))return!1;return!0}function g5(e,t){return gZ(e.getTime(),t.getTime())}function g4(e,t){return e.name===t.name&&e.message===t.message&&e.cause===t.cause&&e.stack===t.stack}function g3(e,t){return e===t}function g6(e,t,r){var n,a,o=e.size;if(o!==t.size)return!1;if(!o)return!0;for(var i=Array(o),s=e.entries(),l=0;(n=s.next())&&!n.done;){for(var A=t.entries(),c=!1,d=0;(a=A.next())&&!a.done;){if(i[d]){d++;continue}var u=n.value,h=a.value;if(r.equals(u[0],h[0],l,d,e,t,r)&&r.equals(u[1],h[1],u[0],h[0],e,t,r)){c=i[d]=!0;break}d++}if(!c)return!1;l++}return!0}function g8(e,t,r){var n=g1(e),a=n.length;if(g1(t).length!==a)return!1;for(;a-- >0;)if(!xa(e,t,r,n[a]))return!1;return!0}function g7(e,t,r){var n,a,o,i=gY(e),s=i.length;if(gY(t).length!==s)return!1;for(;s-- >0;)if(!xa(e,t,r,n=i[s])||(a=g0(e,n),o=g0(t,n),(a||o)&&(!a||!o||a.configurable!==o.configurable||a.enumerable!==o.enumerable||a.writable!==o.writable)))return!1;return!0}function g9(e,t){return gZ(e.valueOf(),t.valueOf())}function xe(e,t){return e.source===t.source&&e.flags===t.flags}function xt(e,t,r){var n,a,o=e.size;if(o!==t.size)return!1;if(!o)return!0;for(var i=Array(o),s=e.values();(n=s.next())&&!n.done;){for(var l=t.values(),A=!1,c=0;(a=l.next())&&!a.done;){if(!i[c]&&r.equals(n.value,a.value,n.value,a.value,e,t,r)){A=i[c]=!0;break}c++}if(!A)return!1}return!0}function xr(e,t){var r=e.length;if(t.length!==r)return!1;for(;r-- >0;)if(e[r]!==t[r])return!1;return!0}function xn(e,t){return e.hostname===t.hostname&&e.pathname===t.pathname&&e.protocol===t.protocol&&e.port===t.port&&e.hash===t.hash&&e.username===t.username&&e.password===t.password}function xa(e,t,r,n){return("_owner"===n||"__o"===n||"__v"===n)&&(!!e.$$typeof||!!t.$$typeof)||gJ(t,n)&&r.equals(e[n],t[n],n,n,e,t,r)}var xo=Array.isArray,xi="function"==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView:null,xs=Object.assign,xl=Object.prototype.toString.call.bind(Object.prototype.toString),xA=xc();function xc(e){void 0===e&&(e={});var t,r,n,a,o,i,s,l,A,c,d,u,h,f,p=e.circular,m=e.createInternalComparator,g=e.createState,x=e.strict,b=(r=(t=function(e){var t=e.circular,r=e.createCustomConfig,n=e.strict,a={areArraysEqual:n?g7:g2,areDatesEqual:g5,areErrorsEqual:g4,areFunctionsEqual:g3,areMapsEqual:n?g$(g6,g7):g6,areNumbersEqual:gZ,areObjectsEqual:n?g7:g8,arePrimitiveWrappersEqual:g9,areRegExpsEqual:xe,areSetsEqual:n?g$(xt,g7):xt,areTypedArraysEqual:n?g7:xr,areUrlsEqual:xn,unknownTagComparators:void 0};if(r&&(a=xs({},a,r(a))),t){var o=gX(a.areArraysEqual),i=gX(a.areMapsEqual),s=gX(a.areObjectsEqual),l=gX(a.areSetsEqual);a=xs({},a,{areArraysEqual:o,areMapsEqual:i,areObjectsEqual:s,areSetsEqual:l})}return a}(e)).areArraysEqual,n=t.areDatesEqual,a=t.areErrorsEqual,o=t.areFunctionsEqual,i=t.areMapsEqual,s=t.areNumbersEqual,l=t.areObjectsEqual,A=t.arePrimitiveWrappersEqual,c=t.areRegExpsEqual,d=t.areSetsEqual,u=t.areTypedArraysEqual,h=t.areUrlsEqual,f=t.unknownTagComparators,function(e,t,p){if(e===t)return!0;if(null==e||null==t)return!1;var m=typeof e;if(m!==typeof t)return!1;if("object"!==m)return"number"===m?s(e,t,p):"function"===m&&o(e,t,p);var g=e.constructor;if(g!==t.constructor)return!1;if(g===Object)return l(e,t,p);if(xo(e))return r(e,t,p);if(null!=xi&&xi(e))return u(e,t,p);if(g===Date)return n(e,t,p);if(g===RegExp)return c(e,t,p);if(g===Map)return i(e,t,p);if(g===Set)return d(e,t,p);var x=xl(e);if("[object Date]"===x)return n(e,t,p);if("[object RegExp]"===x)return c(e,t,p);if("[object Map]"===x)return i(e,t,p);if("[object Set]"===x)return d(e,t,p);if("[object Object]"===x)return"function"!=typeof e.then&&"function"!=typeof t.then&&l(e,t,p);if("[object URL]"===x)return h(e,t,p);if("[object Error]"===x)return a(e,t,p);if("[object Arguments]"===x)return l(e,t,p);if("[object Boolean]"===x||"[object Number]"===x||"[object String]"===x)return A(e,t,p);if(f){var b=f[x];if(!b){var y=null!=e?e[Symbol.toStringTag]:void 0;y&&(b=f[y])}if(b)return b(e,t,p)}return!1}),y=m?m(b):function(e,t,r,n,a,o,i){return b(e,t,i)};return function(e){var t=e.circular,r=e.comparator,n=e.createState,a=e.equals,o=e.strict;if(n)return function(e,i){var s=n(),l=s.cache;return r(e,i,{cache:void 0===l?t?new WeakMap:void 0:l,equals:a,meta:s.meta,strict:o})};if(t)return function(e,t){return r(e,t,{cache:new WeakMap,equals:a,meta:void 0,strict:o})};var i={cache:void 0,equals:a,meta:void 0,strict:o};return function(e,t){return r(e,t,i)}}({circular:void 0!==p&&p,comparator:b,createState:g,equals:y,strict:void 0!==x&&x})}function xd(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=-1;requestAnimationFrame(function n(a){if(r<0&&(r=a),a-r>t)e(a),r=-1;else{var o;o=n,"undefined"!=typeof requestAnimationFrame&&requestAnimationFrame(o)}})}function xu(e){return(xu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function xh(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function xf(e){return(xf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function xp(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function xm(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?xp(Object(r),!0).forEach(function(t){xg(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):xp(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function xg(e,t,r){var n;return(n=function(e,t){if("object"!==xf(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==xf(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"===xf(n)?n:String(n))in e)?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}xc({strict:!0}),xc({circular:!0}),xc({circular:!0,strict:!0}),xc({createInternalComparator:function(){return gZ}}),xc({strict:!0,createInternalComparator:function(){return gZ}}),xc({circular:!0,createInternalComparator:function(){return gZ}}),xc({circular:!0,createInternalComparator:function(){return gZ},strict:!0});var xx=function(e){return e},xb=function(e,t){return Object.keys(t).reduce(function(r,n){return xm(xm({},r),{},xg({},n,e(n,t[n])))},{})},xy=function(e,t,r){return e.map(function(e){return"".concat(e.replace(/([A-Z])/g,function(e){return"-".concat(e.toLowerCase())})," ").concat(t,"ms ").concat(r)}).join(",")},xv=function(e,t,r,n,a,o,i,s){};function xw(e,t){if(e){if("string"==typeof e)return xk(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return xk(e,t)}}function xk(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var xB=function(e,t){return[0,3*e,3*t-6*e,3*e-3*t+1]},xj=function(e,t){return e.map(function(e,r){return e*Math.pow(t,r)}).reduce(function(e,t){return e+t})},xC=function(e,t){return function(r){return xj(xB(e,t),r)}},xN=function(){for(var e,t,r=arguments.length,n=Array(r),a=0;a<r;a++)n[a]=arguments[a];var o=n[0],i=n[1],s=n[2],l=n[3];if(1===n.length)switch(n[0]){case"linear":o=0,i=0,s=1,l=1;break;case"ease":o=.25,i=.1,s=.25,l=1;break;case"ease-in":o=.42,i=0,s=1,l=1;break;case"ease-out":o=.42,i=0,s=.58,l=1;break;case"ease-in-out":o=0,i=0,s=.58,l=1;break;default:var A=n[0].split("(");if("cubic-bezier"===A[0]&&4===A[1].split(")")[0].split(",").length){var c,d=function(e){if(Array.isArray(e))return e}(c=A[1].split(")")[0].split(",").map(function(e){return parseFloat(e)}))||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o,i,s=[],l=!0,A=!1;try{for(o=(r=r.call(e)).next;!(l=(n=o.call(r)).done)&&(s.push(n.value),4!==s.length);l=!0);}catch(e){A=!0,a=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(A)throw a}}return s}}(c,4)||xw(c,4)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}();o=d[0],i=d[1],s=d[2],l=d[3]}else xv(!1,"[configBezier]: arguments should be one of oneOf 'linear', 'ease', 'ease-in', 'ease-out', 'ease-in-out','cubic-bezier(x1,y1,x2,y2)', instead received %s",n)}xv([o,s,i,l].every(function(e){return"number"==typeof e&&e>=0&&e<=1}),"[configBezier]: arguments should be x1, y1, x2, y2 of [0, 1] instead received %s",n);var u=xC(o,s),h=xC(i,l),f=(e=o,t=s,function(r){var n;return xj([].concat(function(e){if(Array.isArray(e))return xk(e)}(n=xB(e,t).map(function(e,t){return e*t}).slice(1))||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(n)||xw(n)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),[0]),r)}),p=function(e){for(var t=e>1?1:e,r=t,n=0;n<8;++n){var a,o=u(r)-t,i=f(r);if(1e-4>Math.abs(o-t)||i<1e-4)break;r=(a=r-o/i)>1?1:a<0?0:a}return h(r)};return p.isStepper=!1,p},xS=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.stiff,r=void 0===t?100:t,n=e.damping,a=void 0===n?8:n,o=e.dt,i=void 0===o?17:o,s=function(e,t,n){var o=n+(-(e-t)*r-n*a)*i/1e3,s=n*i/1e3+e;return 1e-4>Math.abs(s-t)&&1e-4>Math.abs(o)?[t,0]:[s,o]};return s.isStepper=!0,s.dt=i,s},xF=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];var n=t[0];if("string"==typeof n)switch(n){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return xN(n);case"spring":return xS();default:if("cubic-bezier"===n.split("(")[0])return xN(n);xv(!1,"[configEasing]: first argument should be one of 'ease', 'ease-in', 'ease-out', 'ease-in-out','cubic-bezier(x1,y1,x2,y2)', 'linear' and 'spring', instead  received %s",t)}return"function"==typeof n?n:(xv(!1,"[configEasing]: first argument type should be function or string, instead received %s",t),null)};function xE(e){return(xE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function xO(e){return function(e){if(Array.isArray(e))return x_(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||xL(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function xP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function xI(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?xP(Object(r),!0).forEach(function(t){xU(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):xP(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function xU(e,t,r){var n;return(n=function(e,t){if("object"!==xE(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==xE(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"===xE(n)?n:String(n))in e)?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function xL(e,t){if(e){if("string"==typeof e)return x_(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return x_(e,t)}}function x_(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var xQ=function(e,t,r){return e+(t-e)*r},xT=function(e){return e.from!==e.to},xD=function e(t,r,n){var a=xb(function(e,r){if(xT(r)){var n,a=function(e){if(Array.isArray(e))return e}(n=t(r.from,r.to,r.velocity))||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o,i,s=[],l=!0,A=!1;try{for(o=(r=r.call(e)).next;!(l=(n=o.call(r)).done)&&(s.push(n.value),2!==s.length);l=!0);}catch(e){A=!0,a=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(A)throw a}}return s}}(n,2)||xL(n,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),o=a[0],i=a[1];return xI(xI({},r),{},{from:o,velocity:i})}return r},r);return n<1?xb(function(e,t){return xT(t)?xI(xI({},t),{},{velocity:xQ(t.velocity,a[e].velocity,n),from:xQ(t.from,a[e].from,n)}):t},r):e(t,a,n-1)};let xM=function(e,t,r,n,a){var o,i,s=[Object.keys(e),Object.keys(t)].reduce(function(e,t){return e.filter(function(e){return t.includes(e)})}),l=s.reduce(function(r,n){return xI(xI({},r),{},xU({},n,[e[n],t[n]]))},{}),A=s.reduce(function(r,n){return xI(xI({},r),{},xU({},n,{from:e[n],velocity:0,to:t[n]}))},{}),c=-1,d=function(){return null};return d=r.isStepper?function(n){o||(o=n);var i=(n-o)/r.dt;A=xD(r,A,i),a(xI(xI(xI({},e),t),xb(function(e,t){return t.from},A))),o=n,Object.values(A).filter(xT).length&&(c=requestAnimationFrame(d))}:function(o){i||(i=o);var s=(o-i)/n,A=xb(function(e,t){return xQ.apply(void 0,xO(t).concat([r(s)]))},l);if(a(xI(xI(xI({},e),t),A)),s<1)c=requestAnimationFrame(d);else{var u=xb(function(e,t){return xQ.apply(void 0,xO(t).concat([r(1)]))},l);a(xI(xI(xI({},e),t),u))}},function(){return requestAnimationFrame(d),function(){cancelAnimationFrame(c)}}};function xH(e){return(xH="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var xR=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function xK(e){return function(e){if(Array.isArray(e))return xV(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return xV(e,void 0);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return xV(e,void 0)}}(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function xV(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function xq(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function xG(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?xq(Object(r),!0).forEach(function(t){xz(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):xq(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function xz(e,t,r){return(t=xW(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function xW(e){var t=function(e,t){if("object"!==xH(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==xH(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===xH(t)?t:String(t)}function x$(e,t){return(x$=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function xX(e,t){if(t&&("object"===xH(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return xY(e)}function xY(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function xJ(e){return(xJ=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var xZ=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&x$(e,t)}(a,e);var t,r,n=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=xJ(a);return e=t?Reflect.construct(r,arguments,xJ(this).constructor):r.apply(this,arguments),xX(this,e)});function a(e,t){!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,a);var r,o=(r=n.call(this,e,t)).props,i=o.isActive,s=o.attributeName,l=o.from,A=o.to,c=o.steps,d=o.children,u=o.duration;if(r.handleStyleChange=r.handleStyleChange.bind(xY(r)),r.changeStyle=r.changeStyle.bind(xY(r)),!i||u<=0)return r.state={style:{}},"function"==typeof d&&(r.state={style:A}),xX(r);if(c&&c.length)r.state={style:c[0].style};else if(l){if("function"==typeof d)return r.state={style:l},xX(r);r.state={style:s?xz({},s,l):l}}else r.state={style:{}};return r}return r=[{key:"componentDidMount",value:function(){var e=this.props,t=e.isActive,r=e.canBegin;this.mounted=!0,t&&r&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(e){var t=this.props,r=t.isActive,n=t.canBegin,a=t.attributeName,o=t.shouldReAnimate,i=t.to,s=t.from,l=this.state.style;if(n){if(!r){var A={style:a?xz({},a,i):i};this.state&&l&&(a&&l[a]!==i||!a&&l!==i)&&this.setState(A);return}if(!xA(e.to,i)||!e.canBegin||!e.isActive){var c=!e.canBegin||!e.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var d=c||o?s:e.to;if(this.state&&l){var u={style:a?xz({},a,d):d};(a&&l[a]!==d||!a&&l!==d)&&this.setState(u)}this.runAnimation(xG(xG({},this.props),{},{from:d,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var e=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),e&&e()}},{key:"handleStyleChange",value:function(e){this.changeStyle(e)}},{key:"changeStyle",value:function(e){this.mounted&&this.setState({style:e})}},{key:"runJSAnimation",value:function(e){var t=this,r=e.from,n=e.to,a=e.duration,o=e.easing,i=e.begin,s=e.onAnimationEnd,l=e.onAnimationStart,A=xM(r,n,xF(o),a,this.changeStyle);this.manager.start([l,i,function(){t.stopJSAnimation=A()},a,s])}},{key:"runStepAnimation",value:function(e){var t=this,r=e.steps,n=e.begin,a=e.onAnimationStart,o=r[0],i=o.style,s=o.duration;return this.manager.start([a].concat(xK(r.reduce(function(e,n,a){if(0===a)return e;var o=n.duration,i=n.easing,s=void 0===i?"ease":i,l=n.style,A=n.properties,c=n.onAnimationEnd,d=a>0?r[a-1]:n,u=A||Object.keys(l);if("function"==typeof s||"spring"===s)return[].concat(xK(e),[t.runJSAnimation.bind(t,{from:d.style,to:l,duration:o,easing:s}),o]);var h=xy(u,o,s),f=xG(xG(xG({},d.style),l),{},{transition:h});return[].concat(xK(e),[f,o,c]).filter(xx)},[i,Math.max(void 0===s?0:s,n)])),[e.onAnimationEnd]))}},{key:"runAnimation",value:function(e){if(!this.manager){var t,r,n;this.manager=(t=function(){return null},r=!1,n=function e(n){if(!r){if(Array.isArray(n)){if(!n.length)return;var a=function(e){if(Array.isArray(e))return e}(n)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(n)||function(e,t){if(e){if("string"==typeof e)return xh(e,void 0);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return xh(e,void 0)}}(n)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),o=a[0],i=a.slice(1);if("number"==typeof o){xd(e.bind(null,i),o);return}e(o),xd(e.bind(null,i));return}"object"===xu(n)&&t(n),"function"==typeof n&&n()}},{stop:function(){r=!0},start:function(e){r=!1,n(e)},subscribe:function(e){return t=e,function(){t=function(){return null}}}})}var a=e.begin,o=e.duration,i=e.attributeName,s=e.to,l=e.easing,A=e.onAnimationStart,c=e.onAnimationEnd,d=e.steps,u=e.children,h=this.manager;if(this.unSubscribe=h.subscribe(this.handleStyleChange),"function"==typeof l||"function"==typeof u||"spring"===l){this.runJSAnimation(e);return}if(d.length>1){this.runStepAnimation(e);return}var f=i?xz({},i,s):s,p=xy(Object.keys(f),o,l);h.start([A,a,xG(xG({},f),{},{transition:p}),o,c])}},{key:"render",value:function(){var e=this.props,t=e.children,r=(e.begin,e.duration),n=(e.attributeName,e.easing,e.isActive),a=(e.steps,e.from,e.to,e.canBegin,e.onAnimationEnd,e.shouldReAnimate,e.onAnimationReStart,function(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}(e,xR)),o=g.Children.count(t),i=this.state.style;if("function"==typeof t)return t(i);if(!n||0===o||r<=0)return t;var s=function(e){var t=e.props,r=t.style,n=t.className;return(0,g.cloneElement)(e,xG(xG({},a),{},{style:xG(xG({},void 0===r?{}:r),i),className:n}))};return 1===o?s(g.Children.only(t)):x().createElement("div",null,g.Children.map(t,function(e){return s(e)}))}}],function(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,xW(n.key),n)}}(a.prototype,r),Object.defineProperty(a,"prototype",{writable:!1}),a}(g.PureComponent);function x0(e){return(x0="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function x1(){return(x1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function x2(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function x5(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function x4(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?x5(Object(r),!0).forEach(function(t){var n,a;n=t,a=r[t],(n=function(e){var t=function(e,t){if("object"!=x0(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=x0(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==x0(t)?t:t+""}(n))in e?Object.defineProperty(e,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[n]=a}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):x5(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}xZ.displayName="Animate",xZ.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}},xZ.propTypes={from:gq().oneOfType([gq().object,gq().string]),to:gq().oneOfType([gq().object,gq().string]),attributeName:gq().string,duration:gq().number,begin:gq().number,easing:gq().oneOfType([gq().string,gq().func]),steps:gq().arrayOf(gq().shape({duration:gq().number.isRequired,style:gq().object.isRequired,easing:gq().oneOfType([gq().oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),gq().func]),properties:gq().arrayOf("string"),onAnimationEnd:gq().func})),children:gq().oneOfType([gq().node,gq().func]),isActive:gq().bool,canBegin:gq().bool,onAnimationEnd:gq().func,shouldReAnimate:gq().bool,onAnimationStart:gq().func,onAnimationReStart:gq().func};var x3=function(e,t,r,n,a){var o,i=Math.min(Math.abs(r)/2,Math.abs(n)/2),s=n>=0?1:-1,l=r>=0?1:-1,A=n>=0&&r>=0||n<0&&r<0?1:0;if(i>0&&a instanceof Array){for(var c=[0,0,0,0],d=0;d<4;d++)c[d]=a[d]>i?i:a[d];o="M".concat(e,",").concat(t+s*c[0]),c[0]>0&&(o+="A ".concat(c[0],",").concat(c[0],",0,0,").concat(A,",").concat(e+l*c[0],",").concat(t)),o+="L ".concat(e+r-l*c[1],",").concat(t),c[1]>0&&(o+="A ".concat(c[1],",").concat(c[1],",0,0,").concat(A,",\n        ").concat(e+r,",").concat(t+s*c[1])),o+="L ".concat(e+r,",").concat(t+n-s*c[2]),c[2]>0&&(o+="A ".concat(c[2],",").concat(c[2],",0,0,").concat(A,",\n        ").concat(e+r-l*c[2],",").concat(t+n)),o+="L ".concat(e+l*c[3],",").concat(t+n),c[3]>0&&(o+="A ".concat(c[3],",").concat(c[3],",0,0,").concat(A,",\n        ").concat(e,",").concat(t+n-s*c[3])),o+="Z"}else if(i>0&&a===+a&&a>0){var u=Math.min(i,a);o="M ".concat(e,",").concat(t+s*u,"\n            A ").concat(u,",").concat(u,",0,0,").concat(A,",").concat(e+l*u,",").concat(t,"\n            L ").concat(e+r-l*u,",").concat(t,"\n            A ").concat(u,",").concat(u,",0,0,").concat(A,",").concat(e+r,",").concat(t+s*u,"\n            L ").concat(e+r,",").concat(t+n-s*u,"\n            A ").concat(u,",").concat(u,",0,0,").concat(A,",").concat(e+r-l*u,",").concat(t+n,"\n            L ").concat(e+l*u,",").concat(t+n,"\n            A ").concat(u,",").concat(u,",0,0,").concat(A,",").concat(e,",").concat(t+n-s*u," Z")}else o="M ".concat(e,",").concat(t," h ").concat(r," v ").concat(n," h ").concat(-r," Z");return o},x6=function(e,t){if(!e||!t)return!1;var r=e.x,n=e.y,a=t.x,o=t.y,i=t.width,s=t.height;if(Math.abs(i)>0&&Math.abs(s)>0){var l=Math.min(a,a+i),A=Math.max(a,a+i),c=Math.min(o,o+s),d=Math.max(o,o+s);return r>=l&&r<=A&&n>=c&&n<=d}return!1},x8={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},x7=function(e){var t,r=x4(x4({},x8),e),n=(0,g.useRef)(),a=function(e){if(Array.isArray(e))return e}(t=(0,g.useState)(-1))||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o,i,s=[],l=!0,A=!1;try{for(o=(r=r.call(e)).next;!(l=(n=o.call(r)).done)&&(s.push(n.value),2!==s.length);l=!0);}catch(e){A=!0,a=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(A)throw a}}return s}}(t,2)||function(e,t){if(e){if("string"==typeof e)return x2(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return x2(e,2)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),o=a[0],i=a[1];(0,g.useEffect)(function(){if(n.current&&n.current.getTotalLength)try{var e=n.current.getTotalLength();e&&i(e)}catch(e){}},[]);var s=r.x,l=r.y,A=r.width,c=r.height,d=r.radius,u=r.className,h=r.animationEasing,f=r.animationDuration,p=r.animationBegin,m=r.isAnimationActive,b=r.isUpdateAnimationActive;if(s!==+s||l!==+l||A!==+A||c!==+c||0===A||0===c)return null;var y=Af("recharts-rectangle",u);return b?x().createElement(xZ,{canBegin:o>0,from:{width:A,height:c,x:s,y:l},to:{width:A,height:c,x:s,y:l},duration:f,animationEasing:h,isActive:b},function(e){var t=e.width,a=e.height,i=e.x,s=e.y;return x().createElement(xZ,{canBegin:o>0,from:"0px ".concat(-1===o?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:p,duration:f,isActive:m,easing:h},x().createElement("path",x1({},ce(r,!0),{className:y,d:x3(i,s,t,a,d),ref:n})))}):x().createElement("path",x1({},ce(r,!0),{className:y,d:x3(s,l,A,c,d)}))};function x9(e){return(x9="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function be(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function bt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?be(Object(r),!0).forEach(function(t){var n,a;n=t,a=r[t],(n=function(e){var t=function(e,t){if("object"!=x9(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=x9(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==x9(t)?t:t+""}(n))in e?Object.defineProperty(e,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[n]=a}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):be(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var br={widthCache:{},cacheCount:0},bn={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},ba="recharts_measurement_span",bo=function(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(null==e||gO.isSsr)return{width:0,height:0};var n=(Object.keys(t=bt({},r)).forEach(function(e){t[e]||delete t[e]}),t),a=JSON.stringify({text:e,copyStyle:n});if(br.widthCache[a])return br.widthCache[a];try{var o=document.getElementById(ba);o||((o=document.createElement("span")).setAttribute("id",ba),o.setAttribute("aria-hidden","true"),document.body.appendChild(o));var i=bt(bt({},bn),n);Object.assign(o.style,i),o.textContent="".concat(e);var s=o.getBoundingClientRect(),l={width:s.width,height:s.height};return br.widthCache[a]=l,++br.cacheCount>2e3&&(br.cacheCount=0,br.widthCache={}),l}catch(e){return{width:0,height:0}}};function bi(e){return(bi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function bs(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o,i,s=[],l=!0,A=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=o.call(r)).done)&&(s.push(n.value),s.length!==t);l=!0);}catch(e){A=!0,a=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(A)throw a}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return bl(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return bl(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function bl(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function bA(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){var t=function(e,t){if("object"!=bi(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=bi(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==bi(t)?t:t+""}(n.key),n)}}var bc=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,bd=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,bu=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,bh=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,bf={cm:96/2.54,mm:96/25.4,pt:96/72,pc:16,in:96,Q:96/101.6,px:1},bp=Object.keys(bf),bm=function(){var e,t;function r(e,t){(function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")})(this,r),this.num=e,this.unit=t,this.num=e,this.unit=t,Number.isNaN(e)&&(this.unit=""),""===t||bu.test(t)||(this.num=NaN,this.unit=""),bp.includes(t)&&(this.num=e*bf[t],this.unit="px")}return e=[{key:"add",value:function(e){return this.unit!==e.unit?new r(NaN,""):new r(this.num+e.num,this.unit)}},{key:"subtract",value:function(e){return this.unit!==e.unit?new r(NaN,""):new r(this.num-e.num,this.unit)}},{key:"multiply",value:function(e){return""!==this.unit&&""!==e.unit&&this.unit!==e.unit?new r(NaN,""):new r(this.num*e.num,this.unit||e.unit)}},{key:"divide",value:function(e){return""!==this.unit&&""!==e.unit&&this.unit!==e.unit?new r(NaN,""):new r(this.num/e.num,this.unit||e.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],t=[{key:"parse",value:function(e){var t,n=bs(null!==(t=bh.exec(e))&&void 0!==t?t:[],3),a=n[1],o=n[2];return new r(parseFloat(a),null!=o?o:"")}}],e&&bA(r.prototype,e),t&&bA(r,t),Object.defineProperty(r,"prototype",{writable:!1}),r}();function bg(e){if(e.includes("NaN"))return"NaN";for(var t=e;t.includes("*")||t.includes("/");){var r,n=bs(null!==(r=bc.exec(t))&&void 0!==r?r:[],4),a=n[1],o=n[2],i=n[3],s=bm.parse(null!=a?a:""),l=bm.parse(null!=i?i:""),A="*"===o?s.multiply(l):s.divide(l);if(A.isNaN())return"NaN";t=t.replace(bc,A.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var c,d=bs(null!==(c=bd.exec(t))&&void 0!==c?c:[],4),u=d[1],h=d[2],f=d[3],p=bm.parse(null!=u?u:""),m=bm.parse(null!=f?f:""),g="+"===h?p.add(m):p.subtract(m);if(g.isNaN())return"NaN";t=t.replace(bd,g.toString())}return t}var bx=/\(([^()]*)\)/;function bb(e){var t=function(e){try{var t;return t=e.replace(/\s+/g,""),t=function(e){for(var t=e;t.includes("(");){var r=bs(bx.exec(t),2)[1];t=t.replace(bx,bg(r))}return t}(t),t=bg(t)}catch(e){return"NaN"}}(e.slice(5,-1));return"NaN"===t?"":t}var by=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],bv=["dx","dy","angle","className","breakAll"];function bw(){return(bw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function bk(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function bB(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o,i,s=[],l=!0,A=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=o.call(r)).done)&&(s.push(n.value),s.length!==t);l=!0);}catch(e){A=!0,a=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(A)throw a}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return bj(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return bj(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function bj(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var bC=/[ \f\n\r\t\v\u2028\u2029]+/,bN=function(e){var t=e.children,r=e.breakAll,n=e.style;try{var a=[];Ax()(t)||(a=r?t.toString().split(""):t.toString().split(bC));var o=a.map(function(e){return{word:e,width:bo(e,n).width}}),i=r?0:bo("\xa0",n).width;return{wordsWithComputedWidth:o,spaceWidth:i}}catch(e){return null}},bS=function(e,t,r,n,a){var o,i=e.maxLines,s=e.children,l=e.style,A=e.breakAll,c=AP(i),d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.reduce(function(e,t){var o=t.word,i=t.width,s=e[e.length-1];return s&&(null==n||a||s.width+i+r<Number(n))?(s.words.push(o),s.width+=i+r):e.push({words:[o],width:i}),e},[])},u=d(t);if(!c)return u;for(var h=function(e){var t=d(bN({breakAll:A,style:l,children:s.slice(0,e)+""}).wordsWithComputedWidth);return[t.length>i||t.reduce(function(e,t){return e.width>t.width?e:t}).width>Number(n),t]},f=0,p=s.length-1,m=0;f<=p&&m<=s.length-1;){var g=Math.floor((f+p)/2),x=bB(h(g-1),2),b=x[0],y=x[1],v=bB(h(g),1)[0];if(b||v||(f=g+1),b&&v&&(p=g-1),!b&&v){o=y;break}m++}return o||u},bF=function(e){return[{words:Ax()(e)?[]:e.toString().split(bC)}]},bE=function(e){var t=e.width,r=e.scaleToFit,n=e.children,a=e.style,o=e.breakAll,i=e.maxLines;if((t||r)&&!gO.isSsr){var s=bN({breakAll:o,children:n,style:a});return s?bS({breakAll:o,children:n,maxLines:i,style:a},s.wordsWithComputedWidth,s.spaceWidth,t,r):bF(n)}return bF(n)},bO="#808080",bP=function(e){var t,r=e.x,n=void 0===r?0:r,a=e.y,o=void 0===a?0:a,i=e.lineHeight,s=void 0===i?"1em":i,l=e.capHeight,A=void 0===l?"0.71em":l,c=e.scaleToFit,d=void 0!==c&&c,u=e.textAnchor,h=e.verticalAnchor,f=e.fill,p=void 0===f?bO:f,m=bk(e,by),b=(0,g.useMemo)(function(){return bE({breakAll:m.breakAll,children:m.children,maxLines:m.maxLines,scaleToFit:d,style:m.style,width:m.width})},[m.breakAll,m.children,m.maxLines,d,m.style,m.width]),y=m.dx,v=m.dy,w=m.angle,k=m.className,B=m.breakAll,j=bk(m,bv);if(!AI(n)||!AI(o))return null;var C=n+(AP(y)?y:0),N=o+(AP(v)?v:0);switch(void 0===h?"end":h){case"start":t=bb("calc(".concat(A,")"));break;case"middle":t=bb("calc(".concat((b.length-1)/2," * -").concat(s," + (").concat(A," / 2))"));break;default:t=bb("calc(".concat(b.length-1," * -").concat(s,")"))}var S=[];if(d){var F=b[0].width,E=m.width;S.push("scale(".concat((AP(E)?E/F:1)/F,")"))}return w&&S.push("rotate(".concat(w,", ").concat(C,", ").concat(N,")")),S.length&&(j.transform=S.join(" ")),x().createElement("text",bw({},ce(j,!0),{x:C,y:N,className:Af("recharts-text",k),textAnchor:void 0===u?"start":u,fill:p.includes("url")?bO:p}),b.map(function(e,r){var n=e.words.join(B?"":" ");return x().createElement("tspan",{x:C,dy:0===r?t:s,key:"".concat(n,"-").concat(r)},n)}))};function bI(e){return(bI="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function bU(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function bL(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?bU(Object(r),!0).forEach(function(t){b_(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):bU(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function b_(e,t,r){var n;return(n=function(e,t){if("object"!=bI(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=bI(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==bI(n)?n:n+"")in e)?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var bQ=["Webkit","Moz","O","ms"],bT=function(e,t){if(!e)return null;var r=e.replace(/(\w)/,function(e){return e.toUpperCase()}),n=bQ.reduce(function(e,n){return bL(bL({},e),{},b_({},n+r,t))},{});return n[e]=t,n};function bD(e){return(bD="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function bM(){return(bM=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function bH(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function bR(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?bH(Object(r),!0).forEach(function(t){bz(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):bH(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function bK(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,bW(n.key),n)}}function bV(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(bV=function(){return!!e})()}function bq(e){return(bq=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function bG(e,t){return(bG=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function bz(e,t,r){return(t=bW(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function bW(e){var t=function(e,t){if("object"!=bD(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=bD(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==bD(t)?t:t+""}var b$=function(e){var t=e.data,r=e.startIndex,n=e.endIndex,a=e.x,o=e.width,i=e.travellerWidth;if(!t||!t.length)return{};var s=t.length,l=ch().domain(gA()(0,s)).range([a,a+o-i]),A=l.domain().map(function(e){return l(e)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:l(r),endX:l(n),scale:l,scaleValues:A}},bX=function(e){return e.changedTouches&&!!e.changedTouches.length},bY=function(e){var t,r;function n(e){var t,r,a;return function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,n),r=n,a=[e],r=bq(r),bz(t=function(e,t){if(t&&("object"===bD(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,bV()?Reflect.construct(r,a||[],bq(this).constructor):r.apply(this,a)),"handleDrag",function(e){t.leaveTimer&&(clearTimeout(t.leaveTimer),t.leaveTimer=null),t.state.isTravellerMoving?t.handleTravellerMove(e):t.state.isSlideMoving&&t.handleSlideDrag(e)}),bz(t,"handleTouchMove",function(e){null!=e.changedTouches&&e.changedTouches.length>0&&t.handleDrag(e.changedTouches[0])}),bz(t,"handleDragEnd",function(){t.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var e=t.props,r=e.endIndex,n=e.onDragEnd,a=e.startIndex;null==n||n({endIndex:r,startIndex:a})}),t.detachDragEndListener()}),bz(t,"handleLeaveWrapper",function(){(t.state.isTravellerMoving||t.state.isSlideMoving)&&(t.leaveTimer=window.setTimeout(t.handleDragEnd,t.props.leaveTimeOut))}),bz(t,"handleEnterSlideOrTraveller",function(){t.setState({isTextActive:!0})}),bz(t,"handleLeaveSlideOrTraveller",function(){t.setState({isTextActive:!1})}),bz(t,"handleSlideDragStart",function(e){var r=bX(e)?e.changedTouches[0]:e;t.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:r.pageX}),t.attachDragEndListener()}),t.travellerDragStartHandlers={startX:t.handleTravellerDragStart.bind(t,"startX"),endX:t.handleTravellerDragStart.bind(t,"endX")},t.state={},t}return function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&bG(e,t)}(n,e),t=[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(e){var t=e.startX,r=e.endX,a=this.state.scaleValues,o=this.props,i=o.gap,s=o.data.length-1,l=n.getIndexInRange(a,Math.min(t,r)),A=n.getIndexInRange(a,Math.max(t,r));return{startIndex:l-l%i,endIndex:A===s?s:A-A%i}}},{key:"getTextOfTick",value:function(e){var t=this.props,r=t.data,n=t.tickFormatter,a=t.dataKey,o=mA(r[e],a,e);return Aw()(n)?n(o,e):o}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(e){var t=this.state,r=t.slideMoveStartX,n=t.startX,a=t.endX,o=this.props,i=o.x,s=o.width,l=o.travellerWidth,A=o.startIndex,c=o.endIndex,d=o.onChange,u=e.pageX-r;u>0?u=Math.min(u,i+s-l-a,i+s-l-n):u<0&&(u=Math.max(u,i-n,i-a));var h=this.getIndex({startX:n+u,endX:a+u});(h.startIndex!==A||h.endIndex!==c)&&d&&d(h),this.setState({startX:n+u,endX:a+u,slideMoveStartX:e.pageX})}},{key:"handleTravellerDragStart",value:function(e,t){var r=bX(t)?t.changedTouches[0]:t;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:e,brushMoveStartX:r.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(e){var t=this.state,r=t.brushMoveStartX,n=t.movingTravellerId,a=t.endX,o=t.startX,i=this.state[n],s=this.props,l=s.x,A=s.width,c=s.travellerWidth,d=s.onChange,u=s.gap,h=s.data,f={startX:this.state.startX,endX:this.state.endX},p=e.pageX-r;p>0?p=Math.min(p,l+A-c-i):p<0&&(p=Math.max(p,l-i)),f[n]=i+p;var m=this.getIndex(f),g=m.startIndex,x=m.endIndex,b=function(){var e=h.length-1;return"startX"===n&&(a>o?g%u==0:x%u==0)||a<o&&x===e||"endX"===n&&(a>o?x%u==0:g%u==0)||a>o&&x===e};this.setState(bz(bz({},n,i+p),"brushMoveStartX",e.pageX),function(){d&&b()&&d(m)})}},{key:"handleTravellerMoveKeyboard",value:function(e,t){var r=this,n=this.state,a=n.scaleValues,o=n.startX,i=n.endX,s=this.state[t],l=a.indexOf(s);if(-1!==l){var A=l+e;if(-1!==A&&!(A>=a.length)){var c=a[A];"startX"===t&&c>=i||"endX"===t&&c<=o||this.setState(bz({},t,c),function(){r.props.onChange(r.getIndex({startX:r.state.startX,endX:r.state.endX}))})}}}},{key:"renderBackground",value:function(){var e=this.props,t=e.x,r=e.y,n=e.width,a=e.height,o=e.fill,i=e.stroke;return x().createElement("rect",{stroke:i,fill:o,x:t,y:r,width:n,height:a})}},{key:"renderPanorama",value:function(){var e=this.props,t=e.x,r=e.y,n=e.width,a=e.height,o=e.data,i=e.children,s=e.padding,l=g.Children.only(i);return l?x().cloneElement(l,{x:t,y:r,width:n,height:a,margin:s,compact:!0,data:o}):null}},{key:"renderTravellerLayer",value:function(e,t){var r,a,o=this,i=this.props,s=i.y,l=i.travellerWidth,A=i.height,c=i.traveller,d=i.ariaLabel,u=i.data,h=i.startIndex,f=i.endIndex,p=Math.max(e,this.props.x),m=bR(bR({},ce(this.props,!1)),{},{x:p,y:s,width:l,height:A}),g=d||"Min value: ".concat(null===(r=u[h])||void 0===r?void 0:r.name,", Max value: ").concat(null===(a=u[f])||void 0===a?void 0:a.name);return x().createElement(f4,{tabIndex:0,role:"slider","aria-label":g,"aria-valuenow":e,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[t],onTouchStart:this.travellerDragStartHandlers[t],onKeyDown:function(e){["ArrowLeft","ArrowRight"].includes(e.key)&&(e.preventDefault(),e.stopPropagation(),o.handleTravellerMoveKeyboard("ArrowRight"===e.key?1:-1,t))},onFocus:function(){o.setState({isTravellerFocused:!0})},onBlur:function(){o.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},n.renderTraveller(c,m))}},{key:"renderSlide",value:function(e,t){var r=this.props,n=r.y,a=r.height,o=r.stroke,i=r.travellerWidth;return x().createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:o,fillOpacity:.2,x:Math.min(e,t)+i,y:n,width:Math.max(Math.abs(t-e)-i,0),height:a})}},{key:"renderText",value:function(){var e=this.props,t=e.startIndex,r=e.endIndex,n=e.y,a=e.height,o=e.travellerWidth,i=e.stroke,s=this.state,l=s.startX,A=s.endX,c={pointerEvents:"none",fill:i};return x().createElement(f4,{className:"recharts-brush-texts"},x().createElement(bP,bM({textAnchor:"end",verticalAnchor:"middle",x:Math.min(l,A)-5,y:n+a/2},c),this.getTextOfTick(t)),x().createElement(bP,bM({textAnchor:"start",verticalAnchor:"middle",x:Math.max(l,A)+o+5,y:n+a/2},c),this.getTextOfTick(r)))}},{key:"render",value:function(){var e=this.props,t=e.data,r=e.className,n=e.children,a=e.x,o=e.y,i=e.width,s=e.height,l=e.alwaysShowText,A=this.state,c=A.startX,d=A.endX,u=A.isTextActive,h=A.isSlideMoving,f=A.isTravellerMoving,p=A.isTravellerFocused;if(!t||!t.length||!AP(a)||!AP(o)||!AP(i)||!AP(s)||i<=0||s<=0)return null;var m=Af("recharts-brush",r),g=1===x().Children.count(n),b=bT("userSelect","none");return x().createElement(f4,{className:m,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:b},this.renderBackground(),g&&this.renderPanorama(),this.renderSlide(c,d),this.renderTravellerLayer(c,"startX"),this.renderTravellerLayer(d,"endX"),(u||h||f||p||l)&&this.renderText())}}],r=[{key:"renderDefaultTraveller",value:function(e){var t=e.x,r=e.y,n=e.width,a=e.height,o=e.stroke,i=Math.floor(r+a/2)-1;return x().createElement(x().Fragment,null,x().createElement("rect",{x:t,y:r,width:n,height:a,fill:o,stroke:"none"}),x().createElement("line",{x1:t+1,y1:i,x2:t+n-1,y2:i,fill:"none",stroke:"#fff"}),x().createElement("line",{x1:t+1,y1:i+2,x2:t+n-1,y2:i+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(e,t){return x().isValidElement(e)?x().cloneElement(e,t):Aw()(e)?e(t):n.renderDefaultTraveller(t)}},{key:"getDerivedStateFromProps",value:function(e,t){var r=e.data,n=e.width,a=e.x,o=e.travellerWidth,i=e.updateId,s=e.startIndex,l=e.endIndex;if(r!==t.prevData||i!==t.prevUpdateId)return bR({prevData:r,prevTravellerWidth:o,prevUpdateId:i,prevX:a,prevWidth:n},r&&r.length?b$({data:r,width:n,x:a,travellerWidth:o,startIndex:s,endIndex:l}):{scale:null,scaleValues:null});if(t.scale&&(n!==t.prevWidth||a!==t.prevX||o!==t.prevTravellerWidth)){t.scale.range([a,a+n-o]);var A=t.scale.domain().map(function(e){return t.scale(e)});return{prevData:r,prevTravellerWidth:o,prevUpdateId:i,prevX:a,prevWidth:n,startX:t.scale(e.startIndex),endX:t.scale(e.endIndex),scaleValues:A}}return null}},{key:"getIndexInRange",value:function(e,t){for(var r=e.length,n=0,a=r-1;a-n>1;){var o=Math.floor((n+a)/2);e[o]>t?a=o:n=o}return t>=e[a]?a:n}}],t&&bK(n.prototype,t),r&&bK(n,r),Object.defineProperty(n,"prototype",{writable:!1}),n}(g.PureComponent);function bJ(e){return(bJ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}bz(bY,"displayName","Brush"),bz(bY,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var bZ=["offset"];function b0(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function b1(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function b2(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?b1(Object(r),!0).forEach(function(t){var n,a;n=t,a=r[t],(n=function(e){var t=function(e,t){if("object"!=bJ(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=bJ(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==bJ(t)?t:t+""}(n))in e?Object.defineProperty(e,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[n]=a}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):b1(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function b5(){return(b5=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var b4=function(e){var t=e.value,r=e.formatter,n=Ax()(e.children)?t:e.children;return Aw()(r)?r(n):n},b3=function(e,t,r){var n,a,o=e.position,i=e.viewBox,s=e.offset,l=e.className,A=i.cx,c=i.cy,d=i.innerRadius,u=i.outerRadius,h=i.startAngle,f=i.endAngle,p=i.clockWise,m=(d+u)/2,g=AE(f-h)*Math.min(Math.abs(f-h),360),b=g>=0?1:-1;"insideStart"===o?(n=h+b*s,a=p):"insideEnd"===o?(n=f-b*s,a=!p):"end"===o&&(n=f+b*s,a=p),a=g<=0?a:!a;var y=m$(A,c,m,n),v=m$(A,c,m,n+(a?1:-1)*359),w="M".concat(y.x,",").concat(y.y,"\n    A").concat(m,",").concat(m,",0,1,").concat(a?0:1,",\n    ").concat(v.x,",").concat(v.y),k=Ax()(e.id)?AL("recharts-radial-line-"):e.id;return x().createElement("text",b5({},r,{dominantBaseline:"central",className:Af("recharts-radial-bar-label",l)}),x().createElement("defs",null,x().createElement("path",{id:k,d:w})),x().createElement("textPath",{xlinkHref:"#".concat(k)},t))},b6=function(e){var t=e.viewBox,r=e.offset,n=e.position,a=t.cx,o=t.cy,i=t.innerRadius,s=t.outerRadius,l=(t.startAngle+t.endAngle)/2;if("outside"===n){var A=m$(a,o,s+r,l),c=A.x;return{x:c,y:A.y,textAnchor:c>=a?"start":"end",verticalAnchor:"middle"}}if("center"===n)return{x:a,y:o,textAnchor:"middle",verticalAnchor:"middle"};if("centerTop"===n)return{x:a,y:o,textAnchor:"middle",verticalAnchor:"start"};if("centerBottom"===n)return{x:a,y:o,textAnchor:"middle",verticalAnchor:"end"};var d=m$(a,o,(i+s)/2,l);return{x:d.x,y:d.y,textAnchor:"middle",verticalAnchor:"middle"}},b8=function(e){var t=e.viewBox,r=e.parentViewBox,n=e.offset,a=e.position,o=t.x,i=t.y,s=t.width,l=t.height,A=l>=0?1:-1,c=A*n,d=A>0?"end":"start",u=A>0?"start":"end",h=s>=0?1:-1,f=h*n,p=h>0?"end":"start",m=h>0?"start":"end";if("top"===a)return b2(b2({},{x:o+s/2,y:i-A*n,textAnchor:"middle",verticalAnchor:d}),r?{height:Math.max(i-r.y,0),width:s}:{});if("bottom"===a)return b2(b2({},{x:o+s/2,y:i+l+c,textAnchor:"middle",verticalAnchor:u}),r?{height:Math.max(r.y+r.height-(i+l),0),width:s}:{});if("left"===a){var g={x:o-f,y:i+l/2,textAnchor:p,verticalAnchor:"middle"};return b2(b2({},g),r?{width:Math.max(g.x-r.x,0),height:l}:{})}if("right"===a){var x={x:o+s+f,y:i+l/2,textAnchor:m,verticalAnchor:"middle"};return b2(b2({},x),r?{width:Math.max(r.x+r.width-x.x,0),height:l}:{})}var b=r?{width:s,height:l}:{};return"insideLeft"===a?b2({x:o+f,y:i+l/2,textAnchor:m,verticalAnchor:"middle"},b):"insideRight"===a?b2({x:o+s-f,y:i+l/2,textAnchor:p,verticalAnchor:"middle"},b):"insideTop"===a?b2({x:o+s/2,y:i+c,textAnchor:"middle",verticalAnchor:u},b):"insideBottom"===a?b2({x:o+s/2,y:i+l-c,textAnchor:"middle",verticalAnchor:d},b):"insideTopLeft"===a?b2({x:o+f,y:i+c,textAnchor:m,verticalAnchor:u},b):"insideTopRight"===a?b2({x:o+s-f,y:i+c,textAnchor:p,verticalAnchor:u},b):"insideBottomLeft"===a?b2({x:o+f,y:i+l-c,textAnchor:m,verticalAnchor:d},b):"insideBottomRight"===a?b2({x:o+s-f,y:i+l-c,textAnchor:p,verticalAnchor:d},b):AB()(a)&&(AP(a.x)||AO(a.x))&&(AP(a.y)||AO(a.y))?b2({x:o+A_(a.x,s),y:i+A_(a.y,l),textAnchor:"end",verticalAnchor:"end"},b):b2({x:o+s/2,y:i+l/2,textAnchor:"middle",verticalAnchor:"middle"},b)};function b7(e){var t,r=e.offset,n=b2({offset:void 0===r?5:r},function(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}(e,bZ)),a=n.viewBox,o=n.position,i=n.value,s=n.children,l=n.content,A=n.className,c=n.textBreakAll;if(!a||Ax()(i)&&Ax()(s)&&!(0,g.isValidElement)(l)&&!Aw()(l))return null;if((0,g.isValidElement)(l))return(0,g.cloneElement)(l,n);if(Aw()(l)){if(t=(0,g.createElement)(l,n),(0,g.isValidElement)(t))return t}else t=b4(n);var d="cx"in a&&AP(a.cx),u=ce(n,!0);if(d&&("insideStart"===o||"insideEnd"===o||"end"===o))return b3(n,t,u);var h=d?b6(n):b8(n);return x().createElement(bP,b5({className:Af("recharts-label",void 0===A?"":A)},u,h,{breakAll:c}),t)}b7.displayName="Label";var b9=function(e){var t=e.cx,r=e.cy,n=e.angle,a=e.startAngle,o=e.endAngle,i=e.r,s=e.radius,l=e.innerRadius,A=e.outerRadius,c=e.x,d=e.y,u=e.top,h=e.left,f=e.width,p=e.height,m=e.clockWise,g=e.labelViewBox;if(g)return g;if(AP(f)&&AP(p)){if(AP(c)&&AP(d))return{x:c,y:d,width:f,height:p};if(AP(u)&&AP(h))return{x:u,y:h,width:f,height:p}}return AP(c)&&AP(d)?{x:c,y:d,width:0,height:0}:AP(t)&&AP(r)?{cx:t,cy:r,startAngle:a||n||0,endAngle:o||n||0,innerRadius:l||0,outerRadius:A||s||i||0,clockWise:m}:e.viewBox?e.viewBox:{}};b7.parseViewBox=b9,b7.renderCallByParent=function(e,t){var r,n,a=!(arguments.length>2)||void 0===arguments[2]||arguments[2];if(!e||!e.children&&a&&!e.label)return null;var o=e.children,i=b9(e),s=A3(o,b7).map(function(e,r){return(0,g.cloneElement)(e,{viewBox:t||i,key:"label-".concat(r)})});return a?[(r=e.label,n=t||i,r?!0===r?x().createElement(b7,{key:"label-implicit",viewBox:n}):AI(r)?x().createElement(b7,{key:"label-implicit",viewBox:n,value:r}):(0,g.isValidElement)(r)?r.type===b7?(0,g.cloneElement)(r,{key:"label-implicit",viewBox:n}):x().createElement(b7,{key:"label-implicit",content:r,viewBox:n}):Aw()(r)?x().createElement(b7,{key:"label-implicit",content:r,viewBox:n}):AB()(r)?x().createElement(b7,b5({viewBox:n},r,{key:"label-implicit"})):null:null)].concat(function(e){if(Array.isArray(e))return b0(e)}(s)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(s)||function(e,t){if(e){if("string"==typeof e)return b0(e,void 0);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return b0(e,void 0)}}(s)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()):s};var ye=function(e,t){var r=e.alwaysShow,n=e.ifOverflow;return r&&(n="extendDomain"),n===t},yt=r(13880),yr=r.n(yt),yn=r(10853),ya=r.n(yn),yo=function(e){return null};yo.displayName="Cell";var yi=r(90601),ys=r.n(yi);function yl(e){return(yl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var yA=["valueAccessor"],yc=["data","dataKey","clockWise","id","textBreakAll"];function yd(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function yu(){return(yu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function yh(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function yf(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?yh(Object(r),!0).forEach(function(t){var n,a;n=t,a=r[t],(n=function(e){var t=function(e,t){if("object"!=yl(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=yl(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==yl(t)?t:t+""}(n))in e?Object.defineProperty(e,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[n]=a}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):yh(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function yp(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var ym=function(e){return Array.isArray(e.value)?ys()(e.value):e.value};function yg(e){var t=e.valueAccessor,r=void 0===t?ym:t,n=yp(e,yA),a=n.data,o=n.dataKey,i=n.clockWise,s=n.id,l=n.textBreakAll,A=yp(n,yc);return a&&a.length?x().createElement(f4,{className:"recharts-label-list"},a.map(function(e,t){var n=Ax()(o)?r(e,t):mA(e&&e.payload,o),a=Ax()(s)?{}:{id:"".concat(s,"-").concat(t)};return x().createElement(b7,yu({},ce(e,!0),A,a,{parentViewBox:e.parentViewBox,value:n,textBreakAll:l,viewBox:b7.parseViewBox(Ax()(i)?e:yf(yf({},e),{},{clockWise:i})),key:"label-".concat(t),index:t}))})):null}yg.displayName="LabelList",yg.renderCallByParent=function(e,t){var r,n=!(arguments.length>2)||void 0===arguments[2]||arguments[2];if(!e||!e.children&&n&&!e.label)return null;var a=A3(e.children,yg).map(function(e,r){return(0,g.cloneElement)(e,{data:t,key:"labelList-".concat(r)})});return n?[(r=e.label)?!0===r?x().createElement(yg,{key:"labelList-implicit",data:t}):x().isValidElement(r)||Aw()(r)?x().createElement(yg,{key:"labelList-implicit",data:t,content:r}):AB()(r)?x().createElement(yg,yu({data:t},r,{key:"labelList-implicit"})):null:null].concat(function(e){if(Array.isArray(e))return yd(e)}(a)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(a)||function(e,t){if(e){if("string"==typeof e)return yd(e,void 0);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return yd(e,void 0)}}(a)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()):a};var yx=r(36153),yb=r.n(yx),yy=r(99388),yv=r.n(yy);function yw(e){return(yw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function yk(){return(yk=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function yB(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function yj(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function yC(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?yj(Object(r),!0).forEach(function(t){var n,a;n=t,a=r[t],(n=function(e){var t=function(e,t){if("object"!=yw(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=yw(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==yw(t)?t:t+""}(n))in e?Object.defineProperty(e,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[n]=a}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):yj(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var yN=function(e,t,r,n,a){var o=r-n;return"M ".concat(e,",").concat(t)+"L ".concat(e+r,",").concat(t)+"L ".concat(e+r-o/2,",").concat(t+a)+"L ".concat(e+r-o/2-n,",").concat(t+a)+"L ".concat(e,",").concat(t," Z")},yS={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},yF=function(e){var t,r=yC(yC({},yS),e),n=(0,g.useRef)(),a=function(e){if(Array.isArray(e))return e}(t=(0,g.useState)(-1))||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o,i,s=[],l=!0,A=!1;try{for(o=(r=r.call(e)).next;!(l=(n=o.call(r)).done)&&(s.push(n.value),2!==s.length);l=!0);}catch(e){A=!0,a=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(A)throw a}}return s}}(t,2)||function(e,t){if(e){if("string"==typeof e)return yB(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return yB(e,2)}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),o=a[0],i=a[1];(0,g.useEffect)(function(){if(n.current&&n.current.getTotalLength)try{var e=n.current.getTotalLength();e&&i(e)}catch(e){}},[]);var s=r.x,l=r.y,A=r.upperWidth,c=r.lowerWidth,d=r.height,u=r.className,h=r.animationEasing,f=r.animationDuration,p=r.animationBegin,m=r.isUpdateAnimationActive;if(s!==+s||l!==+l||A!==+A||c!==+c||d!==+d||0===A&&0===c||0===d)return null;var b=Af("recharts-trapezoid",u);return m?x().createElement(xZ,{canBegin:o>0,from:{upperWidth:0,lowerWidth:0,height:d,x:s,y:l},to:{upperWidth:A,lowerWidth:c,height:d,x:s,y:l},duration:f,animationEasing:h,isActive:m},function(e){var t=e.upperWidth,a=e.lowerWidth,i=e.height,s=e.x,l=e.y;return x().createElement(xZ,{canBegin:o>0,from:"0px ".concat(-1===o?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:p,duration:f,easing:h},x().createElement("path",yk({},ce(r,!0),{className:b,d:yN(s,l,t,a,i),ref:n})))}):x().createElement("g",null,x().createElement("path",yk({},ce(r,!0),{className:b,d:yN(s,l,A,c,d)})))},yE=["option","shapeType","propTransformer","activeClassName","isActive"];function yO(e){return(yO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function yP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function yI(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?yP(Object(r),!0).forEach(function(t){var n,a;n=t,a=r[t],(n=function(e){var t=function(e,t){if("object"!=yO(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=yO(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==yO(t)?t:t+""}(n))in e?Object.defineProperty(e,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[n]=a}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):yP(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function yU(e){var t=e.shapeType,r=e.elementProps;switch(t){case"rectangle":return x().createElement(x7,r);case"trapezoid":return x().createElement(yF,r);case"sector":return x().createElement(ge,r);case"symbols":if("symbols"===t)return x().createElement(pT,r);break;default:return null}}function yL(e){var t,r=e.option,n=e.shapeType,a=e.propTransformer,o=e.activeClassName,i=e.isActive,s=function(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}(e,yE);if((0,g.isValidElement)(r))t=(0,g.cloneElement)(r,yI(yI({},s),(0,g.isValidElement)(r)?r.props:r));else if(Aw()(r))t=r(s);else if(yb()(r)&&!yv()(r)){var l=(void 0===a?function(e,t){return yI(yI({},t),e)}:a)(r,s);t=x().createElement(yU,{shapeType:n,elementProps:l})}else t=x().createElement(yU,{shapeType:n,elementProps:s});return i?x().createElement(f4,{className:void 0===o?"recharts-active-shape":o},t):t}function y_(e,t){return null!=t&&"trapezoids"in e.props}function yQ(e,t){return null!=t&&"sectors"in e.props}function yT(e,t){return null!=t&&"points"in e.props}function yD(e,t){var r,n,a=e.x===(null==t||null===(r=t.labelViewBox)||void 0===r?void 0:r.x)||e.x===t.x,o=e.y===(null==t||null===(n=t.labelViewBox)||void 0===n?void 0:n.y)||e.y===t.y;return a&&o}function yM(e,t){var r=e.endAngle===t.endAngle,n=e.startAngle===t.startAngle;return r&&n}function yH(e,t){var r=e.x===t.x,n=e.y===t.y,a=e.z===t.z;return r&&n&&a}var yR=["x","y"];function yK(e){return(yK="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function yV(){return(yV=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function yq(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function yG(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?yq(Object(r),!0).forEach(function(t){var n,a;n=t,a=r[t],(n=function(e){var t=function(e,t){if("object"!=yK(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=yK(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==yK(t)?t:t+""}(n))in e?Object.defineProperty(e,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[n]=a}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):yq(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function yz(e,t){var r=e.x,n=e.y,a=function(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}(e,yR),o=parseInt("".concat(r),10),i=parseInt("".concat(n),10),s=parseInt("".concat(t.height||a.height),10),l=parseInt("".concat(t.width||a.width),10);return yG(yG(yG(yG(yG({},t),a),o?{x:o}:{}),i?{y:i}:{}),{},{height:s,width:l,name:t.name,radius:t.radius})}function yW(e){return x().createElement(yL,yV({shapeType:"rectangle",propTransformer:yz,activeClassName:"recharts-active-bar"},e))}var y$=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return function(r,n){if("number"==typeof e)return e;var a=AP(r)||Ax()(r);return a?e(r,n):(a||f1(!1),t)}},yX=["value","background"];function yY(e){return(yY="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function yJ(){return(yJ=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function yZ(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function y0(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?yZ(Object(r),!0).forEach(function(t){y3(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):yZ(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function y1(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,y6(n.key),n)}}function y2(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(y2=function(){return!!e})()}function y5(e){return(y5=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function y4(e,t){return(y4=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function y3(e,t,r){return(t=y6(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function y6(e){var t=function(e,t){if("object"!=yY(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=yY(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==yY(t)?t:t+""}var y8=function(e){var t,r;function n(){!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,n);for(var e,t,r,a=arguments.length,o=Array(a),i=0;i<a;i++)o[i]=arguments[i];return t=n,r=[].concat(o),t=y5(t),y3(e=function(e,t){if(t&&("object"===yY(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,y2()?Reflect.construct(t,r||[],y5(this).constructor):t.apply(this,r)),"state",{isAnimationFinished:!1}),y3(e,"id",AL("recharts-bar-")),y3(e,"handleAnimationEnd",function(){var t=e.props.onAnimationEnd;e.setState({isAnimationFinished:!0}),t&&t()}),y3(e,"handleAnimationStart",function(){var t=e.props.onAnimationStart;e.setState({isAnimationFinished:!1}),t&&t()}),e}return function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&y4(e,t)}(n,e),t=[{key:"renderRectanglesStatically",value:function(e){var t=this,r=this.props,n=r.shape,a=r.dataKey,o=r.activeIndex,i=r.activeBar,s=ce(this.props,!1);return e&&e.map(function(e,r){var l=r===o,A=y0(y0(y0({},s),e),{},{isActive:l,option:l?i:n,index:r,dataKey:a,onAnimationStart:t.handleAnimationStart,onAnimationEnd:t.handleAnimationEnd});return x().createElement(f4,yJ({className:"recharts-bar-rectangle"},A$(t.props,e,r),{key:"rectangle-".concat(null==e?void 0:e.x,"-").concat(null==e?void 0:e.y,"-").concat(null==e?void 0:e.value,"-").concat(r)}),x().createElement(yW,A))})}},{key:"renderRectanglesWithAnimation",value:function(){var e=this,t=this.props,r=t.data,n=t.layout,a=t.isAnimationActive,o=t.animationBegin,i=t.animationDuration,s=t.animationEasing,l=t.animationId,A=this.state.prevData;return x().createElement(xZ,{begin:o,duration:i,isActive:a,easing:s,from:{t:0},to:{t:1},key:"bar-".concat(l),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(t){var a=t.t,o=r.map(function(e,t){var r=A&&A[t];if(r){var o=AD(r.x,e.x),i=AD(r.y,e.y),s=AD(r.width,e.width),l=AD(r.height,e.height);return y0(y0({},e),{},{x:o(a),y:i(a),width:s(a),height:l(a)})}if("horizontal"===n){var c=AD(0,e.height)(a);return y0(y0({},e),{},{y:e.y+e.height-c,height:c})}var d=AD(0,e.width)(a);return y0(y0({},e),{},{width:d})});return x().createElement(f4,null,e.renderRectanglesStatically(o))})}},{key:"renderRectangles",value:function(){var e=this.props,t=e.data,r=e.isAnimationActive,n=this.state.prevData;return r&&t&&t.length&&(!n||!fi()(n,t))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(t)}},{key:"renderBackground",value:function(){var e=this,t=this.props,r=t.data,n=t.dataKey,a=t.activeIndex,o=ce(this.props.background,!1);return r.map(function(t,r){t.value;var i=t.background,s=function(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}(t,yX);if(!i)return null;var l=y0(y0(y0(y0(y0({},s),{},{fill:"#eee"},i),o),A$(e.props,t,r)),{},{onAnimationStart:e.handleAnimationStart,onAnimationEnd:e.handleAnimationEnd,dataKey:n,index:r,className:"recharts-bar-background-rectangle"});return x().createElement(yW,yJ({key:"background-bar-".concat(r),option:e.props.background,isActive:r===a},l))})}},{key:"renderErrorBar",value:function(e,t){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var r=this.props,n=r.data,a=r.xAxis,o=r.yAxis,i=r.layout,s=A3(r.children,pa);if(!s)return null;var l="vertical"===i?n[0].height/2:n[0].width/2,A=function(e,t){var r=Array.isArray(e.value)?e.value[1]:e.value;return{x:e.x,y:e.y,value:r,errorVal:mA(e,t)}};return x().createElement(f4,{clipPath:e?"url(#clipPath-".concat(t,")"):null},s.map(function(e){return x().cloneElement(e,{key:"error-bar-".concat(t,"-").concat(e.props.dataKey),data:n,xAxis:a,yAxis:o,layout:i,offset:l,dataPointFormatter:A})}))}},{key:"render",value:function(){var e=this.props,t=e.hide,r=e.data,n=e.className,a=e.xAxis,o=e.yAxis,i=e.left,s=e.top,l=e.width,A=e.height,c=e.isAnimationActive,d=e.background,u=e.id;if(t||!r||!r.length)return null;var h=this.state.isAnimationFinished,f=Af("recharts-bar",n),p=a&&a.allowDataOverflow,m=o&&o.allowDataOverflow,g=p||m,b=Ax()(u)?this.id:u;return x().createElement(f4,{className:f},p||m?x().createElement("defs",null,x().createElement("clipPath",{id:"clipPath-".concat(b)},x().createElement("rect",{x:p?i:i-l/2,y:m?s:s-A/2,width:p?l:2*l,height:m?A:2*A}))):null,x().createElement(f4,{className:"recharts-bar-rectangles",clipPath:g?"url(#clipPath-".concat(b,")"):null},d?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(g,b),(!c||h)&&yg.renderCallByParent(this.props,r))}}],r=[{key:"getDerivedStateFromProps",value:function(e,t){return e.animationId!==t.prevAnimationId?{prevAnimationId:e.animationId,curData:e.data,prevData:t.curData}:e.data!==t.curData?{curData:e.data}:null}}],t&&y1(n.prototype,t),r&&y1(n,r),Object.defineProperty(n,"prototype",{writable:!1}),n}(g.PureComponent);function y7(e){return(y7="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function y9(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,vn(n.key),n)}}function ve(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function vt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ve(Object(r),!0).forEach(function(t){vr(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ve(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function vr(e,t,r){return(t=vn(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function vn(e){var t=function(e,t){if("object"!=y7(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=y7(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==y7(t)?t:t+""}y3(y8,"displayName","Bar"),y3(y8,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!gO.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"}),y3(y8,"getComposedData",function(e){var t=e.props,r=e.item,n=e.barPosition,a=e.bandSize,o=e.xAxis,i=e.yAxis,s=e.xAxisTicks,l=e.yAxisTicks,A=e.stackedData,c=e.dataStartIndex,d=e.displayedData,u=e.offset,h=mC(n,r);if(!h)return null;var f=t.layout,p=r.type.defaultProps,m=void 0!==p?y0(y0({},p),r.props):r.props,g=m.dataKey,x=m.children,b=m.minPointSize,y="horizontal"===f?i:o,v=A?y.scale.domain():null,w=mU({numericAxis:y}),k=A3(x,yo),B=d.map(function(e,t){A?d=mN(A[c+t],v):Array.isArray(d=mA(e,g))||(d=[w,d]);var n=y$(b,y8.defaultProps.minPointSize)(d[1],t);if("horizontal"===f){var d,u,p,m,x,y,B,j=[i.scale(d[0]),i.scale(d[1])],C=j[0],N=j[1];u=mI({axis:o,ticks:s,bandSize:a,offset:h.offset,entry:e,index:t}),p=null!==(B=null!=N?N:C)&&void 0!==B?B:void 0,m=h.size;var S=C-N;if(x=Number.isNaN(S)?0:S,y={x:u,y:i.y,width:m,height:i.height},Math.abs(n)>0&&Math.abs(x)<Math.abs(n)){var F=AE(x||n)*(Math.abs(n)-Math.abs(x));p-=F,x+=F}}else{var E=[o.scale(d[0]),o.scale(d[1])],O=E[0],P=E[1];if(u=O,p=mI({axis:i,ticks:l,bandSize:a,offset:h.offset,entry:e,index:t}),m=P-O,x=h.size,y={x:o.x,y:p,width:o.width,height:x},Math.abs(n)>0&&Math.abs(m)<Math.abs(n)){var I=AE(m||n)*(Math.abs(n)-Math.abs(m));m+=I}}return y0(y0(y0({},e),{},{x:u,y:p,width:m,height:x,value:A?d:d[1],payload:e,background:y},k&&k[t]&&k[t].props),{},{tooltipPayload:[mR(r,e)],tooltipPosition:{x:u+m/2,y:p+x/2}})});return y0({data:B,layout:f},u)});var va=function(e,t,r,n,a){var o=e.width,i=e.height,s=e.layout,l=e.children,A=Object.keys(t),c={left:r.left,leftMirror:r.left,right:o-r.right,rightMirror:o-r.right,top:r.top,topMirror:r.top,bottom:i-r.bottom,bottomMirror:i-r.bottom},d=!!A6(l,y8);return A.reduce(function(o,i){var l,A,u,h,f,p=t[i],m=p.orientation,g=p.domain,x=p.padding,b=void 0===x?{}:x,y=p.mirror,v=p.reversed,w="".concat(m).concat(y?"Mirror":"");if("number"===p.type&&("gap"===p.padding||"no-gap"===p.padding)){var k=g[1]-g[0],B=1/0,j=p.categoricalDomain.sort(AH);if(j.forEach(function(e,t){t>0&&(B=Math.min((e||0)-(j[t-1]||0),B))}),Number.isFinite(B)){var C=B/k,N="vertical"===p.layout?r.height:r.width;if("gap"===p.padding&&(l=C*N/2),"no-gap"===p.padding){var S=A_(e.barCategoryGap,C*N),F=C*N/2;l=F-S-(F-S)/N*S}}}A="xAxis"===n?[r.left+(b.left||0)+(l||0),r.left+r.width-(b.right||0)-(l||0)]:"yAxis"===n?"horizontal"===s?[r.top+r.height-(b.bottom||0),r.top+(b.top||0)]:[r.top+(b.top||0)+(l||0),r.top+r.height-(b.bottom||0)-(l||0)]:p.range,v&&(A=[A[1],A[0]]);var E=mB(p,a,d),O=E.scale,P=E.realScaleType;O.domain(g).range(A),mj(O);var I=mO(O,vt(vt({},p),{},{realScaleType:P}));"xAxis"===n?(f="top"===m&&!y||"bottom"===m&&y,u=r.left,h=c[w]-f*p.height):"yAxis"===n&&(f="left"===m&&!y||"right"===m&&y,u=c[w]-f*p.width,h=r.top);var U=vt(vt(vt({},p),I),{},{realScaleType:P,x:u,y:h,scale:O,width:"xAxis"===n?r.width:p.width,height:"yAxis"===n?r.height:p.height});return U.bandSize=mM(U,I),p.hide||"xAxis"!==n?p.hide||(c[w]+=(f?-1:1)*U.width):c[w]+=(f?-1:1)*U.height,vt(vt({},o),{},vr({},i,U))},{})},vo=function(e,t){var r=e.x,n=e.y,a=t.x,o=t.y;return{x:Math.min(r,a),y:Math.min(n,o),width:Math.abs(a-r),height:Math.abs(o-n)}},vi=function(){var e,t;function r(e){(function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")})(this,r),this.scale=e}return e=[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.bandAware,n=t.position;if(void 0!==e){if(n)switch(n){case"start":default:return this.scale(e);case"middle":var a=this.bandwidth?this.bandwidth()/2:0;return this.scale(e)+a;case"end":var o=this.bandwidth?this.bandwidth():0;return this.scale(e)+o}if(r){var i=this.bandwidth?this.bandwidth()/2:0;return this.scale(e)+i}return this.scale(e)}}},{key:"isInRange",value:function(e){var t=this.range(),r=t[0],n=t[t.length-1];return r<=n?e>=r&&e<=n:e>=n&&e<=r}}],t=[{key:"create",value:function(e){return new r(e)}}],e&&y9(r.prototype,e),t&&y9(r,t),Object.defineProperty(r,"prototype",{writable:!1}),r}();vr(vi,"EPS",1e-4);var vs=function(e){var t=Object.keys(e).reduce(function(t,r){return vt(vt({},t),{},vr({},r,vi.create(e[r])))},{});return vt(vt({},t),{},{apply:function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.bandAware,a=r.position;return yr()(e,function(e,r){return t[r].apply(e,{bandAware:n,position:a})})},isInRange:function(e){return ya()(e,function(e,r){return t[r].isInRange(e)})}})},vl=function(e){var t=e.width,r=e.height,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=(n%180+180)%180*Math.PI/180,o=Math.atan(r/t);return Math.abs(a>o&&a<Math.PI-o?r/Math.sin(a):t/Math.cos(a))};function vA(){return(vA=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function vc(e){return(vc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function vd(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function vu(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?vd(Object(r),!0).forEach(function(t){vm(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):vd(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function vh(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(vh=function(){return!!e})()}function vf(e){return(vf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function vp(e,t){return(vp=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function vm(e,t,r){return(t=vg(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function vg(e){var t=function(e,t){if("object"!=vc(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=vc(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==vc(t)?t:t+""}var vx=function(e){var t=e.x,r=e.y,n=e.xAxis,a=e.yAxis,o=vs({x:n.scale,y:a.scale}),i=o.apply({x:t,y:r},{bandAware:!0});return ye(e,"discard")&&!o.isInRange(i)?null:i},vb=function(e){var t;function r(){var e,t;return function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,r),e=r,t=arguments,e=vf(e),function(e,t){if(t&&("object"===vc(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,vh()?Reflect.construct(e,t||[],vf(this).constructor):e.apply(this,t))}return function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&vp(e,t)}(r,e),t=[{key:"render",value:function(){var e=this.props,t=e.x,n=e.y,a=e.r,o=e.alwaysShow,i=e.clipPathId,s=AI(t),l=AI(n);if(po(void 0===o,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!s||!l)return null;var A=vx(this.props);if(!A)return null;var c=A.x,d=A.y,u=this.props,h=u.shape,f=u.className,p=vu(vu({clipPath:ye(this.props,"hidden")?"url(#".concat(i,")"):void 0},ce(this.props,!0)),{},{cx:c,cy:d});return x().createElement(f4,{className:Af("recharts-reference-dot",f)},r.renderDot(h,p),b7.renderCallByParent(this.props,{x:c-a,y:d-a,width:2*a,height:2*a}))}}],function(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,vg(n.key),n)}}(r.prototype,t),Object.defineProperty(r,"prototype",{writable:!1}),r}(x().Component);vm(vb,"displayName","ReferenceDot"),vm(vb,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1}),vm(vb,"renderDot",function(e,t){return x().isValidElement(e)?x().cloneElement(e,t):Aw()(e)?e(t):x().createElement(gK,vA({},t,{cx:t.cx,cy:t.cy,className:"recharts-reference-dot-dot"}))});var vy=r(34009),vv=r.n(vy),vw=r(9660),vk=r.n(vw),vB=r(97300),vj=r.n(vB)()(function(e){return{x:e.left,y:e.top,width:e.width,height:e.height}},function(e){return["l",e.left,"t",e.top,"w",e.width,"h",e.height].join("")}),vC=(0,g.createContext)(void 0),vN=(0,g.createContext)(void 0),vS=(0,g.createContext)(void 0),vF=(0,g.createContext)({}),vE=(0,g.createContext)(void 0),vO=(0,g.createContext)(0),vP=(0,g.createContext)(0),vI=function(e){var t=e.state,r=t.xAxisMap,n=t.yAxisMap,a=t.offset,o=e.clipPathId,i=e.children,s=e.width,l=e.height,A=vj(a);return x().createElement(vC.Provider,{value:r},x().createElement(vN.Provider,{value:n},x().createElement(vF.Provider,{value:a},x().createElement(vS.Provider,{value:A},x().createElement(vE.Provider,{value:o},x().createElement(vO.Provider,{value:l},x().createElement(vP.Provider,{value:s},i)))))))},vU=function(e){var t=(0,g.useContext)(vC);null!=t||f1(!1);var r=t[e];return null!=r||f1(!1),r},vL=function(){var e=(0,g.useContext)(vN);return vk()(e,function(e){return ya()(e.domain,Number.isFinite)})||AQ(e)},v_=function(e){var t=(0,g.useContext)(vN);null!=t||f1(!1);var r=t[e];return null!=r||f1(!1),r},vQ=function(){return(0,g.useContext)(vP)},vT=function(){return(0,g.useContext)(vO)};function vD(e){return(vD="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function vM(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(vM=function(){return!!e})()}function vH(e){return(vH=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function vR(e,t){return(vR=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function vK(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function vV(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?vK(Object(r),!0).forEach(function(t){vq(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):vK(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function vq(e,t,r){return(t=vG(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function vG(e){var t=function(e,t){if("object"!=vD(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=vD(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==vD(t)?t:t+""}function vz(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function vW(){return(vW=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var v$=function(e,t,r,n,a,o,i,s,l){var A=a.x,c=a.y,d=a.width,u=a.height;if(r){var h=l.y,f=e.y.apply(h,{position:o});if(ye(l,"discard")&&!e.y.isInRange(f))return null;var p=[{x:A+d,y:f},{x:A,y:f}];return"left"===s?p.reverse():p}if(t){var m=l.x,g=e.x.apply(m,{position:o});if(ye(l,"discard")&&!e.x.isInRange(g))return null;var x=[{x:g,y:c+u},{x:g,y:c}];return"top"===i?x.reverse():x}if(n){var b=l.segment.map(function(t){return e.apply(t,{position:o})});return ye(l,"discard")&&vv()(b,function(t){return!e.isInRange(t)})?null:b}return null};function vX(e){var t,r,n,a=e.x,o=e.y,i=e.segment,s=e.xAxisId,l=e.yAxisId,A=e.shape,c=e.className,d=e.alwaysShow,u=(0,g.useContext)(vE),h=vU(s),f=v_(l),p=(0,g.useContext)(vS);if(!u||!p)return null;po(void 0===d,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var m=v$(vs({x:h.scale,y:f.scale}),AI(a),AI(o),i&&2===i.length,p,e.position,h.orientation,f.orientation,e);if(!m)return null;var b=function(e){if(Array.isArray(e))return e}(m)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o,i,s=[],l=!0,A=!1;try{for(o=(r=r.call(e)).next;!(l=(n=o.call(r)).done)&&(s.push(n.value),2!==s.length);l=!0);}catch(e){A=!0,a=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(A)throw a}}return s}}(m,2)||function(e,t){if(e){if("string"==typeof e)return vz(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return vz(e,2)}}(m,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),y=b[0],v=y.x,w=y.y,k=b[1],B=k.x,j=k.y,C=vV(vV({clipPath:ye(e,"hidden")?"url(#".concat(u,")"):void 0},ce(e,!0)),{},{x1:v,y1:w,x2:B,y2:j});return x().createElement(f4,{className:Af("recharts-reference-line",c)},(t=A,r=C,x().isValidElement(t)?x().cloneElement(t,r):Aw()(t)?t(r):x().createElement("line",vW({},r,{className:"recharts-reference-line-line"}))),b7.renderCallByParent(e,vo({x:(n={x1:v,y1:w,x2:B,y2:j}).x1,y:n.y1},{x:n.x2,y:n.y2})))}var vY=function(e){var t;function r(){var e,t;return function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,r),e=r,t=arguments,e=vH(e),function(e,t){if(t&&("object"===vD(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,vM()?Reflect.construct(e,t||[],vH(this).constructor):e.apply(this,t))}return function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&vR(e,t)}(r,e),t=[{key:"render",value:function(){return x().createElement(vX,this.props)}}],function(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,vG(n.key),n)}}(r.prototype,t),Object.defineProperty(r,"prototype",{writable:!1}),r}(x().Component);function vJ(){return(vJ=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function vZ(e){return(vZ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function v0(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function v1(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?v0(Object(r),!0).forEach(function(t){v3(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):v0(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function v2(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(v2=function(){return!!e})()}function v5(e){return(v5=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function v4(e,t){return(v4=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function v3(e,t,r){return(t=v6(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function v6(e){var t=function(e,t){if("object"!=vZ(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=vZ(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==vZ(t)?t:t+""}vq(vY,"displayName","ReferenceLine"),vq(vY,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});var v8=function(e,t,r,n,a){var o=a.x1,i=a.x2,s=a.y1,l=a.y2,A=a.xAxis,c=a.yAxis;if(!A||!c)return null;var d=vs({x:A.scale,y:c.scale}),u={x:e?d.x.apply(o,{position:"start"}):d.x.rangeMin,y:r?d.y.apply(s,{position:"start"}):d.y.rangeMin},h={x:t?d.x.apply(i,{position:"end"}):d.x.rangeMax,y:n?d.y.apply(l,{position:"end"}):d.y.rangeMax};return!ye(a,"discard")||d.isInRange(u)&&d.isInRange(h)?vo(u,h):null},v7=function(e){var t;function r(){var e,t;return function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,r),e=r,t=arguments,e=v5(e),function(e,t){if(t&&("object"===vZ(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,v2()?Reflect.construct(e,t||[],v5(this).constructor):e.apply(this,t))}return function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&v4(e,t)}(r,e),t=[{key:"render",value:function(){var e=this.props,t=e.x1,n=e.x2,a=e.y1,o=e.y2,i=e.className,s=e.alwaysShow,l=e.clipPathId;po(void 0===s,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var A=AI(t),c=AI(n),d=AI(a),u=AI(o),h=this.props.shape;if(!A&&!c&&!d&&!u&&!h)return null;var f=v8(A,c,d,u,this.props);if(!f&&!h)return null;var p=ye(this.props,"hidden")?"url(#".concat(l,")"):void 0;return x().createElement(f4,{className:Af("recharts-reference-area",i)},r.renderRect(h,v1(v1({clipPath:p},ce(this.props,!0)),f)),b7.renderCallByParent(this.props,f))}}],function(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,v6(n.key),n)}}(r.prototype,t),Object.defineProperty(r,"prototype",{writable:!1}),r}(x().Component);function v9(e){return function(e){if(Array.isArray(e))return we(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return we(e,void 0);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return we(e,void 0)}}(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function we(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}v3(v7,"displayName","ReferenceArea"),v3(v7,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1}),v3(v7,"renderRect",function(e,t){return x().isValidElement(e)?x().cloneElement(e,t):Aw()(e)?e(t):x().createElement(x7,vJ({},t,{className:"recharts-reference-area-rect"}))});var wt=function(e,t,r,n,a){var o=A3(e,vY),i=A3(e,vb),s=[].concat(v9(o),v9(i)),l=A3(e,v7),A="".concat(n,"Id"),c=n[0],d=t;if(s.length&&(d=s.reduce(function(e,t){if(t.props[A]===r&&ye(t.props,"extendDomain")&&AP(t.props[c])){var n=t.props[c];return[Math.min(e[0],n),Math.max(e[1],n)]}return e},d)),l.length){var u="".concat(c,"1"),h="".concat(c,"2");d=l.reduce(function(e,t){if(t.props[A]===r&&ye(t.props,"extendDomain")&&AP(t.props[u])&&AP(t.props[h])){var n=t.props[u],a=t.props[h];return[Math.min(e[0],n,a),Math.max(e[1],n,a)]}return e},d)}return a&&a.length&&(d=a.reduce(function(e,t){return AP(t)?[Math.min(e[0],t),Math.max(e[1],t)]:e},d)),d},wr=r(51028),wn=new(r.n(wr)()),wa="recharts.syncMouseEvents";function wo(e){return(wo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function wi(e,t,r){return(t=ws(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ws(e){var t=function(e,t){if("object"!=wo(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=wo(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==wo(t)?t:t+""}var wl=function(){var e,t;return e=function e(){(function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")})(this,e),wi(this,"activeIndex",0),wi(this,"coordinateList",[]),wi(this,"layout","horizontal")},t=[{key:"setDetails",value:function(e){var t,r=e.coordinateList,n=void 0===r?null:r,a=e.container,o=void 0===a?null:a,i=e.layout,s=void 0===i?null:i,l=e.offset,A=void 0===l?null:l,c=e.mouseHandlerCallback,d=void 0===c?null:c;this.coordinateList=null!==(t=null!=n?n:this.coordinateList)&&void 0!==t?t:[],this.container=null!=o?o:this.container,this.layout=null!=s?s:this.layout,this.offset=null!=A?A:this.offset,this.mouseHandlerCallback=null!=d?d:this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(e){if(0!==this.coordinateList.length)switch(e.key){case"ArrowRight":if("horizontal"!==this.layout)return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break;case"ArrowLeft":if("horizontal"!==this.layout)return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse()}}},{key:"setIndex",value:function(e){this.activeIndex=e}},{key:"spoofMouse",value:function(){if("horizontal"===this.layout&&0!==this.coordinateList.length){var e,t,r=this.container.getBoundingClientRect(),n=r.x,a=r.y,o=r.height,i=this.coordinateList[this.activeIndex].coordinate,s=(null===(e=window)||void 0===e?void 0:e.scrollX)||0,l=(null===(t=window)||void 0===t?void 0:t.scrollY)||0,A=a+this.offset.top+o/2+l;this.mouseHandlerCallback({pageX:n+i+s,pageY:A})}}}],function(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,ws(n.key),n)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}();function wA(){}function wc(e,t,r){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+r)/6)}function wd(e){this._context=e}function wu(e){this._context=e}function wh(e){this._context=e}wd.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:wc(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:wc(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}},wu.prototype={areaStart:wA,areaEnd:wA,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:wc(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}},wh.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+e)/6,n=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:wc(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};class wf{constructor(e,t){this._context=e,this._x=t}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line}point(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,t,e,t):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+t)/2,e,this._y0,e,t)}this._x0=e,this._y0=t}}function wp(e){this._context=e}function wm(e){this._context=e}function wg(e){return new wm(e)}function wx(e,t,r){var n=e._x1-e._x0,a=t-e._x1,o=(e._y1-e._y0)/(n||a<0&&-0),i=(r-e._y1)/(a||n<0&&-0);return((o<0?-1:1)+(i<0?-1:1))*Math.min(Math.abs(o),Math.abs(i),.5*Math.abs((o*a+i*n)/(n+a)))||0}function wb(e,t){var r=e._x1-e._x0;return r?(3*(e._y1-e._y0)/r-t)/2:t}function wy(e,t,r){var n=e._x0,a=e._y0,o=e._x1,i=e._y1,s=(o-n)/3;e._context.bezierCurveTo(n+s,a+s*t,o-s,i-s*r,o,i)}function wv(e){this._context=e}function ww(e){this._context=new wk(e)}function wk(e){this._context=e}function wB(e){this._context=e}function wj(e){var t,r,n=e.length-1,a=Array(n),o=Array(n),i=Array(n);for(a[0]=0,o[0]=2,i[0]=e[0]+2*e[1],t=1;t<n-1;++t)a[t]=1,o[t]=4,i[t]=4*e[t]+2*e[t+1];for(a[n-1]=2,o[n-1]=7,i[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)r=a[t]/o[t-1],o[t]-=r,i[t]-=r*i[t-1];for(a[n-1]=i[n-1]/o[n-1],t=n-2;t>=0;--t)a[t]=(i[t]-a[t+1])/o[t];for(t=0,o[n-1]=(e[n]+a[n-1])/2;t<n-1;++t)o[t]=2*e[t+1]-a[t+1];return[a,o]}function wC(e,t){this._context=e,this._t=t}function wN(e){return e[0]}function wS(e){return e[1]}function wF(e,t){var r=hW(!0),n=null,a=wg,o=null,i=pF(s);function s(s){var l,A,c,d=(s=hz(s)).length,u=!1;for(null==n&&(o=a(c=i())),l=0;l<=d;++l)!(l<d&&r(A=s[l],l,s))===u&&((u=!u)?o.lineStart():o.lineEnd()),u&&o.point(+e(A,l,s),+t(A,l,s));if(c)return o=null,c+""||null}return e="function"==typeof e?e:void 0===e?wN:hW(e),t="function"==typeof t?t:void 0===t?wS:hW(t),s.x=function(t){return arguments.length?(e="function"==typeof t?t:hW(+t),s):e},s.y=function(e){return arguments.length?(t="function"==typeof e?e:hW(+e),s):t},s.defined=function(e){return arguments.length?(r="function"==typeof e?e:hW(!!e),s):r},s.curve=function(e){return arguments.length?(a=e,null!=n&&(o=a(n)),s):a},s.context=function(e){return arguments.length?(null==e?n=o=null:o=a(n=e),s):n},s}function wE(e,t,r){var n=null,a=hW(!0),o=null,i=wg,s=null,l=pF(A);function A(A){var c,d,u,h,f,p=(A=hz(A)).length,m=!1,g=Array(p),x=Array(p);for(null==o&&(s=i(f=l())),c=0;c<=p;++c){if(!(c<p&&a(h=A[c],c,A))===m){if(m=!m)d=c,s.areaStart(),s.lineStart();else{for(s.lineEnd(),s.lineStart(),u=c-1;u>=d;--u)s.point(g[u],x[u]);s.lineEnd(),s.areaEnd()}}m&&(g[c]=+e(h,c,A),x[c]=+t(h,c,A),s.point(n?+n(h,c,A):g[c],r?+r(h,c,A):x[c]))}if(f)return s=null,f+""||null}function c(){return wF().defined(a).curve(i).context(o)}return e="function"==typeof e?e:void 0===e?wN:hW(+e),t="function"==typeof t?t:void 0===t?hW(0):hW(+t),r="function"==typeof r?r:void 0===r?wS:hW(+r),A.x=function(t){return arguments.length?(e="function"==typeof t?t:hW(+t),n=null,A):e},A.x0=function(t){return arguments.length?(e="function"==typeof t?t:hW(+t),A):e},A.x1=function(e){return arguments.length?(n=null==e?null:"function"==typeof e?e:hW(+e),A):n},A.y=function(e){return arguments.length?(t="function"==typeof e?e:hW(+e),r=null,A):t},A.y0=function(e){return arguments.length?(t="function"==typeof e?e:hW(+e),A):t},A.y1=function(e){return arguments.length?(r=null==e?null:"function"==typeof e?e:hW(+e),A):r},A.lineX0=A.lineY0=function(){return c().x(e).y(t)},A.lineY1=function(){return c().x(e).y(r)},A.lineX1=function(){return c().x(n).y(t)},A.defined=function(e){return arguments.length?(a="function"==typeof e?e:hW(!!e),A):a},A.curve=function(e){return arguments.length?(i=e,null!=o&&(s=i(o)),A):i},A.context=function(e){return arguments.length?(null==e?o=s=null:s=i(o=e),A):o},A}function wO(e){return(wO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function wP(){return(wP=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function wI(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function wU(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?wI(Object(r),!0).forEach(function(t){var n,a;n=t,a=r[t],(n=function(e){var t=function(e,t){if("object"!=wO(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=wO(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==wO(t)?t:t+""}(n))in e?Object.defineProperty(e,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[n]=a}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):wI(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}wp.prototype={areaStart:wA,areaEnd:wA,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}},wm.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t)}}},wv.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:wy(this,this._t0,wb(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var r=NaN;if(t=+t,(e=+e)!==this._x1||t!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,wy(this,wb(this,r=wx(this,e,t)),r);break;default:wy(this,this._t0,r=wx(this,e,t))}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=r}}},(ww.prototype=Object.create(wv.prototype)).point=function(e,t){wv.prototype.point.call(this,t,e)},wk.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,r,n,a,o){this._context.bezierCurveTo(t,e,n,r,o,a)}},wB.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,r=e.length;if(r){if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),2===r)this._context.lineTo(e[1],t[1]);else for(var n=wj(e),a=wj(t),o=0,i=1;i<r;++o,++i)this._context.bezierCurveTo(n[0][o],a[0][o],n[1][o],a[1][o],e[i],t[i])}(this._line||0!==this._line&&1===r)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}},wC.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var r=this._x*(1-this._t)+e*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,t)}}this._x=e,this._y=t}};var wL={curveBasisClosed:function(e){return new wu(e)},curveBasisOpen:function(e){return new wh(e)},curveBasis:function(e){return new wd(e)},curveBumpX:function(e){return new wf(e,!0)},curveBumpY:function(e){return new wf(e,!1)},curveLinearClosed:function(e){return new wp(e)},curveLinear:wg,curveMonotoneX:function(e){return new wv(e)},curveMonotoneY:function(e){return new ww(e)},curveNatural:function(e){return new wB(e)},curveStep:function(e){return new wC(e,.5)},curveStepAfter:function(e){return new wC(e,1)},curveStepBefore:function(e){return new wC(e,0)}},w_=function(e){return e.x===+e.x&&e.y===+e.y},wQ=function(e){return e.x},wT=function(e){return e.y},wD=function(e,t){if(Aw()(e))return e;var r="curve".concat(fa()(e));return("curveMonotone"===r||"curveBump"===r)&&t?wL["".concat(r).concat("vertical"===t?"Y":"X")]:wL[r]||wg},wM=function(e){var t,r=e.type,n=e.points,a=void 0===n?[]:n,o=e.baseLine,i=e.layout,s=e.connectNulls,l=void 0!==s&&s,A=wD(void 0===r?"linear":r,i),c=l?a.filter(function(e){return w_(e)}):a;if(Array.isArray(o)){var d=l?o.filter(function(e){return w_(e)}):o,u=c.map(function(e,t){return wU(wU({},e),{},{base:d[t]})});return(t="vertical"===i?wE().y(wT).x1(wQ).x0(function(e){return e.base.x}):wE().x(wQ).y1(wT).y0(function(e){return e.base.y})).defined(w_).curve(A),t(u)}return(t="vertical"===i&&AP(o)?wE().y(wT).x1(wQ).x0(o):AP(o)?wE().x(wQ).y1(wT).y0(o):wF().x(wQ).y(wT)).defined(w_).curve(A),t(c)},wH=function(e){var t=e.className,r=e.points,n=e.path,a=e.pathRef;if((!r||!r.length)&&!n)return null;var o=r&&r.length?wM(e):n;return g.createElement("path",wP({},ce(e,!1),AW(e),{className:Af("recharts-curve",t),d:o,ref:a}))};function wR(e){return(wR="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var wK=["x","y","top","left","width","height","className"];function wV(){return(wV=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function wq(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}var wG=function(e){var t=e.x,r=void 0===t?0:t,n=e.y,a=void 0===n?0:n,o=e.top,i=void 0===o?0:o,s=e.left,l=void 0===s?0:s,A=e.width,c=void 0===A?0:A,d=e.height,u=void 0===d?0:d,h=e.className,f=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?wq(Object(r),!0).forEach(function(t){var n,a;n=t,a=r[t],(n=function(e){var t=function(e,t){if("object"!=wR(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=wR(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==wR(t)?t:t+""}(n))in e?Object.defineProperty(e,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[n]=a}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):wq(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({x:r,y:a,top:i,left:l,width:c,height:u},function(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}(e,wK));return AP(r)&&AP(a)&&AP(c)&&AP(u)&&AP(i)&&AP(l)?x().createElement("path",wV({},ce(f,!0),{className:Af("recharts-cross",h),d:"M".concat(r,",").concat(i,"v").concat(u,"M").concat(l,",").concat(a,"h").concat(c)})):null};function wz(e){var t=e.cx,r=e.cy,n=e.radius,a=e.startAngle,o=e.endAngle;return{points:[m$(t,r,n,a),m$(t,r,n,o)],cx:t,cy:r,radius:n,startAngle:a,endAngle:o}}function wW(e){return(wW="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function w$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function wX(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?w$(Object(r),!0).forEach(function(t){var n,a;n=t,a=r[t],(n=function(e){var t=function(e,t){if("object"!=wW(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=wW(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==wW(t)?t:t+""}(n))in e?Object.defineProperty(e,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[n]=a}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):w$(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function wY(e){var t,r,n,a,o=e.element,i=e.tooltipEventType,s=e.isActive,l=e.activeCoordinate,A=e.activePayload,c=e.offset,d=e.activeTooltipIndex,u=e.tooltipAxisBandSize,h=e.layout,f=e.chartName,p=null!==(r=o.props.cursor)&&void 0!==r?r:null===(n=o.type.defaultProps)||void 0===n?void 0:n.cursor;if(!o||!p||!s||!l||"ScatterChart"!==f&&"axis"!==i)return null;var m=wH;if("ScatterChart"===f)a=l,m=wG;else if("BarChart"===f)t=u/2,a={stroke:"none",fill:"#ccc",x:"horizontal"===h?l.x-t:c.left+.5,y:"horizontal"===h?c.top+.5:l.y-t,width:"horizontal"===h?u:c.width-1,height:"horizontal"===h?c.height-1:u},m=x7;else if("radial"===h){var x=wz(l),b=x.cx,y=x.cy,v=x.radius;a={cx:b,cy:y,startAngle:x.startAngle,endAngle:x.endAngle,innerRadius:v,outerRadius:v},m=ge}else a={points:function(e,t,r){var n,a,o,i;if("horizontal"===e)o=n=t.x,a=r.top,i=r.top+r.height;else if("vertical"===e)i=a=t.y,n=r.left,o=r.left+r.width;else if(null!=t.cx&&null!=t.cy){if("centric"!==e)return wz(t);var s=t.cx,l=t.cy,A=t.innerRadius,c=t.outerRadius,d=t.angle,u=m$(s,l,A,d),h=m$(s,l,c,d);n=u.x,a=u.y,o=h.x,i=h.y}return[{x:n,y:a},{x:o,y:i}]}(h,l,c)},m=wH;var w=wX(wX(wX(wX({stroke:"#ccc",pointerEvents:"none"},c),a),ce(p,!1)),{},{payload:A,payloadIndex:d,className:Af("recharts-tooltip-cursor",p.className)});return(0,g.isValidElement)(p)?(0,g.cloneElement)(p,w):(0,g.createElement)(m,w)}var wJ=["item"],wZ=["children","className","width","height","style","compact","title","desc"];function w0(e){return(w0="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function w1(){return(w1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function w2(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o,i,s=[],l=!0,A=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=o.call(r)).done)&&(s.push(n.value),s.length!==t);l=!0);}catch(e){A=!0,a=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(A)throw a}}return s}}(e,t)||w7(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function w5(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function w4(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(w4=function(){return!!e})()}function w3(e){return(w3=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function w6(e,t){return(w6=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function w8(e){return function(e){if(Array.isArray(e))return w9(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||w7(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function w7(e,t){if(e){if("string"==typeof e)return w9(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return w9(e,t)}}function w9(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function ke(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function kt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ke(Object(r),!0).forEach(function(t){kr(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ke(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function kr(e,t,r){return(t=kn(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function kn(e){var t=function(e,t){if("object"!=w0(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=w0(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==w0(t)?t:t+""}var ka={xAxis:["bottom","top"],yAxis:["left","right"]},ko={width:"100%",height:"100%"},ki={x:0,y:0};function ks(e){return e}var kl=function(e,t,r,n){var a=t.find(function(e){return e&&e.index===r});if(a){if("horizontal"===e)return{x:a.coordinate,y:n.y};if("vertical"===e)return{x:n.x,y:a.coordinate};if("centric"===e){var o=a.coordinate,i=n.radius;return kt(kt(kt({},n),m$(n.cx,n.cy,i,o)),{},{angle:o,radius:i})}var s=a.coordinate,l=n.angle;return kt(kt(kt({},n),m$(n.cx,n.cy,s,l)),{},{angle:l,radius:s})}return ki},kA=function(e,t){var r=t.graphicalItems,n=t.dataStartIndex,a=t.dataEndIndex,o=(null!=r?r:[]).reduce(function(e,t){var r=t.props.data;return r&&r.length?[].concat(w8(e),w8(r)):e},[]);return o.length>0?o:e&&e.length&&AP(n)&&AP(a)?e.slice(n,a+1):[]};function kc(e){return"number"===e?[0,"auto"]:void 0}var kd=function(e,t,r,n){var a=e.graphicalItems,o=e.tooltipAxis,i=kA(t,e);return r<0||!a||!a.length||r>=i.length?null:a.reduce(function(a,s){var l,A,c=null!==(l=s.props.data)&&void 0!==l?l:t;return(c&&e.dataStartIndex+e.dataEndIndex!==0&&e.dataEndIndex-e.dataStartIndex>=r&&(c=c.slice(e.dataStartIndex,e.dataEndIndex+1)),A=o.dataKey&&!o.allowDuplicatedCategory?AM(void 0===c?i:c,o.dataKey,n):c&&c[r]||i[r])?[].concat(w8(a),[mR(s,A)]):a},[])},ku=function(e,t,r,n){var a=n||{x:e.chartX,y:e.chartY},o="horizontal"===r?a.x:"vertical"===r?a.y:"centric"===r?a.angle:a.radius,i=e.orderedTooltipTicks,s=e.tooltipAxis,l=e.tooltipTicks,A=md(o,i,l,s);if(A>=0&&l){var c=l[A]&&l[A].value,d=kd(e,t,A,c),u=kl(r,i,A,a);return{activeTooltipIndex:A,activeLabel:c,activePayload:d,activeCoordinate:u}}return null},kh=function(e,t){var r=t.axes,n=t.graphicalItems,a=t.axisType,o=t.axisIdKey,i=t.stackGroups,s=t.dataStartIndex,l=t.dataEndIndex,A=e.layout,c=e.children,d=e.stackOffset,u=mb(A,a);return r.reduce(function(t,r){var h=void 0!==r.type.defaultProps?kt(kt({},r.type.defaultProps),r.props):r.props,f=h.type,p=h.dataKey,m=h.allowDataOverflow,g=h.allowDuplicatedCategory,x=h.scale,b=h.ticks,y=h.includeHidden,v=h[o];if(t[v])return t;var w=kA(e.data,{graphicalItems:n.filter(function(e){var t;return(o in e.props?e.props[o]:null===(t=e.type.defaultProps)||void 0===t?void 0:t[o])===v}),dataStartIndex:s,dataEndIndex:l}),k=w.length;(function(e,t,r){if("number"===r&&!0===t&&Array.isArray(e)){var n=null==e?void 0:e[0],a=null==e?void 0:e[1];if(n&&a&&AP(n)&&AP(a))return!0}return!1})(h.domain,m,f)&&(C=mD(h.domain,null,m),u&&("number"===f||"auto"!==x)&&(S=mc(w,p,"category")));var B=kc(f);if(!C||0===C.length){var j,C,N,S,F,E=null!==(F=h.domain)&&void 0!==F?F:B;if(p){if(C=mc(w,p,f),"category"===f&&u){var O=AT(C);g&&O?(N=C,C=gA()(0,k)):g||(C=mH(E,C,r).reduce(function(e,t){return e.indexOf(t)>=0?e:[].concat(w8(e),[t])},[]))}else if("category"===f)C=g?C.filter(function(e){return""!==e&&!Ax()(e)}):mH(E,C,r).reduce(function(e,t){return e.indexOf(t)>=0||""===t||Ax()(t)?e:[].concat(w8(e),[t])},[]);else if("number"===f){var P=mg(w,n.filter(function(e){var t,r,n=o in e.props?e.props[o]:null===(t=e.type.defaultProps)||void 0===t?void 0:t[o],a="hide"in e.props?e.props.hide:null===(r=e.type.defaultProps)||void 0===r?void 0:r.hide;return n===v&&(y||!a)}),p,a,A);P&&(C=P)}u&&("number"===f||"auto"!==x)&&(S=mc(w,p,"category"))}else C=u?gA()(0,k):i&&i[v]&&i[v].hasStack&&"number"===f?"expand"===d?[0,1]:m_(i[v].stackGroups,s,l):mx(w,n.filter(function(e){var t=o in e.props?e.props[o]:e.type.defaultProps[o],r="hide"in e.props?e.props.hide:e.type.defaultProps.hide;return t===v&&(y||!r)}),f,A,!0);"number"===f?(C=wt(c,C,v,a,b),E&&(C=mD(E,C,m))):"category"===f&&E&&C.every(function(e){return E.indexOf(e)>=0})&&(C=E)}return kt(kt({},t),{},kr({},v,kt(kt({},h),{},{axisType:a,domain:C,categoricalDomain:S,duplicateDomain:N,originalDomain:null!==(j=h.domain)&&void 0!==j?j:B,isCategorical:u,layout:A})))},{})},kf=function(e,t){var r=t.graphicalItems,n=t.Axis,a=t.axisType,o=t.axisIdKey,i=t.stackGroups,s=t.dataStartIndex,l=t.dataEndIndex,A=e.layout,c=e.children,d=kA(e.data,{graphicalItems:r,dataStartIndex:s,dataEndIndex:l}),u=d.length,h=mb(A,a),f=-1;return r.reduce(function(e,t){var p,m=(void 0!==t.type.defaultProps?kt(kt({},t.type.defaultProps),t.props):t.props)[o],g=kc("number");return e[m]?e:(f++,p=h?gA()(0,u):i&&i[m]&&i[m].hasStack?wt(c,p=m_(i[m].stackGroups,s,l),m,a):wt(c,p=mD(g,mx(d,r.filter(function(e){var t,r,n=o in e.props?e.props[o]:null===(t=e.type.defaultProps)||void 0===t?void 0:t[o],a="hide"in e.props?e.props.hide:null===(r=e.type.defaultProps)||void 0===r?void 0:r.hide;return n===m&&!a}),"number",A),n.defaultProps.allowDataOverflow),m,a),kt(kt({},e),{},kr({},m,kt(kt({axisType:a},n.defaultProps),{},{hide:!0,orientation:Am()(ka,"".concat(a,".").concat(f%2),null),domain:p,originalDomain:g,isCategorical:h,layout:A}))))},{})},kp=function(e,t){var r=t.axisType,n=void 0===r?"xAxis":r,a=t.AxisComp,o=t.graphicalItems,i=t.stackGroups,s=t.dataStartIndex,l=t.dataEndIndex,A=e.children,c="".concat(n,"Id"),d=A3(A,a),u={};return d&&d.length?u=kh(e,{axes:d,graphicalItems:o,axisType:n,axisIdKey:c,stackGroups:i,dataStartIndex:s,dataEndIndex:l}):o&&o.length&&(u=kf(e,{Axis:a,graphicalItems:o,axisType:n,axisIdKey:c,stackGroups:i,dataStartIndex:s,dataEndIndex:l})),u},km=function(e){var t=AQ(e),r=mv(t,!1,!0);return{tooltipTicks:r,orderedTooltipTicks:fl()(r,function(e){return e.coordinate}),tooltipAxis:t,tooltipAxisBandSize:mM(t,r)}},kg=function(e){var t=e.children,r=e.defaultShowTooltip,n=A6(t,bY),a=0,o=0;return e.data&&0!==e.data.length&&(o=e.data.length-1),n&&n.props&&(n.props.startIndex>=0&&(a=n.props.startIndex),n.props.endIndex>=0&&(o=n.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:a,dataEndIndex:o,activeTooltipIndex:-1,isTooltipActive:!!r}},kx=function(e){return"horizontal"===e?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:"vertical"===e?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:"centric"===e?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},kb=function(e,t){var r=e.props,n=e.graphicalItems,a=e.xAxisMap,o=void 0===a?{}:a,i=e.yAxisMap,s=void 0===i?{}:i,l=r.width,A=r.height,c=r.children,d=r.margin||{},u=A6(c,bY),h=A6(c,p7),f=Object.keys(s).reduce(function(e,t){var r=s[t],n=r.orientation;return r.mirror||r.hide?e:kt(kt({},e),{},kr({},n,e[n]+r.width))},{left:d.left||0,right:d.right||0}),p=Object.keys(o).reduce(function(e,t){var r=o[t],n=r.orientation;return r.mirror||r.hide?e:kt(kt({},e),{},kr({},n,Am()(e,"".concat(n))+r.height))},{top:d.top||0,bottom:d.bottom||0}),m=kt(kt({},p),f),g=m.bottom;u&&(m.bottom+=u.props.height||bY.defaultProps.height),h&&t&&(m=mp(m,n,r,t));var x=l-m.left-m.right,b=A-m.top-m.bottom;return kt(kt({brushBottom:g},m),{},{width:Math.max(x,0),height:Math.max(b,0)})},ky=function(e){var t=e.chartName,r=e.GraphicalChild,n=e.defaultTooltipEventType,a=void 0===n?"axis":n,o=e.validateTooltipEventTypes,i=void 0===o?["axis"]:o,s=e.axisComponents,l=e.legendContent,A=e.formatAxisMap,c=e.defaultProps,d=function(e,t){var r=t.graphicalItems,n=t.stackGroups,a=t.offset,o=t.updateId,i=t.dataStartIndex,l=t.dataEndIndex,A=e.barSize,c=e.layout,d=e.barGap,u=e.barCategoryGap,h=e.maxBarSize,f=kx(c),p=f.numericAxisName,m=f.cateAxisName,g=!!r&&!!r.length&&r.some(function(e){var t=A1(e&&e.type);return t&&t.indexOf("Bar")>=0}),x=[];return r.forEach(function(r,f){var b=kA(e.data,{graphicalItems:[r],dataStartIndex:i,dataEndIndex:l}),y=void 0!==r.type.defaultProps?kt(kt({},r.type.defaultProps),r.props):r.props,v=y.dataKey,w=y.maxBarSize,k=y["".concat(p,"Id")],B=y["".concat(m,"Id")],j=s.reduce(function(e,r){var n=t["".concat(r.axisType,"Map")],a=y["".concat(r.axisType,"Id")];n&&n[a]||"zAxis"===r.axisType||f1(!1);var o=n[a];return kt(kt({},e),{},kr(kr({},r.axisType,o),"".concat(r.axisType,"Ticks"),mv(o)))},{}),C=j[m],N=j["".concat(m,"Ticks")],S=n&&n[k]&&n[k].hasStack&&mL(r,n[k].stackGroups),F=A1(r.type).indexOf("Bar")>=0,E=mM(C,N),O=[],P=g&&mh({barSize:A,stackGroups:n,totalSize:"xAxis"===m?j[m].width:"yAxis"===m?j[m].height:void 0});if(F){var I,U,L=Ax()(w)?h:w,_=null!==(I=null!==(U=mM(C,N,!0))&&void 0!==U?U:L)&&void 0!==I?I:0;O=mf({barGap:d,barCategoryGap:u,bandSize:_!==E?_:E,sizeList:P[B],maxBarSize:L}),_!==E&&(O=O.map(function(e){return kt(kt({},e),{},{position:kt(kt({},e.position),{},{offset:e.position.offset-_/2})})}))}var Q=r&&r.type&&r.type.getComposedData;Q&&x.push({props:kt(kt({},Q(kt(kt({},j),{},{displayedData:b,props:e,dataKey:v,item:r,bandSize:E,barPosition:O,offset:a,stackedData:S,layout:c,dataStartIndex:i,dataEndIndex:l}))),{},kr(kr(kr({key:r.key||"item-".concat(f)},p,j[p]),m,j[m]),"animationId",o)),childIndex:A4(e.children).indexOf(r),item:r})}),x},u=function(e,n){var a=e.props,o=e.dataStartIndex,i=e.dataEndIndex,l=e.updateId;if(!A8({props:a}))return null;var c=a.children,u=a.layout,h=a.stackOffset,f=a.data,p=a.reverseStackOrder,m=kx(u),g=m.numericAxisName,x=m.cateAxisName,b=A3(c,r),y=mE(f,b,"".concat(g,"Id"),"".concat(x,"Id"),h,p),v=s.reduce(function(e,t){var r="".concat(t.axisType,"Map");return kt(kt({},e),{},kr({},r,kp(a,kt(kt({},t),{},{graphicalItems:b,stackGroups:t.axisType===g&&y,dataStartIndex:o,dataEndIndex:i}))))},{}),w=kb(kt(kt({},v),{},{props:a,graphicalItems:b}),null==n?void 0:n.legendBBox);Object.keys(v).forEach(function(e){v[e]=A(a,v[e],w,e.replace("Map",""),t)});var k=km(v["".concat(x,"Map")]),B=d(a,kt(kt({},v),{},{dataStartIndex:o,dataEndIndex:i,updateId:l,graphicalItems:b,stackGroups:y,offset:w}));return kt(kt({formattedGraphicalItems:B,graphicalItems:b,offset:w,stackGroups:y},k),v)},h=function(e){var r;function n(e){var r,a,o,i,s;return function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,n),i=n,s=[e],i=w3(i),kr(o=function(e,t){if(t&&("object"===w0(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,w4()?Reflect.construct(i,s||[],w3(this).constructor):i.apply(this,s)),"eventEmitterSymbol",Symbol("rechartsEventEmitter")),kr(o,"accessibilityManager",new wl),kr(o,"handleLegendBBoxUpdate",function(e){if(e){var t=o.state,r=t.dataStartIndex,n=t.dataEndIndex,a=t.updateId;o.setState(kt({legendBBox:e},u({props:o.props,dataStartIndex:r,dataEndIndex:n,updateId:a},kt(kt({},o.state),{},{legendBBox:e}))))}}),kr(o,"handleReceiveSyncEvent",function(e,t,r){o.props.syncId===e&&(r!==o.eventEmitterSymbol||"function"==typeof o.props.syncMethod)&&o.applySyncEvent(t)}),kr(o,"handleBrushChange",function(e){var t=e.startIndex,r=e.endIndex;if(t!==o.state.dataStartIndex||r!==o.state.dataEndIndex){var n=o.state.updateId;o.setState(function(){return kt({dataStartIndex:t,dataEndIndex:r},u({props:o.props,dataStartIndex:t,dataEndIndex:r,updateId:n},o.state))}),o.triggerSyncEvent({dataStartIndex:t,dataEndIndex:r})}}),kr(o,"handleMouseEnter",function(e){var t=o.getMouseInfo(e);if(t){var r=kt(kt({},t),{},{isTooltipActive:!0});o.setState(r),o.triggerSyncEvent(r);var n=o.props.onMouseEnter;Aw()(n)&&n(r,e)}}),kr(o,"triggeredAfterMouseMove",function(e){var t=o.getMouseInfo(e),r=t?kt(kt({},t),{},{isTooltipActive:!0}):{isTooltipActive:!1};o.setState(r),o.triggerSyncEvent(r);var n=o.props.onMouseMove;Aw()(n)&&n(r,e)}),kr(o,"handleItemMouseEnter",function(e){o.setState(function(){return{isTooltipActive:!0,activeItem:e,activePayload:e.tooltipPayload,activeCoordinate:e.tooltipPosition||{x:e.cx,y:e.cy}}})}),kr(o,"handleItemMouseLeave",function(){o.setState(function(){return{isTooltipActive:!1}})}),kr(o,"handleMouseMove",function(e){e.persist(),o.throttleTriggeredAfterMouseMove(e)}),kr(o,"handleMouseLeave",function(e){o.throttleTriggeredAfterMouseMove.cancel();var t={isTooltipActive:!1};o.setState(t),o.triggerSyncEvent(t);var r=o.props.onMouseLeave;Aw()(r)&&r(t,e)}),kr(o,"handleOuterEvent",function(e){var t,r=ca(e),n=Am()(o.props,"".concat(r));r&&Aw()(n)&&n(null!==(t=/.*touch.*/i.test(r)?o.getMouseInfo(e.changedTouches[0]):o.getMouseInfo(e))&&void 0!==t?t:{},e)}),kr(o,"handleClick",function(e){var t=o.getMouseInfo(e);if(t){var r=kt(kt({},t),{},{isTooltipActive:!0});o.setState(r),o.triggerSyncEvent(r);var n=o.props.onClick;Aw()(n)&&n(r,e)}}),kr(o,"handleMouseDown",function(e){var t=o.props.onMouseDown;Aw()(t)&&t(o.getMouseInfo(e),e)}),kr(o,"handleMouseUp",function(e){var t=o.props.onMouseUp;Aw()(t)&&t(o.getMouseInfo(e),e)}),kr(o,"handleTouchMove",function(e){null!=e.changedTouches&&e.changedTouches.length>0&&o.throttleTriggeredAfterMouseMove(e.changedTouches[0])}),kr(o,"handleTouchStart",function(e){null!=e.changedTouches&&e.changedTouches.length>0&&o.handleMouseDown(e.changedTouches[0])}),kr(o,"handleTouchEnd",function(e){null!=e.changedTouches&&e.changedTouches.length>0&&o.handleMouseUp(e.changedTouches[0])}),kr(o,"handleDoubleClick",function(e){var t=o.props.onDoubleClick;Aw()(t)&&t(o.getMouseInfo(e),e)}),kr(o,"handleContextMenu",function(e){var t=o.props.onContextMenu;Aw()(t)&&t(o.getMouseInfo(e),e)}),kr(o,"triggerSyncEvent",function(e){void 0!==o.props.syncId&&wn.emit(wa,o.props.syncId,e,o.eventEmitterSymbol)}),kr(o,"applySyncEvent",function(e){var t=o.props,r=t.layout,n=t.syncMethod,a=o.state.updateId,i=e.dataStartIndex,s=e.dataEndIndex;if(void 0!==e.dataStartIndex||void 0!==e.dataEndIndex)o.setState(kt({dataStartIndex:i,dataEndIndex:s},u({props:o.props,dataStartIndex:i,dataEndIndex:s,updateId:a},o.state)));else if(void 0!==e.activeTooltipIndex){var l=e.chartX,A=e.chartY,c=e.activeTooltipIndex,d=o.state,h=d.offset,f=d.tooltipTicks;if(!h)return;if("function"==typeof n)c=n(f,e);else if("value"===n){c=-1;for(var p=0;p<f.length;p++)if(f[p].value===e.activeLabel){c=p;break}}var m=kt(kt({},h),{},{x:h.left,y:h.top}),g=Math.min(l,m.x+m.width),x=Math.min(A,m.y+m.height),b=f[c]&&f[c].value,y=kd(o.state,o.props.data,c),v=f[c]?{x:"horizontal"===r?f[c].coordinate:g,y:"horizontal"===r?x:f[c].coordinate}:ki;o.setState(kt(kt({},e),{},{activeLabel:b,activeCoordinate:v,activePayload:y,activeTooltipIndex:c}))}else o.setState(e)}),kr(o,"renderCursor",function(e){var r,n=o.state,a=n.isTooltipActive,i=n.activeCoordinate,s=n.activePayload,l=n.offset,A=n.activeTooltipIndex,c=n.tooltipAxisBandSize,d=o.getTooltipEventType(),u=null!==(r=e.props.active)&&void 0!==r?r:a,h=o.props.layout,f=e.key||"_recharts-cursor";return x().createElement(wY,{key:f,activeCoordinate:i,activePayload:s,activeTooltipIndex:A,chartName:t,element:e,isActive:u,layout:h,offset:l,tooltipAxisBandSize:c,tooltipEventType:d})}),kr(o,"renderPolarAxis",function(e,t,r){var n=Am()(e,"type.axisType"),a=Am()(o.state,"".concat(n,"Map")),i=e.type.defaultProps,s=void 0!==i?kt(kt({},i),e.props):e.props,l=a&&a[s["".concat(n,"Id")]];return(0,g.cloneElement)(e,kt(kt({},l),{},{className:Af(n,l.className),key:e.key||"".concat(t,"-").concat(r),ticks:mv(l,!0)}))}),kr(o,"renderPolarGrid",function(e){var t=e.props,r=t.radialLines,n=t.polarAngles,a=t.polarRadius,i=o.state,s=i.radiusAxisMap,l=i.angleAxisMap,A=AQ(s),c=AQ(l),d=c.cx,u=c.cy,h=c.innerRadius,f=c.outerRadius;return(0,g.cloneElement)(e,{polarAngles:Array.isArray(n)?n:mv(c,!0).map(function(e){return e.coordinate}),polarRadius:Array.isArray(a)?a:mv(A,!0).map(function(e){return e.coordinate}),cx:d,cy:u,innerRadius:h,outerRadius:f,key:e.key||"polar-grid",radialLines:r})}),kr(o,"renderLegend",function(){var e=o.state.formattedGraphicalItems,t=o.props,r=t.children,n=t.width,a=t.height,i=o.props.margin||{},s=mr({children:r,formattedGraphicalItems:e,legendWidth:n-(i.left||0)-(i.right||0),legendContent:l});if(!s)return null;var A=s.item,c=w5(s,wJ);return(0,g.cloneElement)(A,kt(kt({},c),{},{chartWidth:n,chartHeight:a,margin:i,onBBoxUpdate:o.handleLegendBBoxUpdate}))}),kr(o,"renderTooltip",function(){var e,t=o.props,r=t.children,n=t.accessibilityLayer,a=A6(r,gH);if(!a)return null;var i=o.state,s=i.isTooltipActive,l=i.activeCoordinate,A=i.activePayload,c=i.activeLabel,d=i.offset,u=null!==(e=a.props.active)&&void 0!==e?e:s;return(0,g.cloneElement)(a,{viewBox:kt(kt({},d),{},{x:d.left,y:d.top}),active:u,label:c,payload:u?A:[],coordinate:l,accessibilityLayer:n})}),kr(o,"renderBrush",function(e){var t=o.props,r=t.margin,n=t.data,a=o.state,i=a.offset,s=a.dataStartIndex,l=a.dataEndIndex,A=a.updateId;return(0,g.cloneElement)(e,{key:e.key||"_recharts-brush",onChange:mk(o.handleBrushChange,e.props.onChange),data:n,x:AP(e.props.x)?e.props.x:i.left,y:AP(e.props.y)?e.props.y:i.top+i.height+i.brushBottom-(r.bottom||0),width:AP(e.props.width)?e.props.width:i.width,startIndex:s,endIndex:l,updateId:"brush-".concat(A)})}),kr(o,"renderReferenceElement",function(e,t,r){if(!e)return null;var n=o.clipPathId,a=o.state,i=a.xAxisMap,s=a.yAxisMap,l=a.offset,A=e.type.defaultProps||{},c=e.props,d=c.xAxisId,u=void 0===d?A.xAxisId:d,h=c.yAxisId,f=void 0===h?A.yAxisId:h;return(0,g.cloneElement)(e,{key:e.key||"".concat(t,"-").concat(r),xAxis:i[u],yAxis:s[f],viewBox:{x:l.left,y:l.top,width:l.width,height:l.height},clipPathId:n})}),kr(o,"renderActivePoints",function(e){var t=e.item,r=e.activePoint,a=e.basePoint,o=e.childIndex,i=e.isRange,s=[],l=t.props.key,A=void 0!==t.item.type.defaultProps?kt(kt({},t.item.type.defaultProps),t.item.props):t.item.props,c=A.activeDot,d=kt(kt({index:o,dataKey:A.dataKey,cx:r.x,cy:r.y,r:4,fill:mu(t.item),strokeWidth:2,stroke:"#fff",payload:r.payload,value:r.value},ce(c,!1)),AW(c));return s.push(n.renderActiveDot(c,d,"".concat(l,"-activePoint-").concat(o))),a?s.push(n.renderActiveDot(c,kt(kt({},d),{},{cx:a.x,cy:a.y}),"".concat(l,"-basePoint-").concat(o))):i&&s.push(null),s}),kr(o,"renderGraphicChild",function(e,t,r){var n=o.filterFormatItem(e,t,r);if(!n)return null;var a=o.getTooltipEventType(),i=o.state,s=i.isTooltipActive,l=i.tooltipAxis,A=i.activeTooltipIndex,c=i.activeLabel,d=A6(o.props.children,gH),u=n.props,h=u.points,f=u.isRange,p=u.baseLine,m=void 0!==n.item.type.defaultProps?kt(kt({},n.item.type.defaultProps),n.item.props):n.item.props,x=m.activeDot,b=m.hide,y=m.activeBar,v=m.activeShape,w={};"axis"!==a&&d&&"click"===d.props.trigger?w={onClick:mk(o.handleItemMouseEnter,e.props.onClick)}:"axis"!==a&&(w={onMouseLeave:mk(o.handleItemMouseLeave,e.props.onMouseLeave),onMouseEnter:mk(o.handleItemMouseEnter,e.props.onMouseEnter)});var k=(0,g.cloneElement)(e,kt(kt({},n.props),w));if(!b&&s&&d&&(x||y||v)){if(A>=0){if(l.dataKey&&!l.allowDuplicatedCategory){var B="function"==typeof l.dataKey?function(e){return"function"==typeof l.dataKey?l.dataKey(e.payload):null}:"payload.".concat(l.dataKey.toString());C=AM(h,B,c),N=f&&p&&AM(p,B,c)}else C=null==h?void 0:h[A],N=f&&p&&p[A];if(v||y){var j=void 0!==e.props.activeIndex?e.props.activeIndex:A;return[(0,g.cloneElement)(e,kt(kt(kt({},n.props),w),{},{activeIndex:j})),null,null]}if(!Ax()(C))return[k].concat(w8(o.renderActivePoints({item:n,activePoint:C,basePoint:N,childIndex:A,isRange:f})))}else{var C,N,S,F=(null!==(S=o.getItemByXY(o.state.activeCoordinate))&&void 0!==S?S:{graphicalItem:k}).graphicalItem,E=F.item,O=void 0===E?e:E,P=F.childIndex,I=kt(kt(kt({},n.props),w),{},{activeIndex:P});return[(0,g.cloneElement)(O,I),null,null]}}return f?[k,null,null]:[k,null]}),kr(o,"renderCustomized",function(e,t,r){return(0,g.cloneElement)(e,kt(kt({key:"recharts-customized-".concat(r)},o.props),o.state))}),kr(o,"renderMap",{CartesianGrid:{handler:ks,once:!0},ReferenceArea:{handler:o.renderReferenceElement},ReferenceLine:{handler:ks},ReferenceDot:{handler:o.renderReferenceElement},XAxis:{handler:ks},YAxis:{handler:ks},Brush:{handler:o.renderBrush,once:!0},Bar:{handler:o.renderGraphicChild},Line:{handler:o.renderGraphicChild},Area:{handler:o.renderGraphicChild},Radar:{handler:o.renderGraphicChild},RadialBar:{handler:o.renderGraphicChild},Scatter:{handler:o.renderGraphicChild},Pie:{handler:o.renderGraphicChild},Funnel:{handler:o.renderGraphicChild},Tooltip:{handler:o.renderCursor,once:!0},PolarGrid:{handler:o.renderPolarGrid,once:!0},PolarAngleAxis:{handler:o.renderPolarAxis},PolarRadiusAxis:{handler:o.renderPolarAxis},Customized:{handler:o.renderCustomized}}),o.clipPathId="".concat(null!==(r=e.id)&&void 0!==r?r:AL("recharts"),"-clip"),o.throttleTriggeredAfterMouseMove=gr()(o.triggeredAfterMouseMove,null!==(a=e.throttleDelay)&&void 0!==a?a:1e3/60),o.state={},o}return function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&w6(e,t)}(n,e),r=[{key:"componentDidMount",value:function(){var e,t;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:null!==(e=this.props.margin.left)&&void 0!==e?e:0,top:null!==(t=this.props.margin.top)&&void 0!==t?t:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var e=this.props,t=e.children,r=e.data,n=e.height,a=e.layout,o=A6(t,gH);if(o){var i=o.props.defaultIndex;if("number"==typeof i&&!(i<0)&&!(i>this.state.tooltipTicks.length-1)){var s=this.state.tooltipTicks[i]&&this.state.tooltipTicks[i].value,l=kd(this.state,r,i,s),A=this.state.tooltipTicks[i].coordinate,c=(this.state.offset.top+n)/2,d="horizontal"===a?{x:A,y:c}:{y:A,x:c},u=this.state.formattedGraphicalItems.find(function(e){return"Scatter"===e.item.type.name});u&&(d=kt(kt({},d),u.props.points[i].tooltipPosition),l=u.props.points[i].tooltipPayload);var h={activeTooltipIndex:i,isTooltipActive:!0,activeLabel:s,activePayload:l,activeCoordinate:d};this.setState(h),this.renderCursor(o),this.accessibilityManager.setIndex(i)}}}},{key:"getSnapshotBeforeUpdate",value:function(e,t){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==t.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==e.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==e.margin){var r,n;this.accessibilityManager.setDetails({offset:{left:null!==(r=this.props.margin.left)&&void 0!==r?r:0,top:null!==(n=this.props.margin.top)&&void 0!==n?n:0}})}return null}},{key:"componentDidUpdate",value:function(e){ct([A6(e.children,gH)],[A6(this.props.children,gH)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var e=A6(this.props.children,gH);if(e&&"boolean"==typeof e.props.shared){var t=e.props.shared?"axis":"item";return i.indexOf(t)>=0?t:a}return a}},{key:"getMouseInfo",value:function(e){if(!this.container)return null;var t=this.container,r=t.getBoundingClientRect(),n={top:r.top+window.scrollY-document.documentElement.clientTop,left:r.left+window.scrollX-document.documentElement.clientLeft},a={chartX:Math.round(e.pageX-n.left),chartY:Math.round(e.pageY-n.top)},o=r.width/t.offsetWidth||1,i=this.inRange(a.chartX,a.chartY,o);if(!i)return null;var s=this.state,l=s.xAxisMap,A=s.yAxisMap,c=this.getTooltipEventType(),d=ku(this.state,this.props.data,this.props.layout,i);if("axis"!==c&&l&&A){var u=AQ(l).scale,h=AQ(A).scale,f=u&&u.invert?u.invert(a.chartX):null,p=h&&h.invert?h.invert(a.chartY):null;return kt(kt({},a),{},{xValue:f,yValue:p},d)}return d?kt(kt({},a),d):null}},{key:"inRange",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=this.props.layout,a=e/r,o=t/r;if("horizontal"===n||"vertical"===n){var i=this.state.offset;return a>=i.left&&a<=i.left+i.width&&o>=i.top&&o<=i.top+i.height?{x:a,y:o}:null}var s=this.state,l=s.angleAxisMap,A=s.radiusAxisMap;return l&&A?m0({x:a,y:o},AQ(l)):null}},{key:"parseEventsOfWrapper",value:function(){var e=this.props.children,t=this.getTooltipEventType(),r=A6(e,gH),n={};return r&&"axis"===t&&(n="click"===r.props.trigger?{onClick:this.handleClick}:{onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu}),kt(kt({},AW(this.props,this.handleOuterEvent)),n)}},{key:"addListener",value:function(){wn.on(wa,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){wn.removeListener(wa,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(e,t,r){for(var n=this.state.formattedGraphicalItems,a=0,o=n.length;a<o;a++){var i=n[a];if(i.item===e||i.props.key===e.key||t===A1(i.item.type)&&r===i.childIndex)return i}return null}},{key:"renderClipPath",value:function(){var e=this.clipPathId,t=this.state.offset,r=t.left,n=t.top,a=t.height,o=t.width;return x().createElement("defs",null,x().createElement("clipPath",{id:e},x().createElement("rect",{x:r,y:n,height:a,width:o})))}},{key:"getXScales",value:function(){var e=this.state.xAxisMap;return e?Object.entries(e).reduce(function(e,t){var r=w2(t,2),n=r[0],a=r[1];return kt(kt({},e),{},kr({},n,a.scale))},{}):null}},{key:"getYScales",value:function(){var e=this.state.yAxisMap;return e?Object.entries(e).reduce(function(e,t){var r=w2(t,2),n=r[0],a=r[1];return kt(kt({},e),{},kr({},n,a.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(e){var t;return null===(t=this.state.xAxisMap)||void 0===t||null===(t=t[e])||void 0===t?void 0:t.scale}},{key:"getYScaleByAxisId",value:function(e){var t;return null===(t=this.state.yAxisMap)||void 0===t||null===(t=t[e])||void 0===t?void 0:t.scale}},{key:"getItemByXY",value:function(e){var t=this.state,r=t.formattedGraphicalItems,n=t.activeItem;if(r&&r.length)for(var a=0,o=r.length;a<o;a++){var i=r[a],s=i.props,l=i.item,A=void 0!==l.type.defaultProps?kt(kt({},l.type.defaultProps),l.props):l.props,c=A1(l.type);if("Bar"===c){var d=(s.data||[]).find(function(t){return x6(e,t)});if(d)return{graphicalItem:i,payload:d}}else if("RadialBar"===c){var u=(s.data||[]).find(function(t){return m0(e,t)});if(u)return{graphicalItem:i,payload:u}}else if(y_(i,n)||yQ(i,n)||yT(i,n)){var h=function(e){var t,r,n,a=e.activeTooltipItem,o=e.graphicalItem,i=e.itemData,s=(y_(o,a)?t="trapezoids":yQ(o,a)?t="sectors":yT(o,a)&&(t="points"),t),l=y_(o,a)?null===(r=a.tooltipPayload)||void 0===r||null===(r=r[0])||void 0===r||null===(r=r.payload)||void 0===r?void 0:r.payload:yQ(o,a)?null===(n=a.tooltipPayload)||void 0===n||null===(n=n[0])||void 0===n||null===(n=n.payload)||void 0===n?void 0:n.payload:yT(o,a)?a.payload:{},A=i.filter(function(e,t){var r=fi()(l,e),n=o.props[s].filter(function(e){var t;return(y_(o,a)?t=yD:yQ(o,a)?t=yM:yT(o,a)&&(t=yH),t)(e,a)}),i=o.props[s].indexOf(n[n.length-1]);return r&&t===i});return i.indexOf(A[A.length-1])}({graphicalItem:i,activeTooltipItem:n,itemData:A.data}),f=void 0===A.activeIndex?h:A.activeIndex;return{graphicalItem:kt(kt({},i),{},{childIndex:f}),payload:yT(i,n)?A.data[h]:i.props.data[h]}}}return null}},{key:"render",value:function(){var e,t,r=this;if(!A8(this))return null;var n=this.props,a=n.children,o=n.className,i=n.width,s=n.height,l=n.style,A=n.compact,c=n.title,d=n.desc,u=ce(w5(n,wZ),!1);if(A)return x().createElement(vI,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},x().createElement(pl,w1({},u,{width:i,height:s,title:c,desc:d}),this.renderClipPath(),cn(a,this.renderMap)));this.props.accessibilityLayer&&(u.tabIndex=null!==(e=this.props.tabIndex)&&void 0!==e?e:0,u.role=null!==(t=this.props.role)&&void 0!==t?t:"application",u.onKeyDown=function(e){r.accessibilityManager.keyboardEvent(e)},u.onFocus=function(){r.accessibilityManager.focus()});var h=this.parseEventsOfWrapper();return x().createElement(vI,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},x().createElement("div",w1({className:Af("recharts-wrapper",o),style:kt({position:"relative",cursor:"default",width:i,height:s},l)},h,{ref:function(e){r.container=e}}),x().createElement(pl,w1({},u,{width:i,height:s,title:c,desc:d,style:ko}),this.renderClipPath(),cn(a,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}],function(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,kn(n.key),n)}}(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n}(g.Component);kr(h,"displayName",t),kr(h,"defaultProps",kt({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},c)),kr(h,"getDerivedStateFromProps",function(e,t){var r=e.dataKey,n=e.data,a=e.children,o=e.width,i=e.height,s=e.layout,l=e.stackOffset,A=e.margin,c=t.dataStartIndex,d=t.dataEndIndex;if(void 0===t.updateId){var h=kg(e);return kt(kt(kt({},h),{},{updateId:0},u(kt(kt({props:e},h),{},{updateId:0}),t)),{},{prevDataKey:r,prevData:n,prevWidth:o,prevHeight:i,prevLayout:s,prevStackOffset:l,prevMargin:A,prevChildren:a})}if(r!==t.prevDataKey||n!==t.prevData||o!==t.prevWidth||i!==t.prevHeight||s!==t.prevLayout||l!==t.prevStackOffset||!AR(A,t.prevMargin)){var f=kg(e),p={chartX:t.chartX,chartY:t.chartY,isTooltipActive:t.isTooltipActive},m=kt(kt({},ku(t,n,s)),{},{updateId:t.updateId+1}),g=kt(kt(kt({},f),p),m);return kt(kt(kt({},g),u(kt({props:e},g),t)),{},{prevDataKey:r,prevData:n,prevWidth:o,prevHeight:i,prevLayout:s,prevStackOffset:l,prevMargin:A,prevChildren:a})}if(!ct(a,t.prevChildren)){var x,b,y,v,w=A6(a,bY),k=w&&null!==(x=null===(b=w.props)||void 0===b?void 0:b.startIndex)&&void 0!==x?x:c,B=w&&null!==(y=null===(v=w.props)||void 0===v?void 0:v.endIndex)&&void 0!==y?y:d,j=Ax()(n)||k!==c||B!==d?t.updateId+1:t.updateId;return kt(kt({updateId:j},u(kt(kt({props:e},t),{},{updateId:j,dataStartIndex:k,dataEndIndex:B}),t)),{},{prevChildren:a,dataStartIndex:k,dataEndIndex:B})}return null}),kr(h,"renderActiveDot",function(e,t,r){var n;return n=(0,g.isValidElement)(e)?(0,g.cloneElement)(e,t):Aw()(e)?e(t):x().createElement(gK,t),x().createElement(f4,{className:"recharts-active-dot",key:r},n)});var f=(0,g.forwardRef)(function(e,t){return x().createElement(h,w1({},e,{ref:t}))});return f.displayName=h.displayName,f},kv=["type","layout","connectNulls","ref"],kw=["key"];function kk(e){return(kk="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function kB(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function kj(){return(kj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function kC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function kN(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?kC(Object(r),!0).forEach(function(t){kU(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):kC(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function kS(e){return function(e){if(Array.isArray(e))return kF(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return kF(e,void 0);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return kF(e,void 0)}}(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function kF(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function kE(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,kL(n.key),n)}}function kO(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(kO=function(){return!!e})()}function kP(e){return(kP=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function kI(e,t){return(kI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function kU(e,t,r){return(t=kL(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function kL(e){var t=function(e,t){if("object"!=kk(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=kk(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==kk(t)?t:t+""}var k_=function(e){var t,r;function n(){!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,n);for(var e,t,r,a=arguments.length,o=Array(a),i=0;i<a;i++)o[i]=arguments[i];return t=n,r=[].concat(o),t=kP(t),kU(e=function(e,t){if(t&&("object"===kk(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,kO()?Reflect.construct(t,r||[],kP(this).constructor):t.apply(this,r)),"state",{isAnimationFinished:!0,totalLength:0}),kU(e,"generateSimpleStrokeDasharray",function(e,t){return"".concat(t,"px ").concat(e-t,"px")}),kU(e,"getStrokeDasharray",function(t,r,a){var o=a.reduce(function(e,t){return e+t});if(!o)return e.generateSimpleStrokeDasharray(r,t);for(var i=t%o,s=r-t,l=[],A=0,c=0;A<a.length;c+=a[A],++A)if(c+a[A]>i){l=[].concat(kS(a.slice(0,A)),[i-c]);break}var d=l.length%2==0?[0,s]:[s];return[].concat(kS(n.repeat(a,Math.floor(t/o))),kS(l),d).map(function(e){return"".concat(e,"px")}).join(", ")}),kU(e,"id",AL("recharts-line-")),kU(e,"pathRef",function(t){e.mainCurve=t}),kU(e,"handleAnimationEnd",function(){e.setState({isAnimationFinished:!0}),e.props.onAnimationEnd&&e.props.onAnimationEnd()}),kU(e,"handleAnimationStart",function(){e.setState({isAnimationFinished:!1}),e.props.onAnimationStart&&e.props.onAnimationStart()}),e}return function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&kI(e,t)}(n,e),t=[{key:"componentDidMount",value:function(){if(this.props.isAnimationActive){var e=this.getTotalLength();this.setState({totalLength:e})}}},{key:"componentDidUpdate",value:function(){if(this.props.isAnimationActive){var e=this.getTotalLength();e!==this.state.totalLength&&this.setState({totalLength:e})}}},{key:"getTotalLength",value:function(){var e=this.mainCurve;try{return e&&e.getTotalLength&&e.getTotalLength()||0}catch(e){return 0}}},{key:"renderErrorBar",value:function(e,t){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var r=this.props,n=r.points,a=r.xAxis,o=r.yAxis,i=r.layout,s=A3(r.children,pa);if(!s)return null;var l=function(e,t){return{x:e.x,y:e.y,value:e.value,errorVal:mA(e.payload,t)}};return x().createElement(f4,{clipPath:e?"url(#clipPath-".concat(t,")"):null},s.map(function(e){return x().cloneElement(e,{key:"bar-".concat(e.props.dataKey),data:n,xAxis:a,yAxis:o,layout:i,dataPointFormatter:l})}))}},{key:"renderDots",value:function(e,t,r){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var a=this.props,o=a.dot,i=a.points,s=a.dataKey,l=ce(this.props,!1),A=ce(o,!0),c=i.map(function(e,t){var r=kN(kN(kN({key:"dot-".concat(t),r:3},l),A),{},{index:t,cx:e.x,cy:e.y,value:e.value,dataKey:s,payload:e.payload,points:i});return n.renderDotItem(o,r)}),d={clipPath:e?"url(#clipPath-".concat(t?"":"dots-").concat(r,")"):null};return x().createElement(f4,kj({className:"recharts-line-dots",key:"dots"},d),c)}},{key:"renderCurveStatically",value:function(e,t,r,n){var a=this.props,o=a.type,i=a.layout,s=a.connectNulls,l=kN(kN(kN({},ce((a.ref,kB(a,kv)),!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:t?"url(#clipPath-".concat(r,")"):null,points:e},n),{},{type:o,layout:i,connectNulls:s});return x().createElement(wH,kj({},l,{pathRef:this.pathRef}))}},{key:"renderCurveWithAnimation",value:function(e,t){var r=this,n=this.props,a=n.points,o=n.strokeDasharray,i=n.isAnimationActive,s=n.animationBegin,l=n.animationDuration,A=n.animationEasing,c=n.animationId,d=n.animateNewValues,u=n.width,h=n.height,f=this.state,p=f.prevPoints,m=f.totalLength;return x().createElement(xZ,{begin:s,duration:l,isActive:i,easing:A,from:{t:0},to:{t:1},key:"line-".concat(c),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(n){var i,s=n.t;if(p){var l=p.length/a.length,A=a.map(function(e,t){var r=Math.floor(t*l);if(p[r]){var n=p[r],a=AD(n.x,e.x),o=AD(n.y,e.y);return kN(kN({},e),{},{x:a(s),y:o(s)})}if(d){var i=AD(2*u,e.x),A=AD(h/2,e.y);return kN(kN({},e),{},{x:i(s),y:A(s)})}return kN(kN({},e),{},{x:e.x,y:e.y})});return r.renderCurveStatically(A,e,t)}var c=AD(0,m)(s);if(o){var f="".concat(o).split(/[,\s]+/gim).map(function(e){return parseFloat(e)});i=r.getStrokeDasharray(c,m,f)}else i=r.generateSimpleStrokeDasharray(m,c);return r.renderCurveStatically(a,e,t,{strokeDasharray:i})})}},{key:"renderCurve",value:function(e,t){var r=this.props,n=r.points,a=r.isAnimationActive,o=this.state,i=o.prevPoints,s=o.totalLength;return a&&n&&n.length&&(!i&&s>0||!fi()(i,n))?this.renderCurveWithAnimation(e,t):this.renderCurveStatically(n,e,t)}},{key:"render",value:function(){var e,t=this.props,r=t.hide,n=t.dot,a=t.points,o=t.className,i=t.xAxis,s=t.yAxis,l=t.top,A=t.left,c=t.width,d=t.height,u=t.isAnimationActive,h=t.id;if(r||!a||!a.length)return null;var f=this.state.isAnimationFinished,p=1===a.length,m=Af("recharts-line",o),g=i&&i.allowDataOverflow,b=s&&s.allowDataOverflow,y=g||b,v=Ax()(h)?this.id:h,w=null!==(e=ce(n,!1))&&void 0!==e?e:{r:3,strokeWidth:2},k=w.r,B=w.strokeWidth,j=(n&&"object"===AZ(n)&&"clipDot"in n?n:{}).clipDot,C=void 0===j||j,N=2*(void 0===k?3:k)+(void 0===B?2:B);return x().createElement(f4,{className:m},g||b?x().createElement("defs",null,x().createElement("clipPath",{id:"clipPath-".concat(v)},x().createElement("rect",{x:g?A:A-c/2,y:b?l:l-d/2,width:g?c:2*c,height:b?d:2*d})),!C&&x().createElement("clipPath",{id:"clipPath-dots-".concat(v)},x().createElement("rect",{x:A-N/2,y:l-N/2,width:c+N,height:d+N}))):null,!p&&this.renderCurve(y,v),this.renderErrorBar(y,v),(p||n)&&this.renderDots(y,C,v),(!u||f)&&yg.renderCallByParent(this.props,a))}}],r=[{key:"getDerivedStateFromProps",value:function(e,t){return e.animationId!==t.prevAnimationId?{prevAnimationId:e.animationId,curPoints:e.points,prevPoints:t.curPoints}:e.points!==t.curPoints?{curPoints:e.points}:null}},{key:"repeat",value:function(e,t){for(var r=e.length%2!=0?[].concat(kS(e),[0]):e,n=[],a=0;a<t;++a)n=[].concat(kS(n),kS(r));return n}},{key:"renderDotItem",value:function(e,t){var r;if(x().isValidElement(e))r=x().cloneElement(e,t);else if(Aw()(e))r=e(t);else{var n=t.key,a=kB(t,kw),o=Af("recharts-line-dot","boolean"!=typeof e?e.className:"");r=x().createElement(gK,kj({key:n},a,{className:o}))}return r}}],t&&kE(n.prototype,t),r&&kE(n,r),Object.defineProperty(n,"prototype",{writable:!1}),n}(g.PureComponent);function kQ(e,t,r){if(t<1)return[];if(1===t&&void 0===r)return e;for(var n=[],a=0;a<e.length;a+=t){if(void 0!==r&&!0!==r(e[a]))return;n.push(e[a])}return n}function kT(e,t,r,n,a){if(e*t<e*n||e*t>e*a)return!1;var o=r();return e*(t-e*o/2-n)>=0&&e*(t+e*o/2-a)<=0}function kD(e){return(kD="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function kM(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function kH(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?kM(Object(r),!0).forEach(function(t){var n,a;n=t,a=r[t],(n=function(e){var t=function(e,t){if("object"!=kD(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=kD(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==kD(t)?t:t+""}(n))in e?Object.defineProperty(e,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[n]=a}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):kM(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function kR(e,t,r){var n,a,o,i,s,l=e.tick,A=e.ticks,c=e.viewBox,d=e.minTickGap,u=e.orientation,h=e.interval,f=e.tickFormatter,p=e.unit,m=e.angle;if(!A||!A.length||!l)return[];if(AP(h)||gO.isSsr)return kQ(A,("number"==typeof h&&AP(h)?h:0)+1);var g="top"===u||"bottom"===u?"width":"height",x=p&&"width"===g?bo(p,{fontSize:t,letterSpacing:r}):{width:0,height:0},b=function(e,n){var a,o=Aw()(f)?f(e.value,n):e.value;return"width"===g?vl({width:(a=bo(o,{fontSize:t,letterSpacing:r})).width+x.width,height:a.height+x.height},m):bo(o,{fontSize:t,letterSpacing:r})[g]},y=A.length>=2?AE(A[1].coordinate-A[0].coordinate):1,v=(n="width"===g,a=c.x,o=c.y,i=c.width,s=c.height,1===y?{start:n?a:o,end:n?a+i:o+s}:{start:n?a+i:o+s,end:n?a:o});return"equidistantPreserveStart"===h?function(e,t,r,n,a){for(var o,i=(n||[]).slice(),s=t.start,l=t.end,A=0,c=1,d=s;c<=i.length;)if(o=function(){var t,o=null==n?void 0:n[A];if(void 0===o)return{v:kQ(n,c)};var i=A,u=function(){return void 0===t&&(t=r(o,i)),t},h=o.coordinate,f=0===A||kT(e,h,u,d,l);f||(A=0,d=s,c+=1),f&&(d=h+e*(u()/2+a),A+=c)}())return o.v;return[]}(y,v,b,A,d):("preserveStart"===h||"preserveStartEnd"===h?function(e,t,r,n,a,o){var i=(n||[]).slice(),s=i.length,l=t.start,A=t.end;if(o){var c=n[s-1],d=r(c,s-1),u=e*(c.coordinate+e*d/2-A);i[s-1]=c=kH(kH({},c),{},{tickCoord:u>0?c.coordinate-u*e:c.coordinate}),kT(e,c.tickCoord,function(){return d},l,A)&&(A=c.tickCoord-e*(d/2+a),i[s-1]=kH(kH({},c),{},{isShow:!0}))}for(var h=o?s-1:s,f=function(t){var n,o=i[t],s=function(){return void 0===n&&(n=r(o,t)),n};if(0===t){var c=e*(o.coordinate-e*s()/2-l);i[t]=o=kH(kH({},o),{},{tickCoord:c<0?o.coordinate-c*e:o.coordinate})}else i[t]=o=kH(kH({},o),{},{tickCoord:o.coordinate});kT(e,o.tickCoord,s,l,A)&&(l=o.tickCoord+e*(s()/2+a),i[t]=kH(kH({},o),{},{isShow:!0}))},p=0;p<h;p++)f(p);return i}(y,v,b,A,d,"preserveStartEnd"===h):function(e,t,r,n,a){for(var o=(n||[]).slice(),i=o.length,s=t.start,l=t.end,A=function(t){var n,A=o[t],c=function(){return void 0===n&&(n=r(A,t)),n};if(t===i-1){var d=e*(A.coordinate+e*c()/2-l);o[t]=A=kH(kH({},A),{},{tickCoord:d>0?A.coordinate-d*e:A.coordinate})}else o[t]=A=kH(kH({},A),{},{tickCoord:A.coordinate});kT(e,A.tickCoord,c,s,l)&&(l=A.tickCoord-e*(c()/2+a),o[t]=kH(kH({},A),{},{isShow:!0}))},c=i-1;c>=0;c--)A(c);return o}(y,v,b,A,d)).filter(function(e){return e.isShow})}kU(k_,"displayName","Line"),kU(k_,"defaultProps",{xAxisId:0,yAxisId:0,connectNulls:!1,activeDot:!0,dot:!0,legendType:"line",stroke:"#3182bd",strokeWidth:1,fill:"#fff",points:[],isAnimationActive:!gO.isSsr,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",hide:!1,label:!1}),kU(k_,"getComposedData",function(e){var t=e.props,r=e.xAxis,n=e.yAxis,a=e.xAxisTicks,o=e.yAxisTicks,i=e.dataKey,s=e.bandSize,l=e.displayedData,A=e.offset,c=t.layout;return kN({points:l.map(function(e,t){var l=mA(e,i);return"horizontal"===c?{x:mP({axis:r,ticks:a,bandSize:s,entry:e,index:t}),y:Ax()(l)?null:n.scale(l),value:l,payload:e}:{x:Ax()(l)?null:r.scale(l),y:mP({axis:n,ticks:o,bandSize:s,entry:e,index:t}),value:l,payload:e}}),layout:c},A)});var kK=["viewBox"],kV=["viewBox"],kq=["ticks"];function kG(e){return(kG="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function kz(){return(kz=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function kW(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function k$(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?kW(Object(r),!0).forEach(function(t){k1(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):kW(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function kX(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function kY(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,k2(n.key),n)}}function kJ(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(kJ=function(){return!!e})()}function kZ(e){return(kZ=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function k0(e,t){return(k0=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function k1(e,t,r){return(t=k2(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function k2(e){var t=function(e,t){if("object"!=kG(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=kG(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==kG(t)?t:t+""}var k5=function(e){var t,r;function n(e){var t,r,a;return function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,n),r=n,a=[e],r=kZ(r),(t=function(e,t){if(t&&("object"===kG(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,kJ()?Reflect.construct(r,a||[],kZ(this).constructor):r.apply(this,a))).state={fontSize:"",letterSpacing:""},t}return function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&k0(e,t)}(n,e),t=[{key:"shouldComponentUpdate",value:function(e,t){var r=e.viewBox,n=kX(e,kK),a=this.props,o=a.viewBox,i=kX(a,kV);return!AR(r,o)||!AR(n,i)||!AR(t,this.state)}},{key:"componentDidMount",value:function(){var e=this.layerReference;if(e){var t=e.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];t&&this.setState({fontSize:window.getComputedStyle(t).fontSize,letterSpacing:window.getComputedStyle(t).letterSpacing})}}},{key:"getTickLineCoord",value:function(e){var t,r,n,a,o,i,s=this.props,l=s.x,A=s.y,c=s.width,d=s.height,u=s.orientation,h=s.tickSize,f=s.mirror,p=s.tickMargin,m=f?-1:1,g=e.tickSize||h,x=AP(e.tickCoord)?e.tickCoord:e.coordinate;switch(u){case"top":t=r=e.coordinate,i=(n=(a=A+ +!f*d)-m*g)-m*p,o=x;break;case"left":n=a=e.coordinate,o=(t=(r=l+ +!f*c)-m*g)-m*p,i=x;break;case"right":n=a=e.coordinate,o=(t=(r=l+ +f*c)+m*g)+m*p,i=x;break;default:t=r=e.coordinate,i=(n=(a=A+ +f*d)+m*g)+m*p,o=x}return{line:{x1:t,y1:n,x2:r,y2:a},tick:{x:o,y:i}}}},{key:"getTickTextAnchor",value:function(){var e,t=this.props,r=t.orientation,n=t.mirror;switch(r){case"left":e=n?"start":"end";break;case"right":e=n?"end":"start";break;default:e="middle"}return e}},{key:"getTickVerticalAnchor",value:function(){var e=this.props,t=e.orientation,r=e.mirror,n="end";switch(t){case"left":case"right":n="middle";break;case"top":n=r?"start":"end";break;default:n=r?"end":"start"}return n}},{key:"renderAxisLine",value:function(){var e=this.props,t=e.x,r=e.y,n=e.width,a=e.height,o=e.orientation,i=e.mirror,s=e.axisLine,l=k$(k$(k$({},ce(this.props,!1)),ce(s,!1)),{},{fill:"none"});if("top"===o||"bottom"===o){var A=+("top"===o&&!i||"bottom"===o&&i);l=k$(k$({},l),{},{x1:t,y1:r+A*a,x2:t+n,y2:r+A*a})}else{var c=+("left"===o&&!i||"right"===o&&i);l=k$(k$({},l),{},{x1:t+c*n,y1:r,x2:t+c*n,y2:r+a})}return x().createElement("line",kz({},l,{className:Af("recharts-cartesian-axis-line",Am()(s,"className"))}))}},{key:"renderTicks",value:function(e,t,r){var a=this,o=this.props,i=o.tickLine,s=o.stroke,l=o.tick,A=o.tickFormatter,c=o.unit,d=kR(k$(k$({},this.props),{},{ticks:e}),t,r),u=this.getTickTextAnchor(),h=this.getTickVerticalAnchor(),f=ce(this.props,!1),p=ce(l,!1),m=k$(k$({},f),{},{fill:"none"},ce(i,!1)),g=d.map(function(e,t){var r=a.getTickLineCoord(e),o=r.line,g=r.tick,b=k$(k$(k$(k$({textAnchor:u,verticalAnchor:h},f),{},{stroke:"none",fill:s},p),g),{},{index:t,payload:e,visibleTicksCount:d.length,tickFormatter:A});return x().createElement(f4,kz({className:"recharts-cartesian-axis-tick",key:"tick-".concat(e.value,"-").concat(e.coordinate,"-").concat(e.tickCoord)},A$(a.props,e,t)),i&&x().createElement("line",kz({},m,o,{className:Af("recharts-cartesian-axis-tick-line",Am()(i,"className"))})),l&&n.renderTickItem(l,b,"".concat(Aw()(A)?A(e.value,t):e.value).concat(c||"")))});return x().createElement("g",{className:"recharts-cartesian-axis-ticks"},g)}},{key:"render",value:function(){var e=this,t=this.props,r=t.axisLine,n=t.width,a=t.height,o=t.ticksGenerator,i=t.className;if(t.hide)return null;var s=this.props,l=s.ticks,A=kX(s,kq),c=l;return(Aw()(o)&&(c=o(l&&l.length>0?this.props:A)),n<=0||a<=0||!c||!c.length)?null:x().createElement(f4,{className:Af("recharts-cartesian-axis",i),ref:function(t){e.layerReference=t}},r&&this.renderAxisLine(),this.renderTicks(c,this.state.fontSize,this.state.letterSpacing),b7.renderCallByParent(this.props))}}],r=[{key:"renderTickItem",value:function(e,t,r){var n=Af(t.className,"recharts-cartesian-axis-tick-value");return x().isValidElement(e)?x().cloneElement(e,k$(k$({},t),{},{className:n})):Aw()(e)?e(k$(k$({},t),{},{className:n})):x().createElement(bP,kz({},t,{className:"recharts-cartesian-axis-tick-value"}),r)}}],t&&kY(n.prototype,t),r&&kY(n,r),Object.defineProperty(n,"prototype",{writable:!1}),n}(g.Component);function k4(e){return(k4="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function k3(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(k3=function(){return!!e})()}function k6(e){return(k6=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function k8(e,t){return(k8=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function k7(e,t,r){return(t=k9(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function k9(e){var t=function(e,t){if("object"!=k4(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=k4(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==k4(t)?t:t+""}function Be(){return(Be=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function Bt(e){var t=e.xAxisId,r=vQ(),n=vT(),a=vU(t);return null==a?null:g.createElement(k5,Be({},a,{className:Af("recharts-".concat(a.axisType," ").concat(a.axisType),a.className),viewBox:{x:0,y:0,width:r,height:n},ticksGenerator:function(e){return mv(e,!0)}}))}k1(k5,"displayName","CartesianAxis"),k1(k5,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var Br=function(e){var t;function r(){var e,t;return function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,r),e=r,t=arguments,e=k6(e),function(e,t){if(t&&("object"===k4(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,k3()?Reflect.construct(e,t||[],k6(this).constructor):e.apply(this,t))}return function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&k8(e,t)}(r,e),t=[{key:"render",value:function(){return g.createElement(Bt,this.props)}}],function(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,k9(n.key),n)}}(r.prototype,t),Object.defineProperty(r,"prototype",{writable:!1}),r}(g.Component);function Bn(e){return(Bn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ba(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(Ba=function(){return!!e})()}function Bo(e){return(Bo=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Bi(e,t){return(Bi=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Bs(e,t,r){return(t=Bl(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Bl(e){var t=function(e,t){if("object"!=Bn(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Bn(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Bn(t)?t:t+""}function BA(){return(BA=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}k7(Br,"displayName","XAxis"),k7(Br,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});var Bc=function(e){var t=e.yAxisId,r=vQ(),n=vT(),a=v_(t);return null==a?null:g.createElement(k5,BA({},a,{className:Af("recharts-".concat(a.axisType," ").concat(a.axisType),a.className),viewBox:{x:0,y:0,width:r,height:n},ticksGenerator:function(e){return mv(e,!0)}}))},Bd=function(e){var t;function r(){var e,t;return function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,r),e=r,t=arguments,e=Bo(e),function(e,t){if(t&&("object"===Bn(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,Ba()?Reflect.construct(e,t||[],Bo(this).constructor):e.apply(this,t))}return function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Bi(e,t)}(r,e),t=[{key:"render",value:function(){return g.createElement(Bc,this.props)}}],function(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Bl(n.key),n)}}(r.prototype,t),Object.defineProperty(r,"prototype",{writable:!1}),r}(g.Component);Bs(Bd,"displayName","YAxis"),Bs(Bd,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});var Bu=ky({chartName:"LineChart",GraphicalChild:k_,axisComponents:[{axisType:"xAxis",AxisComp:Br},{axisType:"yAxis",AxisComp:Bd}],formatAxisMap:va}),Bh=["x1","y1","x2","y2","key"],Bf=["offset"];function Bp(e){return(Bp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Bm(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Bg(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Bm(Object(r),!0).forEach(function(t){var n,a;n=t,a=r[t],(n=function(e){var t=function(e,t){if("object"!=Bp(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Bp(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Bp(t)?t:t+""}(n))in e?Object.defineProperty(e,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[n]=a}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Bm(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function Bx(){return(Bx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function Bb(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var By=function(e){var t=e.fill;if(!t||"none"===t)return null;var r=e.fillOpacity,n=e.x,a=e.y,o=e.width,i=e.height,s=e.ry;return x().createElement("rect",{x:n,y:a,ry:s,width:o,height:i,stroke:"none",fill:t,fillOpacity:r,className:"recharts-cartesian-grid-bg"})};function Bv(e,t){var r;if(x().isValidElement(e))r=x().cloneElement(e,t);else if(Aw()(e))r=e(t);else{var n=t.x1,a=t.y1,o=t.x2,i=t.y2,s=t.key,l=ce(Bb(t,Bh),!1),A=(l.offset,Bb(l,Bf));r=x().createElement("line",Bx({},A,{x1:n,y1:a,x2:o,y2:i,fill:"none",key:s}))}return r}function Bw(e){var t=e.x,r=e.width,n=e.horizontal,a=void 0===n||n,o=e.horizontalPoints;if(!a||!o||!o.length)return null;var i=o.map(function(n,o){return Bv(a,Bg(Bg({},e),{},{x1:t,y1:n,x2:t+r,y2:n,key:"line-".concat(o),index:o}))});return x().createElement("g",{className:"recharts-cartesian-grid-horizontal"},i)}function Bk(e){var t=e.y,r=e.height,n=e.vertical,a=void 0===n||n,o=e.verticalPoints;if(!a||!o||!o.length)return null;var i=o.map(function(n,o){return Bv(a,Bg(Bg({},e),{},{x1:n,y1:t,x2:n,y2:t+r,key:"line-".concat(o),index:o}))});return x().createElement("g",{className:"recharts-cartesian-grid-vertical"},i)}function BB(e){var t=e.horizontalFill,r=e.fillOpacity,n=e.x,a=e.y,o=e.width,i=e.height,s=e.horizontalPoints,l=e.horizontal;if(!(void 0===l||l)||!t||!t.length)return null;var A=s.map(function(e){return Math.round(e+a-a)}).sort(function(e,t){return e-t});a!==A[0]&&A.unshift(0);var c=A.map(function(e,s){var l=A[s+1]?A[s+1]-e:a+i-e;if(l<=0)return null;var c=s%t.length;return x().createElement("rect",{key:"react-".concat(s),y:e,x:n,height:l,width:o,stroke:"none",fill:t[c],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return x().createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},c)}function Bj(e){var t=e.vertical,r=e.verticalFill,n=e.fillOpacity,a=e.x,o=e.y,i=e.width,s=e.height,l=e.verticalPoints;if(!(void 0===t||t)||!r||!r.length)return null;var A=l.map(function(e){return Math.round(e+a-a)}).sort(function(e,t){return e-t});a!==A[0]&&A.unshift(0);var c=A.map(function(e,t){var l=A[t+1]?A[t+1]-e:a+i-e;if(l<=0)return null;var c=t%r.length;return x().createElement("rect",{key:"react-".concat(t),x:e,y:o,width:l,height:s,stroke:"none",fill:r[c],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return x().createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},c)}var BC=function(e,t){var r=e.xAxis,n=e.width,a=e.height,o=e.offset;return my(kR(Bg(Bg(Bg({},k5.defaultProps),r),{},{ticks:mv(r,!0),viewBox:{x:0,y:0,width:n,height:a}})),o.left,o.left+o.width,t)},BN=function(e,t){var r=e.yAxis,n=e.width,a=e.height,o=e.offset;return my(kR(Bg(Bg(Bg({},k5.defaultProps),r),{},{ticks:mv(r,!0),viewBox:{x:0,y:0,width:n,height:a}})),o.top,o.top+o.height,t)},BS={horizontal:!0,vertical:!0,stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function BF(e){var t,r,n,a,o,i,s=vQ(),l=vT(),A=(0,g.useContext)(vF),c=Bg(Bg({},e),{},{stroke:null!==(t=e.stroke)&&void 0!==t?t:BS.stroke,fill:null!==(r=e.fill)&&void 0!==r?r:BS.fill,horizontal:null!==(n=e.horizontal)&&void 0!==n?n:BS.horizontal,horizontalFill:null!==(a=e.horizontalFill)&&void 0!==a?a:BS.horizontalFill,vertical:null!==(o=e.vertical)&&void 0!==o?o:BS.vertical,verticalFill:null!==(i=e.verticalFill)&&void 0!==i?i:BS.verticalFill,x:AP(e.x)?e.x:A.left,y:AP(e.y)?e.y:A.top,width:AP(e.width)?e.width:A.width,height:AP(e.height)?e.height:A.height}),d=c.x,u=c.y,h=c.width,f=c.height,p=c.syncWithTicks,m=c.horizontalValues,b=c.verticalValues,y=AQ((0,g.useContext)(vC)),v=vL();if(!AP(h)||h<=0||!AP(f)||f<=0||!AP(d)||d!==+d||!AP(u)||u!==+u)return null;var w=c.verticalCoordinatesGenerator||BC,k=c.horizontalCoordinatesGenerator||BN,B=c.horizontalPoints,j=c.verticalPoints;if((!B||!B.length)&&Aw()(k)){var C=m&&m.length,N=k({yAxis:v?Bg(Bg({},v),{},{ticks:C?m:v.ticks}):void 0,width:s,height:l,offset:A},!!C||p);po(Array.isArray(N),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(Bp(N),"]")),Array.isArray(N)&&(B=N)}if((!j||!j.length)&&Aw()(w)){var S=b&&b.length,F=w({xAxis:y?Bg(Bg({},y),{},{ticks:S?b:y.ticks}):void 0,width:s,height:l,offset:A},!!S||p);po(Array.isArray(F),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(Bp(F),"]")),Array.isArray(F)&&(j=F)}return x().createElement("g",{className:"recharts-cartesian-grid"},x().createElement(By,{fill:c.fill,fillOpacity:c.fillOpacity,x:c.x,y:c.y,width:c.width,height:c.height,ry:c.ry}),x().createElement(Bw,Bx({},c,{offset:A,horizontalPoints:B,xAxis:y,yAxis:v})),x().createElement(Bk,Bx({},c,{offset:A,verticalPoints:j,xAxis:y,yAxis:v})),x().createElement(BB,Bx({},c,{horizontalPoints:B})),x().createElement(Bj,Bx({},c,{verticalPoints:j})))}BF.displayName="CartesianGrid";var BE=["points","className","baseLinePoints","connectNulls"];function BO(){return(BO=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function BP(e){return function(e){if(Array.isArray(e))return BI(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return BI(e,void 0);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return BI(e,void 0)}}(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function BI(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var BU=function(e){return e&&e.x===+e.x&&e.y===+e.y},BL=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=[[]];return e.forEach(function(e){BU(e)?t[t.length-1].push(e):t[t.length-1].length>0&&t.push([])}),BU(e[0])&&t[t.length-1].push(e[0]),t[t.length-1].length<=0&&(t=t.slice(0,-1)),t},B_=function(e,t){var r=BL(e);t&&(r=[r.reduce(function(e,t){return[].concat(BP(e),BP(t))},[])]);var n=r.map(function(e){return e.reduce(function(e,t,r){return"".concat(e).concat(0===r?"M":"L").concat(t.x,",").concat(t.y)},"")}).join("");return 1===r.length?"".concat(n,"Z"):n},BQ=function(e,t,r){var n=B_(e,r);return"".concat("Z"===n.slice(-1)?n.slice(0,-1):n,"L").concat(B_(t.reverse(),r).slice(1))},BT=function(e){var t=e.points,r=e.className,n=e.baseLinePoints,a=e.connectNulls,o=function(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}(e,BE);if(!t||!t.length)return null;var i=Af("recharts-polygon",r);if(n&&n.length){var s=o.stroke&&"none"!==o.stroke,l=BQ(t,n,a);return x().createElement("g",{className:i},x().createElement("path",BO({},ce(o,!0),{fill:"Z"===l.slice(-1)?o.fill:"none",stroke:"none",d:l})),s?x().createElement("path",BO({},ce(o,!0),{fill:"none",d:B_(t,a)})):null,s?x().createElement("path",BO({},ce(o,!0),{fill:"none",d:B_(n,a)})):null)}var A=B_(t,a);return x().createElement("path",BO({},ce(o,!0),{fill:"Z"===A.slice(-1)?o.fill:"none",className:i,d:A}))};function BD(e){return(BD="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function BM(){return(BM=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function BH(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function BR(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?BH(Object(r),!0).forEach(function(t){Bz(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):BH(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function BK(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,BW(n.key),n)}}function BV(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(BV=function(){return!!e})()}function Bq(e){return(Bq=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function BG(e,t){return(BG=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Bz(e,t,r){return(t=BW(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function BW(e){var t=function(e,t){if("object"!=BD(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=BD(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==BD(t)?t:t+""}var B$=Math.PI/180,BX=function(e){var t,r;function n(){var e,t;return function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,n),e=n,t=arguments,e=Bq(e),function(e,t){if(t&&("object"===BD(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,BV()?Reflect.construct(e,t||[],Bq(this).constructor):e.apply(this,t))}return function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&BG(e,t)}(n,e),t=[{key:"getTickLineCoord",value:function(e){var t=this.props,r=t.cx,n=t.cy,a=t.radius,o=t.orientation,i=t.tickSize,s=m$(r,n,a,e.coordinate),l=m$(r,n,a+("inner"===o?-1:1)*(i||8),e.coordinate);return{x1:s.x,y1:s.y,x2:l.x,y2:l.y}}},{key:"getTickTextAnchor",value:function(e){var t=this.props.orientation,r=Math.cos(-e.coordinate*B$);return r>1e-5?"outer"===t?"start":"end":r<-.00001?"outer"===t?"end":"start":"middle"}},{key:"renderAxisLine",value:function(){var e=this.props,t=e.cx,r=e.cy,n=e.radius,a=e.axisLine,o=e.axisLineType,i=BR(BR({},ce(this.props,!1)),{},{fill:"none"},ce(a,!1));if("circle"===o)return x().createElement(gK,BM({className:"recharts-polar-angle-axis-line"},i,{cx:t,cy:r,r:n}));var s=this.props.ticks.map(function(e){return m$(t,r,n,e.coordinate)});return x().createElement(BT,BM({className:"recharts-polar-angle-axis-line"},i,{points:s}))}},{key:"renderTicks",value:function(){var e=this,t=this.props,r=t.ticks,a=t.tick,o=t.tickLine,i=t.tickFormatter,s=t.stroke,l=ce(this.props,!1),A=ce(a,!1),c=BR(BR({},l),{},{fill:"none"},ce(o,!1)),d=r.map(function(t,r){var d=e.getTickLineCoord(t),u=BR(BR(BR({textAnchor:e.getTickTextAnchor(t)},l),{},{stroke:"none",fill:s},A),{},{index:r,payload:t,x:d.x2,y:d.y2});return x().createElement(f4,BM({className:Af("recharts-polar-angle-axis-tick",m1(a)),key:"tick-".concat(t.coordinate)},A$(e.props,t,r)),o&&x().createElement("line",BM({className:"recharts-polar-angle-axis-tick-line"},c,d)),a&&n.renderTickItem(a,u,i?i(t.value,r):t.value))});return x().createElement(f4,{className:"recharts-polar-angle-axis-ticks"},d)}},{key:"render",value:function(){var e=this.props,t=e.ticks,r=e.radius,n=e.axisLine;return!(r<=0)&&t&&t.length?x().createElement(f4,{className:Af("recharts-polar-angle-axis",this.props.className)},n&&this.renderAxisLine(),this.renderTicks()):null}}],r=[{key:"renderTickItem",value:function(e,t,r){return x().isValidElement(e)?x().cloneElement(e,t):Aw()(e)?e(t):x().createElement(bP,BM({},t,{className:"recharts-polar-angle-axis-tick-value"}),r)}}],t&&BK(n.prototype,t),r&&BK(n,r),Object.defineProperty(n,"prototype",{writable:!1}),n}(g.PureComponent);Bz(BX,"displayName","PolarAngleAxis"),Bz(BX,"axisType","angleAxis"),Bz(BX,"defaultProps",{type:"category",angleAxisId:0,scale:"auto",cx:0,cy:0,orientation:"outer",axisLine:!0,tickLine:!0,tickSize:8,tick:!0,hide:!1,allowDuplicatedCategory:!0});var BY=r(4344),BJ=r.n(BY),BZ=r(72175),B0=r.n(BZ),B1=["cx","cy","angle","ticks","axisLine"],B2=["ticks","tick","angle","tickFormatter","stroke"];function B5(e){return(B5="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function B4(){return(B4=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function B3(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function B6(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?B3(Object(r),!0).forEach(function(t){jr(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):B3(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function B8(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function B7(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,jn(n.key),n)}}function B9(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(B9=function(){return!!e})()}function je(e){return(je=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function jt(e,t){return(jt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function jr(e,t,r){return(t=jn(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function jn(e){var t=function(e,t){if("object"!=B5(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=B5(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==B5(t)?t:t+""}var ja=function(e){var t,r;function n(){var e,t;return function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,n),e=n,t=arguments,e=je(e),function(e,t){if(t&&("object"===B5(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,B9()?Reflect.construct(e,t||[],je(this).constructor):e.apply(this,t))}return function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&jt(e,t)}(n,e),t=[{key:"getTickValueCoord",value:function(e){var t=e.coordinate,r=this.props,n=r.angle;return m$(r.cx,r.cy,t,n)}},{key:"getTickTextAnchor",value:function(){var e;switch(this.props.orientation){case"left":e="end";break;case"right":e="start";break;default:e="middle"}return e}},{key:"getViewBox",value:function(){var e=this.props,t=e.cx,r=e.cy,n=e.angle,a=e.ticks,o=BJ()(a,function(e){return e.coordinate||0});return{cx:t,cy:r,startAngle:n,endAngle:n,innerRadius:B0()(a,function(e){return e.coordinate||0}).coordinate||0,outerRadius:o.coordinate||0}}},{key:"renderAxisLine",value:function(){var e=this.props,t=e.cx,r=e.cy,n=e.angle,a=e.ticks,o=e.axisLine,i=B8(e,B1),s=a.reduce(function(e,t){return[Math.min(e[0],t.coordinate),Math.max(e[1],t.coordinate)]},[1/0,-1/0]),l=m$(t,r,s[0],n),A=m$(t,r,s[1],n),c=B6(B6(B6({},ce(i,!1)),{},{fill:"none"},ce(o,!1)),{},{x1:l.x,y1:l.y,x2:A.x,y2:A.y});return x().createElement("line",B4({className:"recharts-polar-radius-axis-line"},c))}},{key:"renderTicks",value:function(){var e=this,t=this.props,r=t.ticks,a=t.tick,o=t.angle,i=t.tickFormatter,s=t.stroke,l=B8(t,B2),A=this.getTickTextAnchor(),c=ce(l,!1),d=ce(a,!1),u=r.map(function(t,r){var l=e.getTickValueCoord(t),u=B6(B6(B6(B6({textAnchor:A,transform:"rotate(".concat(90-o,", ").concat(l.x,", ").concat(l.y,")")},c),{},{stroke:"none",fill:s},d),{},{index:r},l),{},{payload:t});return x().createElement(f4,B4({className:Af("recharts-polar-radius-axis-tick",m1(a)),key:"tick-".concat(t.coordinate)},A$(e.props,t,r)),n.renderTickItem(a,u,i?i(t.value,r):t.value))});return x().createElement(f4,{className:"recharts-polar-radius-axis-ticks"},u)}},{key:"render",value:function(){var e=this.props,t=e.ticks,r=e.axisLine,n=e.tick;return t&&t.length?x().createElement(f4,{className:Af("recharts-polar-radius-axis",this.props.className)},r&&this.renderAxisLine(),n&&this.renderTicks(),b7.renderCallByParent(this.props,this.getViewBox())):null}}],r=[{key:"renderTickItem",value:function(e,t,r){return x().isValidElement(e)?x().cloneElement(e,t):Aw()(e)?e(t):x().createElement(bP,B4({},t,{className:"recharts-polar-radius-axis-tick-value"}),r)}}],t&&B7(n.prototype,t),r&&B7(n,r),Object.defineProperty(n,"prototype",{writable:!1}),n}(g.PureComponent);function jo(e){return(jo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ji(){return(ji=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function js(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function jl(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?js(Object(r),!0).forEach(function(t){jh(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):js(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function jA(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,jf(n.key),n)}}function jc(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(jc=function(){return!!e})()}function jd(e){return(jd=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ju(e,t){return(ju=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function jh(e,t,r){return(t=jf(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function jf(e){var t=function(e,t){if("object"!=jo(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=jo(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==jo(t)?t:t+""}jr(ja,"displayName","PolarRadiusAxis"),jr(ja,"axisType","radiusAxis"),jr(ja,"defaultProps",{type:"number",radiusAxisId:0,cx:0,cy:0,angle:0,orientation:"right",stroke:"#ccc",axisLine:!0,tick:!0,tickCount:5,allowDataOverflow:!1,scale:"auto",allowDuplicatedCategory:!0});var jp=function(e){var t,r;function n(e){var t,r,a;return function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,n),r=n,a=[e],r=jd(r),jh(t=function(e,t){if(t&&("object"===jo(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,jc()?Reflect.construct(r,a||[],jd(this).constructor):r.apply(this,a)),"pieRef",null),jh(t,"sectorRefs",[]),jh(t,"id",AL("recharts-pie-")),jh(t,"handleAnimationEnd",function(){var e=t.props.onAnimationEnd;t.setState({isAnimationFinished:!0}),Aw()(e)&&e()}),jh(t,"handleAnimationStart",function(){var e=t.props.onAnimationStart;t.setState({isAnimationFinished:!1}),Aw()(e)&&e()}),t.state={isAnimationFinished:!e.isAnimationActive,prevIsAnimationActive:e.isAnimationActive,prevAnimationId:e.animationId,sectorToFocus:0},t}return function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ju(e,t)}(n,e),t=[{key:"isActiveIndex",value:function(e){var t=this.props.activeIndex;return Array.isArray(t)?-1!==t.indexOf(e):e===t}},{key:"hasActiveIndex",value:function(){var e=this.props.activeIndex;return Array.isArray(e)?0!==e.length:e||0===e}},{key:"renderLabels",value:function(e){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var t=this.props,r=t.label,a=t.labelLine,o=t.dataKey,i=t.valueKey,s=ce(this.props,!1),l=ce(r,!1),A=ce(a,!1),c=r&&r.offsetRadius||20,d=e.map(function(e,t){var d=(e.startAngle+e.endAngle)/2,u=m$(e.cx,e.cy,e.outerRadius+c,d),h=jl(jl(jl(jl({},s),e),{},{stroke:"none"},l),{},{index:t,textAnchor:n.getTextAnchor(u.x,e.cx)},u),f=jl(jl(jl(jl({},s),e),{},{fill:"none",stroke:e.fill},A),{},{index:t,points:[m$(e.cx,e.cy,e.outerRadius,d),u]}),p=o;return Ax()(o)&&Ax()(i)?p="value":Ax()(o)&&(p=i),x().createElement(f4,{key:"label-".concat(e.startAngle,"-").concat(e.endAngle,"-").concat(e.midAngle,"-").concat(t)},a&&n.renderLabelLineItem(a,f,"line"),n.renderLabelItem(r,h,mA(e,p)))});return x().createElement(f4,{className:"recharts-pie-labels"},d)}},{key:"renderSectorsStatically",value:function(e){var t=this,r=this.props,n=r.activeShape,a=r.blendStroke,o=r.inactiveShape;return e.map(function(r,i){if((null==r?void 0:r.startAngle)===0&&(null==r?void 0:r.endAngle)===0&&1!==e.length)return null;var s=t.isActiveIndex(i),l=o&&t.hasActiveIndex()?o:null,A=jl(jl({},r),{},{stroke:a?r.fill:r.stroke,tabIndex:-1});return x().createElement(f4,ji({ref:function(e){e&&!t.sectorRefs.includes(e)&&t.sectorRefs.push(e)},tabIndex:-1,className:"recharts-pie-sector"},A$(t.props,r,i),{key:"sector-".concat(null==r?void 0:r.startAngle,"-").concat(null==r?void 0:r.endAngle,"-").concat(r.midAngle,"-").concat(i)}),x().createElement(yL,ji({option:s?n:l,isActive:s,shapeType:"sector"},A)))})}},{key:"renderSectorsWithAnimation",value:function(){var e=this,t=this.props,r=t.sectors,n=t.isAnimationActive,a=t.animationBegin,o=t.animationDuration,i=t.animationEasing,s=t.animationId,l=this.state,A=l.prevSectors,c=l.prevIsAnimationActive;return x().createElement(xZ,{begin:a,duration:o,isActive:n,easing:i,from:{t:0},to:{t:1},key:"pie-".concat(s,"-").concat(c),onAnimationStart:this.handleAnimationStart,onAnimationEnd:this.handleAnimationEnd},function(t){var n=t.t,a=[],o=(r&&r[0]).startAngle;return r.forEach(function(e,t){var r=A&&A[t],i=t>0?Am()(e,"paddingAngle",0):0;if(r){var s=AD(r.endAngle-r.startAngle,e.endAngle-e.startAngle),l=jl(jl({},e),{},{startAngle:o+i,endAngle:o+s(n)+i});a.push(l),o=l.endAngle}else{var c=AD(0,e.endAngle-e.startAngle)(n),d=jl(jl({},e),{},{startAngle:o+i,endAngle:o+c+i});a.push(d),o=d.endAngle}}),x().createElement(f4,null,e.renderSectorsStatically(a))})}},{key:"attachKeyboardHandlers",value:function(e){var t=this;e.onkeydown=function(e){if(!e.altKey)switch(e.key){case"ArrowLeft":var r=++t.state.sectorToFocus%t.sectorRefs.length;t.sectorRefs[r].focus(),t.setState({sectorToFocus:r});break;case"ArrowRight":var n=--t.state.sectorToFocus<0?t.sectorRefs.length-1:t.state.sectorToFocus%t.sectorRefs.length;t.sectorRefs[n].focus(),t.setState({sectorToFocus:n});break;case"Escape":t.sectorRefs[t.state.sectorToFocus].blur(),t.setState({sectorToFocus:0})}}}},{key:"renderSectors",value:function(){var e=this.props,t=e.sectors,r=e.isAnimationActive,n=this.state.prevSectors;return r&&t&&t.length&&(!n||!fi()(n,t))?this.renderSectorsWithAnimation():this.renderSectorsStatically(t)}},{key:"componentDidMount",value:function(){this.pieRef&&this.attachKeyboardHandlers(this.pieRef)}},{key:"render",value:function(){var e=this,t=this.props,r=t.hide,n=t.sectors,a=t.className,o=t.label,i=t.cx,s=t.cy,l=t.innerRadius,A=t.outerRadius,c=t.isAnimationActive,d=this.state.isAnimationFinished;if(r||!n||!n.length||!AP(i)||!AP(s)||!AP(l)||!AP(A))return null;var u=Af("recharts-pie",a);return x().createElement(f4,{tabIndex:this.props.rootTabIndex,className:u,ref:function(t){e.pieRef=t}},this.renderSectors(),o&&this.renderLabels(n),b7.renderCallByParent(this.props,null,!1),(!c||d)&&yg.renderCallByParent(this.props,n,!1))}}],r=[{key:"getDerivedStateFromProps",value:function(e,t){return t.prevIsAnimationActive!==e.isAnimationActive?{prevIsAnimationActive:e.isAnimationActive,prevAnimationId:e.animationId,curSectors:e.sectors,prevSectors:[],isAnimationFinished:!0}:e.isAnimationActive&&e.animationId!==t.prevAnimationId?{prevAnimationId:e.animationId,curSectors:e.sectors,prevSectors:t.curSectors,isAnimationFinished:!0}:e.sectors!==t.curSectors?{curSectors:e.sectors,isAnimationFinished:!0}:null}},{key:"getTextAnchor",value:function(e,t){return e>t?"start":e<t?"end":"middle"}},{key:"renderLabelLineItem",value:function(e,t,r){if(x().isValidElement(e))return x().cloneElement(e,t);if(Aw()(e))return e(t);var n=Af("recharts-pie-label-line","boolean"!=typeof e?e.className:"");return x().createElement(wH,ji({},t,{key:r,type:"linear",className:n}))}},{key:"renderLabelItem",value:function(e,t,r){if(x().isValidElement(e))return x().cloneElement(e,t);var n=r;if(Aw()(e)&&(n=e(t),x().isValidElement(n)))return n;var a=Af("recharts-pie-label-text","boolean"==typeof e||Aw()(e)?"":e.className);return x().createElement(bP,ji({},t,{alignmentBaseline:"middle",className:a}),n)}}],t&&jA(n.prototype,t),r&&jA(n,r),Object.defineProperty(n,"prototype",{writable:!1}),n}(g.PureComponent);jh(jp,"displayName","Pie"),jh(jp,"defaultProps",{stroke:"#fff",fill:"#808080",legendType:"rect",cx:"50%",cy:"50%",startAngle:0,endAngle:360,innerRadius:0,outerRadius:"80%",paddingAngle:0,labelLine:!0,hide:!1,minAngle:0,isAnimationActive:!gO.isSsr,animationBegin:400,animationDuration:1500,animationEasing:"ease",nameKey:"name",blendStroke:!1,rootTabIndex:0}),jh(jp,"parseDeltaAngle",function(e,t){return AE(t-e)*Math.min(Math.abs(t-e),360)}),jh(jp,"getRealPieData",function(e){var t=e.data,r=e.children,n=ce(e,!1),a=A3(r,yo);return t&&t.length?t.map(function(e,t){return jl(jl(jl({payload:e},n),e),a&&a[t]&&a[t].props)}):a&&a.length?a.map(function(e){return jl(jl({},n),e.props)}):[]}),jh(jp,"parseCoordinateOfPie",function(e,t){var r=t.top,n=t.left,a=t.width,o=t.height,i=mX(a,o);return{cx:n+A_(e.cx,a,a/2),cy:r+A_(e.cy,o,o/2),innerRadius:A_(e.innerRadius,i,0),outerRadius:A_(e.outerRadius,i,.8*i),maxRadius:e.maxRadius||Math.sqrt(a*a+o*o)/2}}),jh(jp,"getComposedData",function(e){var t,r,n=e.item,a=e.offset,o=void 0!==n.type.defaultProps?jl(jl({},n.type.defaultProps),n.props):n.props,i=jp.getRealPieData(o);if(!i||!i.length)return null;var s=o.cornerRadius,l=o.startAngle,A=o.endAngle,c=o.paddingAngle,d=o.dataKey,u=o.nameKey,h=o.valueKey,f=o.tooltipType,p=Math.abs(o.minAngle),m=jp.parseCoordinateOfPie(o,a),g=jp.parseDeltaAngle(l,A),x=Math.abs(g),b=d;Ax()(d)&&Ax()(h)?(po(!1,'Use "dataKey" to specify the value of pie,\n      the props "valueKey" will be deprecated in 1.1.0'),b="value"):Ax()(d)&&(po(!1,'Use "dataKey" to specify the value of pie,\n      the props "valueKey" will be deprecated in 1.1.0'),b=h);var y=i.filter(function(e){return 0!==mA(e,b,0)}).length,v=x-y*p-(x>=360?y:y-1)*c,w=i.reduce(function(e,t){var r=mA(t,b,0);return e+(AP(r)?r:0)},0);return w>0&&(t=i.map(function(e,t){var n,a=mA(e,b,0),o=mA(e,u,t),i=(AP(a)?a:0)/w,A=(n=t?r.endAngle+AE(g)*c*(0!==a?1:0):l)+AE(g)*((0!==a?p:0)+i*v),d=(n+A)/2,h=(m.innerRadius+m.outerRadius)/2,x=[{name:o,value:a,payload:e,dataKey:b,type:f}],y=m$(m.cx,m.cy,h,d);return r=jl(jl(jl({percent:i,cornerRadius:s,name:o,tooltipPayload:x,midAngle:d,middleRadius:h,tooltipPosition:y},e),m),{},{value:mA(e,b),startAngle:n,endAngle:A,payload:e,paddingAngle:AE(g)*c})})),jl(jl({},m),{},{sectors:t,data:i})});var jm=ky({chartName:"PieChart",GraphicalChild:jp,validateTooltipEventTypes:["item"],defaultTooltipEventType:"item",legendContent:"children",axisComponents:[{axisType:"angleAxis",AxisComp:BX},{axisType:"radiusAxis",AxisComp:ja}],formatAxisMap:function(e,t,r,n,a){var o=e.width,i=e.height,s=e.startAngle,l=e.endAngle,A=A_(e.cx,o,o/2),c=A_(e.cy,i,i/2),d=mX(o,i,r),u=A_(e.innerRadius,d,0),h=A_(e.outerRadius,d,.8*d);return Object.keys(t).reduce(function(e,r){var o,i=t[r],d=i.domain,f=i.reversed;if(Ax()(i.range))"angleAxis"===n?o=[s,l]:"radiusAxis"===n&&(o=[u,h]),f&&(o=[o[1],o[0]]);else{var p,m=function(e){if(Array.isArray(e))return e}(p=o=i.range)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o,i,s=[],l=!0,A=!1;try{for(o=(r=r.call(e)).next;!(l=(n=o.call(r)).done)&&(s.push(n.value),2!==s.length);l=!0);}catch(e){A=!0,a=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(A)throw a}}return s}}(p,2)||function(e,t){if(e){if("string"==typeof e)return mz(e,2);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return mz(e,2)}}(p,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}();s=m[0],l=m[1]}var g=mB(i,a),x=g.realScaleType,b=g.scale;b.domain(d).range(o),mj(b);var y=mO(b,mq(mq({},i),{},{realScaleType:x})),v=mq(mq(mq({},i),y),{},{range:o,radius:h,realScaleType:x,scale:b,cx:A,cy:c,innerRadius:u,outerRadius:h,startAngle:s,endAngle:l});return mq(mq({},e),{},mG({},r,v))},{})},defaultProps:{layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"}});let jg=({title:e,value:t,children:r,className:n=""})=>(0,m.jsxs)("div",{className:`bg-card dark:bg-dark-card p-4 rounded-xl shadow-sm border border-border dark:border-dark-border flex items-center space-x-4 ${n}`,variants:{hidden:{y:20,opacity:0},visible:{y:0,opacity:1}},children:[m.jsx("div",{className:"bg-muted dark:bg-dark-muted text-primary dark:text-dark-primary p-3 rounded-lg",children:r}),(0,m.jsxs)("div",{children:[m.jsx("p",{className:"text-sm text-foreground-muted dark:text-dark-foreground-muted font-semibold",children:e}),m.jsx("p",{className:"text-xl font-bold text-foreground dark:text-dark-foreground",children:t})]})]}),jx=({label:e,range:t,activeRange:r,onClick:n})=>m.jsx("button",{onClick:()=>n(t),className:`px-4 py-1.5 text-sm font-bold rounded-lg transition-colors duration-200 ${r===t?"bg-card dark:bg-dark-card text-primary dark:text-dark-primary shadow-sm":"text-foreground-muted dark:text-dark-foreground-muted hover:text-foreground dark:hover:text-dark-foreground"}`,children:e}),jb=e=>{let{cx:t,cy:r,innerRadius:n,outerRadius:a,startAngle:o,endAngle:i,fill:s,payload:l,percent:A}=e;return(0,m.jsxs)("g",{children:[m.jsx("text",{x:t,y:r,dy:-5,textAnchor:"middle",fill:s,className:"font-bold text-base",children:l.name}),m.jsx("text",{x:t,y:r,dy:15,textAnchor:"middle",fill:"#64748b",className:"text-xs",children:`${(100*A).toFixed(2)}%`}),m.jsx(ge,{cx:t,cy:r,innerRadius:n,outerRadius:a+4,startAngle:o,endAngle:i,fill:s})]})},jy={revenue:(0,m.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24",fill:"currentColor",children:[m.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2Zm0 15a5 5 0 1 1 0-10 5 5 0 0 1 0 10Z"}),m.jsx("path",{d:"M12 14c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2Z"})]}),profit:m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24",fill:"currentColor",children:m.jsx("path",{d:"M16 6l2.29 2.29-4.88 4.88-4-4L2 16.59 3.41 18l6-6 4 4 6.3-6.29L22 12V6z"})}),cogs:(0,m.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24",fill:"currentColor",children:[m.jsx("path",{d:"M2 13h10v9H2v-9Z"}),m.jsx("path",{d:"m22 8-10 5-10-5 10-5 10 5Z"}),m.jsx("path",{d:"M12 13h10v9H12v-9Z"})]}),payout:(0,m.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24",fill:"currentColor",children:[m.jsx("path",{d:"M15 15H3c-1.1 0-2-.9-2-2V5c0-1.1.9-2 2-2h12c1.1 0 2 .9 2 2v2h-4c-1.1 0-2 .9-2 2v2c0 1.1.9 2 2 2h4v2c0 1.1-.9 2-2 2Z"}),m.jsx("path",{d:"M23 7v10c0 1.1-.9 2-2 2h-1V7h3Zm-5 2h2v6h-2V9Z"})]}),workOrder:m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:m.jsx("path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z"})})},jv=({sales:e,products:t,suppliers:r,supplierInvoices:n,settings:a,expenses:o,workOrders:i})=>{let[s]=oy(),[l,A]=(0,g.useState)("7d"),[c,d]=(0,g.useState)(0),u=(0,g.useMemo)(()=>new Map(t.map(e=>[e.id,e.costPrice||0])),[t]),{filteredSales:h,filteredExpenses:f}=(0,g.useMemo)(()=>{let t=new Date,r=new Date(t.getFullYear(),t.getMonth(),t.getDate()),n=new Date;return"today"===l?n=r:"7d"===l?n=new Date(new Date().setDate(r.getDate()-6)):"30d"===l&&(n=new Date(new Date().setDate(r.getDate()-29))),n.setHours(0,0,0,0),{filteredSales:e.filter(e=>new Date(e.date)>=n),filteredExpenses:o.filter(e=>new Date(e.date)>=n)}},[e,o,l]),p=(0,g.useMemo)(()=>{let e=h.reduce((e,t)=>e+t.total,0),t=h.reduce((e,t)=>e+t.items.reduce((e,t)=>e+(u.get(t.id)||0)*Math.abs(t.quantity),0),0),r=f.reduce((e,t)=>e+t.amount,0);return{totalRevenue:e,netProfit:e-t-r,totalCogs:t,totalPayouts:r,openWorkOrders:i.filter(e=>"Pending"===e.status||"InProgress"===e.status).length,outstandingWoBalance:i.reduce((e,t)=>e+t.balanceDue,0)}},[h,f,u,i]),x=(0,g.useMemo)(()=>{let e={};h.forEach(t=>{let r=new Date(t.date).toLocaleDateString("en-CA",{timeZone:"Africa/Nairobi"});e[r]||(e[r]={sales:0,profit:0});let n=t.items.reduce((e,t)=>e+(u.get(t.id)||0)*Math.abs(t.quantity),0);e[r].sales+=t.total,e[r].profit+=t.total-n}),f.forEach(t=>{let r=new Date(t.date).toLocaleDateString("en-CA",{timeZone:"Africa/Nairobi"});e[r]?e[r].profit-=t.amount:e[r]={sales:0,profit:-t.amount}});let t=[],r="today"===l?1:"7d"===l?7:30,n=new Date,a=new Date(n.getFullYear(),n.getMonth(),n.getDate());for(let n=r-1;n>=0;n--){let r=new Date(a.getTime()-864e5*n),o=r.toLocaleDateString("en-CA",{timeZone:"Africa/Nairobi"}),i=r.toLocaleDateString("en-GB",{month:"short",day:"numeric",timeZone:"Africa/Nairobi"});t.push({name:i,Sales:e[o]?.sales||0,"Net Profit":e[o]?.profit||0})}return t},[h,f,l,u]),b=(0,g.useMemo)(()=>{let e={};return h.forEach(t=>{t.payments.forEach(t=>{e[t.method]=(e[t.method]||0)+t.amount})}),Object.entries(e).map(([e,t])=>({name:e,value:t}))},[h]),y="dark"===s?["#34d399","#60a5fa","#fde047","#c4b5fd"]:["#10b981","#3b82f6","#facc15","#a78bfa"];return(0,m.jsxs)("div",{className:"p-4 md:p-8 h-full overflow-y-auto",children:[(0,m.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[m.jsx("h1",{className:"text-3xl font-bold text-foreground dark:text-dark-foreground",children:"Dashboard"}),(0,m.jsxs)("div",{className:"flex space-x-1 bg-muted dark:bg-dark-muted p-1 rounded-lg",children:[m.jsx(jx,{label:"Today",range:"today",activeRange:l,onClick:A}),m.jsx(jx,{label:"Last 7 Days",range:"7d",activeRange:l,onClick:A}),m.jsx(jx,{label:"Last 30 Days",range:"30d",activeRange:l,onClick:A})]})]}),(0,m.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-6 gap-6 mb-6",variants:{hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.05}}},initial:"hidden",animate:"visible",children:[m.jsx(jg,{title:"Total Revenue",value:`Ksh ${p.totalRevenue.toFixed(2)}`,children:jy.revenue}),m.jsx(jg,{title:"Net Profit",value:`Ksh ${p.netProfit.toFixed(2)}`,className:p.netProfit<0?"text-danger dark:text-dark-danger":"text-success dark:text-dark-success",children:jy.profit}),m.jsx(jg,{title:"Expenses",value:`Ksh ${p.totalPayouts.toFixed(2)}`,children:jy.payout}),m.jsx(jg,{title:"COGS",value:`Ksh ${p.totalCogs.toFixed(2)}`,children:jy.cogs}),m.jsx(jg,{title:"Open Work Orders",value:`${p.openWorkOrders}`,children:jy.workOrder}),m.jsx(jg,{title:"Outstanding Balances",value:`Ksh ${p.outstandingWoBalance.toFixed(2)}`,className:p.outstandingWoBalance>0?"text-warning dark:text-dark-warning":"",children:jy.workOrder})]}),(0,m.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,m.jsxs)("div",{className:"lg:col-span-2 bg-card dark:bg-dark-card p-4 rounded-xl shadow-sm border border-border dark:border-dark-border",children:[m.jsx("h3",{className:"font-bold text-foreground dark:text-dark-foreground mb-4",children:"Sales & Profit Over Time"}),m.jsx(gs,{width:"100%",height:300,children:(0,m.jsxs)(Bu,{data:x,children:[m.jsx(BF,{strokeDasharray:"3 3",strokeOpacity:.2}),m.jsx(Br,{dataKey:"name",stroke:"dark"===s?"#94a3b8":"#64748b",fontSize:12}),m.jsx(Bd,{stroke:"dark"===s?"#94a3b8":"#64748b",fontSize:12}),m.jsx(gH,{contentStyle:{backgroundColor:"dark"===s?"#1e293b":"#ffffff",border:"1px solid #334155"}}),m.jsx(p7,{}),m.jsx(k_,{type:"monotone",dataKey:"Sales",stroke:"#3b82f6",strokeWidth:2}),m.jsx(k_,{type:"monotone",dataKey:"Net Profit",stroke:"#10b981",strokeWidth:2})]})})]}),(0,m.jsxs)("div",{className:"bg-card dark:bg-dark-card p-4 rounded-xl shadow-sm border border-border dark:border-dark-border",children:[m.jsx("h3",{className:"font-bold text-foreground dark:text-dark-foreground mb-4",children:"Payments by Type"}),m.jsx(gs,{width:"100%",height:300,children:m.jsx(jm,{children:m.jsx(jp,{data:b,dataKey:"value",nameKey:"name",cx:"50%",cy:"50%",innerRadius:60,outerRadius:80,activeIndex:c,activeShape:jb,onMouseEnter:(e,t)=>d(t),children:b.map((e,t)=>m.jsx(yo,{fill:y[t%y.length]},`cell-${t}`))})})})]})]})]})},jw=({onClose:e,onSave:t,product:r,settings:n,products:a})=>{let o=!!r,[i,s]=(0,g.useState)({name:"",upc:"",description:"",category:"Uncategorized",price:0,pricingType:n.tax.pricingType,productType:"Inventory",costPrice:0,unitOfMeasure:"pc(s)",imageUrl:""});(0,g.useEffect)(()=>{r&&s({name:r.name,upc:r.upc||"",description:r.description||"",category:r.category,price:r.price,pricingType:r.pricingType,productType:r.productType,costPrice:r.costPrice||0,unitOfMeasure:r.unitOfMeasure||"pc(s)",imageUrl:r.imageUrl||""})},[r]);let{profitMargin:l,grossProfit:A}=(0,g.useMemo)(()=>{let{price:e,costPrice:t}=i;if(t<=0||e<=0)return{profitMargin:0,grossProfit:0};let r=e/(1+n.tax.vatRate/100)-t;return{profitMargin:r/t*100,grossProfit:r}},[i.price,i.costPrice,n.tax.vatRate]),c=e=>{let{name:t,value:r}=e.target,n=["price","costPrice"].includes(t);s(e=>({...e,[t]:n?parseFloat(r)||0:r}))},d=n.inventory?.definedCategories||[];return m.jsx("div",{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50 p-4",children:(0,m.jsxs)("div",{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{type:"spring",stiffness:300,damping:30},className:"bg-card dark:bg-dark-card rounded-xl shadow-2xl w-full max-w-2xl max-h-[90vh] flex flex-col",children:[(0,m.jsxs)("div",{className:"flex justify-between items-center p-6 border-b border-border dark:border-dark-border",children:[m.jsx("h2",{className:"text-2xl font-bold text-foreground dark:text-dark-foreground",children:o?"Edit Product":"Add New Product"}),m.jsx("button",{onClick:e,className:"text-foreground-muted hover:text-foreground",children:"\xd7"})]}),(0,m.jsxs)("form",{onSubmit:e=>{e.preventDefault(),o&&r?t({...r,...i}):t(i)},className:"p-6 space-y-4 overflow-y-auto",children:[(0,m.jsxs)("div",{children:[m.jsx("label",{className:"block text-sm font-medium",children:"Product Name *"}),m.jsx("input",{type:"text",name:"name",value:i.name,onChange:c,required:!0,className:"mt-1 w-full p-2 border rounded-md"})]}),(0,m.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,m.jsxs)("div",{children:[m.jsx("label",{className:"block text-sm font-medium",children:"Product Type"}),(0,m.jsxs)("select",{name:"productType",value:i.productType,onChange:c,className:"mt-1 w-full p-2 border rounded-md",children:[m.jsx("option",{value:"Inventory",children:"Inventory (Track Stock)"}),m.jsx("option",{value:"Service",children:"Service (No Stock)"})]})]}),(0,m.jsxs)("div",{children:[m.jsx("label",{className:"block text-sm font-medium",children:"Category"}),m.jsx("input",{type:"text",name:"category",value:i.category,onChange:c,list:"category-suggestions",className:"mt-1 w-full p-2 border rounded-md"}),m.jsx("datalist",{id:"category-suggestions",children:d.map(e=>m.jsx("option",{value:e.path},e.path))})]})]}),(0,m.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,m.jsxs)("div",{children:[m.jsx("label",{className:"block text-sm font-medium",children:"Selling Price (incl. VAT) *"}),m.jsx("input",{type:"number",name:"price",value:i.price,onChange:c,required:!0,min:"0",step:"0.01",className:"mt-1 w-full p-2 border rounded-md"})]}),"Inventory"===i.productType&&(0,m.jsxs)("div",{children:[m.jsx("label",{className:"block text-sm font-medium",children:"Cost Price (excl. VAT)"}),m.jsx("input",{type:"number",name:"costPrice",value:i.costPrice,onChange:c,min:"0",step:"0.01",className:"mt-1 w-full p-2 border rounded-md"})]})]}),"Inventory"===i.productType&&i.costPrice>0&&i.price>0&&(0,m.jsxs)("div",{className:"p-3 bg-muted dark:bg-dark-muted rounded-md text-sm border border-border dark:border-dark-border",children:[(0,m.jsxs)("div",{className:"flex justify-between",children:[m.jsx("span",{className:"text-foreground-muted",children:"Gross Profit (per item):"}),(0,m.jsxs)("span",{className:"font-semibold font-mono text-green-600 dark:text-green-400",children:["Ksh ",A.toFixed(2)]})]}),(0,m.jsxs)("div",{className:"flex justify-between",children:[m.jsx("span",{className:"text-foreground-muted",children:"Profit Margin:"}),(0,m.jsxs)("span",{className:"font-semibold font-mono text-green-600 dark:text-green-400",children:[l.toFixed(2),"%"]})]})]}),(0,m.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,m.jsxs)("div",{children:[m.jsx("label",{className:"block text-sm font-medium",children:"SKU / Inventory Code"}),m.jsx("input",{type:"text",value:r?.inventoryCode||"Auto-generated",readOnly:!0,className:"mt-1 w-full p-2 border rounded-md bg-muted dark:bg-dark-muted"})]}),(0,m.jsxs)("div",{children:[m.jsx("label",{className:"block text-sm font-medium",children:"UPC / Barcode"}),m.jsx("input",{type:"text",name:"upc",value:i.upc,onChange:c,className:"mt-1 w-full p-2 border rounded-md"})]})]}),"Inventory"===i.productType&&(0,m.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,m.jsxs)("div",{children:[m.jsx("label",{className:"block text-sm font-medium",children:"Unit of Measure"}),m.jsx("input",{type:"text",name:"unitOfMeasure",value:i.unitOfMeasure,onChange:c,list:"unit-suggestions",className:"mt-1 w-full p-2 border rounded-md"}),m.jsx("datalist",{id:"unit-suggestions",children:n.measurements?.units.map(e=>m.jsx("option",{value:e},e))})]}),(0,m.jsxs)("div",{children:[m.jsx("label",{className:"block text-sm font-medium",children:"Current Stock"}),m.jsx("input",{type:"number",value:r?.stock||0,readOnly:!0,className:"mt-1 w-full p-2 border rounded-md bg-muted dark:bg-dark-muted"})]})]}),(0,m.jsxs)("div",{children:[m.jsx("label",{className:"block text-sm font-medium",children:"Description"}),m.jsx("textarea",{name:"description",value:i.description,onChange:c,rows:3,className:"mt-1 w-full p-2 border rounded-md"})]}),(0,m.jsxs)("div",{className:"mt-8 flex justify-end space-x-3",children:[m.jsx("button",{type:"button",onClick:e,whileTap:{scale:.95},className:"bg-muted dark:bg-dark-muted font-bold px-4 py-2 rounded-lg",children:"Cancel"}),m.jsx("button",{type:"submit",whileTap:{scale:.95},className:"bg-primary text-primary-content font-bold px-6 py-2 rounded-lg",children:"Save Product"})]})]})]})})},jk=[{key:"name",label:"Product Name"},{key:"upc",label:"Barcode"},{key:"costPrice",label:"Unit Cost"},{key:"price",label:"Selling Price"},{key:"description",label:"Description"},{key:"inventoryCode",label:"SKU / Barcode"},{key:"stock",label:"Stock Quantity"},{key:"category",label:"Category"},{key:"unitOfMeasure",label:"Unit of Measure"}],jB=({onClose:e,onExport:t})=>{let[r,n]=(0,g.useState)(jk.map(e=>e.key)),a=e=>{n(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])},o=e=>{if(0===r.length){alert("Please select at least one field to export.");return}t(r,e)};return m.jsx("div",{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50 p-4",onClick:e,children:(0,m.jsxs)("div",{initial:{scale:.9,y:20,opacity:0},animate:{scale:1,y:0,opacity:1},exit:{scale:.9,y:20,opacity:0},transition:{type:"spring",stiffness:300,damping:30},className:"bg-card dark:bg-dark-card rounded-xl shadow-2xl w-full max-w-lg max-h-[90vh] flex flex-col",onClick:e=>e.stopPropagation(),children:[(0,m.jsxs)("div",{className:"flex-shrink-0 flex justify-between items-center p-6 border-b border-border dark:border-dark-border",children:[m.jsx("h2",{className:"text-2xl font-bold text-foreground dark:text-dark-foreground",children:"Export Inventory"}),m.jsx("button",{onClick:e,className:"text-foreground-muted hover:text-foreground dark:text-dark-foreground-muted dark:hover:text-dark-foreground",children:"\xd7"})]}),(0,m.jsxs)("div",{className:"p-6 overflow-y-auto space-y-6",children:[(0,m.jsxs)("div",{children:[(0,m.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[m.jsx("label",{className:"block text-sm font-medium text-foreground dark:text-dark-foreground",children:"Select Fields to Export"}),(0,m.jsxs)("div",{className:"space-x-2",children:[m.jsx("button",{onClick:()=>n(jk.map(e=>e.key)),className:"text-xs font-semibold text-primary dark:text-dark-primary",children:"Select All"}),m.jsx("button",{onClick:()=>n([]),className:"text-xs font-semibold text-primary dark:text-dark-primary",children:"Deselect All"})]})]}),m.jsx("div",{className:"grid grid-cols-2 gap-x-6 gap-y-2 p-4 border border-border dark:border-dark-border rounded-lg bg-background dark:bg-dark-background",children:jk.map(e=>(0,m.jsxs)("label",{className:"flex items-center space-x-2",children:[m.jsx("input",{type:"checkbox",checked:r.includes(e.key),onChange:()=>a(e.key),className:"h-4 w-4 rounded text-primary border-border focus:ring-primary"}),m.jsx("span",{className:"text-sm text-foreground dark:text-dark-foreground",children:e.label})]},e.key))})]}),(0,m.jsxs)("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-foreground dark:text-dark-foreground mb-2",children:"Export Format"}),(0,m.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,m.jsxs)("button",{onClick:()=>o("xls"),className:"flex flex-col items-center justify-center p-4 border-2 border-border dark:border-dark-border rounded-lg hover:border-primary dark:hover:border-dark-primary transition-colors",children:[m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8 text-green-600 mb-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),m.jsx("span",{className:"font-semibold text-foreground dark:text-dark-foreground",children:"Excel (.xls)"})]}),(0,m.jsxs)("button",{onClick:()=>o("csv"),className:"flex flex-col items-center justify-center p-4 border-2 border-border dark:border-dark-border rounded-lg hover:border-primary dark:hover:border-dark-primary transition-colors",children:[m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8 text-blue-600 mb-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),m.jsx("span",{className:"font-semibold text-foreground dark:text-dark-foreground",children:"CSV (.csv)"})]})]})]})]}),m.jsx("div",{className:"flex-shrink-0 mt-auto flex justify-end p-6 border-t border-border dark:border-dark-border",children:m.jsx("button",{type:"button",onClick:e,whileTap:{scale:.95},className:"bg-muted dark:bg-dark-muted text-foreground dark:text-dark-foreground font-bold px-4 py-2 rounded-lg hover:bg-border dark:hover:bg-dark-border",children:"Cancel"})})]})})},jj=({title:e,value:t,subtitle:r,icon:n,iconBgColor:a})=>(0,m.jsxs)("div",{className:"bg-white dark:bg-dark-card p-4 rounded-lg shadow-sm flex items-center space-x-4",children:[m.jsx("div",{className:`p-3 rounded-lg ${a}`,children:n}),(0,m.jsxs)("div",{children:[m.jsx("p",{className:"text-sm text-foreground-muted dark:text-dark-foreground-muted",children:e}),m.jsx("p",{className:"text-2xl font-bold text-foreground dark:text-dark-foreground",children:t}),m.jsx("p",{className:"text-xs text-foreground-muted dark:text-dark-foreground-muted",children:r})]})]}),jC=({products:e,onAddProduct:t,onUpdateProduct:r,onDeleteProductRequest:n,permissions:a,onImportProducts:o,onPrintBarcodeRequest:i,onAddToPORequest:s,settings:l})=>{let[A,c]=(0,g.useState)(""),[d,u]=(0,g.useState)(!1),[h,f]=(0,g.useState)(!1),[p,b]=(0,g.useState)(void 0),y=(0,g.useRef)(null),v=a.includes("edit_inventory"),w=a.includes("delete_inventory"),k=(0,g.useMemo)(()=>e.filter(e=>{let t=A.toLowerCase();return e.name.toLowerCase().includes(t)||e.inventoryCode.toLowerCase().includes(t)||e.upc&&e.upc.toLowerCase().includes(t)}).sort((e,t)=>e.name.localeCompare(t.name)),[e,A]),B=e=>{b(e),u(!0)},j=async e=>{"id"in e?r(e):await t(e),u(!1),b(void 0)},C=l.inventory?.lowStockThreshold??10,N=e.filter(e=>"Inventory"===e.productType&&e.stock<=C).length,S=e.reduce((e,t)=>e+(t.costPrice||0)*t.stock,0),F=e.reduce((e,t)=>e+t.price*t.stock,0),E=e=>`${l.businessInfo.currency} ${e.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})}`,O=()=>(0,m.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),m.jsx("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})]}),P=()=>(0,m.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("polyline",{points:"3 6 5 6 21 6"}),m.jsx("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"}),m.jsx("line",{x1:"10",y1:"11",x2:"10",y2:"17"}),m.jsx("line",{x1:"14",y1:"11",x2:"14",y2:"17"})]});return(0,m.jsxs)("div",{className:"p-4 md:p-6 bg-muted dark:bg-dark-muted min-h-full",children:[(0,m.jsxs)(Q,{children:[d&&m.jsx(jw,{onClose:()=>u(!1),onSave:j,product:p,settings:l,products:e}),h&&m.jsx(jB,{onClose:()=>f(!1),onExport:(t,r)=>{let n=e.map(e=>t.map(t=>{let r=e[t];return null==r?"":String(r).replace(/"/g,'""')})),a=(e,t,r)=>{let n=new Blob([e],{type:t}),a=document.createElement("a"),o=URL.createObjectURL(n);a.setAttribute("href",o),a.setAttribute("download",r),a.style.visibility="hidden",document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(o)};"csv"===r?a([t.join(","),...n.map(e=>e.map(e=>`"${e}"`).join(","))].join("\n"),"text/csv;charset=utf-8;","inventory.csv"):a(`
                <html xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:x="urn:schemas-microsoft-com:office:excel" xmlns="http://www.w3.org/TR/REC-html40">
                <head><!--[if gte mso 9]><xml><x:ExcelWorkbook><x:ExcelWorksheets><x:ExcelWorksheet><x:Name>Inventory</x:Name><x:WorksheetOptions><x:DisplayGridlines/></x:WorksheetOptions></x:ExcelWorksheet></x:ExcelWorksheets></x:ExcelWorkbook></xml><![endif]--></head>
                <body><table>
                    <thead><tr>${t.map(e=>`<th>${e}</th>`).join("")}</tr></thead>
                    <tbody>${n.map(e=>`<tr>${e.map(e=>`<td>${e}</td>`).join("")}</tr>`).join("")}</tbody>
                </table></body></html>`,"application/vnd.ms-excel","inventory.xls"),f(!1)}})]}),(0,m.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,m.jsxs)("div",{children:[m.jsx("h1",{className:"text-2xl font-bold text-foreground dark:text-dark-foreground",children:"Inventory Management"}),m.jsx("p",{className:"text-sm text-foreground-muted dark:text-dark-foreground-muted",children:"Manage your products and stock levels"})]}),(0,m.jsxs)("div",{className:"flex items-center space-x-2",children:[m.jsx("input",{type:"file",ref:y,className:"hidden",accept:".csv",onChange:e=>{let t=e.target.files?.[0];t&&o(t)}}),(0,m.jsxs)("button",{onClick:()=>{y.current?.click()},whileTap:{scale:.95},className:"bg-white text-gray-700 font-bold px-4 py-2 rounded-lg border border-gray-300 hover:bg-gray-100 transition-colors shadow-sm flex items-center",children:[m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24",stroke:"currentColor",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"})}),"Import"]}),(0,m.jsxs)("button",{onClick:()=>f(!0),whileTap:{scale:.95},className:"bg-white text-gray-700 font-bold px-4 py-2 rounded-lg border border-gray-300 hover:bg-gray-100 transition-colors shadow-sm flex items-center",children:[m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24",stroke:"currentColor",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),"Export"]}),v&&(0,m.jsxs)("button",{onClick:()=>{b(void 0),u(!0)},whileTap:{scale:.95},className:"bg-primary text-primary-content font-bold px-4 py-2 rounded-lg hover:bg-primary-focus transition-colors shadow-sm flex items-center",children:[m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24",stroke:"currentColor",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Add Product"]})]})]}),(0,m.jsxs)("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-6 mb-6",children:[m.jsx(jj,{title:"Total Products",value:String(e.length),subtitle:"Active products",icon:x().cloneElement(ox.inventory,{className:"w-6 h-6"}),iconBgColor:"bg-blue-100 dark:bg-blue-900/50 text-blue-600 dark:text-blue-300"}),m.jsx(jj,{title:"Low Stock Items",value:String(N),subtitle:"Need reordering",icon:(0,m.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("path",{d:"m21.73 18-8-14a2 2 0 0 0-3.46 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z"}),m.jsx("line",{x1:"12",y1:"9",x2:"12",y2:"13"}),m.jsx("line",{x1:"12",y1:"17",x2:"12.01",y2:"17"})]}),iconBgColor:"bg-amber-100 dark:bg-amber-900/50 text-amber-600 dark:text-amber-300"}),m.jsx(jj,{title:"Total Stock Value",value:E(S),subtitle:"At cost price",icon:x().cloneElement(ox.profitReport,{className:"w-6 h-6"}),iconBgColor:"bg-green-100 dark:bg-green-900/50 text-green-600 dark:text-green-300"}),m.jsx(jj,{title:"Potential Retail Value",value:E(F),subtitle:"At selling price",icon:x().cloneElement(ox.revenue,{className:"w-6 h-6"}),iconBgColor:"bg-purple-100 dark:bg-purple-900/50 text-purple-600 dark:text-purple-300"})]}),m.jsx("div",{className:"mb-4",children:(0,m.jsxs)("div",{className:"relative",children:[m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-foreground-muted dark:text-dark-foreground-muted absolute top-1/2 left-4 -translate-y-1/2",fill:"none",viewBox:"0 0 24",stroke:"currentColor",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),m.jsx("input",{type:"text",placeholder:"Search products by name or SKU...",className:"w-full pl-12 pr-4 py-3 rounded-lg border-0 bg-white dark:bg-dark-card focus:outline-none focus:ring-2 focus:ring-primary",value:A,onChange:e=>c(e.target.value)})]})}),(0,m.jsxs)("div",{className:"bg-white dark:bg-dark-card rounded-lg shadow-sm",children:[m.jsx("div",{className:"p-4 border-b border-border dark:border-dark-border",children:m.jsx("h2",{className:"text-lg font-semibold text-foreground dark:text-dark-foreground",children:"Products"})}),m.jsx("div",{className:"overflow-x-auto",children:(0,m.jsxs)("table",{className:"w-full text-sm text-left text-foreground-muted dark:text-dark-foreground-muted",children:[m.jsx("thead",{className:"text-xs text-foreground dark:text-dark-foreground uppercase bg-muted dark:bg-dark-muted",children:(0,m.jsxs)("tr",{children:[m.jsx("th",{scope:"col",className:"px-6 py-3",children:"Product"}),m.jsx("th",{scope:"col",className:"px-6 py-3",children:"SKU"}),m.jsx("th",{scope:"col",className:"px-6 py-3",children:"Category"}),m.jsx("th",{scope:"col",className:"px-6 py-3",children:"Price"}),m.jsx("th",{scope:"col",className:"px-6 py-3",children:"Stock"}),m.jsx("th",{scope:"col",className:"px-6 py-3",children:"Status"}),m.jsx("th",{scope:"col",className:"px-6 py-3 text-right",children:"Actions"})]})}),(0,m.jsxs)("tbody",{className:"divide-y divide-border dark:divide-dark-border",children:[k.map(e=>(0,m.jsxs)("tr",{className:"hover:bg-muted dark:hover:bg-dark-muted",children:[m.jsx("td",{scope:"row",className:"px-6 py-4 font-semibold text-foreground dark:text-dark-foreground whitespace-nowrap",children:e.name}),m.jsx("td",{className:"px-6 py-4 font-mono",children:e.inventoryCode}),m.jsx("td",{className:"px-6 py-4",children:e.category}),m.jsx("td",{className:"px-6 py-4 font-mono",children:E(e.price)}),m.jsx("td",{className:"px-6 py-4",children:(0,m.jsxs)("span",{className:"px-2.5 py-1 text-xs font-semibold text-white bg-gray-800 rounded-full",children:[e.stock," ","pc(s)"===e.unitOfMeasure?`piece${1===e.stock?"":"s"}`:e.unitOfMeasure]})}),m.jsx("td",{className:"px-6 py-4",children:m.jsx("span",{className:"px-2.5 py-1 text-xs font-semibold text-white bg-gray-800 rounded-full",children:"Active"})}),(0,m.jsxs)("td",{className:"px-6 py-4 text-right space-x-4 whitespace-nowrap",children:[v&&m.jsx("button",{onClick:()=>B(e),className:"text-foreground-muted hover:text-primary",children:m.jsx(O,{})}),w&&m.jsx("button",{onClick:()=>n(e),className:"text-foreground-muted hover:text-danger",children:m.jsx(P,{})})]})]},e.id)),0===k.length&&m.jsx("tr",{children:(0,m.jsxs)("td",{colSpan:7,className:"text-center py-10",children:[m.jsx("p",{className:"font-semibold",children:"No products found."}),m.jsx("p",{className:"text-sm",children:"Add a new product to get started."})]})})]})]})})]})]})},jN=({suppliers:e,products:t,onSave:r,onClose:n,prefilledItems:a,salesOrderId:o})=>{let[i,s]=(0,g.useState)(e[0]?.id||""),[l,A]=(0,g.useState)(new Date().toISOString().split("T")[0]),[c,d]=(0,g.useState)(()=>{let e=new Date;return e.setDate(e.getDate()+7),e.toISOString().split("T")[0]}),[u,h]=(0,g.useState)(a||[]),[f,p]=(0,g.useState)(""),[x,b]=(0,g.useState)(null),[y,v]=(0,g.useState)(1),[w,k]=(0,g.useState)(""),B=(0,g.useMemo)(()=>f?t.filter(e=>e.name.toLowerCase().includes(f.toLowerCase())).slice(0,5):[],[f,t]),j=e=>{b(e),p(e.name),k(e.costPrice||""),setTimeout(()=>p(""),100)},C=e=>{h(t=>t.filter((t,r)=>r!==e))},N=async()=>{if(!i||0===u.length){alert("Please select a supplier and add at least one item.");return}let e={supplierId:i,items:u,status:"Draft",expectedDate:new Date(c),salesOrderId:o,orderDate:l};await r(e)};return m.jsx("div",{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 z-50 flex items-center justify-center p-4",children:(0,m.jsxs)("div",{initial:{scale:.9,y:20},animate:{scale:1,y:0},exit:{scale:.9,y:-20},className:"bg-card dark:bg-dark-card w-full max-w-3xl rounded-lg shadow-xl overflow-hidden",children:[(0,m.jsxs)("div",{className:"flex justify-between items-center p-4 border-b border-border dark:border-dark-border",children:[m.jsx("h2",{className:"text-xl font-bold",children:"Create Purchase Order"}),m.jsx("button",{onClick:n,className:"text-2xl",children:"\xd7"})]}),(0,m.jsxs)("div",{className:"p-6 max-h-[70vh] overflow-y-auto",children:[(0,m.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[(0,m.jsxs)("div",{children:[m.jsx("label",{className:"block text-sm font-medium mb-1",children:"Supplier *"}),(0,m.jsxs)("select",{value:i,onChange:e=>s(e.target.value),className:"w-full p-2 border border-border dark:border-dark-border rounded-md bg-card dark:bg-dark-background",children:[m.jsx("option",{value:"",children:"Select supplier"}),e.map(e=>m.jsx("option",{value:e.id,children:e.name},e.id))]})]}),(0,m.jsxs)("div",{children:[m.jsx("label",{className:"block text-sm font-medium mb-1",children:"Order Date"}),m.jsx("input",{type:"date",value:l,onChange:e=>A(e.target.value),className:"w-full p-2 border border-border dark:border-dark-border rounded-md bg-card dark:bg-dark-background"})]}),(0,m.jsxs)("div",{children:[m.jsx("label",{className:"block text-sm font-medium mb-1",children:"Expected Delivery Date"}),m.jsx("input",{type:"date",value:c,onChange:e=>d(e.target.value),className:"w-full p-2 border border-border dark:border-dark-border rounded-md bg-card dark:bg-dark-background"})]})]}),(0,m.jsxs)("div",{className:"p-4 border border-border dark:border-dark-border rounded-lg",children:[m.jsx("h3",{className:"font-semibold mb-2",children:"Add Items (Prices include VAT)"}),(0,m.jsxs)("form",{onSubmit:e=>{e.preventDefault(),x&&y&&""!==w&&(h(e=>e.find(e=>e.productId===x.id)?e.map(e=>e.productId===x.id?{...e,quantity:e.quantity+Number(y)}:e):[...e,{productId:x.id,productName:x.name,quantity:Number(y),cost:Number(w),unitOfMeasure:x.unitOfMeasure}]),b(null),p(""),v(1),k(""))},className:"grid grid-cols-12 gap-2 items-end",children:[(0,m.jsxs)("div",{className:"col-span-12 md:col-span-5 relative",children:[m.jsx("label",{className:"text-xs",children:"Select product"}),m.jsx("input",{type:"text",value:f,onChange:e=>p(e.target.value),placeholder:"Search product...",className:"w-full p-2 border border-border dark:border-dark-border rounded-md bg-card dark:bg-dark-background"}),B.length>0&&f&&m.jsx("ul",{className:"absolute z-10 w-full bg-card dark:bg-dark-card border border-border dark:border-dark-border rounded-md shadow-lg mt-1 max-h-40 overflow-y-auto",children:B.map(e=>m.jsx("li",{onClick:()=>j(e),className:"px-3 py-2 hover:bg-muted dark:hover:bg-dark-muted cursor-pointer",children:e.name},e.id))})]}),(0,m.jsxs)("div",{className:"col-span-4 md:col-span-2",children:[m.jsx("label",{className:"text-xs",children:"Quantity"}),m.jsx("input",{type:"number",value:y,onChange:e=>v(""===e.target.value?"":Number(e.target.value)),min:"1",className:"w-full p-2 border border-border dark:border-dark-border rounded-md bg-card dark:bg-dark-background"})]}),(0,m.jsxs)("div",{className:"col-span-4 md:col-span-3",children:[m.jsx("label",{className:"text-xs",children:"Unit Cost (incl. VAT)"}),m.jsx("input",{type:"number",value:w,onChange:e=>k(""===e.target.value?"":Number(e.target.value)),step:"0.01",min:"0",className:"w-full p-2 border border-border dark:border-dark-border rounded-md bg-card dark:bg-dark-background"})]}),m.jsx("div",{className:"col-span-4 md:col-span-2",children:m.jsx("button",{type:"submit",className:"w-full bg-foreground dark:bg-dark-foreground text-background dark:text-dark-background font-bold py-2 px-4 rounded-md h-full",children:"Add Item"})})]})]}),u.length>0&&(0,m.jsxs)("div",{className:"mt-4 space-y-2",children:[m.jsx("h4",{className:"text-sm font-bold",children:"Order Items"}),u.map((e,t)=>(0,m.jsxs)("div",{className:"flex justify-between items-center bg-muted dark:bg-dark-muted p-2 rounded",children:[(0,m.jsxs)("p",{children:[e.productName," (",e.quantity," x ",e.cost.toFixed(2),")"]}),(0,m.jsxs)("div",{className:"flex items-center gap-4",children:[m.jsx("p",{className:"font-mono",children:(e.quantity*e.cost).toFixed(2)}),m.jsx("button",{onClick:()=>C(t),className:"text-danger",children:"\xd7"})]})]},t))]})]}),(0,m.jsxs)("div",{className:"flex justify-end items-center p-4 border-t border-border dark:border-dark-border bg-muted dark:bg-dark-muted/50",children:[m.jsx("button",{type:"button",onClick:n,className:"px-4 py-2 rounded-md font-semibold mr-2",children:"Cancel"}),m.jsx("button",{type:"button",onClick:N,className:"px-6 py-2 bg-primary text-primary-content rounded-md font-semibold",children:"Create Purchase Order"})]})]})})},jS=x().forwardRef(({purchaseOrder:e,supplier:t,products:r,settings:n},a)=>{let{poNumber:o,createdDate:i,expectedDate:s,totalCost:l,items:A}=e;return(0,m.jsxs)("div",{ref:a,className:"bg-white p-8 font-sans text-sm text-black w-full max-w-4xl mx-auto shadow-lg border",children:[(0,m.jsxs)("header",{className:"flex justify-between items-start pb-4 border-b",children:[(0,m.jsxs)("div",{children:[n.businessInfo.logoUrl&&m.jsx("img",{src:n.businessInfo.logoUrl,alt:"Company Logo",className:"h-16 max-w-xs object-contain mb-4"}),m.jsx("h2",{className:"text-xl font-bold text-slate-800",children:n.businessInfo.name}),m.jsx("p",{className:"text-slate-600",children:n.businessInfo.location}),(0,m.jsxs)("p",{className:"text-slate-600",children:["Tel: ",n.businessInfo.phone]}),n.tax.etimsEnabled&&n.businessInfo.kraPin&&(0,m.jsxs)("p",{className:"text-slate-600",children:["PIN: ",n.businessInfo.kraPin]})]}),(0,m.jsxs)("div",{className:"text-right",children:[m.jsx("h1",{className:"text-3xl font-bold uppercase text-slate-700 tracking-wide",children:"Purchase Order"}),(0,m.jsxs)("div",{className:"mt-2 text-xs",children:[(0,m.jsxs)("p",{className:"flex justify-end gap-2",children:[m.jsx("span",{className:"text-slate-500",children:"PO Number:"})," ",m.jsx("span",{className:"font-semibold",children:o})]}),(0,m.jsxs)("p",{className:"flex justify-end gap-2",children:[m.jsx("span",{className:"text-slate-500",children:"Date Issued:"})," ",m.jsx("span",{className:"font-semibold",children:new Date(i).toLocaleDateString("en-GB",{timeZone:"Africa/Nairobi"})})]}),(0,m.jsxs)("p",{className:"flex justify-end gap-2",children:[m.jsx("span",{className:"text-slate-500",children:"Expected By:"})," ",m.jsx("span",{className:"font-semibold",children:new Date(s).toLocaleDateString("en-GB",{timeZone:"Africa/Nairobi"})})]})]})]})]}),(0,m.jsxs)("section",{className:"mt-8 flex justify-between",children:[(0,m.jsxs)("div",{children:[m.jsx("h3",{className:"text-xs uppercase font-bold text-slate-500 mb-2",children:"Ship To"}),m.jsx("p",{className:"font-bold text-slate-800",children:n.businessInfo.name}),m.jsx("p",{className:"text-slate-600",children:n.businessInfo.location})]}),t&&(0,m.jsxs)("div",{className:"text-right",children:[m.jsx("h3",{className:"text-xs uppercase font-bold text-slate-500 mb-2",children:"Supplier"}),m.jsx("p",{className:"font-bold text-slate-800",children:t.name}),m.jsx("p",{className:"text-slate-600",children:t.contact}),m.jsx("p",{className:"text-slate-600",children:t.email})]})]}),m.jsx("section",{className:"mt-8",children:(0,m.jsxs)("table",{className:"w-full text-left",children:[m.jsx("thead",{children:(0,m.jsxs)("tr",{className:"bg-slate-100 text-slate-600 uppercase text-xs",children:[m.jsx("th",{className:"p-3 font-semibold",children:"Item Description"}),m.jsx("th",{className:"p-3 font-semibold text-center",children:"Qty"}),m.jsx("th",{className:"p-3 font-semibold text-right",children:"Unit Cost"}),m.jsx("th",{className:"p-3 font-semibold text-right",children:"Total"})]})}),m.jsx("tbody",{children:A.map(e=>(0,m.jsxs)("tr",{className:"border-b",children:[m.jsx("td",{className:"p-3",children:e.productName}),m.jsx("td",{className:"p-3 text-center",children:e.quantity}),m.jsx("td",{className:"p-3 text-right font-mono",children:e.cost.toFixed(2)}),m.jsx("td",{className:"p-3 text-right font-mono font-semibold",children:(e.cost*e.quantity).toFixed(2)})]},e.productId))})]})}),m.jsx("section",{className:"flex justify-end mt-8",children:m.jsx("div",{className:"w-full max-w-xs space-y-2",children:(0,m.jsxs)("div",{className:"flex justify-between text-lg font-bold border-t pt-2 mt-2",children:[m.jsx("span",{className:"text-slate-800",children:"Total Amount"}),(0,m.jsxs)("span",{className:"font-mono text-slate-800",children:["Ksh ",l.toFixed(2)]})]})})}),m.jsx("footer",{className:"mt-16 pt-4 border-t text-xs text-slate-500 text-center",children:m.jsx("p",{children:"Thank you for your business!"})})]})}),jF=e=>Promise.all(Array.from(e.getElementsByTagName("img")).map(e=>new Promise(t=>{e.complete&&0!==e.naturalHeight?t():(e.onload=()=>t(),e.onerror=()=>{console.warn(`Could not load image for PDF generation: ${e.src}`),t()})}))),jE=({purchaseOrder:e,supplier:t,products:r,onBack:n,onWhatsAppRequest:a,settings:o,onSendPO:i,onReceivePORequest:s,canManage:l})=>{let A=(0,g.useRef)(null),[c,d]=(0,g.useState)(!1),{id:u,poNumber:h,status:f}=e,p=l&&"Draft"===f,x=l&&("Sent"===f||"Partially Received"===f),b=async()=>{if(A.current&&!c){d(!0);try{await jF(A.current);let e=await (0,An.default)(A.current,{scale:2,useCORS:!0}),t=e.toDataURL("image/png"),r=new sM("p","mm","a4"),n=r.internal.pageSize.getWidth(),a=e.height*n/e.width;r.addImage(t,"PNG",0,0,n,a),r.save(`PurchaseOrder_${h}.pdf`)}catch(e){console.error("Failed to generate PDF:",e),alert("Sorry, there was an error generating the PDF. The logo might be causing an issue.")}finally{d(!1)}}};return m.jsx("div",{className:"h-full overflow-y-auto bg-background dark:bg-dark-background",children:(0,m.jsxs)("div",{className:"p-4 md:p-8 space-y-6",children:[(0,m.jsxs)("div",{className:"flex flex-col md:flex-row gap-4 justify-between items-center",children:[(0,m.jsxs)("button",{onClick:n,className:"flex items-center text-sm font-bold text-primary dark:text-dark-primary hover:text-primary-focus",children:[m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-1",viewBox:"0 0 20 20",fill:"currentColor",children:m.jsx("path",{fillRule:"evenodd",d:"M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z",clipRule:"evenodd"})}),"Back to All Purchases"]}),(0,m.jsxs)("div",{className:"flex flex-wrap items-center justify-center gap-2",children:[(0,m.jsxs)("button",{onClick:b,whileTap:{scale:.95},disabled:c,className:"bg-primary text-primary-content font-bold px-3 py-2 rounded-lg hover:bg-primary-focus transition-colors shadow-sm flex items-center text-sm disabled:bg-slate-400",children:[m.jsx(()=>m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-2",viewBox:"0 0 20 20",fill:"currentColor",children:m.jsx("path",{fillRule:"evenodd",d:"M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm3.293-7.707a1 1 0 011.414 0L9 10.586V3a1 1 0 112 0v7.586l1.293-1.293a1 1 0 111.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z",clipRule:"evenodd"})}),{})," ",c?"Downloading...":"Download PDF"]}),p&&m.jsx("button",{onClick:()=>i(e.id),whileTap:{scale:.95},className:"bg-blue-600 text-white font-bold px-3 py-2 rounded-lg hover:bg-blue-700 transition-colors shadow-sm flex items-center text-sm",children:"Mark as Sent"}),x&&m.jsx("button",{onClick:()=>s(e),whileTap:{scale:.95},className:"bg-green-600 text-white font-bold px-3 py-2 rounded-lg hover:bg-green-700 transition-colors shadow-sm flex items-center text-sm",children:"Receive Stock"})]})]}),m.jsx("div",{id:"pdf-content-wrapper",children:m.jsx(jS,{ref:A,purchaseOrder:e,supplier:t,products:r,settings:o})})]})})},jO=({status:e})=>{let t="px-2 py-1 text-xs font-semibold rounded-full";switch(e){case"Received":return m.jsx("span",{className:`${t} text-green-800 bg-green-100 dark:bg-green-900/50 dark:text-green-300`,children:"Received"});case"Partially Received":return m.jsx("span",{className:`${t} text-sky-800 bg-sky-100 dark:bg-sky-900/50 dark:text-sky-300`,children:"Partially Received"});case"Sent":return m.jsx("span",{className:`${t} text-blue-800 bg-blue-100 dark:bg-blue-900/50 dark:text-blue-300`,children:"Sent"});case"Draft":return m.jsx("span",{className:`${t} text-yellow-800 bg-yellow-100 dark:bg-yellow-900/50 dark:text-yellow-300`,children:"Draft"});case"Cancelled":return m.jsx("span",{className:`${t} text-red-800 bg-red-100 dark:bg-red-900/50 dark:text-red-300`,children:"Cancelled"});default:return m.jsx("span",{className:`${t} text-slate-800 bg-slate-100 dark:bg-slate-700 dark:text-slate-300`,children:"Unknown"})}},jP=({purchaseOrders:e,suppliers:t,products:r,onReceivePORequest:n,onAddPurchaseOrder:a,onAddSupplier:o,permissions:i,onSendPO:s,onWhatsAppPORequest:l,settings:A,salesOrderForPO:c,onClearSalesOrderForPO:d})=>{let[u,h]=(0,g.useState)("list"),[f,p]=(0,g.useState)(null),[x,b]=(0,g.useState)(null),[y,v]=(0,g.useState)(void 0),[w,k]=(0,g.useState)({});(0,g.useEffect)(()=>{c&&(b(c.items.filter(e=>"Pending"===e.status).map(e=>({productId:e.productId,productName:e.description,quantity:e.quantity,cost:r.find(t=>t.id===e.productId)?.costPrice||0,unitOfMeasure:r.find(t=>t.id===e.productId)?.unitOfMeasure||"pc(s)",salesOrderItemId:e.id}))),v(c.id),h("create"),d())},[c,r,d]);let B=(0,g.useMemo)(()=>t.reduce((e,t)=>(e[t.id]=t.name,e),{}),[t]),j=i.includes("manage_purchases"),C=(0,g.useMemo)(()=>{let e=A.inventory?.lowStockThreshold??3;return r.filter(t=>"Inventory"===t.productType&&t.stock<=e)},[r,A.inventory.lowStockThreshold]),N=(e,t)=>{let r=parseInt(t,10);k(t=>({...t,[e]:isNaN(r)||r<0?0:r}))},S=(0,g.useMemo)(()=>Object.values(w).filter(e=>e>0).length,[w]),F=async e=>{let t=await a(e);h("list"),b(null),v(void 0),k({}),p(t)};return"create"===u?m.jsx(jN,{suppliers:t,products:r,onSave:F,onCancel:()=>{h("list"),b(null),v(void 0)},onAddSupplier:o,prefilledItems:x||void 0,salesOrderId:y}):f?m.jsx(jE,{purchaseOrder:f,supplier:t.find(e=>e.id===f.supplierId),onBack:()=>p(null),onWhatsAppRequest:l,products:r,settings:A,onSendPO:s,onReceivePORequest:n,canManage:j}):(0,m.jsxs)("div",{className:"p-4 md:p-8 h-full overflow-y-auto bg-background dark:bg-dark-background",children:[(0,m.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[m.jsx("h1",{className:"text-3xl font-bold text-foreground dark:text-dark-foreground",children:"Purchases"}),j&&(0,m.jsxs)("button",{onClick:()=>{b(null),h("create")},whileTap:{scale:.95},className:"bg-primary text-primary-content font-bold px-4 py-2 rounded-xl transition-shadow shadow-clay dark:shadow-clay-dark active:shadow-clay-inset dark:active:shadow-clay-dark-inset flex items-center",children:[m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"New Purchase Order"]})]}),j&&C.length>0&&(0,m.jsxs)("div",{layout:!0,initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"mb-8 bg-warning/10 dark:bg-dark-warning/10 p-4 rounded-xl border border-warning/20 dark:border-dark-warning/20",children:[(0,m.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,m.jsxs)("h2",{className:"text-xl font-bold text-warning dark:text-dark-warning",children:["Items to Reorder (",C.length,")"]}),(0,m.jsxs)("button",{onClick:()=>{let e=C.filter(e=>(w[e.id]||0)>0).map(e=>({productId:e.id,productName:e.name,quantity:w[e.id],cost:e.costPrice||0,unitOfMeasure:e.unitOfMeasure}));if(0===e.length){alert("Please enter a quantity greater than 0 for at least one item.");return}b(e),v(void 0),h("create")},disabled:0===S,whileTap:{scale:.95},className:"bg-warning text-white font-bold px-4 py-2 rounded-xl transition-shadow shadow-clay dark:shadow-clay-dark active:shadow-clay-inset dark:active:shadow-clay-dark-inset flex items-center text-sm disabled:bg-slate-400 disabled:shadow-none disabled:cursor-not-allowed",children:["Create PO for ",S>0?`${S} Item(s)`:"Items"]})]}),m.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto pr-2",children:C.map(e=>(0,m.jsxs)("div",{className:"bg-card dark:bg-dark-card p-3 rounded-lg flex justify-between items-center shadow-sm",children:[(0,m.jsxs)("div",{className:"flex-grow",children:[m.jsx("p",{className:"font-bold text-foreground dark:text-dark-foreground",children:e.name}),m.jsx("p",{className:"text-xs text-foreground-muted dark:text-dark-foreground-muted font-mono",children:e.inventoryCode})]}),(0,m.jsxs)("div",{className:"flex items-center gap-4",children:[(0,m.jsxs)("div",{className:"text-center",children:[m.jsx("p",{className:"text-xs font-semibold text-foreground-muted dark:text-dark-foreground-muted",children:"Stock"}),m.jsx("p",{className:"font-bold text-danger",children:e.stock})]}),(0,m.jsxs)("div",{className:"w-24",children:[m.jsx("label",{htmlFor:`reorder-qty-${e.id}`,className:"block text-xs font-semibold text-center text-foreground-muted dark:text-dark-foreground-muted mb-1",children:"Qty to Order"}),m.jsx("input",{id:`reorder-qty-${e.id}`,type:"number",value:w[e.id]||0,onChange:t=>N(e.id,t.target.value),min:"0",className:"w-full p-1 border border-border dark:border-dark-border rounded-md text-center bg-background dark:bg-dark-background",onClick:e=>e.stopPropagation()})]})]})]},e.id))})]}),m.jsx("div",{className:"bg-card dark:bg-dark-card rounded-xl shadow-sm border border-border dark:border-dark-border overflow-x-auto",children:(0,m.jsxs)("table",{className:"w-full text-sm text-left text-foreground-muted dark:text-dark-foreground-muted",children:[m.jsx("thead",{className:"text-xs text-foreground dark:text-dark-foreground uppercase bg-muted dark:bg-dark-muted font-bold",children:(0,m.jsxs)("tr",{children:[m.jsx("th",{scope:"col",className:"px-6 py-3",children:"PO Number"}),m.jsx("th",{scope:"col",className:"px-6 py-3",children:"Supplier"}),m.jsx("th",{scope:"col",className:"px-6 py-3",children:"Status"}),m.jsx("th",{scope:"col",className:"px-6 py-3",children:"Expected Date"}),m.jsx("th",{scope:"col",className:"px-6 py-3",children:"Total Cost (Ksh)"}),m.jsx("th",{scope:"col",className:"px-6 py-3",children:m.jsx("span",{className:"sr-only",children:"Actions"})})]})}),m.jsx("tbody",{children:e.map(e=>(0,m.jsxs)("tr",{className:"bg-card dark:bg-dark-card border-b dark:border-dark-border hover:bg-muted dark:hover:bg-dark-muted cursor-pointer",onClick:()=>p(e),children:[m.jsx("td",{className:"px-6 py-4 font-bold text-foreground dark:text-dark-foreground",children:e.poNumber}),m.jsx("td",{className:"px-6 py-4",children:B[e.supplierId]||"Unknown"}),m.jsx("td",{className:"px-6 py-4",children:m.jsx(jO,{status:e.status})}),m.jsx("td",{className:"px-6 py-4",children:new Date(e.expectedDate).toLocaleDateString("en-GB",{timeZone:"Africa/Nairobi"})}),m.jsx("td",{className:"px-6 py-4 font-mono",children:e.totalCost.toFixed(2)}),(0,m.jsxs)("td",{className:"px-6 py-4 text-right",children:[j&&"Draft"===e.status&&m.jsx("button",{onClick:t=>{t.stopPropagation(),s(e.id)},className:"font-medium text-blue-600 dark:text-blue-400 hover:text-blue-800 bg-blue-50 dark:bg-blue-900/50 hover:bg-blue-100 px-3 py-1 rounded-md",children:"Send PO"}),j&&("Sent"===e.status||"Partially Received"===e.status)&&m.jsx("button",{onClick:t=>{t.stopPropagation(),n(e)},className:"font-medium text-primary dark:text-dark-primary hover:text-primary-focus bg-primary/10 dark:bg-dark-primary/20 hover:bg-primary/20 px-3 py-1 rounded-md",children:"Receive Stock"}),("Received"===e.status||"Cancelled"===e.status)&&m.jsx("span",{className:"font-medium text-foreground-muted dark:text-dark-foreground-muted",children:"View Details"})]})]},e.id))})]})})]})},jI=({onClose:e,onSave:t,invoice:r,supplierName:n,activeShift:a,sales:o,payouts:i,settings:s,accountingTransactions:l,chartOfAccounts:A})=>{let c=Math.round((r.totalAmount-r.paidAmount)*100)/100,[d,u]=(0,g.useState)(c),[h,f]=(0,g.useState)(new Date().toISOString().split("T")[0]),[p,x]=(0,g.useState)(a?"Cash":"Bank Transfer"),[b,y]=(0,g.useState)(""),v=(0,g.useMemo)(()=>{let e=e=>{if(!e)return 0;let t=A.find(t=>t.id===e);if(!t)return 0;let r=l.flatMap(e=>e.entries).filter(t=>t.accountId===e).reduce((e,t)=>e+t.debit-t.credit,0);return["Assets","Expenses"].includes(t.type)?r:-r};return{Cash:e(s.accounting.defaultCashAccountId),"M-Pesa":e(s.accounting.defaultMpesaAccountId),"Bank Transfer":e(s.accounting.defaultBankAccountId)}},[l,A,s]),w=(0,g.useMemo)(()=>"number"==typeof d&&!(d<=0)&&("Cash"===p&&!a||d>(v[p]||0)),[d,p,v,a]),k="block text-sm font-medium text-foreground dark:text-dark-foreground",B=`mt-1 block w-full px-3 py-2 bg-card dark:bg-dark-background border rounded-md shadow-sm focus:outline-none sm:text-lg ${w?"border-danger":"border-border dark:border-dark-border"}`;return m.jsx("div",{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50 p-4",children:(0,m.jsxs)("div",{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{type:"spring",stiffness:300,damping:30},className:"bg-card dark:bg-dark-card rounded-xl shadow-2xl w-full max-w-lg p-8 border border-transparent dark:border-dark-border",children:[(0,m.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[m.jsx("h2",{className:"text-2xl font-bold text-foreground dark:text-dark-foreground",children:"Record Payment"}),m.jsx("button",{onClick:e,className:"text-foreground-muted dark:text-dark-foreground-muted hover:text-foreground dark:hover:text-dark-foreground",children:m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24",stroke:"currentColor",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,m.jsxs)("div",{className:"bg-muted dark:bg-dark-muted p-4 rounded-lg mb-6 space-y-2",children:[(0,m.jsxs)("div",{className:"flex justify-between text-sm",children:[m.jsx("span",{className:"font-medium text-foreground-muted dark:text-dark-foreground-muted",children:"Invoice:"}),m.jsx("span",{className:"font-semibold text-foreground dark:text-dark-foreground",children:r.invoiceNumber})]}),(0,m.jsxs)("div",{className:"flex justify-between text-sm",children:[m.jsx("span",{className:"font-medium text-foreground-muted dark:text-dark-foreground-muted",children:"Supplier:"}),m.jsx("span",{className:"font-semibold text-foreground dark:text-dark-foreground",children:n})]}),m.jsx("div",{className:"border-t border-border dark:border-dark-border !my-2"}),(0,m.jsxs)("div",{className:"flex justify-between text-lg",children:[m.jsx("span",{className:"font-bold text-foreground dark:text-dark-foreground",children:"Amount Due:"}),(0,m.jsxs)("span",{className:"font-bold text-danger",children:["Ksh ",c.toFixed(2)]})]})]}),(0,m.jsxs)("div",{className:"bg-dark-muted border border-dark-border p-4 rounded-lg mb-6 space-y-2 text-sm",children:[m.jsx("h4",{className:"font-bold text-blue-400",children:"Available Funds"}),(0,m.jsxs)("div",{className:"flex justify-between",children:[m.jsx("span",{className:"font-medium text-dark-foreground-muted",children:"Cash on Hand:"}),(0,m.jsxs)("span",{className:"font-semibold font-mono text-dark-foreground",children:["Ksh ",v.Cash.toFixed(2)]})]}),(0,m.jsxs)("div",{className:"flex justify-between",children:[m.jsx("span",{className:"font-medium text-dark-foreground-muted",children:"M-Pesa Balance:"}),(0,m.jsxs)("span",{className:"font-semibold font-mono text-dark-foreground",children:["Ksh ",v["M-Pesa"].toFixed(2)]})]}),(0,m.jsxs)("div",{className:"flex justify-between",children:[m.jsx("span",{className:"font-medium text-dark-foreground-muted",children:"Bank Balance:"}),(0,m.jsxs)("span",{className:"font-semibold font-mono text-dark-foreground",children:["Ksh ",v["Bank Transfer"].toFixed(2)]})]})]}),(0,m.jsxs)("form",{onSubmit:e=>{e.preventDefault();let n=Math.round((r.totalAmount-r.paidAmount)*100)/100;if("number"!=typeof d||d<=0||d>n){alert(`Payment amount must be between 0.01 and ${n.toFixed(2)}.`);return}if("Cash"===p&&!a){alert("An active shift is required to pay with cash from the drawer.");return}if(w){alert("Payment amount exceeds available funds for the selected method.");return}t({amount:d,paymentDate:new Date(h),method:p,referenceNumber:b||void 0})},className:"space-y-4",children:[(0,m.jsxs)("div",{children:[m.jsx("label",{htmlFor:"method",className:"block text-sm font-medium text-foreground dark:text-dark-foreground",children:"Payment Method"}),(0,m.jsxs)("select",{name:"method",id:"method",value:p,onChange:e=>x(e.target.value),required:!0,className:"mt-1 block w-full pl-3 pr-10 py-2 text-base bg-card dark:bg-dark-background border-border dark:border-dark-border focus:outline-none focus:ring-primary dark:focus:ring-dark-primary sm:text-sm rounded-md",children:[m.jsx("option",{value:"Bank Transfer",children:"Bank Transfer"}),m.jsx("option",{value:"Cash",disabled:!a,children:"Cash (from Drawer)"}),m.jsx("option",{value:"M-Pesa",children:"M-Pesa"})]})]}),(0,m.jsxs)("div",{children:[m.jsx("label",{htmlFor:"amount",className:k,children:"Payment Amount (Ksh)"}),m.jsx("input",{type:"number",name:"amount",id:"amount",value:d,onChange:e=>u(""===e.target.value?"":parseFloat(e.target.value)),required:!0,max:c,min:"0.01",step:"0.01",className:B}),w&&m.jsx("p",{className:"text-xs text-danger mt-1",children:"Cash"!==p||a?"Payment amount exceeds available funds for the selected method.":"An active shift is required to pay with cash."})]}),(0,m.jsxs)("div",{children:[m.jsx("label",{htmlFor:"paymentDate",className:k,children:"Payment Date"}),m.jsx("input",{type:"date",name:"paymentDate",id:"paymentDate",value:h,onChange:e=>f(e.target.value),required:!0,className:"mt-1 block w-full px-3 py-2 bg-card dark:bg-dark-background border border-border dark:border-dark-border rounded-md shadow-sm focus:outline-none focus:ring-primary dark:focus:ring-dark-primary sm:text-sm"})]}),(0,m.jsxs)("div",{children:[m.jsx("label",{htmlFor:"referenceNumber",className:k,children:"Reference Number (Optional)"}),m.jsx("input",{type:"text",id:"referenceNumber",value:b,onChange:e=>y(e.target.value),className:"mt-1 block w-full px-3 py-2 bg-card dark:bg-dark-background border border-border dark:border-dark-border rounded-md shadow-sm focus:outline-none focus:ring-primary dark:focus:ring-dark-primary sm:text-sm",placeholder:"e.g. Cheque No, M-Pesa Code"})]}),(0,m.jsxs)("div",{className:"mt-8 flex justify-end space-x-3",children:[m.jsx("button",{type:"button",onClick:e,whileTap:{scale:.95},className:"bg-dark-muted text-dark-foreground font-bold px-4 py-2 rounded-xl transition-shadow shadow-clay-dark active:shadow-clay-dark-inset",children:"Cancel"}),m.jsx("button",{type:"submit",disabled:w,whileTap:{scale:.95},className:"bg-primary text-primary-content font-bold px-6 py-2 rounded-xl transition-shadow shadow-clay-dark active:shadow-clay-dark-inset disabled:bg-slate-600 disabled:shadow-none disabled:cursor-not-allowed",children:"Confirm Payment"})]})]})]})})},jU=()=>(0,m.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2"}),m.jsx("line",{x1:"16",y1:"2",x2:"16",y2:"6"}),m.jsx("line",{x1:"8",y1:"2",x2:"8",y2:"6"}),m.jsx("line",{x1:"3",y1:"10",x2:"21",y2:"10"})]}),jL=()=>(0,m.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("circle",{cx:"12",cy:"12",r:"10"}),m.jsx("polyline",{points:"12 6 12 12 16 14"})]}),j_=()=>(0,m.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("path",{d:"m21.73 18-8-14a2 2 0 0 0-3.46 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z"}),m.jsx("line",{x1:"12",y1:"9",x2:"12",y2:"13"}),m.jsx("line",{x1:"12",y1:"17",x2:"12.01",y2:"17"})]}),jQ=()=>(0,m.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("circle",{cx:"12",cy:"12",r:"10"}),m.jsx("line",{x1:"12",y1:"8",x2:"12",y2:"12"}),m.jsx("line",{x1:"12",y1:"16",x2:"12.01",y2:"16"})]}),jT=()=>m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"mx-auto h-12 w-12 text-green-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),jD=({title:e,value:t,icon:r,colorClass:n="text-primary dark:text-dark-primary"})=>(0,m.jsxs)("div",{className:"bg-card dark:bg-dark-card p-4 rounded-xl shadow-sm flex items-center space-x-4 border border-border dark:border-dark-border",children:[m.jsx("div",{className:`p-3 rounded-lg bg-muted dark:bg-dark-muted ${n}`,children:r}),(0,m.jsxs)("div",{children:[m.jsx("p",{className:"text-sm text-foreground-muted dark:text-dark-foreground-muted font-semibold",children:e}),m.jsx("p",{className:"text-xl font-bold text-foreground dark:text-dark-foreground",children:t})]})]}),jM=({status:e})=>{let t="px-2.5 py-1 text-xs font-bold rounded-full";switch(e){case"Paid":return m.jsx("span",{className:`${t} bg-green-100 text-green-800 dark:bg-green-900/50 dark:text-green-300`,children:"Paid"});case"Partially Paid":return m.jsx("span",{className:`${t} bg-blue-100 text-blue-800 dark:bg-blue-900/50 dark:text-blue-300`,children:"Partially Paid"});case"Unpaid":return m.jsx("span",{className:`${t} bg-amber-100 text-amber-800 dark:bg-amber-900/50 dark:text-amber-300`,children:"Unpaid"});default:return m.jsx("span",{className:`${t} bg-slate-100 text-slate-800 dark:bg-slate-700 dark:text-slate-300`,children:"Unknown"})}},jH=({invoices:e,suppliers:t,onRecordPayment:r,onViewInvoice:n,activeShift:a,sales:o,payouts:i,accountingTransactions:s,chartOfAccounts:l,settings:A})=>{let[c,d]=(0,g.useState)(!1),[u,h]=(0,g.useState)(null),f=(0,g.useMemo)(()=>t.reduce((e,t)=>(e[t.id]=t.businessName||t.name,e),{}),[t]),p=(0,g.useMemo)(()=>{let t=new Date;t.setHours(0,0,0,0);let r={current:0,due1_30:0,due31_60:0,due60_plus:0};return e.forEach(e=>{if("Paid"===e.status)return;let n=e.totalAmount-e.paidAmount,a=new Date(e.dueDate);if(a.setHours(0,0,0,0),a<t){let e=Math.ceil((t.getTime()-a.getTime())/864e5);e<=30?r.due1_30+=n:e<=60?r.due31_60+=n:r.due60_plus+=n}else r.current+=n}),r},[e]),x=(0,g.useMemo)(()=>e.filter(e=>"Unpaid"===e.status||"Partially Paid"===e.status).sort((e,t)=>new Date(e.dueDate).getTime()-new Date(t.dueDate).getTime()),[e]),b=e=>{h(e),d(!0)},y=e=>`Ksh ${e.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}`;return(0,m.jsxs)("div",{className:"p-4 md:p-6 h-full overflow-y-auto bg-background dark:bg-dark-background",children:[(0,m.jsxs)("div",{children:[m.jsx("h1",{className:"text-3xl font-bold text-foreground dark:text-dark-foreground",children:"Accounts Payable"}),m.jsx("p",{className:"text-foreground-muted dark:text-dark-foreground-muted mt-1",children:"Manage outstanding invoices and payments to suppliers."})]}),(0,m.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 my-6",children:[m.jsx(jD,{title:"Current",value:y(p.current),icon:m.jsx(jU,{}),colorClass:"text-green-500"}),m.jsx(jD,{title:"Overdue 1-30 Days",value:y(p.due1_30),icon:m.jsx(jL,{}),colorClass:"text-yellow-500"}),m.jsx(jD,{title:"Overdue 31-60 Days",value:y(p.due31_60),icon:m.jsx(j_,{}),colorClass:"text-orange-500"}),m.jsx(jD,{title:"Overdue 60+ Days",value:y(p.due60_plus),icon:m.jsx(jQ,{}),colorClass:"text-red-500"})]}),(0,m.jsxs)("div",{className:"bg-card dark:bg-dark-card rounded-xl shadow-sm border border-border dark:border-dark-border p-6",children:[m.jsx("h3",{className:"text-lg font-bold mb-4",children:"Outstanding Supplier Invoices"}),m.jsx("div",{className:"overflow-x-auto",children:(0,m.jsxs)("table",{className:"w-full text-sm text-left",children:[m.jsx("thead",{className:"text-xs text-foreground-muted dark:text-dark-foreground-muted uppercase",children:(0,m.jsxs)("tr",{children:[m.jsx("th",{className:"py-3 px-4",children:"Invoice #"}),m.jsx("th",{className:"py-3 px-4",children:"Supplier"}),m.jsx("th",{className:"py-3 px-4",children:"Due Date"}),m.jsx("th",{className:"py-3 px-4",children:"Total"}),m.jsx("th",{className:"py-3 px-4",children:"Amount Due"}),m.jsx("th",{className:"py-3 px-4",children:"Status"}),m.jsx("th",{className:"py-3 px-4",children:m.jsx("span",{className:"sr-only",children:"Actions"})})]})}),(0,m.jsxs)("tbody",{children:[x.map(e=>{let t=e.totalAmount-e.paidAmount;return(0,m.jsxs)("tr",{onClick:()=>n(e),className:"border-b border-border dark:border-dark-border last:border-b-0 hover:bg-muted dark:hover:bg-dark-muted cursor-pointer",children:[m.jsx("td",{className:"py-3 px-4 font-bold text-foreground dark:text-dark-foreground",children:e.invoiceNumber}),m.jsx("td",{className:"py-3 px-4 text-foreground dark:text-dark-foreground",children:f[e.supplierId]||"Unknown"}),m.jsx("td",{className:"py-3 px-4 text-foreground dark:text-dark-foreground",children:new Date(e.dueDate).toLocaleDateString("en-GB",{timeZone:"Africa/Nairobi"})}),m.jsx("td",{className:"py-3 px-4 font-mono",children:y(e.totalAmount)}),m.jsx("td",{className:"py-3 px-4 font-mono font-bold text-foreground dark:text-dark-foreground",children:y(t)}),m.jsx("td",{className:"py-3 px-4",children:m.jsx(jM,{status:e.status})}),m.jsx("td",{className:"py-3 px-4 text-right space-x-2",children:"Paid"!==e.status&&m.jsx("button",{onClick:t=>{t.stopPropagation(),b(e)},className:"font-medium text-primary dark:text-dark-primary hover:underline",children:"Record Payment"})})]},e.id)}),0===x.length&&m.jsx("tr",{children:m.jsx("td",{colSpan:7,children:(0,m.jsxs)("div",{className:"text-center py-16 text-foreground-muted dark:text-dark-foreground-muted",children:[m.jsx(jT,{}),m.jsx("p",{className:"mt-4 font-semibold",children:"All caught up!"}),m.jsx("p",{children:"There are no outstanding supplier invoices."})]})})})]})]})})]}),m.jsx(Q,{children:c&&u&&m.jsx(jI,{onClose:()=>d(!1),onSave:e=>{u&&r(u.id,e),d(!1),h(null)},invoice:u,supplierName:f[u.supplierId],activeShift:a,sales:o,payouts:i,accountingTransactions:s,chartOfAccounts:l,settings:A})})]})},jR=({title:e,value:t,className:r=""})=>(0,m.jsxs)("div",{className:`bg-card dark:bg-dark-card p-4 rounded-lg shadow-sm border border-border dark:border-dark-border ${r}`,children:[m.jsx("p",{className:"text-sm text-foreground-muted dark:text-dark-foreground-muted font-medium",children:e}),m.jsx("p",{className:"text-xl font-bold text-foreground dark:text-dark-foreground",children:t})]}),jK=({label:e,filterKey:t,activeFilter:r,onClick:n})=>m.jsx("button",{onClick:()=>n(t),className:`px-4 py-1.5 text-sm font-bold rounded-lg transition-colors duration-200 ${r===t?"bg-primary dark:bg-dark-primary text-primary-content dark:text-dark-primary-content shadow-sm":"bg-card dark:bg-dark-card text-foreground-muted dark:text-dark-foreground-muted hover:bg-muted dark:hover:bg-dark-muted"}`,children:e}),jV=({shifts:e,sales:t,expenses:r,supplierPayments:n,bankDeposits:a,settings:o})=>{let[i,s]=(0,g.useState)(null),[l,A]=(0,g.useState)("today"),[c,d]=(0,g.useState)(""),[u,h]=(0,g.useState)(""),f=e=>{A(e);let t=new Date,r=new Date;r.setDate(t.getDate()-1);let n=t.getDay(),a=t.getDate()-n+(0===n?-6:1),o=new Date(t.setDate(a)),i=new Date(o);i.setDate(o.getDate()-7);let s=new Date(i);s.setDate(i.getDate()+6);let l=new Date(t.getFullYear(),t.getMonth(),1),c=new Date(t.getFullYear(),t.getMonth(),0),u=new Date(c.getFullYear(),c.getMonth(),1),f=e=>e.toISOString().split("T")[0];switch(d(""),h(""),e){case"today":d(f(new Date)),h(f(new Date));break;case"yesterday":d(f(r)),h(f(r));break;case"this_week":d(f(o)),h(f(new Date));break;case"last_week":d(f(i)),h(f(s));break;case"this_month":d(f(l)),h(f(new Date));break;case"last_month":d(f(u)),h(f(c))}};(0,g.useEffect)(()=>{f("today")},[]);let p=(e,t)=>{A("custom"),"from"===t?d(e.target.value):h(e.target.value)},x=(0,g.useMemo)(()=>{let t=c?new Date(c):null;t&&t.setHours(0,0,0,0);let r=u?new Date(u):null;return r&&r.setHours(23,59,59,999),e.filter(e=>"closed"===e.status&&e.endTime).filter(e=>{let n=new Date(e.endTime);return(!t||!(n<t))&&(!r||!(n>r))}).sort((e,t)=>new Date(t.startTime).getTime()-new Date(e.startTime).getTime())},[e,c,u]),b=(0,g.useMemo)(()=>x.reduce((e,t)=>(e.totalSales+=t.totalSales||0,e.totalPayouts+=t.totalPayouts||0,e.cashSales+=t.paymentBreakdown?.Cash||0,e.cashVariance+=t.cashVariance||0,e),{totalSales:0,totalPayouts:0,cashSales:0,cashVariance:0}),[x]),y=e=>`Ksh ${e.toFixed(2)}`;return i?m.jsx("div",{className:"h-full bg-slate-100",children:m.jsx(AA,{shift:i,sales:t,expenses:r,supplierPayments:n,bankDeposits:a,settings:o||om,onClose:()=>s(null),isHistoricalView:!0})}):(0,m.jsxs)("div",{className:"p-4 md:p-8 space-y-6",children:[m.jsx("h1",{className:"text-3xl font-bold text-foreground dark:text-dark-foreground",children:"Z-Reports (Closed Shifts)"}),(0,m.jsxs)("div",{className:"bg-card dark:bg-dark-card p-4 rounded-xl shadow-sm border border-border dark:border-dark-border space-y-4",children:[(0,m.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[m.jsx(jK,{label:"Today",filterKey:"today",activeFilter:l,onClick:f}),m.jsx(jK,{label:"Yesterday",filterKey:"yesterday",activeFilter:l,onClick:f}),m.jsx(jK,{label:"This Week",filterKey:"this_week",activeFilter:l,onClick:f}),m.jsx(jK,{label:"Last Week",filterKey:"last_week",activeFilter:l,onClick:f}),m.jsx(jK,{label:"This Month",filterKey:"this_month",activeFilter:l,onClick:f}),m.jsx(jK,{label:"Last Month",filterKey:"last_month",activeFilter:l,onClick:f})]}),(0,m.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 pt-2 border-t border-border dark:border-dark-border",children:[(0,m.jsxs)("div",{children:[m.jsx("label",{htmlFor:"dateFrom",className:"text-sm font-medium text-foreground-muted dark:text-dark-foreground-muted",children:"From"}),m.jsx("input",{type:"date",id:"dateFrom",value:c,onChange:e=>p(e,"from"),className:"w-full mt-1 px-4 py-2 rounded-lg border border-border dark:border-dark-border bg-background dark:bg-dark-background"})]}),(0,m.jsxs)("div",{children:[m.jsx("label",{htmlFor:"dateTo",className:"text-sm font-medium text-foreground-muted dark:text-dark-foreground-muted",children:"To"}),m.jsx("input",{type:"date",id:"dateTo",value:u,onChange:e=>p(e,"to"),className:"w-full mt-1 px-4 py-2 rounded-lg border border-border dark:border-dark-border bg-background dark:bg-dark-background"})]})]})]}),(0,m.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[m.jsx(jR,{title:"Total Sales",value:y(b.totalSales),className:"!text-primary dark:!text-dark-primary"}),m.jsx(jR,{title:"Cash Sales",value:y(b.cashSales)}),m.jsx(jR,{title:"Total Payouts",value:y(b.totalPayouts),className:"!text-warning dark:!text-dark-warning"}),m.jsx(jR,{title:"Net Cash Variance",value:y(b.cashVariance),className:b.cashVariance<0?"!text-danger":"!text-green-600"})]}),m.jsx("div",{className:"bg-card dark:bg-dark-card rounded-xl shadow-md overflow-x-auto border border-border dark:border-dark-border",children:(0,m.jsxs)("table",{className:"w-full text-sm text-left text-foreground-muted dark:text-dark-foreground-muted",children:[m.jsx("thead",{className:"text-xs text-foreground dark:text-dark-foreground uppercase bg-muted dark:bg-dark-muted",children:(0,m.jsxs)("tr",{children:[m.jsx("th",{scope:"col",className:"px-6 py-3",children:"Cashier"}),m.jsx("th",{scope:"col",className:"px-6 py-3",children:"Shift Start"}),m.jsx("th",{scope:"col",className:"px-6 py-3",children:"Shift End"}),m.jsx("th",{scope:"col",className:"px-6 py-3 text-right",children:"Total Sales"}),m.jsx("th",{scope:"col",className:"px-6 py-3 text-right",children:"Cash Variance"}),m.jsx("th",{scope:"col",className:"px-6 py-3",children:m.jsx("span",{className:"sr-only",children:"Actions"})})]})}),(0,m.jsxs)("tbody",{className:"divide-y divide-border dark:divide-dark-border",children:[x.map(e=>{let t=e.cashVariance||0;return(0,m.jsxs)("tr",{className:"hover:bg-muted dark:hover:bg-dark-muted cursor-pointer",onClick:()=>s(e),children:[m.jsx("td",{className:"px-6 py-4 font-medium text-foreground dark:text-dark-foreground",children:e.userName}),m.jsx("td",{className:"px-6 py-4",children:new Date(e.startTime).toLocaleString("en-GB",{timeZone:"Africa/Nairobi"})}),m.jsx("td",{className:"px-6 py-4",children:e.endTime?new Date(e.endTime).toLocaleString("en-GB",{timeZone:"Africa/Nairobi"}):"N/A"}),m.jsx("td",{className:"px-6 py-4 text-right font-mono",children:y(e.totalSales||0)}),m.jsx("td",{className:`px-6 py-4 text-right font-mono font-semibold ${0===t?"text-foreground dark:text-dark-foreground":t>0?"text-warning":"text-danger"}`,children:y(t)}),m.jsx("td",{className:"px-6 py-4 text-right",children:m.jsx("button",{className:"font-medium text-primary dark:text-dark-primary hover:underline",children:"View Report"})})]},e.id)}),0===x.length&&m.jsx("tr",{children:m.jsx("td",{colSpan:6,className:"text-center py-10 text-foreground-muted dark:text-dark-foreground-muted",children:"No closed shifts found for the selected period."})})]})]})})]})},jq=({sales:e,customers:t,users:r,onViewSaleRequest:n})=>{let[a,o]=(0,g.useState)(""),[i,s]=(0,g.useState)(1),[l,A]=(0,g.useState)(""),[c,d]=(0,g.useState)(""),u=(0,g.useMemo)(()=>new Map(t.map(e=>[e.id,e.name])),[t]),h=(0,g.useMemo)(()=>{let t=l?new Date(l):null;t&&t.setHours(0,0,0,0);let r=c?new Date(c):null;return r&&r.setHours(23,59,59,999),e.filter(e=>{let n=new Date(e.date);return(!t||!(n<t))&&(!r||!(n>r))}).filter(e=>{let t=u.get(e.customerId)||"",r=a.toLowerCase();return e.id.toLowerCase().includes(r)||t.toLowerCase().includes(r)||e.cashierName.toLowerCase().includes(r)}).sort((e,t)=>new Date(t.date).getTime()-new Date(e.date).getTime())},[e,a,l,c,u]),f=(0,g.useMemo)(()=>{let e=(i-1)*15;return h.slice(e,e+15)},[h,i]),p=Math.ceil(h.length/15),x=(0,g.useMemo)(()=>({totalRevenue:h.reduce((e,t)=>e+(t.depositApplied?t.total+t.depositApplied:t.total),0),transactionCount:h.length}),[h]);return(0,m.jsxs)("div",{className:"p-4 md:p-8 h-full overflow-y-auto",children:[m.jsx("h1",{className:"text-4xl font-bold text-foreground dark:text-dark-foreground",children:"Sales History"}),(0,m.jsxs)("div",{className:"my-6 p-4 bg-card dark:bg-dark-card rounded-xl shadow-sm border border-border dark:border-dark-border space-y-4",children:[(0,m.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[m.jsx("input",{type:"text",placeholder:"Search by ID, Customer, Cashier...",className:"w-full px-4 py-2 rounded-lg border border-border dark:border-dark-border bg-card dark:bg-dark-card focus:outline-none focus:ring-2 focus:ring-primary",value:a,onChange:e=>o(e.target.value)}),m.jsx("input",{type:"date",value:l,onChange:e=>A(e.target.value),className:"w-full px-4 py-2 rounded-lg border border-border dark:border-dark-border bg-card dark:bg-dark-card"}),m.jsx("input",{type:"date",value:c,onChange:e=>d(e.target.value),className:"w-full px-4 py-2 rounded-lg border border-border dark:border-dark-border bg-card dark:bg-dark-card"})]}),(0,m.jsxs)("div",{className:"grid grid-cols-2 gap-4 pt-4 border-t border-border dark:border-dark-border",children:[(0,m.jsxs)("div",{className:"text-center",children:[m.jsx("p",{className:"text-sm text-foreground-muted dark:text-dark-foreground-muted font-bold",children:"Total Revenue"}),(0,m.jsxs)("p",{className:"text-2xl font-bold text-primary dark:text-dark-primary",children:["Ksh ",x.totalRevenue.toFixed(2)]})]}),(0,m.jsxs)("div",{className:"text-center",children:[m.jsx("p",{className:"text-sm text-foreground-muted dark:text-dark-foreground-muted font-bold",children:"Transactions"}),m.jsx("p",{className:"text-2xl font-bold text-primary dark:text-dark-primary",children:x.transactionCount})]})]})]}),(0,m.jsxs)("div",{className:"bg-card dark:bg-dark-card rounded-xl shadow-sm border border-border dark:border-dark-border overflow-x-auto",children:[(0,m.jsxs)("table",{className:"w-full text-sm text-left text-foreground-muted dark:text-dark-foreground-muted",children:[m.jsx("thead",{className:"text-xs text-foreground dark:text-dark-foreground uppercase bg-muted dark:bg-dark-muted font-semibold",children:(0,m.jsxs)("tr",{children:[m.jsx("th",{scope:"col",className:"px-6 py-4",children:"Receipt ID"}),m.jsx("th",{scope:"col",className:"px-6 py-4",children:"Date"}),m.jsx("th",{scope:"col",className:"px-6 py-4",children:"Customer"}),m.jsx("th",{scope:"col",className:"px-6 py-4",children:"Cashier"}),m.jsx("th",{scope:"col",className:"px-6 py-4 text-right",children:"Total (Ksh)"}),m.jsx("th",{scope:"col",className:"px-6 py-4",children:m.jsx("span",{className:"sr-only",children:"Actions"})})]})}),m.jsx("tbody",{className:"divide-y divide-border dark:divide-dark-border",children:f.map(e=>(0,m.jsxs)("tr",{className:"hover:bg-muted dark:hover:bg-dark-muted cursor-pointer",onClick:()=>n(e),children:[m.jsx("td",{className:"px-6 py-4 font-bold text-foreground dark:text-dark-foreground font-mono text-xs",children:e.id}),m.jsx("td",{className:"px-6 py-4",children:new Date(e.date).toLocaleString("en-GB",{timeZone:"Africa/Nairobi"})}),m.jsx("td",{className:"px-6 py-4",children:u.get(e.customerId)||"Unknown"}),m.jsx("td",{className:"px-6 py-4",children:e.cashierName}),m.jsx("td",{className:"px-6 py-4 text-right font-mono font-semibold",children:(e.total+(e.depositApplied||0)).toFixed(2)}),m.jsx("td",{className:"px-6 py-4 text-right",children:m.jsx("button",{className:"font-medium text-primary dark:text-dark-primary hover:underline",children:"View"})})]},e.id))})]}),p>1&&(0,m.jsxs)("div",{className:"flex justify-between items-center p-4 text-sm border-t border-border dark:border-dark-border",children:[m.jsx("button",{onClick:()=>s(e=>Math.max(1,e-1)),disabled:1===i,className:"px-3 py-1 border rounded-md disabled:opacity-50 border-border dark:border-dark-border",children:"Previous"}),(0,m.jsxs)("span",{children:["Page ",i," of ",p]}),m.jsx("button",{onClick:()=>s(e=>Math.min(p,e+1)),disabled:i===p,className:"px-3 py-1 border rounded-md disabled:opacity-50 border-border dark:border-dark-border",children:"Next"})]})]})]})},jG=e=>Promise.all(Array.from(e.getElementsByTagName("img")).map(e=>new Promise(t=>{e.complete&&0!==e.naturalHeight?t():(e.onload=()=>t(),e.onerror=()=>{console.warn(`Could not load image for PDF generation: ${e.src}`),t()})}))),jz=({sale:e,layaway:t,onBack:r,currentUser:n,settings:a,onWhatsAppReceiptRequest:o,showToast:i})=>{let s=(0,g.useRef)(null),[l,A]=(0,g.useState)(!1),c=async()=>{let{type:t,vendorId:r,productId:n}=a.hardware.printer;if("ESC/POS"===t){if(!r||!n){i("ESC/POS printer not configured. Please connect one in Settings > Hardware.","warning"),setTimeout(()=>window.print(),500);return}try{await oQ(e,a,e.cashierName)}catch(e){console.error("Direct print failed:",e),e.message?.includes("driver may be blocking access")?(i("Direct print failed. Falling back to Browser Print.","warning"),setTimeout(()=>window.print(),500)):i(e.message||"Direct print failed. Please check printer connection.","error")}}else window.print()},d=async()=>{s.current&&!l&&(A(!0),setTimeout(async()=>{try{if(!s.current)throw Error("PDF reference is not available.");await jG(s.current);let t=await (0,An.default)(s.current,{scale:2,useCORS:!0,backgroundColor:"#ffffff"}),r=t.toDataURL("image/png"),n=new sM("p","mm",[80,297]),a=n.internal.pageSize.getWidth(),o=t.height*a/t.width;n.addImage(r,"PNG",0,0,a,o),n.save(`Receipt_${e.id}.pdf`)}catch(e){console.error("Failed to generate PDF:",e),alert("Sorry, there was an error generating the PDF. The logo, barcode, or QR code might be causing an issue.")}finally{A(!1)}},100))};return m.jsx("div",{className:"h-full flex flex-col bg-background dark:bg-dark-background p-4 md:p-8 md:items-center md:justify-center",children:(0,m.jsxs)("div",{className:"w-full max-w-5xl flex flex-col md:flex-row gap-8 h-full md:h-auto",children:[(0,m.jsxs)("div",{className:"flex-shrink-0 md:flex-grow bg-card dark:bg-dark-card p-8 rounded-xl shadow-sm border border-border dark:border-dark-border flex flex-col items-center justify-center",children:[m.jsx("h1",{className:"text-3xl font-bold text-foreground dark:text-dark-foreground",children:"Receipt Details"}),(0,m.jsxs)("p",{className:"text-foreground-muted dark:text-dark-foreground-muted mt-2 font-mono text-sm",children:["ID: ",e.id]}),(0,m.jsxs)("div",{className:"mt-8 flex flex-wrap justify-center gap-4",children:[m.jsx("button",{onClick:r,whileHover:{scale:1.05},whileTap:{scale:.95},className:"bg-muted dark:bg-dark-muted text-foreground dark:text-dark-foreground font-bold py-3 px-6 rounded-lg hover:bg-border dark:hover:bg-dark-border transition-colors shadow-sm text-lg",children:" Back to List"}),m.jsx("button",{onClick:d,whileHover:{scale:1.05},whileTap:{scale:.95},disabled:l,className:"bg-secondary text-white font-bold py-3 px-6 rounded-lg hover:bg-sky-600 transition-colors shadow-md text-lg flex items-center disabled:bg-slate-400",children:l?"Downloading...":"Download PDF"}),(0,m.jsxs)("button",{onClick:()=>o("Receipt",e.id,e.customerId),whileHover:{scale:1.05},whileTap:{scale:.95},className:"bg-[#25D366] text-white font-bold py-3 px-6 rounded-lg hover:bg-[#1EAE53] transition-colors shadow-md text-lg flex items-center",children:[m.jsx("div",{className:"w-5 h-5 mr-2",children:ox.whatsapp}),"WhatsApp"]}),(0,m.jsxs)("button",{onClick:c,whileHover:{scale:1.05},whileTap:{scale:.95},className:"bg-foreground/80 dark:bg-dark-border text-white font-bold py-3 px-6 rounded-lg hover:bg-foreground dark:hover:bg-dark-border/80 transition-colors shadow-md text-lg flex items-center",children:[m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",viewBox:"0 0 20 20",fill:"currentColor",children:m.jsx("path",{fillRule:"evenodd",d:"M5 4v3H4a2 2 0 00-2 2v6a2 2 0 002 2h1v-4a1 1 0 011-1h10a1 1 0 011 1v4h1a2 2 0 002-2v-6a2 2 0 00-2-2h-1V4a2 2 0 00-2-2H7a2 2 0 00-2 2zm8 0H7v3h6V4zm0 8H7v4h6v-4z",clipRule:"evenodd"})}),"Print"]})]})]}),m.jsx("div",{className:"flex-grow w-full md:w-96 md:flex-grow-0 flex-shrink-0 overflow-y-auto",children:m.jsx("div",{id:"receipt-container",children:m.jsx("div",{ref:s,children:m.jsx(ii,{sale:e,cashierName:e.cashierName,settings:a,layaway:t})})})})]})})},jW=({settings:e,onUpdateSettings:t,showToast:r,isSetupWizard:n=!1,onWizardNext:a})=>{let[o,i]=(0,g.useState)(e.businessInfo),[s,l]=(0,g.useState)(e.businessInfo.logoUrl),A=e=>{let{name:t,value:r}=e.target;i(e=>({...e,[t]:r}))};return(0,m.jsxs)("form",{onSubmit:e=>{e.preventDefault(),t({businessInfo:{...o,logoUrl:s||""}}),a&&a()},className:"space-y-6",children:[(0,m.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,m.jsxs)("div",{className:"md:col-span-2 space-y-4",children:[(0,m.jsxs)("div",{children:[m.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-foreground dark:text-white",children:"Company Name"}),m.jsx("input",{type:"text",name:"name",id:"name",value:o.name,onChange:A,className:"mt-1 block w-full px-3 py-2 bg-card dark:bg-dark-background border-0 rounded-xl shadow-clay-light-inset dark:shadow-clay-dark-inset focus:outline-none sm:text-sm text-foreground dark:text-dark-foreground placeholder-foreground-muted dark:placeholder-dark-foreground-muted"})]}),(0,m.jsxs)("div",{children:[m.jsx("label",{htmlFor:"location",className:"block text-sm font-medium text-foreground dark:text-white",children:"Business Location"}),m.jsx("input",{type:"text",name:"location",id:"location",value:o.location,onChange:A,className:"mt-1 block w-full px-3 py-2 bg-card dark:bg-dark-background border-0 rounded-xl shadow-clay-light-inset dark:shadow-clay-dark-inset focus:outline-none sm:text-sm text-foreground dark:text-dark-foreground placeholder-foreground-muted dark:placeholder-dark-foreground-muted"})]}),(0,m.jsxs)("div",{children:[m.jsx("label",{htmlFor:"phone",className:"block text-sm font-medium text-foreground dark:text-white",children:"Business Phone"}),m.jsx("input",{type:"tel",name:"phone",id:"phone",value:o.phone,onChange:A,className:"mt-1 block w-full px-3 py-2 bg-card dark:bg-dark-background border-0 rounded-xl shadow-clay-light-inset dark:shadow-clay-dark-inset focus:outline-none sm:text-sm text-foreground dark:text-dark-foreground placeholder-foreground-muted dark:placeholder-dark-foreground-muted"})]}),(0,m.jsxs)("div",{children:[m.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-foreground dark:text-white",children:"Business Email"}),m.jsx("input",{type:"email",name:"email",id:"email",value:o.email||"",onChange:A,className:"mt-1 block w-full px-3 py-2 bg-card dark:bg-dark-background border-0 rounded-xl shadow-clay-light-inset dark:shadow-clay-dark-inset focus:outline-none sm:text-sm text-foreground dark:text-dark-foreground placeholder-foreground-muted dark:placeholder-dark-foreground-muted"})]}),(0,m.jsxs)("div",{children:[m.jsx("label",{htmlFor:"branch",className:"block text-sm font-medium text-foreground dark:text-white",children:"Branch Name"}),m.jsx("input",{type:"text",name:"branch",id:"branch",value:o.branch||"",onChange:A,className:"mt-1 block w-full px-3 py-2 bg-card dark:bg-dark-background border-0 rounded-xl shadow-clay-light-inset dark:shadow-clay-dark-inset focus:outline-none sm:text-sm text-foreground dark:text-dark-foreground placeholder-foreground-muted dark:placeholder-dark-foreground-muted"})]})]}),(0,m.jsxs)("div",{className:"md:col-span-1",children:[m.jsx("label",{className:"block text-sm font-medium text-foreground dark:text-white",children:"Business Logo"}),m.jsx("div",{className:"mt-1 flex justify-center px-6 pt-5 pb-6 border-2 border-border dark:border-dark-border border-dashed rounded-xl",children:(0,m.jsxs)("div",{className:"space-y-1 text-center",children:[s?m.jsx("img",{src:s,alt:"Logo preview",className:"mx-auto h-24 w-24 object-contain rounded-md"}):m.jsx("svg",{className:"mx-auto h-12 w-12 text-foreground-muted dark:text-dark-foreground-muted",stroke:"currentColor",fill:"none",viewBox:"0 0 48 48","aria-hidden":"true",children:m.jsx("path",{d:"M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"})}),(0,m.jsxs)("div",{className:"flex text-sm text-foreground-muted dark:text-dark-foreground-muted",children:[(0,m.jsxs)("label",{htmlFor:"file-upload",className:"relative cursor-pointer bg-card dark:bg-dark-card rounded-md font-medium text-primary dark:text-dark-primary hover:text-primary-focus focus-within:outline-none",children:[m.jsx("span",{children:"Upload a file"}),m.jsx("input",{id:"file-upload",name:"file-upload",type:"file",className:"sr-only",onChange:e=>{let t=e.target.files?.[0];if(t){let e=new FileReader;e.onloadend=()=>{l(e.result),r("Logo preview updated. Save to persist.","info")},e.readAsDataURL(t)}},accept:"image/*"})]}),m.jsx("p",{className:"pl-1",children:"or drag and drop"})]}),m.jsx("p",{className:"text-xs text-foreground-muted dark:text-dark-foreground-muted",children:"PNG, JPG, GIF up to 10MB"})]})})]})]}),m.jsx("div",{className:`flex justify-end pt-6 ${!n&&"border-t border-border dark:border-dark-border mt-6"}`,children:m.jsx("button",{type:"submit",whileTap:{scale:.95},className:"bg-gradient-to-br from-primary to-primary-focus text-primary-content font-semibold px-6 py-2 rounded-xl transition-all transform hover:-translate-y-0.5 shadow-clay dark:shadow-clay-dark active:shadow-clay-inset dark:active:shadow-clay-dark-inset",children:n?"Save & Continue":"Save Business Info"})})]})},j$=({settings:e,onUpdateSettings:t})=>{let[r,n]=(0,g.useState)(e.tax),[a,o]=(0,g.useState)(e.businessInfo.kraPin),i=e=>{let{name:t,value:r,type:a}=e.target;if("checkbox"===a){let{checked:r}=e.target;n(e=>({...e,[t]:r}))}else n(e=>({...e,[t]:"vatRate"===t?parseFloat(r):r}))};return(0,m.jsxs)("form",{onSubmit:n=>{n.preventDefault(),t({tax:r,businessInfo:{...e.businessInfo,kraPin:a}})},className:"space-y-6",children:[(0,m.jsxs)("div",{className:"flex items-center justify-between p-4 bg-muted dark:bg-dark-muted rounded-xl",children:[m.jsx("span",{className:"text-sm font-medium text-foreground dark:text-dark-foreground",children:"Enable VAT Calculations"}),(0,m.jsxs)("label",{htmlFor:"vat-toggle",className:"inline-flex relative items-center cursor-pointer",children:[m.jsx("input",{type:"checkbox",name:"vatEnabled",checked:r.vatEnabled,onChange:i,id:"vat-toggle",className:"sr-only peer"}),m.jsx("div",{className:"w-11 h-6 bg-gray-200 rounded-full peer dark:bg-gray-700 peer-focus:ring-4 peer-focus:ring-primary dark:peer-focus:ring-dark-primary peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-0.5 after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary"})]})]}),m.jsx(Q,{children:r.vatEnabled&&(0,m.jsxs)("div",{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"space-y-6 overflow-hidden",children:[(0,m.jsxs)("div",{children:[m.jsx("label",{htmlFor:"vatRate",className:"block text-sm font-medium text-foreground dark:text-dark-foreground",children:"Default VAT Rate (%)"}),m.jsx("input",{type:"number",name:"vatRate",id:"vatRate",value:r.vatRate,onChange:i,className:"mt-1 block w-full max-w-xs px-3 py-2 bg-card dark:bg-dark-background border border-border dark:border-dark-border rounded-xl shadow-sm focus:outline-none focus:ring-primary dark:focus:ring-dark-primary sm:text-sm"})]}),(0,m.jsxs)("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-foreground dark:text-dark-foreground",children:"Default Pricing Model"}),(0,m.jsxs)("div",{className:"mt-2 flex space-x-4",children:[(0,m.jsxs)("label",{className:"flex items-center",children:[m.jsx("input",{type:"radio",name:"pricingType",value:"inclusive",checked:"inclusive"===r.pricingType,onChange:i,className:"focus:ring-primary h-4 w-4 text-primary border-border"}),m.jsx("span",{className:"ml-2 text-sm",children:"VAT Inclusive (Prices include VAT)"})]}),(0,m.jsxs)("label",{className:"flex items-center",children:[m.jsx("input",{type:"radio",name:"pricingType",value:"exclusive",checked:"exclusive"===r.pricingType,onChange:i,className:"focus:ring-primary h-4 w-4 text-primary border-border"}),m.jsx("span",{className:"ml-2 text-sm",children:"VAT Exclusive (VAT is added on top)"})]})]})]}),(0,m.jsxs)("div",{className:"p-4 bg-muted dark:bg-dark-muted rounded-xl space-y-4",children:[(0,m.jsxs)("div",{className:"flex items-center justify-between",children:[m.jsx("span",{className:"text-sm font-medium text-foreground dark:text-dark-foreground",children:"Enable eTIMS Compliance"}),(0,m.jsxs)("label",{htmlFor:"etims-toggle",className:"inline-flex relative items-center cursor-pointer",children:[m.jsx("input",{type:"checkbox",name:"etimsEnabled",checked:r.etimsEnabled,onChange:i,id:"etims-toggle",className:"sr-only peer"}),m.jsx("div",{className:"w-11 h-6 bg-gray-200 rounded-full peer dark:bg-gray-700 peer-focus:ring-4 peer-focus:ring-primary dark:peer-focus:ring-dark-primary peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-0.5 after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary"})]})]}),r.etimsEnabled&&(0,m.jsxs)("div",{initial:{opacity:0},animate:{opacity:1},className:"space-y-4",children:[(0,m.jsxs)("div",{children:[m.jsx("label",{htmlFor:"kraPin",className:"block text-sm font-medium text-foreground dark:text-dark-foreground",children:"KRA PIN"}),m.jsx("input",{type:"text",name:"kraPin",id:"kraPin",value:a,onChange:e=>o(e.target.value),className:"mt-1 block w-full max-w-xs px-3 py-2 bg-card dark:bg-dark-background border border-border dark:border-dark-border rounded-xl shadow-sm"})]}),m.jsx("div",{className:"p-2 bg-warning/10 border border-warning/20 rounded-md text-xs text-warning",children:"Note: eTIMS integration requires a backend service to communicate with the KRA API. This toggle is for UI demonstration purposes."})]})]})]})}),m.jsx("div",{className:"flex justify-end pt-6 border-t border-border dark:border-dark-border mt-6",children:m.jsx("button",{type:"submit",whileTap:{scale:.95},className:"bg-primary text-primary-content font-semibold px-6 py-2 rounded-xl transition-shadow shadow-clay dark:shadow-clay-dark active:shadow-clay-inset dark:active:shadow-clay-dark-inset",children:"Save Tax Settings"})})]})},jX=({settings:e,onUpdateSettings:t})=>{let r=(r,n,a)=>{let o=e.permissions[r],i=a?[...o,n]:o.filter(e=>e!==n);t({permissions:{...e.permissions,[r]:i}})};return m.jsx("div",{className:"overflow-x-auto",children:m.jsx("div",{className:"rounded-xl shadow-sm border border-border dark:border-dark-border",children:(0,m.jsxs)("table",{className:"w-full text-sm text-left",children:[m.jsx("thead",{className:"text-xs text-foreground dark:text-dark-foreground uppercase bg-muted dark:bg-dark-muted",children:(0,m.jsxs)("tr",{children:[m.jsx("th",{scope:"col",className:"px-6 py-3",children:"Permission"}),Object.keys(e.permissions).map(e=>m.jsx("th",{scope:"col",className:"px-6 py-3 text-center",children:e},e))]})}),m.jsx("tbody",{children:ob.map(({module:t,permissions:n})=>(0,m.jsxs)(x().Fragment,{children:[m.jsx("tr",{className:"bg-background dark:bg-dark-background/50",children:m.jsx("td",{colSpan:1+Object.keys(e.permissions).length,className:"px-6 py-2 font-bold text-foreground-muted dark:text-dark-foreground-muted",children:t})}),n.map(t=>(0,m.jsxs)("tr",{className:"bg-card dark:bg-dark-card border-b dark:border-dark-border last:border-b-0 hover:bg-muted dark:hover:bg-dark-muted/50",children:[m.jsx("td",{className:"px-6 py-4 font-medium text-foreground dark:text-dark-foreground",children:t.label}),Object.keys(e.permissions).map(n=>m.jsx("td",{className:"px-6 py-4 text-center",children:m.jsx("input",{type:"checkbox",className:"h-4 w-4 rounded border-border dark:border-dark-border text-primary focus:ring-primary dark:bg-dark-card",checked:e.permissions[n].includes(t.id),onChange:e=>r(n,t.id,e.target.checked),disabled:"Admin"===n})},`${t.id}-${n}`))]},t.id))]},t))})]})})})},jY=({settings:e,onUpdateSettings:t})=>{let[r,n]=(0,g.useState)(e.receipt),a=e=>{let{name:t,value:r}=e.target;n(e=>({...e,[t]:r}))};return(0,m.jsxs)("form",{onSubmit:e=>{e.preventDefault(),t({receipt:r})},className:"space-y-6",children:[(0,m.jsxs)("div",{children:[m.jsx("label",{htmlFor:"footer",className:"block text-sm font-medium text-foreground dark:text-dark-foreground",children:"Receipt Footer Text"}),m.jsx("textarea",{name:"footer",id:"footer",value:r.footer,onChange:a,rows:3,className:"mt-1 block w-full px-3 py-2 bg-card dark:bg-dark-background border border-border dark:border-dark-border rounded-md shadow-sm focus:outline-none focus:ring-primary dark:focus:ring-dark-primary sm:text-sm"}),m.jsx("p",{className:"mt-2 text-xs text-foreground-muted dark:text-dark-foreground-muted",children:"This text will appear at the bottom of all receipts and invoices."})]}),(0,m.jsxs)("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-foreground dark:text-dark-foreground",children:"Number Prefixes"}),(0,m.jsxs)("div",{className:"mt-2 grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,m.jsxs)("div",{children:[m.jsx("label",{htmlFor:"invoicePrefix",className:"block text-xs font-medium text-foreground-muted dark:text-dark-foreground-muted",children:"Invoice Prefix"}),m.jsx("input",{type:"text",name:"invoicePrefix",id:"invoicePrefix",value:r.invoicePrefix,onChange:a,className:"mt-1 block w-full px-3 py-2 bg-card dark:bg-dark-background border border-border dark:border-dark-border rounded-md shadow-sm focus:outline-none focus:ring-primary dark:focus:ring-dark-primary sm:text-sm"})]}),(0,m.jsxs)("div",{children:[m.jsx("label",{htmlFor:"quotePrefix",className:"block text-xs font-medium text-foreground-muted dark:text-dark-foreground-muted",children:"Quotation Prefix"}),m.jsx("input",{type:"text",name:"quotePrefix",id:"quotePrefix",value:r.quotePrefix,onChange:a,className:"mt-1 block w-full px-3 py-2 bg-card dark:bg-dark-background border border-border dark:border-dark-border rounded-md shadow-sm focus:outline-none focus:ring-primary dark:focus:ring-dark-primary sm:text-sm"})]}),(0,m.jsxs)("div",{children:[m.jsx("label",{htmlFor:"poNumberPrefix",className:"block text-xs font-medium text-foreground-muted dark:text-dark-foreground-muted",children:"Purchase Order Prefix"}),m.jsx("input",{type:"text",name:"poNumberPrefix",id:"poNumberPrefix",value:r.poNumberPrefix,onChange:a,className:"mt-1 block w-full px-3 py-2 bg-card dark:bg-dark-background border border-border dark:border-dark-border rounded-md shadow-sm focus:outline-none focus:ring-primary dark:focus:ring-dark-primary sm:text-sm"})]}),(0,m.jsxs)("div",{children:[m.jsx("label",{htmlFor:"layawayPrefix",className:"block text-xs font-medium text-foreground-muted dark:text-dark-foreground-muted",children:"Layaway Prefix"}),m.jsx("input",{type:"text",name:"layawayPrefix",id:"layawayPrefix",value:r.layawayPrefix,onChange:a,className:"mt-1 block w-full px-3 py-2 bg-card dark:bg-dark-background border border-border dark:border-dark-border rounded-md shadow-sm focus:outline-none focus:ring-primary dark:focus:ring-dark-primary sm:text-sm"})]}),(0,m.jsxs)("div",{children:[m.jsx("label",{htmlFor:"workOrderPrefix",className:"block text-xs font-medium text-foreground-muted dark:text-dark-foreground-muted",children:"Work Order Prefix"}),m.jsx("input",{type:"text",name:"workOrderPrefix",id:"workOrderPrefix",value:r.workOrderPrefix,onChange:a,className:"mt-1 block w-full px-3 py-2 bg-card dark:bg-dark-background border border-border dark:border-dark-border rounded-md shadow-sm focus:outline-none focus:ring-primary dark:focus:ring-dark-primary sm:text-sm"})]}),(0,m.jsxs)("div",{children:[m.jsx("label",{htmlFor:"salesOrderPrefix",className:"block text-xs font-medium text-foreground-muted dark:text-dark-foreground-muted",children:"Sales Order Prefix"}),m.jsx("input",{type:"text",name:"salesOrderPrefix",id:"salesOrderPrefix",value:r.salesOrderPrefix,onChange:a,className:"mt-1 block w-full px-3 py-2 bg-card dark:bg-dark-background border border-border dark:border-dark-border rounded-md shadow-sm focus:outline-none focus:ring-primary dark:focus:ring-dark-primary sm:text-sm"})]})]})]}),m.jsx("div",{className:"flex justify-end pt-6 border-t border-border dark:border-dark-border mt-6",children:m.jsx("button",{type:"submit",whileTap:{scale:.95},className:"bg-primary text-primary-content font-semibold px-6 py-2 rounded-xl transition-shadow shadow-clay dark:shadow-clay-dark active:shadow-clay-inset dark:active:shadow-clay-dark-inset",children:"Save Receipt Settings"})})]})},jJ=({auditLogs:e,users:t,onDriveBackupAuditLogs:r,isDriveAuthenticated:n})=>{let[a,o]=(0,g.useState)(""),[i,s]=(0,g.useState)("all"),[l,A]=(0,g.useState)(""),[c,d]=(0,g.useState)(""),[u,h]=(0,g.useState)(1),f=(0,g.useMemo)(()=>{let t=l?new Date(l):null;t&&t.setHours(0,0,0,0);let r=c?new Date(c):null;return r&&r.setHours(23,59,59,999),e.filter(e=>"all"===i||e.userId===i).filter(e=>{let n=new Date(e.timestamp);return(!t||!(n<t))&&(!r||!(n>r))}).filter(e=>e.action.toLowerCase().includes(a.toLowerCase())||e.details.toLowerCase().includes(a.toLowerCase())||e.userName.toLowerCase().includes(a.toLowerCase()))},[e,a,i,l,c]),p=(0,g.useMemo)(()=>{let e=(u-1)*20;return f.slice(e,e+20)},[f,u]),x=Math.ceil(f.length/20),b=e=>{if(0===f.length){alert("No logs to export with current filters.");return}let t=`banduka_pos_audit_logs_${new Date().toISOString().split("T")[0]}`,r="",n="";"csv"===e?(r=["id,timestamp,userId,userName,action,details",...f.map(e=>[e.id,new Date(e.timestamp).toISOString(),e.userId,`"${e.userName.replace(/"/g,'""')}"`,e.action,`"${e.details.replace(/"/g,'""')}"`].join(","))].join("\n"),n="text/csv;charset=utf-8;"):(r=JSON.stringify(f,null,2),n="application/json;charset=utf-8;");let a=new Blob([r],{type:n}),o=document.createElement("a");o.href=URL.createObjectURL(a),o.download=`${t}.${e}`,document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL(o.href)};return(0,m.jsxs)("div",{className:"space-y-4",children:[(0,m.jsxs)("div",{className:"p-4 bg-muted dark:bg-dark-muted rounded-lg border border-border dark:border-dark-border space-y-4",children:[m.jsx("h4",{className:"font-semibold text-foreground dark:text-dark-foreground",children:"Filters"}),(0,m.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[m.jsx("input",{type:"text",placeholder:"Search logs...",value:a,onChange:e=>o(e.target.value),className:"w-full px-3 py-2 bg-card dark:bg-dark-card border border-border dark:border-dark-border rounded-md shadow-sm focus:outline-none focus:ring-primary dark:focus:ring-dark-primary sm:text-sm"}),(0,m.jsxs)("select",{value:i,onChange:e=>s(e.target.value),className:"w-full block pl-3 pr-10 py-2 text-base bg-card dark:bg-dark-card border border-border dark:border-dark-border focus:outline-none focus:ring-primary dark:focus:ring-dark-primary sm:text-sm rounded-md",children:[m.jsx("option",{value:"all",children:"All Users"}),t.map(e=>m.jsx("option",{value:e.id,children:e.name},e.id))]}),m.jsx("input",{type:"date",value:l,onChange:e=>A(e.target.value),className:"w-full px-3 py-2 bg-card dark:bg-dark-card border border-border dark:border-dark-border rounded-md shadow-sm focus:outline-none focus:ring-primary dark:focus:ring-dark-primary sm:text-sm"}),m.jsx("input",{type:"date",value:c,onChange:e=>d(e.target.value),className:"w-full px-3 py-2 bg-card dark:bg-dark-card border border-border dark:border-dark-border rounded-md shadow-sm focus:outline-none focus:ring-primary dark:focus:ring-dark-primary sm:text-sm"})]})]}),(0,m.jsxs)("div",{className:"flex flex-wrap gap-2",children:[m.jsx("button",{onClick:()=>b("csv"),className:"bg-primary/80 text-white text-sm font-semibold px-4 py-2 rounded-lg hover:bg-primary",children:"Export as CSV"}),m.jsx("button",{onClick:()=>b("json"),className:"bg-primary/80 text-white text-sm font-semibold px-4 py-2 rounded-lg hover:bg-primary",children:"Export as JSON"}),m.jsx("button",{onClick:r,disabled:!n,className:"bg-blue-600 text-white text-sm font-semibold px-4 py-2 rounded-lg hover:bg-blue-700 disabled:bg-slate-400 disabled:cursor-not-allowed",children:"Backup to Drive"})]}),m.jsx("div",{className:"bg-card dark:bg-dark-card rounded-lg shadow-sm border border-border dark:border-dark-border overflow-x-auto",children:(0,m.jsxs)("table",{className:"w-full text-sm text-left text-foreground-muted dark:text-dark-foreground-muted",children:[m.jsx("thead",{className:"text-xs text-foreground dark:text-dark-foreground uppercase bg-muted dark:bg-dark-muted",children:(0,m.jsxs)("tr",{children:[m.jsx("th",{scope:"col",className:"px-6 py-3",children:"Timestamp"}),m.jsx("th",{scope:"col",className:"px-6 py-3",children:"User"}),m.jsx("th",{scope:"col",className:"px-6 py-3",children:"Action"}),m.jsx("th",{scope:"col",className:"px-6 py-3",children:"Details"})]})}),(0,m.jsxs)("tbody",{children:[p.map(e=>(0,m.jsxs)("tr",{className:"bg-card dark:bg-dark-card border-b border-border dark:border-dark-border last:border-b-0 hover:bg-muted dark:hover:bg-dark-muted",children:[m.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:new Date(e.timestamp).toLocaleString("en-GB",{timeZone:"Africa/Nairobi"})}),m.jsx("td",{className:"px-6 py-4 font-medium text-foreground dark:text-dark-foreground",children:e.userName}),m.jsx("td",{className:"px-6 py-4",children:m.jsx("span",{className:"font-mono text-xs bg-muted dark:bg-dark-muted text-foreground dark:text-dark-foreground px-2 py-1 rounded",children:e.action})}),m.jsx("td",{className:"px-6 py-4",children:e.details})]},e.id)),0===f.length&&m.jsx("tr",{children:m.jsx("td",{colSpan:4,className:"text-center py-8",children:"No logs found matching criteria."})})]})]})}),x>1&&(0,m.jsxs)("div",{className:"flex justify-between items-center mt-4 text-sm",children:[m.jsx("button",{onClick:()=>h(e=>Math.max(1,e-1)),disabled:1===u,className:"px-3 py-1 border border-border dark:border-dark-border rounded-md disabled:opacity-50",children:"Previous"}),(0,m.jsxs)("span",{children:["Page ",u," of ",x]}),m.jsx("button",{onClick:()=>h(e=>Math.min(x,e+1)),disabled:u===x,className:"px-3 py-1 border border-border dark:border-dark-border rounded-md disabled:opacity-50",children:"Next"})]})]})},jZ=({id:e,name:t,checked:r,onChange:n})=>(0,m.jsxs)("label",{htmlFor:e,className:"inline-flex relative items-center cursor-pointer",children:[m.jsx("input",{type:"checkbox",name:t,checked:r,onChange:n,id:e,className:"sr-only peer"}),m.jsx("div",{className:"w-11 h-6 bg-slate-200 dark:bg-dark-muted rounded-full peer peer-checked:bg-primary dark:peer-checked:bg-dark-primary transition-colors after:content-[''] after:absolute after:top-0.5 after:left-[2px] after:bg-white after:border-slate-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:after:translate-x-full"})]}),j0=({settings:e,onUpdateSettings:t})=>{let[r,n]=(0,g.useState)(e.loyalty),a=e=>{let{name:t,value:r,type:a,checked:o}=e.target;n(e=>({...e,[t]:"checkbox"===a?o:parseFloat(r)||0}))};return(0,m.jsxs)("form",{onSubmit:e=>{e.preventDefault(),t({loyalty:r})},className:"space-y-6",children:[(0,m.jsxs)("div",{className:"bg-card dark:bg-dark-card p-4 rounded-xl shadow-clay-light dark:shadow-clay-dark flex justify-between items-center",children:[m.jsx("label",{htmlFor:"loyalty-toggle",className:"text-sm font-medium text-foreground dark:text-dark-foreground",children:"Enable Loyalty Program"}),m.jsx(jZ,{id:"loyalty-toggle",name:"enabled",checked:r.enabled,onChange:a})]}),m.jsx(Q,{children:r.enabled&&m.jsx("div",{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"space-y-6 pt-6 border-t border-border dark:border-dark-border overflow-hidden",children:(0,m.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 items-start",children:[(0,m.jsxs)("div",{children:[m.jsx("label",{htmlFor:"pointsPerKsh",className:"block text-sm font-medium text-foreground-muted dark:text-dark-foreground-muted",children:"Points Earning Rule"}),(0,m.jsxs)("div",{className:"mt-1 flex items-center space-x-2 text-foreground dark:text-dark-foreground",children:[m.jsx("span",{children:"1 point per every"}),m.jsx("input",{type:"number",name:"pointsPerKsh",id:"pointsPerKsh",value:r.pointsPerKsh,onChange:a,min:"1",className:"w-24 px-2 py-1 bg-card dark:bg-dark-background border-0 rounded-xl shadow-clay-light-inset dark:shadow-clay-dark-inset focus:outline-none"}),m.jsx("span",{children:"Ksh spent"})]})]}),(0,m.jsxs)("div",{children:[m.jsx("label",{htmlFor:"redemptionRate",className:"block text-sm font-medium text-foreground-muted dark:text-dark-foreground-muted",children:"Points Redemption Rule"}),(0,m.jsxs)("div",{className:"mt-1 flex items-center space-x-2 text-foreground dark:text-dark-foreground",children:[m.jsx("span",{children:"1 point is worth"}),m.jsx("input",{type:"number",name:"redemptionRate",id:"redemptionRate",value:r.redemptionRate,onChange:a,min:"0",step:"0.01",className:"w-24 px-2 py-1 bg-card dark:bg-dark-background border-0 rounded-xl shadow-clay-light-inset dark:shadow-clay-dark-inset focus:outline-none"}),m.jsx("span",{children:"Ksh"})]})]}),(0,m.jsxs)("div",{children:[m.jsx("label",{htmlFor:"minRedeemablePoints",className:"block text-sm font-medium text-foreground-muted dark:text-dark-foreground-muted",children:"Minimum Points to Redeem"}),m.jsx("input",{type:"number",name:"minRedeemablePoints",id:"minRedeemablePoints",value:r.minRedeemablePoints,onChange:a,min:"0",className:"mt-1 block w-full px-3 py-2 bg-card dark:bg-dark-background border-0 rounded-xl shadow-clay-light-inset dark:shadow-clay-dark-inset focus:outline-none"}),m.jsx("p",{className:"mt-1 text-xs text-foreground-muted dark:text-dark-foreground-muted",children:"Customer must have at least this many points to start redeeming."})]}),(0,m.jsxs)("div",{children:[m.jsx("label",{htmlFor:"maxRedemptionPercentage",className:"block text-sm font-medium text-foreground-muted dark:text-dark-foreground-muted",children:"Max Redemption per Sale (%)"}),m.jsx("input",{type:"number",name:"maxRedemptionPercentage",id:"maxRedemptionPercentage",value:r.maxRedemptionPercentage,onChange:a,min:"0",max:"100",className:"mt-1 block w-full px-3 py-2 bg-card dark:bg-dark-background border-0 rounded-xl shadow-clay-light-inset dark:shadow-clay-dark-inset focus:outline-none"}),m.jsx("p",{className:"mt-1 text-xs text-foreground-muted dark:text-dark-foreground-muted",children:"Maximum percentage of a sale's total that can be paid with points."})]})]})})}),m.jsx("div",{className:"flex justify-end pt-6",children:m.jsx("button",{type:"submit",whileTap:{scale:.98},className:"bg-primary text-primary-content font-semibold px-6 py-2 rounded-xl transition-shadow shadow-clay-light dark:shadow-clay-dark active:shadow-clay-light-inset dark:active:shadow-clay-dark-inset",children:"Save Loyalty Settings"})})]})},j1=({name:e,value:t,label:r,checked:n,onChange:a})=>(0,m.jsxs)("label",{className:"flex items-center space-x-3 cursor-pointer",children:[m.jsx("input",{type:"radio",name:e,value:t,checked:n,onChange:a,className:"sr-only peer"}),m.jsx("div",{className:"relative flex items-center justify-center w-5 h-5 rounded-full border-2 border-slate-400 dark:border-dark-foreground-muted peer-checked:border-primary dark:peer-checked:border-dark-primary transition-colors",children:m.jsx("div",{className:"w-2.5 h-2.5 bg-primary dark:bg-dark-primary rounded-full scale-0 peer-checked:scale-100 transition-transform"})}),m.jsx("span",{className:"text-sm font-medium text-foreground dark:text-dark-foreground",children:r})]}),j2=({id:e,name:t,checked:r,onChange:n})=>(0,m.jsxs)("label",{htmlFor:e,className:"inline-flex relative items-center cursor-pointer",children:[m.jsx("input",{type:"checkbox",name:t,checked:r,onChange:n,id:e,className:"sr-only peer"}),m.jsx("div",{className:"w-11 h-6 bg-slate-200 dark:bg-dark-muted rounded-full peer peer-checked:bg-primary dark:peer-checked:bg-dark-primary transition-colors after:content-[''] after:absolute after:top-0.5 after:left-[2px] after:bg-white after:border-slate-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:after:translate-x-full"})]}),j5=({settings:e,onUpdateSettings:t})=>{let[r,n]=(0,g.useState)(e.discount),a=e=>{let{name:t,value:r,type:a,checked:o}=e.target;n(e=>({...e,[t]:"checkbox"===a?o:"number"===a?parseFloat(r):r}))},o=e=>{let{name:t,value:r}=e.target;n(e=>({...e,[t]:r}))};return(0,m.jsxs)("form",{onSubmit:e=>{e.preventDefault(),t({discount:r})},className:"space-y-6",children:[(0,m.jsxs)("div",{className:"bg-card dark:bg-dark-card p-4 rounded-xl shadow-clay-light dark:shadow-clay-dark flex justify-between items-center",children:[m.jsx("label",{htmlFor:"discount-toggle",className:"text-sm font-medium text-foreground dark:text-dark-foreground",children:"Enable Discounts"}),m.jsx(j2,{id:"discount-toggle",name:"enabled",checked:r.enabled,onChange:a})]}),m.jsx(Q,{children:r.enabled&&m.jsx("div",{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"space-y-6 pt-6 border-t border-border dark:border-dark-border overflow-hidden",children:(0,m.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 items-start",children:[(0,m.jsxs)("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-foreground dark:text-dark-foreground mb-3",children:"Discount Type"}),(0,m.jsxs)("div",{className:"space-y-3",children:[m.jsx(j1,{name:"type",value:"percentage",label:"Percentage (%)",checked:"percentage"===r.type,onChange:o}),m.jsx(j1,{name:"type",value:"fixed",label:"Fixed Amount (KES)",checked:"fixed"===r.type,onChange:o})]})]}),(0,m.jsxs)("div",{children:[(0,m.jsxs)("label",{htmlFor:"maxValue",className:"block text-sm font-medium text-foreground dark:text-dark-foreground",children:["Maximum Discount Value (","percentage"===r.type?"%":"KES",")"]}),m.jsx("input",{type:"number",name:"maxValue",id:"maxValue",value:r.maxValue,onChange:a,min:"0",className:"mt-1 block w-full px-3 py-2 bg-card dark:bg-dark-background border-0 rounded-xl shadow-clay-light-inset dark:shadow-clay-dark-inset focus:outline-none sm:text-sm text-foreground dark:text-dark-foreground placeholder-foreground-muted dark:placeholder-dark-foreground-muted"}),m.jsx("p",{className:"mt-2 text-xs text-foreground-muted dark:text-dark-foreground-muted",children:"Set the maximum discount a cashier can apply."})]})]})})}),m.jsx("div",{className:"flex justify-end pt-6",children:m.jsx("button",{type:"submit",whileTap:{scale:.98},className:"bg-primary text-primary-content font-semibold px-6 py-2 rounded-xl transition-shadow shadow-clay-light dark:shadow-clay-dark active:shadow-clay-light-inset dark:active:shadow-clay-dark-inset",children:"Save Discount Settings"})})]})},j4=({name:e,value:t,label:r,checked:n,onChange:a})=>(0,m.jsxs)("label",{className:"flex items-center space-x-3 cursor-pointer",children:[m.jsx("input",{type:"radio",name:e,value:t,checked:n,onChange:a,className:"sr-only peer"}),m.jsx("div",{className:"relative flex items-center justify-center w-5 h-5 rounded-full border-2 border-slate-400 dark:border-dark-foreground-muted peer-checked:border-primary dark:peer-checked:border-dark-primary transition-colors",children:m.jsx("div",{className:"w-2.5 h-2.5 bg-primary dark:bg-dark-primary rounded-full scale-0 peer-checked:scale-100 transition-transform"})}),m.jsx("span",{className:"text-sm font-medium text-foreground dark:text-dark-foreground",children:r})]}),j3=({id:e,name:t,checked:r,onChange:n})=>(0,m.jsxs)("label",{htmlFor:e,className:"inline-flex relative items-center cursor-pointer",children:[m.jsx("input",{type:"checkbox",name:t,checked:r,onChange:n,id:e,className:"sr-only peer"}),m.jsx("div",{className:"w-11 h-6 bg-slate-200 dark:bg-dark-muted rounded-full peer peer-checked:bg-primary dark:peer-checked:bg-dark-primary transition-colors after:content-[''] after:absolute after:top-0.5 after:left-[2px] after:bg-white after:border-slate-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:after:translate-x-full"})]}),j6=({settings:e,onUpdateSettings:t,showToast:r,onTestBarcodePrint:n})=>{let[a,o]=(0,g.useState)(e.hardware),[i,s]=(0,g.useState)(null);(0,g.useEffect)(()=>{let{vendorId:e,productId:t}=a.printer;e&&t&&oN(e,t).then(e=>{e&&s(`${e.productName} (Permission granted)`)})},[a.printer]);let l=e=>{let{name:t,value:r}=e.target,n="vendorId"===t||"productId"===t?parseInt(r)||void 0:r;o(e=>({...e,printer:{...e.printer,[t]:n}}))},A=async()=>{try{let e=await oj(),n={...a.printer,vendorId:e.vendorId,productId:e.productId,name:e.productName};o(e=>({...e,printer:n})),s(e.productName||"Unnamed Device"),r(`Connected to ${e.productName}!`,"success"),t({hardware:{...a,printer:n}})}catch(e){if("NotFoundError"===e.name)return;if(e.message?.includes("driver may be blocking access")){let e={...a.printer,type:"Browser"},n={...a,printer:e};o(n),t({hardware:n}),r("Direct connection failed. Switched to 'Browser Print' mode for compatibility.","warning")}else r(e.message||"Failed to connect.","error");console.error("Printer connection error:",e)}},c=async e=>{if("Receipt Printer"===e){if("ESC/POS"!==a.printer.type){r("Test print is only available for ESC/POS direct printers.","info");return}if(!a.printer.vendorId||!a.printer.productId){r("Printer not configured. Please connect one using the 'Connect Printer' button before testing.","error");return}try{r("Sending test print...","info"),await oT(a.printer),r("Test print sent successfully!","success")}catch(e){if("NotFoundError"===e.name)return;if(e.message?.includes("driver may be blocking access")){let e={...a.printer,type:"Browser"},n={...a,printer:e};o(n),t({hardware:n}),r("Test print failed. Switched to 'Browser Print' for compatibility.","warning")}else r(e.message||"Test print failed.","error");console.error("Test print error:",e)}}else if("Cash Drawer"===e){if("ESC/POS"!==a.printer.type){r("Cash drawer test is only available for ESC/POS direct printers.","info");return}if(!a.printer.vendorId||!a.printer.productId){r("Printer not configured. Please connect one to test the cash drawer.","error");return}try{r("Sending open drawer signal...","info"),await oP(a.printer),r("Open drawer signal sent!","success")}catch(e){if("NotFoundError"===e.name)return;if(e.message?.includes("driver may be blocking access")){let e={...a.printer,type:"Browser"},n={...a,printer:e};o(n),t({hardware:n}),r("Cash drawer test failed. Switched to 'Browser Print' for compatibility.","warning")}else r(e.message||"Failed to open drawer.","error");console.error("Cash drawer test error:",e)}}else{if("ZPL"===a.barcodePrinter.type){r("Direct ZPL printing requires a backend or browser bridge application, which is not available in this version.","info");return}n()}};return(0,m.jsxs)("form",{onSubmit:e=>{e.preventDefault(),t({hardware:a})},className:"space-y-6",children:[(0,m.jsxs)("div",{className:"bg-card dark:bg-dark-card p-6 rounded-2xl shadow-clay-light dark:shadow-clay-dark",children:[(0,m.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[m.jsx("h3",{className:"text-lg font-bold text-foreground dark:text-dark-foreground",children:"Receipt Printer & Cash Drawer"}),(0,m.jsxs)("div",{className:"flex items-center space-x-2 flex-shrink-0 ml-4",children:[m.jsx("button",{type:"button",onClick:()=>c("Cash Drawer"),whileTap:{scale:.95},className:"bg-card dark:bg-dark-card text-primary dark:text-dark-primary text-sm font-semibold px-4 py-2 rounded-xl hover:bg-muted dark:hover:bg-dark-muted transition-shadow border border-primary dark:border-dark-primary shadow-clay-light dark:shadow-clay-dark active:shadow-clay-light-inset dark:active:shadow-clay-dark-inset",children:"Test Drawer"}),m.jsx("button",{type:"button",onClick:()=>c("Receipt Printer"),whileTap:{scale:.95},className:"bg-card dark:bg-dark-card text-primary dark:text-dark-primary text-sm font-semibold px-4 py-2 rounded-xl hover:bg-muted dark:hover:bg-dark-muted transition-shadow border border-primary dark:border-dark-primary shadow-clay-light dark:shadow-clay-dark active:shadow-clay-light-inset dark:active:shadow-clay-dark-inset",children:"Test Print"})]})]}),(0,m.jsxs)("div",{className:"space-y-4",children:[(0,m.jsxs)("div",{children:[m.jsx("p",{className:"text-sm font-medium text-foreground dark:text-dark-foreground",children:"Printer Type"}),(0,m.jsxs)("div",{className:"mt-2 flex space-x-6",children:[m.jsx(j4,{name:"type",value:"Browser",label:"Browser Print",checked:"Browser"===a.printer.type,onChange:l}),m.jsx(j4,{name:"type",value:"ESC/POS",label:"ESC/POS Direct",checked:"ESC/POS"===a.printer.type,onChange:l})]}),m.jsx("p",{className:"mt-2 text-xs text-foreground-muted dark:text-dark-foreground-muted",children:"Browser Print uses the standard browser print dialog. ESC/POS attempts to communicate directly with compatible receipt printers."})]}),m.jsx(Q,{children:"ESC/POS"===a.printer.type&&(0,m.jsxs)("div",{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"space-y-4 pt-4 border-t border-border dark:border-dark-border overflow-hidden",children:[m.jsx("p",{className:"text-xs text-foreground-muted dark:text-dark-foreground-muted",children:"Direct USB printing via WebUSB requires user permission for each device."}),m.jsx("div",{className:"p-4 bg-muted dark:bg-dark-muted rounded-lg border border-border dark:border-dark-border",children:(0,m.jsxs)("div",{className:"flex items-center justify-between",children:[(0,m.jsxs)("div",{children:[m.jsx("p",{className:"text-sm font-medium text-foreground dark:text-dark-foreground",children:"USB Connection"}),m.jsx("p",{className:`text-xs font-semibold ${i?.includes("Permission")?"text-warning":i?"text-primary":"text-foreground-muted"}`,children:i||"Not Connected"})]}),m.jsx("button",{type:"button",onClick:A,whileTap:{scale:.95},className:"bg-primary text-primary-content font-semibold px-3 py-1.5 rounded-lg hover:bg-primary-focus transition-colors text-sm shadow-clay-dark active:shadow-clay-dark-inset",children:"Connect Printer"})]})})]})})]})]}),(0,m.jsxs)("div",{className:"bg-card dark:bg-dark-card p-6 rounded-2xl shadow-clay-light dark:shadow-clay-dark",children:[m.jsx("h3",{className:"text-lg font-bold text-foreground dark:text-dark-foreground mb-4",children:"Barcode Scanner"}),(0,m.jsxs)("div",{className:"flex justify-between items-center",children:[m.jsx("label",{htmlFor:"scanner-enabled-toggle",className:"text-sm font-medium text-foreground dark:text-dark-foreground",children:"Enable Barcode Scanning"}),m.jsx(j3,{id:"scanner-enabled-toggle",name:"enabled",checked:a.barcodeScanner.enabled,onChange:e=>{let{name:t,checked:r}=e.target;o(e=>({...e,barcodeScanner:{...e.barcodeScanner,[t]:r}}))}})]}),m.jsx("p",{className:"mt-4 text-xs text-foreground-muted dark:text-dark-foreground-muted",children:"Most USB scanners work by emulating a keyboard and should function automatically on the POS screen. This setting confirms the feature is active."})]}),(0,m.jsxs)("div",{className:"bg-card dark:bg-dark-card p-6 rounded-2xl shadow-clay-light dark:shadow-clay-dark",children:[(0,m.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[m.jsx("h3",{className:"text-lg font-bold text-foreground dark:text-dark-foreground",children:"Barcode Label Printer"}),m.jsx("button",{type:"button",onClick:()=>c("Label Printer"),disabled:!a.barcodePrinter.enabled,whileTap:{scale:.95},className:"bg-card dark:bg-dark-card text-primary dark:text-dark-primary text-sm font-semibold px-4 py-2 rounded-xl hover:bg-muted dark:hover:bg-dark-muted transition-shadow border border-primary dark:border-dark-primary shadow-clay-light dark:shadow-clay-dark active:shadow-clay-light-inset dark:active:shadow-clay-dark-inset disabled:opacity-50 disabled:cursor-not-allowed",children:"Test Label"})]}),(0,m.jsxs)("div",{className:"flex justify-between items-center",children:[m.jsx("label",{htmlFor:"barcode-printer-enabled-toggle",className:"text-sm font-medium text-foreground dark:text-dark-foreground",children:"Enable Label Printing"}),m.jsx(j3,{id:"barcode-printer-enabled-toggle",name:"enabled",checked:a.barcodePrinter.enabled,onChange:e=>{let{name:t,value:r,type:n}=e.target,a="checkbox"===n,i=e.target.checked;o(e=>({...e,barcodePrinter:{...e.barcodePrinter,[t]:a?i:r}}))}})]}),m.jsx("p",{className:"mt-4 text-xs text-foreground-muted dark:text-dark-foreground-muted",children:'Configure a printer for barcode labels from the inventory section. "Image" format is recommended for standard printers.'})]}),m.jsx("div",{className:"flex justify-end pt-6",children:m.jsx("button",{type:"submit",whileTap:{scale:.95},className:"bg-primary text-primary-content font-bold px-6 py-2 rounded-xl transition-shadow shadow-clay-light dark:shadow-clay-dark active:shadow-clay-light-inset dark:active:shadow-clay-dark-inset",children:"Save Hardware Settings"})})]})},j8=({label:e,name:t,value:r,onChange:n,placeholder:a})=>(0,m.jsxs)("div",{children:[m.jsx("label",{htmlFor:t,className:"block text-sm font-medium text-foreground dark:text-dark-foreground-muted",children:e}),m.jsx("input",{type:"text",name:t,id:t,value:r,onChange:n,placeholder:a,className:"mt-1 block w-full px-3 py-2 bg-background dark:bg-dark-background border border-border dark:border-dark-border rounded-md shadow-sm focus:outline-none focus:ring-primary focus:border-primary sm:text-sm"})]}),j7=({id:e,name:t,checked:r,onChange:n})=>(0,m.jsxs)("label",{htmlFor:e,className:"inline-flex relative items-center cursor-pointer",children:[m.jsx("input",{type:"checkbox",name:t,checked:r,onChange:n,id:e,className:"sr-only peer"}),m.jsx("div",{className:"w-11 h-6 bg-muted dark:bg-dark-muted rounded-full peer peer-checked:bg-primary transition-colors after:content-[''] after:absolute after:top-0.5 after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:after:translate-x-full"})]}),j9=({settings:e,onUpdateSettings:t,showToast:r})=>{let[n,a]=(0,g.useState)({enabled:e.paymentMethods?.enabled??!1,displayOnDocuments:e.paymentMethods?.displayOnDocuments??[],bank:e.paymentMethods?.bank??[],mpesaPaybill:e.paymentMethods?.mpesaPaybill??{paybillNumber:"",accountNumber:""},mpesaTill:e.paymentMethods?.mpesaTill??{tillNumber:""}}),o=e=>{let{value:t,checked:r}=e.target;a(e=>{let n=e.displayOnDocuments;return r?{...e,displayOnDocuments:[...n,t]}:{...e,displayOnDocuments:n.filter(e=>e!==t)}})},i=(e,t,r)=>{a(n=>({...n,bank:n.bank.map(n=>n.id===e?{...n,[t]:r}:n)}))},s=e=>{a(t=>({...t,bank:t.bank.filter(t=>t.id!==e)}))},l=(e,t)=>{let{name:r,value:n}=e.target;a(e=>({...e,[t]:{...e[t],[r]:n}}))};return(0,m.jsxs)("form",{onSubmit:e=>{e.preventDefault(),t({paymentMethods:n}),r("Payment methods saved successfully!","success")},className:"space-y-6",children:[(0,m.jsxs)("div",{className:"bg-card dark:bg-dark-card p-4 rounded-xl shadow-clay-light dark:shadow-clay-dark flex justify-between items-center",children:[m.jsx("span",{className:"text-sm font-medium text-foreground dark:text-dark-foreground",children:"Display Payment Methods on Documents"}),m.jsx(j7,{id:"payment-methods-toggle",name:"enabled",checked:n.enabled,onChange:e=>{a(t=>({...t,enabled:e.target.checked}))}})]}),m.jsx(Q,{children:n.enabled&&(0,m.jsxs)("div",{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"space-y-6 overflow-hidden",children:[(0,m.jsxs)("div",{className:"p-4 bg-muted dark:bg-dark-muted rounded-xl",children:[m.jsx("label",{className:"block text-sm font-medium text-foreground dark:text-dark-foreground mb-2",children:"Display On:"}),m.jsx("div",{className:"flex flex-wrap gap-4",children:["Receipt","Quotation","Proforma-Invoice"].map(e=>(0,m.jsxs)("label",{className:"flex items-center",children:[m.jsx("input",{type:"checkbox",value:e,checked:n.displayOnDocuments.includes(e),onChange:o,className:"focus:ring-primary h-4 w-4 text-primary border-border rounded"}),m.jsx("span",{className:"ml-2 text-sm text-foreground dark:text-dark-foreground",children:e.replace("-"," ")})]},e))})]}),(0,m.jsxs)("div",{className:"pt-4 border-t dark:border-dark-border",children:[m.jsx("h4",{className:"font-semibold text-foreground dark:text-dark-foreground mb-2",children:"M-Pesa Details"}),(0,m.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,m.jsxs)("div",{className:"p-4 border dark:border-dark-border rounded-lg space-y-2",children:[m.jsx("p",{className:"font-medium text-foreground-muted dark:text-dark-foreground-muted",children:"Paybill"}),m.jsx(j8,{label:"Paybill Number",name:"paybillNumber",value:n.mpesaPaybill.paybillNumber,onChange:e=>l(e,"mpesaPaybill")}),m.jsx(j8,{label:"Account Number / Instructions",name:"accountNumber",value:n.mpesaPaybill.accountNumber,onChange:e=>l(e,"mpesaPaybill"),placeholder:"e.g. Your Name"})]}),(0,m.jsxs)("div",{className:"p-4 border dark:border-dark-border rounded-lg space-y-2",children:[m.jsx("p",{className:"font-medium text-foreground-muted dark:text-dark-foreground-muted",children:"Buy Goods (Till)"}),m.jsx(j8,{label:"Till Number",name:"tillNumber",value:n.mpesaTill.tillNumber,onChange:e=>l(e,"mpesaTill")})]})]})]}),(0,m.jsxs)("div",{className:"pt-4 border-t dark:border-dark-border",children:[m.jsx("h3",{className:"text-lg font-bold text-foreground dark:text-dark-foreground",children:"Your Business Bank Accounts"}),m.jsx("p",{className:"text-sm text-foreground-muted dark:text-dark-foreground-muted mb-4",children:"Add and manage the bank accounts your business uses. These will be available when recording bank deposits."}),m.jsx("div",{className:"space-y-4",children:n.bank.map((e,t)=>(0,m.jsxs)("div",{className:"p-4 bg-muted dark:bg-dark-muted rounded-lg border dark:border-dark-border relative",children:[m.jsx("button",{type:"button",onClick:()=>s(e.id),className:"absolute top-2 right-2 text-danger/50 hover:text-danger",children:"\xd7"}),(0,m.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[m.jsx(j8,{label:"Bank Name",name:`bankName-${t}`,value:e.bankName,onChange:t=>i(e.id,"bankName",t.target.value)}),m.jsx(j8,{label:"Account Name",name:`accountName-${t}`,value:e.accountName,onChange:t=>i(e.id,"accountName",t.target.value)}),m.jsx(j8,{label:"Account Number",name:`accountNumber-${t}`,value:e.accountNumber,onChange:t=>i(e.id,"accountNumber",t.target.value)}),m.jsx(j8,{label:"Branch",name:`branch-${t}`,value:e.branch,onChange:t=>i(e.id,"branch",t.target.value)})]})]},e.id))}),m.jsx("button",{type:"button",onClick:()=>{a(e=>({...e,bank:[...e.bank,{id:crypto.randomUUID(),bankName:"",accountName:"",accountNumber:"",branch:""}]}))},whileTap:{scale:.95},className:"mt-4 bg-card dark:bg-dark-card border border-border dark:border-dark-border text-foreground dark:text-dark-foreground font-semibold px-4 py-2 rounded-lg hover:bg-muted dark:hover:bg-dark-muted transition-colors text-sm",children:"Add Bank Account"})]})]})}),m.jsx("div",{className:"flex justify-end pt-6",children:m.jsx("button",{type:"submit",whileTap:{scale:.95},className:"bg-primary text-primary-content font-semibold px-6 py-2 rounded-xl transition-shadow shadow-clay dark:shadow-clay-dark active:shadow-clay-inset dark:active:shadow-clay-dark-inset",children:"Save Payment Settings"})})]})},Ce=({settings:e,onUpdateSettings:t})=>{let[r,n]=(0,g.useState)(e.inventory?.lowStockThreshold??3);return(0,m.jsxs)("form",{onSubmit:n=>{n.preventDefault(),t({inventory:{...e.inventory,lowStockThreshold:Number(r)}})},className:"space-y-6",children:[(0,m.jsxs)("div",{children:[m.jsx("label",{htmlFor:"lowStockThreshold",className:"block text-sm font-medium text-foreground dark:text-dark-foreground",children:"Low Stock Threshold"}),m.jsx("input",{type:"number",name:"lowStockThreshold",id:"lowStockThreshold",value:r,onChange:e=>n(Number(e.target.value)),min:"0",className:"mt-1 block w-full max-w-xs px-3 py-2 bg-card dark:bg-dark-card border border-border dark:border-dark-border rounded-md shadow-sm focus:outline-none focus:ring-primary dark:focus:ring-dark-primary sm:text-sm"}),m.jsx("p",{className:"mt-2 text-xs text-foreground-muted dark:text-dark-foreground-muted",children:'Products with stock quantity less than this number will be flagged as "Low Stock".'})]}),m.jsx("div",{className:"flex justify-end pt-6 border-t border-border dark:border-dark-border mt-6",children:m.jsx("button",{type:"submit",whileTap:{scale:.95},className:"bg-primary text-primary-content font-semibold px-6 py-2 rounded-lg hover:bg-primary-focus transition-colors shadow-md",children:"Save Inventory Settings"})})]})},Ct=({onBackup:e,onRestoreRequest:t,onFactoryResetRequest:r,onClose:n,isDriveInitializing:a,isDriveReady:o,isDriveAuthenticated:i,driveUser:s,onDriveSignIn:l,onDriveSignOut:A,onDriveBackup:c,onDriveRestore:d,isDriveConfigured:u})=>{let h=(0,g.useRef)(null);return(0,m.jsxs)("div",{className:"space-y-6",children:[m.jsx("input",{type:"file",ref:h,onChange:e=>{let r=e.target.files?.[0];r&&(t(r),n()),e.target&&(e.target.value="")},accept:".json,application/json",className:"hidden"}),(0,m.jsxs)("div",{className:"p-4 bg-muted dark:bg-dark-muted rounded-lg border border-border dark:border-dark-border",children:[m.jsx("h3",{className:"text-lg font-bold text-foreground dark:text-dark-foreground mb-2",children:"Local Backup"}),m.jsx("p",{className:"text-sm text-foreground-muted dark:text-dark-foreground-muted mb-4",children:"Export all application data to a JSON file on your computer. Keep this file in a safe place."}),(0,m.jsxs)("div",{className:"flex gap-4",children:[(0,m.jsxs)("button",{onClick:()=>{e(),n()},whileTap:{scale:.95},className:"flex-1 bg-primary text-primary-content font-semibold px-4 py-2 rounded-xl transition-shadow shadow-clay dark:shadow-clay-dark active:shadow-clay-inset dark:active:shadow-clay-dark-inset flex items-center justify-center",children:[m.jsx("div",{className:"w-5 h-5 mr-2",children:ox.data}),"Export All Data (JSON)"]}),(0,m.jsxs)("button",{onClick:()=>h.current?.click(),whileTap:{scale:.95},className:"flex-1 bg-card text-foreground dark:bg-dark-card dark:text-dark-foreground font-semibold px-4 py-2 rounded-xl transition-shadow shadow-clay dark:shadow-clay-dark active:shadow-clay-inset dark:active:shadow-clay-dark-inset flex items-center justify-center",children:[m.jsx("div",{className:"w-5 h-5 mr-2",children:ox.data}),"Import from Backup (JSON)"]})]})]}),(0,m.jsxs)("div",{className:"p-4 bg-muted dark:bg-dark-muted rounded-lg border border-border dark:border-dark-border",children:[m.jsx("h3",{className:"text-lg font-bold text-foreground dark:text-dark-foreground mb-2",children:"Cloud Backup (Google Drive)"}),i&&s?(0,m.jsxs)("div",{className:"space-y-4",children:[(0,m.jsxs)("div",{className:"flex items-center gap-3 p-2 bg-card dark:bg-dark-card rounded-lg",children:[m.jsx("img",{src:s.picture,alt:"User",className:"w-10 h-10 rounded-full"}),(0,m.jsxs)("div",{children:[m.jsx("p",{className:"font-semibold text-foreground dark:text-dark-foreground",children:s.name}),m.jsx("p",{className:"text-xs text-foreground-muted dark:text-dark-foreground-muted",children:s.email})]})]}),(0,m.jsxs)("div",{className:"flex gap-4",children:[m.jsx("button",{onClick:c,whileTap:{scale:.95},className:"flex-1 bg-blue-600 text-white font-semibold px-4 py-2 rounded-xl transition-shadow shadow-clay dark:shadow-clay-dark active:shadow-clay-inset dark:active:shadow-clay-dark-inset flex items-center justify-center",children:"Backup to Drive"}),m.jsx("button",{onClick:d,whileTap:{scale:.95},className:"flex-1 bg-blue-600 text-white font-semibold px-4 py-2 rounded-xl transition-shadow shadow-clay dark:shadow-clay-dark active:shadow-clay-inset dark:active:shadow-clay-dark-inset flex items-center justify-center",children:"Restore from Drive"})]}),m.jsx("button",{onClick:A,className:"w-full text-center text-xs text-foreground-muted dark:text-dark-foreground-muted hover:underline mt-2",children:"Disconnect Google Account"})]}):(0,m.jsxs)("div",{children:[m.jsx("p",{className:"text-sm text-foreground-muted dark:text-dark-foreground-muted mb-4",children:"Securely back up and restore your data using your Google Drive account."}),u?(0,m.jsxs)("button",{onClick:l,disabled:a||!o,whileTap:{scale:.95},className:"w-full bg-card dark:bg-dark-card text-foreground dark:text-dark-foreground font-semibold px-4 py-2 rounded-xl transition-shadow shadow-clay dark:shadow-clay-dark active:shadow-clay-inset dark:active:shadow-clay-dark-inset flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed",children:[(0,m.jsxs)("svg",{className:"w-5 h-5 mr-3",viewBox:"0 0 48 48",children:[m.jsx("path",{fill:"#4285F4",d:"M24 9.5c3.54 0 6.71 1.22 9.21 3.6l6.85-6.85C35.9 2.38 30.47 0 24 0 14.62 0 6.51 5.38 2.56 13.22l7.98 6.19C12.43 13.72 17.74 9.5 24 9.5z"}),m.jsx("path",{fill:"#34A853",d:"M46.98 24.55c0-1.57-.15-3.09-.42-4.55H24v9.02h12.94c-.58 2.96-2.26 5.48-4.78 7.18l7.73 6c4.51-4.18 7.09-10.36 7.09-17.65z"}),m.jsx("path",{fill:"#FBBC05",d:"M10.53 28.59c-.48-1.45-.76-2.99-.76-4.59s.27-3.14.76-4.59l-7.98-6.19C.92 16.46 0 20.12 0 24c0 3.88.92 7.54 2.56 10.78l7.97-6.19z"}),m.jsx("path",{fill:"#EA4335",d:"M24 48c6.48 0 11.93-2.13 15.89-5.81l-7.73-6c-2.15 1.45-4.92 2.3-8.16 2.3-6.26 0-11.57-4.22-13.47-9.91l-7.98 6.19C6.51 42.62 14.62 48 24 48z"}),m.jsx("path",{fill:"none",d:"M0 0h48v48H0z"})]}),a?"Initializing...":"Connect to Google Drive"]}):(0,m.jsxs)("div",{className:"text-center p-3 bg-warning/10 border border-warning/20 rounded-lg text-sm text-warning dark:text-dark-warning",children:[m.jsx("p",{className:"font-bold",children:"Feature Not Configured"}),m.jsx("p",{children:"Google Drive integration is disabled because API keys are not provided in the application configuration."})]})]})]}),(0,m.jsxs)("div",{className:"p-4 bg-danger/10 border border-danger/20 rounded-lg",children:[m.jsx("h3",{className:"text-lg font-bold text-danger mb-2",children:"Factory Reset"}),m.jsx("p",{className:"text-sm text-danger/80 mb-4",children:"Permanently delete all data in this application, including sales, inventory, and settings. This action cannot be undone."}),(0,m.jsxs)("button",{onClick:()=>{r(),n()},whileTap:{scale:.95},className:"w-full bg-danger text-white font-semibold px-4 py-2 rounded-xl transition-shadow shadow-clay-dark active:shadow-clay-dark-inset flex items-center justify-center",children:[m.jsx("div",{className:"w-5 h-5 mr-2",children:ox.reset}),"Initiate Factory Reset"]})]})]})},Cr=({settings:e,onUpdateSettings:t})=>{let[r,n]=(0,g.useState)(e.layaway||{minDepositPercentage:20,maxDurationDays:90}),a=e=>{let{name:t,value:r}=e.target;n(e=>({...e,[t]:Number(r)}))};return(0,m.jsxs)("form",{onSubmit:e=>{e.preventDefault(),t({layaway:r})},className:"space-y-6",children:[(0,m.jsxs)("div",{children:[m.jsx("label",{htmlFor:"minDepositPercentage",className:"block text-sm font-medium text-foreground dark:text-dark-foreground",children:"Minimum Deposit Percentage (%)"}),m.jsx("input",{type:"number",name:"minDepositPercentage",id:"minDepositPercentage",value:r.minDepositPercentage,onChange:a,min:"0",max:"100",className:"mt-1 block w-full max-w-xs px-3 py-2 bg-card dark:bg-dark-card border border-border dark:border-dark-border rounded-md shadow-sm focus:outline-none focus:ring-primary dark:focus:ring-dark-primary sm:text-sm"}),m.jsx("p",{className:"mt-2 text-xs text-foreground-muted dark:text-dark-foreground-muted",children:"The minimum percentage of the total value required as a deposit to start a layaway plan."})]}),(0,m.jsxs)("div",{children:[m.jsx("label",{htmlFor:"maxDurationDays",className:"block text-sm font-medium text-foreground dark:text-dark-foreground",children:"Maximum Layaway Duration (Days)"}),m.jsx("input",{type:"number",name:"maxDurationDays",id:"maxDurationDays",value:r.maxDurationDays,onChange:a,min:"1",className:"mt-1 block w-full max-w-xs px-3 py-2 bg-card dark:bg-dark-card border border-border dark:border-dark-border rounded-md shadow-sm focus:outline-none focus:ring-primary dark:focus:ring-dark-primary sm:text-sm"}),m.jsx("p",{className:"mt-2 text-xs text-foreground-muted dark:text-dark-foreground-muted",children:"The default and maximum period a customer has to complete their payments."})]}),m.jsx("div",{className:"flex justify-end pt-6 border-t border-border dark:border-dark-border mt-6",children:m.jsx("button",{type:"submit",whileTap:{scale:.95},className:"bg-primary text-primary-content font-semibold px-6 py-2 rounded-xl transition-shadow shadow-clay dark:shadow-clay-dark active:shadow-clay-inset dark:active:shadow-clay-dark-inset",children:"Save Layaway Settings"})})]})},Cn=({title:e,message:t,onConfirm:r,onClose:n,confirmText:a="Confirm",isDestructive:o=!1,requiresConfirmationText:i=!1})=>{let[s,l]=(0,g.useState)(""),A=!i||s===a;return m.jsx("div",{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/70 flex items-center justify-center z-50 p-4",onClick:n,children:(0,m.jsxs)("div",{initial:{scale:.9,y:20,opacity:0},animate:{scale:1,y:0,opacity:1},exit:{scale:.9,y:20,opacity:0},transition:{type:"spring",stiffness:400,damping:30},className:"bg-card dark:bg-dark-card rounded-2xl shadow-2xl w-full max-w-md p-6 border border-border dark:border-dark-border",onClick:e=>e.stopPropagation(),children:[m.jsx("h3",{className:"text-xl font-bold text-foreground dark:text-dark-foreground",children:e}),m.jsx("p",{className:"text-sm text-foreground-muted dark:text-dark-foreground-muted mt-2 whitespace-pre-line",children:t}),i&&(0,m.jsxs)("div",{className:"mt-4",children:[(0,m.jsxs)("label",{htmlFor:"confirm-input",className:"block text-sm font-medium text-foreground dark:text-dark-foreground mb-1",children:['To confirm, type "',m.jsx("span",{className:"font-bold",children:a}),'" in the box below.']}),m.jsx("input",{id:"confirm-input",type:"text",value:s,onChange:e=>l(e.target.value),className:"w-full px-3 py-2 bg-background dark:bg-dark-background border border-border dark:border-dark-border rounded-lg shadow-sm",autoFocus:!0})]}),(0,m.jsxs)("div",{className:"mt-6 flex justify-end space-x-3",children:[m.jsx("button",{onClick:n,whileTap:{scale:.95},className:"px-4 py-2 text-sm font-bold bg-muted text-foreground hover:bg-border dark:bg-dark-muted dark:text-dark-foreground dark:hover:bg-dark-border transition-colors rounded-lg",children:"Cancel"}),m.jsx("button",{onClick:r,disabled:!A,whileTap:{scale:.95},className:`px-4 py-2 text-sm font-bold rounded-lg transition-colors disabled:bg-slate-400 dark:disabled:bg-slate-600 disabled:cursor-not-allowed ${o?"bg-danger text-white hover:bg-red-700":"bg-primary text-primary-content hover:bg-primary-focus"}`,children:a})]})]})})},Ca=({onClose:e,onSave:t,categoryToEdit:r,allCategories:n})=>{let[a,o]=(0,g.useState)(""),[i,s]=(0,g.useState)(""),[l,A]=(0,g.useState)("#FF5722"),[c,d]=(0,g.useState)("root");return x().useEffect(()=>{if(r){let e=r.path.split(" > "),t=e.pop()||"",n=e.join(" > ");o(t),s(r.description),A(r.color),d(n||"root")}},[r]),m.jsx("div",{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50 p-4",onClick:e,children:(0,m.jsxs)("div",{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{type:"spring",stiffness:300,damping:30},className:"bg-card dark:bg-dark-card rounded-xl shadow-2xl w-full max-w-lg p-6",onClick:e=>e.stopPropagation(),children:[m.jsx("h2",{className:"text-xl font-bold mb-4",children:r?"Edit Category":"Add New Category"}),(0,m.jsxs)("form",{onSubmit:e=>{e.preventDefault(),a.trim()&&t({name:a,description:i,color:l,parentPath:c},r||void 0)},className:"space-y-4",children:[(0,m.jsxs)("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-foreground-muted",children:"Category Name"}),m.jsx("input",{type:"text",value:a,onChange:e=>o(e.target.value),required:!0,autoFocus:!0,className:"w-full mt-1 p-2 bg-card dark:bg-dark-background border border-border dark:border-dark-border rounded-md"})]}),(0,m.jsxs)("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-foreground-muted",children:"Description"}),m.jsx("textarea",{value:i,onChange:e=>s(e.target.value),rows:3,className:"w-full mt-1 p-2 bg-card dark:bg-dark-background border border-border dark:border-dark-border rounded-md"})]}),(0,m.jsxs)("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-foreground-muted",children:"Color"}),(0,m.jsxs)("div",{className:"flex items-center gap-2 mt-1",children:[m.jsx("input",{type:"color",value:l,onChange:e=>A(e.target.value),className:"p-0 h-10 w-10 block bg-white dark:bg-dark-card border-none cursor-pointer rounded-md"}),m.jsx("input",{type:"text",value:l,onChange:e=>A(e.target.value),className:"w-full p-2 bg-card dark:bg-dark-background border border-border dark:border-dark-border rounded-md"})]})]}),(0,m.jsxs)("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-foreground-muted",children:"Parent Category"}),(0,m.jsxs)("select",{value:c,onChange:e=>d(e.target.value),className:"w-full mt-1 p-2 bg-card dark:bg-dark-background border border-border dark:border-dark-border rounded-md",children:[m.jsx("option",{value:"root",children:"-- No Parent (Root) --"}),n.filter(e=>e.path!==r?.path&&!e.path.startsWith(`${r?.path} > `)).sort((e,t)=>e.path.localeCompare(t.path)).map(e=>m.jsx("option",{value:e.path,children:e.path},e.path))]})]}),(0,m.jsxs)("div",{className:"flex justify-end gap-2 pt-4",children:[m.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 bg-muted dark:bg-dark-muted rounded-md font-semibold",children:"Cancel"}),m.jsx("button",{type:"submit",className:"px-4 py-2 bg-primary text-primary-content rounded-md font-semibold",children:r?"Save Changes":"Create Category"})]})]})]})})},Co=({settings:e,onUpdateSettings:t,showToast:r})=>{let[n,a]=(0,g.useState)(!1),[o,i]=(0,g.useState)(null),[s,l]=(0,g.useState)(null),[A,c]=(0,g.useState)(""),d=(0,g.useMemo)(()=>(e.inventory?.definedCategories||[]).sort((e,t)=>e.path.localeCompare(t.path)),[e.inventory?.definedCategories]),u=(0,g.useMemo)(()=>d.filter(e=>e.path.toLowerCase().includes(A.toLowerCase())),[d,A]),h=e=>{i(e),a(!0)};return(0,m.jsxs)("div",{className:"space-y-6",children:[(0,m.jsxs)(Q,{children:[n&&m.jsx(Ca,{onClose:()=>a(!1),onSave:(n,o)=>{let i="root"===n.parentPath?n.name:`${n.parentPath} > ${n.name}`,s=e.inventory?.definedCategories||[];if(o){let a=o.path;if(a!==i&&s.some(e=>e.path===i)){r("A category with this name and parent already exists.","error");return}let l=s.map(e=>e.path===a?{path:i,description:n.description,color:n.color}:e.path.startsWith(`${a} > `)?{...e,path:e.path.replace(`${a} > `,`${i} > `)}:e);t({inventory:{...e.inventory,definedCategories:l}}),r("Category updated!","success")}else{if(s.some(e=>e.path===i)){r("A category with this name and parent already exists.","error");return}let a=[...s,{path:i,description:n.description,color:n.color}];t({inventory:{...e.inventory,definedCategories:a}}),r("Category added!","success")}a(!1)},categoryToEdit:o,allCategories:d}),s&&m.jsx(Cn,{title:"Delete Category?",message:`Are you sure you want to delete "${s.path}"? This will also delete all its sub-categories.`,onConfirm:()=>{if(!s)return;let n=(e.inventory?.definedCategories||[]).filter(e=>e.path!==s.path&&!e.path.startsWith(`${s.path} > `));t({inventory:{...e.inventory,definedCategories:n}}),l(null),r("Category and its sub-categories deleted.","success")},onClose:()=>l(null),confirmText:"Delete",isDestructive:!0})]}),(0,m.jsxs)("div",{className:"flex justify-between items-center",children:[(0,m.jsxs)("div",{className:"relative flex-grow max-w-sm",children:[m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-foreground/40 dark:text-dark-foreground/40 absolute top-1/2 left-3 -translate-y-1/2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),m.jsx("input",{type:"text",placeholder:"Search categories...",value:A,onChange:e=>c(e.target.value),className:"w-full pl-10 pr-4 py-2 rounded-lg border border-border dark:border-dark-border bg-card dark:bg-dark-card focus:outline-none focus:ring-2 focus:ring-primary"})]}),m.jsx("button",{onClick:()=>{i(null),a(!0)},whileTap:{scale:.95},className:"bg-primary text-primary-content font-semibold px-4 py-2 rounded-lg",children:"Add New Category"})]}),m.jsx("div",{className:"bg-card dark:bg-dark-card rounded-xl shadow-sm border border-border dark:border-dark-border overflow-x-auto",children:(0,m.jsxs)("table",{className:"w-full text-sm text-left",children:[m.jsx("thead",{className:"text-xs text-foreground dark:text-dark-foreground uppercase bg-muted dark:bg-dark-muted",children:(0,m.jsxs)("tr",{children:[m.jsx("th",{className:"px-6 py-3",children:"Category Name"}),m.jsx("th",{className:"px-6 py-3",children:"Description"}),m.jsx("th",{className:"px-6 py-3",children:"Color"}),m.jsx("th",{className:"px-6 py-3 text-right",children:"Actions"})]})}),(0,m.jsxs)("tbody",{children:[u.map(e=>(0,m.jsxs)("tr",{className:"border-b dark:border-dark-border last:border-0",children:[(0,m.jsxs)("td",{className:"px-6 py-3 font-semibold text-foreground dark:text-dark-foreground flex items-center",children:[m.jsx("span",{className:"w-4 h-4 rounded-full mr-3 flex-shrink-0",style:{backgroundColor:e.color}}),e.path]}),m.jsx("td",{className:"px-6 py-3 text-foreground-muted dark:text-dark-foreground-muted",children:e.description||"-"}),m.jsx("td",{className:"px-6 py-3 font-mono text-xs",children:e.color}),(0,m.jsxs)("td",{className:"px-6 py-3 text-right space-x-4",children:[m.jsx("button",{onClick:()=>h(e),className:"font-medium text-primary dark:text-dark-primary hover:underline",children:"Edit"}),m.jsx("button",{onClick:()=>l(e),className:"font-medium text-danger hover:underline",children:"Delete"})]})]},e.path)),0===u.length&&m.jsx("tr",{children:m.jsx("td",{colSpan:4,className:"text-center py-10 text-foreground-muted dark:text-dark-foreground-muted",children:"No categories found."})})]})]})})]})},Ci=({title:e,onClose:t,children:r})=>m.jsx("div",{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50 p-4",onClick:t,children:(0,m.jsxs)("div",{initial:{scale:.9,y:20,opacity:0},animate:{scale:1,y:0,opacity:1},exit:{scale:.9,y:20,opacity:0},transition:{type:"spring",stiffness:400,damping:40},className:"bg-background dark:bg-dark-background rounded-xl shadow-2xl w-full max-w-4xl max-h-[90vh] flex flex-col",onClick:e=>e.stopPropagation(),children:[(0,m.jsxs)("div",{className:"flex justify-between items-center p-6 border-b border-border dark:border-dark-border bg-secondary dark:bg-dark-card text-primary-content dark:text-dark-foreground rounded-t-xl flex-shrink-0",children:[m.jsx("h2",{className:"text-xl font-bold",children:e}),m.jsx("button",{onClick:t,className:"hover:opacity-75",children:m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),m.jsx("div",{className:"p-6 overflow-y-auto",children:r})]})}),Cs=({title:e,description:t,icon:r,onClick:n})=>(0,m.jsxs)("div",{onClick:n,className:"bg-card dark:bg-dark-card p-6 rounded-2xl shadow-sm hover:shadow-lg border border-border dark:border-dark-border cursor-pointer flex flex-col justify-between h-full",whileHover:{y:-6,scale:1.02},transition:{type:"spring",stiffness:300,damping:20},children:[(0,m.jsxs)("div",{children:[m.jsx("div",{className:"bg-muted text-primary dark:bg-dark-muted dark:text-dark-primary w-12 h-12 rounded-lg flex items-center justify-center mb-4",children:r}),m.jsx("h3",{className:"text-lg font-bold text-foreground dark:text-dark-foreground",children:e}),m.jsx("p",{className:"text-sm text-foreground-muted dark:text-dark-foreground-muted mt-1 flex-grow",children:t})]}),m.jsx("div",{className:"text-right mt-4 text-sm font-bold text-primary dark:text-dark-primary",children:"Manage "})]}),Cl=e=>{let[t,r]=(0,g.useState)(null);(0,g.useEffect)(()=>{e.openModalId&&r(e.openModalId)},[e.openModalId]),(0,g.useEffect)(()=>{e.onInitDrive&&e.onInitDrive()},[e.onInitDrive]);let n=()=>{r(null),e.onModalOpened&&e.onModalOpened()},a=t=>{e.onUpdateSettings(t),n(),e.showToast("Settings saved!","success")},o={"business-info":{title:"Business Information",description:"Set your company name, KRA PIN, logo, and location.",icon:ox.business,component:m.jsx(jW,{settings:e.settings,onUpdateSettings:a,showToast:e.showToast})},"hardware-settings":{title:"Hardware & Peripherals",description:"Configure receipt printers, barcode scanners, and other hardware.",icon:ox.hardware,component:m.jsx(j6,{settings:e.settings,onUpdateSettings:a,showToast:e.showToast,onTestBarcodePrint:e.onTestBarcodePrint})},"receipt-settings":{title:"Receipt & Invoice",description:"Customize receipt footers and document numbering.",icon:ox.receipt,component:m.jsx(jY,{settings:e.settings,onUpdateSettings:a})},"tax-config":{title:"VAT & Tax",description:"Configure VAT rates and default product pricing.",icon:ox.tax,component:m.jsx(j$,{settings:e.settings,onUpdateSettings:a})},"discount-settings":{title:"Discounts",description:"Enable and set limits for POS transaction discounts.",icon:ox.discount,component:m.jsx(j5,{settings:e.settings,onUpdateSettings:a})},"loyalty-settings":{title:"Loyalty Program",description:"Manage how customers earn and redeem loyalty points.",icon:ox.loyalty,component:m.jsx(j0,{settings:e.settings,onUpdateSettings:a})},"layaway-settings":{title:"Layaway Program",description:"Set minimum deposit percentages and maximum payment durations.",icon:ox.layaway,component:m.jsx(Cr,{settings:e.settings,onUpdateSettings:a})},"payment-methods":{title:"Payment Methods Display",description:"Configure bank accounts, M-Pesa details, etc., to display on your invoices and quotes.",icon:ox.mpesa,component:m.jsx(j9,{settings:e.settings,onUpdateSettings:a,showToast:e.showToast})},"inventory-settings":{title:"Inventory Settings",description:"Manage stock alerts and other inventory settings.",icon:ox.inventory,component:m.jsx(Ce,{settings:e.settings,onUpdateSettings:a})},"category-settings":{title:"Product Categories & Units",description:"Add, edit, and organize product categories and measurement units.",icon:ox.categories,component:m.jsx(Co,{settings:e.settings,onUpdateSettings:e.onUpdateSettings,showToast:e.showToast})},"users-perms":{title:"Users & Permissions",description:"Manage access rights and permissions for each staff role.",icon:ox.users,component:m.jsx(jX,{settings:e.settings,onUpdateSettings:e.onUpdateSettings})},"audit-log":{title:"Audit Log",description:"View a log of all important actions taken in the system.",icon:ox.audit,component:m.jsx(jJ,{auditLogs:e.auditLogs,users:e.users,onDriveBackupAuditLogs:e.onDriveBackupAuditLogs,isDriveAuthenticated:e.isDriveAuthenticated})},"data-management":{title:"Data Management",description:"Backup, restore, or reset all application data.",icon:ox.data,component:m.jsx(Ct,{onBackup:e.onBackup,onRestoreRequest:e.onRestoreRequest,onFactoryResetRequest:e.onFactoryResetRequest,onClose:n,isDriveInitializing:e.isDriveInitializing,isDriveReady:e.isDriveReady,isDriveAuthenticated:e.isDriveAuthenticated,driveUser:e.driveUser,onDriveSignIn:e.onDriveSignIn,onDriveSignOut:e.onDriveSignOut,onDriveBackup:e.onDriveBackup,onDriveRestore:e.onDriveRestore,isDriveConfigured:e.isDriveConfigured})}};return(0,m.jsxs)("div",{className:"p-4 md:p-8",children:[m.jsx("h1",{className:"text-3xl font-bold text-foreground dark:text-dark-foreground mb-6",children:"Settings"}),m.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:Object.entries(o).map(([e,t])=>m.jsx(Cs,{title:t.title,description:t.description,icon:t.icon,onClick:()=>r(e)},e))}),m.jsx(Q,{children:t&&o[t]&&m.jsx(Ci,{title:o[t].title,onClose:n,children:o[t].component})})]})},CA={success:m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-success",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),error:m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-danger",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"})}),info:m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-primary",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})},Cc=({message:e,type:t})=>(0,m.jsxs)("div",{layout:!0,initial:{opacity:0,y:50,scale:.3},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:20,scale:.5},transition:{type:"spring",stiffness:500,damping:30},className:"fixed top-5 right-5 z-[100] flex items-center w-full max-w-xs p-4 text-foreground dark:text-dark-foreground bg-card/80 dark:bg-dark-card/80 backdrop-blur-lg rounded-xl shadow-lg border border-border/50 dark:border-dark-border/50",role:"alert",children:[m.jsx("div",{className:"inline-flex items-center justify-center flex-shrink-0 w-8 h-8 rounded-lg",children:CA[t]}),m.jsx("div",{className:"ml-3 text-sm font-semibold",children:e})]}),Cd=({customer:e,settings:t,onUpdateCustomer:r})=>{let[n,a]=(0,g.useState)(e.measurements||{}),[o,i]=(0,g.useState)(""),[s,l]=(0,g.useState)(""),[A,c]=(0,g.useState)(!1),d=e=>{if(!e)return;let r=t.measurements.templates.find(t=>t.name===e);if(r){let e=r.fields.reduce((e,t)=>(n.hasOwnProperty(t)||(e[t]=""),e),{});a({...n,...e}),c(!0)}},u=(e,t)=>{a(r=>({...r,[e]:t})),c(!0)},h=e=>{let{[e]:t,...r}=n;a(r),c(!0)};return(0,m.jsxs)("div",{className:"bg-card dark:bg-dark-card p-6 rounded-xl shadow-sm border border-border dark:border-dark-border space-y-4",children:[(0,m.jsxs)("div",{className:"flex justify-between items-center",children:[m.jsx("h3",{className:"text-xl font-bold text-foreground dark:text-dark-foreground",children:"Customer Measurements"}),A&&m.jsx("button",{onClick:()=>{r({...e,measurements:n}),c(!1)},className:"bg-primary text-primary-content font-bold px-6 py-2 rounded-lg hover:bg-primary-focus transition-colors shadow-md",whileTap:{scale:.95},children:"Save Changes"})]}),m.jsx("div",{className:"flex gap-2",children:(0,m.jsxs)("select",{onChange:e=>d(e.target.value),className:"flex-grow block w-full pl-3 pr-10 py-2 text-base border-border dark:border-dark-border bg-card dark:bg-dark-card focus:outline-none focus:ring-primary dark:focus:ring-dark-primary sm:text-sm rounded-md",children:[m.jsx("option",{value:"",children:"-- Apply a Template --"}),t.measurements.templates.map(e=>m.jsx("option",{value:e.name,children:e.name},e.name))]})}),m.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:Object.keys(n).sort().map(e=>(0,m.jsxs)("div",{className:"relative group",children:[m.jsx("label",{className:"block text-sm font-medium text-foreground dark:text-dark-foreground",children:e}),m.jsx("input",{type:"text",value:n[e],onChange:t=>u(e,t.target.value),placeholder:`Enter ${e}...`,className:"mt-1 block w-full px-3 py-2 bg-card dark:bg-dark-card border border-border dark:border-dark-border rounded-md shadow-sm focus:outline-none focus:ring-primary dark:focus:ring-dark-primary sm:text-sm"}),m.jsx("button",{onClick:()=>h(e),className:"absolute top-0 right-0 p-1 text-danger-400 hover:text-danger opacity-0 group-hover:opacity-100 transition-opacity",children:"\xd7"})]},e))}),(0,m.jsxs)("div",{className:"pt-4 border-t border-border dark:border-dark-border space-y-2",children:[m.jsx("h4",{className:"text-lg font-semibold text-foreground dark:text-dark-foreground",children:"Add Custom Field"}),(0,m.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 items-center",children:[m.jsx("input",{value:o,onChange:e=>i(e.target.value),placeholder:"Field Name (e.g., Shoulder)",className:"md:col-span-1 px-3 py-2 bg-card dark:bg-dark-card border border-border dark:border-dark-border rounded-md shadow-sm"}),m.jsx("input",{value:s,onChange:e=>l(e.target.value),placeholder:"Value (e.g., 18 in)",className:"md:col-span-1 px-3 py-2 bg-card dark:bg-dark-card border border-border dark:border-dark-border rounded-md shadow-sm"}),m.jsx("button",{onClick:()=>{o&&!n.hasOwnProperty(o)&&(a(e=>({...e,[o]:s})),i(""),l(""),c(!0))},whileTap:{scale:.95},className:"bg-foreground/80 text-white font-semibold py-2 rounded-lg text-sm hover:bg-foreground transition-colors dark:bg-dark-border dark:hover:bg-dark-border/80",children:"Add Field"})]})]})]})},Cu=({title:e,value:t})=>(0,m.jsxs)("div",{className:"bg-muted dark:bg-dark-muted p-4 rounded-lg text-center",children:[m.jsx("p",{className:"text-sm text-foreground-muted dark:text-dark-foreground-muted font-bold",children:e}),m.jsx("p",{className:"text-2xl font-bold text-foreground dark:text-dark-foreground",children:t})]}),Ch=({label:e,isActive:t,onClick:r})=>(0,m.jsxs)("button",{onClick:r,className:`px-4 py-2 text-sm font-bold rounded-t-md relative transition-colors ${t?"text-primary dark:text-dark-primary":"text-foreground-muted dark:text-dark-foreground-muted hover:text-foreground dark:hover:text-dark-foreground"}`,children:[e,t&&m.jsx("div",{layoutId:"customer-tab-underline",className:"absolute bottom-0 left-0 right-0 h-0.5 bg-primary dark:bg-dark-primary"})]}),Cf=({customer:e,sales:t,onBack:r,settings:n,onUpdateCustomer:a})=>{let[o,i]=(0,g.useState)("history"),s=(0,g.useMemo)(()=>{let e=t.reduce((e,t)=>e+t.total,0),r=t.length;return{totalSpent:e,totalOrders:r,avgOrderValue:r>0?e/r:0}},[t]),l=e=>`Ksh ${e.toFixed(2)}`;return(0,m.jsxs)("div",{className:"p-4 md:p-8 h-full overflow-y-auto",children:[m.jsx("div",{className:"mb-6",children:(0,m.jsxs)("button",{onClick:r,className:"flex items-center text-sm font-bold text-primary dark:text-dark-primary hover:text-primary-focus",children:[m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-1",viewBox:"0 0 20 20",fill:"currentColor",children:m.jsx("path",{fillRule:"evenodd",d:"M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z",clipRule:"evenodd"})}),"Back to All Customers"]})}),m.jsx("div",{className:"bg-card dark:bg-dark-card p-6 rounded-xl shadow-sm border border-border dark:border-dark-border mb-8",children:(0,m.jsxs)("div",{className:"flex flex-col md:flex-row justify-between items-start",children:[(0,m.jsxs)("div",{children:[m.jsx("h1",{className:"text-3xl font-bold text-foreground dark:text-dark-foreground",children:e.name}),(0,m.jsxs)("div",{className:"mt-2 space-y-1 text-foreground-muted dark:text-dark-foreground-muted",children:[(0,m.jsxs)("p",{children:[m.jsx("strong",{children:"Phone:"})," ",e.phone]}),(0,m.jsxs)("p",{children:[m.jsx("strong",{children:"Email:"})," ",e.email]}),(0,m.jsxs)("p",{children:[m.jsx("strong",{children:"Address:"})," ",e.address,", ",e.city]}),(0,m.jsxs)("p",{children:[m.jsx("strong",{children:"Customer Since:"})," ",new Date(e.dateAdded).toLocaleDateString("en-GB",{timeZone:"Africa/Nairobi"})]})]})]}),(0,m.jsxs)("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4 mt-4 md:mt-0 w-full md:w-auto",children:[m.jsx(Cu,{title:"Total Spent",value:l(s.totalSpent)}),m.jsx(Cu,{title:"Total Orders",value:s.totalOrders}),m.jsx(Cu,{title:"Avg. Order",value:l(s.avgOrderValue)}),(0,m.jsxs)("div",{className:"bg-indigo-100 dark:bg-indigo-900/50 p-4 rounded-lg text-center",children:[m.jsx("p",{className:"text-sm text-indigo-500 dark:text-indigo-400 font-bold",children:"Loyalty Points"}),m.jsx("p",{className:"text-2xl font-bold text-indigo-800 dark:text-indigo-300",children:e.loyaltyPoints})]})]})]})}),(0,m.jsxs)("div",{className:"flex space-x-2 border-b border-border dark:border-dark-border mb-4",children:[m.jsx(Ch,{label:"Purchase History",isActive:"history"===o,onClick:()=>i("history")}),n.measurements.enabled&&m.jsx(Ch,{label:"Measurements",isActive:"measurements"===o,onClick:()=>i("measurements")})]}),m.jsx("div",{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.3},children:"history"===o?m.jsx("div",{className:"bg-card dark:bg-dark-card rounded-xl shadow-sm border border-border dark:border-dark-border overflow-x-auto",children:(0,m.jsxs)("table",{className:"w-full text-sm text-left text-foreground-muted dark:text-dark-foreground-muted",children:[m.jsx("thead",{className:"text-xs text-foreground dark:text-dark-foreground uppercase bg-muted dark:bg-dark-muted font-bold",children:(0,m.jsxs)("tr",{children:[m.jsx("th",{scope:"col",className:"px-6 py-3",children:"Date"}),m.jsx("th",{scope:"col",className:"px-6 py-3",children:"Receipt ID"}),m.jsx("th",{scope:"col",className:"px-6 py-3",children:"Items"}),m.jsx("th",{scope:"col",className:"px-6 py-3 text-right",children:"Total (Ksh)"})]})}),(0,m.jsxs)("tbody",{children:[t.map(e=>(0,m.jsxs)("tr",{className:"border-b dark:border-dark-border hover:bg-muted dark:hover:bg-dark-muted",children:[m.jsx("td",{className:"px-6 py-4 font-semibold text-foreground dark:text-dark-foreground",children:new Date(e.date).toLocaleString("en-GB",{timeZone:"Africa/Nairobi"})}),m.jsx("td",{className:"px-6 py-4 font-mono text-xs",children:e.id}),m.jsx("td",{className:"px-6 py-4",children:m.jsx("ul",{className:"list-disc list-inside",children:e.items.map(e=>(0,m.jsxs)("li",{children:[e.name," (x",e.quantity,")"]},e.id))})}),m.jsx("td",{className:"px-6 py-4 font-mono text-right font-bold",children:e.total.toFixed(2)})]},e.id)),0===t.length&&m.jsx("tr",{children:m.jsx("td",{colSpan:4,className:"text-center py-8 text-foreground-muted dark:text-dark-foreground-muted",children:"No purchase history found for this customer."})})]})]})}):m.jsx(Cd,{customer:e,settings:n,onUpdateCustomer:a})},o)]})},Cp=({onClose:e,onSave:t,customer:r})=>{let[n,a]=(0,g.useState)({name:"",phone:"",email:"",address:"",city:""});(0,g.useEffect)(()=>{r&&a({name:r.name,phone:r.phone,email:r.email,address:r.address,city:r.city})},[r]);let o=e=>{let{name:t,value:r}=e.target;a(e=>({...e,[t]:r}))};return m.jsx("div",{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50 p-4",children:(0,m.jsxs)("div",{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{type:"spring",stiffness:300,damping:30},className:"bg-card dark:bg-dark-card rounded-xl shadow-2xl w-full max-w-lg p-8",children:[(0,m.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[m.jsx("h2",{className:"text-2xl font-bold text-foreground dark:text-dark-foreground",children:r?"Edit Customer":"Add New Customer"}),m.jsx("button",{onClick:e,className:"text-foreground-muted dark:text-dark-foreground-muted hover:text-foreground dark:hover:text-dark-foreground",children:m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,m.jsxs)("form",{onSubmit:e=>{e.preventDefault(),r?t({...r,...n}):t(n)},className:"space-y-4",children:[(0,m.jsxs)("div",{children:[m.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-foreground dark:text-dark-foreground",children:"Full Name"}),m.jsx("input",{type:"text",name:"name",id:"name",value:n.name,onChange:o,required:!0,className:"mt-1 block w-full px-3 py-2 bg-card dark:bg-dark-background border border-border dark:border-dark-border rounded-md shadow-sm focus:outline-none focus:ring-primary dark:focus:ring-dark-primary sm:text-sm"})]}),(0,m.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,m.jsxs)("div",{children:[m.jsx("label",{htmlFor:"phone",className:"block text-sm font-medium text-foreground dark:text-dark-foreground",children:"Phone Number"}),m.jsx("input",{type:"tel",name:"phone",id:"phone",value:n.phone,onChange:o,required:!0,className:"mt-1 block w-full px-3 py-2 bg-card dark:bg-dark-background border border-border dark:border-dark-border rounded-md shadow-sm focus:outline-none focus:ring-primary dark:focus:ring-dark-primary sm:text-sm"})]}),(0,m.jsxs)("div",{children:[m.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-foreground dark:text-dark-foreground",children:"Email Address"}),m.jsx("input",{type:"email",name:"email",id:"email",value:n.email,onChange:o,className:"mt-1 block w-full px-3 py-2 bg-card dark:bg-dark-background border border-border dark:border-dark-border rounded-md shadow-sm focus:outline-none focus:ring-primary dark:focus:ring-dark-primary sm:text-sm"})]})]}),(0,m.jsxs)("div",{children:[m.jsx("label",{htmlFor:"address",className:"block text-sm font-medium text-foreground dark:text-dark-foreground",children:"Address"}),m.jsx("input",{type:"text",name:"address",id:"address",value:n.address,onChange:o,className:"mt-1 block w-full px-3 py-2 bg-card dark:bg-dark-background border border-border dark:border-dark-border rounded-md shadow-sm focus:outline-none focus:ring-primary dark:focus:ring-dark-primary sm:text-sm"})]}),(0,m.jsxs)("div",{children:[m.jsx("label",{htmlFor:"city",className:"block text-sm font-medium text-foreground dark:text-dark-foreground",children:"City"}),m.jsx("input",{type:"text",name:"city",id:"city",value:n.city,onChange:o,className:"mt-1 block w-full px-3 py-2 bg-card dark:bg-dark-background border border-border dark:border-dark-border rounded-md shadow-sm focus:outline-none focus:ring-primary dark:focus:ring-dark-primary sm:text-sm"})]}),(0,m.jsxs)("div",{className:"mt-8 flex justify-end space-x-3",children:[m.jsx("button",{type:"button",onClick:e,whileTap:{scale:.95},className:"bg-muted dark:bg-dark-muted text-foreground dark:text-dark-foreground font-bold px-4 py-2 rounded-lg hover:bg-border dark:hover:bg-dark-border transition-colors",children:"Cancel"}),m.jsx("button",{type:"submit",whileTap:{scale:.95},className:"bg-primary text-primary-content font-bold px-6 py-2 rounded-lg hover:bg-primary-focus transition-colors shadow-md",children:"Save Customer"})]})]})]})})},Cm=({customers:e,sales:t,onAddCustomer:r,onUpdateCustomer:n,onDeleteCustomer:a,permissions:o,settings:i})=>{let[s,l]=(0,g.useState)(null),[A,c]=(0,g.useState)(""),[d,u]=(0,g.useState)(!1),[h,f]=(0,g.useState)(void 0),[p,x]=(0,g.useState)(null),b=o.includes("manage_customers"),y=(0,g.useMemo)(()=>e.map(e=>{let r=t.filter(t=>t.customerId===e.id),n=r.reduce((e,t)=>e+t.total,0),a=r.length>0?new Date(Math.max(...r.map(e=>new Date(e.date).getTime()))):null;return{...e,totalSpent:n,lastPurchase:a}}).filter(e=>e.name.toLowerCase().includes(A.toLowerCase())||e.phone.toLowerCase().includes(A.toLowerCase())||e.email.toLowerCase().includes(A.toLowerCase())),[e,t,A]),v=e=>{f(e),u(!0)};if(s){let e=y.find(e=>e.id===s.id);return m.jsx(Cf,{customer:e||s,sales:t.filter(e=>e.customerId===s.id),onBack:()=>l(null),settings:i,onUpdateCustomer:n})}return(0,m.jsxs)("div",{className:"p-4 md:p-8",children:[(0,m.jsxs)(Q,{children:[d&&m.jsx(Cp,{onClose:()=>u(!1),onSave:e=>{"id"in e?n(e):r(e),u(!1)},customer:h}),p&&m.jsx(Cn,{title:`Delete ${p.name}?`,message:"Are you sure? This will remove the customer and all associated history. This action cannot be undone.",onConfirm:()=>{p&&(a(p.id),x(null))},onClose:()=>x(null),confirmText:"Delete",isDestructive:!0})]}),(0,m.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[m.jsx("h1",{className:"text-4xl font-bold text-foreground dark:text-dark-foreground",children:"Customer Management"}),m.jsx("div",{className:"flex items-center space-x-2",children:b&&(0,m.jsxs)("button",{onClick:()=>v(),whileTap:{scale:.95},className:"bg-primary text-primary-content font-bold px-4 py-2 rounded-xl transition-shadow shadow-clay dark:shadow-clay-dark active:shadow-clay-inset dark:active:shadow-clay-dark-inset flex items-center",children:[m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",viewBox:"0 0 20 20",fill:"currentColor",children:m.jsx("path",{fillRule:"evenodd",d:"M10 5a1 1 0 011 1v3h3a1 1 0 110 2h-3v3a1 1 0 11-2 0v-3H6a1 1 0 110-2h3V6a1 1 0 011-1z",clipRule:"evenodd"})}),"Add Customer"]})})]}),m.jsx("div",{className:"mb-4",children:m.jsx("input",{type:"text",placeholder:"Search customers by name, phone, or email...",className:"w-full max-w-sm px-4 py-2 rounded-lg border border-border dark:border-dark-border bg-card dark:bg-dark-card focus:outline-none focus:ring-2 focus:ring-primary",value:A,onChange:e=>c(e.target.value)})}),(0,m.jsxs)("div",{className:"bg-card dark:bg-dark-card rounded-xl shadow-sm overflow-x-auto",children:[(0,m.jsxs)("table",{className:"w-full text-sm text-left text-foreground-muted dark:text-dark-foreground-muted",children:[m.jsx("thead",{className:"text-xs text-foreground dark:text-dark-foreground uppercase bg-muted dark:bg-dark-muted font-bold",children:(0,m.jsxs)("tr",{children:[m.jsx("th",{scope:"col",className:"px-6 py-3",children:"Name"}),m.jsx("th",{scope:"col",className:"px-6 py-3",children:"Contact"}),m.jsx("th",{scope:"col",className:"px-6 py-3",children:"Loyalty Points"}),m.jsx("th",{scope:"col",className:"px-6 py-3",children:"Total Spent (Ksh)"}),m.jsx("th",{scope:"col",className:"px-6 py-3",children:"Last Purchase"}),m.jsx("th",{scope:"col",className:"px-6 py-3",children:m.jsx("span",{className:"sr-only",children:"Actions"})})]})}),m.jsx("tbody",{children:y.map(e=>(0,m.jsxs)("tr",{className:"border-b dark:border-dark-border hover:bg-muted dark:hover:bg-dark-muted cursor-pointer",onClick:()=>l(e),children:[m.jsx("td",{className:"px-6 py-4 font-semibold text-foreground dark:text-dark-foreground",children:e.name}),(0,m.jsxs)("td",{className:"px-6 py-4",children:[m.jsx("div",{children:e.phone}),m.jsx("div",{className:"text-xs",children:e.email})]}),m.jsx("td",{className:"px-6 py-4 font-mono font-semibold text-indigo-600 dark:text-indigo-400",children:e.loyaltyPoints}),m.jsx("td",{className:"px-6 py-4 font-mono",children:e.totalSpent.toFixed(2)}),m.jsx("td",{className:"px-6 py-4",children:e.lastPurchase?new Date(e.lastPurchase).toLocaleDateString("en-GB",{timeZone:"Africa/Nairobi"}):"N/A"}),m.jsx("td",{className:"px-6 py-4 text-right",onClick:e=>e.stopPropagation(),children:b&&"cust001"!==e.id&&(0,m.jsxs)("div",{className:"space-x-4",children:[m.jsx("button",{onClick:()=>v(e),className:"font-medium text-primary hover:underline",children:"Edit"}),m.jsx("button",{onClick:()=>x(e),className:"font-medium text-danger hover:underline",children:"Delete"})]})})]},e.id))})]}),0===y.length&&(0,m.jsxs)("div",{className:"text-center py-10",children:[m.jsx("p",{className:"font-semibold",children:"No customers found."}),m.jsx("p",{className:"text-sm",children:"Add a new customer to get started."})]})]})]})},Cg=({onClose:e,onSave:t,supplier:r})=>{let[n,a]=(0,g.useState)({name:"",businessName:"",contact:"",email:"",creditTerms:"Net 30"});(0,g.useEffect)(()=>{r&&a({name:r.name,businessName:r.businessName||"",contact:r.contact,email:r.email,creditTerms:r.creditTerms})},[r]);let o=e=>{let{name:t,value:r}=e.target;a(e=>({...e,[t]:r}))},i=async e=>{e.preventDefault(),await t(n)},s="mt-1 block w-full px-4 py-2 bg-white border-0 rounded-lg text-black placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-primary",l="block text-sm font-medium text-slate-300";return m.jsx("div",{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4",onClick:e,children:(0,m.jsxs)("div",{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{type:"spring",stiffness:300,damping:30},className:"bg-slate-800 rounded-2xl shadow-lg w-full max-w-lg p-6",onClick:e=>e.stopPropagation(),children:[(0,m.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[m.jsx("h2",{className:"text-2xl font-bold text-white",children:r?"Edit Supplier":"Add New Supplier"}),m.jsx("button",{onClick:e,className:"text-gray-400 hover:text-white",children:m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,m.jsxs)("form",{onSubmit:i,className:"space-y-5",children:[(0,m.jsxs)("div",{children:[m.jsx("label",{htmlFor:"businessName",className:l,children:"Business Name"}),m.jsx("input",{type:"text",name:"businessName",id:"businessName",value:n.businessName,onChange:o,required:!0,autoFocus:!0,className:s})]}),(0,m.jsxs)("div",{children:[m.jsx("label",{htmlFor:"name",className:l,children:"Contact Person Name"}),m.jsx("input",{type:"text",name:"name",id:"name",value:n.name,onChange:o,required:!0,className:s})]}),(0,m.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,m.jsxs)("div",{children:[m.jsx("label",{htmlFor:"contact",className:l,children:"Contact Phone"}),m.jsx("input",{type:"tel",name:"contact",id:"contact",value:n.contact,onChange:o,required:!0,className:s})]}),(0,m.jsxs)("div",{children:[m.jsx("label",{htmlFor:"email",className:l,children:"Contact Email"}),m.jsx("input",{type:"email",name:"email",id:"email",value:n.email,onChange:o,className:s})]})]}),(0,m.jsxs)("div",{children:[m.jsx("label",{htmlFor:"creditTerms",className:l,children:"Credit Terms"}),(0,m.jsxs)("select",{name:"creditTerms",id:"creditTerms",value:n.creditTerms,onChange:o,className:s,children:[m.jsx("option",{children:"On Delivery"}),m.jsx("option",{children:"Net 15"}),m.jsx("option",{children:"Net 30"}),m.jsx("option",{children:"Net 45"}),m.jsx("option",{children:"Net 60"})]})]}),(0,m.jsxs)("div",{className:"pt-4 flex justify-end space-x-3",children:[m.jsx("button",{type:"button",onClick:e,whileTap:{scale:.95},className:"bg-slate-600 hover:bg-slate-700 text-white font-bold px-5 py-2 rounded-lg transition-colors",children:"Cancel"}),m.jsx("button",{type:"submit",whileTap:{scale:.95},className:"bg-orange-500 hover:bg-orange-600 text-white font-bold px-5 py-2 rounded-lg transition-colors",children:"Save Supplier"})]})]})]})})},Cx=x().forwardRef((e,t)=>{let{supplier:r,invoices:n,payments:a,settings:o,purchaseOrders:i}=e,s=x().useMemo(()=>[...n.map(e=>({date:new Date(e.invoiceDate),description:`Invoice #${e.invoiceNumber}`,debit:e.totalAmount,credit:0})),...a.map(e=>({date:new Date(e.paymentDate),description:`Payment via ${e.method}`,debit:0,credit:e.amount}))].sort((e,t)=>e.date.getTime()-t.date.getTime()),[n,a]),l=0,A=n.reduce((e,t)=>e+t.totalAmount,0),c=a.reduce((e,t)=>e+t.amount,0);return(0,m.jsxs)("div",{ref:t,className:"bg-white p-8 font-sans text-sm text-black w-full max-w-4xl mx-auto shadow-lg border",children:[(0,m.jsxs)("header",{className:"flex justify-between items-start pb-4 border-b",children:[(0,m.jsxs)("div",{children:[o.businessInfo.logoUrl&&m.jsx("img",{src:o.businessInfo.logoUrl,alt:"Company Logo",className:"h-16 max-w-xs object-contain mb-4"}),m.jsx("h2",{className:"text-xl font-bold text-slate-800",children:o.businessInfo.name}),m.jsx("p",{className:"text-slate-600",children:o.businessInfo.location}),(0,m.jsxs)("p",{className:"text-slate-600",children:["Tel: ",o.businessInfo.phone]})]}),(0,m.jsxs)("div",{className:"text-right",children:[m.jsx("h1",{className:"text-3xl font-bold uppercase text-slate-700 tracking-wide",children:"Supplier Statement"}),(0,m.jsxs)("p",{className:"text-xs mt-2",children:[m.jsx("span",{className:"text-slate-500",children:"Date Issued:"})," ",m.jsx("span",{className:"font-semibold",children:new Date().toLocaleDateString("en-GB")})]})]})]}),(0,m.jsxs)("section",{className:"mt-8",children:[m.jsx("h3",{className:"text-xs uppercase font-bold text-slate-500 mb-2",children:"Statement For"}),m.jsx("p",{className:"font-bold text-slate-800",children:r.businessName||r.name}),m.jsx("p",{className:"text-slate-600",children:r.contact}),m.jsx("p",{className:"text-slate-600",children:r.email})]}),(0,m.jsxs)("section",{className:"mt-8",children:[m.jsx("h3",{className:"text-xs uppercase font-bold text-slate-500 mb-2",children:"Purchase Orders"}),(0,m.jsxs)("table",{className:"w-full text-left",children:[m.jsx("thead",{children:(0,m.jsxs)("tr",{className:"bg-slate-100 text-slate-600 uppercase text-xs",children:[m.jsx("th",{className:"p-3 font-semibold",children:"PO #"}),m.jsx("th",{className:"p-3 font-semibold",children:"Date"}),m.jsx("th",{className:"p-3 font-semibold",children:"Status"}),m.jsx("th",{className:"p-3 font-semibold text-right",children:"Total"})]})}),m.jsx("tbody",{children:i.length>0?i.map(e=>(0,m.jsxs)("tr",{className:"border-b",children:[m.jsx("td",{className:"p-3 font-semibold",children:e.poNumber}),m.jsx("td",{className:"p-3",children:new Date(e.createdDate).toLocaleDateString("en-GB")}),m.jsx("td",{className:"p-3",children:e.status}),m.jsx("td",{className:"p-3 text-right font-mono",children:e.totalCost.toFixed(2)})]},e.id)):m.jsx("tr",{children:m.jsx("td",{colSpan:4,className:"p-3 text-center text-slate-500",children:"No purchase orders found."})})})]})]}),(0,m.jsxs)("section",{className:"mt-8",children:[m.jsx("h3",{className:"text-xs uppercase font-bold text-slate-500 mb-2",children:"Financial Statement"}),(0,m.jsxs)("table",{className:"w-full text-left",children:[m.jsx("thead",{children:(0,m.jsxs)("tr",{className:"bg-slate-100 text-slate-600 uppercase text-xs",children:[m.jsx("th",{className:"p-3 font-semibold",children:"Date"}),m.jsx("th",{className:"p-3 font-semibold",children:"Transaction Details"}),m.jsx("th",{className:"p-3 font-semibold text-right",children:"Debit (Invoiced)"}),m.jsx("th",{className:"p-3 font-semibold text-right",children:"Credit (Paid)"}),m.jsx("th",{className:"p-3 font-semibold text-right",children:"Balance"})]})}),m.jsx("tbody",{children:s.map((e,t)=>(l+=e.debit-e.credit,(0,m.jsxs)("tr",{className:"border-b",children:[m.jsx("td",{className:"p-3",children:e.date.toLocaleDateString("en-GB")}),m.jsx("td",{className:"p-3",children:e.description}),m.jsx("td",{className:"p-3 text-right font-mono",children:e.debit>0?e.debit.toFixed(2):"-"}),m.jsx("td",{className:"p-3 text-right font-mono text-green-600",children:e.credit>0?e.credit.toFixed(2):"-"}),m.jsx("td",{className:"p-3 text-right font-mono font-semibold",children:l.toFixed(2)})]},t)))})]})]}),m.jsx("section",{className:"flex justify-end mt-8",children:(0,m.jsxs)("div",{className:"w-full max-w-sm space-y-2",children:[(0,m.jsxs)("div",{className:"flex justify-between text-sm",children:[m.jsx("span",{className:"text-slate-600",children:"Total Invoiced:"})," ",m.jsx("span",{className:"font-mono text-slate-800",children:A.toFixed(2)})]}),(0,m.jsxs)("div",{className:"flex justify-between text-sm",children:[m.jsx("span",{className:"text-slate-600",children:"Total Paid:"})," ",m.jsx("span",{className:"font-mono text-green-600",children:c.toFixed(2)})]}),(0,m.jsxs)("div",{className:"flex justify-between text-lg font-bold border-t pt-2 mt-2",children:[m.jsx("span",{className:"text-slate-800",children:"Balance Due:"}),(0,m.jsxs)("span",{className:"font-mono text-red-600",children:["Ksh ",(A-c).toFixed(2)]})]})]})}),m.jsx("footer",{className:"mt-16 pt-4 border-t text-xs text-slate-500 text-center",children:m.jsx("p",{children:"This is a computer-generated statement and does not require a signature."})})]})}),Cb=e=>Promise.all(Array.from(e.getElementsByTagName("img")).map(e=>new Promise(t=>{e.complete&&0!==e.naturalHeight?t():(e.onload=()=>t(),e.onerror=()=>{console.warn(`Could not load image for PDF generation: ${e.src}`),t()})}))),Cy=({supplier:e,purchaseOrders:t,supplierInvoices:r,supplierPayments:n,settings:a,onBack:o})=>{let i=(0,g.useRef)(null),[s,l]=(0,g.useState)(!1),A=async()=>{if(i.current&&!s){l(!0);try{await Cb(i.current);let t=await (0,An.default)(i.current,{scale:2,useCORS:!0}),r=t.toDataURL("image/png"),n=new sM("p","mm","a4"),a=n.internal.pageSize.getWidth(),o=t.height*a/t.width;n.addImage(r,"PNG",0,0,a,o),n.save(`Statement_${e.name.replace(/\s/g,"_")}.pdf`)}catch(e){console.error("Failed to generate PDF:",e),alert("Sorry, there was an error generating the PDF. The logo might be causing an issue.")}finally{l(!1)}}};return m.jsx("div",{className:"h-full overflow-y-auto bg-background dark:bg-dark-background",children:(0,m.jsxs)("div",{className:"p-4 md:p-8 space-y-6",children:[(0,m.jsxs)("div",{className:"flex flex-col md:flex-row gap-4 justify-between items-center no-print",children:[(0,m.jsxs)("button",{onClick:o,className:"flex items-center text-sm font-bold text-primary dark:text-dark-primary hover:text-primary-focus",children:[m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-1",viewBox:"0 0 20 20",fill:"currentColor",children:m.jsx("path",{fillRule:"evenodd",d:"M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z",clipRule:"evenodd"})}),"Back to Suppliers"]}),(0,m.jsxs)("div",{className:"flex items-center gap-2",children:[m.jsx("button",{onClick:()=>{window.print()},whileTap:{scale:.95},className:"bg-foreground/80 dark:bg-dark-border text-white font-bold px-3 py-2 rounded-lg hover:bg-foreground dark:hover:bg-dark-border/80 transition-colors shadow-sm flex items-center text-sm",children:"Print"}),m.jsx("button",{onClick:A,whileTap:{scale:.95},disabled:s,className:"bg-primary text-primary-content font-bold px-3 py-2 rounded-lg hover:bg-primary-focus transition-colors shadow-sm flex items-center text-sm disabled:bg-slate-400",children:s?"Downloading...":"Download PDF"})]})]}),m.jsx("div",{id:"pdf-content-wrapper",children:m.jsx(Cx,{ref:i,supplier:e,purchaseOrders:t,invoices:r,payments:n,settings:a})})]})})},Cv=({title:e,value:t})=>(0,m.jsxs)("div",{className:"bg-card dark:bg-dark-card p-4 rounded-xl shadow-sm border border-border dark:border-dark-border",children:[m.jsx("p",{className:"text-sm font-semibold text-foreground-muted dark:text-dark-foreground-muted",children:e}),m.jsx("p",{className:"text-2xl font-bold text-foreground dark:text-dark-foreground mt-1",children:t})]}),Cw=({suppliers:e,purchaseOrders:t,supplierInvoices:r,supplierPayments:n,onAddSupplier:a,onUpdateSupplier:o,onDeleteSupplier:i,permissions:s,settings:l})=>{let[A,c]=(0,g.useState)(!1),[d,u]=(0,g.useState)(void 0),[h,f]=(0,g.useState)(null),[p,x]=(0,g.useState)(""),[b,y]=(0,g.useState)(null),[v]=oy(),w=s.includes("manage_suppliers"),k=e=>{u(e),c(!0)},B=async e=>{"id"in e?await o(e):await a(e),c(!1)},j=async()=>{h&&(await i(h.id),f(null))},C=(0,g.useMemo)(()=>e.filter(e=>e.name.toLowerCase().includes(p.toLowerCase())||e.businessName&&e.businessName.toLowerCase().includes(p.toLowerCase())||e.contact.toLowerCase().includes(p.toLowerCase())),[e,p]),{totalOwed:N,topSuppliersData:S}=(0,g.useMemo)(()=>{let t={};return e.forEach(e=>{t[e.id]={name:e.businessName||e.name,value:0}}),r.forEach(e=>{t[e.supplierId]&&"Paid"!==e.status&&(t[e.supplierId].value+=e.totalAmount-e.paidAmount)}),{totalOwed:Object.values(t).reduce((e,t)=>e+t.value,0),topSuppliersData:Object.values(t).filter(e=>e.value>0).sort((e,t)=>t.value-e.value).slice(0,5)}},[r,e]),F="dark"===v?["#34d399","#60a5fa","#fde047","#c4b5fd","#fca5a5"]:["#10b981","#3b82f6","#facc15","#a78bfa","#f87171"];return b?m.jsx(Cy,{supplier:b,purchaseOrders:t.filter(e=>e.supplierId===b.id),supplierInvoices:r.filter(e=>e.supplierId===b.id),supplierPayments:n.filter(e=>r.some(t=>t.id===e.invoiceId&&t.supplierId===b.id)),settings:l,onBack:()=>y(null)}):(0,m.jsxs)("div",{className:"p-4 md:p-8 h-full overflow-y-auto",children:[(0,m.jsxs)(Q,{children:[A&&m.jsx(Cg,{onClose:()=>c(!1),onSave:B,supplier:d}),h&&m.jsx(Cn,{title:`Delete ${h.name}?`,message:"Are you sure you want to permanently delete this supplier? This action cannot be undone.",confirmText:"Delete",onConfirm:j,onClose:()=>f(null),isDestructive:!0})]}),(0,m.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[m.jsx("h1",{className:"text-3xl font-bold text-foreground dark:text-dark-foreground",children:"Suppliers"}),w&&m.jsx("button",{onClick:()=>k(),whileTap:{scale:.95},className:"bg-primary text-primary-content font-bold px-4 py-2 rounded-xl transition-shadow shadow-clay dark:shadow-clay-dark active:shadow-clay-inset dark:active:shadow-clay-dark-inset flex items-center",children:"Add Supplier"})]}),(0,m.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-6",children:[(0,m.jsxs)("div",{className:"lg:col-span-1 space-y-4",children:[m.jsx(Cv,{title:"Total Suppliers",value:String(e.length)}),m.jsx(Cv,{title:"Total Amount Owed",value:`Ksh ${N.toFixed(2)}`})]}),(0,m.jsxs)("div",{className:"lg:col-span-2 bg-card dark:bg-dark-card p-4 rounded-xl shadow-sm border border-border dark:border-dark-border",children:[m.jsx("h3",{className:"font-bold text-foreground dark:text-dark-foreground mb-2",children:"Top 5 Suppliers by Amount Owed"}),S.length>0?m.jsx(gs,{width:"100%",height:200,children:(0,m.jsxs)(jm,{children:[m.jsx(jp,{data:S,dataKey:"value",nameKey:"name",cx:"50%",cy:"50%",outerRadius:80,children:S.map((e,t)=>m.jsx(yo,{fill:F[t%F.length]},`cell-${t}`))}),m.jsx(gH,{formatter:e=>`Ksh ${Number(e).toFixed(2)}`}),m.jsx(p7,{})]})}):m.jsx("div",{className:"flex items-center justify-center h-full text-foreground-muted dark:text-dark-foreground-muted",children:"No outstanding balances."})]})]}),m.jsx("div",{className:"mb-4",children:m.jsx("input",{type:"text",placeholder:"Search by name, business, or contact...",className:"w-full max-w-sm px-4 py-2 rounded-lg border border-border dark:border-dark-border bg-card dark:bg-dark-card focus:outline-none focus:ring-2 focus:ring-primary",value:p,onChange:e=>x(e.target.value)})}),m.jsx("div",{className:"bg-card dark:bg-dark-card rounded-xl shadow-sm overflow-x-auto",children:(0,m.jsxs)("table",{className:"w-full text-sm text-left text-foreground-muted dark:text-dark-foreground-muted",children:[m.jsx("thead",{className:"text-xs text-foreground dark:text-dark-foreground uppercase bg-muted dark:bg-dark-muted",children:(0,m.jsxs)("tr",{children:[m.jsx("th",{scope:"col",className:"px-6 py-3 font-bold",children:"Business Name"}),m.jsx("th",{scope:"col",className:"px-6 py-3 font-bold",children:"Contact Person"}),m.jsx("th",{scope:"col",className:"px-6 py-3 font-bold",children:"Phone"}),m.jsx("th",{scope:"col",className:"px-6 py-3 font-bold",children:"Amount Owed"}),m.jsx("th",{scope:"col",className:"px-6 py-3",children:m.jsx("span",{className:"sr-only",children:"Actions"})})]})}),m.jsx("tbody",{children:C.map(e=>{let t=S.find(t=>t.name===(e.businessName||e.name))?.value||0;return(0,m.jsxs)("tr",{className:"border-b dark:border-dark-border hover:bg-muted dark:hover:bg-dark-muted",children:[m.jsx("td",{className:"px-6 py-4 font-semibold text-foreground dark:text-dark-foreground",children:e.businessName||e.name}),m.jsx("td",{className:"px-6 py-4",children:e.name}),m.jsx("td",{className:"px-6 py-4",children:e.contact}),m.jsx("td",{className:`px-6 py-4 font-mono font-semibold ${t>0?"text-danger":""}`,children:t.toFixed(2)}),(0,m.jsxs)("td",{className:"px-6 py-4 text-right space-x-4",children:[m.jsx("button",{onClick:()=>y(e),className:"font-medium text-secondary hover:underline",children:"View Statement"}),w&&(0,m.jsxs)(m.Fragment,{children:[m.jsx("button",{onClick:()=>k(e),className:"font-medium text-primary hover:underline",children:"Edit"}),m.jsx("button",{onClick:()=>f(e),className:"font-medium text-danger hover:underline",children:"Delete"})]})]})]},e.id)})})]})})]})},Ck=({status:e})=>{let t="px-2 py-1 text-xs font-semibold rounded-full";switch(e){case"Paid":return m.jsx("span",{className:`${t} text-purple-800 bg-purple-100 dark:bg-purple-900/50 dark:text-purple-300`,children:"Paid"});case"Sent":return m.jsx("span",{className:`${t} text-blue-800 bg-blue-100 dark:bg-blue-900/50 dark:text-blue-300`,children:"Sent"});case"Draft":return m.jsx("span",{className:`${t} text-yellow-800 bg-yellow-100 dark:bg-yellow-900/50 dark:text-yellow-300`,children:"Draft"});case"Invoiced":return m.jsx("span",{className:`${t} text-green-800 bg-green-100 dark:bg-green-900/50 dark:text-green-300`,children:"Invoiced"});case"Expired":return m.jsx("span",{className:`${t} text-red-800 bg-red-100 dark:bg-red-900/50 dark:text-red-300`,children:"Expired"});default:return m.jsx("span",{className:`${t} text-slate-800 bg-slate-100 dark:bg-slate-700 dark:text-slate-300`,children:"Unknown"})}},CB=({quotations:e,sales:t,onSelectQuotation:r,onCreateQuoteRequest:n,permissions:a})=>{let[o,i]=(0,g.useState)(""),s=a.includes("manage_quotations"),l=(0,g.useMemo)(()=>{let e=new Map;return t.forEach(t=>{t.quotationId&&e.set(t.quotationId,t)}),e},[t]),A=(0,g.useMemo)(()=>e.filter(e=>e.quoteNumber.toLowerCase().includes(o.toLowerCase())||e.customerName.toLowerCase().includes(o.toLowerCase())),[e,o]);return(0,m.jsxs)("div",{className:"p-4 md:p-8",children:[(0,m.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[m.jsx("h1",{className:"text-3xl font-bold text-foreground dark:text-dark-foreground",children:"Quotations"}),s&&(0,m.jsxs)("button",{onClick:n,whileTap:{scale:.95},className:"bg-primary text-primary-content font-bold px-4 py-2 rounded-xl transition-shadow shadow-clay dark:shadow-clay-dark active:shadow-clay-inset dark:active:shadow-clay-dark-inset flex items-center",children:[m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Create New Quote"]})]}),m.jsx("div",{className:"mb-4",children:m.jsx("input",{type:"text",placeholder:"Search quotations by number or customer...",className:"w-full max-w-sm px-4 py-2 rounded-lg border border-border dark:border-dark-border bg-card dark:bg-dark-card focus:outline-none focus:ring-2 focus:ring-primary",value:o,onChange:e=>i(e.target.value)})}),m.jsx("div",{className:"bg-card dark:bg-dark-card rounded-xl shadow-sm border border-border dark:border-dark-border overflow-x-auto",children:(0,m.jsxs)("table",{className:"w-full text-sm text-left text-foreground-muted dark:text-dark-foreground-muted",children:[m.jsx("thead",{className:"text-xs text-foreground dark:text-dark-foreground uppercase bg-muted dark:bg-dark-muted font-bold",children:(0,m.jsxs)("tr",{children:[m.jsx("th",{scope:"col",className:"px-6 py-3",children:"Quote #"}),m.jsx("th",{scope:"col",className:"px-6 py-3",children:"Customer"}),m.jsx("th",{scope:"col",className:"px-6 py-3",children:"Status"}),m.jsx("th",{scope:"col",className:"px-6 py-3",children:"Date"}),m.jsx("th",{scope:"col",className:"px-6 py-3",children:"Expires"}),m.jsx("th",{scope:"col",className:"px-6 py-3 text-right",children:"Total (Ksh)"}),m.jsx("th",{scope:"col",className:"px-6 py-3 text-right",children:"Actions"})]})}),m.jsx("tbody",{children:0===A.length?m.jsx("tr",{children:m.jsx("td",{colSpan:7,className:"text-center py-10",children:"No quotations found."})}):A.map(e=>{let t=l.has(e.id)?"Paid":e.status;return(0,m.jsxs)("tr",{className:"bg-card dark:bg-dark-card border-b dark:border-dark-border hover:bg-muted dark:hover:bg-dark-muted cursor-pointer",onClick:()=>r(e),children:[m.jsx("td",{className:"px-6 py-4 font-bold text-foreground dark:text-dark-foreground",children:e.quoteNumber}),m.jsx("td",{className:"px-6 py-4",children:e.customerName}),m.jsx("td",{className:"px-6 py-4",children:m.jsx(Ck,{status:t})}),m.jsx("td",{className:"px-6 py-4",children:new Date(e.createdDate).toLocaleDateString("en-GB",{timeZone:"Africa/Nairobi"})}),m.jsx("td",{className:"px-6 py-4",children:new Date(e.expiryDate).toLocaleDateString("en-GB",{timeZone:"Africa/Nairobi"})}),m.jsx("td",{className:"px-6 py-4 text-right font-mono",children:e.total.toFixed(2)}),m.jsx("td",{className:"px-6 py-4 text-right",children:m.jsx("button",{onClick:t=>{t.stopPropagation(),r(e)},className:"font-medium text-primary dark:text-dark-primary hover:underline",children:"View"})})]},e.id)})})]})})]})},Cj=({onClose:e,onSave:t,user:r})=>{let[n,a]=(0,g.useState)({name:"",username:"",role:"Cashier",pin:""}),[o,i]=(0,g.useState)(""),[s,l]=(0,g.useState)(""),[A,c]=(0,g.useState)(""),d=!!r,u=d&&!!r?.email;(0,g.useEffect)(()=>{r&&a({name:r.name,username:r.username,role:r.role,pin:r.pin||""})},[r]);let h=e=>{let{name:t,value:r}=e.target;"pin"===t&&r.length>4||a(e=>({...e,[t]:r}))},f="block text-sm font-medium text-foreground dark:text-dark-foreground-muted",p="mt-1 block w-full px-3 py-2 bg-card dark:bg-dark-background border border-border dark:border-dark-border rounded-md shadow-sm focus:outline-none focus:ring-primary dark:focus:ring-dark-primary sm:text-sm disabled:bg-muted dark:disabled:bg-dark-muted";return m.jsx("div",{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50 p-4",children:(0,m.jsxs)("div",{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{type:"spring",stiffness:300,damping:30},className:"bg-card dark:bg-dark-card rounded-xl shadow-2xl w-full max-w-lg p-8 border border-border dark:border-dark-border",children:[(0,m.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[m.jsx("h2",{className:"text-2xl font-bold text-foreground dark:text-dark-foreground",children:d?"Edit Staff Member":"Add New Staff"}),m.jsx("button",{onClick:e,className:"text-foreground-muted hover:text-foreground dark:text-dark-foreground-muted dark:hover:text-dark-foreground",children:m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),u&&m.jsx("div",{className:"p-4 mb-4 bg-primary-soft border border-primary/20 text-primary rounded-lg text-sm dark:bg-dark-primary-soft dark:border-dark-primary/30 dark:text-dark-primary",children:"The primary business account holder's details cannot be modified from this screen. For changes, please contact support."}),(0,m.jsxs)("form",{onSubmit:e=>{if(e.preventDefault(),c(""),o!==s){c("Passcodes do not match.");return}if(!d&&!o){c("Passcode is required for new users.");return}if(o&&o.length<6){c("Passcode must be at least 6 characters long.");return}if(n.pin&&4!==n.pin.length){c("PIN must be exactly 4 digits.");return}if(!n.username.trim()){c("Username is required.");return}let a={...n};o&&(a.password=o),d&&r?t({...r,...a}):t(a)},className:"space-y-4",children:[(0,m.jsxs)("div",{children:[m.jsx("label",{htmlFor:"name",className:f,children:"Full Name"}),m.jsx("input",{type:"text",name:"name",id:"name",value:n.name,onChange:h,required:!0,autoFocus:!0,disabled:u,className:p})]}),(0,m.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,m.jsxs)("div",{children:[m.jsx("label",{htmlFor:"username",className:f,children:"Username"}),m.jsx("input",{type:"text",name:"username",id:"username",value:n.username,onChange:h,required:!0,disabled:u,className:p})]}),(0,m.jsxs)("div",{children:[m.jsx("label",{htmlFor:"role",className:f,children:"Role"}),(0,m.jsxs)("select",{name:"role",id:"role",value:n.role,onChange:h,disabled:u,className:p,children:[m.jsx("option",{children:"Cashier"}),m.jsx("option",{children:"Supervisor"}),m.jsx("option",{children:"Accountant"}),m.jsx("option",{children:"Admin"})]})]})]}),m.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:(0,m.jsxs)("div",{children:[m.jsx("label",{htmlFor:"pin",className:f,children:"4-Digit PIN Code (for screen lock)"}),m.jsx("input",{type:"text",inputMode:"numeric",pattern:"\\d{4}",name:"pin",id:"pin",value:n.pin,onChange:h,disabled:u,className:p,maxLength:4})]})}),(0,m.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,m.jsxs)("div",{children:[m.jsx("label",{htmlFor:"password",className:f,children:"Passcode"}),m.jsx("input",{id:"password",type:"password",required:!d,value:o,onChange:e=>i(e.target.value),disabled:u,className:p,placeholder:d?"Leave blank to keep same":""})]}),(0,m.jsxs)("div",{children:[m.jsx("label",{htmlFor:"confirmPassword",className:f,children:"Confirm Passcode"}),m.jsx("input",{id:"confirmPassword",type:"password",required:!d||o.length>0,value:s,onChange:e=>l(e.target.value),disabled:u,className:p})]})]}),A&&m.jsx("p",{className:"text-sm text-danger text-center",children:A}),(0,m.jsxs)("div",{className:"mt-8 flex justify-end space-x-3",children:[m.jsx("button",{type:"button",onClick:e,whileTap:{scale:.95},className:"bg-muted dark:bg-dark-muted text-foreground dark:text-dark-foreground font-bold px-4 py-2 rounded-xl transition-shadow shadow-clay dark:shadow-clay-dark active:shadow-clay-inset dark:active:shadow-clay-dark-inset",children:"Cancel"}),m.jsx("button",{type:"submit",disabled:u,whileTap:{scale:.95},className:"bg-primary text-primary-content font-bold px-6 py-2 rounded-xl transition-shadow shadow-clay dark:shadow-clay-dark active:shadow-clay-inset dark:active:shadow-clay-dark-inset disabled:bg-slate-400 dark:disabled:bg-slate-600 disabled:shadow-none",children:"Save Staff Member"})]})]})]})})},CC=({user:e,onClose:t,onSave:r})=>{let[n,a]=(0,g.useState)(""),[o,i]=(0,g.useState)(""),[s,l]=(0,g.useState)("");return m.jsx("div",{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50 p-4",children:(0,m.jsxs)("div",{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{type:"spring",stiffness:300,damping:30},className:"bg-card dark:bg-dark-card rounded-xl shadow-2xl w-full max-w-md p-6",children:[(0,m.jsxs)("h2",{className:"text-xl font-bold text-foreground dark:text-dark-foreground",children:["Reset Passcode for ",m.jsx("span",{className:"text-primary dark:text-dark-primary",children:e.name})]}),m.jsx("p",{className:"text-sm text-foreground-muted dark:text-dark-foreground-muted mt-2",children:"Enter a new passcode for the user. They will be required to use this new passcode to log in."}),(0,m.jsxs)("form",{onSubmit:t=>{if(t.preventDefault(),l(""),n.length<6){l("New passcode must be at least 6 characters long.");return}if(n!==o){l("Passcodes do not match.");return}r(e.id,n)},className:"mt-4 space-y-4",children:[(0,m.jsxs)("div",{children:[m.jsx("label",{htmlFor:"new-passcode",className:"block text-sm font-medium text-foreground dark:text-dark-foreground",children:"New Passcode"}),m.jsx("input",{type:"password",id:"new-passcode",value:n,onChange:e=>a(e.target.value),required:!0,autoFocus:!0,className:"mt-1 block w-full px-3 py-2 bg-card dark:bg-dark-background border border-border dark:border-dark-border rounded-md shadow-sm"})]}),(0,m.jsxs)("div",{children:[m.jsx("label",{htmlFor:"confirm-passcode",className:"block text-sm font-medium text-foreground dark:text-dark-foreground",children:"Confirm New Passcode"}),m.jsx("input",{type:"password",id:"confirm-passcode",value:o,onChange:e=>i(e.target.value),required:!0,className:"mt-1 block w-full px-3 py-2 bg-card dark:bg-dark-background border border-border dark:border-dark-border rounded-md shadow-sm"})]}),s&&m.jsx("p",{className:"text-sm text-danger",children:s}),(0,m.jsxs)("div",{className:"mt-6 flex justify-end space-x-3",children:[m.jsx("button",{type:"button",onClick:t,whileTap:{scale:.95},className:"px-4 py-2 text-sm font-bold bg-muted dark:bg-dark-muted text-foreground dark:text-dark-foreground rounded-md hover:bg-border dark:hover:bg-dark-border",children:"Cancel"}),m.jsx("button",{type:"submit",whileTap:{scale:.95},className:"px-4 py-2 text-sm font-bold text-white bg-primary rounded-md hover:bg-primary-focus",children:"Save New Passcode"})]})]})]})})},CN=()=>m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.5L14.732 3.732z"})}),CS=()=>m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 7a2 2 0 012 2m4 0a6 6 0 01-7.743 5.743L11 17H9v2H7v2H5v-2H3v-2h2v-2h2v-2h2l2.05-2.05A6 6 0 0121 11z"})}),CF=()=>m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),CE=({title:e,value:t,icon:r})=>(0,m.jsxs)("div",{className:"bg-card dark:bg-dark-card p-4 rounded-lg shadow-sm flex items-center space-x-4",children:[m.jsx("div",{className:"p-3 rounded-lg bg-muted dark:bg-dark-muted text-primary dark:text-dark-primary",children:r}),(0,m.jsxs)("div",{children:[m.jsx("p",{className:"text-sm text-foreground-muted dark:text-dark-foreground-muted",children:e}),m.jsx("p",{className:"text-2xl font-bold text-foreground dark:text-dark-foreground",children:t})]})]}),CO=({users:e,permissions:t,onAddUser:r,onUpdateUser:n,onDeleteUser:a,onManagePermissionsRequest:o})=>{let[i,s]=(0,g.useState)(!1),[l,A]=(0,g.useState)(void 0),[c,d]=(0,g.useState)(null),[u,h]=(0,g.useState)(null),f=t.includes("manage_staff"),p=(0,g.useMemo)(()=>new Set(e.map(e=>e.role)).size,[e]),x=e=>{A(e),s(!0)};return(0,m.jsxs)("div",{className:"p-4 md:p-6 bg-muted dark:bg-dark-muted min-h-full",children:[(0,m.jsxs)(Q,{children:[i&&m.jsx(Cj,{onClose:()=>s(!1),onSave:e=>{"id"in e?n(e):r(e),s(!1)},user:l}),c&&m.jsx(Cn,{title:`Delete User ${c.name}?`,message:"Are you sure you want to permanently delete this user? This action cannot be undone.",confirmText:"Delete",onConfirm:()=>{c&&(a(c.id),d(null))},onClose:()=>d(null),isDestructive:!0}),u&&m.jsx(CC,{user:u,onClose:()=>h(null),onSave:(t,r)=>{let a=e.find(e=>e.id===t);a&&n({...a,password:r}),h(null)}})]}),(0,m.jsxs)("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-6",children:[(0,m.jsxs)("div",{children:[m.jsx("h1",{className:"text-2xl font-bold text-foreground dark:text-dark-foreground",children:"Staff Management"}),m.jsx("p",{className:"text-sm text-foreground-muted dark:text-dark-foreground-muted",children:"Add, edit, and manage staff members and their roles."})]}),f&&(0,m.jsxs)("div",{className:"flex items-center space-x-2 mt-4 md:mt-0",children:[m.jsx("button",{onClick:o,whileTap:{scale:.95},className:"bg-card text-foreground dark:bg-dark-card dark:text-dark-foreground font-bold px-4 py-2 rounded-lg border border-border dark:border-dark-border hover:bg-border dark:hover:bg-dark-border transition-colors shadow-sm",children:"Manage Roles"}),m.jsx("button",{onClick:()=>x(),whileTap:{scale:.95},className:"bg-primary text-primary-content font-bold px-4 py-2 rounded-lg hover:bg-primary-focus transition-colors shadow-sm flex items-center",children:"+ Add New Staff"})]})]}),(0,m.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-6",children:[m.jsx(CE,{title:"Total Staff",value:e.length,icon:ox.users}),m.jsx(CE,{title:"Active Roles",value:p,icon:ox.staff})]}),(0,m.jsxs)("div",{className:"bg-card dark:bg-dark-card rounded-lg shadow-sm",children:[m.jsx("div",{className:"p-4 border-b border-border dark:border-dark-border",children:m.jsx("h2",{className:"text-lg font-semibold text-foreground dark:text-dark-foreground",children:"Staff List"})}),m.jsx("div",{className:"overflow-x-auto",children:(0,m.jsxs)("table",{className:"w-full text-sm text-left text-foreground-muted dark:text-dark-foreground-muted",children:[m.jsx("thead",{className:"text-xs text-foreground dark:text-dark-foreground uppercase bg-muted dark:bg-dark-muted",children:(0,m.jsxs)("tr",{children:[m.jsx("th",{scope:"col",className:"px-6 py-3",children:"Staff Member"}),m.jsx("th",{scope:"col",className:"px-6 py-3",children:"Login ID"}),m.jsx("th",{scope:"col",className:"px-6 py-3",children:"Role"}),m.jsx("th",{scope:"col",className:"px-6 py-3 text-right",children:"Actions"})]})}),m.jsx("tbody",{className:"divide-y divide-border dark:divide-dark-border",children:e.map(e=>{let t=!!e.email;return(0,m.jsxs)("tr",{className:"hover:bg-muted dark:hover:bg-dark-muted",children:[(0,m.jsxs)("td",{className:"px-6 py-4 font-semibold text-foreground dark:text-dark-foreground flex items-center gap-2",children:[e.name,t&&m.jsx("span",{title:"Primary Business Account Holder",children:m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 text-amber-500",viewBox:"0 0 20 20",fill:"currentColor",children:m.jsx("path",{fillRule:"evenodd",d:"M18 8a6 6 0 01-7.743 5.743L10 14l-1 1-1 1H6v2H2v-4l4.257-4.257A6 6 0 1118 8zm-6-4a1 1 0 100 2 1 1 0 000-2z",clipRule:"evenodd"})})})]}),m.jsx("td",{className:"px-6 py-4 font-mono text-xs",children:e.email||e.username}),m.jsx("td",{className:"px-6 py-4",children:m.jsx("span",{className:"px-2.5 py-1 text-xs font-semibold text-white bg-gray-800 rounded-full",children:e.role})}),m.jsx("td",{className:"px-6 py-4 text-right",children:f&&!t?(0,m.jsxs)("div",{className:"flex justify-end space-x-2",children:[m.jsx("button",{onClick:()=>x(e),className:"p-1.5 rounded-md text-blue-500 hover:bg-blue-100 dark:hover:bg-blue-900/50",title:"Edit User",children:m.jsx(CN,{})}),m.jsx("button",{onClick:()=>h(e),className:"p-1.5 rounded-md text-amber-500 hover:bg-amber-100 dark:hover:bg-amber-900/50",title:"Reset Passcode",children:m.jsx(CS,{})}),m.jsx("button",{onClick:()=>d(e),className:"p-1.5 rounded-md text-danger hover:bg-danger/10",title:"Delete User",children:m.jsx(CF,{})})]}):m.jsx("span",{className:"text-xs font-semibold text-foreground-muted dark:text-dark-foreground-muted",children:"Locked"})})]},e.id)})})]})})]})]})},CP=({purchaseOrder:e,supplier:t,products:r,onConfirm:n,onClose:a})=>{let[o,i]=(0,g.useState)([]),s=(0,g.useMemo)(()=>[...new Set(r.map(e=>e.category).filter(Boolean))].sort(),[r]);(0,g.useEffect)(()=>{i((e.items||[]).map(e=>{let t=r.find(t=>t.id===e.productId),n=e.quantityReceived||0,a=e.quantity-n;return{productId:e.productId,productName:e.productName,quantityOrdered:e.quantity,quantityPreviouslyReceived:n,quantityReceivingNow:Math.max(0,a),cost:e.cost,category:t?.category||"",upc:t?.upc||"",unitOfMeasure:e.unitOfMeasure,salesOrderItemId:e.salesOrderItemId}}))},[e,r]);let l=(e,t,r,n)=>{i(a=>a.map(a=>{if(a[e?"productId":"productName"]===(e||t)){if("quantityReceivingNow"===r){let e=a.quantityOrdered-a.quantityPreviouslyReceived,t=Math.max(0,Math.min(Number(n),e));return{...a,[r]:t}}return{...a,[r]:n}}return a}))},A=(0,g.useMemo)(()=>o.reduce((e,t)=>e+t.cost*t.quantityReceivingNow,0),[o]);return m.jsx("div",{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50 p-4",children:(0,m.jsxs)("div",{initial:{scale:.9,y:20,opacity:0},animate:{scale:1,y:0,opacity:1},exit:{scale:.9,y:20,opacity:0},transition:{type:"spring",stiffness:300,damping:30},className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-5xl max-h-[90vh] flex flex-col",children:[(0,m.jsxs)("div",{className:"flex-shrink-0 flex justify-between items-center p-6 border-b border-slate-200 dark:border-slate-700",children:[m.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-100",children:"Receive Purchase Order"}),m.jsx("button",{onClick:a,className:"text-slate-500 hover:text-slate-800 dark:text-slate-400 dark:hover:text-slate-100",children:m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,m.jsxs)("div",{className:"p-6 overflow-y-auto",children:[(0,m.jsxs)("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:["Confirm quantities and details for items received from ",m.jsx("span",{className:"font-semibold text-slate-700 dark:text-slate-200",children:t?.name})," for PO ",m.jsx("span",{className:"font-semibold text-slate-700 dark:text-slate-200",children:e.poNumber}),"."]}),(0,m.jsxs)("div",{className:"space-y-4",children:[o.map((e,t)=>{let n=r.find(t=>t.id===e.productId),a=n?n.stock:0,o=a+e.quantityReceivingNow;return(0,m.jsxs)("div",{className:"grid grid-cols-12 gap-4 items-end bg-slate-50 dark:bg-slate-700/50 p-4 rounded-lg",children:[(0,m.jsxs)("div",{className:"col-span-12 md:col-span-4",children:[m.jsx("label",{className:"text-xs font-bold text-slate-500 dark:text-slate-400",children:"Product"}),m.jsx("p",{className:"font-semibold text-slate-800 dark:text-slate-100",children:e.productName})]}),(0,m.jsxs)("div",{className:"col-span-4 md:col-span-1 text-center md:text-left",children:[m.jsx("label",{className:"text-xs font-bold text-slate-500 dark:text-slate-400",children:"Ordered"}),m.jsx("p",{className:"text-slate-800 dark:text-slate-100 font-mono",children:e.quantityOrdered})]}),(0,m.jsxs)("div",{className:"col-span-4 md:col-span-1 text-center md:text-left",children:[m.jsx("label",{className:"text-xs font-bold text-slate-500 dark:text-slate-400",children:"Received"}),m.jsx("p",{className:"text-slate-800 dark:text-slate-100 font-mono",children:e.quantityPreviouslyReceived})]}),(0,m.jsxs)("div",{className:"col-span-4 md:col-span-2",children:[m.jsx("label",{htmlFor:`qty-${t}`,className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Receiving Now"}),m.jsx("input",{id:`qty-${t}`,type:"number",value:e.quantityReceivingNow,onChange:t=>l(e.productId,e.productName,"quantityReceivingNow",parseInt(t.target.value)||0),max:e.quantityOrdered-e.quantityPreviouslyReceived,min:"0",className:"mt-1 block w-full px-2 py-1 bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-md shadow-sm focus:outline-none focus:ring-emerald-500 focus:border-emerald-500 sm:text-sm"}),n&&"Inventory"===n.productType&&(0,m.jsxs)("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-1",children:["Stock: ",a,"  ",m.jsx("span",{className:"font-bold text-emerald-600 dark:text-emerald-400",children:o})]})]}),(0,m.jsxs)("div",{className:"col-span-6 md:col-span-2",children:[m.jsx("label",{htmlFor:`cat-${t}`,className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Category"}),m.jsx("input",{type:"text",id:`cat-${t}`,list:"categories-list",value:e.category,onChange:t=>l(e.productId,e.productName,"category",t.target.value),className:"mt-1 block w-full px-3 py-2 bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-md shadow-sm focus:outline-none focus:ring-emerald-500 focus:border-emerald-500 sm:text-sm"})]}),(0,m.jsxs)("div",{className:"col-span-6 md:col-span-2",children:[m.jsx("label",{htmlFor:`upc-${t}`,className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"UPC / Barcode"}),m.jsx("input",{id:`upc-${t}`,type:"text",value:e.upc,onChange:t=>l(e.productId,e.productName,"upc",t.target.value),className:"mt-1 block w-full px-3 py-2 bg-white dark:bg-slate-700 border border-slate-300 dark:border-slate-600 rounded-md shadow-sm focus:outline-none focus:ring-emerald-500 focus:border-emerald-500 sm:text-sm"})]})]},e.productId||e.productName)}),m.jsx("datalist",{id:"categories-list",children:s.map(e=>m.jsx("option",{value:e},e))})]})]}),(0,m.jsxs)("div",{className:"flex-shrink-0 flex justify-between items-center p-6 border-t border-slate-200 dark:border-slate-700 mt-auto",children:[(0,m.jsxs)("div",{children:[m.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-300",children:"New Invoice Total (for this batch)"}),m.jsx("p",{className:"text-2xl font-bold text-emerald-600 dark:text-emerald-400",children:`Ksh ${A.toFixed(2)}`})]}),(0,m.jsxs)("div",{className:"flex space-x-3",children:[m.jsx("button",{type:"button",onClick:a,whileTap:{scale:.95},className:"bg-slate-100 text-slate-700 font-semibold px-4 py-2 rounded-lg hover:bg-slate-200 dark:bg-slate-700 dark:text-slate-200 dark:hover:bg-slate-600 transition-colors",children:"Cancel"}),m.jsx("button",{onClick:()=>{n(o.filter(e=>{let t=r.find(t=>t.id===e.productId);return e.quantityReceivingNow>0||t&&(e.category!==t.category||e.upc!==t.upc)}).map(e=>({productId:e.productId,productName:e.productName,quantity:e.quantityOrdered,cost:e.cost,unitOfMeasure:e.unitOfMeasure,quantityReceived:e.quantityReceivingNow,category:e.category,upc:e.upc,salesOrderItemId:e.salesOrderItemId})))},whileTap:{scale:.98},className:"bg-emerald-600 text-white font-bold py-2 px-6 rounded-lg text-lg hover:bg-emerald-700 transition-colors shadow-lg",children:"Confirm & Receive"})]})]})]})})},CI=({product:e,purchaseOrders:t,suppliers:r,onConfirm:n,onClose:a})=>{let[o,i]=(0,g.useState)(1),[s,l]=(0,g.useState)("new"),[A,c]=(0,g.useState)(r[0]?.id||""),d=(0,g.useMemo)(()=>t.filter(e=>"Draft"===e.status||"Sent"===e.status),[t]),u=(0,g.useMemo)(()=>!(o<=0)&&("new"!==s||!!A),[o,s,A]);return m.jsx("div",{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50 p-4",children:(0,m.jsxs)("div",{initial:{scale:.9,y:20,opacity:0},animate:{scale:1,y:0,opacity:1},exit:{scale:.9,y:20,opacity:0},transition:{type:"spring",stiffness:300,damping:30},className:"bg-card dark:bg-dark-card rounded-xl shadow-2xl w-full max-w-lg p-8",children:[(0,m.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[m.jsx("h2",{className:"text-2xl font-bold text-foreground dark:text-dark-foreground",children:"Add to Purchase Order"}),m.jsx("button",{onClick:a,className:"text-foreground-muted dark:text-dark-foreground-muted hover:text-foreground dark:hover:text-dark-foreground",children:m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,m.jsxs)("div",{className:"bg-muted dark:bg-dark-muted p-4 rounded-lg mb-6",children:[m.jsx("p",{className:"font-bold text-lg text-foreground dark:text-dark-foreground",children:e.name}),(0,m.jsxs)("p",{className:"text-sm text-foreground-muted dark:text-dark-foreground-muted",children:["Current Stock: ",m.jsx("span",{className:"font-semibold text-danger",children:e.stock})]}),(0,m.jsxs)("p",{className:"text-sm text-foreground-muted dark:text-dark-foreground-muted",children:["Unit Cost: ",(0,m.jsxs)("span",{className:"font-semibold text-foreground dark:text-dark-foreground",children:["Ksh ",e.costPrice?.toFixed(2)||"0.00"]})]})]}),(0,m.jsxs)("div",{className:"space-y-4",children:[(0,m.jsxs)("div",{children:[m.jsx("label",{htmlFor:"quantity",className:"block text-sm font-medium text-foreground dark:text-dark-foreground",children:"Order Quantity"}),m.jsx("input",{type:"number",id:"quantity",value:o,onChange:e=>i(parseInt(e.target.value)||1),min:"1",className:"mt-1 block w-full px-3 py-2 bg-card dark:bg-dark-card border border-border dark:border-dark-border rounded-md shadow-sm focus:outline-none focus:ring-primary dark:focus:ring-dark-primary sm:text-lg"})]}),(0,m.jsxs)("div",{children:[m.jsx("label",{htmlFor:"po-select",className:"block text-sm font-medium text-foreground dark:text-dark-foreground",children:"Purchase Order"}),(0,m.jsxs)("select",{id:"po-select",value:s,onChange:e=>l(e.target.value),className:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-border dark:border-dark-border bg-card dark:bg-dark-card focus:outline-none focus:ring-primary dark:focus:ring-dark-primary sm:text-sm rounded-md",children:[m.jsx("option",{value:"new",children:"-- Create New PO --"}),d.map(e=>(0,m.jsxs)("option",{value:e.id,children:[e.poNumber," (",r.find(t=>t.id===e.supplierId)?.name,") - ",e.status]},e.id))]})]}),"new"===s&&(0,m.jsxs)("div",{children:[m.jsx("label",{htmlFor:"supplier-select",className:"block text-sm font-medium text-foreground dark:text-dark-foreground",children:"Supplier"}),(0,m.jsxs)("select",{id:"supplier-select",value:A,onChange:e=>c(e.target.value),className:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-border dark:border-dark-border bg-card dark:bg-dark-card focus:outline-none focus:ring-primary dark:focus:ring-dark-primary sm:text-sm rounded-md",children:[m.jsx("option",{value:"",disabled:!0,children:"-- Select a Supplier --"}),r.map(e=>m.jsx("option",{value:e.id,children:e.name},e.id))]})]})]}),(0,m.jsxs)("div",{className:"mt-8 flex justify-end space-x-3",children:[m.jsx("button",{type:"button",onClick:a,whileTap:{scale:.95},className:"bg-muted dark:bg-dark-muted text-foreground dark:text-dark-foreground font-semibold px-4 py-2 rounded-lg hover:bg-border dark:hover:bg-dark-border transition-colors",children:"Cancel"}),m.jsx("button",{onClick:()=>{u&&n(e,o,s,"new"===s?A:void 0)},disabled:!u,whileTap:{scale:.98},className:"bg-primary text-primary-content font-bold py-2 px-6 rounded-lg text-lg hover:bg-primary-focus transition-colors shadow-lg disabled:bg-slate-400 disabled:cursor-not-allowed",children:"Confirm"})]})]})})},CU=({product:e,onClose:t})=>{let[r,n]=(0,g.useState)(e.upc?"upc":"inventoryCode"),[a,o]=(0,g.useState)(null),[i,s]=(0,g.useState)(12),[l,A]=(0,g.useState)(40),[c,d]=(0,g.useState)(30),[u,h]=(0,g.useState)(2),[f,p]=(0,g.useState)(8),x=(0,g.useMemo)(()=>"upc"===r&&e.upc?e.upc:e.inventoryCode,[r,e]);return(0,g.useEffect)(()=>{if(o(null),x)try{ia()(".barcode-svg",x,{format:"upc"===r&&e.upc?"UPCA":"CODE128",displayValue:!0,fontSize:14,margin:2,height:30,width:1.5,valid:e=>{e||o(`The provided ${r.toUpperCase()} is not valid for this barcode type.`)}})}catch(e){console.error("Barcode generation failed:",e),o(e.message||`Failed to generate ${r.toUpperCase()} barcode.`)}else o(`No ${"upc"===r?"UPC":"Inventory Code"} code available for this product.`)},[x,r,i,u,l,c,e.upc]),m.jsx("div",{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50 p-4",children:(0,m.jsxs)("div",{initial:{scale:.9,y:20,opacity:0},animate:{scale:1,y:0,opacity:1},exit:{scale:.9,y:20,opacity:0},transition:{type:"spring",stiffness:300,damping:30},className:"bg-card dark:bg-dark-card rounded-xl shadow-2xl w-full max-w-4xl max-h-[90vh] flex flex-col",children:[(0,m.jsxs)("div",{className:"flex-shrink-0 flex justify-between items-center p-6 border-b border-border dark:border-dark-border",children:[m.jsx("h2",{className:"text-2xl font-bold text-foreground dark:text-dark-foreground",children:"Print Barcode Labels"}),m.jsx("button",{onClick:t,className:"text-foreground-muted hover:text-foreground dark:text-dark-foreground-muted dark:hover:text-dark-foreground",children:m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,m.jsxs)("div",{className:"flex-grow flex flex-col md:flex-row overflow-hidden",children:[(0,m.jsxs)("div",{className:"w-full md:w-80 flex-shrink-0 p-6 space-y-4 border-r border-border dark:border-dark-border overflow-y-auto",children:[m.jsx("h3",{className:"font-bold text-foreground dark:text-dark-foreground",children:"Print Settings"}),e.upc&&(0,m.jsxs)("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-foreground dark:text-dark-foreground",children:"Barcode Type"}),(0,m.jsxs)("div",{className:"mt-1 flex justify-center bg-muted dark:bg-dark-muted p-1 rounded-lg",children:[m.jsx("button",{onClick:()=>n("inventoryCode"),className:`px-4 py-1.5 rounded-md text-sm font-bold transition-colors w-1/2 ${"inventoryCode"===r?"bg-card dark:bg-dark-card shadow text-primary dark:text-dark-primary":"text-foreground-muted dark:text-dark-foreground-muted"}`,children:"Inv. Code"}),m.jsx("button",{onClick:()=>n("upc"),className:`px-4 py-1.5 rounded-md text-sm font-bold transition-colors w-1/2 ${"upc"===r?"bg-card dark:bg-dark-card shadow text-primary dark:text-dark-primary":"text-foreground-muted dark:text-dark-foreground-muted"}`,children:"UPC"})]})]}),(0,m.jsxs)("div",{children:[m.jsx("label",{htmlFor:"quantity",className:"block text-sm font-medium text-foreground dark:text-dark-foreground",children:"Quantity to Print"}),m.jsx("input",{id:"quantity",type:"number",value:i,onChange:e=>s(Number(e.target.value)),min:"1",className:"mt-1 block w-full px-3 py-2 bg-card dark:bg-dark-card border border-border dark:border-dark-border rounded-md"})]}),(0,m.jsxs)("div",{children:[m.jsx("label",{htmlFor:"columns",className:"block text-sm font-medium text-foreground dark:text-dark-foreground",children:"Columns per Row"}),m.jsx("input",{id:"columns",type:"number",value:u,onChange:e=>h(Number(e.target.value)),min:"1",className:"mt-1 block w-full px-3 py-2 bg-card dark:bg-dark-card border border-border dark:border-dark-border rounded-md"})]}),(0,m.jsxs)("div",{children:[m.jsx("label",{htmlFor:"labelWidth",className:"block text-sm font-medium text-foreground dark:text-dark-foreground",children:"Label Width (mm)"}),m.jsx("input",{id:"labelWidth",type:"number",value:l,onChange:e=>A(Number(e.target.value)),className:"mt-1 block w-full px-3 py-2 bg-card dark:bg-dark-card border border-border dark:border-dark-border rounded-md"})]}),(0,m.jsxs)("div",{children:[m.jsx("label",{htmlFor:"labelHeight",className:"block text-sm font-medium text-foreground dark:text-dark-foreground",children:"Label Height (mm)"}),m.jsx("input",{id:"labelHeight",type:"number",value:c,onChange:e=>d(Number(e.target.value)),className:"mt-1 block w-full px-3 py-2 bg-card dark:bg-dark-card border border-border dark:border-dark-border rounded-md"})]}),(0,m.jsxs)("div",{children:[m.jsx("label",{htmlFor:"fontSize",className:"block text-sm font-medium text-foreground dark:text-dark-foreground",children:"Font Size (pt)"}),m.jsx("input",{id:"fontSize",type:"number",value:f,onChange:e=>p(Number(e.target.value)),className:"mt-1 block w-full px-3 py-2 bg-card dark:bg-dark-card border border-border dark:border-dark-border rounded-md"})]})]}),m.jsx("div",{className:"flex-grow p-4 overflow-auto bg-background dark:bg-dark-background",children:a?m.jsx("div",{className:"h-full flex items-center justify-center text-danger font-semibold text-sm p-4 text-center",children:a}):m.jsx("div",{id:"barcode-to-print",style:{display:"grid",gridTemplateColumns:`repeat(${u}, 1fr)`,gap:"1mm",justifyItems:"center"},children:Array.from({length:i}).map((t,r)=>(0,m.jsxs)("div",{style:{width:`${l}mm`,height:`${c}mm`,padding:"1mm",border:"1px dashed #ccc",boxSizing:"border-box",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",pageBreakInside:"avoid",backgroundColor:"white",overflow:"hidden"},children:[m.jsx("p",{className:"text-black font-bold text-center",style:{fontSize:`${f}pt`,lineHeight:1.1,margin:0,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",width:"100%"},children:e.name}),(0,m.jsxs)("p",{className:"text-black font-semibold text-center",style:{fontSize:`${f-1}pt`,lineHeight:1.1,margin:0},children:["Ksh ",e.price.toFixed(2)]}),m.jsx("svg",{className:"barcode-svg",style:{maxWidth:"100%",height:"auto"}})]},r))})})]}),(0,m.jsxs)("div",{className:"flex-shrink-0 mt-auto flex justify-end space-x-3 p-6 border-t border-border dark:border-dark-border",children:[m.jsx("button",{type:"button",onClick:t,whileTap:{scale:.95},className:"bg-muted dark:bg-dark-muted text-foreground dark:text-dark-foreground font-bold px-4 py-2 rounded-lg hover:bg-border dark:hover:bg-dark-border transition-colors",children:"Cancel"}),(0,m.jsxs)("button",{onClick:()=>{window.print()},disabled:!!a,whileTap:{scale:.95},className:"bg-primary text-primary-content font-bold px-6 py-2 rounded-lg hover:bg-primary-focus transition-colors shadow-md flex items-center disabled:bg-slate-400 disabled:cursor-not-allowed",children:[m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",viewBox:"0 0 20 20",fill:"currentColor",children:m.jsx("path",{fillRule:"evenodd",d:"M5 4v3H4a2 2 0 00-2 2v6a2 2 0 002 2h1v-4a1 1 0 011-1h10a1 1 0 011 1v4h1a2 2 0 002-2v-6a2 2 0 00-2-2h-1V4a2 2 0 00-2-2H7a2 2 0 00-2 2zm8 0H7v3h6V4zm0 8H7v4h6v-4z",clipRule:"evenodd"})}),"Print Labels"]})]})]})})},CL=({customers:e,products:t,settings:r,onSave:n,onCancel:a})=>{let[o,i]=(0,g.useState)(e.find(e=>"cust001"!==e.id)?.id||""),[s,l]=(0,g.useState)([]),[A,c]=(0,g.useState)(""),[d,u]=(0,g.useState)(null),h=(0,g.useMemo)(()=>A?t.filter(e=>e.name.toLowerCase().includes(A.toLowerCase())).slice(0,5):[],[A,t]),f=(0,g.useMemo)(()=>{let e=new Map;for(let r of(t.forEach(t=>{let r=t.category||"Uncategorized";e.has(r)||e.set(r,[]),e.get(r).push(t)}),e.keys()))e.get(r).sort((e,t)=>e.name.localeCompare(t.name));return Array.from(e.entries()).sort((e,t)=>e[0].localeCompare(t[0]))},[t]),{subtotal:p,tax:x,total:b,discountAmount:y}=(0,g.useMemo)(()=>{let{subtotal:e,tax:t,total:n,totalDiscountAmount:a}=oH(s,{type:"percentage",value:0},r.tax.vatRate/100);return{subtotal:e,tax:t,total:n,discountAmount:a}},[s,r.tax.vatRate]),v=e=>{l(t=>t.find(t=>t.productId===e.id)?t.map(t=>t.productId===e.id?{...t,quantity:t.quantity+1}:t):[...t,{productId:e.id,productName:e.name,quantity:1,price:e.price,pricingType:e.pricingType}]),c("")},w=(e,t)=>{t<=0?l(t=>t.filter(t=>t.productId!==e)):l(r=>r.map(r=>r.productId===e?{...r,quantity:t}:r))},k=t=>{if(!e.find(e=>e.id===o)||0===s.length){alert("Please select a customer and add at least one item.");return}n({customerId:o,items:s,status:t},t)};return(0,m.jsxs)("div",{className:"p-4 md:p-8 h-full overflow-y-auto bg-background dark:bg-dark-background",children:[(0,m.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[m.jsx("h1",{className:"text-3xl font-bold text-foreground dark:text-dark-foreground",children:"Create Quotation"}),(0,m.jsxs)("div",{className:"flex space-x-3",children:[m.jsx("button",{onClick:a,whileTap:{scale:.95},className:"bg-muted text-foreground dark:bg-dark-muted dark:text-dark-foreground font-semibold px-4 py-2 rounded-lg hover:bg-border dark:hover:bg-dark-border",children:"Cancel"}),m.jsx("button",{onClick:()=>k("Draft"),whileTap:{scale:.95},className:"bg-foreground/80 text-white font-semibold px-4 py-2 rounded-lg hover:bg-foreground dark:bg-dark-border dark:hover:bg-dark-border/80",children:"Save as Draft"}),m.jsx("button",{onClick:()=>k("Sent"),whileTap:{scale:.95},className:"bg-primary text-primary-content font-semibold px-6 py-2 rounded-lg hover:bg-primary-focus shadow-md",children:"Create Quotation"})]})]}),(0,m.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,m.jsxs)("div",{className:"lg:col-span-2 space-y-6",children:[(0,m.jsxs)("div",{className:"bg-card dark:bg-dark-card p-6 rounded-xl shadow-sm space-y-4",children:[(0,m.jsxs)("div",{children:[m.jsx("label",{htmlFor:"customer",className:"block text-sm font-medium text-foreground dark:text-dark-foreground",children:"Customer"}),m.jsx("div",{className:"mt-1 max-w-sm",children:m.jsx(o6,{customers:e,selectedCustomerId:o,onCustomerChange:i,filter:e=>"cust001"!==e.id})})]}),(0,m.jsxs)("div",{className:"relative",children:[m.jsx("label",{htmlFor:"product-search",className:"block text-sm font-medium text-foreground dark:text-dark-foreground",children:"Add Product via Search"}),m.jsx("input",{id:"product-search",type:"text",value:A,onChange:e=>c(e.target.value),placeholder:"Type to search products...",className:"mt-1 block w-full p-2 bg-background dark:bg-dark-background border border-border dark:border-dark-border rounded-md"}),h.length>0&&m.jsx("ul",{className:"absolute z-10 w-full bg-card dark:bg-dark-card border border-border dark:border-dark-border rounded-md shadow-lg mt-1 max-h-60 overflow-y-auto",children:h.map(e=>(0,m.jsxs)("li",{onClick:()=>v(e),className:"px-4 py-2 hover:bg-muted dark:hover:bg-dark-muted cursor-pointer",children:[e.name," - Ksh ",e.price.toFixed(2)]},e.id))})]})]}),(0,m.jsxs)("div",{className:"bg-card dark:bg-dark-card p-6 rounded-xl shadow-sm",children:[m.jsx("h3",{className:"text-lg font-semibold text-foreground dark:text-dark-foreground mb-2",children:"Or Browse Products by Category"}),m.jsx("div",{className:"space-y-1 max-h-[50vh] overflow-y-auto pr-2",children:f.map(([e,t])=>(0,m.jsxs)("div",{className:"border-b border-border dark:border-dark-border last:border-b-0",children:[(0,m.jsxs)("button",{onClick:()=>u(d===e?null:e),className:"w-full flex justify-between items-center py-3 text-left font-semibold text-foreground dark:text-dark-foreground","aria-expanded":d===e,children:[(0,m.jsxs)("span",{children:[e," (",t.length,")"]}),m.jsx("div",{animate:{rotate:d===e?180:0},children:m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:m.jsx("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"})})})]}),m.jsx(Q,{children:d===e&&m.jsx("div",{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"overflow-hidden",children:m.jsx("ul",{className:"pb-3 pl-4 space-y-1",children:t.map(e=>(0,m.jsxs)("li",{onClick:()=>v(e),className:"flex justify-between items-center py-1.5 cursor-pointer hover:bg-muted dark:hover:bg-dark-muted rounded px-2",children:[m.jsx("span",{className:"text-sm text-foreground dark:text-dark-foreground",children:e.name}),(0,m.jsxs)("span",{className:"text-sm font-mono text-primary dark:text-dark-primary",children:["Ksh ",e.price.toFixed(2)]})]},e.id))})})})]},e))})]}),m.jsx("div",{className:"bg-card dark:bg-dark-card rounded-xl shadow-sm overflow-x-auto",children:(0,m.jsxs)("table",{className:"w-full text-sm",children:[m.jsx("thead",{className:"text-xs text-foreground dark:text-dark-foreground uppercase bg-muted dark:bg-dark-muted",children:(0,m.jsxs)("tr",{children:[m.jsx("th",{className:"px-6 py-3 text-left",children:"Product"}),m.jsx("th",{className:"px-6 py-3 text-center",children:"Quantity"}),m.jsx("th",{className:"px-6 py-3 text-right",children:"Unit Price"}),m.jsx("th",{className:"px-6 py-3 text-right",children:"Line Total"})]})}),(0,m.jsxs)("tbody",{className:"divide-y divide-border dark:divide-dark-border",children:[s.map(e=>(0,m.jsxs)("tr",{children:[m.jsx("td",{className:"px-6 py-4 font-semibold",children:e.productName}),m.jsx("td",{className:"px-6 py-4",children:m.jsx("input",{type:"number",value:e.quantity,onChange:t=>w(e.productId,parseInt(t.target.value)||1),className:"w-16 text-center bg-background dark:bg-dark-background border rounded-md p-1"})}),m.jsx("td",{className:"px-6 py-4 text-right font-mono",children:e.price.toFixed(2)}),m.jsx("td",{className:"px-6 py-4 text-right font-mono font-semibold",children:(e.price*e.quantity).toFixed(2)})]},e.productId)),0===s.length&&m.jsx("tr",{children:m.jsx("td",{colSpan:4,className:"text-center py-8 text-foreground-muted dark:text-dark-foreground-muted",children:"No items added to quote."})})]})]})})]}),m.jsx("div",{className:"lg:col-span-1",children:(0,m.jsxs)("div",{className:"bg-card dark:bg-dark-card rounded-xl shadow-sm p-6 space-y-3 sticky top-6",children:[m.jsx("h3",{className:"text-xl font-bold text-foreground dark:text-dark-foreground mb-4",children:"Summary"}),(0,m.jsxs)("div",{className:"flex justify-between text-sm",children:[m.jsx("span",{className:"text-foreground-muted dark:text-dark-foreground-muted",children:"Gross Subtotal"}),(0,m.jsxs)("span",{className:"font-semibold font-mono",children:["Ksh ",p.toFixed(2)]})]}),y>0&&(0,m.jsxs)("div",{className:"flex justify-between text-sm text-danger",children:[m.jsx("span",{children:"Discounts"}),(0,m.jsxs)("span",{className:"font-semibold font-mono",children:["- Ksh ",y.toFixed(2)]})]}),(0,m.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,m.jsxs)("span",{className:"text-foreground-muted dark:text-dark-foreground-muted",children:["VAT (",r.tax.vatRate,"%)"]}),(0,m.jsxs)("span",{className:"font-semibold font-mono",children:["Ksh ",x.toFixed(2)]})]}),(0,m.jsxs)("div",{className:"flex justify-between text-xl font-bold border-t border-border dark:border-dark-border pt-3 mt-3",children:[m.jsx("span",{className:"text-foreground dark:text-dark-foreground",children:"Total"}),(0,m.jsxs)("span",{className:"text-primary dark:text-dark-primary font-mono",children:["Ksh ",b.toFixed(2)]})]})]})})]})]})},C_=x().forwardRef(({quotation:e,settings:t,documentType:r,isPaid:n,linkedSaleId:a},o)=>(0,m.jsxs)("div",{ref:o,className:"relative bg-white p-8 font-sans text-sm text-black w-full max-w-4xl mx-auto shadow-lg border",children:[n&&m.jsx("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%) rotate(-45deg)",color:"rgba(34, 197, 94, 0.15)",fontSize:"8rem",fontWeight:"bold",textTransform:"uppercase",zIndex:0,pointerEvents:"none",userSelect:"none"},children:"Paid"}),(0,m.jsxs)("div",{className:"relative z-10",children:[(0,m.jsxs)("header",{className:"flex justify-between items-start pb-4 border-b",children:[(0,m.jsxs)("div",{children:[t.businessInfo.logoUrl&&m.jsx("img",{src:t.businessInfo.logoUrl,alt:"Company Logo",className:"h-16 max-w-xs object-contain mb-4"}),m.jsx("h2",{className:"text-xl font-bold text-slate-800",children:t.businessInfo.name}),m.jsx("p",{className:"text-slate-600",children:t.businessInfo.location}),(0,m.jsxs)("p",{className:"text-slate-600",children:["Tel: ",t.businessInfo.phone]}),t.tax.etimsEnabled&&t.businessInfo.kraPin&&(0,m.jsxs)("p",{className:"text-slate-600",children:["PIN: ",t.businessInfo.kraPin]})]}),(0,m.jsxs)("div",{className:"text-right",children:[m.jsx("h1",{className:"text-3xl font-bold uppercase text-slate-700 tracking-wide",children:r.replace("-"," ")}),(0,m.jsxs)("div",{className:"mt-2 text-xs",children:[(0,m.jsxs)("p",{className:"flex justify-end gap-2",children:[m.jsx("span",{className:"text-slate-500",children:"Number:"})," ",m.jsx("span",{className:"font-semibold",children:e.quoteNumber})]}),(0,m.jsxs)("p",{className:"flex justify-end gap-2",children:[m.jsx("span",{className:"text-slate-500",children:"Date:"})," ",m.jsx("span",{className:"font-semibold",children:new Date(e.createdDate).toLocaleDateString("en-GB",{timeZone:"Africa/Nairobi"})})]}),(0,m.jsxs)("p",{className:"flex justify-end gap-2",children:[m.jsx("span",{className:"text-slate-500",children:"Expires:"})," ",m.jsx("span",{className:"font-semibold",children:new Date(e.expiryDate).toLocaleDateString("en-GB",{timeZone:"Africa/Nairobi"})})]}),n&&a&&(0,m.jsxs)("p",{className:"flex justify-end gap-2",children:[m.jsx("span",{className:"text-slate-500",children:"Invoice Ref:"})," ",m.jsx("span",{className:"font-semibold",children:a})]})]})]})]}),(0,m.jsxs)("section",{className:"mt-8",children:[m.jsx("h3",{className:"text-xs uppercase font-bold text-slate-500 mb-2",children:"Bill To"}),m.jsx("p",{className:"font-bold text-slate-800",children:e.customerName})]}),m.jsx("section",{className:"mt-8",children:(0,m.jsxs)("table",{className:"w-full text-left",children:[m.jsx("thead",{children:(0,m.jsxs)("tr",{className:"bg-slate-100 text-slate-600 uppercase text-xs",children:[m.jsx("th",{className:"p-3 font-semibold",children:"Item Description"}),m.jsx("th",{className:"p-3 font-semibold text-center",children:"Qty"}),m.jsx("th",{className:"p-3 font-semibold text-right",children:"Unit Price"}),m.jsx("th",{className:"p-3 font-semibold text-right",children:"Total"})]})}),m.jsx("tbody",{children:e.items.map(e=>(0,m.jsxs)("tr",{className:"border-b",children:[m.jsx("td",{className:"p-3",children:e.productName}),m.jsx("td",{className:"p-3 text-center",children:e.quantity}),m.jsx("td",{className:"p-3 text-right font-mono",children:e.price.toFixed(2)}),m.jsx("td",{className:"p-3 text-right font-mono font-semibold",children:(e.price*e.quantity).toFixed(2)})]},e.productId))})]})}),m.jsx("section",{className:"flex justify-end mt-8",children:(0,m.jsxs)("div",{className:"w-full max-w-xs space-y-2",children:[(0,m.jsxs)("div",{className:"flex justify-between text-sm",children:[m.jsx("span",{className:"text-slate-600",children:"Subtotal"}),m.jsx("span",{className:"font-mono text-slate-800",children:e.subtotal.toFixed(2)})]}),e.discountAmount>0&&(0,m.jsxs)("div",{className:"flex justify-between text-sm",children:[m.jsx("span",{className:"text-slate-600",children:"Discount"}),(0,m.jsxs)("span",{className:"font-mono text-slate-800",children:["- ",e.discountAmount.toFixed(2)]})]}),(0,m.jsxs)("div",{className:"flex justify-between text-sm",children:[m.jsx("span",{className:"text-slate-600",children:"Taxable Amount"}),m.jsx("span",{className:"font-mono text-slate-800",children:(e.subtotal-e.discountAmount).toFixed(2)})]}),(0,m.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,m.jsxs)("span",{className:"text-slate-600",children:["VAT (",t.tax.vatRate,"%)"]}),m.jsx("span",{className:"font-mono text-slate-800",children:e.tax.toFixed(2)})]}),(0,m.jsxs)("div",{className:"flex justify-between text-lg font-bold border-t pt-2 mt-2",children:[m.jsx("span",{className:"text-slate-800",children:"Total Amount"}),(0,m.jsxs)("span",{className:"font-mono text-slate-800",children:["Ksh ",e.total.toFixed(2)]})]})]})}),(0,m.jsxs)("footer",{className:"mt-16 pt-4 border-t text-xs text-slate-500",children:[t.paymentMethods.enabled&&t.paymentMethods.displayOnDocuments.includes(r)&&(0,m.jsxs)("div",{className:"mb-4 text-left",children:[m.jsx("h4",{className:"font-bold text-slate-700 uppercase mb-2",children:"How to Pay"}),(0,m.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,m.jsxs)("div",{children:[t.paymentMethods.mpesaPaybill.paybillNumber&&(0,m.jsxs)("div",{className:"mb-2",children:[m.jsx("p",{className:"font-bold",children:"M-Pesa Paybill"}),(0,m.jsxs)("p",{children:[m.jsx("strong",{children:"Paybill No:"})," ",t.paymentMethods.mpesaPaybill.paybillNumber]}),(0,m.jsxs)("p",{children:[m.jsx("strong",{children:"Account No:"})," ",t.paymentMethods.mpesaPaybill.accountNumber]})]}),t.paymentMethods.mpesaTill.tillNumber&&(0,m.jsxs)("div",{children:[m.jsx("p",{className:"font-bold",children:"M-Pesa Till"}),(0,m.jsxs)("p",{children:[m.jsx("strong",{children:"Till No:"})," ",t.paymentMethods.mpesaTill.tillNumber]})]})]}),m.jsx("div",{className:"space-y-2",children:t.paymentMethods.bank.map(e=>(0,m.jsxs)("div",{children:[m.jsx("p",{className:"font-bold",children:e.bankName}),(0,m.jsxs)("p",{children:[m.jsx("strong",{children:"Acc Name:"})," ",e.accountName]}),(0,m.jsxs)("p",{children:[m.jsx("strong",{children:"Acc No:"})," ",e.accountNumber]}),(0,m.jsxs)("p",{children:[m.jsx("strong",{children:"Branch:"})," ",e.branch]})]},e.id))})]})]}),m.jsx("p",{className:"text-center",children:t.receipt.footer})]})]})]})),CQ=e=>Promise.all(Array.from(e.getElementsByTagName("img")).map(e=>new Promise(t=>{e.complete&&0!==e.naturalHeight?t():(e.onload=()=>t(),e.onerror=()=>{console.warn(`Could not load image for PDF generation: ${e.src}`),t()})}))),CT=({quotation:e,settings:t,sales:r,onBack:n,onConvertQuoteToSale:a,permissions:o})=>{let i=(0,g.useRef)(null),[s,l]=(0,g.useState)(!1),[A,c]=(0,g.useState)(null),d=o.includes("manage_quotations"),u=(0,g.useMemo)(()=>r.find(t=>t.quotationId===e.id),[r,e.id]),h=async t=>{i.current&&!s&&(l(!0),c(t),requestAnimationFrame(async()=>{try{if(!i.current)throw Error("PDF reference is not available.");await CQ(i.current);let r=await (0,An.default)(i.current,{scale:2,useCORS:!0}),n=r.toDataURL("image/png"),a=new sM("p","mm","a4"),o=a.internal.pageSize.getWidth(),s=r.height*o/r.width;a.addImage(n,"PNG",0,0,o,s),a.save(`${t}_${e.quoteNumber}.pdf`)}catch(e){console.error("Failed to generate PDF:",e),alert("Sorry, there was an error generating the PDF. The logo might be causing an issue.")}finally{l(!1),c(null)}}))},f=()=>m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-2",viewBox:"0 0 20 20",fill:"currentColor",children:m.jsx("path",{fillRule:"evenodd",d:"M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm3.293-7.707a1 1 0 011.414 0L9 10.586V3a1 1 0 112 0v7.586l1.293-1.293a1 1 0 111.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z",clipRule:"evenodd"})});return m.jsx("div",{className:"h-full overflow-y-auto bg-background dark:bg-dark-background",children:(0,m.jsxs)("div",{className:"p-4 md:p-8 space-y-6",children:[(0,m.jsxs)("div",{className:"flex flex-col md:flex-row gap-4 justify-between items-center",children:[(0,m.jsxs)("button",{onClick:n,className:"flex items-center text-sm font-bold text-primary dark:text-dark-primary hover:text-primary-focus",children:[m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-1",viewBox:"0 0 20 20",fill:"currentColor",children:m.jsx("path",{fillRule:"evenodd",d:"M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z",clipRule:"evenodd"})}),"Back to All Quotations"]}),u&&m.jsx("div",{className:"px-4 py-2 text-lg font-bold rounded-lg text-green-800 bg-green-100 dark:bg-green-900/50 dark:text-green-300 inline-block uppercase tracking-widest",children:"Invoiced"}),d&&(0,m.jsxs)("div",{className:"flex flex-wrap items-center justify-center gap-2",children:[(0,m.jsxs)("button",{onClick:()=>h("Quotation"),whileTap:{scale:.95},disabled:s,className:"bg-primary text-primary-content font-bold px-3 py-2 rounded-lg hover:bg-primary-focus transition-colors shadow-sm flex items-center text-sm disabled:bg-slate-400",children:[m.jsx(f,{})," ",s&&"Quotation"===A?"Downloading...":"Quote PDF"]}),(0,m.jsxs)("button",{onClick:()=>h("Proforma-Invoice"),whileTap:{scale:.95},disabled:s,className:"bg-muted text-foreground dark:bg-dark-muted dark:text-dark-foreground font-bold px-3 py-2 rounded-lg hover:bg-border dark:hover:bg-dark-border transition-colors shadow-sm flex items-center text-sm disabled:bg-slate-400",children:[m.jsx(f,{})," ",s&&"Proforma-Invoice"===A?"Downloading...":"Pro-forma PDF"]}),!u&&"Expired"!==e.status&&m.jsx("button",{onClick:()=>a(e),whileTap:{scale:.95},className:"bg-accent text-black font-bold px-4 py-2 rounded-lg hover:opacity-80 transition-opacity shadow-md flex items-center text-sm",children:"Create Invoice"})]})]}),m.jsx("div",{id:"pdf-content-wrapper",children:m.jsx(C_,{ref:i,quotation:e,settings:t,documentType:A||"Quotation",isPaid:!!u,linkedSaleId:u?.id})})]})})},CD=x().forwardRef(({invoice:e,supplier:t,purchaseOrder:r,settings:n},a)=>(0,m.jsxs)("div",{ref:a,className:"relative bg-white p-8 font-sans text-sm text-black w-full max-w-4xl mx-auto shadow-lg border",children:["Paid"===e.status&&m.jsx("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%) rotate(-45deg)",color:"rgba(34, 197, 94, 0.15)",fontSize:"8rem",fontWeight:"bold",textTransform:"uppercase",zIndex:0,pointerEvents:"none",userSelect:"none"},children:"Paid"}),(0,m.jsxs)("div",{className:"relative z-10",children:[(0,m.jsxs)("header",{className:"flex justify-between items-start pb-4 border-b",children:[(0,m.jsxs)("div",{children:[n.businessInfo.logoUrl&&m.jsx("img",{src:n.businessInfo.logoUrl,alt:"Company Logo",className:"h-16 max-w-xs object-contain mb-4"}),m.jsx("h2",{className:"text-xl font-bold text-slate-800",children:n.businessInfo.name}),m.jsx("p",{className:"text-slate-600",children:n.businessInfo.location}),(0,m.jsxs)("p",{className:"text-slate-600",children:["Tel: ",n.businessInfo.phone]})]}),(0,m.jsxs)("div",{className:"text-right",children:[m.jsx("h1",{className:"text-3xl font-bold uppercase text-slate-700 tracking-wide",children:"Supplier Invoice"}),(0,m.jsxs)("div",{className:"mt-2 text-xs",children:[(0,m.jsxs)("p",{className:"flex justify-end gap-2",children:[m.jsx("span",{className:"text-slate-500",children:"Invoice #:"})," ",m.jsx("span",{className:"font-semibold",children:e.invoiceNumber})]}),(0,m.jsxs)("p",{className:"flex justify-end gap-2",children:[m.jsx("span",{className:"text-slate-500",children:"PO Ref:"})," ",m.jsx("span",{className:"font-semibold",children:r?.poNumber})]}),(0,m.jsxs)("p",{className:"flex justify-end gap-2",children:[m.jsx("span",{className:"text-slate-500",children:"Invoice Date:"})," ",m.jsx("span",{className:"font-semibold",children:new Date(e.invoiceDate).toLocaleDateString("en-GB",{timeZone:"Africa/Nairobi"})})]}),(0,m.jsxs)("p",{className:"flex justify-end gap-2",children:[m.jsx("span",{className:"text-slate-500",children:"Due Date:"})," ",m.jsx("span",{className:"font-semibold",children:new Date(e.dueDate).toLocaleDateString("en-GB",{timeZone:"Africa/Nairobi"})})]})]})]})]}),(0,m.jsxs)("section",{className:"mt-8",children:[m.jsx("h3",{className:"text-xs uppercase font-bold text-slate-500 mb-2",children:"Supplier"}),m.jsx("p",{className:"font-bold text-slate-800",children:t?.name}),m.jsx("p",{className:"text-slate-600",children:t?.contact}),m.jsx("p",{className:"text-slate-600",children:t?.email})]}),m.jsx("section",{className:"mt-8",children:(0,m.jsxs)("table",{className:"w-full text-left",children:[m.jsx("thead",{children:(0,m.jsxs)("tr",{className:"bg-slate-100 text-slate-600 uppercase text-xs",children:[m.jsx("th",{className:"p-3 font-semibold",children:"Item Description"}),m.jsx("th",{className:"p-3 font-semibold text-center",children:"Qty Received"}),m.jsx("th",{className:"p-3 font-semibold text-right",children:"Unit Cost"}),m.jsx("th",{className:"p-3 font-semibold text-right",children:"Total"})]})}),m.jsx("tbody",{children:r?.items.map(e=>m.jsxs("tr",{className:"border-b",children:[m.jsx("td",{className:"p-3",children:e.productName}),m.jsx("td",{className:"p-3 text-center",children:e.quantity}),m.jsx("td",{className:"p-3 text-right font-mono",children:e.cost.toFixed(2)}),m.jsx("td",{className:"p-3 text-right font-mono font-semibold",children:(e.cost*e.quantity).toFixed(2)})]},e.productId))})]})}),m.jsx("section",{className:"flex justify-end mt-8",children:(0,m.jsxs)("div",{className:"w-full max-w-xs space-y-2",children:[(0,m.jsxs)("div",{className:"flex justify-between text-sm",children:[m.jsx("span",{className:"text-slate-600",children:"Subtotal"}),m.jsx("span",{className:"font-mono text-slate-800",children:e.subtotal.toFixed(2)})]}),(0,m.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,m.jsxs)("span",{className:"text-slate-600",children:["VAT (",n.tax.vatRate,"%)"]}),m.jsx("span",{className:"font-mono text-slate-800",children:e.taxAmount.toFixed(2)})]}),(0,m.jsxs)("div",{className:"flex justify-between text-lg font-bold border-t pt-2 mt-2",children:[m.jsx("span",{className:"text-slate-800",children:"Invoice Total"}),(0,m.jsxs)("span",{className:"font-mono text-slate-800",children:["Ksh ",e.totalAmount.toFixed(2)]})]}),(0,m.jsxs)("div",{className:"flex justify-between text-sm",children:[m.jsx("span",{className:"text-slate-600",children:"Amount Paid"}),(0,m.jsxs)("span",{className:"font-mono text-slate-800",children:["- ",e.paidAmount.toFixed(2)]})]}),(0,m.jsxs)("div",{className:`flex justify-between text-lg font-bold pt-2 mt-2 ${"Paid"===e.status?"text-green-600":"text-red-600"}`,children:[m.jsx("span",{children:"Balance Due"}),(0,m.jsxs)("span",{className:"font-mono",children:["Ksh ",(e.totalAmount-e.paidAmount).toFixed(2)]})]})]})})]})]})),CM=e=>Promise.all(Array.from(e.getElementsByTagName("img")).map(e=>new Promise(t=>{e.complete&&0!==e.naturalHeight?t():(e.onload=()=>t(),e.onerror=()=>{console.warn(`Could not load image for PDF generation: ${e.src}`),t()})}))),CH=({invoice:e,supplier:t,purchaseOrder:r,settings:n,onBack:a})=>{let o=(0,g.useRef)(null),[i,s]=(0,g.useState)(!1),l=async()=>{if(o.current&&!i){s(!0);try{await CM(o.current);let t=await (0,An.default)(o.current,{scale:2,useCORS:!0}),r=t.toDataURL("image/png"),n=new sM("p","mm","a4"),a=n.internal.pageSize.getWidth(),i=t.height*a/t.width;n.addImage(r,"PNG",0,0,a,i),n.save(`Invoice_${e.invoiceNumber}.pdf`)}catch(e){console.error("Failed to generate PDF:",e),alert("Sorry, there was an error generating the PDF. The logo might be causing an issue.")}finally{s(!1)}}};return m.jsx("div",{className:"bg-background dark:bg-dark-background",children:(0,m.jsxs)("div",{className:"p-4 md:p-8 space-y-6",children:[(0,m.jsxs)("div",{className:"flex flex-col md:flex-row gap-4 justify-between items-center",children:[(0,m.jsxs)("button",{onClick:a,className:"flex items-center text-sm font-bold text-primary dark:text-dark-primary hover:text-primary-focus",children:[m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-1",viewBox:"0 0 20 20",fill:"currentColor",children:m.jsx("path",{fillRule:"evenodd",d:"M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z",clipRule:"evenodd"})}),"Back to Accounts Payable"]}),m.jsx("div",{className:"flex flex-wrap items-center justify-center gap-2",children:(0,m.jsxs)("button",{onClick:l,whileTap:{scale:.95},disabled:i,className:"bg-primary text-primary-content font-bold px-3 py-2 rounded-lg hover:bg-primary-focus transition-colors shadow-sm flex items-center text-sm disabled:bg-slate-400",children:[m.jsx(()=>m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-2",viewBox:"0 0 20 20",fill:"currentColor",children:m.jsx("path",{fillRule:"evenodd",d:"M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm3.293-7.707a1 1 0 011.414 0L9 10.586V3a1 1 0 112 0v7.586l1.293-1.293a1 1 0 111.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z",clipRule:"evenodd"})}),{})," ",i?"Downloading...":"Download PDF"]})})]}),m.jsx("div",{id:"pdf-content-wrapper",children:m.jsx(CD,{ref:o,invoice:e,supplier:t,purchaseOrder:r,settings:n})})]})})},CR=({mode:e,recipient:t,customers:r=[],documentId:n,onClose:a,onSend:o})=>{let[i,s]=(0,g.useState)(""),[l,A]=(0,g.useState)(t&&"contact"in t?t.contact:t?.phone||""),[c,d]=(0,g.useState)("");(0,g.useEffect)(()=>{if("receipt"===e&&n&&t){let e="Walk-in Customer"===t.name?"Customer":t.name;s(`Dear ${e},

Thank you for your business. Here is your receipt ID: ${n}.

We appreciate your patronage.`)}else"po"===e&&n&&t&&s(`Dear ${t.name},

Please find our Purchase Order #${n} attached to this message. We look forward to your confirmation.

Thank you.`)},[e,n,t]);let u=(0,g.useMemo)(()=>r.filter(e=>"cust001"!==e.id&&e.phone&&"N/A"!==e.phone&&/^(0[17]|254[17])\d{8}$/.test(e.phone)),[r]);return m.jsx("div",{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50 p-4",children:(0,m.jsxs)("div",{initial:{scale:.9,y:20,opacity:0},animate:{scale:1,y:0,opacity:1},exit:{scale:.9,y:20,opacity:0},transition:{type:"spring",stiffness:300,damping:30},className:"bg-card dark:bg-dark-card rounded-xl shadow-2xl w-full max-w-lg p-8",children:[(0,m.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[m.jsx("h2",{className:"text-2xl font-bold text-foreground dark:text-dark-foreground",children:"receipt"===e?"Send WhatsApp Receipt":"po"===e?"Send PO via WhatsApp":"Send Bulk WhatsApp"}),m.jsx("button",{onClick:a,className:"text-foreground-muted dark:text-dark-foreground-muted hover:text-foreground dark:hover:text-dark-foreground",children:m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,m.jsxs)("div",{className:"space-y-4",children:["receipt"===e||"po"===e?(0,m.jsxs)(m.Fragment,{children:[m.jsx("div",{className:"bg-muted dark:bg-dark-muted p-4 rounded-lg",children:(0,m.jsxs)("p",{className:"text-sm text-foreground-muted dark:text-dark-foreground-muted",children:["Sending to: ",m.jsx("span",{className:"font-bold text-foreground dark:text-dark-foreground",children:t?.name})]})}),(0,m.jsxs)("div",{children:[m.jsx("label",{htmlFor:"phone",className:"block text-sm font-medium text-foreground dark:text-dark-foreground",children:"Recipient Phone Number"}),m.jsx("input",{type:"tel",name:"phone",id:"phone",value:l,onChange:e=>A(e.target.value),required:!0,autoFocus:!0,className:"mt-1 block w-full px-3 py-2 bg-card dark:bg-dark-background border border-border dark:border-dark-border rounded-md shadow-sm focus:outline-none focus:ring-primary dark:focus:ring-dark-primary sm:text-lg"})]})]}):(0,m.jsxs)("div",{className:"bg-muted dark:bg-dark-muted p-4 rounded-lg text-center",children:[(0,m.jsxs)("p",{className:"font-bold text-foreground dark:text-dark-foreground",children:["This message will be sent to ",m.jsx("span",{className:"text-primary dark:text-dark-primary",children:u.length})," customers."]}),m.jsx("p",{className:"text-xs text-foreground-muted dark:text-dark-foreground-muted",children:"Only customers with valid phone numbers (excluding Walk-in) will be targeted."})]}),(0,m.jsxs)("div",{children:[m.jsx("label",{htmlFor:"message",className:"block text-sm font-medium text-foreground dark:text-dark-foreground",children:"Message"}),m.jsx("textarea",{id:"message",name:"message",value:i,onChange:e=>s(e.target.value),rows:"bulk"===e?6:4,placeholder:"bulk"===e?"Type your promotional message here...":"",className:"mt-1 block w-full px-3 py-2 bg-card dark:bg-dark-background border border-border dark:border-dark-border rounded-md shadow-sm focus:outline-none focus:ring-primary dark:focus:ring-dark-primary sm:text-sm"})]}),c&&m.jsx("p",{className:"text-sm text-danger",children:c})]}),(0,m.jsxs)("div",{className:"mt-8 flex justify-end space-x-3",children:[m.jsx("button",{type:"button",onClick:a,whileTap:{scale:.95},className:"bg-muted dark:bg-dark-muted text-foreground dark:text-dark-foreground font-bold px-4 py-2 rounded-lg hover:bg-border dark:hover:bg-dark-border transition-colors",children:"Cancel"}),(0,m.jsxs)("button",{onClick:()=>{if(d(""),"receipt"===e&&t){if(!/^(0[17]|254[17])\d{8}$/.test(l)){d("Please enter a valid Kenyan phone number (e.g., 0712345678).");return}o([{...t,phone:l}],i)}else if("po"===e&&t){if(!/^(0[17]|254[17])\d{8}$/.test(l)){d("Please enter a valid Kenyan phone number (e.g., 0712345678).");return}o([{...t,contact:l}],i)}else if("bulk"===e){if(!i.trim()){d("Message cannot be empty.");return}if(0===u.length){d("No customers with valid phone numbers to send to.");return}o(u,i)}},whileTap:{scale:.95},className:"bg-[#25D366] text-white font-bold px-6 py-2 rounded-lg hover:bg-[#1EAE53] transition-colors shadow-md flex items-center",children:[m.jsx("div",{className:"w-5 h-5 mr-2",children:ox.whatsapp}),"Send Message"]})]})]})})},CK=({type:e,onSelect:t})=>{let r=og[e];return m.jsx("div",{onClick:()=>t(e),className:"p-6 bg-card dark:bg-dark-card rounded-xl cursor-pointer shadow-clay-light dark:shadow-clay-dark border border-border dark:border-dark-border hover:border-primary dark:hover:border-dark-primary transition-all",whileHover:{y:-5,scale:1.02},whileTap:{scale:.98},children:(0,m.jsxs)("div",{className:"flex items-center space-x-4",children:[m.jsx("div",{className:"bg-primary-soft dark:bg-dark-primary-soft text-primary dark:text-dark-primary p-3 rounded-lg",children:r.icon}),(0,m.jsxs)("div",{children:[m.jsx("h3",{className:"text-lg font-bold text-foreground dark:text-white",children:r.name}),m.jsx("p",{className:"text-sm text-foreground-muted dark:text-dark-foreground-muted",children:r.description})]})]})})},CV=({settings:e,onUpdateSettings:t,onSetupComplete:r,showToast:n})=>{let[a,o]=(0,g.useState)(1),i=e=>{t({businessType:e}),o(2)},s=()=>{o(3)},l={hidden:{opacity:0,x:50},visible:{opacity:1,x:0},exit:{opacity:0,x:-50}};return m.jsx("div",{className:"h-screen w-screen auth-background flex items-center justify-center p-4",children:m.jsx("div",{className:"w-full max-w-2xl bg-card dark:bg-dark-card rounded-2xl shadow-clay-dark overflow-hidden border border-dark-border/20",children:m.jsx(Q,{mode:"wait",children:(()=>{switch(a){case 1:return(0,m.jsxs)("div",{variants:l,initial:"hidden",animate:"visible",exit:"exit",className:"p-8",children:[m.jsx("h1",{className:"text-3xl font-bold text-foreground dark:text-white text-center",children:"Welcome to Banduka POS"}),m.jsx("p",{className:"text-foreground-muted dark:text-dark-foreground-muted text-center mt-2 mb-8",children:"Let's get your business set up. First, tell us what kind of business you run."}),m.jsx("div",{className:"space-y-4",children:Object.keys(og).map(e=>m.jsx(CK,{type:e,onSelect:i},e))})]},"step1");case 2:return(0,m.jsxs)("div",{variants:l,initial:"hidden",animate:"visible",exit:"exit",className:"p-8",children:[m.jsx("h2",{className:"text-2xl font-bold text-foreground dark:text-white mb-1",children:"Tell us about your business"}),m.jsx("p",{className:"text-foreground-muted dark:text-dark-foreground-muted mb-6",children:"This information will appear on your receipts and official documents."}),m.jsx(jW,{settings:e,onUpdateSettings:t,showToast:n,isSetupWizard:!0,onWizardNext:s})]},"step2");case 3:return(0,m.jsxs)("div",{variants:l,initial:"hidden",animate:"visible",exit:"exit",className:"p-8 text-center",children:[m.jsx("div",{className:"mx-auto bg-green-100 dark:bg-green-900/50 text-green-600 dark:text-green-400 w-24 h-24 rounded-full flex items-center justify-center mb-6",children:m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-12 w-12",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),m.jsx("h1",{className:"text-3xl font-bold text-foreground dark:text-white",children:"All Set!"}),(0,m.jsxs)("p",{className:"text-foreground-muted dark:text-dark-foreground-muted mt-2 mb-8",children:["Banduka POS is now configured for your ",m.jsx("span",{className:"font-semibold text-primary dark:text-dark-primary",children:e.businessType})," business. You can change these settings anytime."]}),m.jsx("button",{onClick:r,whileTap:{scale:.95},className:"bg-primary text-primary-content font-bold px-8 py-3 rounded-lg hover:bg-primary-focus transition-colors shadow-lg text-lg",children:"Finish & Go to Dashboard"})]},"step3");default:return null}})()})})})},Cq=({onUpdate:e})=>(0,m.jsxs)("div",{layout:!0,initial:{opacity:0,y:50,scale:.3},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:20,scale:.5},transition:{type:"spring",stiffness:500,damping:30},className:"fixed bottom-5 right-5 z-50 flex items-center w-full max-w-sm p-4 text-gray-800 bg-white/50 dark:bg-dark-card/50 backdrop-blur-2xl rounded-lg shadow-lg border border-white/20 dark:border-white/10",role:"alert",children:[(0,m.jsxs)("div",{className:"flex-grow",children:[m.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-100",children:"A new update is available!"}),m.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-300",children:"Refresh the app to get the latest features."})]}),m.jsx("button",{onClick:e,whileTap:{scale:.95},className:"ml-4 px-4 py-2 text-sm font-bold bg-primary text-white rounded-md hover:bg-primary-focus",children:"Refresh"})]}),CG=({title:e,value:t,icon:r})=>(0,m.jsxs)("div",{className:"bg-card dark:bg-dark-card p-4 rounded-xl shadow-sm flex items-center space-x-4 border border-border dark:border-dark-border",children:[m.jsx("div",{className:"p-3 rounded-lg text-primary dark:text-dark-primary bg-muted dark:bg-dark-muted",children:r}),(0,m.jsxs)("div",{children:[m.jsx("p",{className:"text-sm text-foreground-muted dark:text-dark-foreground-muted font-semibold",children:e}),m.jsx("p",{className:"text-xl font-bold text-foreground dark:text-dark-foreground",children:t})]})]}),Cz=(e,t)=>{if(!t)return"Active";let r=new Date(t).getTime()-new Date(e).getTime();if(r<0)return"Invalid";let n=Math.floor(r/36e5),a=Math.floor(r%36e5/6e4);return`${n.toString().padStart(2,"0")}h ${a.toString().padStart(2,"0")}m`},CW=({timeClockEvents:e,users:t,permissions:r,onAddRequest:n,onEditRequest:a,onDeleteRequest:o})=>{let[i,s]=(0,g.useState)("all"),[l,A]=(0,g.useState)(""),[c,d]=(0,g.useState)(""),[u,h]=(0,g.useState)(null),f=r.includes("manage_timesheets"),p=(0,g.useMemo)(()=>{let t=l?new Date(l):null;t&&t.setHours(0,0,0,0);let r=c?new Date(c):null;return r&&r.setHours(23,59,59,999),e.filter(e=>"all"===i||e.userId===i).filter(e=>{let n=new Date(e.clockInTime);return(!t||!(n<t))&&(!r||!(n>r))}).sort((e,t)=>new Date(t.clockInTime).getTime()-new Date(e.clockInTime).getTime())},[e,i,l,c]),{totalHours:x,avgDuration:b,activeStaffCount:y}=(0,g.useMemo)(()=>{let t=0,r=0;return p.forEach(e=>{e.clockOutTime&&(t+=new Date(e.clockOutTime).getTime()-new Date(e.clockInTime).getTime(),r++)}),{totalHours:t/36e5,avgDuration:r>0?t/r/36e5:0,activeStaffCount:e.filter(e=>"clocked-in"===e.status).length}},[p,e]);return(0,m.jsxs)("div",{className:"p-4 md:p-6 bg-muted dark:bg-dark-muted min-h-full",children:[u&&m.jsx(Cn,{title:"Delete Time Entry?",message:`Are you sure you want to delete this time clock entry for ${u.userName}? This cannot be undone.`,onConfirm:()=>{o(u.id),h(null)},onClose:()=>h(null),confirmText:"Delete",isDestructive:!0}),(0,m.jsxs)("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-6",children:[(0,m.jsxs)("div",{children:[m.jsx("h1",{className:"text-2xl font-bold text-foreground dark:text-dark-foreground",children:"Staff Shifts"}),m.jsx("p",{className:"text-sm text-foreground-muted dark:text-dark-foreground-muted",children:"Track staff clock-in/out times and total hours worked"})]}),f&&(0,m.jsxs)("button",{onClick:n,whileTap:{scale:.95},className:"bg-primary text-primary-content font-bold px-4 py-2 rounded-lg flex items-center space-x-2 hover:bg-primary-focus transition-colors mt-4 md:mt-0",children:[m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",children:m.jsx("path",{d:"M12 5v14m-7-7h14"})}),m.jsx("span",{children:"Add Manual Entry"})]})]}),(0,m.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-6",children:[m.jsx(CG,{title:"Total Hours (Filtered)",value:`${x.toFixed(2)} hrs`,icon:ox.timeSheets}),m.jsx(CG,{title:"Shifts Recorded",value:p.length,icon:ox.clipboardList}),m.jsx(CG,{title:"Avg. Duration",value:`${b.toFixed(2)} hrs`,icon:(0,m.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("path",{d:"m21.73 18-8-14a2 2 0 0 0-3.46 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z"}),m.jsx("line",{x1:"12",y1:"9",x2:"12",y2:"13"}),m.jsx("line",{x1:"12",y1:"17",x2:"12.01",y2:"17"})]})}),m.jsx(CG,{title:"Staff Active Now",value:y,icon:ox.users})]}),(0,m.jsxs)("div",{className:"bg-card dark:bg-dark-card rounded-xl shadow-sm border border-border dark:border-dark-border",children:[m.jsx("div",{className:"p-4 border-b border-border dark:border-dark-border",children:(0,m.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 w-full",children:[(0,m.jsxs)("select",{value:i,onChange:e=>s(e.target.value),className:"w-full px-4 py-2 rounded-lg border border-border dark:border-dark-border bg-background dark:bg-dark-background",children:[m.jsx("option",{value:"all",children:"All Staff"}),t.map(e=>m.jsx("option",{value:e.id,children:e.name},e.id))]}),m.jsx("input",{type:"date",value:l,onChange:e=>A(e.target.value),className:"w-full px-4 py-2 rounded-lg border border-border dark:border-dark-border bg-background dark:bg-dark-background"}),m.jsx("input",{type:"date",value:c,onChange:e=>d(e.target.value),className:"w-full px-4 py-2 rounded-lg border border-border dark:border-dark-border bg-background dark:bg-dark-background"})]})}),m.jsx("div",{className:"overflow-x-auto",children:(0,m.jsxs)("table",{className:"w-full text-sm text-left",children:[m.jsx("thead",{className:"text-xs text-foreground-muted dark:text-dark-foreground-muted uppercase bg-muted dark:bg-dark-muted/50",children:(0,m.jsxs)("tr",{children:[m.jsx("th",{className:"py-3 px-4",children:"Staff Member"}),m.jsx("th",{className:"py-3 px-4",children:"Clock In"}),m.jsx("th",{className:"py-3 px-4",children:"Clock Out"}),m.jsx("th",{className:"py-3 px-4",children:"Duration"}),m.jsx("th",{className:"py-3 px-4",children:"Notes"}),m.jsx("th",{className:"py-3 px-4",children:m.jsx("span",{className:"sr-only",children:"Actions"})})]})}),(0,m.jsxs)("tbody",{className:"divide-y divide-border dark:divide-dark-border",children:[p.map(e=>(0,m.jsxs)("tr",{className:"hover:bg-muted dark:hover:bg-dark-muted/50",children:[m.jsx("td",{className:"py-3 px-4 font-semibold text-foreground dark:text-dark-foreground",children:e.userName}),m.jsx("td",{className:"py-3 px-4",children:new Date(e.clockInTime).toLocaleString("en-GB",{dateStyle:"short",timeStyle:"short"})}),m.jsx("td",{className:"py-3 px-4",children:e.clockOutTime?new Date(e.clockOutTime).toLocaleString("en-GB",{dateStyle:"short",timeStyle:"short"}):m.jsx("span",{className:"font-semibold text-primary",children:"Active"})}),m.jsx("td",{className:"py-3 px-4 font-mono font-semibold",children:Cz(e.clockInTime,e.clockOutTime)}),m.jsx("td",{className:"py-3 px-4 text-xs italic text-foreground-muted",children:e.notes}),m.jsx("td",{className:"py-3 px-4 text-right",children:f&&(0,m.jsxs)("div",{className:"space-x-4",children:[m.jsx("button",{onClick:()=>a(e),className:"font-medium text-primary hover:underline",children:"Edit"}),m.jsx("button",{onClick:()=>h(e),className:"font-medium text-danger hover:underline",children:"Delete"})]})})]},e.id)),0===p.length&&m.jsx("tr",{children:m.jsx("td",{colSpan:6,className:"text-center py-8 text-foreground-muted",children:"No entries found for the selected filters."})})]})]})})]})]})},C$=e=>{if(!e)return"";let t=new Date(e),r=6e4*t.getTimezoneOffset();return new Date(t.getTime()-r).toISOString().slice(0,16)},CX=({event:e,users:t,onClose:r,onSave:n})=>{let a=!e,[o,i]=(0,g.useState)(e?.userId||t[0]?.id||""),[s,l]=(0,g.useState)(C$(e?.clockInTime||new Date)),[A,c]=(0,g.useState)(C$(e?.clockOutTime)),[d,u]=(0,g.useState)(e?.notes||"");return m.jsx("div",{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50 p-4",children:(0,m.jsxs)("div",{initial:{scale:.9,y:20,opacity:0},animate:{scale:1,y:0,opacity:1},exit:{scale:.9,y:20,opacity:0},transition:{type:"spring",stiffness:300,damping:30},className:"bg-card dark:bg-dark-card rounded-xl shadow-2xl w-full max-w-lg p-8 border border-border dark:border-dark-border",children:[(0,m.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[m.jsx("h2",{className:"text-2xl font-bold text-foreground dark:text-dark-foreground",children:a?"Add Manual Time Entry":"Edit Time Entry"}),m.jsx("button",{onClick:r,className:"text-foreground-muted dark:text-dark-foreground-muted hover:text-foreground dark:hover:text-dark-foreground",children:"\xd7"})]}),(0,m.jsxs)("form",{onSubmit:t=>{t.preventDefault();let r=new Date(s),a=A?new Date(A):void 0;if(a&&a<r){alert("Clock out time cannot be before clock in time.");return}n({userId:o,clockInTime:r,clockOutTime:a,notes:d},e?.id)},className:"space-y-4",children:[(0,m.jsxs)("div",{children:[m.jsx("label",{htmlFor:"user",className:"block text-sm font-medium text-foreground-muted dark:text-dark-foreground-muted",children:"Staff Member"}),m.jsx("select",{id:"user",value:o,onChange:e=>i(e.target.value),disabled:!a,className:"mt-1 block w-full px-3 py-2 bg-background dark:bg-dark-background border border-border dark:border-dark-border text-foreground dark:text-dark-foreground rounded-md disabled:bg-muted dark:disabled:bg-dark-muted",children:t.map(e=>m.jsx("option",{value:e.id,children:e.name},e.id))})]}),(0,m.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,m.jsxs)("div",{children:[m.jsx("label",{htmlFor:"clockInTime",className:"block text-sm font-medium text-foreground-muted dark:text-dark-foreground-muted",children:"Clock In"}),m.jsx("input",{type:"datetime-local",id:"clockInTime",value:s,onChange:e=>l(e.target.value),required:!0,className:"mt-1 block w-full px-3 py-2 border rounded-md bg-background text-foreground border-border dark:border-dark-border dark:text-dark-foreground"})]}),(0,m.jsxs)("div",{children:[m.jsx("label",{htmlFor:"clockOutTime",className:"block text-sm font-medium text-foreground-muted dark:text-dark-foreground-muted",children:"Clock Out"}),m.jsx("input",{type:"datetime-local",id:"clockOutTime",value:A,onChange:e=>c(e.target.value),className:"mt-1 block w-full px-3 py-2 border rounded-md bg-background text-foreground border-border dark:border-dark-border dark:text-dark-foreground"})]})]}),(0,m.jsxs)("div",{children:[m.jsx("label",{htmlFor:"notes",className:"block text-sm font-medium text-foreground-muted dark:text-dark-foreground-muted",children:"Notes (Optional)"}),m.jsx("textarea",{id:"notes",value:d,onChange:e=>u(e.target.value),rows:2,className:"mt-1 block w-full px-3 py-2 border rounded-md bg-background text-foreground border-border dark:border-dark-border dark:text-dark-foreground",placeholder:"e.g., Forgot to clock out, manual entry by admin."})]}),(0,m.jsxs)("div",{className:"mt-8 flex justify-end space-x-3",children:[m.jsx("button",{type:"button",onClick:r,whileTap:{scale:.95},className:"bg-muted dark:bg-dark-muted text-foreground dark:text-dark-foreground font-bold px-4 py-2 rounded-xl shadow-clay dark:shadow-clay-dark active:shadow-clay-inset dark:active:shadow-clay-dark-inset",children:"Cancel"}),m.jsx("button",{type:"submit",whileTap:{scale:.95},className:"bg-primary text-primary-content font-bold px-6 py-2 rounded-xl shadow-clay dark:shadow-clay-dark active:shadow-clay-inset dark:active:shadow-clay-dark-inset",children:"Save Entry"})]})]})]})})},CY=({sales:e,activeShift:t,onProcessReturn:r,onBack:n})=>{let[a,o]=(0,g.useState)(""),[i,s]=(0,g.useState)(null),[l,A]=(0,g.useState)({}),[c,d]=(0,g.useState)(""),[u,h]=(0,g.useState)("Cash"),[f,p]=(0,g.useState)(""),x=(e,t,r)=>{let n=Math.max(0,Math.min(t,(l[e]||0)+r));A(t=>({...t,[e]:n}))},b=(0,g.useMemo)(()=>i?i.items.filter(e=>l[e.id]>0).map(e=>({...e,quantity:l[e.id]})):[],[i,l]),y=(0,g.useMemo)(()=>b.reduce((e,t)=>e+t.price*t.quantity,0),[b]);return t?m.jsx("div",{className:"p-4 md:p-8 bg-background dark:bg-dark-background",children:(0,m.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,m.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[m.jsx("h1",{className:"text-3xl font-bold text-foreground dark:text-dark-foreground",children:"Process a Return"}),m.jsx("button",{onClick:n,className:"text-sm font-bold text-primary dark:text-dark-primary hover:text-primary-focus",children:" Back to POS"})]}),i?(0,m.jsxs)("div",{initial:{opacity:0},animate:{opacity:1},className:"space-y-6",children:[(0,m.jsxs)("div",{className:"bg-card dark:bg-dark-card p-6 rounded-xl shadow-md",children:[(0,m.jsxs)("h3",{className:"text-lg font-bold",children:["Original Sale: ",m.jsx("span",{className:"font-mono text-primary dark:text-dark-primary",children:i.id})]}),(0,m.jsxs)("p",{className:"text-sm text-foreground-muted dark:text-dark-foreground-muted",children:["Date: ",new Date(i.date).toLocaleString()]}),m.jsx("button",{onClick:()=>s(null),className:"text-sm text-secondary hover:underline mt-2",children:"Find a different receipt"})]}),(0,m.jsxs)("div",{className:"bg-card dark:bg-dark-card rounded-xl shadow-md",children:[m.jsx("h3",{className:"text-lg font-semibold p-4 border-b border-border dark:border-dark-border",children:"Select Items to Return"}),m.jsx("div",{className:"max-h-80 overflow-y-auto",children:m.jsx("ul",{className:"divide-y divide-border dark:divide-dark-border",children:i.items.map(e=>(0,m.jsxs)("li",{className:"p-4 flex justify-between items-center",children:[(0,m.jsxs)("div",{children:[m.jsx("p",{className:"font-bold",children:e.name}),(0,m.jsxs)("p",{className:"text-sm text-foreground-muted dark:text-dark-foreground-muted",children:["Purchased: ",e.quantity," @ Ksh ",e.price.toFixed(2)]})]}),(0,m.jsxs)("div",{className:"flex items-center space-x-3",children:[m.jsx("button",{onClick:()=>x(e.id,e.quantity,-1),className:"w-8 h-8 rounded-full bg-muted dark:bg-dark-muted text-foreground dark:text-dark-foreground",children:"-"}),m.jsx("span",{className:"font-bold w-8 text-center",children:l[e.id]||0}),m.jsx("button",{onClick:()=>x(e.id,e.quantity,1),className:"w-8 h-8 rounded-full bg-muted dark:bg-dark-muted text-foreground dark:text-dark-foreground",children:"+"})]})]},e.id))})})]}),(0,m.jsxs)("div",{className:"bg-card dark:bg-dark-card p-6 rounded-xl shadow-md space-y-4",children:[(0,m.jsxs)("div",{children:[m.jsx("label",{htmlFor:"returnReason",className:"block text-sm font-medium text-foreground dark:text-dark-foreground",children:"Reason for Return"}),m.jsx("input",{type:"text",id:"returnReason",value:c,onChange:e=>d(e.target.value),className:"mt-1 w-full px-4 py-2 rounded-lg border border-border dark:border-dark-border bg-background dark:bg-dark-background",placeholder:"e.g., Damaged item"})]}),(0,m.jsxs)("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-foreground dark:text-dark-foreground mb-2",children:"Refund Method"}),m.jsx("div",{className:"flex gap-4",children:["Cash","Card","M-Pesa"].map(e=>(0,m.jsxs)("label",{className:"flex items-center",children:[m.jsx("input",{type:"radio",name:"refundMethod",value:e,checked:u===e,onChange:()=>h(e),className:"focus:ring-primary h-4 w-4 text-primary"}),m.jsx("span",{className:"ml-2 text-sm",children:e})]},e))})]}),(0,m.jsxs)("div",{className:"text-right border-t border-border dark:border-dark-border pt-4 mt-4",children:[m.jsx("p",{className:"text-foreground-muted dark:text-dark-foreground-muted",children:"Total Refund Amount"}),(0,m.jsxs)("p",{className:"text-3xl font-bold text-danger",children:["- Ksh ",y.toFixed(2)]})]}),f&&m.jsx("p",{className:"text-danger text-sm text-center",children:f}),m.jsx("button",{onClick:()=>{if(i){if(0===b.length){p("Please select at least one item to return.");return}if(!c.trim()){p("A reason for the return is required.");return}r(i,b,c,u)}},className:"w-full mt-4 bg-danger text-white font-bold py-3 rounded-lg text-lg hover:bg-red-700",children:"Process Refund"})]})]}):(0,m.jsxs)("div",{initial:{opacity:0},animate:{opacity:1},className:"bg-card dark:bg-dark-card p-6 rounded-xl shadow-md",children:[m.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Find Original Receipt"}),(0,m.jsxs)("div",{className:"flex gap-2",children:[m.jsx("input",{type:"text",value:a,onChange:e=>o(e.target.value),placeholder:"Enter Receipt ID to find sale...",className:"flex-grow w-full px-4 py-2 rounded-lg border border-border dark:border-dark-border bg-background dark:bg-dark-background focus:outline-none focus:ring-2 focus:ring-primary"}),m.jsx("button",{onClick:()=>{p("");let t=e.find(e=>e.id.toLowerCase()===a.toLowerCase().trim()&&"Return"!==e.type);t?(s(t),A(t.items.reduce((e,t)=>(e[t.id]=0,e),{}))):(p("Sale receipt not found or it is already a return."),s(null))},className:"bg-primary text-primary-content font-bold px-6 py-2 rounded-lg hover:bg-primary-focus",children:"Find"})]}),f&&m.jsx("p",{className:"text-danger text-sm mt-2",children:f})]})]})}):(0,m.jsxs)("div",{className:"p-8 h-full flex flex-col items-center justify-center text-center",children:[m.jsx("h1",{className:"text-2xl font-bold text-foreground dark:text-dark-foreground",children:"Shift Not Active"}),m.jsx("p",{className:"mt-2 text-foreground-muted dark:text-dark-foreground-muted",children:"You must start a shift before you can process a return."}),m.jsx("button",{onClick:n,className:"mt-6 bg-primary text-primary-content font-bold py-2 px-6 rounded-lg",children:"Back to POS"})]})};(function(e){e.STRING="string",e.NUMBER="number",e.INTEGER="integer",e.BOOLEAN="boolean",e.ARRAY="array",e.OBJECT="object"})(n||(n={})),function(e){e.LANGUAGE_UNSPECIFIED="language_unspecified",e.PYTHON="python"}(a||(a={})),function(e){e.OUTCOME_UNSPECIFIED="outcome_unspecified",e.OUTCOME_OK="outcome_ok",e.OUTCOME_FAILED="outcome_failed",e.OUTCOME_DEADLINE_EXCEEDED="outcome_deadline_exceeded"}(o||(o={}));let CJ=["user","model","function","system"];(function(e){e.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",e.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",e.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",e.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",e.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",e.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY"})(i||(i={})),function(e){e.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",e.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",e.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",e.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",e.BLOCK_NONE="BLOCK_NONE"}(s||(s={})),function(e){e.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",e.NEGLIGIBLE="NEGLIGIBLE",e.LOW="LOW",e.MEDIUM="MEDIUM",e.HIGH="HIGH"}(l||(l={})),function(e){e.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",e.SAFETY="SAFETY",e.OTHER="OTHER"}(A||(A={})),function(e){e.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",e.STOP="STOP",e.MAX_TOKENS="MAX_TOKENS",e.SAFETY="SAFETY",e.RECITATION="RECITATION",e.LANGUAGE="LANGUAGE",e.BLOCKLIST="BLOCKLIST",e.PROHIBITED_CONTENT="PROHIBITED_CONTENT",e.SPII="SPII",e.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",e.OTHER="OTHER"}(c||(c={})),function(e){e.TASK_TYPE_UNSPECIFIED="TASK_TYPE_UNSPECIFIED",e.RETRIEVAL_QUERY="RETRIEVAL_QUERY",e.RETRIEVAL_DOCUMENT="RETRIEVAL_DOCUMENT",e.SEMANTIC_SIMILARITY="SEMANTIC_SIMILARITY",e.CLASSIFICATION="CLASSIFICATION",e.CLUSTERING="CLUSTERING"}(d||(d={})),function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.AUTO="AUTO",e.ANY="ANY",e.NONE="NONE"}(u||(u={})),function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.MODE_DYNAMIC="MODE_DYNAMIC"}(h||(h={}));class CZ extends Error{constructor(e){super(`[GoogleGenerativeAI Error]: ${e}`)}}class C0 extends CZ{constructor(e,t){super(e),this.response=t}}class C1 extends CZ{constructor(e,t,r,n){super(e),this.status=t,this.statusText=r,this.errorDetails=n}}class C2 extends CZ{}class C5 extends CZ{}!function(e){e.GENERATE_CONTENT="generateContent",e.STREAM_GENERATE_CONTENT="streamGenerateContent",e.COUNT_TOKENS="countTokens",e.EMBED_CONTENT="embedContent",e.BATCH_EMBED_CONTENTS="batchEmbedContents"}(f||(f={}));class C4{constructor(e,t,r,n,a){this.model=e,this.task=t,this.apiKey=r,this.stream=n,this.requestOptions=a}toString(){var e,t;let r=(null===(e=this.requestOptions)||void 0===e?void 0:e.apiVersion)||"v1beta",n=(null===(t=this.requestOptions)||void 0===t?void 0:t.baseUrl)||"https://generativelanguage.googleapis.com",a=`${n}/${r}/${this.model}:${this.task}`;return this.stream&&(a+="?alt=sse"),a}}async function C3(e){var t;let r=new Headers;r.append("Content-Type","application/json"),r.append("x-goog-api-client",function(e){let t=[];return(null==e?void 0:e.apiClient)&&t.push(e.apiClient),t.push("genai-js/0.24.1"),t.join(" ")}(e.requestOptions)),r.append("x-goog-api-key",e.apiKey);let n=null===(t=e.requestOptions)||void 0===t?void 0:t.customHeaders;if(n){if(!(n instanceof Headers))try{n=new Headers(n)}catch(e){throw new C2(`unable to convert customHeaders value ${JSON.stringify(n)} to Headers: ${e.message}`)}for(let[e,t]of n.entries()){if("x-goog-api-key"===e)throw new C2(`Cannot set reserved header name ${e}`);if("x-goog-api-client"===e)throw new C2(`Header name ${e} can only be set using the apiClient field`);r.append(e,t)}}return r}async function C6(e,t,r,n,a,o){let i=new C4(e,t,r,n,o);return{url:i.toString(),fetchOptions:Object.assign(Object.assign({},function(e){let t={};if((null==e?void 0:e.signal)!==void 0||(null==e?void 0:e.timeout)>=0){let r=new AbortController;(null==e?void 0:e.timeout)>=0&&setTimeout(()=>r.abort(),e.timeout),(null==e?void 0:e.signal)&&e.signal.addEventListener("abort",()=>{r.abort()}),t.signal=r.signal}return t}(o)),{method:"POST",headers:await C3(i),body:a})}}async function C8(e,t,r,n,a,o={},i=fetch){let{url:s,fetchOptions:l}=await C6(e,t,r,n,a,o);return C7(s,l,i)}async function C7(e,t,r=fetch){let n;try{n=await r(e,t)}catch(t){(function(e,t){let r=e;throw"AbortError"===r.name?(r=new C5(`Request aborted when fetching ${t.toString()}: ${e.message}`)).stack=e.stack:e instanceof C1||e instanceof C2||((r=new CZ(`Error fetching from ${t.toString()}: ${e.message}`)).stack=e.stack),r})(t,e)}return n.ok||await C9(n,e),n}async function C9(e,t){let r,n="";try{let t=await e.json();n=t.error.message,t.error.details&&(n+=` ${JSON.stringify(t.error.details)}`,r=t.error.details)}catch(e){}throw new C1(`Error fetching from ${t.toString()}: [${e.status} ${e.statusText}] ${n}`,e.status,e.statusText,r)}function Ne(e){return e.text=()=>{if(e.candidates&&e.candidates.length>0){if(e.candidates.length>1&&console.warn(`This response had ${e.candidates.length} candidates. Returning text from the first candidate only. Access response.candidates directly to use the other candidates.`),Nn(e.candidates[0]))throw new C0(`${Na(e)}`,e);return function(e){var t,r,n,a;let o=[];if(null===(r=null===(t=e.candidates)||void 0===t?void 0:t[0].content)||void 0===r?void 0:r.parts)for(let t of null===(a=null===(n=e.candidates)||void 0===n?void 0:n[0].content)||void 0===a?void 0:a.parts)t.text&&o.push(t.text),t.executableCode&&o.push("\n```"+t.executableCode.language+"\n"+t.executableCode.code+"\n```\n"),t.codeExecutionResult&&o.push("\n```\n"+t.codeExecutionResult.output+"\n```\n");return o.length>0?o.join(""):""}(e)}if(e.promptFeedback)throw new C0(`Text not available. ${Na(e)}`,e);return""},e.functionCall=()=>{if(e.candidates&&e.candidates.length>0){if(e.candidates.length>1&&console.warn(`This response had ${e.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),Nn(e.candidates[0]))throw new C0(`${Na(e)}`,e);return console.warn("response.functionCall() is deprecated. Use response.functionCalls() instead."),Nt(e)[0]}if(e.promptFeedback)throw new C0(`Function call not available. ${Na(e)}`,e)},e.functionCalls=()=>{if(e.candidates&&e.candidates.length>0){if(e.candidates.length>1&&console.warn(`This response had ${e.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),Nn(e.candidates[0]))throw new C0(`${Na(e)}`,e);return Nt(e)}if(e.promptFeedback)throw new C0(`Function call not available. ${Na(e)}`,e)},e}function Nt(e){var t,r,n,a;let o=[];if(null===(r=null===(t=e.candidates)||void 0===t?void 0:t[0].content)||void 0===r?void 0:r.parts)for(let t of null===(a=null===(n=e.candidates)||void 0===n?void 0:n[0].content)||void 0===a?void 0:a.parts)t.functionCall&&o.push(t.functionCall);return o.length>0?o:void 0}let Nr=[c.RECITATION,c.SAFETY,c.LANGUAGE];function Nn(e){return!!e.finishReason&&Nr.includes(e.finishReason)}function Na(e){var t,r,n;let a="";if((!e.candidates||0===e.candidates.length)&&e.promptFeedback)a+="Response was blocked",(null===(t=e.promptFeedback)||void 0===t?void 0:t.blockReason)&&(a+=` due to ${e.promptFeedback.blockReason}`),(null===(r=e.promptFeedback)||void 0===r?void 0:r.blockReasonMessage)&&(a+=`: ${e.promptFeedback.blockReasonMessage}`);else if(null===(n=e.candidates)||void 0===n?void 0:n[0]){let t=e.candidates[0];Nn(t)&&(a+=`Candidate was blocked due to ${t.finishReason}`,t.finishMessage&&(a+=`: ${t.finishMessage}`))}return a}function No(e){return this instanceof No?(this.v=e,this):new No(e)}"function"==typeof SuppressedError&&SuppressedError;let Ni=/^data\: (.*)(?:\n\n|\r\r|\r\n\r\n)/;async function Ns(e){let t=[],r=e.getReader();for(;;){let{done:e,value:n}=await r.read();if(e)return Ne(function(e){let t=e[e.length-1],r={promptFeedback:null==t?void 0:t.promptFeedback};for(let t of e){if(t.candidates){let e=0;for(let n of t.candidates)if(r.candidates||(r.candidates=[]),r.candidates[e]||(r.candidates[e]={index:e}),r.candidates[e].citationMetadata=n.citationMetadata,r.candidates[e].groundingMetadata=n.groundingMetadata,r.candidates[e].finishReason=n.finishReason,r.candidates[e].finishMessage=n.finishMessage,r.candidates[e].safetyRatings=n.safetyRatings,n.content&&n.content.parts){r.candidates[e].content||(r.candidates[e].content={role:n.content.role||"user",parts:[]});let t={};for(let a of n.content.parts)a.text&&(t.text=a.text),a.functionCall&&(t.functionCall=a.functionCall),a.executableCode&&(t.executableCode=a.executableCode),a.codeExecutionResult&&(t.codeExecutionResult=a.codeExecutionResult),0===Object.keys(t).length&&(t.text=""),r.candidates[e].content.parts.push(t)}e++}t.usageMetadata&&(r.usageMetadata=t.usageMetadata)}return r}(t));t.push(n)}}async function Nl(e,t,r,n){return function(e){let[t,r]=(function(e){let t=e.getReader();return new ReadableStream({start(e){let r="";return function n(){return t.read().then(({value:t,done:a})=>{let o;if(a){if(r.trim()){e.error(new CZ("Failed to parse stream"));return}e.close();return}let i=(r+=t).match(Ni);for(;i;){try{o=JSON.parse(i[1])}catch(t){e.error(new CZ(`Error parsing JSON response: "${i[1]}"`));return}e.enqueue(o),i=(r=r.substring(i[0].length)).match(Ni)}return n()}).catch(e=>{let t=e;throw t.stack=e.stack,t="AbortError"===t.name?new C5("Request aborted when reading from the stream"):new CZ("Error reading from the stream")})}()}})})(e.body.pipeThrough(new TextDecoderStream("utf8",{fatal:!0}))).tee();return{stream:function(e){return function(e,t,r){if(!Symbol.asyncIterator)throw TypeError("Symbol.asyncIterator is not defined.");var n,a=r.apply(e,t||[]),o=[];return n={},i("next"),i("throw"),i("return"),n[Symbol.asyncIterator]=function(){return this},n;function i(e){a[e]&&(n[e]=function(t){return new Promise(function(r,n){o.push([e,t,r,n])>1||s(e,t)})})}function s(e,t){try{var r;(r=a[e](t)).value instanceof No?Promise.resolve(r.value.v).then(l,A):c(o[0][2],r)}catch(e){c(o[0][3],e)}}function l(e){s("next",e)}function A(e){s("throw",e)}function c(e,t){e(t),o.shift(),o.length&&s(o[0][0],o[0][1])}}(this,arguments,function*(){let t=e.getReader();for(;;){let{value:e,done:r}=yield No(t.read());if(r)break;yield yield No(Ne(e))}})}(t),response:Ns(r)}}(await C8(t,f.STREAM_GENERATE_CONTENT,e,!0,JSON.stringify(r),n))}async function NA(e,t,r,n){let a=await C8(t,f.GENERATE_CONTENT,e,!1,JSON.stringify(r),n);return{response:Ne(await a.json())}}function Nc(e){if(null!=e){if("string"==typeof e)return{role:"system",parts:[{text:e}]};if(e.text)return{role:"system",parts:[e]};if(e.parts)return e.role?e:{role:"system",parts:e.parts}}}function Nd(e){let t=[];if("string"==typeof e)t=[{text:e}];else for(let r of e)"string"==typeof r?t.push({text:r}):t.push(r);return function(e){let t={role:"user",parts:[]},r={role:"function",parts:[]},n=!1,a=!1;for(let o of e)"functionResponse"in o?(r.parts.push(o),a=!0):(t.parts.push(o),n=!0);if(n&&a)throw new CZ("Within a single message, FunctionResponse cannot be mixed with other type of part in the request for sending chat message.");if(!n&&!a)throw new CZ("No content is provided for sending chat message.");return n?t:r}(t)}function Nu(e){let t;return t=e.contents?e:{contents:[Nd(e)]},e.systemInstruction&&(t.systemInstruction=Nc(e.systemInstruction)),t}let Nh=["text","inlineData","functionCall","functionResponse","executableCode","codeExecutionResult"],Nf={user:["text","inlineData"],function:["functionResponse"],model:["text","functionCall","executableCode","codeExecutionResult"],system:["text"]};function Np(e){var t;if(void 0===e.candidates||0===e.candidates.length)return!1;let r=null===(t=e.candidates[0])||void 0===t?void 0:t.content;if(void 0===r||void 0===r.parts||0===r.parts.length)return!1;for(let e of r.parts)if(void 0===e||0===Object.keys(e).length||void 0!==e.text&&""===e.text)return!1;return!0}let Nm="SILENT_ERROR";class Ng{constructor(e,t,r,n={}){this.model=t,this.params=r,this._requestOptions=n,this._history=[],this._sendPromise=Promise.resolve(),this._apiKey=e,(null==r?void 0:r.history)&&(function(e){let t=!1;for(let r of e){let{role:e,parts:n}=r;if(!t&&"user"!==e)throw new CZ(`First content should be with role 'user', got ${e}`);if(!CJ.includes(e))throw new CZ(`Each item should include role field. Got ${e} but valid roles are: ${JSON.stringify(CJ)}`);if(!Array.isArray(n))throw new CZ("Content should have 'parts' property with an array of Parts");if(0===n.length)throw new CZ("Each Content should have at least one part");let a={text:0,inlineData:0,functionCall:0,functionResponse:0,fileData:0,executableCode:0,codeExecutionResult:0};for(let e of n)for(let t of Nh)t in e&&(a[t]+=1);let o=Nf[e];for(let t of Nh)if(!o.includes(t)&&a[t]>0)throw new CZ(`Content with role '${e}' can't contain '${t}' part`);t=!0}}(r.history),this._history=r.history)}async getHistory(){return await this._sendPromise,this._history}async sendMessage(e,t={}){var r,n,a,o,i,s;let l;await this._sendPromise;let A=Nd(e),c={safetySettings:null===(r=this.params)||void 0===r?void 0:r.safetySettings,generationConfig:null===(n=this.params)||void 0===n?void 0:n.generationConfig,tools:null===(a=this.params)||void 0===a?void 0:a.tools,toolConfig:null===(o=this.params)||void 0===o?void 0:o.toolConfig,systemInstruction:null===(i=this.params)||void 0===i?void 0:i.systemInstruction,cachedContent:null===(s=this.params)||void 0===s?void 0:s.cachedContent,contents:[...this._history,A]},d=Object.assign(Object.assign({},this._requestOptions),t);return this._sendPromise=this._sendPromise.then(()=>NA(this._apiKey,this.model,c,d)).then(e=>{var t;if(Np(e.response)){this._history.push(A);let r=Object.assign({parts:[],role:"model"},null===(t=e.response.candidates)||void 0===t?void 0:t[0].content);this._history.push(r)}else{let t=Na(e.response);t&&console.warn(`sendMessage() was unsuccessful. ${t}. Inspect response object for details.`)}l=e}).catch(e=>{throw this._sendPromise=Promise.resolve(),e}),await this._sendPromise,l}async sendMessageStream(e,t={}){var r,n,a,o,i,s;await this._sendPromise;let l=Nd(e),A={safetySettings:null===(r=this.params)||void 0===r?void 0:r.safetySettings,generationConfig:null===(n=this.params)||void 0===n?void 0:n.generationConfig,tools:null===(a=this.params)||void 0===a?void 0:a.tools,toolConfig:null===(o=this.params)||void 0===o?void 0:o.toolConfig,systemInstruction:null===(i=this.params)||void 0===i?void 0:i.systemInstruction,cachedContent:null===(s=this.params)||void 0===s?void 0:s.cachedContent,contents:[...this._history,l]},c=Object.assign(Object.assign({},this._requestOptions),t),d=Nl(this._apiKey,this.model,A,c);return this._sendPromise=this._sendPromise.then(()=>d).catch(e=>{throw Error(Nm)}).then(e=>e.response).then(e=>{if(Np(e)){this._history.push(l);let t=Object.assign({},e.candidates[0].content);t.role||(t.role="model"),this._history.push(t)}else{let t=Na(e);t&&console.warn(`sendMessageStream() was unsuccessful. ${t}. Inspect response object for details.`)}}).catch(e=>{e.message!==Nm&&console.error(e)}),d}}async function Nx(e,t,r,n){return(await C8(t,f.COUNT_TOKENS,e,!1,JSON.stringify(r),n)).json()}async function Nb(e,t,r,n){return(await C8(t,f.EMBED_CONTENT,e,!1,JSON.stringify(r),n)).json()}async function Ny(e,t,r,n){let a=r.requests.map(e=>Object.assign(Object.assign({},e),{model:t}));return(await C8(t,f.BATCH_EMBED_CONTENTS,e,!1,JSON.stringify({requests:a}),n)).json()}class Nv{constructor(e,t,r={}){this.apiKey=e,this._requestOptions=r,t.model.includes("/")?this.model=t.model:this.model=`models/${t.model}`,this.generationConfig=t.generationConfig||{},this.safetySettings=t.safetySettings||[],this.tools=t.tools,this.toolConfig=t.toolConfig,this.systemInstruction=Nc(t.systemInstruction),this.cachedContent=t.cachedContent}async generateContent(e,t={}){var r;let n=Nu(e),a=Object.assign(Object.assign({},this._requestOptions),t);return NA(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:null===(r=this.cachedContent)||void 0===r?void 0:r.name},n),a)}async generateContentStream(e,t={}){var r;let n=Nu(e),a=Object.assign(Object.assign({},this._requestOptions),t);return Nl(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:null===(r=this.cachedContent)||void 0===r?void 0:r.name},n),a)}startChat(e){var t;return new Ng(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:null===(t=this.cachedContent)||void 0===t?void 0:t.name},e),this._requestOptions)}async countTokens(e,t={}){let r=function(e,t){var r;let n={model:null==t?void 0:t.model,generationConfig:null==t?void 0:t.generationConfig,safetySettings:null==t?void 0:t.safetySettings,tools:null==t?void 0:t.tools,toolConfig:null==t?void 0:t.toolConfig,systemInstruction:null==t?void 0:t.systemInstruction,cachedContent:null===(r=null==t?void 0:t.cachedContent)||void 0===r?void 0:r.name,contents:[]},a=null!=e.generateContentRequest;if(e.contents){if(a)throw new C2("CountTokensRequest must have one of contents or generateContentRequest, not both.");n.contents=e.contents}else if(a)n=Object.assign(Object.assign({},n),e.generateContentRequest);else{let t=Nd(e);n.contents=[t]}return{generateContentRequest:n}}(e,{model:this.model,generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:this.cachedContent}),n=Object.assign(Object.assign({},this._requestOptions),t);return Nx(this.apiKey,this.model,r,n)}async embedContent(e,t={}){let r="string"==typeof e||Array.isArray(e)?{content:Nd(e)}:e,n=Object.assign(Object.assign({},this._requestOptions),t);return Nb(this.apiKey,this.model,r,n)}async batchEmbedContents(e,t={}){let r=Object.assign(Object.assign({},this._requestOptions),t);return Ny(this.apiKey,this.model,e,r)}}class Nw{constructor(e){this.apiKey=e}getGenerativeModel(e,t){if(!e.model)throw new CZ("Must provide a model name. Example: genai.getGenerativeModel({ model: 'my-model-name' })");return new Nv(this.apiKey,e,t)}getGenerativeModelFromCachedContent(e,t,r){if(!e.name)throw new C2("Cached content must contain a `name` field.");if(!e.model)throw new C2("Cached content must contain a `model` field.");for(let r of["model","systemInstruction"])if((null==t?void 0:t[r])&&e[r]&&(null==t?void 0:t[r])!==e[r]){if("model"===r&&(t.model.startsWith("models/")?t.model.replace("models/",""):t.model)===(e.model.startsWith("models/")?e.model.replace("models/",""):e.model))continue;throw new C2(`Different value for "${r}" specified in modelParams (${t[r]}) and cachedContent (${e[r]})`)}let n=Object.assign(Object.assign({},t),{model:e.model,tools:e.tools,toolConfig:e.toolConfig,systemInstruction:e.systemInstruction,cachedContent:e});return new Nv(this.apiKey,n,r)}}let Nk=({activeShift:e,onProcessExpense:t,onBack:r,sales:n,expenses:a,accountingTransactions:o,chartOfAccounts:i,settings:s,currentUser:l})=>{let[A,c]=(0,g.useState)(""),[d,u]=(0,g.useState)(""),[h,f]=(0,g.useState)(""),[p,x]=(0,g.useState)("Miscellaneous"),[b,y]=(0,g.useState)("Cash Drawer"),[v,w]=(0,g.useState)(null),[k,B]=(0,g.useState)(!1),[j,C]=(0,g.useState)(""),N=(0,g.useMemo)(()=>new Nw(process.env.API_KEY),[]),S=(0,g.useMemo)(()=>{let t=n.filter(t=>e?.salesIds.includes(t.id)),r=t.reduce((e,t)=>e+(t.payments.find(e=>"Cash"===e.method)?.amount||0),0),l=t.reduce((e,t)=>e+t.change,0),A=a.filter(t=>e?.expenseIds?.includes(t.id)).reduce((e,t)=>e+t.amount,0),c=(e?.startingFloat||0)+r-l-A,d=e=>{let t=i.find(t=>t.id===e);if(!t)return 0;let r=o.flatMap(e=>e.entries).filter(t=>t.accountId===e).reduce((e,t)=>e+t.debit-t.credit,0);return["Assets","Expenses"].includes(t.type)?r:-r};return{"Cash Drawer":c,"M-Pesa":d(s.accounting.defaultMpesaAccountId),Bank:d(s.accounting.defaultBankAccountId)}},[e,n,a,o,i,s]),F=async()=>{if(!d.trim()){C("Please enter a description first to get a suggestion.");return}B(!0),C("");let e=`
            Given the following list of expense categories:
            ${op.join(", ")}

            Based on the expense description provided below, which single category is the best fit? Respond with only the category name.

            Description: "${d}"
        `;try{let t=N.getGenerativeModel({model:"gemini-pro"}),r=await t.generateContent(e),n=(await r.response).text().trim();op.includes(n)&&x(n)}catch(e){console.error("AI Suggestion Error:",e),C("Could not get AI suggestion.")}finally{B(!1)}},E="number"==typeof A&&A>S[b],O=({name:e,balance:t})=>(0,m.jsxs)("button",{type:"button",onClick:()=>y(e),className:`p-3 rounded-lg text-left transition-all w-full ${b===e?"bg-primary/20 border-primary border-2":"bg-background dark:bg-dark-muted border border-border dark:border-dark-border"}`,whileTap:{scale:.98},children:[m.jsx("p",{className:"font-bold text-foreground dark:text-dark-foreground",children:e}),(0,m.jsxs)("p",{className:"text-sm text-foreground-muted dark:text-dark-foreground-muted",children:["Available: ",m.jsx("span",{className:"font-mono",children:t.toFixed(2)})]})]});return m.jsx("div",{className:"p-4 md:p-8 h-full overflow-y-auto bg-background dark:bg-dark-background flex items-center justify-center",children:(0,m.jsxs)("div",{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"w-full max-w-lg bg-card dark:bg-dark-card p-8 rounded-xl shadow-xl",children:[(0,m.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[m.jsx("h1",{className:"text-3xl font-bold text-foreground dark:text-dark-foreground",children:"Record an Expense"}),m.jsx("button",{onClick:r,className:"text-sm font-bold text-primary dark:text-dark-primary hover:text-primary-focus",children:" Cancel"})]}),(0,m.jsxs)("form",{onSubmit:r=>{if(r.preventDefault(),C(""),"number"!=typeof A||A<=0){C("Please enter a valid positive amount.");return}if(!d.trim()){C("A description for the expense is required.");return}if("Cash Drawer"===b&&!e){C("An active shift is required to make an expense from the cash drawer.");return}t(A,d,p,b,h.trim()||void 0,v||void 0)},className:"space-y-4",children:[(0,m.jsxs)("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-foreground dark:text-dark-foreground mb-2",children:"Payment Method"}),(0,m.jsxs)("div",{className:"grid grid-cols-3 gap-2",children:[m.jsx(O,{name:"Cash Drawer",balance:S["Cash Drawer"]}),m.jsx(O,{name:"M-Pesa",balance:S["M-Pesa"]}),m.jsx(O,{name:"Bank",balance:S.Bank})]})]}),(0,m.jsxs)("div",{children:[m.jsx("label",{htmlFor:"amount",className:"block text-sm font-medium text-foreground dark:text-dark-foreground",children:"Amount (Ksh)"}),m.jsx("input",{type:"number",id:"amount",value:A,onChange:e=>c(""===e.target.value?"":parseFloat(e.target.value)),min:"0.01",step:"0.01",required:!0,autoFocus:!0,className:`mt-1 w-full px-4 py-2 rounded-lg border text-xl font-bold bg-background dark:bg-dark-background ${E?"border-danger":"border-border dark:border-dark-border"}`}),E&&(0,m.jsxs)("p",{className:"text-xs text-danger mt-1",children:["Amount exceeds available balance in ",b,"."]})]}),(0,m.jsxs)("div",{children:[m.jsx("label",{htmlFor:"reason",className:"block text-sm font-medium text-foreground dark:text-dark-foreground",children:"Notes / Description"}),m.jsx("input",{type:"text",id:"reason",value:d,onChange:e=>u(e.target.value),required:!0,className:"mt-1 w-full px-4 py-2 rounded-lg border border-border dark:border-dark-border bg-background dark:bg-dark-background",placeholder:"e.g., Office supplies, Lunch for staff"})]}),(0,m.jsxs)("div",{children:[m.jsx("label",{htmlFor:"category",className:"block text-sm font-medium text-foreground dark:text-dark-foreground",children:"Category"}),(0,m.jsxs)("div",{className:"flex items-center gap-2 mt-1",children:[m.jsx("select",{id:"category",value:p,onChange:e=>x(e.target.value),className:"w-full px-4 py-2 rounded-lg border border-border dark:border-dark-border bg-background dark:bg-dark-background",children:op.map(e=>m.jsx("option",{value:e,children:e},e))}),m.jsx("button",{type:"button",onClick:F,disabled:k,whileTap:{scale:.95},className:"px-3 py-2 bg-secondary text-white rounded-lg text-sm whitespace-nowrap disabled:bg-slate-400",children:k?"...":"AI "})]})]}),(0,m.jsxs)("div",{children:[m.jsx("label",{htmlFor:"payee",className:"block text-sm font-medium text-foreground dark:text-dark-foreground",children:"Payee / Vendor Name (Optional)"}),m.jsx("input",{type:"text",id:"payee",value:h,onChange:e=>f(e.target.value),className:"mt-1 w-full px-4 py-2 rounded-lg border border-border dark:border-dark-border bg-background dark:bg-dark-background",placeholder:"e.g., Naivas Supermarket"})]}),(0,m.jsxs)("div",{children:[m.jsx("label",{htmlFor:"receipt",className:"block text-sm font-medium text-foreground dark:text-dark-foreground",children:"Upload Receipt (Optional)"}),m.jsx("input",{type:"file",id:"receipt",onChange:e=>{let t=e.target.files?.[0];if(t){let e=new FileReader;e.onloadend=()=>{w(e.result)},e.readAsDataURL(t)}},accept:"image/*",className:"mt-1 block w-full text-sm text-foreground-muted dark:text-dark-foreground-muted file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-primary/10 file:text-primary dark:file:bg-dark-primary/20 dark:file:text-dark-primary"}),v&&m.jsx("img",{src:v,alt:"Receipt preview",className:"mt-2 rounded-lg max-h-40 object-contain"})]}),j&&m.jsx("p",{className:"text-danger text-sm text-center",children:j}),m.jsx("div",{className:"pt-4",children:m.jsx("button",{type:"submit",className:"w-full bg-primary text-primary-content font-bold py-3 rounded-lg text-lg hover:bg-primary-focus",children:"Record Expense"})})]})]})})},NB=({expenses:e,onViewExpenseRequest:t,setCurrentView:r})=>{let[n,a]=(0,g.useState)(""),[o,i]=(0,g.useState)(1),[s,l]=(0,g.useState)(""),[A,c]=(0,g.useState)(""),d=(0,g.useMemo)(()=>{let t=s?new Date(s):null;t&&t.setHours(0,0,0,0);let r=A?new Date(A):null;return r&&r.setHours(23,59,59,999),e.filter(e=>{let n=new Date(e.date);return(!t||!(n<t))&&(!r||!(n>r))}).filter(e=>{let t=n.toLowerCase();return e.id.toLowerCase().includes(t)||e.reason.toLowerCase().includes(t)||e.payee&&e.payee.toLowerCase().includes(t)||e.cashierName.toLowerCase().includes(t)}).sort((e,t)=>new Date(t.date).getTime()-new Date(e.date).getTime())},[e,n,s,A]),u=(0,g.useMemo)(()=>{let e=(o-1)*15;return d.slice(e,e+15)},[d,o]),h=Math.ceil(d.length/15),f=(0,g.useMemo)(()=>d.reduce((e,t)=>e+t.amount,0),[d]);return(0,m.jsxs)("div",{className:"p-4 md:p-8 h-full overflow-y-auto",children:[(0,m.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[m.jsx("h1",{className:"text-4xl font-bold text-foreground dark:text-dark-foreground",children:"Expenditure Management"}),(0,m.jsxs)("button",{onClick:()=>r(sf.NewExpense),whileTap:{scale:.95},className:"bg-primary text-primary-content font-bold px-4 py-2 rounded-xl transition-shadow shadow-clay dark:shadow-clay-dark active:shadow-clay-inset dark:active:shadow-clay-dark-inset flex items-center",children:[m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"New Expense"]})]}),(0,m.jsxs)("div",{className:"my-6 p-4 bg-card dark:bg-dark-card rounded-xl shadow-sm border border-border dark:border-dark-border space-y-4",children:[(0,m.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[m.jsx("input",{type:"text",placeholder:"Search by ID, Reason, Payee...",className:"w-full px-4 py-2 rounded-lg border border-border dark:border-dark-border bg-card dark:bg-dark-card focus:outline-none focus:ring-2 focus:ring-primary",value:n,onChange:e=>a(e.target.value)}),m.jsx("input",{type:"date",value:s,onChange:e=>l(e.target.value),className:"w-full px-4 py-2 rounded-lg border border-border dark:border-dark-border bg-card dark:bg-dark-card"}),m.jsx("input",{type:"date",value:A,onChange:e=>c(e.target.value),className:"w-full px-4 py-2 rounded-lg border border-border dark:border-dark-border bg-card dark:bg-dark-card"})]}),(0,m.jsxs)("div",{className:"text-center pt-4 border-t border-border dark:border-dark-border",children:[m.jsx("p",{className:"text-sm text-foreground-muted dark:text-dark-foreground-muted font-bold",children:"Total Expenses (Filtered)"}),(0,m.jsxs)("p",{className:"text-2xl font-bold text-danger",children:["Ksh ",f.toFixed(2)]})]})]}),(0,m.jsxs)("div",{className:"bg-card dark:bg-dark-card rounded-xl shadow-sm border border-border dark:border-dark-border overflow-x-auto",children:[(0,m.jsxs)("table",{className:"w-full text-sm text-left text-foreground-muted dark:text-dark-foreground-muted",children:[m.jsx("thead",{className:"text-xs text-foreground dark:text-dark-foreground uppercase bg-muted dark:bg-dark-muted font-semibold",children:(0,m.jsxs)("tr",{children:[m.jsx("th",{scope:"col",className:"px-6 py-4",children:"Expense ID"}),m.jsx("th",{scope:"col",className:"px-6 py-4",children:"Date"}),m.jsx("th",{scope:"col",className:"px-6 py-4",children:"Reason"}),m.jsx("th",{scope:"col",className:"px-6 py-4",children:"Paid To"}),m.jsx("th",{scope:"col",className:"px-6 py-4",children:"Cashier"}),m.jsx("th",{scope:"col",className:"px-6 py-4 text-right",children:"Amount (Ksh)"}),m.jsx("th",{scope:"col",className:"px-6 py-4",children:m.jsx("span",{className:"sr-only",children:"Actions"})})]})}),(0,m.jsxs)("tbody",{className:"divide-y divide-border dark:divide-dark-border",children:[u.map(e=>(0,m.jsxs)("tr",{className:"hover:bg-muted dark:hover:bg-dark-muted cursor-pointer",onClick:()=>t(e),children:[m.jsx("td",{className:"px-6 py-4 font-bold text-foreground dark:text-dark-foreground font-mono text-xs",children:e.id}),m.jsx("td",{className:"px-6 py-4",children:new Date(e.date).toLocaleString("en-GB",{timeZone:"Africa/Nairobi"})}),m.jsx("td",{className:"px-6 py-4",children:e.reason}),m.jsx("td",{className:"px-6 py-4",children:e.payee||"N/A"}),m.jsx("td",{className:"px-6 py-4",children:e.cashierName}),m.jsx("td",{className:"px-6 py-4 text-right font-mono font-semibold text-danger",children:e.amount.toFixed(2)}),m.jsx("td",{className:"px-6 py-4 text-right",children:m.jsx("button",{className:"font-medium text-primary dark:text-dark-primary hover:underline",children:"View"})})]},e.id)),0===u.length&&m.jsx("tr",{children:m.jsx("td",{colSpan:7,className:"text-center py-10",children:"No expenses found."})})]})]}),h>1&&(0,m.jsxs)("div",{className:"flex justify-between items-center p-4 text-sm border-t border-border dark:border-dark-border",children:[m.jsx("button",{onClick:()=>i(e=>Math.max(1,e-1)),disabled:1===o,className:"px-3 py-1 border rounded-md disabled:opacity-50 border-border dark:border-dark-border",children:"Previous"}),(0,m.jsxs)("span",{children:["Page ",o," of ",h]}),m.jsx("button",{onClick:()=>i(e=>Math.min(h,e+1)),disabled:o===h,className:"px-3 py-1 border rounded-md disabled:opacity-50 dark:border-dark-border",children:"Next"})]})]})]})},Nj=x().forwardRef(({expense:e,settings:t},r)=>(0,m.jsxs)("div",{ref:r,className:"bg-white p-6 font-sans text-sm text-black w-full max-w-lg mx-auto border border-black",children:[(0,m.jsxs)("header",{className:"text-center pb-4 border-b border-black",children:[m.jsx("h1",{className:"text-xl font-bold uppercase",children:t.businessInfo.name}),m.jsx("h2",{className:"text-lg font-semibold uppercase",children:"Expense Voucher"})]}),(0,m.jsxs)("section",{className:"my-4 space-y-2 text-base",children:[(0,m.jsxs)("div",{className:"flex justify-between",children:[m.jsx("span",{children:"Date:"})," ",m.jsx("span",{className:"font-semibold",children:new Date(e.date).toLocaleString("en-GB")})]}),(0,m.jsxs)("div",{className:"flex justify-between",children:[m.jsx("span",{children:"Voucher No:"})," ",m.jsx("span",{className:"font-mono",children:e.id})]})]}),(0,m.jsxs)("section",{className:"my-4 border-y border-black py-4",children:[(0,m.jsxs)("div",{className:"flex justify-between",children:[m.jsx("span",{children:"Paid to:"}),m.jsx("span",{className:"font-bold border-b border-dotted border-black w-3/4 text-left px-2",children:e.payee||"____________________"})]}),(0,m.jsxs)("div",{className:"flex justify-between mt-4",children:[m.jsx("span",{children:"For the purpose of:"}),m.jsx("span",{className:"font-bold border-b border-dotted border-black w-3/4 text-left px-2",children:e.reason})]}),(0,m.jsxs)("div",{className:"flex justify-between mt-4",children:[m.jsx("span",{children:"Amount in words:"}),m.jsx("span",{className:"font-bold border-b border-dotted border-black w-3/4 text-left px-2"})]}),(0,m.jsxs)("div",{className:"flex justify-between mt-4",children:[m.jsx("span",{children:"Category:"}),m.jsx("span",{className:"font-bold border-b border-dotted border-black w-3/4 text-left px-2",children:e.category})]})]}),m.jsx("section",{className:"flex justify-end my-4",children:(0,m.jsxs)("div",{className:"border-2 border-black p-2 text-center",children:[m.jsx("p",{className:"text-xs font-semibold",children:"Amount"}),(0,m.jsxs)("p",{className:"text-lg font-bold",children:["Ksh ",e.amount.toFixed(2)]})]})}),(0,m.jsxs)("footer",{className:"mt-12 grid grid-cols-2 gap-8 text-sm",children:[m.jsx("div",{children:(0,m.jsxs)("div",{className:"border-t border-black pt-1",children:["Prepared by: ",m.jsx("span",{className:"font-semibold",children:e.cashierName})]})}),m.jsx("div",{children:m.jsx("div",{className:"border-t border-black pt-1",children:"Received by:"})}),m.jsx("div",{children:m.jsx("div",{className:"border-t border-black pt-1",children:"Authorized by:"})}),m.jsx("div",{children:m.jsx("div",{className:"border-t border-black pt-1",children:"Signature & Stamp"})})]})]})),NC=({expense:e,settings:t,onBack:r})=>{let n=(0,g.useRef)(null),[a,o]=(0,g.useState)(!1),i=async()=>{if(n.current&&!a){o(!0);try{let t=await (0,An.default)(n.current,{scale:2,useCORS:!0}),r=t.toDataURL("image/png"),a=new sM("p","mm","a4"),o=a.internal.pageSize.getWidth(),i=t.height*o/t.width;a.addImage(r,"PNG",0,0,o,i),a.save(`Expense_${e.id}.pdf`)}catch(e){console.error("Failed to generate PDF:",e)}finally{o(!1)}}};return m.jsx("div",{className:"h-full bg-background dark:bg-dark-background p-4 md:p-8",children:(0,m.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,m.jsxs)("div",{className:"flex flex-col md:flex-row gap-4 justify-between items-center mb-6 no-print",children:[m.jsx("button",{onClick:r,className:"flex items-center text-sm font-bold text-primary dark:text-dark-primary hover:text-primary-focus",children:" Back to Expenditures List"}),(0,m.jsxs)("div",{className:"flex items-center gap-2",children:[m.jsx("button",{onClick:()=>{window.print()},className:"bg-foreground/80 dark:bg-dark-border text-white font-semibold px-4 py-2 rounded-lg hover:bg-foreground dark:hover:bg-dark-border/80 text-sm",children:"Print Voucher"}),m.jsx("button",{onClick:i,disabled:a,className:"bg-primary text-primary-content font-semibold px-4 py-2 rounded-lg hover:bg-primary-focus text-sm disabled:bg-slate-400",children:a?"Downloading...":"Download PDF"})]})]}),e.receiptImageUrl&&(0,m.jsxs)("div",{className:"mb-6 no-print",children:[m.jsx("h3",{className:"text-lg font-bold text-foreground dark:text-dark-foreground mb-2",children:"Attached Receipt"}),m.jsx("div",{className:"bg-card dark:bg-dark-card p-4 rounded-lg border border-border dark:border-dark-border",children:m.jsx("img",{src:e.receiptImageUrl,alt:"Expense Receipt",className:"max-w-full h-auto max-h-96 object-contain rounded-md"})})]}),m.jsx("div",{id:"pdf-content-wrapper",children:m.jsx(Nj,{ref:n,expense:e,settings:t})})]})})},NN=({products:e,customers:t,settings:r,onAddLayaway:n,onBack:a,activeShift:o,initialCartItems:i})=>{let s=!!i&&i.length>0,[l,A]=(0,g.useState)(i||[]),[c,d]=(0,g.useState)(t.find(e=>"cust001"!==e.id)?.id||t[0]?.id),[u,h]=(0,g.useState)(""),[f,p]=(0,g.useState)("Cash"),[x,b]=(0,g.useState)(()=>{let e=new Date;return e.setDate(e.getDate()+(r.layaway?.maxDurationDays||30)),e.toISOString().split("T")[0]}),[y,v]=(0,g.useState)(""),w=e=>{s||A(t=>t.filter(t=>t.id!==e))},k=(0,g.useMemo)(()=>l.reduce((e,t)=>e+t.price*t.quantity,0),[l]),B=r.layaway?.minDepositPercentage??20,j=B/100*k,C=async()=>{v("");let e=t.find(e=>e.id===c);if(!e||"cust001"===e.id){v("Please select a valid customer (not Walk-in).");return}if(0===l.length){v("Please add items to the layaway plan.");return}if(""===u||Number(u)<j){v(`Deposit must be at least the minimum required of Ksh ${j.toFixed(2)}.`);return}if(!x){v("Please set a valid expiry date.");return}try{await n({customerId:e.id,customerName:e.name,items:l,total:k,deposit:Number(u),initialPayment:{amount:Number(u),method:f},status:"Active",createdDate:new Date,expiryDate:new Date(x)})}catch(e){}};return o?(0,m.jsxs)("div",{className:`h-full overflow-hidden ${s?"flex justify-center":"grid grid-cols-1 md:grid-cols-[1fr_auto]"}`,children:[!s&&m.jsx("div",{className:"flex-1 p-4 overflow-y-auto",children:m.jsx(o3,{products:e,onAddToCart:e=>{!s&&(e.stock<=0&&"Inventory"===e.productType||A(t=>{let r=t.find(t=>t.id===e.id);return r?r.quantity>=e.stock?t:t.map(t=>t.id===e.id?{...t,quantity:t.quantity+1}:t):[...t,{...e,quantity:1}]}))},settings:r})}),(0,m.jsxs)("div",{className:`w-full ${s?"max-w-xl":"md:w-96"} bg-card dark:bg-dark-card shadow-lg flex flex-col p-4 space-y-4 border-l border-border dark:border-dark-border`,children:[(0,m.jsxs)("div",{className:"flex justify-between items-center",children:[m.jsx("h2",{className:"text-xl font-bold text-foreground dark:text-dark-foreground",children:"New Layaway"}),m.jsx("button",{onClick:a,className:"text-sm font-bold text-primary dark:text-dark-primary hover:text-primary-focus",children:" Back to POS"})]}),(0,m.jsxs)("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-foreground dark:text-dark-foreground",children:"Customer"}),m.jsx("div",{className:"mt-1",children:m.jsx(o6,{customers:t,selectedCustomerId:c,onCustomerChange:d,filter:e=>"cust001"!==e.id})})]}),(0,m.jsxs)("div",{className:"flex-grow overflow-y-auto border-t border-b border-border dark:border-dark-border py-2 space-y-2",children:[l.map(e=>(0,m.jsxs)("div",{className:"flex justify-between items-center py-1 group",children:[(0,m.jsxs)("div",{className:"text-sm",children:[m.jsx("p",{className:"font-semibold text-foreground dark:text-dark-foreground",children:e.name}),(0,m.jsxs)("p",{className:"text-xs text-foreground-muted dark:text-dark-foreground-muted",children:[e.quantity," x ",e.price.toFixed(2)]})]}),(0,m.jsxs)("div",{className:"flex items-center gap-2",children:[m.jsx("span",{className:"font-mono text-sm text-foreground dark:text-dark-foreground",children:(e.price*e.quantity).toFixed(2)}),!s&&m.jsx("button",{onClick:()=>w(e.id),className:"text-danger opacity-0 group-hover:opacity-100 transition-opacity",children:"\xd7"})]})]},e.id)),0===l.length&&m.jsx("p",{className:"text-center text-foreground-muted dark:text-dark-foreground-muted py-4",children:"Add products to start"})]}),(0,m.jsxs)("div",{className:"space-y-1",children:[(0,m.jsxs)("div",{className:"flex justify-between font-bold text-lg",children:[m.jsx("span",{children:"Total"}),(0,m.jsxs)("span",{className:"font-mono",children:["Ksh ",k.toFixed(2)]})]}),(0,m.jsxs)("div",{className:"flex justify-between text-sm text-foreground-muted dark:text-dark-foreground-muted",children:[(0,m.jsxs)("span",{children:["Minimum Deposit (",B,"%)"]}),(0,m.jsxs)("span",{className:"font-mono",children:["Ksh ",j.toFixed(2)]})]})]}),(0,m.jsxs)("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-foreground dark:text-dark-foreground",children:"Deposit Paid"}),m.jsx("input",{type:"number",value:u,onChange:e=>h(""===e.target.value?"":Number(e.target.value)),className:"mt-1 w-full p-2 border border-border dark:border-dark-border rounded-md bg-card dark:bg-dark-card",placeholder:j.toFixed(2)})]}),(0,m.jsxs)("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-foreground dark:text-dark-foreground",children:"Payment Method"}),(0,m.jsxs)("select",{value:f,onChange:e=>p(e.target.value),className:"mt-1 w-full p-2 border border-border dark:border-dark-border rounded-md bg-card dark:bg-dark-card",children:[m.jsx("option",{children:"Cash"}),m.jsx("option",{children:"M-Pesa"}),m.jsx("option",{children:"Card"})]})]}),(0,m.jsxs)("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-foreground dark:text-dark-foreground",children:"Expiry Date"}),m.jsx("input",{type:"date",value:x,onChange:e=>b(e.target.value),className:"mt-1 w-full p-2 border border-border dark:border-dark-border rounded-md bg-card dark:bg-dark-card"})]}),y&&m.jsx("p",{className:"text-danger text-sm text-center",children:y}),m.jsx("div",{className:"pt-2",children:m.jsx("button",{onClick:C,className:"w-full bg-primary text-primary-content font-bold py-3 rounded-lg hover:bg-primary-focus disabled:bg-slate-400",disabled:0===l.length,children:"Create Layaway"})})]})]}):(0,m.jsxs)("div",{className:"p-8 h-full flex flex-col items-center justify-center text-center",children:[m.jsx("h1",{className:"text-2xl font-bold text-foreground dark:text-dark-foreground",children:"Shift Not Active"}),m.jsx("p",{className:"mt-2 text-foreground-muted dark:text-dark-foreground-muted",children:"You must start a shift before you can create a layaway plan."}),m.jsx("button",{onClick:a,className:"mt-6 bg-primary text-primary-content font-bold py-2 px-6 rounded-lg",children:"Back to POS"})]})},NS=()=>m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),NF=()=>m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v.01"})}),NE=()=>m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),NO=({title:e,value:t,icon:r})=>(0,m.jsxs)("div",{className:"bg-card dark:bg-dark-card p-4 rounded-xl shadow-sm border border-border dark:border-dark-border flex items-center space-x-4",children:[m.jsx("div",{className:"p-3 rounded-lg bg-muted dark:bg-dark-muted text-primary dark:text-dark-primary",children:r}),(0,m.jsxs)("div",{children:[m.jsx("p",{className:"text-sm font-semibold text-foreground-muted dark:text-dark-foreground-muted",children:e}),m.jsx("p",{className:"text-xl font-bold text-foreground dark:text-dark-foreground",children:t})]})]}),NP=({status:e})=>{let t="px-2 py-0.5 text-xs font-semibold rounded-full";switch(e){case"Active":return m.jsx("span",{className:`${t} text-blue-800 bg-blue-100 dark:bg-blue-900/50 dark:text-blue-300`,children:"Active"});case"Completed":return m.jsx("span",{className:`${t} text-green-800 bg-green-100 dark:bg-green-900/50 dark:text-green-300`,children:"Completed"});case"Defaulted":return m.jsx("span",{className:`${t} text-red-800 bg-red-100 dark:bg-red-900/50 dark:text-red-300`,children:"Defaulted"});case"Cancelled":return m.jsx("span",{className:`${t} text-slate-800 bg-slate-100 dark:bg-slate-700 dark:text-slate-300`,children:"Cancelled"});default:return m.jsx("span",{className:`${t} text-slate-800 bg-slate-100`,children:"Unknown"})}},NI=({layaways:e,onSelectLayaway:t,onCreateRequest:r,onDeleteRequest:n})=>{let{activePlans:a,totalOutstanding:o,completed:i}=(0,g.useMemo)(()=>{let t=e.filter(e=>"Active"===e.status);return{activePlans:t.length,totalOutstanding:t.reduce((e,t)=>e+t.balance,0),completed:e.filter(e=>"Completed"===e.status).length}},[e]),s=e=>`KES ${e.toFixed(2)}`;return(0,m.jsxs)("div",{className:"p-4 md:p-8",children:[(0,m.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,m.jsxs)("div",{children:[m.jsx("h1",{className:"text-3xl font-bold text-foreground dark:text-dark-foreground",children:"Layaway Plans"}),m.jsx("p",{className:"text-sm text-foreground-muted dark:text-dark-foreground-muted",children:"Manage customer payment plans (All prices include VAT)"})]}),m.jsx("button",{onClick:r,whileTap:{scale:.95},className:"bg-primary text-primary-content font-bold px-4 py-2 rounded-lg hover:bg-primary-focus transition-colors shadow-md flex items-center",children:"+ Create Layaway"})]}),(0,m.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6",children:[m.jsx(NO,{title:"Active Plans",value:a,icon:m.jsx(NS,{})}),m.jsx(NO,{title:"Total Outstanding",value:s(o),icon:m.jsx(NF,{})}),m.jsx(NO,{title:"Completed",value:i,icon:m.jsx(NE,{})})]}),(0,m.jsxs)("div",{className:"bg-card dark:bg-dark-card rounded-xl shadow-sm border border-border dark:border-dark-border overflow-hidden",children:[m.jsx("h2",{className:"text-lg font-semibold p-4",children:"All Layaways"}),m.jsx("div",{className:"overflow-x-auto",children:(0,m.jsxs)("table",{className:"w-full text-sm text-left text-foreground-muted dark:text-dark-foreground-muted",children:[m.jsx("thead",{className:"text-xs text-foreground dark:text-dark-foreground uppercase bg-muted dark:bg-dark-muted",children:(0,m.jsxs)("tr",{children:[m.jsx("th",{scope:"col",className:"px-6 py-3",children:"Layaway #"}),m.jsx("th",{scope:"col",className:"px-6 py-3",children:"Customer"}),m.jsx("th",{scope:"col",className:"px-6 py-3",children:"Total Amount"}),m.jsx("th",{scope:"col",className:"px-6 py-3",children:"Paid"}),m.jsx("th",{scope:"col",className:"px-6 py-3",children:"Balance"}),m.jsx("th",{scope:"col",className:"px-6 py-3",children:"Due Date"}),m.jsx("th",{scope:"col",className:"px-6 py-3",children:"Status"}),m.jsx("th",{scope:"col",className:"px-6 py-3",children:"Actions"})]})}),(0,m.jsxs)("tbody",{className:"divide-y divide-border dark:divide-dark-border",children:[e.map(e=>{let r=e.total-e.balance,a=e.total>0?r/e.total*100:0;return(0,m.jsxs)("tr",{className:"hover:bg-muted dark:hover:bg-dark-muted",children:[m.jsx("td",{className:"px-6 py-4 font-bold text-foreground dark:text-dark-foreground",children:e.id}),m.jsx("td",{className:"px-6 py-4",children:e.customerName}),m.jsx("td",{className:"px-6 py-4 font-mono",children:s(e.total)}),(0,m.jsxs)("td",{className:"px-6 py-4",children:[m.jsx("div",{className:"font-mono",children:s(r)}),m.jsx("div",{className:"w-full bg-slate-200 rounded-full h-1.5 dark:bg-slate-700 my-1",children:m.jsx("div",{className:"bg-green-500 h-1.5 rounded-full",style:{width:`${a}%`}})}),(0,m.jsxs)("div",{className:"text-right text-xs font-semibold text-green-500",children:[a.toFixed(0),"%"]})]}),m.jsx("td",{className:"px-6 py-4 font-mono font-semibold text-danger",children:s(e.balance)}),m.jsx("td",{className:"px-6 py-4",children:new Date(e.expiryDate).toLocaleDateString()}),m.jsx("td",{className:"px-6 py-4",children:m.jsx(NP,{status:e.status})}),m.jsx("td",{className:"px-6 py-4",children:(0,m.jsxs)("div",{className:"flex items-center space-x-2",children:[m.jsx("button",{onClick:()=>t(e),className:"p-1 hover:bg-border rounded-full",title:"View Details",children:(0,m.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:[m.jsx("path",{d:"M10 12a2 2 0 100-4 2 2 0 000 4z"}),m.jsx("path",{fillRule:"evenodd",d:"M.458 10C3.732 4.943 9.522 3 10 3s6.268 1.943 9.542 7c-3.274 5.057-9.064 7-9.542 7S3.732 15.057.458 10zM14 10a4 4 0 11-8 0 4 4 0 018 0z",clipRule:"evenodd"})]})}),m.jsx("button",{onClick:t=>{t.stopPropagation(),n(e)},className:"p-1 hover:bg-border rounded-full",title:"Delete Layaway",children:m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-danger",viewBox:"0 0 20 20",fill:"currentColor",children:m.jsx("path",{fillRule:"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm4 0a1 1 0 012 0v6a1 1 0 11-2 0V8z",clipRule:"evenodd"})})})]})})]},e.id)}),0===e.length&&m.jsx("tr",{children:m.jsx("td",{colSpan:8,className:"text-center py-16 text-foreground-muted dark:text-dark-foreground-muted",children:m.jsx("p",{className:"font-semibold",children:"No layaway plans found."})})})]})]})})]})]})},NU=({status:e})=>{let t="px-2.5 py-1 text-xs font-bold rounded-md";switch(e){case"Active":return m.jsx("span",{className:`${t} text-blue-800 bg-blue-100 dark:bg-blue-900/50 dark:text-blue-300`,children:"Active"});case"Completed":return m.jsx("span",{className:`${t} text-green-800 bg-green-100 dark:bg-green-900/50 dark:text-green-300`,children:"Completed"});case"Defaulted":return m.jsx("span",{className:`${t} text-red-800 bg-red-100 dark:bg-red-900/50 dark:text-red-300`,children:"Defaulted"});case"Cancelled":return m.jsx("span",{className:`${t} text-slate-800 bg-slate-100 dark:bg-slate-700 dark:text-slate-300`,children:"Cancelled"});default:return m.jsx("span",{className:`${t} text-slate-800 bg-slate-100`,children:"Unknown"})}},NL=({layaway:e,onAddPayment:t,onClose:r})=>{let[n,a]=(0,g.useState)(""),[o,i]=(0,g.useState)("Cash");return(0,m.jsxs)("form",{onSubmit:i=>{i.preventDefault(),"number"==typeof n&&n>0&&n<=e.balance&&(t(e.id,n,o),a(""),r())},className:"mt-4 p-4 bg-muted dark:bg-dark-muted rounded-lg space-y-3",children:[m.jsx("h4",{className:"font-semibold text-sm",children:"Record New Payment"}),(0,m.jsxs)("div",{children:[(0,m.jsxs)("label",{className:"text-xs font-medium",children:["Amount (Max: ",e.balance.toFixed(2),")"]}),m.jsx("input",{type:"number",value:n,onChange:e=>a(""===e.target.value?"":parseFloat(e.target.value)),max:e.balance,min:"0.01",step:"0.01",required:!0,className:"w-full mt-1 p-2 border border-border dark:border-dark-border rounded-md bg-card dark:bg-dark-background"})]}),(0,m.jsxs)("div",{children:[m.jsx("label",{className:"text-xs font-medium",children:"Method"}),(0,m.jsxs)("select",{value:o,onChange:e=>i(e.target.value),className:"w-full mt-1 p-2 border border-border dark:border-dark-border rounded-md bg-card dark:bg-dark-background",children:[m.jsx("option",{children:"Cash"}),m.jsx("option",{children:"M-Pesa"}),m.jsx("option",{children:"Card"})]})]}),(0,m.jsxs)("div",{className:"flex justify-end gap-2",children:[m.jsx("button",{type:"button",onClick:r,className:"text-xs font-bold px-3 py-1.5 rounded-md hover:bg-border dark:hover:bg-dark-border",children:"Cancel"}),m.jsx("button",{type:"submit",className:"text-xs font-bold px-3 py-1.5 bg-primary text-primary-content rounded-md",children:"Confirm Payment"})]})]})},N_=({layaway:e,sales:t,onBack:r,onAddPayment:n,onViewReceiptRequest:a,onUpdate:o})=>{let[i,s]=(0,g.useState)(!1),[l,A]=(0,g.useState)(null),c=e=>`KES ${e.toFixed(2)}`,d=e.total-e.balance,u=e.total>0?d/e.total*100:0;return(0,m.jsxs)("div",{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/70 flex items-center justify-center z-40 p-4",onClick:r,children:[m.jsx(Q,{children:l&&m.jsx(Cn,{title:`${"cancel"===l?"Cancel":"Mark as Defaulted"}?`,message:`Are you sure you want to ${l} this layaway plan? This action cannot be undone.`,onConfirm:()=>{"cancel"===l?o({...e,status:"Cancelled"}):"default"===l&&o({...e,status:"Defaulted"}),A(null)},onClose:()=>A(null),confirmText:"cancel"===l?"Cancel Plan":"Mark as Defaulted",isDestructive:!0})}),(0,m.jsxs)("div",{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-card dark:bg-dark-card w-full max-w-2xl max-h-[90vh] rounded-2xl shadow-lg flex flex-col",onClick:e=>e.stopPropagation(),children:[(0,m.jsxs)("header",{className:"flex justify-between items-center p-4 border-b border-border dark:border-dark-border flex-shrink-0",children:[m.jsx("h2",{className:"text-lg font-bold",children:"Layaway Details"}),m.jsx("button",{onClick:r,className:"text-2xl",children:"\xd7"})]}),(0,m.jsxs)("main",{className:"p-6 overflow-y-auto space-y-6",children:[(0,m.jsxs)("section",{className:"grid grid-cols-2 gap-x-8 gap-y-4 text-sm",children:[(0,m.jsxs)("div",{children:[m.jsx("strong",{className:"text-foreground-muted",children:"Layaway Number:"}),m.jsx("br",{}),e.id]}),(0,m.jsxs)("div",{children:[m.jsx("strong",{className:"text-foreground-muted",children:"Customer:"}),m.jsx("br",{}),e.customerName]}),(0,m.jsxs)("div",{children:[m.jsx("strong",{className:"text-foreground-muted",children:"Start Date:"}),m.jsx("br",{}),new Date(e.createdDate).toLocaleDateString()]}),(0,m.jsxs)("div",{children:[m.jsx("strong",{className:"text-foreground-muted",children:"Due Date:"}),m.jsx("br",{}),new Date(e.expiryDate).toLocaleDateString()]}),(0,m.jsxs)("div",{className:"col-span-2",children:[m.jsx("strong",{className:"text-foreground-muted",children:"Status:"})," ",m.jsx(NU,{status:e.status})]})]}),(0,m.jsxs)("section",{children:[m.jsx("h3",{className:"font-semibold text-sm mb-2",children:"Payment Progress"}),(0,m.jsxs)("div",{className:"bg-muted dark:bg-dark-muted p-4 rounded-lg space-y-2",children:[(0,m.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,m.jsxs)("span",{className:"font-semibold text-green-600",children:["Amount Paid: ",c(d)]}),(0,m.jsxs)("span",{className:"font-semibold text-danger",children:["Balance Due: ",c(e.balance)]})]}),m.jsx("div",{className:"w-full bg-slate-200 rounded-full h-2.5 dark:bg-slate-700",children:m.jsx("div",{className:"bg-green-500 h-2.5 rounded-full",style:{width:`${u}%`}})}),(0,m.jsxs)("div",{className:"text-right text-xs font-bold",children:[u.toFixed(0),"% Paid"]})]})]}),m.jsx("section",{children:(0,m.jsxs)("table",{className:"w-full text-sm",children:[m.jsx("thead",{className:"text-xs uppercase text-foreground-muted",children:(0,m.jsxs)("tr",{children:[m.jsx("th",{className:"text-left font-semibold pb-2",children:"Product"}),m.jsx("th",{className:"text-center font-semibold pb-2",children:"Qty"}),m.jsx("th",{className:"text-right font-semibold pb-2",children:"Unit Price"}),m.jsx("th",{className:"text-right font-semibold pb-2",children:"Total"})]})}),m.jsx("tbody",{children:e.items.map(e=>(0,m.jsxs)("tr",{children:[m.jsx("td",{className:"py-1",children:e.name}),m.jsx("td",{className:"text-center py-1",children:e.quantity}),m.jsx("td",{className:"text-right py-1 font-mono",children:e.price.toFixed(2)}),m.jsx("td",{className:"text-right py-1 font-mono",children:(e.price*e.quantity).toFixed(2)})]},e.id))}),m.jsx("tfoot",{className:"border-t-2 border-border dark:border-dark-border",children:m.jsx("tr",{children:(0,m.jsxs)("td",{colSpan:4,className:"text-right pt-2 font-bold text-base",children:["Total Amount: ",m.jsx("span",{className:"text-orange-500 font-mono",children:c(e.total)})]})})})]})}),(0,m.jsxs)("section",{children:[m.jsx("h3",{className:"font-semibold text-sm mb-2",children:"Payment History"}),m.jsx("div",{className:"border border-border dark:border-dark-border rounded-lg overflow-hidden",children:(0,m.jsxs)("table",{className:"w-full text-xs",children:[m.jsx("thead",{className:"bg-muted dark:bg-dark-muted",children:(0,m.jsxs)("tr",{children:[m.jsx("th",{className:"p-2 text-left font-semibold",children:"Date"}),m.jsx("th",{className:"p-2 text-right font-semibold",children:"Amount"}),m.jsx("th",{className:"p-2 text-left font-semibold",children:"Method"}),m.jsx("th",{className:"p-2 text-left font-semibold",children:"Notes"})]})}),m.jsx("tbody",{children:e.payments.map((e,r)=>(t.find(t=>t.id===e.saleId),(0,m.jsxs)("tr",{className:"border-t dark:border-dark-border",children:[m.jsx("td",{className:"p-2",children:new Date(e.date).toLocaleString()}),m.jsx("td",{className:"p-2 text-right font-mono",children:e.amount.toFixed(2)}),m.jsx("td",{className:"p-2",children:e.method}),m.jsx("td",{className:"p-2 italic",children:0===r?"Initial deposit":"Installment"})]},e.saleId)))})]})}),m.jsx(Q,{children:i&&m.jsx(NL,{layaway:e,onAddPayment:n,onClose:()=>s(!1)})})]})]}),m.jsx("footer",{className:"flex justify-end items-center p-4 border-t border-border dark:border-dark-border gap-2 flex-shrink-0",children:"Active"===e.status&&(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)("button",{onClick:()=>s(!0),whileTap:{scale:.95},className:"bg-primary text-primary-content font-semibold px-4 py-2 rounded-lg text-sm flex items-center gap-2",children:[(0,m.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor",children:[m.jsx("path",{d:"M8.433 7.418c.155-.103.346-.196.567-.267v1.698a2.5 2.5 0 004.5 0V7.15c.22.071.412.164.567.267C15.346 8.046 16 9.233 16 10.5A2.5 2.5 0 0113.5 13h-7A2.5 2.5 0 014 10.5c0-1.267.654-2.454 1.567-3.082z"}),m.jsx("path",{d:"M10 4a3.5 3.5 0 00-3.5 3.5v.568c0 .416.22.8.568.983A3.504 3.504 0 0010 12a3.5 3.5 0 003.5-3.5V7.5A3.5 3.5 0 0010 4z"})]}),"Add Payment"]}),m.jsx("button",{onClick:()=>A("default"),whileTap:{scale:.95},className:"bg-muted dark:bg-dark-muted font-semibold px-4 py-2 rounded-lg text-sm",children:"Mark as Defaulted"}),m.jsx("button",{onClick:()=>A("cancel"),whileTap:{scale:.95},className:"bg-danger/80 text-white font-semibold px-4 py-2 rounded-lg text-sm",children:"Cancel Layaway"})]})})]})]})},NQ=({products:e,customers:t,settings:r,onAddSalesOrder:n,onBack:a,activeShift:o})=>{let[i,s]=(0,g.useState)(t.find(e=>"cust001"!==e.id)?.id||t[0]?.id),[l,A]=(0,g.useState)([]),[c,d]=(0,g.useState)(""),[u,h]=(0,g.useState)(()=>{let e=new Date;return e.setDate(e.getDate()+7),e.toISOString().split("T")[0]}),[f,p]=(0,g.useState)(""),[x,b]=(0,g.useState)(""),[y,v]=(0,g.useState)(""),[w,k]=(0,g.useState)(1),[B,j]=(0,g.useState)(""),[C,N]=(0,g.useState)(""),[S,F]=(0,g.useState)(""),E=(0,g.useMemo)(()=>C?e.filter(e=>e.name.toLowerCase().includes(C.toLowerCase())).slice(0,5):[],[C,e]),O=(0,g.useMemo)(()=>l.reduce((e,t)=>e+(t.unitPrice||0)*(t.quantity||0),0),[l]),P=e=>{A(t=>t.find(t=>t.productId===e.id)?t.map(t=>t.productId===e.id?{...t,quantity:(t.quantity||0)+1}:t):[...t,{id:crypto.randomUUID(),productId:e.id,description:e.name,quantity:1,unitPrice:e.price,pricingType:e.pricingType,status:"Pending",quantityReceived:0}]),N("")},I=(e,t,r)=>{A(n=>n.map(n=>{if(n.id===e){let e=r;return("quantity"===t||"unitPrice"===t)&&isNaN(e=parseFloat(r))&&(e=0),{...n,[t]:e}}return n}).filter(e=>"quantity"!==t||e.quantity>0))},U=e=>{A(t=>t.filter(t=>t.id!==e))},L=async e=>{F("");let r=t.find(e=>e.id===i);if(!r||"cust001"===r.id){F("Please select a valid customer (not Walk-in).");return}if(0===l.length){F("Please add at least one item to the sales order.");return}try{await n({customerId:r.id,customerName:r.name,items:l,total:O,deposit:Number(c)||0,status:e,createdDate:new Date,deliveryDate:u?new Date(u):void 0,shippingAddress:f,notes:x})}catch(e){console.error("Failed to save Sales Order from form:",e)}};return o?m.jsx("div",{className:"p-4 md:p-8 h-full overflow-y-auto bg-background dark:bg-dark-background flex justify-center",children:(0,m.jsxs)("div",{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"w-full max-w-4xl bg-card dark:bg-dark-card p-8 rounded-xl shadow-xl space-y-6",children:[(0,m.jsxs)("div",{className:"flex justify-between items-center",children:[m.jsx("h1",{className:"text-3xl font-bold text-foreground dark:text-dark-foreground",children:"New Sales Order"}),m.jsx("button",{type:"button",onClick:a,className:"text-sm font-bold text-primary dark:text-dark-primary hover:text-primary-focus",children:" Back to POS"})]}),(0,m.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,m.jsxs)("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-foreground dark:text-dark-foreground",children:"Customer"}),m.jsx("div",{className:"mt-1",children:m.jsx(o6,{customers:t,selectedCustomerId:i,onCustomerChange:s,filter:e=>"cust001"!==e.id})})]}),(0,m.jsxs)("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-foreground dark:text-dark-foreground",children:"Expected Delivery Date"}),m.jsx("input",{type:"date",value:u,onChange:e=>h(e.target.value),className:"mt-1 w-full p-2 border border-border dark:border-dark-border rounded-md bg-card dark:bg-dark-background"})]})]}),(0,m.jsxs)("div",{children:[m.jsx("h2",{className:"text-xl font-semibold text-foreground dark:text-dark-foreground border-b border-border dark:border-dark-border pb-2 mb-4",children:"Items"}),(0,m.jsxs)("div",{className:"relative mb-4",children:[m.jsx("label",{className:"block text-sm font-medium text-foreground dark:text-dark-foreground",children:"Add Existing Product"}),m.jsx("input",{type:"text",value:C,onChange:e=>N(e.target.value),placeholder:"Type to search products...",className:"mt-1 block w-full px-3 py-2 bg-background dark:bg-dark-background border border-border dark:border-dark-border rounded-md shadow-sm focus:outline-none focus:ring-primary focus:border-primary sm:text-sm"}),E.length>0&&m.jsx("ul",{className:"absolute z-10 w-full bg-card dark:bg-dark-card border border-border dark:border-dark-border rounded-md shadow-lg mt-1 max-h-60 overflow-y-auto",children:E.map(e=>(0,m.jsxs)("li",{onClick:()=>P(e),className:"px-4 py-2 hover:bg-muted dark:hover:bg-dark-muted cursor-pointer",children:[e.name," - Ksh ",e.price.toFixed(2)]},e.id))})]}),m.jsx("div",{className:"space-y-2",children:l.map(e=>(0,m.jsxs)("div",{className:"flex items-center gap-2 p-2 bg-muted dark:bg-dark-muted rounded",children:[m.jsx("input",{type:"text",value:e.description,onChange:t=>I(e.id,"description",t.target.value),className:"flex-grow p-1 border rounded-md bg-background dark:bg-dark-background border-border dark:border-dark-border",readOnly:!!e.productId}),m.jsx("input",{type:"number",value:e.quantity,onChange:t=>I(e.id,"quantity",t.target.value),className:"w-20 text-center p-1 border rounded-md bg-background dark:bg-dark-background border-border dark:border-dark-border",min:"1"}),m.jsx("input",{type:"number",value:e.unitPrice,onChange:t=>I(e.id,"unitPrice",t.target.value),className:"w-24 text-right p-1 border rounded-md bg-background dark:bg-dark-background border-border dark:border-dark-border",min:"0",step:"0.01"}),m.jsx("p",{className:"w-24 text-right font-mono",children:(e.unitPrice*e.quantity).toFixed(2)}),m.jsx("button",{type:"button",onClick:()=>U(e.id),className:"text-danger hover:text-red-700 font-bold text-lg",children:"\xd7"})]},e.id))}),(0,m.jsxs)("form",{onSubmit:e=>{e.preventDefault(),y&&w&&B&&(A(e=>[...e,{id:crypto.randomUUID(),description:y,quantity:Number(w),unitPrice:Number(B),pricingType:"inclusive",status:"Pending",quantityReceived:0}]),v(""),k(1),j(""))},className:"mt-4 grid grid-cols-12 gap-2 p-3 border border-border dark:border-dark-border rounded-lg",children:[m.jsx("input",{type:"text",value:y,onChange:e=>v(e.target.value),placeholder:"Or Add Custom Item Description",className:"col-span-6 p-2 border rounded-md bg-background dark:bg-dark-background border-border dark:border-dark-border",required:!0}),m.jsx("input",{type:"number",value:w,onChange:e=>k(""===e.target.value?"":Number(e.target.value)),placeholder:"Qty",className:"col-span-2 p-2 border rounded-md bg-background dark:bg-dark-background border-border dark:border-dark-border",required:!0,min:"1"}),m.jsx("input",{type:"number",value:B,onChange:e=>j(""===e.target.value?"":Number(e.target.value)),placeholder:"Unit Price",className:"col-span-2 p-2 border rounded-md bg-background dark:bg-dark-background border-border dark:border-dark-border",required:!0,min:"0",step:"0.01"}),m.jsx("button",{type:"submit",className:"col-span-2 bg-foreground/80 dark:bg-dark-border text-white dark:text-dark-foreground font-bold rounded-lg hover:bg-foreground dark:hover:bg-dark-border/80",children:"Add"})]})]}),(0,m.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,m.jsxs)("div",{children:[(0,m.jsxs)("div",{className:"flex justify-between font-bold text-lg mb-4",children:[m.jsx("span",{children:"Total"}),(0,m.jsxs)("span",{className:"font-mono",children:["Ksh ",O.toFixed(2)]})]}),m.jsx("label",{className:"block text-sm font-medium text-foreground dark:text-dark-foreground",children:"Deposit Paid (Optional)"}),m.jsx("input",{type:"number",value:c,onChange:e=>d(""===e.target.value?"":Number(e.target.value)),className:"mt-1 w-full p-2 border border-border dark:border-dark-border rounded-md bg-background dark:bg-dark-background",placeholder:"0.00"})]}),(0,m.jsxs)("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-foreground dark:text-dark-foreground",children:"Notes / Shipping Address"}),m.jsx("textarea",{value:x,onChange:e=>b(e.target.value),rows:4,className:"mt-1 w-full p-2 border border-border dark:border-dark-border rounded-md bg-background dark:bg-dark-background"})]})]}),S&&m.jsx("p",{className:"text-danger text-sm text-center",children:S}),(0,m.jsxs)("div",{className:"pt-4 border-t border-border dark:border-dark-border flex justify-end space-x-3",children:[m.jsx("button",{type:"button",onClick:()=>L("Draft"),disabled:0===l.length,whileTap:{scale:.95},className:"bg-foreground/80 text-white font-semibold px-4 py-2 rounded-lg hover:bg-foreground dark:bg-dark-border dark:hover:bg-dark-border/80 disabled:bg-slate-400",children:"Save as Draft"}),m.jsx("button",{type:"button",onClick:()=>L("Pending"),disabled:0===l.length,whileTap:{scale:.95},className:"bg-primary text-primary-content font-semibold px-6 py-2 rounded-lg hover:bg-primary-focus shadow-md disabled:bg-slate-400",children:"Create Sales Order"})]})]})}):(0,m.jsxs)("div",{className:"p-8 h-full flex flex-col items-center justify-center text-center",children:[m.jsx("h1",{className:"text-2xl font-bold text-foreground dark:text-dark-foreground",children:"Shift Not Active"}),m.jsx("p",{className:"mt-2 text-foreground-muted dark:text-dark-foreground-muted",children:"You must start a shift before you can create a sales order."}),m.jsx("button",{onClick:a,className:"mt-6 bg-primary text-primary-content font-bold py-2 px-6 rounded-lg",children:"Back to POS"})]})},NT=({status:e})=>{let t="px-2 py-1 text-xs font-semibold rounded-full";switch(e){case"Draft":return m.jsx("span",{className:`${t} text-yellow-800 bg-yellow-100 dark:bg-yellow-900/50 dark:text-yellow-300`,children:"Draft"});case"Pending":return m.jsx("span",{className:`${t} text-yellow-800 bg-yellow-100 dark:bg-yellow-900/50 dark:text-yellow-300`,children:"Pending"});case"Ordered":return m.jsx("span",{className:`${t} text-indigo-800 bg-indigo-100 dark:bg-indigo-900/50 dark:text-indigo-300`,children:"Ordered"});case"Partially Received":return m.jsx("span",{className:`${t} text-sky-800 bg-sky-100 dark:bg-sky-900/50 dark:text-sky-300`,children:"Partially Received"});case"Received":return m.jsx("span",{className:`${t} text-blue-800 bg-blue-100 dark:bg-blue-900/50 dark:text-blue-300`,children:"Received"});case"Completed":return m.jsx("span",{className:`${t} text-green-800 bg-green-100 dark:bg-green-900/50 dark:text-green-300`,children:"Completed"});case"Cancelled":return m.jsx("span",{className:`${t} text-red-800 bg-red-100 dark:bg-red-900/50 dark:text-red-300`,children:"Cancelled"});default:return m.jsx("span",{className:`${t} text-slate-800 bg-slate-100 dark:bg-slate-700 dark:text-slate-300`,children:"Unknown"})}},ND=({salesOrder:e,onCancel:t,onCreatePO:r,onPushToPOS:n,onView:a})=>{let[o,i]=(0,g.useState)(!1),s=(0,g.useRef)(null),l="Pending"===e.status&&e.items.some(e=>"Pending"===e.status),A="Received"===e.status,c="Pending"===e.status||"Ordered"===e.status;return(0,g.useEffect)(()=>{function e(e){s.current&&!s.current.contains(e.target)&&i(!1)}return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[s]),(0,m.jsxs)("div",{className:"relative",ref:s,children:[m.jsx("button",{onClick:e=>{e.stopPropagation(),i(!o)},className:"px-2 py-1 rounded-md hover:bg-muted dark:hover:bg-dark-muted",children:""}),m.jsx(Q,{children:o&&m.jsx("div",{initial:{opacity:0,scale:.95,y:-10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:-10},transition:{duration:.1},className:"absolute right-0 mt-2 w-48 bg-card dark:bg-dark-card rounded-md shadow-lg z-10 border border-border dark:border-dark-border",children:(0,m.jsxs)("ul",{className:"py-1 text-sm text-foreground dark:text-dark-foreground",children:[m.jsx("li",{children:m.jsx("button",{onClick:()=>{a(),i(!1)},className:"w-full text-left px-4 py-2 hover:bg-muted dark:hover:bg-dark-muted",children:"View Details"})}),l&&m.jsx("li",{children:m.jsx("button",{onClick:()=>{r(),i(!1)},className:"w-full text-left px-4 py-2 hover:bg-muted dark:hover:bg-dark-muted",children:"Create Purchase Order"})}),A&&m.jsx("li",{children:m.jsx("button",{onClick:()=>{n(),i(!1)},className:"w-full text-left px-4 py-2 hover:bg-muted dark:hover:bg-dark-muted",children:"Push to POS"})}),c&&(0,m.jsxs)(m.Fragment,{children:[m.jsx("div",{className:"my-1 border-t border-border dark:border-dark-border"}),m.jsx("li",{children:m.jsx("button",{onClick:()=>{t(),i(!1)},className:"w-full text-left px-4 py-2 text-danger hover:bg-danger/10",children:"Cancel Order"})})]})]})})})]})},NM=({salesOrders:e,onViewSalesOrder:t,onCancelRequest:r,onCreatePORequest:n,onPushToPOSRequest:a,onCreateRequest:o})=>(0,m.jsxs)("div",{className:"p-4 md:p-8 h-full overflow-y-auto",children:[(0,m.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[m.jsx("h1",{className:"text-3xl font-bold text-foreground dark:text-dark-foreground",children:"Sales Order List"}),(0,m.jsxs)("button",{onClick:o,whileTap:{scale:.95},className:"bg-primary text-primary-content font-bold px-4 py-2 rounded-xl transition-shadow shadow-clay dark:shadow-clay-dark active:shadow-clay-inset dark:active:shadow-clay-dark-inset flex items-center",children:[m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"New Sales Order"]})]}),m.jsx("div",{className:"bg-card dark:bg-dark-card rounded-xl shadow-sm border border-border dark:border-dark-border overflow-x-auto",children:(0,m.jsxs)("table",{className:"w-full text-sm text-left text-foreground-muted dark:text-dark-foreground-muted",children:[m.jsx("thead",{className:"text-xs text-foreground dark:text-dark-foreground uppercase bg-muted dark:bg-dark-muted",children:(0,m.jsxs)("tr",{children:[m.jsx("th",{scope:"col",className:"px-6 py-3",children:"Order #"}),m.jsx("th",{scope:"col",className:"px-6 py-3",children:"Customer"}),m.jsx("th",{scope:"col",className:"px-6 py-3",children:"Status"}),m.jsx("th",{scope:"col",className:"px-6 py-3",children:"Date Created"}),m.jsx("th",{scope:"col",className:"px-6 py-3 text-right",children:"Balance Due"}),m.jsx("th",{scope:"col",className:"px-6 py-3",children:m.jsx("span",{className:"sr-only",children:"Actions"})})]})}),m.jsx("tbody",{children:0===e.length?m.jsx("tr",{children:m.jsx("td",{colSpan:6,className:"text-center py-16 text-foreground-muted dark:text-dark-foreground-muted",children:(0,m.jsxs)("div",{className:"flex flex-col items-center",children:[m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-12 w-12 text-foreground-muted dark:text-dark-foreground-muted",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"})}),m.jsx("p",{className:"mt-2 font-semibold",children:"No sales orders found."}),m.jsx("p",{className:"text-sm",children:"Create a new sales order to get started."})]})})}):e.map(e=>(0,m.jsxs)("tr",{className:"bg-card dark:bg-dark-card border-b dark:border-dark-border hover:bg-muted dark:hover:bg-dark-muted cursor-pointer",onClick:()=>t(e),children:[m.jsx("td",{className:"px-6 py-4 font-bold text-foreground dark:text-dark-foreground",children:e.id}),m.jsx("td",{className:"px-6 py-4",children:e.customerName}),m.jsx("td",{className:"px-6 py-4",children:m.jsx(NT,{status:e.status})}),m.jsx("td",{className:"px-6 py-4",children:new Date(e.createdDate).toLocaleDateString()}),m.jsx("td",{className:"px-6 py-4 text-right font-mono font-semibold text-danger",children:e.balance.toFixed(2)}),m.jsx("td",{className:"px-6 py-4 text-right",children:m.jsx(ND,{salesOrder:e,onView:()=>t(e),onCancel:()=>r(e),onCreatePO:()=>n(e),onPushToPOS:()=>a(e)})})]},e.id))})]})})]}),NH=e=>{switch(e){case"Ordered":case"Partially Received":case"Received":return"ORDERED";case"Completed":return"COMPLETED";case"Cancelled":return"CANCELLED";default:return null}},NR=({text:e})=>m.jsx("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%) rotate(-45deg)",color:"rgba(0, 0, 0, 0.08)",fontSize:"8rem",fontWeight:"bold",textTransform:"uppercase",zIndex:0,pointerEvents:"none",userSelect:"none",whiteSpace:"nowrap"},children:e}),NK=x().forwardRef(({salesOrder:e,settings:t},r)=>{let n=NH(e.status);return(0,m.jsxs)("div",{ref:r,className:"relative bg-white p-8 font-sans text-sm text-black w-full max-w-4xl mx-auto shadow-lg border",children:[n&&m.jsx(NR,{text:n}),(0,m.jsxs)("div",{className:"relative z-10",children:[(0,m.jsxs)("header",{className:"flex justify-between items-start pb-4 border-b",children:[(0,m.jsxs)("div",{children:[t.businessInfo.logoUrl&&m.jsx("img",{src:t.businessInfo.logoUrl,alt:"Company Logo",className:"h-16 max-w-xs object-contain mb-4"}),m.jsx("h2",{className:"text-xl font-bold text-slate-800",children:t.businessInfo.name}),m.jsx("p",{className:"text-slate-600",children:t.businessInfo.location}),(0,m.jsxs)("p",{className:"text-slate-600",children:["Tel: ",t.businessInfo.phone]})]}),(0,m.jsxs)("div",{className:"text-right",children:[m.jsx("h1",{className:"text-3xl font-bold uppercase text-slate-700 tracking-wide",children:"Sales Order"}),(0,m.jsxs)("div",{className:"mt-2 text-xs",children:[(0,m.jsxs)("p",{className:"flex justify-end gap-2",children:[m.jsx("span",{className:"text-slate-500",children:"Order #:"})," ",m.jsx("span",{className:"font-semibold",children:e.id})]}),(0,m.jsxs)("p",{className:"flex justify-end gap-2",children:[m.jsx("span",{className:"text-slate-500",children:"Date:"})," ",m.jsx("span",{className:"font-semibold",children:new Date(e.createdDate).toLocaleDateString("en-GB",{timeZone:"Africa/Nairobi"})})]}),(0,m.jsxs)("p",{className:"flex justify-end gap-2",children:[m.jsx("span",{className:"text-slate-500",children:"Delivery By:"})," ",m.jsx("span",{className:"font-semibold",children:e.deliveryDate?new Date(e.deliveryDate).toLocaleDateString("en-GB",{timeZone:"Africa/Nairobi"}):"N/A"})]})]})]})]}),(0,m.jsxs)("section",{className:"mt-8",children:[m.jsx("h3",{className:"text-xs uppercase font-bold text-slate-500 mb-2",children:"Customer"}),m.jsx("p",{className:"font-bold text-slate-800",children:e.customerName})]}),m.jsx("section",{className:"mt-8",children:(0,m.jsxs)("table",{className:"w-full text-left",children:[m.jsx("thead",{children:(0,m.jsxs)("tr",{className:"bg-slate-100 text-slate-600 uppercase text-xs",children:[m.jsx("th",{className:"p-3 font-semibold",children:"Item Description"}),m.jsx("th",{className:"p-3 font-semibold text-center",children:"Qty"}),m.jsx("th",{className:"p-3 font-semibold text-right",children:"Unit Price"}),m.jsx("th",{className:"p-3 font-semibold text-right",children:"Total"})]})}),m.jsx("tbody",{children:e.items.map(e=>(0,m.jsxs)("tr",{className:"border-b",children:[m.jsx("td",{className:"p-3",children:e.description}),m.jsx("td",{className:"p-3 text-center",children:e.quantity}),m.jsx("td",{className:"p-3 text-right font-mono",children:e.unitPrice.toFixed(2)}),m.jsx("td",{className:"p-3 text-right font-mono font-semibold",children:(e.unitPrice*e.quantity).toFixed(2)})]},e.id))})]})}),m.jsx("section",{className:"flex justify-end mt-8",children:(0,m.jsxs)("div",{className:"w-full max-w-xs space-y-2",children:[(0,m.jsxs)("div",{className:"flex justify-between text-lg font-bold",children:[m.jsx("span",{className:"text-slate-800",children:"Total"}),(0,m.jsxs)("span",{className:"font-mono text-slate-800",children:["Ksh ",e.total.toFixed(2)]})]}),(0,m.jsxs)("div",{className:"flex justify-between text-sm",children:[m.jsx("span",{className:"text-slate-600",children:"Deposit Paid"}),m.jsx("span",{className:"font-mono text-slate-800",children:e.deposit.toFixed(2)})]}),(0,m.jsxs)("div",{className:"flex justify-between text-lg font-bold border-t pt-2 mt-2 text-red-600",children:[m.jsx("span",{children:"Balance Due"}),(0,m.jsxs)("span",{className:"font-mono",children:["Ksh ",e.balance.toFixed(2)]})]})]})}),m.jsx("footer",{className:"mt-16 pt-4 border-t text-xs text-slate-500 text-center",children:m.jsx("p",{children:"Thank you for your order!"})})]})]})}),NV=({balanceDue:e,onClose:t,onConfirm:r})=>{let[n,a]=(0,g.useState)(e.toString()),[o,i]=(0,g.useState)("Cash"),s=(0,g.useMemo)(()=>"Cash"!==o||""===n?0:Math.max(0,Number(n)-e),[n,e,o]),l=(0,g.useMemo)(()=>"Cash"!==o||Number(n)>=e,[n,e,o]);return m.jsx("div",{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50 p-4",onClick:t,children:(0,m.jsxs)("div",{initial:{scale:.9,y:20,opacity:0},animate:{scale:1,y:0,opacity:1},exit:{scale:.9,y:20,opacity:0},transition:{type:"spring",stiffness:300,damping:30},className:"bg-card dark:bg-dark-card rounded-xl shadow-2xl w-full max-w-md p-6",onClick:e=>e.stopPropagation(),children:[m.jsx("h3",{className:"text-lg font-bold text-foreground dark:text-dark-foreground",children:"Complete Payment"}),(0,m.jsxs)("p",{className:"text-2xl font-bold text-primary dark:text-dark-primary mt-2",children:["Balance Due: Ksh ",e.toFixed(2)]}),(0,m.jsxs)("div",{className:"my-4",children:[m.jsx("label",{className:"block text-sm font-medium text-foreground dark:text-dark-foreground mb-2",children:"Payment Method"}),m.jsx("div",{className:"flex bg-muted dark:bg-dark-muted p-1 rounded-lg",children:["Cash","M-Pesa","Card"].map(e=>m.jsx("button",{onClick:()=>i(e),className:`w-1/3 py-2 text-sm font-bold transition-colors rounded-md ${o===e?"bg-card dark:bg-dark-card shadow text-primary dark:text-dark-primary":"text-foreground-muted dark:text-dark-foreground-muted"}`,children:e},e))})]}),"Cash"===o&&(0,m.jsxs)("div",{children:[m.jsx("label",{htmlFor:"cash-received",className:"block text-sm font-medium text-foreground dark:text-dark-foreground",children:"Cash Received"}),m.jsx("input",{type:"number",id:"cash-received",value:n,onChange:e=>a(e.target.value),className:"mt-1 block w-full px-3 py-2 bg-card dark:bg-dark-card border border-border dark:border-dark-border rounded-md shadow-sm",autoFocus:!0}),s>0&&(0,m.jsxs)("p",{className:"mt-2 text-primary font-semibold",children:["Change: Ksh ",s.toFixed(2)]})]}),(0,m.jsxs)("div",{className:"mt-6 flex justify-end space-x-3",children:[m.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 text-sm font-bold bg-muted dark:bg-dark-muted text-foreground dark:text-dark-foreground rounded-md hover:bg-border dark:hover:bg-dark-border",children:"Cancel"}),m.jsx("button",{onClick:()=>{let t=[];"Cash"===o?t.push({method:"Cash",amount:Number(n)}):t.push({method:o,amount:e}),r(t)},disabled:!l,className:"px-4 py-2 text-sm font-bold text-white bg-primary rounded-md hover:bg-primary-focus disabled:bg-slate-400",children:"Confirm Payment"})]})]})})},Nq=e=>{switch(e){case"Pending":default:return 0;case"Ordered":return 1;case"Partially Received":return 2;case"Received":return 3;case"Completed":return 4;case"Draft":case"Cancelled":return -1}},NG=({currentStatus:e})=>{let t=["Pending","Ordered","Receiving","Received","Completed"],r=Nq(e);return"Cancelled"===e||"Draft"===e?m.jsx("div",{className:"text-center p-4 bg-muted dark:bg-dark-muted/50 rounded-md",children:(0,m.jsxs)("p",{className:`font-bold ${"Cancelled"===e?"text-danger":"text-foreground-muted dark:text-dark-foreground-muted"}`,children:["Order ",e]})}):m.jsx("div",{className:"flex items-center w-full",children:t.map((e,n)=>{let a=n<r,o=n===r;return(0,m.jsxs)(x().Fragment,{children:[(0,m.jsxs)("div",{className:"flex flex-col items-center text-center flex-shrink-0 w-24",children:[m.jsx("div",{animate:{scale:o?1.1:1},transition:{type:"spring",stiffness:300},className:`w-10 h-10 rounded-full flex items-center justify-center text-white font-bold transition-colors duration-300
                                    ${a?"bg-success":o?"bg-primary animate-pulse":"bg-muted dark:bg-dark-muted"}`,children:a?"":n+1}),m.jsx("p",{className:`mt-2 text-xs font-semibold transition-colors duration-300
                                ${o?"text-primary dark:text-dark-primary":a?"text-foreground dark:text-dark-foreground":"text-foreground-muted dark:text-dark-foreground-muted"}`,children:e})]}),n<t.length-1&&m.jsx("div",{className:`flex-grow h-1 transition-colors duration-300 ${a?"bg-success":"bg-muted dark:bg-dark-muted"}`})]},e)})})},Nz=e=>Promise.all(Array.from(e.getElementsByTagName("img")).map(e=>new Promise(t=>{e.complete&&0!==e.naturalHeight?t():(e.onload=()=>t(),e.onerror=()=>{console.warn(`Could not load image for PDF generation: ${e.src}`),t()})}))),NW=({salesOrder:e,onBack:t,onCreatePO:r,onCancelRequest:n,onUpdate:a,settings:o,onDirectComplete:i,sales:s,currentUser:l,onWhatsAppReceiptRequest:A,showToast:c})=>{let[d,u]=(0,g.useState)("Draft"===e.status),[h,f]=(0,g.useState)(e),p=(0,g.useRef)(null),[x,b]=(0,g.useState)(!1),[y,v]=(0,g.useState)(!1),[w,k]=(0,g.useState)(null),B=(0,g.useMemo)(()=>"Completed"!==e.status?null:s.find(t=>t.salesOrderId===e.id&&!t.items.some(e=>e.id.startsWith("SO_DEPOSIT"))),[s,e]);(0,g.useEffect)(()=>{f(e),"Draft"===e.status&&u(!0)},[e]);let j=async t=>{v(!1);try{let r=await i(e,t);k(r)}catch(e){console.error("Failed to complete sales order:",e)}},C=async()=>{if(p.current&&!x){b(!0);try{await Nz(p.current);let t=await (0,An.default)(p.current,{scale:2,useCORS:!0}),r=t.toDataURL("image/png"),n=new sM("p","mm","a4"),a=n.internal.pageSize.getWidth(),o=t.height*a/t.width;n.addImage(r,"PNG",0,0,a,o),n.save(`SalesOrder_${e.id}.pdf`)}catch(e){console.error("Failed to generate PDF:",e),alert("Sorry, there was an error generating the PDF. The logo might be causing an issue.")}finally{b(!1)}}},N="Pending"===e.status&&e.items.some(e=>"Pending"===e.status),S="Received"===e.status&&e.balance>0,F=["Draft","Pending","Ordered"].includes(e.status),E="Draft"===e.status;return w?m.jsx(is,{sale:w,onNewSale:()=>{k(null),B||t()},currentUser:l,settings:o,onWhatsAppReceiptRequest:(e,t)=>A("Receipt",e,t),shouldAutoPrint:!0,showToast:c}):(0,m.jsxs)("div",{className:"p-4 md:p-8 h-full overflow-y-auto bg-muted dark:bg-dark-muted",children:[m.jsx("div",{className:"hidden",children:m.jsx("div",{id:"pdf-content-wrapper",children:m.jsx(NK,{ref:p,salesOrder:e,settings:o})})}),m.jsx(Q,{children:y&&m.jsx(NV,{balanceDue:e.balance,onClose:()=>v(!1),onConfirm:j})}),(0,m.jsxs)("div",{className:"max-w-5xl mx-auto space-y-6",children:[(0,m.jsxs)("div",{className:"flex justify-between items-center",children:[(0,m.jsxs)("div",{children:[m.jsx("h1",{className:"text-3xl font-bold text-foreground dark:text-dark-foreground",children:"Sales Order Details"}),m.jsx("p",{className:"font-mono text-foreground-muted dark:text-dark-foreground-muted",children:e.id})]}),m.jsx("button",{onClick:t,className:"text-sm font-bold text-primary dark:text-dark-primary hover:text-primary-focus",children:" Back to List"})]}),(0,m.jsxs)("div",{className:"bg-card dark:bg-dark-card p-6 rounded-xl shadow-md",children:[m.jsx("h2",{className:"text-lg font-semibold mb-4 text-foreground dark:text-dark-foreground",children:"Order Progress"}),m.jsx(NG,{currentStatus:e.status})]}),(0,m.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,m.jsxs)("div",{className:"lg:col-span-2 bg-card dark:bg-dark-card p-6 rounded-xl shadow-md",children:[m.jsx("h2",{className:"text-lg font-semibold text-foreground dark:text-dark-foreground mb-4 border-b dark:border-dark-border pb-2",children:"Ordered Items"}),m.jsx("ul",{className:"divide-y dark:divide-dark-border max-h-96 overflow-y-auto",children:e.items.map(e=>(0,m.jsxs)("li",{className:"p-3 flex justify-between items-center",children:[(0,m.jsxs)("div",{children:[m.jsx("p",{className:"font-bold text-foreground dark:text-dark-foreground",children:e.description}),(0,m.jsxs)("p",{className:"text-xs text-foreground-muted dark:text-dark-foreground-muted",children:[e.quantity," x Ksh ",e.unitPrice.toFixed(2),"Pending"!==e.status&&` | Received: ${e.quantityReceived||0}/${e.quantity}`]})]}),m.jsx("div",{children:m.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${"Received"===e.status?"bg-success/20 text-success":"Ordered"===e.status?"bg-indigo-500/20 text-indigo-500":"Partially Received"===e.status?"bg-sky-500/20 text-sky-500":"bg-warning/20 text-warning"}`,children:e.status})})]},e.id))})]}),(0,m.jsxs)("div",{className:"space-y-6",children:[(0,m.jsxs)("div",{className:"bg-card dark:bg-dark-card p-6 rounded-xl shadow-md",children:[(0,m.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[m.jsx("h2",{className:"text-lg font-semibold text-foreground dark:text-dark-foreground",children:"Order Information"}),!d&&("Pending"===e.status||"Draft"===e.status)&&m.jsx("button",{onClick:()=>u(!0),className:"text-sm font-bold text-primary dark:text-dark-primary hover:underline",children:"Edit"})]}),d?(0,m.jsxs)("div",{className:"space-y-4 text-sm",children:[(0,m.jsxs)("div",{children:[m.jsx("strong",{className:"text-foreground-muted dark:text-dark-foreground-muted",children:"Customer:"})," ",m.jsx("span",{className:"font-semibold text-foreground dark:text-dark-foreground",children:h.customerName})]}),(0,m.jsxs)("div",{children:[m.jsx("strong",{className:"text-foreground-muted dark:text-dark-foreground-muted",children:"Date:"})," ",m.jsx("span",{className:"font-semibold text-foreground dark:text-dark-foreground",children:new Date(h.createdDate).toLocaleDateString()})]}),(0,m.jsxs)("div",{children:[m.jsx("label",{htmlFor:"deliveryDate",className:"block text-sm font-medium text-foreground dark:text-dark-foreground",children:"Delivery By:"}),m.jsx("input",{type:"date",id:"deliveryDate",name:"deliveryDate",value:(e=>{if(!e)return"";try{return new Date(e).toISOString().split("T")[0]}catch(e){return""}})(h.deliveryDate),onChange:e=>{let{name:t,value:r}=e.target;f(e=>({...e,[t]:r?new Date(r):void 0}))},className:"mt-1 block w-full p-2 border border-border dark:border-dark-border rounded-md bg-background dark:bg-dark-background text-foreground dark:text-dark-foreground"})]}),(0,m.jsxs)("div",{className:"mt-4",children:[m.jsx("label",{htmlFor:"notes",className:"block text-sm font-medium text-foreground dark:text-dark-foreground",children:"Notes/Address:"}),m.jsx("textarea",{id:"notes",name:"notes",value:h.notes||"",onChange:e=>{let{name:t,value:r}=e.target;f(e=>({...e,[t]:r}))},rows:3,className:"mt-1 block w-full p-2 border border-border dark:border-dark-border rounded-md bg-background dark:bg-dark-background text-foreground dark:text-dark-foreground"})]})]}):(0,m.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,m.jsxs)("div",{children:[m.jsx("strong",{className:"text-foreground-muted dark:text-dark-foreground-muted",children:"Customer:"})," ",m.jsx("span",{className:"font-semibold text-foreground dark:text-dark-foreground",children:e.customerName})]}),(0,m.jsxs)("div",{children:[m.jsx("strong",{className:"text-foreground-muted dark:text-dark-foreground-muted",children:"Date:"})," ",m.jsx("span",{className:"font-semibold text-foreground dark:text-dark-foreground",children:new Date(e.createdDate).toLocaleDateString()})]}),(0,m.jsxs)("div",{children:[m.jsx("strong",{className:"text-foreground-muted dark:text-dark-foreground-muted",children:"Delivery By:"})," ",m.jsx("span",{className:"font-semibold text-foreground dark:text-dark-foreground",children:e.deliveryDate?new Date(e.deliveryDate).toLocaleDateString():"N/A"})]}),(0,m.jsxs)("div",{className:"mt-4 pt-4 border-t dark:border-dark-border",children:[m.jsx("strong",{className:"text-foreground-muted dark:text-dark-foreground-muted text-sm",children:"Notes/Address:"}),m.jsx("p",{className:"text-sm p-2 bg-muted dark:bg-dark-muted/50 rounded mt-1 whitespace-pre-wrap",children:e.notes||"No notes provided."})]})]})]}),(0,m.jsxs)("div",{className:"bg-card dark:bg-dark-card p-6 rounded-xl shadow-md space-y-2",children:[(0,m.jsxs)("div",{className:"flex justify-between text-sm",children:[m.jsx("span",{className:"text-foreground-muted dark:text-dark-foreground-muted",children:"Total"}),m.jsx("span",{className:"font-mono font-semibold",children:`Ksh ${e.total.toFixed(2)}`})]}),(0,m.jsxs)("div",{className:"flex justify-between text-sm",children:[m.jsx("span",{className:"text-foreground-muted dark:text-dark-foreground-muted",children:"Deposit Paid"}),m.jsx("span",{className:"font-mono font-semibold",children:`Ksh ${e.deposit.toFixed(2)}`})]}),(0,m.jsxs)("div",{className:"flex justify-between font-bold text-lg text-danger pt-2 border-t dark:border-dark-border",children:[m.jsx("span",{children:"Balance Due"}),m.jsx("span",{className:"font-mono",children:`Ksh ${e.balance.toFixed(2)}`})]})]})]})]}),(0,m.jsxs)("div",{className:"bg-card dark:bg-dark-card p-6 rounded-xl shadow-md flex justify-end items-center gap-4",children:[(0,m.jsxs)("div",{className:"flex-grow text-sm text-foreground-muted dark:text-dark-foreground-muted",children:[E&&m.jsx("p",{children:"This is a draft. Finalize to make it a pending order."}),N&&m.jsx("p",{children:"To be delivered. Create a Purchase Order for required items."}),S&&m.jsx("p",{children:"Ready for delivery. Complete sale to create an invoice and clear the balance."}),"Completed"===e.status&&m.jsx("p",{children:"This order is complete."})]}),d?(0,m.jsxs)(m.Fragment,{children:[m.jsx("button",{onClick:()=>{f(e),u(!1)},whileTap:{scale:.95},className:"bg-muted text-foreground dark:bg-dark-muted dark:text-dark-foreground font-bold py-2 px-4 rounded-lg hover:bg-border dark:hover:bg-dark-border text-sm",children:"Cancel"}),m.jsx("button",{onClick:()=>{a(h),u(!1)},whileTap:{scale:.95},className:"bg-success text-white font-bold py-2 px-4 rounded-lg hover:bg-green-700 text-sm",children:"Save Changes"})]}):(0,m.jsxs)(m.Fragment,{children:[m.jsx("button",{onClick:C,disabled:x,whileTap:{scale:.95},className:"bg-secondary text-white font-bold py-2 px-4 rounded-lg hover:bg-sky-700 text-sm disabled:bg-slate-400",children:x?"Downloading...":"Download PDF"}),F&&m.jsx("button",{onClick:()=>n(e),whileTap:{scale:.95},className:"bg-danger text-white font-bold py-2 px-4 rounded-lg hover:bg-red-700 text-sm",children:"Cancel Order"}),E&&m.jsx("button",{onClick:()=>{a({...h,status:"Pending"}),u(!1)},whileTap:{scale:.95},className:"bg-success text-white font-bold py-2 px-4 rounded-lg hover:bg-green-700 text-sm",children:"Finalize Order"}),N&&m.jsx("button",{onClick:()=>r(e),whileTap:{scale:.95},className:"bg-indigo-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-indigo-700 text-sm",children:"Create PO"}),S&&m.jsx("button",{onClick:()=>v(!0),whileTap:{scale:.95},className:"bg-success text-white font-bold py-2 px-4 rounded-lg hover:bg-green-700 text-sm",children:"Complete Sale"}),B&&m.jsx("button",{onClick:()=>k(B),whileTap:{scale:.95},className:"bg-muted text-foreground dark:bg-dark-muted dark:text-dark-foreground font-bold py-2 px-4 rounded-lg hover:bg-border dark:hover:bg-dark-border text-sm",children:"Reprint Receipt"})]})]})]})]})},N$=({onConfirm:e,onClose:t})=>{let[r,n]=(0,g.useState)("");return m.jsx("div",{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50 p-4",children:(0,m.jsxs)("div",{initial:{scale:.9,y:20,opacity:0},animate:{scale:1,y:0,opacity:1},exit:{scale:.9,y:20,opacity:0},transition:{type:"spring",stiffness:300,damping:30},className:"bg-card dark:bg-dark-card rounded-xl shadow-2xl w-full max-w-md p-6",children:[m.jsx("h3",{className:"text-lg font-bold text-foreground dark:text-dark-foreground",children:"Hold Current Sale"}),m.jsx("p",{className:"text-sm text-foreground-muted dark:text-dark-foreground-muted mt-2",children:"Enter an optional name to easily identify this sale later."}),(0,m.jsxs)("form",{onSubmit:t=>{t.preventDefault(),e(r)},className:"mt-4 space-y-4",children:[(0,m.jsxs)("div",{children:[m.jsx("label",{htmlFor:"hold-name",className:"sr-only",children:"Hold Name"}),m.jsx("input",{type:"text",id:"hold-name",value:r,onChange:e=>n(e.target.value),placeholder:`e.g., Held at ${new Date().toLocaleTimeString()}`,className:"block w-full px-3 py-2 bg-card dark:bg-dark-card border border-border dark:border-dark-border rounded-md shadow-sm focus:outline-none focus:ring-primary dark:focus:ring-dark-primary sm:text-sm",autoFocus:!0})]}),(0,m.jsxs)("div",{className:"mt-6 flex justify-end space-x-3",children:[m.jsx("button",{type:"button",onClick:t,whileTap:{scale:.95},className:"px-4 py-2 text-sm font-bold bg-muted dark:bg-dark-muted text-foreground dark:text-dark-foreground rounded-md hover:bg-border dark:hover:bg-dark-border",children:"Cancel"}),m.jsx("button",{type:"submit",whileTap:{scale:.95},className:"px-4 py-2 text-sm font-bold text-white bg-primary rounded-md hover:bg-primary-focus",children:"Hold Sale"})]})]})]})})},NX=({heldReceipts:e,onRecallReceipt:t,onDeleteReceiptRequest:r})=>{let n=e=>e.reduce((e,t)=>e+t.price*t.quantity,0);return(0,m.jsxs)("div",{className:"p-4 md:p-8 h-full overflow-y-auto",children:[m.jsx("h1",{className:"text-4xl font-bold text-foreground dark:text-dark-foreground mb-6",children:"Held Receipts"}),0===e.length?m.jsx("div",{className:"text-center py-10 text-foreground-muted dark:text-dark-foreground-muted",children:m.jsx("p",{children:"There are no held receipts."})}):m.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:e.map(e=>(0,m.jsxs)("div",{layout:!0,initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"bg-card dark:bg-dark-card rounded-lg shadow-md flex flex-col border border-border dark:border-dark-border",children:[(0,m.jsxs)("div",{className:"p-4 border-b border-border dark:border-dark-border",children:[m.jsx("h3",{className:"text-lg font-bold text-foreground dark:text-dark-foreground truncate",children:e.name}),(0,m.jsxs)("p",{className:"text-xs text-foreground-muted dark:text-dark-foreground-muted",children:["Held by ",e.cashierName," at ",new Date(e.heldAt).toLocaleTimeString()]})]}),(0,m.jsxs)("div",{className:"p-4 flex-grow",children:[(0,m.jsxs)("div",{className:"flex justify-between text-sm",children:[m.jsx("span",{className:"text-foreground-muted dark:text-dark-foreground-muted",children:"Items"}),m.jsx("span",{className:"font-semibold text-foreground dark:text-dark-foreground",children:e.items.reduce((e,t)=>e+t.quantity,0)})]}),(0,m.jsxs)("div",{className:"flex justify-between text-sm mt-1",children:[m.jsx("span",{className:"text-foreground-muted dark:text-dark-foreground-muted",children:"Total"}),(0,m.jsxs)("span",{className:"font-semibold font-mono text-foreground dark:text-dark-foreground",children:["Ksh ",n(e.items).toFixed(2)]})]})]}),(0,m.jsxs)("div",{className:"p-2 bg-muted dark:bg-dark-muted/50 flex justify-end gap-2 rounded-b-lg",children:[m.jsx("button",{onClick:()=>r(e),className:"px-3 py-1 text-sm font-semibold text-danger bg-danger/10 hover:bg-danger/20 rounded-md",children:"Delete"}),m.jsx("button",{onClick:()=>t(e),className:"px-3 py-1 text-sm font-semibold text-primary-content bg-primary hover:bg-primary-focus rounded-md",children:"Recall"})]})]},e.id))})]})},NY=({title:e,value:t,onClick:r,isActive:n,children:a})=>(0,m.jsxs)("div",{onClick:r,className:`p-4 rounded-xl shadow-sm border border-border dark:border-dark-border flex items-center space-x-3 cursor-pointer transition-all duration-200 ${n?"bg-primary dark:bg-dark-primary text-primary-content dark:text-dark-primary-content":"bg-card dark:bg-dark-card hover:bg-muted dark:hover:bg-dark-muted"}`,whileHover:{y:-3,scale:1.02},children:[m.jsx("div",{className:`p-3 rounded-full ${n?"bg-white/20 text-white":"bg-primary/10 text-primary dark:bg-dark-primary/20 dark:text-dark-primary"}`,children:a}),(0,m.jsxs)("div",{children:[m.jsx("p",{className:`text-sm font-semibold ${n?"text-white/80 dark:text-dark-primary-content/80":"text-foreground-muted dark:text-dark-foreground-muted"}`,children:e}),m.jsx("p",{className:`text-2xl font-bold ${n?"text-white dark:text-dark-primary-content":"text-foreground dark:text-dark-foreground"}`,children:t})]})]}),NJ=(e,t)=>{let r=["date","saleId","method","amount","cashierName"],n=new Blob([[r.join(","),...e.map(e=>r.map(t=>{let r=e[t];return"date"===t&&r instanceof Date?r.toISOString():"string"==typeof r&&r.includes(",")?`"${r}"`:r}).join(","))].join("\n")],{type:"text/csv"}),a=window.URL.createObjectURL(n),o=document.createElement("a");o.setAttribute("hidden",""),o.setAttribute("href",a),o.setAttribute("download",t),document.body.appendChild(o),o.click(),document.body.removeChild(o)},NZ=({sales:e})=>{let[t,r]=(0,g.useState)(""),[n,a]=(0,g.useState)(""),[o,i]=(0,g.useState)("All"),[s,l]=(0,g.useState)(1),A=(0,g.useMemo)(()=>e.flatMap(e=>e.payments.map(t=>({...t,saleId:e.id,date:new Date(e.date),cashierName:e.cashierName}))).sort((e,t)=>t.date.getTime()-e.date.getTime()),[e]),c=(0,g.useMemo)(()=>{let e=t?new Date(t):null;e&&e.setHours(0,0,0,0);let r=n?new Date(n):null;return r&&r.setHours(23,59,59,999),A.filter(t=>(!e||!(t.date<e))&&(!r||!(t.date>r)))},[A,t,n]),d=(0,g.useMemo)(()=>c.reduce((e,t)=>(e.All=(e.All||0)+t.amount,e[t.method]=(e[t.method]||0)+t.amount,e),{}),[c]),u=(0,g.useMemo)(()=>(l(1),"All"===o)?c:c.filter(e=>e.method===o),[c,o]),h=(0,g.useMemo)(()=>{let e=(s-1)*20;return u.slice(e,e+20)},[u,s]),f=Math.ceil(u.length/20),p=(e=0)=>`Ksh ${e.toFixed(2)}`;return(0,m.jsxs)("div",{className:"p-4 md:p-8 h-full overflow-y-auto",children:[m.jsx("h1",{className:"text-4xl font-bold text-foreground dark:text-dark-foreground",children:"Payment Summary"}),(0,m.jsxs)("div",{className:"my-6 p-4 bg-card dark:bg-dark-card rounded-xl shadow-sm border border-border dark:border-dark-border grid grid-cols-1 md:grid-cols-3 gap-4",children:[m.jsx("input",{type:"date",value:t,onChange:e=>r(e.target.value),className:"w-full px-4 py-2 rounded-lg border border-border dark:border-dark-border bg-card dark:bg-dark-background"}),m.jsx("input",{type:"date",value:n,onChange:e=>a(e.target.value),className:"w-full px-4 py-2 rounded-lg border border-border dark:border-dark-border bg-card dark:bg-dark-background"}),(0,m.jsxs)("button",{onClick:()=>NJ(u,`payment_summary_${t}_${n}.csv`),className:"bg-foreground/80 dark:bg-dark-border text-white font-bold px-4 py-2 rounded-lg hover:bg-foreground dark:hover:bg-dark-border/80 transition-colors shadow-md flex items-center justify-center text-sm",children:[m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),"Export to CSV"]})]}),(0,m.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-4 mb-6",children:[m.jsx(NY,{title:"Total Payments",value:p(d.All),onClick:()=>i("All"),isActive:"All"===o,children:m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 9V7a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2m2 4h10a2 2 0 002-2v-6a2 2 0 00-2-2H9a2 2 0 00-2 2v6a2 2 0 002 2zm7-5a2 2 0 11-4 0 2 2 0 014 0z"})})}),m.jsx(NY,{title:"Cash",value:p(d.Cash),onClick:()=>i("Cash"),isActive:"Cash"===o,children:m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14.121 15.536c-1.171 1.952-3.07 1.952-4.242 0-1.172-1.953-1.172-5.119 0-7.072 1.171-1.952 3.07-1.952 4.242 0 1.172 1.953 1.172 5.119 0 7.072z"})})}),m.jsx(NY,{title:"M-Pesa",value:p(d["M-Pesa"]),onClick:()=>i("M-Pesa"),isActive:"M-Pesa"===o,children:m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 18h.01M8 21h8a2 2 0 002-2V5a2 2 0 00-2-2H8a2 2 0 00-2 2v14a2 2 0 002 2z"})})}),m.jsx(NY,{title:"Card",value:p(d.Card),onClick:()=>i("Card"),isActive:"Card"===o,children:m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"})})}),m.jsx(NY,{title:"Points",value:p(d.Points),onClick:()=>i("Points"),isActive:"Points"===o,children:m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})})})]}),(0,m.jsxs)("div",{className:"bg-card dark:bg-dark-card rounded-xl shadow-sm border border-border dark:border-dark-border overflow-x-auto",children:[(0,m.jsxs)("table",{className:"w-full text-sm text-left text-foreground-muted dark:text-dark-foreground-muted",children:[m.jsx("thead",{className:"text-xs text-foreground dark:text-dark-foreground uppercase bg-muted dark:bg-dark-muted font-bold",children:(0,m.jsxs)("tr",{children:[m.jsx("th",{scope:"col",className:"px-6 py-3",children:"Date"}),m.jsx("th",{scope:"col",className:"px-6 py-3",children:"Receipt ID"}),m.jsx("th",{scope:"col",className:"px-6 py-3",children:"Method"}),m.jsx("th",{scope:"col",className:"px-6 py-3",children:"Cashier"}),m.jsx("th",{scope:"col",className:"px-6 py-3 text-right",children:"Amount"})]})}),(0,m.jsxs)("tbody",{children:[h.map((e,t)=>(0,m.jsxs)("tr",{className:"border-b dark:border-dark-border hover:bg-muted dark:hover:bg-dark-muted",children:[m.jsx("td",{className:"px-6 py-4",children:e.date.toLocaleString("en-GB",{timeZone:"Africa/Nairobi"})}),m.jsx("td",{className:"px-6 py-4 font-mono text-xs",children:e.saleId}),m.jsx("td",{className:"px-6 py-4",children:m.jsx("span",{className:"font-semibold",children:e.method})}),m.jsx("td",{className:"px-6 py-4",children:e.cashierName}),m.jsx("td",{className:"px-6 py-4 text-right font-mono font-semibold",children:p(e.amount)})]},`${e.saleId}-${t}`)),0===u.length&&m.jsx("tr",{children:m.jsx("td",{colSpan:5,className:"text-center py-10 text-foreground-muted dark:text-dark-foreground-muted",children:"No transactions found for the selected criteria."})})]})]}),f>1&&(0,m.jsxs)("div",{className:"flex justify-between items-center p-4 text-sm border-t border-border dark:border-dark-border",children:[m.jsx("button",{onClick:()=>l(e=>Math.max(1,e-1)),disabled:1===s,className:"px-3 py-1 border rounded-md disabled:opacity-50 dark:border-dark-border",children:"Previous"}),(0,m.jsxs)("span",{children:["Page ",s," of ",f]}),m.jsx("button",{onClick:()=>l(e=>Math.min(f,e+1)),disabled:s===f,className:"px-3 py-1 border rounded-md disabled:opacity-50 dark:border-dark-border",children:"Next"})]})]})]})},N0=({currentUser:e,onUnlock:t,onForceLogout:r})=>{let[n,a]=(0,g.useState)(""),[o,i]=(0,g.useState)(""),[s,l]=(0,g.useState)(0);(0,g.useEffect)(()=>{4===n.length&&A()},[n]);let A=()=>{n===e.pin?t():(i("Incorrect PIN. Please try again."),l(e=>e+1),setTimeout(()=>{a(""),i("")},1e3))},c=e=>{n.length<4&&a(t=>t+e)},d=()=>{a(e=>e.slice(0,-1))};return m.jsx("div",{className:"fixed inset-0 bg-slate-900/80 backdrop-blur-md flex flex-col items-center justify-center z-50 p-4",children:(0,m.jsxs)("div",{className:"w-full max-w-sm text-center",children:[m.jsx("div",{className:"w-20 h-20 rounded-full bg-primary text-primary-content flex items-center justify-center font-bold text-3xl mx-auto mb-4 border-4 border-white/20",children:m.jsx("span",{children:e.name.charAt(0)})}),(0,m.jsxs)("h1",{className:"text-2xl font-bold text-white",children:["Welcome Back, ",e.name]}),m.jsx("p",{className:"text-slate-300 mt-2",children:"Enter your 4-digit PIN to unlock."}),m.jsx("div",{className:"my-8",children:m.jsx(()=>m.jsx("div",{className:"flex justify-center space-x-4",children:[void 0,void 0,void 0,void 0].map((e,t)=>m.jsx("div",{className:`w-4 h-4 rounded-full border-2 ${t<n.length?"bg-green-400 border-green-400":"bg-transparent border-slate-400"}`},t))}),{})}),(0,m.jsxs)(Q,{children:[o&&m.jsx("p",{className:"text-red-400 font-semibold mb-4 h-5",children:o}),!o&&m.jsx("div",{className:"h-5 mb-4"})]}),m.jsx("div",{className:"max-w-xs mx-auto",children:m.jsx(()=>m.jsx("div",{className:"grid grid-cols-3 gap-4",children:["1","2","3","4","5","6","7","8","9","","0",""].map((e,t)=>m.jsx("button",{onClick:()=>""===e?d():e?c(e):null,className:"p-4 bg-white/10 backdrop-blur-sm text-white rounded-full text-2xl font-bold enabled:hover:bg-white/20 disabled:opacity-0 transition-colors",disabled:!e,children:e},t))}),{})}),m.jsx("div",{className:"mt-8",children:m.jsx("button",{onClick:r,className:"text-sm font-medium text-primary hover:text-dark-primary-focus",children:"Not you? Logout"})})]})})},N1=({salesOrder:e,customerPhone:t,onStartNew:r})=>{let n=`Hello ${e.customerName}, your order *#${e.id}* has been confirmed! Total is Ksh ${e.total.toFixed(2)}. We will notify you when it's ready for collection/delivery. Thank you!`,a=`https://wa.me/${t}?text=${encodeURIComponent(n)}`;return(0,m.jsxs)("div",{className:"text-center",children:[m.jsx("div",{initial:{scale:0},animate:{scale:1},transition:{type:"spring",stiffness:260,damping:20},className:"mx-auto bg-green-100 dark:bg-green-900/50 text-green-600 dark:text-green-400 w-24 h-24 rounded-full flex items-center justify-center mb-6",children:m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-12 w-12",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),m.jsx("h2",{className:"text-2xl font-bold text-foreground dark:text-dark-foreground",children:"Sales Order Created!"}),(0,m.jsxs)("p",{className:"text-foreground-muted dark:text-dark-foreground-muted mt-2",children:["Sales Order ",m.jsx("span",{className:"font-bold text-foreground dark:text-dark-foreground",children:e.id})," has been successfully created for ",e.customerName,"."]}),(0,m.jsxs)("div",{className:"mt-8 flex flex-col sm:flex-row justify-center gap-4",children:[(0,m.jsxs)("a",{href:a,target:"_blank",rel:"noopener noreferrer",className:"bg-[#25D366] text-white font-bold py-3 px-6 rounded-lg hover:bg-[#1EAE53] transition-colors shadow-md flex items-center justify-center",children:[m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",className:"mr-2",children:m.jsx("path",{d:"M.057 24l1.687-6.163c-1.041-1.804-1.588-3.849-1.587-5.946.003-6.556 5.338-11.891 11.893-11.891 3.181.001 6.167 1.24 8.413 3.488 2.245 2.248 3.481 5.236 3.48 8.414-.003 6.557-5.338 11.892-11.894 11.892-1.99-.001-3.951-.5-5.688-1.448l-6.305 1.654zm6.597-3.807c1.676.995 3.276 1.591 5.392 1.592 5.448 0 9.886-4.434 9.889-9.885.002-5.462-4.415-9.89-9.881-9.892-5.452 0-9.887 4.434-9.889 9.884-.001 2.225.651 3.891 1.746 5.634l-.999 3.648 3.742-.981zm11.387-5.464c-.074-.124-.272-.198-.57-.347-.297-.149-1.758-.868-2.031-.967-.272-.099-.47-.149-.669.149-.198.297-.768.967-.941 1.165-.173.198-.347.223-.644.074-.297-.149-1.255-.462-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.297-.347.446-.521.151-.172.2-.296.3-.495.099-.198.05-.371-.025-.521-.075-.148-.669-1.611-.916-2.206-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01s-.521.074-.792.372c-.272.296-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.626.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.695.248-1.29.173-1.414z"})}),"Send Confirmation"]}),m.jsx("button",{onClick:r,whileTap:{scale:.95},className:"bg-muted dark:bg-dark-muted text-foreground dark:text-dark-foreground font-bold py-3 px-6 rounded-lg hover:bg-border dark:hover:bg-dark-border",children:"Process New Order"})]})]})},N2=({products:e,customers:t,settings:r,activeShift:n,onAddSalesOrder:a,onBack:o})=>{let[i,s]=(0,g.useState)(""),[l,A]=(0,g.useState)(null),[c,d]=(0,g.useState)([]),[u,h]=(0,g.useState)(!1),[f,p]=(0,g.useState)(""),[x,b]=(0,g.useState)(null),y=(0,g.useMemo)(()=>new GoogleGenAI({apiKey:process.env.API_KEY}),[]),v={type:Type.OBJECT,properties:{customerPhoneNumber:{type:Type.STRING,description:"The customer's phone number in E.164 format (e.g., +254712345678). Infer from message if possible."},customerName:{type:Type.STRING,description:"The customer's name, if mentioned."},items:{type:Type.ARRAY,items:{type:Type.OBJECT,properties:{productName:{type:Type.STRING,description:"The name of the product requested by the customer."},inventoryCode:{type:Type.STRING,description:"The inventoryCode of the matched product from the provided list. If no exact match, leave empty."},quantity:{type:Type.INTEGER,description:"The quantity of the product requested."}}}},unmatchedItems:{type:Type.ARRAY,items:{type:Type.STRING},description:"A list of item descriptions mentioned by the customer that could not be confidently matched to any product in the provided list."}}},w=async()=>{if(!i.trim())return;h(!0),p(""),A(null),d([]);let t=e.map(e=>({inventoryCode:e.inventoryCode,name:e.name,price:e.price})),r=`
            Here is a list of available products with their inventoryCode, name, and price:
            ${JSON.stringify(t)}

            Here is a WhatsApp conversation from a customer:
            ---
            ${i}
            ---

            Please parse the conversation and extract the order details. The customer's phone number should be in E.164 format, assuming it's a Kenyan number if no country code is provided (prefix with +254 and remove leading 0).
        `;try{let t=await y.models.generateContent({model:"gemini-2.5-flash",contents:r,config:{responseMimeType:"application/json",responseSchema:v}}),n=JSON.parse(t.text);A(n);let a=[];for(let t of n.items){let r=e.find(e=>e.inventoryCode===t.inventoryCode||e.name.toLowerCase()===t.productName.toLowerCase());r?a.push({id:crypto.randomUUID(),productId:r.id,description:r.name,quantity:t.quantity,unitPrice:r.price,pricingType:r.pricingType,status:"Pending",quantityReceived:0}):n.unmatchedItems.push(`${t.quantity} x ${t.productName}`)}d(a)}catch(e){console.error("Gemini API Error:",e),p("Failed to parse conversation with AI. Please check the text or try again.")}finally{h(!1)}},k=async()=>{if(!l||0===c.length){p("No valid items to create an order.");return}let e=c.reduce((e,t)=>e+t.unitPrice*t.quantity,0),r=t.find(e=>e.phone.replace(/\s/g,"")===l.customerPhoneNumber.replace(/\s/g,""));r||(r=t.find(e=>"cust001"===e.id));let n={customerId:r.id,customerName:l.customerName||r.name,items:c,total:e,deposit:0,status:"Pending",createdDate:new Date,notes:`Order received via WhatsApp from ${l.customerName} (${l.customerPhoneNumber}). Unmatched items: ${l.unmatchedItems.join(", ")||"None"}`};try{let e=await a(n);b(e)}catch(e){p("Failed to create sales order.")}};return n?x&&l?m.jsx("div",{className:"h-full flex items-center justify-center p-4",children:m.jsx(N1,{salesOrder:x,customerPhone:l.customerPhoneNumber,onStartNew:()=>{s(""),A(null),d([]),p(""),b(null)}})}):m.jsx("div",{className:"p-4 md:p-8 h-full overflow-y-auto bg-background dark:bg-dark-background",children:(0,m.jsxs)("div",{className:"max-w-6xl mx-auto",children:[(0,m.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[m.jsx("h1",{className:"text-3xl font-bold text-foreground dark:text-dark-foreground",children:"Process WhatsApp Order"}),m.jsx("button",{onClick:o,className:"text-sm font-bold text-primary dark:text-dark-primary hover:text-primary-focus",children:" Back to POS"})]}),(0,m.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,m.jsxs)("div",{className:"bg-card dark:bg-dark-card p-6 rounded-xl shadow-md space-y-4",children:[m.jsx("h2",{className:"text-lg font-semibold text-foreground dark:text-dark-foreground",children:"1. Paste Conversation"}),m.jsx("textarea",{value:i,onChange:e=>s(e.target.value),rows:15,placeholder:"Paste the customer's WhatsApp chat here...",className:"w-full p-3 border border-border dark:border-dark-border rounded-md focus:ring-primary focus:border-primary bg-background dark:bg-dark-background"}),m.jsx("button",{onClick:w,disabled:u,whileTap:{scale:.98},className:"w-full bg-primary text-primary-content font-bold py-3 rounded-lg text-lg hover:bg-primary-focus disabled:bg-slate-400 flex items-center justify-center",children:u?(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[m.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),m.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Parsing..."]}):"Parse with AI"}),f&&m.jsx("p",{className:"text-danger text-sm text-center",children:f})]}),(0,m.jsxs)("div",{className:"bg-card dark:bg-dark-card p-6 rounded-xl shadow-md",children:[m.jsx("h2",{className:"text-lg font-semibold text-foreground dark:text-dark-foreground",children:"2. Review & Create Order"}),m.jsx(Q,{mode:"wait",children:l?(0,m.jsxs)("div",{initial:{opacity:0},animate:{opacity:1},className:"space-y-4 mt-4",children:[(0,m.jsxs)("div",{children:[m.jsx("h3",{className:"font-bold text-foreground-muted dark:text-dark-foreground-muted",children:"Customer Details"}),(0,m.jsxs)("p",{children:[m.jsx("strong",{children:"Name:"})," ",l.customerName||"N/A"]}),(0,m.jsxs)("p",{children:[m.jsx("strong",{children:"Phone:"})," ",l.customerPhoneNumber]})]}),(0,m.jsxs)("div",{children:[m.jsx("h3",{className:"font-bold text-foreground-muted dark:text-dark-foreground-muted",children:"Matched Items"}),c.length>0?m.jsx("ul",{className:"divide-y divide-border dark:divide-dark-border",children:c.map(e=>(0,m.jsxs)("li",{className:"py-2 flex justify-between",children:[(0,m.jsxs)("span",{children:[e.quantity," x ",e.description]}),(0,m.jsxs)("span",{className:"font-mono",children:["Ksh ",(e.unitPrice*e.quantity).toFixed(2)]})]},e.id))}):m.jsx("p",{className:"text-sm text-foreground-muted dark:text-dark-foreground-muted",children:"No items were matched to your products."})]}),l.unmatchedItems.length>0&&(0,m.jsxs)("div",{className:"p-3 bg-amber-50 dark:bg-dark-warning/10 border border-amber-200 dark:border-dark-warning/20 rounded-md",children:[m.jsx("h3",{className:"font-bold text-amber-800 dark:text-dark-warning",children:"Unmatched Items"}),m.jsx("ul",{className:"text-sm text-amber-700 dark:text-dark-warning/80 list-disc list-inside",children:l.unmatchedItems.map((e,t)=>m.jsx("li",{children:e},t))})]}),(0,m.jsxs)("div",{className:"border-t dark:border-dark-border pt-2 flex justify-between font-bold text-lg",children:[m.jsx("span",{children:"Total"}),(0,m.jsxs)("span",{className:"font-mono",children:["Ksh ",c.reduce((e,t)=>e+t.unitPrice*t.quantity,0).toFixed(2)]})]}),m.jsx("button",{onClick:k,disabled:0===c.length,whileTap:{scale:.98},className:"w-full bg-primary text-primary-content font-bold py-3 rounded-lg text-lg hover:bg-primary-focus disabled:bg-slate-400",children:"Create Sales Order"})]},"preview"):m.jsx("div",{initial:{opacity:0},animate:{opacity:1},className:"flex items-center justify-center h-full text-foreground-muted dark:text-dark-foreground-muted",children:m.jsx("p",{children:"AI-parsed order details will appear here."})},"placeholder")})]})]})]})}):(0,m.jsxs)("div",{className:"p-8 h-full flex flex-col items-center justify-center text-center",children:[m.jsx("h1",{className:"text-2xl font-bold text-foreground dark:text-dark-foreground",children:"Shift Not Active"}),m.jsx("p",{className:"mt-2 text-foreground-muted dark:text-dark-foreground-muted",children:"You must start a shift before processing WhatsApp orders."}),m.jsx("button",{onClick:o,className:"mt-6 bg-primary text-primary-content font-bold py-2 px-6 rounded-lg",children:"Back to POS"})]})},N5=({onBack:e,onOpenDrawer:t})=>m.jsx("div",{className:"p-4 md:p-8 h-full overflow-y-auto bg-slate-50 dark:bg-dark-background flex items-center justify-center",children:(0,m.jsxs)("div",{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"w-full max-w-md bg-card dark:bg-dark-card p-8 rounded-xl shadow-xl text-center",children:[m.jsx("div",{className:"mx-auto bg-muted dark:bg-dark-muted text-foreground dark:text-dark-foreground w-24 h-24 rounded-full flex items-center justify-center mb-6 border-4 border-card dark:border-dark-card",children:m.jsx("div",{className:"w-12 h-12",children:ox.openDrawer})}),m.jsx("h1",{className:"text-3xl font-bold text-foreground dark:text-dark-foreground",children:"Open Cash Drawer"}),m.jsx("p",{className:"text-foreground-muted dark:text-dark-foreground-muted mt-4 mb-8",children:"Click the button below to send a signal to the connected receipt printer to open the cash drawer."}),m.jsx("button",{onClick:t,whileTap:{scale:.95},className:"w-full bg-primary dark:bg-dark-primary text-primary-content font-bold py-4 rounded-lg text-lg hover:bg-primary-focus dark:hover:bg-dark-primary-focus transition-colors shadow-lg",children:"Open Drawer"}),m.jsx("div",{className:"mt-6 p-3 bg-amber-50 dark:bg-dark-warning/10 border border-amber-200 dark:border-dark-warning/20 rounded-lg text-xs text-amber-800 dark:text-dark-warning",children:(0,m.jsxs)("p",{children:[m.jsx("strong",{children:"Security Notice:"})," This action will be recorded in the system's audit log for security and accountability purposes."]})}),m.jsx("button",{onClick:e,className:"mt-8 text-sm font-bold text-primary dark:text-dark-primary hover:underline",children:" Back to Point of Sale"})]})}),N4=()=>(0,m.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"text-red-500",children:[m.jsx("circle",{cx:"12",cy:"12",r:"10"}),m.jsx("polyline",{points:"8 12 12 16 16 12"}),m.jsx("line",{x1:"12",y1:"8",x2:"12",y2:"16"})]}),N3=()=>(0,m.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"text-green-500",children:[m.jsx("circle",{cx:"12",cy:"12",r:"10"}),m.jsx("polyline",{points:"16 12 12 8 8 12"}),m.jsx("line",{x1:"12",y1:"16",x2:"12",y2:"8"})]}),N6=()=>(0,m.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"text-blue-500",children:[m.jsx("line",{x1:"12",y1:"2",x2:"12",y2:"22"}),m.jsx("path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"})]}),N8=({title:e,value:t,icon:r,isWarning:n})=>(0,m.jsxs)("div",{className:`bg-card dark:bg-dark-card p-4 rounded-xl shadow-sm flex items-center space-x-4 border ${n?"border-red-300 dark:border-red-500/50":"border-border dark:border-dark-border"}`,children:[m.jsx("div",{className:`p-3 rounded-lg ${n?"text-red-500 bg-red-100 dark:bg-red-900/50":"text-primary dark:text-dark-primary bg-muted dark:bg-dark-muted"}`,children:r}),(0,m.jsxs)("div",{children:[m.jsx("p",{className:"text-sm text-foreground-muted dark:text-dark-foreground-muted font-semibold",children:e}),m.jsx("p",{className:"text-xl font-bold text-foreground dark:text-dark-foreground",children:t})]})]}),N7=(e,t,r)=>{let n={};return e.forEach(e=>{let a=new Date(e[t]),o=`${a.getFullYear()}-${String(a.getMonth()+1).padStart(2,"0")}`;n[o]||(n[o]={month:a.toLocaleString("default",{month:"long",year:"numeric"})},r.forEach(e=>n[o][e.key]=0)),r.forEach(t=>{n[o][t.key]+=e[t.key]||0})}),Object.values(n).sort((e,t)=>new Date(t.month).getTime()-new Date(e.month).getTime())},N9=e=>null==e?"":String(e).replace(/[<>&'"]/g,e=>{switch(e){case"<":return"&lt;";case">":return"&gt;";case"&":return"&amp;";case"'":return"&apos;";case'"':return"&quot;";default:return""}}),Se=(e,t,r)=>{let n=e.map(e=>{let r=t.map(t=>{let r=e[t.key],n=r;return"date"===t.key&&r instanceof Date?n=r.toLocaleString():"number"!=typeof r||["quantity","itemsSold"].includes(t.key)||(n=r.toFixed(2)),`<td>${N9(n)}</td>`}).join("");return`<tr>${r}</tr>`}).join(""),a=new Blob([`
        <html xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:x="urn:schemas-microsoft-com:office:excel" xmlns="http://www.w3.org/TR/REC-html40">
        <head><meta charset="UTF-8"><!--[if gte mso 9]><xml><x:ExcelWorkbook><x:ExcelWorksheets><x:ExcelWorksheet><x:Name>Tax Report</x:Name><x:WorksheetOptions><x:DisplayGridlines/></x:WorksheetOptions></x:ExcelWorksheet></x:ExcelWorksheets></x:ExcelWorkbook></xml><![endif]--></head>
        <body><table><thead><tr>${t.map(e=>`<th>${e.label}</th>`).join("")}</tr></thead><tbody>${n}</tbody></table></body></html>`],{type:"application/vnd.ms-excel"}),o=URL.createObjectURL(a),i=document.createElement("a");i.href=o,i.download=r,i.click(),URL.revokeObjectURL(o)},St=({sales:e,supplierInvoices:t,settings:r})=>{let[n,a]=(0,g.useState)("SalesVAT"),[o,i]=(0,g.useState)(""),[s,l]=(0,g.useState)(""),A=(0,g.useMemo)(()=>{let t=o?new Date(o):null;t&&t.setHours(0,0,0,0);let r=s?new Date(s):null;return r&&r.setHours(23,59,59,999),e.filter(e=>{let n=new Date(e.date);return(!t||!(n<t))&&(!r||!(n>r))})},[e,o,s]),c=(0,g.useMemo)(()=>{let e=o?new Date(o):null;e&&e.setHours(0,0,0,0);let r=s?new Date(s):null;return r&&r.setHours(23,59,59,999),t.filter(t=>{let n=new Date(t.invoiceDate);return(!e||!(n<e))&&(!r||!(n>r))})},[t,o,s]),d=[{key:"month",label:"Month"},{key:"taxableAmount",label:`Taxable Sales (${r.businessInfo.currency})`},{key:"tax",label:`VAT Payable (${r.tax.vatRate}%) (${r.businessInfo.currency})`},{key:"total",label:`Gross Sales (${r.businessInfo.currency})`}],u=[{key:"month",label:"Month"},{key:"subtotal",label:`Net Purchases (${r.businessInfo.currency})`},{key:"taxAmount",label:`VAT Input (${r.tax.vatRate}%) (${r.businessInfo.currency})`},{key:"totalAmount",label:`Gross Purchases (${r.businessInfo.currency})`}],h=(0,g.useMemo)(()=>N7(A,"date",[{key:"taxableAmount",label:""},{key:"tax",label:""},{key:"total",label:""}]),[A]),f=(0,g.useMemo)(()=>N7(c,"invoiceDate",[{key:"subtotal",label:""},{key:"taxAmount",label:""},{key:"totalAmount",label:""}]),[c]),p=e=>`${r.businessInfo.currency} ${e.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}`,x=(0,g.useMemo)(()=>{let e=A.reduce((e,t)=>e+t.tax,0),t=c.reduce((e,t)=>e+t.taxAmount,0);return{totalSalesVat:e,totalInputVat:t,netVatPosition:e-t}},[A,c]),b=({tab:e,label:t})=>m.jsx("button",{onClick:()=>a(e),className:`px-4 py-2 font-semibold text-sm ${n===e?"border-b-2 border-primary text-primary":"text-foreground-muted"}`,children:t});return(0,m.jsxs)("div",{className:"p-4 md:p-6 h-full overflow-y-auto bg-background dark:bg-dark-background text-foreground dark:text-dark-foreground",children:[(0,m.jsxs)("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-6",children:[(0,m.jsxs)("div",{children:[m.jsx("h1",{className:"text-3xl font-bold",children:"Tax Report"}),m.jsx("p",{className:"text-foreground-muted dark:text-dark-foreground-muted mt-1",children:"View and export VAT information for tax filing"})]}),m.jsx("div",{className:"flex items-center space-x-2 mt-4 md:mt-0",children:(0,m.jsxs)("button",{onClick:()=>{let e="SalesVAT"===n?h:f;if(0===e.length){alert("No data to export for the selected filters.");return}Se(e,"SalesVAT"===n?d:u,"SalesVAT"===n?"vat_on_sales.xls":"vat_on_purchases.xls")},whileTap:{scale:.95},className:"bg-green-600 text-white font-bold px-4 py-2 rounded-lg flex items-center space-x-2 hover:bg-green-700 transition-colors",children:[m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),m.jsx("span",{children:"Export to XLS"})]})})]}),(0,m.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6",children:[m.jsx(N8,{title:"Total VAT Payable (Output)",value:p(x.totalSalesVat),icon:m.jsx(N4,{})}),m.jsx(N8,{title:"Total VAT Claimable (Input)",value:p(x.totalInputVat),icon:m.jsx(N3,{})}),m.jsx(N8,{title:"Net VAT Position",value:p(x.netVatPosition),icon:m.jsx(N6,{}),isWarning:x.netVatPosition>0})]}),(0,m.jsxs)("div",{className:"bg-card dark:bg-dark-card rounded-xl shadow-sm border border-border dark:border-dark-border p-6",children:[(0,m.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[(0,m.jsxs)("div",{children:[m.jsx("label",{htmlFor:"dateFrom",className:"text-sm font-medium text-foreground-muted",children:"From"}),m.jsx("input",{type:"date",id:"dateFrom",value:o,onChange:e=>i(e.target.value),className:"w-full mt-1 px-4 py-2 rounded-lg border border-border dark:border-dark-border bg-background dark:bg-dark-background"})]}),(0,m.jsxs)("div",{children:[m.jsx("label",{htmlFor:"dateTo",className:"text-sm font-medium text-foreground-muted",children:"To"}),m.jsx("input",{type:"date",id:"dateTo",value:s,onChange:e=>l(e.target.value),className:"w-full mt-1 px-4 py-2 rounded-lg border border-border dark:border-dark-border bg-background dark:bg-dark-background"})]})]}),(0,m.jsxs)("div",{className:"flex border-b border-border dark:border-dark-border mb-4",children:[m.jsx(b,{tab:"SalesVAT",label:"VAT on Sales (Payable)"}),m.jsx(b,{tab:"InputVAT",label:"VAT on Purchases (Input)"})]}),m.jsx("div",{className:"overflow-x-auto",children:m.jsx(Q,{mode:"wait",children:m.jsx("div",{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},children:(()=>{let e="SalesVAT"===n?d:u,t="SalesVAT"===n?h:f;return(0,m.jsxs)("table",{className:"w-full text-sm text-left",children:[m.jsx("thead",{className:"text-xs text-foreground-muted dark:text-dark-foreground-muted uppercase",children:m.jsx("tr",{children:e.map(e=>m.jsx("th",{scope:"col",className:"px-4 py-3",children:e.label},e.key))})}),m.jsx("tbody",{className:"divide-y divide-border dark:divide-dark-border",children:t.length>0?t.map(t=>m.jsx("tr",{className:"hover:bg-muted dark:hover:bg-dark-muted",children:e.map(e=>m.jsx("td",{className:`px-4 py-3 ${"month"!==e.key?"font-mono":"font-bold text-foreground dark:text-dark-foreground"}`,children:"number"==typeof t[e.key]?p(t[e.key]):t[e.key]},e.key))},t.month)):m.jsx("tr",{children:m.jsx("td",{colSpan:e.length,className:"text-center py-10 text-foreground-muted",children:"No data available for the selected period."})})})]})})()},n)})})]})]})};var Sr=ky({chartName:"BarChart",GraphicalChild:y8,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:Br},{axisType:"yAxis",AxisComp:Bd}],formatAxisMap:va});let Sn=({title:e,value:t,className:r=""})=>(0,m.jsxs)("div",{className:`bg-card dark:bg-dark-card p-4 rounded-xl shadow-clay-light dark:shadow-clay-dark border border-border dark:border-dark-border ${r}`,variants:{hidden:{y:20,opacity:0},visible:{y:0,opacity:1}},children:[m.jsx("p",{className:"text-sm font-semibold text-foreground-muted dark:text-dark-foreground-muted",children:e}),m.jsx("p",{className:"text-2xl font-bold text-foreground dark:text-dark-foreground mt-1",children:t})]}),Sa=({label:e,range:t,activeRange:r,onClick:n})=>m.jsx("button",{onClick:()=>n(t),className:`px-4 py-1.5 text-sm font-bold rounded-lg transition-colors duration-200 ${r===t?"bg-card dark:bg-dark-card text-primary dark:text-dark-primary shadow-sm":"text-foreground-muted dark:text-dark-foreground-muted hover:text-foreground dark:hover:text-dark-foreground"}`,children:e}),So=({sales:e,products:t,expenses:r,settings:n,showToast:a})=>{let[o]=oy(),[i,s]=(0,g.useState)("week"),{filteredSales:l,filteredExpenses:A}=(0,g.useMemo)(()=>{let t=new Date,n=new Date(t.getFullYear(),t.getMonth(),t.getDate()),a=new Date;if("today"===i)a=n;else if("week"===i){let e=t.getDay(),r=t.getDate()-e+(0===e?-6:1);(a=new Date(t.setDate(r))).setHours(0,0,0,0)}else"month"===i&&(a=new Date(t.getFullYear(),t.getMonth(),1)).setHours(0,0,0,0);return{filteredSales:e.filter(e=>new Date(e.date)>=a),filteredExpenses:r.filter(e=>new Date(e.date)>=a)}},[e,r,i]),c=(0,g.useMemo)(()=>{let e=l.reduce((e,t)=>e+t.total,0),t=l.reduce((e,t)=>e+t.items.reduce((e,t)=>e+(t.costPrice||0)*Math.abs(t.quantity),0),0),r=A.reduce((e,t)=>e+t.amount,0),n=t+r,a=e-n,o=0!==e?a/Math.abs(e)*100:0;return{totalRevenue:e,totalCogs:t,totalPayouts:r,totalExpenses:n,netProfit:a,margin:o}},[l,A]),d=(0,g.useMemo)(()=>{let e,t;let r=new Map,n=new Date;if("today"===i)e=new Date(n.getFullYear(),n.getMonth(),n.getDate()),t=1;else if("week"===i){let r=n.getDay(),a=n.getDate()-r+(0===r?-6:1);(e=new Date(new Date().setDate(a))).setHours(0,0,0,0),t=7}else e=new Date(n.getFullYear(),n.getMonth(),1),t=new Date(n.getFullYear(),n.getMonth()+1,0).getDate();for(let a=0;a<t;a++){let t=new Date(e.getTime());if(t.setDate(t.getDate()+a),t>n)break;let o=t.toLocaleDateString("en-CA");r.set(o,{date:t,profit:0,expenses:0})}for(let e of(l.forEach(e=>{let t=new Date(e.date).toLocaleDateString("en-CA"),n=r.get(t);if(n){let t=e.items.reduce((e,t)=>e+(t.costPrice||0)*Math.abs(t.quantity),0);n.profit+=e.total,n.expenses+=t}}),A.forEach(e=>{let t=new Date(e.date).toLocaleDateString("en-CA"),n=r.get(t);n&&(n.expenses+=e.amount)}),r.values()))e.profit=e.profit-e.expenses;return Array.from(r.values()).map(e=>({name:e.date.toLocaleDateString("en-US",{month:"short",day:"numeric"}),profit:e.profit,expenses:e.expenses}))},[l,A,i]),u=(0,g.useMemo)(()=>{let e=new Map;return l.forEach(t=>{let r=t.subtotal-t.lineItemsDiscountAmount;t.items.forEach(n=>{let a=n.price*Math.abs(n.quantity),o=0;n.discount&&(o="fixed"===n.discount.type?n.discount.value:n.discount.value/100*a);let i=a-o,s=r>0?i/r*t.cartDiscountAmount:0,l=i-s,A=l-(n.costPrice||0)*Math.abs(n.quantity),c=e.get(n.id);c?(c.profit+=A,c.revenue+=l):e.set(n.id,{name:n.name,profit:A,revenue:l,margin:0})})}),Array.from(e.values()).map(e=>({...e,margin:e.revenue>0?e.profit/e.revenue*100:0})).sort((e,t)=>t.profit-e.profit).slice(0,5)},[l]),h=e=>`Ksh ${e.toFixed(2)}`,f="dark"===o?"#444444":"#E0E0E0",p="dark"===o?"#BDBDBD":"#616161";return(0,m.jsxs)("div",{className:"p-4 md:p-8 h-full overflow-y-auto",children:[(0,m.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[m.jsx("h1",{className:"text-3xl font-bold text-foreground dark:text-dark-foreground",children:"Profit & Loss"}),(0,m.jsxs)("div",{className:"flex space-x-1 bg-muted dark:bg-dark-muted p-1 rounded-lg",children:[m.jsx(Sa,{label:"Today",range:"today",activeRange:i,onClick:s}),m.jsx(Sa,{label:"This Week",range:"week",activeRange:i,onClick:s}),m.jsx(Sa,{label:"This Month",range:"month",activeRange:i,onClick:s})]})]}),(0,m.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-6 mb-6",variants:{hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.05}}},initial:"hidden",animate:"visible",children:[m.jsx(Sn,{title:"Total Revenue",value:h(c.totalRevenue)}),m.jsx(Sn,{title:"COGS",value:h(c.totalCogs)}),m.jsx(Sn,{title:"Other Expenses",value:h(c.totalPayouts)}),m.jsx(Sn,{title:"Net Profit",value:h(c.netProfit),className:c.netProfit<0?"text-danger dark:text-dark-danger":"text-success dark:text-dark-success"}),m.jsx(Sn,{title:"Profit Margin",value:`${c.margin.toFixed(2)}%`,className:c.margin<0?"text-danger dark:text-dark-danger":"text-success dark:text-dark-success"})]}),(0,m.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-5 gap-6",children:[(0,m.jsxs)("div",{className:"lg:col-span-3 bg-card dark:bg-dark-card p-4 rounded-xl shadow-sm border border-border dark:border-dark-border",children:[m.jsx("h3",{className:"font-bold text-foreground dark:text-dark-foreground mb-4",children:"Profit vs Expenses"}),m.jsx(gs,{width:"100%",height:300,children:(0,m.jsxs)(Sr,{data:d,children:[m.jsx(BF,{strokeDasharray:"3 3",stroke:f}),m.jsx(Br,{dataKey:"name",stroke:p,fontSize:12}),m.jsx(Bd,{stroke:p,fontSize:12,tickFormatter:e=>`Ksh ${e/1e3}k`}),m.jsx(gH,{contentStyle:{backgroundColor:"dark"===o?"#333333":"#FFFFFF",border:`1px solid ${f}`},formatter:e=>h(e)}),m.jsx(p7,{}),m.jsx(y8,{dataKey:"profit",fill:"dark"===o?"#66BB6A":"#43A047",name:"Net Profit"}),m.jsx(y8,{dataKey:"expenses",fill:"dark"===o?"#EF5350":"#D32F2F",name:"Total Expenses"})]})})]}),(0,m.jsxs)("div",{className:"lg:col-span-2 bg-card dark:bg-dark-card p-4 rounded-xl shadow-sm border border-border dark:border-dark-border",children:[m.jsx("h3",{className:"font-bold text-foreground dark:text-dark-foreground mb-4",children:"Top 5 Products by Profit"}),m.jsx(gs,{width:"100%",height:300,children:(0,m.jsxs)(Sr,{data:u,layout:"vertical",margin:{top:0,right:30,left:20,bottom:0},children:[m.jsx(BF,{strokeDasharray:"3 3",stroke:f}),m.jsx(Br,{type:"number",stroke:p,fontSize:12,tickFormatter:e=>`Ksh ${e/1e3}k`}),m.jsx(Bd,{type:"category",dataKey:"name",width:80,stroke:p,fontSize:10,interval:0}),m.jsx(gH,{contentStyle:{backgroundColor:"dark"===o?"#333333":"#FFFFFF",border:`1px solid ${f}`},formatter:e=>h(e)}),m.jsx(y8,{dataKey:"profit",fill:"dark"===o?"#FF9800":"#FF6F00",name:"Total Profit"})]})})]})]})]})},Si=(e,t="KES")=>`${t} ${e.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}`,Ss=({title:e,value:t,subValue:r,icon:n,iconBg:a})=>m.jsx("div",{className:"bg-card dark:bg-dark-card p-4 rounded-lg shadow-sm border border-border dark:border-dark-border",children:(0,m.jsxs)("div",{className:"flex justify-between items-start",children:[(0,m.jsxs)("div",{className:"space-y-1",children:[m.jsx("p",{className:"text-sm font-semibold text-foreground-muted dark:text-dark-foreground-muted",children:e}),m.jsx("p",{className:"text-3xl font-bold text-foreground dark:text-dark-foreground",children:t}),r&&m.jsx("p",{className:"text-sm font-medium text-foreground-muted dark:text-dark-foreground-muted",children:r})]}),m.jsx("div",{className:`p-3 rounded-lg ${a}`,children:n})]})}),Sl=({title:e,value:t,icon:r})=>(0,m.jsxs)("div",{className:"bg-card dark:bg-dark-card p-4 rounded-lg shadow-sm border border-border dark:border-dark-border flex items-center space-x-3",children:[m.jsx("div",{className:"p-2 rounded-lg bg-muted dark:bg-dark-muted text-primary dark:text-dark-primary",children:r}),(0,m.jsxs)("div",{children:[m.jsx("p",{className:"text-sm font-semibold text-foreground-muted dark:text-dark-foreground-muted",children:e}),m.jsx("p",{className:"text-lg font-bold text-foreground dark:text-dark-foreground",children:t})]})]}),SA=({title:e,value:t})=>(0,m.jsxs)("div",{className:"bg-card dark:bg-dark-card p-4 rounded-lg shadow-sm text-center border border-border dark:border-dark-border",children:[m.jsx("p",{className:"text-2xl font-bold text-foreground dark:text-dark-foreground",children:t}),m.jsx("p",{className:"text-sm font-semibold text-foreground-muted dark:text-dark-foreground-muted",children:e})]}),Sc=({sales:e,products:t,expenses:r,supplierPayments:n,bankDeposits:a,shifts:o,settings:i,supplierInvoices:s,accountingTransactions:l,chartOfAccounts:A})=>{let c=new Date;c.setDate(c.getDate()-30);let[d,u]=(0,g.useState)(c.toISOString().split("T")[0]),[h,f]=(0,g.useState)(new Date().toISOString().split("T")[0]),{periodData:p,closingBalances:x}=(0,g.useMemo)(()=>{let t=new Date(d);t.setHours(0,0,0,0);let s=new Date(h);s.setHours(23,59,59,999);let c=e.filter(e=>{let r=new Date(e.date);return r>=t&&r<=s}),u=r.filter(e=>{let r=new Date(e.date);return r>=t&&r<=s}),f=a.filter(e=>{let r=new Date(e.date);return r>=t&&r<=s}),p=n.filter(e=>{let r=new Date(e.paymentDate);return r>=t&&r<=s}),m=o.filter(e=>e.endTime&&new Date(e.endTime)>=t&&new Date(e.endTime)<=s),g=c.reduce((e,t)=>e+t.total,0),x=g-c.reduce((e,t)=>e+t.items.reduce((e,t)=>e+(t.costPrice||0)*t.quantity,0),0),b=u.reduce((e,t)=>e+t.amount,0),y=c.flatMap(e=>e.payments).reduce((e,t)=>(e[t.method]=(e[t.method]||0)+t.amount,e),{}),v=c.reduce((e,t)=>e+t.change,0),w=(y.Cash||0)-v,k=u.filter(e=>"Cash Drawer"===e.source).reduce((e,t)=>e+t.amount,0)+p.filter(e=>"Cash"===e.method).reduce((e,t)=>e+t.amount,0)+f.reduce((e,t)=>e+(t.breakdown?.cash||0),0),B=c.reduce((e,t)=>e+t.tax,0),j=e=>{if(!e||!A||!l)return 0;let t=A.find(t=>t.id===e);if(!t)return 0;let r=l.filter(e=>new Date(e.date)<=s).flatMap(e=>e.entries).filter(t=>t.accountId===e).reduce((e,t)=>e+t.debit-t.credit,0);return["Assets","Expenses"].includes(t.type)?r:-r},C=j(i.accounting.defaultCashAccountId),N=j(i.accounting.defaultMpesaAccountId),S=j(i.accounting.defaultBankAccountId);return{periodData:{totalRevenue:g,grossProfit:x,totalExpenses:b,netProfit:x-b,margin:g>0?x/g*100:0,paymentBreakdown:y,cashInflows:w,cashOutflows:k,totalTax:B,totalTransactions:c.length,itemsSold:c.reduce((e,t)=>e+t.items.reduce((e,t)=>e+t.quantity,0),0),totalShifts:m.length,totalBankDeposits:f.reduce((e,t)=>e+t.amount,0)},closingBalances:{cash:C,mpesa:N,bank:S,total:C+N+S}}},[d,h,e,t,r,n,a,o,i,s,l,A]);return(0,m.jsxs)("div",{className:"p-4 md:p-6 bg-muted dark:bg-dark-muted min-h-full",children:[(0,m.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,m.jsxs)("div",{children:[m.jsx("h1",{className:"text-2xl font-bold text-foreground dark:text-dark-foreground",children:"Fiscal Period Report"}),m.jsx("p",{className:"text-sm text-foreground-muted dark:text-dark-foreground-muted",children:"Complete financial overview for the selected period"})]}),(0,m.jsxs)("button",{onClick:()=>{let e=encodeURI("data:text/csv;charset=utf-8,"+[["Metric","Amount"],["Start Date",d],["End Date",h],["",""],["Total Revenue",p.totalRevenue.toFixed(2)],["Gross Profit",p.grossProfit.toFixed(2)],["Total Expenses",p.totalExpenses.toFixed(2)],["Net Profit",p.netProfit.toFixed(2)],["Profit Margin (%)",p.margin.toFixed(2)],["",""],["Cash Inflows",p.cashInflows.toFixed(2)],["Cash Outflows",p.cashOutflows.toFixed(2)],["Net Cash Flow",(p.cashInflows-p.cashOutflows).toFixed(2)],["",""],["Closing Cash Balance",x.cash.toFixed(2)],["Closing M-Pesa Balance",x.mpesa.toFixed(2)],["Closing Bank Balance",x.bank.toFixed(2)],["Closing Total Balance",x.total.toFixed(2)]].map(e=>e.join(",")).join("\n")),t=document.createElement("a");t.setAttribute("href",e),t.setAttribute("download",`fiscal_report_${d}_to_${h}.csv`),document.body.appendChild(t),t.click(),document.body.removeChild(t)},className:"bg-primary text-primary-content font-bold px-4 py-2 rounded-lg shadow-sm flex items-center",children:[m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),"Export Report"]})]}),(0,m.jsxs)("div",{className:"mb-6 p-4 bg-card dark:bg-dark-card rounded-lg shadow-sm grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,m.jsxs)("div",{children:[m.jsx("label",{htmlFor:"from-date",className:"text-sm font-medium text-foreground-muted",children:"From Date"}),m.jsx("input",{id:"from-date",type:"date",value:d,onChange:e=>u(e.target.value),className:"w-full mt-1 p-2 bg-background dark:bg-dark-background border border-border dark:border-dark-border rounded-md"})]}),(0,m.jsxs)("div",{children:[m.jsx("label",{htmlFor:"to-date",className:"text-sm font-medium text-foreground-muted",children:"To Date"}),m.jsx("input",{id:"to-date",type:"date",value:h,onChange:e=>f(e.target.value),className:"w-full mt-1 p-2 bg-background dark:bg-dark-background border border-border dark:border-dark-border rounded-md"})]})]}),(0,m.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-6",children:[m.jsx(Ss,{title:"Total Revenue",value:Si(p.totalRevenue,i.businessInfo.currency),icon:m.jsx("span",{className:"font-bold text-lg",children:"$"}),iconBg:"bg-blue-100 text-blue-600 dark:bg-blue-900/50 dark:text-blue-300"}),m.jsx(Ss,{title:"Gross Profit",value:Si(p.grossProfit,i.businessInfo.currency),subValue:`${p.margin.toFixed(1)}% margin`,icon:m.jsx("span",{className:"font-bold text-lg",children:""}),iconBg:"bg-green-100 text-green-600 dark:bg-green-900/50 dark:text-green-300"}),m.jsx(Ss,{title:"Total Expenses",value:Si(p.totalExpenses,i.businessInfo.currency),icon:m.jsx("span",{className:"font-bold text-lg",children:""}),iconBg:"bg-orange-100 text-orange-600 dark:bg-orange-900/50 dark:text-orange-300"}),m.jsx(Ss,{title:"Net Profit",value:Si(p.netProfit,i.businessInfo.currency),icon:m.jsx("span",{className:"font-bold text-lg",children:""}),iconBg:"bg-purple-100 text-purple-600 dark:bg-purple-900/50 dark:text-purple-300"})]}),(0,m.jsxs)("div",{className:"bg-card dark:bg-dark-card p-4 rounded-lg shadow-sm mb-6",children:[m.jsx("h3",{className:"text-lg font-bold mb-2",children:"Closing Balances at End of Fiscal Period"}),(0,m.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[m.jsx(Sl,{title:"Cash on Hand",value:Si(x.cash,i.businessInfo.currency),icon:m.jsx("span",{className:"font-bold text-lg",children:"C"})}),m.jsx(Sl,{title:"M-Pesa Balance",value:Si(x.mpesa,i.businessInfo.currency),icon:m.jsx("span",{className:"font-bold text-lg",children:"M"})}),m.jsx(Sl,{title:"Bank Balance",value:Si(x.bank,i.businessInfo.currency),icon:m.jsx("span",{className:"font-bold text-lg",children:"B"})}),m.jsx(Sl,{title:"Total Balance",value:Si(x.total,i.businessInfo.currency),icon:m.jsx("span",{className:"font-bold text-lg",children:"$"})})]})]}),(0,m.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6",children:[(0,m.jsxs)("div",{className:"bg-card dark:bg-dark-card p-4 rounded-lg shadow-sm",children:[m.jsx("h3",{className:"text-lg font-bold mb-2",children:"Payment Methods Breakdown"}),m.jsx("div",{className:"space-y-2 text-sm",children:Object.entries(p.paymentBreakdown).map(([e,t])=>(0,m.jsxs)("div",{className:"flex justify-between",children:[m.jsx("span",{className:"text-foreground-muted",children:e}),m.jsx("span",{className:"font-mono font-semibold",children:Si(t,i.businessInfo.currency)})]},e))})]}),(0,m.jsxs)("div",{className:"bg-card dark:bg-dark-card p-4 rounded-lg shadow-sm",children:[m.jsx("h3",{className:"text-lg font-bold mb-2",children:"Cash Flow Summary"}),(0,m.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,m.jsxs)("div",{className:"flex justify-between",children:[m.jsx("span",{className:"text-green-600",children:"Cash Inflows"}),(0,m.jsxs)("span",{className:"font-mono font-semibold text-green-600",children:["+",Si(p.cashInflows,i.businessInfo.currency)]})]}),(0,m.jsxs)("div",{className:"flex justify-between",children:[m.jsx("span",{className:"text-red-500",children:"Cash Outflows"}),(0,m.jsxs)("span",{className:"font-mono font-semibold text-red-500",children:["-",Si(p.cashOutflows,i.businessInfo.currency)]})]}),(0,m.jsxs)("div",{className:"flex justify-between border-t border-border dark:border-dark-border mt-2 pt-2 font-bold",children:[m.jsx("span",{children:"Net Cash Flow"}),m.jsx("span",{className:"font-mono",children:Si(p.cashInflows-p.cashOutflows,i.businessInfo.currency)})]}),(0,m.jsxs)("div",{className:"flex justify-between text-foreground-muted",children:[m.jsx("span",{children:"Total Bank Deposits"}),m.jsx("span",{className:"font-mono",children:Si(p.totalBankDeposits,i.businessInfo.currency)})]})]})]})]}),(0,m.jsxs)("div",{className:"bg-card dark:bg-dark-card p-4 rounded-lg shadow-sm",children:[m.jsx("h3",{className:"text-lg font-bold mb-2",children:"Additional Metrics"}),(0,m.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[m.jsx(SA,{title:"Total Transactions",value:p.totalTransactions}),m.jsx(SA,{title:"Items Sold",value:p.itemsSold}),m.jsx(SA,{title:"Total Shifts",value:p.totalShifts}),m.jsx(SA,{title:"Tax Collected",value:Si(p.totalTax,i.businessInfo.currency)})]})]})]})},Sd=({transaction:e,accountMap:t})=>{let[r,n]=(0,g.useState)(!1),a=(0,g.useMemo)(()=>e.entries.reduce((e,t)=>(e.debit+=t.debit,e.credit+=t.credit,e),{debit:0,credit:0}),[e.entries]);return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)("tr",{onClick:()=>n(!r),className:"cursor-pointer hover:bg-muted dark:hover:bg-dark-muted",children:[m.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:new Date(e.date).toLocaleString()}),m.jsx("td",{className:"px-6 py-4",children:e.description}),(0,m.jsxs)("td",{className:"px-6 py-4 text-xs font-mono",children:[e.referenceType,": ",e.referenceId]}),m.jsx("td",{className:"px-6 py-4 text-right font-mono",children:a.debit.toFixed(2)}),m.jsx("td",{className:"px-6 py-4 text-right font-mono",children:a.credit.toFixed(2)})]}),m.jsx(Q,{children:r&&m.jsx("tr",{children:m.jsx("td",{colSpan:5,className:"p-0 bg-background dark:bg-dark-background",children:(0,m.jsxs)("div",{className:"p-4 m-4 border-l-4 border-primary dark:border-dark-primary bg-muted dark:bg-dark-muted rounded-r-lg",children:[m.jsx("h4",{className:"font-bold mb-2",children:"Journal Entries"}),(0,m.jsxs)("table",{className:"w-full text-xs",children:[m.jsx("thead",{children:(0,m.jsxs)("tr",{className:"border-b dark:border-dark-border",children:[m.jsx("th",{className:"text-left py-1",children:"Account"}),m.jsx("th",{className:"text-right py-1",children:"Debit"}),m.jsx("th",{className:"text-right py-1",children:"Credit"})]})}),m.jsx("tbody",{children:e.entries.map((e,r)=>(0,m.jsxs)("tr",{children:[m.jsx("td",{className:"py-1",children:t.get(e.accountId)?.name||"Unknown Account"}),m.jsx("td",{className:"py-1 text-right font-mono",children:e.debit>0?e.debit.toFixed(2):"-"}),m.jsx("td",{className:"py-1 text-right font-mono",children:e.credit>0?e.credit.toFixed(2):"-"})]},r))})]})]})})})})]})},Su=({transactions:e,accounts:t})=>{let[r,n]=(0,g.useState)(""),[a,o]=(0,g.useState)(""),[i,s]=(0,g.useState)(""),l=(0,g.useMemo)(()=>new Map(t.map(e=>[e.id,e])),[t]),A=(0,g.useMemo)(()=>{let t=a?new Date(a):null;t&&t.setHours(0,0,0,0);let n=i?new Date(i):null;return n&&n.setHours(23,59,59,999),e.filter(e=>{let a=new Date(e.date);return(!t||!(a<t))&&(!n||!(a>n))&&(!r||!!(e.description.toLowerCase().includes(r.toLowerCase())||e.referenceId.toLowerCase().includes(r.toLowerCase())))}).sort((e,t)=>t.date.getTime()-e.date.getTime())},[e,r,a,i]);return(0,m.jsxs)("div",{className:"p-4 md:p-8 h-full overflow-y-auto",children:[m.jsx("h1",{className:"text-3xl font-bold text-foreground dark:text-dark-foreground mb-6",children:"General Ledger"}),(0,m.jsxs)("div",{className:"my-6 p-4 bg-card dark:bg-dark-card rounded-xl shadow-sm border border-border dark:border-dark-border grid grid-cols-1 md:grid-cols-3 gap-4",children:[m.jsx("input",{type:"date",value:a,onChange:e=>o(e.target.value),className:"w-full px-4 py-2 rounded-lg border border-border dark:border-dark-border bg-card dark:bg-dark-background"}),m.jsx("input",{type:"date",value:i,onChange:e=>s(e.target.value),className:"w-full px-4 py-2 rounded-lg border border-border dark:border-dark-border bg-card dark:bg-dark-background"}),m.jsx("input",{type:"text",placeholder:"Search description or reference...",className:"w-full px-4 py-2 rounded-lg border border-border dark:border-dark-border bg-card dark:bg-dark-background",value:r,onChange:e=>n(e.target.value)})]}),m.jsx("div",{className:"bg-card dark:bg-dark-card rounded-xl shadow-sm overflow-x-auto",children:(0,m.jsxs)("table",{className:"w-full text-sm text-left text-foreground-muted dark:text-dark-foreground-muted",children:[m.jsx("thead",{className:"text-xs text-foreground dark:text-dark-foreground uppercase bg-muted dark:bg-dark-muted font-bold",children:(0,m.jsxs)("tr",{children:[m.jsx("th",{scope:"col",className:"px-6 py-3",children:"Date"}),m.jsx("th",{scope:"col",className:"px-6 py-3",children:"Description"}),m.jsx("th",{scope:"col",className:"px-6 py-3",children:"Reference"}),m.jsx("th",{scope:"col",className:"px-6 py-3 text-right",children:"Total Debit"}),m.jsx("th",{scope:"col",className:"px-6 py-3 text-right",children:"Total Credit"})]})}),m.jsx("tbody",{children:A.map(e=>m.jsx(Sd,{transaction:e,accountMap:l},e.id))})]})})]})},Sh=({onClose:e,onSave:t,settings:r,cashInHand:n,mpesaBalance:a})=>{let[o,i]=(0,g.useState)(""),[s,l]=(0,g.useState)(r.paymentMethods.bank[0]?.id||""),[A,c]=(0,g.useState)(""),[d,u]=(0,g.useState)(""),[h,f]=(0,g.useState)(new Date().toISOString().split("T")[0]),[p,x]=(0,g.useState)({cash:0,mpesa:0,cheques:0}),[b,y]=(0,g.useState)(""),v=e=>{let t=""===e?"":parseFloat(e);i(t),x({cash:"number"==typeof t?t:0,mpesa:0,cheques:0})},w=(e,t)=>{let r=""===t?0:parseFloat(t);if(isNaN(r)||r<0)return;let n={...p,[e]:r};x(n),i(n.cash+n.mpesa+n.cheques)},k="mt-1 block w-full px-3 py-2 bg-card dark:bg-dark-background border border-border dark:border-dark-border rounded-md shadow-sm focus:outline-none focus:ring-primary dark:focus:ring-dark-primary sm:text-sm",B="block text-sm font-medium text-foreground dark:text-dark-foreground";return m.jsx("div",{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},style:{position:"fixed",inset:0,backgroundColor:"rgba(0,0,0,0.6)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:50,padding:"1rem"},children:(0,m.jsxs)("div",{className:"bg-card dark:bg-dark-card rounded-xl shadow-2xl w-full max-w-lg p-6",onClick:e=>e.stopPropagation(),children:[(0,m.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[m.jsx("h2",{className:"text-xl font-bold text-foreground dark:text-dark-foreground",children:"Record Bank Deposit"}),m.jsx("button",{onClick:e,className:"text-foreground-muted hover:text-foreground",children:"\xd7"})]}),(0,m.jsxs)("form",{onSubmit:e=>{e.preventDefault(),y("");let i="number"==typeof o?o:0;if(i<=0){y("Please enter a valid positive amount.");return}if(Math.abs(p.cash+p.mpesa+p.cheques-i)>.01){y("Breakdown total must equal the total deposit amount.");return}if(p.cash>n){y(`Cash amount exceeds available cash in hand (Ksh ${n.toFixed(2)}).`);return}if(p.mpesa>a){y(`M-Pesa amount exceeds available balance (Ksh ${a.toFixed(2)}).`);return}if(!s){y("Please select a bank account.");return}if(!A){y("A receipt or reference number is required.");return}let l=r.paymentMethods.bank.find(e=>e.id===s);if(!l){y("Invalid bank account selected.");return}t({date:new Date(h),amount:i,bankAccountId:s,bankName:`${l.bankName} - ${l.accountNumber}`,receiptNumber:A,notes:d,breakdown:p})},className:"space-y-4",children:[(0,m.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,m.jsxs)("div",{children:[m.jsx("label",{htmlFor:"depositDate",className:B,children:"Deposit Date"}),m.jsx("input",{type:"date",id:"depositDate",value:h,onChange:e=>f(e.target.value),required:!0,className:k})]}),(0,m.jsxs)("div",{children:[m.jsx("label",{htmlFor:"bankAccountId",className:B,children:"Bank Account *"}),(0,m.jsxs)("select",{id:"bankAccountId",value:s,onChange:e=>l(e.target.value),required:!0,className:k,children:[m.jsx("option",{value:"",disabled:!0,children:"-- Select a Bank --"}),r.paymentMethods.bank.map(e=>(0,m.jsxs)("option",{value:e.id,children:[e.bankName," - ",e.accountNumber]},e.id))]})]})]}),(0,m.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,m.jsxs)("div",{children:[m.jsx("label",{htmlFor:"receiptNumber",className:B,children:"Receipt Number"}),m.jsx("input",{type:"text",id:"receiptNumber",value:A,onChange:e=>c(e.target.value),required:!0,className:k})]}),(0,m.jsxs)("div",{children:[m.jsx("label",{htmlFor:"amount",className:B,children:"Total Amount *"}),m.jsx("input",{type:"number",id:"amount",value:o,onChange:e=>v(e.target.value),required:!0,min:"0.01",step:"0.01",className:k})]})]}),(0,m.jsxs)("div",{className:"p-4 bg-muted dark:bg-dark-muted rounded-lg space-y-3",children:[m.jsx("h4",{className:"text-sm font-bold text-foreground dark:text-dark-foreground",children:"Breakdown (Optional)"}),(0,m.jsxs)("div",{className:"grid grid-cols-3 gap-3 items-end",children:[(0,m.jsxs)("div",{children:[m.jsx("label",{htmlFor:"cash",className:"block text-xs font-medium text-foreground-muted",children:"Cash"}),m.jsx("input",{type:"number",id:"cash",value:p.cash||"",onChange:e=>w("cash",e.target.value),min:"0",step:"0.01",className:k+" text-sm"}),(0,m.jsxs)("span",{className:"text-xs text-foreground-muted",children:["Av: ",n.toFixed(2)]})]}),(0,m.jsxs)("div",{children:[m.jsx("label",{htmlFor:"mpesa",className:"block text-xs font-medium text-foreground-muted",children:"M-Pesa"}),m.jsx("input",{type:"number",id:"mpesa",value:p.mpesa||"",onChange:e=>w("mpesa",e.target.value),min:"0",step:"0.01",className:k+" text-sm"}),(0,m.jsxs)("span",{className:"text-xs text-foreground-muted",children:["Av: ",a.toFixed(2)]})]}),(0,m.jsxs)("div",{children:[m.jsx("label",{htmlFor:"cheques",className:"block text-xs font-medium text-foreground-muted",children:"Cheques"}),m.jsx("input",{type:"number",id:"cheques",value:p.cheques||"",onChange:e=>w("cheques",e.target.value),min:"0",step:"0.01",className:k+" text-sm"})]})]})]}),(0,m.jsxs)("div",{children:[m.jsx("label",{htmlFor:"notes",className:B,children:"Notes (Optional)"}),m.jsx("textarea",{id:"notes",value:d,onChange:e=>u(e.target.value),rows:2,className:k})]}),b&&m.jsx("p",{className:"text-sm text-center text-danger",children:b}),(0,m.jsxs)("div",{className:"flex justify-end gap-2 pt-4",children:[m.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 bg-muted dark:bg-dark-muted rounded-md font-semibold",children:"Cancel"}),m.jsx("button",{type:"submit",className:"px-4 py-2 bg-primary text-primary-content rounded-md font-semibold",children:"Confirm Deposit"})]})]})]})})},Sf=({onClose:e,onSave:t,balances:r,settings:n,expenseCategories:a})=>{let[o,i]=(0,g.useState)(new Date().toISOString().split("T")[0]),[s,l]=(0,g.useState)("Expense"),[A,c]=(0,g.useState)("Cash Drawer"),[d,u]=(0,g.useState)(""),[h,f]=(0,g.useState)(""),[p,x]=(0,g.useState)(a[0]||"Miscellaneous"),[b,y]=(0,g.useState)(""),[v,w]=(0,g.useState)(""),[k,B]=(0,g.useState)(null),[j,C]=(0,g.useState)(""),N=e=>{if(e.preventDefault(),C(""),"number"!=typeof d||d<=0){C("Please enter a valid amount.");return}"Expense"===s?t({type:s,date:o,amount:d,paymentMethod:A,description:h,payee:b,category:p,notes:v,receiptImageUrl:k}):C(`Transaction type "${s}" is not yet implemented.`)},S="number"==typeof d&&d>(r[A]||0),F="mt-1 block w-full px-3 py-2 bg-background dark:bg-dark-background border border-border dark:border-dark-border rounded-md shadow-sm focus:outline-none focus:ring-primary dark:focus:ring-dark-primary text-foreground dark:text-dark-foreground",E="block text-sm font-medium text-foreground-muted dark:text-dark-foreground-muted";return m.jsx("div",{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50 p-4",onClick:e,children:(0,m.jsxs)("div",{initial:{scale:.9,y:20,opacity:0},animate:{scale:1,y:0,opacity:1},exit:{scale:.9,y:20,opacity:0},transition:{type:"spring",stiffness:300,damping:30},className:"bg-card dark:bg-dark-card rounded-xl shadow-2xl w-full max-w-2xl max-h-[90vh] flex flex-col",onClick:e=>e.stopPropagation(),children:[(0,m.jsxs)("div",{className:"flex-shrink-0 flex justify-between items-center p-6 border-b border-border dark:border-dark-border",children:[m.jsx("h2",{className:"text-xl font-bold text-foreground dark:text-dark-foreground",children:"Record Transaction"}),m.jsx("button",{onClick:e,className:"text-foreground-muted hover:text-foreground text-2xl",children:"\xd7"})]}),(0,m.jsxs)("form",{onSubmit:N,className:"flex-grow p-6 overflow-y-auto space-y-4",children:[(0,m.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,m.jsxs)("div",{children:[m.jsx("label",{htmlFor:"date",className:E,children:"Date"}),m.jsx("input",{type:"date",id:"date",value:o,onChange:e=>i(e.target.value),required:!0,className:F})]}),(0,m.jsxs)("div",{children:[m.jsx("label",{htmlFor:"type",className:E,children:"Type *"}),(0,m.jsxs)("select",{id:"type",value:s,onChange:e=>l(e.target.value),required:!0,className:F,children:[m.jsx("option",{children:"Expense"}),m.jsx("option",{disabled:!0,children:"Cash In"}),m.jsx("option",{disabled:!0,children:"Cash Out"}),m.jsx("option",{disabled:!0,children:"M-Pesa In"}),m.jsx("option",{disabled:!0,children:"M-Pesa Out"}),m.jsx("option",{disabled:!0,children:"Supplier Payment"}),m.jsx("option",{disabled:!0,children:"Customer Refund"})]})]})]}),m.jsx(Q,{children:"Expense"===s&&(0,m.jsxs)("div",{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"space-y-4 overflow-hidden",children:[(0,m.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,m.jsxs)("div",{children:[m.jsx("label",{htmlFor:"paymentMethod",className:E,children:"Payment Method *"}),(0,m.jsxs)("select",{id:"paymentMethod",value:A,onChange:e=>c(e.target.value),required:!0,className:F,children:[(0,m.jsxs)("option",{value:"Cash Drawer",children:["Cash (Ksh ",r["Cash Drawer"].toFixed(2),")"]}),(0,m.jsxs)("option",{value:"M-Pesa",children:["M-Pesa (Ksh ",r["M-Pesa"].toFixed(2),")"]}),(0,m.jsxs)("option",{value:"Bank",children:["Bank (Ksh ",r.Bank.toFixed(2),")"]})]})]}),(0,m.jsxs)("div",{children:[m.jsx("label",{htmlFor:"amount",className:E,children:"Amount *"}),m.jsx("input",{type:"number",id:"amount",value:d,onChange:e=>u(""===e.target.value?"":parseFloat(e.target.value)),required:!0,min:"0.01",step:"0.01",className:`${F} ${S?"border-danger":""}`}),S&&m.jsx("p",{className:"text-xs text-danger mt-1",children:"Amount exceeds available balance."})]})]}),(0,m.jsxs)("div",{children:[m.jsx("label",{htmlFor:"description",className:E,children:"Description *"}),m.jsx("input",{type:"text",id:"description",value:h,onChange:e=>f(e.target.value),required:!0,placeholder:"e.g., Office supplies",className:F})]}),(0,m.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,m.jsxs)("div",{children:[m.jsx("label",{htmlFor:"payee",className:E,children:"Payee (Optional)"}),m.jsx("input",{type:"text",id:"payee",value:b,onChange:e=>y(e.target.value),placeholder:"e.g., Naivas",className:F})]}),(0,m.jsxs)("div",{children:[m.jsx("label",{htmlFor:"category",className:E,children:"Category *"}),m.jsx("select",{id:"category",value:p,onChange:e=>x(e.target.value),required:!0,className:F,children:a.map(e=>m.jsx("option",{value:e,children:e},e))})]})]}),(0,m.jsxs)("div",{children:[m.jsx("label",{htmlFor:"notes",className:E,children:"Notes (Optional)"}),m.jsx("textarea",{id:"notes",value:v,onChange:e=>w(e.target.value),rows:2,className:F})]}),(0,m.jsxs)("div",{children:[m.jsx("label",{htmlFor:"receipt",className:E,children:"Upload Receipt (Optional)"}),m.jsx("input",{type:"file",id:"receipt",onChange:e=>{let t=e.target.files?.[0];if(t){let e=new FileReader;e.onloadend=()=>{B(e.result)},e.readAsDataURL(t)}},accept:"image/*",className:`${F} p-0 file:mr-4 file:py-2 file:px-4 file:border-0 file:bg-muted dark:file:bg-dark-muted`}),k&&m.jsx("img",{src:k,alt:"Receipt preview",className:"mt-2 rounded-lg max-h-40 object-contain border p-1"})]})]})}),j&&m.jsx("p",{className:"text-sm text-center text-danger",children:j})]}),(0,m.jsxs)("div",{className:"flex-shrink-0 flex justify-end gap-2 p-4 border-t border-border dark:border-dark-border",children:[m.jsx("button",{type:"button",onClick:e,whileTap:{scale:.95},className:"px-4 py-2 bg-muted dark:bg-dark-muted rounded-md font-semibold",children:"Cancel"}),m.jsx("button",{type:"submit",form:"transaction-form",onClick:N,whileTap:{scale:.95},className:"px-4 py-2 bg-primary text-primary-content rounded-md font-semibold disabled:bg-slate-400",disabled:S,children:"Record Transaction"})]})]})})},Sp=()=>(0,m.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("rect",{x:"1",y:"4",width:"22",height:"16",rx:"2",ry:"2"}),m.jsx("line",{x1:"1",y1:"10",x2:"23",y2:"10"})]}),Sm=()=>(0,m.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("rect",{x:"5",y:"2",width:"14",height:"20",rx:"2",ry:"2"}),m.jsx("line",{x1:"12",y1:"18",x2:"12.01",y2:"18"})]}),Sg=()=>(0,m.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),m.jsx("polyline",{points:"14 2 14 8 20 8"}),m.jsx("line",{x1:"16",y1:"13",x2:"8",y2:"13"}),m.jsx("line",{x1:"16",y1:"17",x2:"8",y2:"17"}),m.jsx("polyline",{points:"10 9 9 9 8 9"})]}),Sx=()=>(0,m.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("line",{x1:"12",y1:"1",x2:"12",y2:"23"}),m.jsx("path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"})]}),Sb=()=>(0,m.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"text-green-500",children:[m.jsx("circle",{cx:"12",cy:"12",r:"10"}),m.jsx("polyline",{points:"16 12 12 8 8 12"}),m.jsx("line",{x1:"12",y1:"16",x2:"12",y2:"8"})]}),Sy=()=>(0,m.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"text-red-500",children:[m.jsx("circle",{cx:"12",cy:"12",r:"10"}),m.jsx("polyline",{points:"8 12 12 16 16 12"}),m.jsx("line",{x1:"12",y1:"8",x2:"12",y2:"16"})]}),Sv=(e,t="KES")=>`${t} ${e.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}`,Sw=({title:e,value:t,icon:r,isWarning:n})=>(0,m.jsxs)("div",{className:`bg-card dark:bg-dark-card p-4 rounded-xl shadow-sm flex items-center space-x-4 border ${n?"border-red-300 dark:border-red-500/50":"border-border dark:border-dark-border"}`,children:[m.jsx("div",{className:`p-3 rounded-lg ${n?"text-red-500 bg-red-100 dark:bg-red-900/50":"text-primary dark:text-dark-primary bg-muted dark:bg-dark-muted"}`,children:r}),(0,m.jsxs)("div",{children:[m.jsx("p",{className:"text-sm text-foreground-muted dark:text-dark-foreground-muted font-semibold",children:e}),m.jsx("p",{className:"text-xl font-bold text-foreground dark:text-dark-foreground",children:t}),n&&m.jsx("p",{className:"text-xs text-red-500 font-semibold",children:"Insufficient balance"})]})]}),Sk=({sales:e,expenses:t,accountingTransactions:r,chartOfAccounts:n,settings:a,activeShift:o,supplierPayments:i,suppliers:s,bankDeposits:l,onAddBankDeposit:A,currentUser:c,customers:d,supplierInvoices:u,onProcessExpense:h})=>{let[f,p]=(0,g.useState)("all"),[x,b]=(0,g.useState)(!1),[y,v]=(0,g.useState)(!1),w=(0,g.useMemo)(()=>e=>{let t=n.find(t=>t.id===e);if(!t)return 0;let a=r.flatMap(e=>e.entries).filter(t=>t.accountId===e).reduce((e,t)=>e+t.debit-t.credit,0);return["Assets","Expenses"].includes(t.type)?a:-a},[r,n]),k=w(a.accounting.defaultCashAccountId),B=w(a.accounting.defaultMpesaAccountId),j=w(a.accounting.defaultBankAccountId),C=k+B+j,N=(0,g.useMemo)(()=>{let r=[];return e.forEach(e=>r.push({date:new Date(e.date),type:"Sale",description:`Sale to ${d.find(t=>t.id===e.customerId)?.name||"N/A"}`,method:e.payments.map(e=>e.method).join(", "),amount:e.total,staff:e.cashierName,isCredit:!0})),t.forEach(e=>r.push({date:new Date(e.date),type:"Expense",description:e.reason,method:e.source,amount:e.amount,staff:e.cashierName,isCredit:!1})),l.forEach(e=>r.push({date:new Date(e.date),type:"Bank Deposit",description:`Deposit to ${e.bankName}`,method:"Bank Transfer",amount:e.amount,staff:e.depositedByName,isCredit:!0})),i.forEach(e=>{let t=u.find(t=>t.id===e.invoiceId),n=s.find(e=>e.id===t?.supplierId);r.push({date:new Date(e.paymentDate),type:"Supplier Payment",description:`Payment to ${n?.name||"N/A"}`,method:e.method,amount:e.amount,staff:c.name,isCredit:!1})}),r.sort((e,t)=>t.date.getTime()-e.date.getTime())},[e,t,l,i,d,s,c.name,u]),S=(0,g.useMemo)(()=>"deposits"===f?N.filter(e=>"Bank Deposit"===e.type):N,[N,f]);return(0,m.jsxs)("div",{className:"p-4 md:p-6 h-full overflow-y-auto bg-background dark:bg-dark-background text-foreground dark:text-dark-foreground",children:[x&&m.jsx(Sh,{onClose:()=>b(!1),onSave:e=>{A(e),b(!1)},settings:a,cashInHand:k,mpesaBalance:B}),y&&m.jsx(Sf,{onClose:()=>v(!1),onSave:e=>{"Expense"===e.type&&(h(e.amount,e.description,e.category,e.paymentMethod,e.payee,e.receiptImageUrl),v(!1))},balances:{"Cash Drawer":k,"M-Pesa":B,Bank:j},settings:a,expenseCategories:a.inventory.expenseCategories}),(0,m.jsxs)("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-6",children:[(0,m.jsxs)("div",{children:[m.jsx("h1",{className:"text-3xl font-bold",children:"Accounts & Finance"}),m.jsx("p",{className:"text-foreground-muted dark:text-dark-foreground-muted mt-1",children:"Track all payments, balances, and bank deposits"})]}),(0,m.jsxs)("div",{className:"flex items-center space-x-2 mt-4 md:mt-0",children:[(0,m.jsxs)("button",{onClick:()=>b(!0),className:"bg-green-600 text-white font-bold px-4 py-2 rounded-lg flex items-center space-x-2 hover:bg-green-700 transition-colors",children:[m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",children:m.jsx("path",{d:"M12 5v14m-7-7h14"})}),m.jsx("span",{children:"Bank Deposit"})]}),(0,m.jsxs)("button",{onClick:()=>v(!0),className:"bg-orange-500 text-white font-bold px-4 py-2 rounded-lg flex items-center space-x-2 hover:bg-orange-600 transition-colors",children:[m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",children:m.jsx("path",{d:"M12 5v14m-7-7h14"})}),m.jsx("span",{children:"Record Transaction"})]})]})]}),(0,m.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-6",children:[m.jsx(Sw,{title:"Cash on Hand",value:Sv(k,a.businessInfo.currency),icon:m.jsx(Sp,{}),isWarning:k<0}),m.jsx(Sw,{title:"M-Pesa Balance",value:Sv(B,a.businessInfo.currency),icon:m.jsx(Sm,{}),isWarning:B<0}),m.jsx(Sw,{title:"Bank Balance",value:Sv(j,a.businessInfo.currency),icon:m.jsx(Sg,{}),isWarning:j<0}),(0,m.jsxs)("div",{className:"bg-card dark:bg-dark-card p-4 rounded-xl shadow-sm flex items-center space-x-4 border border-border dark:border-dark-border",children:[m.jsx("div",{className:"p-3 rounded-lg text-purple-500 bg-purple-100 dark:bg-purple-900/50",children:m.jsx(Sx,{})}),(0,m.jsxs)("div",{children:[m.jsx("p",{className:"text-sm text-foreground-muted dark:text-dark-foreground-muted font-semibold",children:"Total Balance"}),m.jsx("p",{className:"text-xl font-bold text-foreground dark:text-dark-foreground",children:Sv(C,a.businessInfo.currency)})]})]})]}),(0,m.jsxs)("div",{className:"bg-card dark:bg-dark-card rounded-xl shadow-sm border border-border dark:border-dark-border p-6",children:[(0,m.jsxs)("div",{className:"flex border-b border-border dark:border-dark-border mb-4",children:[m.jsx("button",{onClick:()=>p("all"),className:`px-4 py-2 font-semibold text-sm ${"all"===f?"border-b-2 border-primary text-primary":"text-foreground-muted"}`,children:"All Transactions"}),m.jsx("button",{onClick:()=>p("deposits"),className:`px-4 py-2 font-semibold text-sm ${"deposits"===f?"border-b-2 border-primary text-primary":"text-foreground-muted"}`,children:"Bank Deposits"})]}),m.jsx("h3",{className:"text-lg font-bold mb-4",children:"Transaction History"}),m.jsx("div",{className:"overflow-x-auto",children:(0,m.jsxs)("table",{className:"w-full text-sm text-left",children:[m.jsx("thead",{className:"text-xs text-foreground-muted dark:text-dark-foreground-muted uppercase",children:(0,m.jsxs)("tr",{children:[m.jsx("th",{className:"py-3 px-4",children:"Date"}),m.jsx("th",{className:"py-3 px-4",children:"Type"}),m.jsx("th",{className:"py-3 px-4",children:"Description"}),m.jsx("th",{className:"py-3 px-4",children:"Method"}),m.jsx("th",{className:"py-3 px-4",children:"Amount"}),m.jsx("th",{className:"py-3 px-4",children:"Staff"})]})}),(0,m.jsxs)("tbody",{children:[S.map((e,t)=>(0,m.jsxs)("tr",{className:"border-b border-border dark:border-dark-border last:border-b-0",children:[m.jsx("td",{className:"py-3 px-4 whitespace-nowrap",children:e.date.toLocaleString("en-GB",{dateStyle:"short",timeStyle:"short"})}),m.jsx("td",{className:"py-3 px-4",children:(0,m.jsxs)("span",{className:"flex items-center space-x-2",children:[e.isCredit?m.jsx(Sb,{}):m.jsx(Sy,{}),m.jsx("span",{children:e.type})]})}),m.jsx("td",{className:"py-3 px-4",children:e.description}),m.jsx("td",{className:"py-3 px-4",children:e.method}),(0,m.jsxs)("td",{className:`py-3 px-4 font-semibold ${e.isCredit?"text-green-500":"text-red-500"}`,children:[e.isCredit?"+":"-",Sv(e.amount,a.businessInfo.currency)]}),m.jsx("td",{className:"py-3 px-4",children:e.staff})]},t)),0===S.length&&m.jsx("tr",{children:m.jsx("td",{colSpan:6,className:"text-center py-8 text-foreground-muted",children:"No transactions found."})})]})]})})]})]})},SB=({products:e,customers:t,users:r,settings:n,onAddWorkOrder:a,onBack:o,activeShift:i})=>{let[s,l]=(0,g.useState)(""),[A,c]=(0,g.useState)(""),[d,u]=(0,g.useState)(""),[h,f]=(0,g.useState)(new Date(Date.now()+864e5).toISOString().split("T")[0]),[p,x]=(0,g.useState)(""),[b,y]=(0,g.useState)(""),[v,w]=(0,g.useState)([]),[k,B]=(0,g.useState)("exclusive"),[j,C]=(0,g.useState)(""),[N,S]=(0,g.useState)(""),[F,E]=(0,g.useState)(""),O=(0,g.useMemo)(()=>F?e.filter(e=>"Inventory"===e.productType&&e.name.toLowerCase().includes(F.toLowerCase())&&!v.some(t=>t.materialId===e.id)):[],[F,e,v]),P=(0,g.useMemo)(()=>{let e=v.reduce((e,t)=>e+t.lineTotal,0),t=Number(b)||0,r=0,a=0,o=t+e;return"exclusive"===k?(r=n.tax.vatRate/100*o,a=o+r):r=(a=o)-a/(1+n.tax.vatRate/100),{materialsSubtotal:e,vatAmount:r,totalCost:a}},[b,v,k,n.tax.vatRate]),I=e=>{w(t=>t.filter(t=>t.materialId!==e))},U=e=>{w(t=>[...t,{materialId:e.id,name:e.name,qty:1,unitPrice:e.price,lineTotal:e.price}]),E("")},L=(e,t)=>{let r=parseFloat(t);w(t=>t.map(t=>{if(t.materialId===e){let e=isNaN(r)||r<0?0:r;return{...t,qty:e,lineTotal:e*t.unitPrice}}return t}))};return i?m.jsx("div",{className:"p-4 md:p-6 bg-muted dark:bg-dark-muted min-h-full",children:(0,m.jsxs)("div",{className:"max-w-6xl mx-auto",children:[(0,m.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[m.jsx("h1",{className:"text-2xl font-bold",children:"New Work Order"}),m.jsx("button",{onClick:o,className:"text-sm font-semibold hover:underline",children:"Cancel"})]}),(0,m.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,m.jsxs)("div",{className:"lg:col-span-2 bg-card dark:bg-dark-card p-6 rounded-lg shadow-sm space-y-4",children:[(0,m.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,m.jsxs)("div",{children:[m.jsx("label",{className:"block text-sm font-medium",children:"Customer *"}),m.jsx(o6,{customers:t,selectedCustomerId:s,onCustomerChange:l})]}),(0,m.jsxs)("div",{children:[m.jsx("label",{className:"block text-sm font-medium",children:"Job Title *"}),m.jsx("input",{type:"text",value:A,onChange:e=>c(e.target.value),required:!0,className:"w-full mt-1 p-2 border rounded-md"})]})]}),(0,m.jsxs)("div",{children:[m.jsx("label",{className:"block text-sm font-medium",children:"Description"}),m.jsx("textarea",{value:d,onChange:e=>u(e.target.value),rows:3,className:"w-full mt-1 p-2 border rounded-md"})]}),(0,m.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,m.jsxs)("div",{children:[m.jsx("label",{className:"block text-sm font-medium",children:"Promised Date"}),m.jsx("input",{type:"date",value:h,onChange:e=>f(e.target.value),className:"w-full mt-1 p-2 border rounded-md"})]}),(0,m.jsxs)("div",{children:[m.jsx("label",{className:"block text-sm font-medium",children:"Assign To"}),(0,m.jsxs)("select",{value:p,onChange:e=>x(e.target.value),className:"w-full mt-1 p-2 border rounded-md",children:[m.jsx("option",{value:"",children:"Unassigned"}),r.map(e=>m.jsx("option",{value:e.id,children:e.name},e.id))]})]})]}),(0,m.jsxs)("div",{className:"pt-4 border-t",children:[m.jsx("h3",{className:"font-semibold mb-2",children:"Materials"}),(0,m.jsxs)("div",{className:"relative",children:[m.jsx("input",{type:"text",value:F,onChange:e=>E(e.target.value),placeholder:"Search to add material...",className:"w-full p-2 border rounded-md"}),F&&m.jsx("ul",{className:"absolute z-10 w-full bg-card dark:bg-dark-card border border-border dark:border-dark-border rounded-md shadow-lg max-h-40 overflow-y-auto",children:O.map(e=>(0,m.jsxs)("li",{onClick:()=>U(e),className:"p-2 hover:bg-muted dark:hover:bg-dark-muted cursor-pointer flex justify-between items-center",children:[(0,m.jsxs)("div",{children:[m.jsx("p",{className:"font-semibold",children:e.name}),(0,m.jsxs)("p",{className:"text-xs text-foreground-muted",children:["SKU: ",e.inventoryCode]})]}),m.jsx("span",{className:"font-mono text-sm text-primary dark:text-dark-primary",children:`Ksh ${e.price.toFixed(2)}`})]},e.id))})]}),(0,m.jsxs)("div",{className:"mt-2 space-y-2 max-h-48 overflow-y-auto pr-2",children:[v.length>0&&(0,m.jsxs)("div",{className:"flex items-center gap-2 text-xs font-bold text-foreground-muted pr-8",children:[m.jsx("span",{className:"flex-grow",children:"Product"}),m.jsx("span",{className:"w-40 text-center",children:"Quantity"}),m.jsx("span",{className:"w-24 text-right",children:"Line Total"})]}),v.map(e=>(0,m.jsxs)("div",{className:"flex items-center gap-2 p-2 rounded bg-muted dark:bg-dark-muted/50",children:[m.jsx("span",{className:"flex-grow font-semibold text-sm",children:e.name}),(0,m.jsxs)("div",{className:"flex items-center gap-2",children:[m.jsx("input",{type:"number",value:e.qty,onChange:t=>L(e.materialId,t.target.value),className:"w-20 p-1 border rounded text-center bg-card dark:bg-dark-background border-border dark:border-dark-border",min:"0",step:"0.1"}),(0,m.jsxs)("span",{className:"text-xs text-foreground-muted",children:["x ",e.unitPrice.toFixed(2)]})]}),(0,m.jsxs)("span",{className:"w-24 text-right font-mono font-semibold",children:["Ksh ",(e.qty*e.unitPrice).toFixed(2)]}),m.jsx("button",{type:"button",onClick:()=>I(e.materialId),className:"text-danger/70 p-1 rounded-full hover:bg-danger/10 hover:text-danger",children:m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]},e.materialId))]})]})]}),(0,m.jsxs)("div",{className:"space-y-6",children:[(0,m.jsxs)("div",{className:"bg-card dark:bg-dark-card p-6 rounded-lg shadow-sm space-y-4",children:[m.jsx("h2",{className:"text-lg font-bold border-b pb-2",children:"Summary"}),(0,m.jsxs)("div",{className:"flex justify-center bg-muted dark:bg-dark-muted p-1 rounded-md",children:[m.jsx("button",{onClick:()=>B("exclusive"),className:`w-1/2 text-sm py-1 rounded ${"exclusive"===k?"bg-white font-bold":""}`,children:"VAT Exclusive"}),m.jsx("button",{onClick:()=>B("inclusive"),className:`w-1/2 text-sm py-1 rounded ${"inclusive"===k?"bg-white font-bold":""}`,children:"VAT Inclusive"})]}),(0,m.jsxs)("div",{children:[m.jsx("label",{className:"block text-sm font-medium",children:"Labour Amount"}),m.jsx("input",{type:"number",value:b,onChange:e=>y(""===e.target.value?"":parseFloat(e.target.value)),className:"w-full mt-1 p-2 border rounded-md"})]}),(0,m.jsxs)("div",{className:"space-y-1 text-sm border-t pt-2",children:[(0,m.jsxs)("div",{className:"flex justify-between",children:[m.jsx("span",{className:"text-foreground-muted",children:"Labour:"})," ",m.jsx("span",{className:"font-mono",children:`Ksh ${(Number(b)||0).toFixed(2)}`})]}),(0,m.jsxs)("div",{className:"flex justify-between",children:[m.jsx("span",{className:"text-foreground-muted",children:"Materials:"})," ",m.jsx("span",{className:"font-mono",children:`Ksh ${P.materialsSubtotal.toFixed(2)}`})]}),(0,m.jsxs)("div",{className:"flex justify-between",children:[(0,m.jsxs)("span",{className:"text-foreground-muted",children:["VAT (",n.tax.vatRate,"%):"]})," ",m.jsx("span",{className:"font-mono",children:`Ksh ${P.vatAmount.toFixed(2)}`})]}),(0,m.jsxs)("div",{className:"flex justify-between text-xl font-bold pt-2 border-t mt-2",children:[m.jsx("span",{className:"",children:"Total:"})," ",m.jsx("span",{className:"font-mono text-primary",children:`Ksh ${P.totalCost.toFixed(2)}`})]})]})]}),(0,m.jsxs)("div",{className:"bg-card dark:bg-dark-card p-6 rounded-lg shadow-sm space-y-4",children:[m.jsx("h2",{className:"text-lg font-bold border-b pb-2",children:"Payments"}),(0,m.jsxs)("div",{children:[m.jsx("label",{className:"block text-sm font-medium",children:"Deposit Required (Optional)"}),m.jsx("input",{type:"number",value:j,onChange:e=>C(""===e.target.value?"":parseFloat(e.target.value)),className:"w-full mt-1 p-2 border rounded-md"})]}),(0,m.jsxs)("div",{children:[m.jsx("label",{className:"block text-sm font-medium",children:"Deposit to Pay Now"}),m.jsx("input",{type:"number",value:N,onChange:e=>S(""===e.target.value?"":parseFloat(e.target.value)),className:"w-full mt-1 p-2 border rounded-md"})]}),(0,m.jsxs)("div",{className:"flex justify-between text-lg font-bold pt-2 border-t mt-2 text-danger",children:[m.jsx("span",{children:"Balance Due:"})," ",m.jsx("span",{className:"font-mono",children:`Ksh ${(P.totalCost-(Number(N)||0)).toFixed(2)}`})]})]}),m.jsx("button",{type:"button",onClick:()=>{if(!s||!A){alert("Please select a customer and enter a job title.");return}let e=t.find(e=>e.id===s);e&&a({customerId:s,customerName:e.name,jobTitle:A,description:d,status:"Pending",promisedDate:h?new Date(h).toISOString():void 0,assignedTo:p,labourAmount:Number(b)||0,materialsSubtotal:P.materialsSubtotal,vatAmount:P.vatAmount,totalCost:P.totalCost,depositRequired:Number(j)||void 0,amountPaid:0,balanceDue:P.totalCost,vatMode:k},v,Number(N)||0)},whileTap:{scale:.98},className:"w-full bg-primary text-primary-content font-bold py-3 rounded-lg text-lg",children:"Create & Proceed to POS"})]})]})]})}):(0,m.jsxs)("div",{className:"p-8 text-center",children:[m.jsx("h2",{className:"text-xl font-bold",children:"Shift Not Active"}),m.jsx("p",{children:"You must start a shift to create a work order."}),m.jsx("button",{onClick:o,className:"mt-4 bg-primary text-white px-4 py-2 rounded",children:"Back"})]})},Sj=({title:e,count:t,className:r})=>(0,m.jsxs)("div",{className:`bg-card dark:bg-dark-card p-4 rounded-xl shadow-sm border border-border dark:border-dark-border ${r}`,children:[m.jsx("p",{className:"text-sm font-semibold text-foreground-muted dark:text-dark-foreground-muted",children:e}),m.jsx("p",{className:"text-3xl font-bold text-foreground dark:text-dark-foreground",children:t})]}),SC=({status:e})=>{let t="text-slate-800 bg-slate-100 dark:bg-slate-700 dark:text-slate-300";switch(e){case"Pending":t="text-yellow-800 bg-yellow-100 dark:bg-yellow-900/50 dark:text-yellow-300";break;case"In Progress":t="text-sky-800 bg-sky-100 dark:bg-sky-900/50 dark:text-sky-300";break;case"Awaiting Parts":t="text-indigo-800 bg-indigo-100 dark:bg-indigo-900/50 dark:text-indigo-300";break;case"Ready for Pickup":t="text-blue-800 bg-blue-100 dark:bg-blue-900/50 dark:text-blue-300";break;case"Completed":t="text-green-800 bg-green-100 dark:bg-green-900/50 dark:text-green-300";break;case"Delivered":t="text-violet-800 bg-violet-100 dark:bg-violet-900/50 dark:text-violet-300";break;case"Cancelled":t="text-red-800 bg-red-100 dark:bg-red-900/50 dark:text-red-300"}return m.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full capitalize ${t}`,children:e.toLowerCase()})},SN=({workOrders:e,onViewWorkOrder:t,onCreateRequest:r})=>{let n=(0,g.useMemo)(()=>[...e].sort((e,t)=>new Date(t.createdDate).getTime()-new Date(e.createdDate).getTime()),[e]),a=(0,g.useMemo)(()=>{let t={Pending:0,"In Progress":0,Completed:0,Delivered:0};return e.forEach(e=>{"Pending"===e.status&&t.Pending++,"In Progress"===e.status&&t["In Progress"]++,"Completed"===e.status&&t.Completed++,"Delivered"===e.status&&t.Delivered++}),t},[e]);return(0,m.jsxs)("div",{className:"p-4 md:p-6 bg-muted dark:bg-dark-muted min-h-full",children:[(0,m.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,m.jsxs)("div",{children:[m.jsx("h1",{className:"text-2xl font-bold text-foreground dark:text-dark-foreground",children:"Work Orders"}),m.jsx("p",{className:"text-sm text-foreground-muted dark:text-dark-foreground-muted",children:"Manage repair, service, and custom work orders"})]}),m.jsx("button",{onClick:r,whileTap:{scale:.95},className:"bg-primary text-primary-content font-bold px-4 py-2 rounded-lg hover:bg-primary-focus transition-colors shadow-sm flex items-center",children:"+ Create Work Order"})]}),(0,m.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[m.jsx(Sj,{title:"Pending",count:a.Pending,className:"border-l-4 border-yellow-500"}),m.jsx(Sj,{title:"In Progress",count:a["In Progress"],className:"border-l-4 border-sky-500"}),m.jsx(Sj,{title:"Completed",count:a.Completed,className:"border-l-4 border-green-500"}),m.jsx(Sj,{title:"Delivered",count:a.Delivered,className:"border-l-4 border-violet-500"})]}),(0,m.jsxs)("div",{className:"bg-card dark:bg-dark-card rounded-lg shadow-sm overflow-hidden border border-border dark:border-dark-border",children:[m.jsx("div",{className:"p-4 border-b border-border dark:border-dark-border",children:m.jsx("h2",{className:"text-lg font-semibold text-foreground dark:text-dark-foreground",children:"All Work Orders"})}),m.jsx("div",{className:"overflow-x-auto",children:(0,m.jsxs)("table",{className:"w-full text-sm text-left text-foreground-muted dark:text-dark-foreground-muted",children:[m.jsx("thead",{className:"text-xs text-foreground dark:text-dark-foreground uppercase bg-muted dark:bg-dark-muted",children:(0,m.jsxs)("tr",{children:[m.jsx("th",{className:"px-6 py-3",children:"WO #"}),m.jsx("th",{className:"px-6 py-3",children:"Customer"}),m.jsx("th",{className:"px-6 py-3",children:"Title"}),m.jsx("th",{className:"px-6 py-3",children:"Promised By"}),m.jsx("th",{className:"px-6 py-3 text-right",children:"Balance Due"}),m.jsx("th",{className:"px-6 py-3 text-center",children:"Status"}),m.jsx("th",{className:"px-6 py-3 text-center",children:"Actions"})]})}),(0,m.jsxs)("tbody",{className:"divide-y divide-border dark:divide-dark-border",children:[n.map(e=>(0,m.jsxs)("tr",{className:"hover:bg-muted dark:hover:bg-dark-muted cursor-pointer",onClick:()=>t(e),children:[m.jsx("td",{className:"px-6 py-4 font-bold text-foreground dark:text-dark-foreground",children:e.id}),m.jsx("td",{className:"px-6 py-4",children:e.customerName}),m.jsx("td",{className:"px-6 py-4",children:e.jobTitle}),m.jsx("td",{className:"px-6 py-4",children:new Date(e.promisedDate).toLocaleDateString()||"-"}),m.jsx("td",{className:"px-6 py-4 font-mono text-right font-semibold text-danger",children:e.balanceDue.toFixed(2)}),m.jsx("td",{className:"px-6 py-4 text-center",children:m.jsx(SC,{status:e.status})}),m.jsx("td",{className:"px-6 py-4 text-center",children:m.jsx("button",{className:"font-medium text-primary dark:text-dark-primary hover:underline",children:"View"})})]},e.id)),0===n.length&&m.jsx("tr",{children:m.jsx("td",{colSpan:7,className:"text-center py-10",children:"No work orders found."})})]})]})})]})]})},SS=x().forwardRef(({workOrder:e,materials:t,users:r,settings:n},a)=>{let o=r.find(t=>t.id===e.assignedTo);return(0,m.jsxs)("div",{ref:a,className:"bg-white p-8 font-sans text-sm text-black w-full max-w-4xl mx-auto shadow-lg border",children:[(0,m.jsxs)("header",{className:"flex justify-between items-start pb-4 border-b border-black",children:[(0,m.jsxs)("div",{children:[n.businessInfo.logoUrl&&m.jsx("img",{src:n.businessInfo.logoUrl,alt:"Company Logo",className:"h-16 max-w-xs object-contain mb-4"}),m.jsx("h2",{className:"text-xl font-bold text-slate-800",children:n.businessInfo.name}),m.jsx("p",{className:"text-slate-600",children:n.businessInfo.location}),(0,m.jsxs)("p",{className:"text-slate-600",children:["Tel: ",n.businessInfo.phone]}),n.tax.etimsEnabled&&n.businessInfo.kraPin&&(0,m.jsxs)("p",{className:"text-slate-600",children:["PIN: ",n.businessInfo.kraPin]})]}),(0,m.jsxs)("div",{className:"text-right",children:[m.jsx("h1",{className:"text-3xl font-bold uppercase text-slate-700 tracking-wide",children:"Job Card"}),(0,m.jsxs)("div",{className:"mt-2 text-xs",children:[(0,m.jsxs)("p",{className:"flex justify-end gap-2",children:[m.jsx("span",{className:"text-slate-500",children:"Job Card #:"})," ",m.jsx("span",{className:"font-semibold",children:e.id})]}),(0,m.jsxs)("p",{className:"flex justify-end gap-2",children:[m.jsx("span",{className:"text-slate-500",children:"Date:"})," ",m.jsx("span",{className:"font-semibold",children:new Date(e.createdAt).toLocaleDateString("en-GB",{timeZone:"Africa/Nairobi"})})]})]})]})]}),(0,m.jsxs)("section",{className:"mt-8 grid grid-cols-2 gap-4",children:[(0,m.jsxs)("div",{children:[m.jsx("h3",{className:"text-xs uppercase font-bold text-slate-500 mb-2",children:"Customer Details"}),m.jsx("p",{className:"font-bold text-slate-800",children:e.customerName})]}),(0,m.jsxs)("div",{className:"text-right",children:[m.jsx("h3",{className:"text-xs uppercase font-bold text-slate-500 mb-2",children:"Promised Date"}),m.jsx("p",{className:"font-bold text-slate-800",children:e.promisedDate?new Date(e.promisedDate).toLocaleDateString("en-GB"):"N/A"})]})]}),(0,m.jsxs)("section",{className:"mt-8",children:[m.jsx("h3",{className:"text-xs uppercase font-bold text-slate-500 mb-2",children:"Service Details"}),(0,m.jsxs)("div",{className:"p-3 border rounded-md",children:[(0,m.jsxs)("p",{children:[m.jsx("span",{className:"font-semibold",children:"Item to be Serviced:"})," ",e.jobTitle]}),m.jsx("p",{className:"mt-2",children:m.jsx("span",{className:"font-semibold",children:"Customer Complaint / Description of Work:"})}),m.jsx("p",{className:"text-slate-600 whitespace-pre-wrap pl-2",children:e.description})]})]}),(0,m.jsxs)("section",{className:"mt-8",children:[m.jsx("h3",{className:"text-xs uppercase font-bold text-slate-500 mb-2",children:"Materials & Labor"}),(0,m.jsxs)("table",{className:"w-full text-left",children:[m.jsx("thead",{children:(0,m.jsxs)("tr",{className:"bg-slate-100 text-slate-600 uppercase text-xs",children:[m.jsx("th",{className:"p-2 font-semibold",children:"Description"}),m.jsx("th",{className:"p-2 font-semibold text-center",children:"Qty"}),m.jsx("th",{className:"p-2 font-semibold text-right",children:"Unit Price"}),m.jsx("th",{className:"p-2 font-semibold text-right",children:"Total"})]})}),(0,m.jsxs)("tbody",{children:[t.map(e=>(0,m.jsxs)("tr",{className:"border-b",children:[m.jsx("td",{className:"p-2",children:e.name}),m.jsx("td",{className:"p-2 text-center",children:e.qty}),m.jsx("td",{className:"p-2 text-right font-mono",children:e.unitPrice.toFixed(2)}),m.jsx("td",{className:"p-2 text-right font-mono font-semibold",children:e.lineTotal.toFixed(2)})]},e.id)),(0,m.jsxs)("tr",{className:"border-b",children:[m.jsx("td",{className:"p-2",children:"Labor Charges"}),m.jsx("td",{className:"p-2 text-center",children:"1"}),m.jsx("td",{className:"p-2 text-right font-mono",children:e.labourAmount.toFixed(2)}),m.jsx("td",{className:"p-2 text-right font-mono font-semibold",children:e.labourAmount.toFixed(2)})]})]})]})]}),m.jsx("section",{className:"flex justify-end mt-4",children:(0,m.jsxs)("div",{className:"w-full max-w-xs space-y-1",children:[(0,m.jsxs)("div",{className:"flex justify-between text-sm",children:[m.jsx("span",{className:"text-slate-600",children:"Subtotal:"}),m.jsx("span",{className:"font-mono text-slate-800",children:(e.materialsSubtotal+e.labourAmount).toFixed(2)})]}),(0,m.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,m.jsxs)("span",{className:"text-slate-600",children:["VAT (",n.tax.vatRate,"%):"]}),m.jsx("span",{className:"font-mono text-slate-800",children:e.vatAmount.toFixed(2)})]}),(0,m.jsxs)("div",{className:"flex justify-between text-base font-bold border-t pt-1 mt-1",children:[m.jsx("span",{className:"text-slate-800",children:"Total Cost:"}),(0,m.jsxs)("span",{className:"font-mono text-slate-800",children:["Ksh ",e.totalCost.toFixed(2)]})]}),(0,m.jsxs)("div",{className:"flex justify-between text-sm",children:[m.jsx("span",{className:"text-slate-600",children:"Amount Paid:"}),m.jsx("span",{className:"font-mono text-green-600",children:e.amountPaid.toFixed(2)})]}),(0,m.jsxs)("div",{className:"flex justify-between text-lg font-bold border-t pt-1 mt-1 text-red-600",children:[m.jsx("span",{children:"Balance Due:"}),(0,m.jsxs)("span",{className:"font-mono",children:["Ksh ",e.balanceDue.toFixed(2)]})]})]})}),(0,m.jsxs)("section",{className:"mt-8",children:[m.jsx("h3",{className:"text-xs uppercase font-bold text-slate-500 mb-2",children:"Technician's Report / Work Done"}),m.jsx("div",{className:"h-32 border-2 border-dashed rounded-md p-2 text-slate-600"})]}),(0,m.jsxs)("footer",{className:"mt-12 pt-4 border-t",children:[m.jsx("p",{className:"text-xs text-center text-slate-600",children:"I, the undersigned, confirm that the service described above has been completed to my satisfaction."}),(0,m.jsxs)("div",{className:"mt-8 grid grid-cols-2 gap-8 text-sm",children:[(0,m.jsxs)("div",{children:[m.jsx("div",{className:"border-b border-black pb-1 mt-8"}),m.jsx("p",{className:"mt-1 font-semibold",children:"Client Signature"})]}),(0,m.jsxs)("div",{children:[m.jsx("div",{className:"border-b border-black pb-1 mt-8",children:o?.name||""}),m.jsx("p",{className:"mt-1 font-semibold",children:"Technician Signature"})]})]})]})]})}),SF=({label:e,isActive:t,onClick:r})=>(0,m.jsxs)("button",{onClick:r,className:`px-4 py-2 font-semibold text-sm relative transition-colors ${t?"text-primary dark:text-dark-primary":"text-foreground-muted dark:text-dark-foreground-muted"}`,children:[e,t&&m.jsx("div",{layoutId:"wo-detail-tab-underline",className:"absolute bottom-0 left-0 right-0 h-0.5 bg-primary dark:bg-dark-primary"})]}),SE=e=>Promise.all(Array.from(e.getElementsByTagName("img")).map(e=>new Promise(t=>{e.complete&&0!==e.naturalHeight?t():(e.onload=()=>t(),e.onerror=()=>{console.warn(`Could not load image for PDF generation: ${e.src}`),t()})}))),SO=({workOrder:e,materials:t,users:r,sales:n,settings:a,onBack:o,onUpdate:i,onPushToPOS:s})=>{let[l,A]=(0,g.useState)(e.status),[c,d]=(0,g.useState)(e.assignedTo||""),[u,h]=(0,g.useState)("details"),f=(0,g.useRef)(null),[p,x]=(0,g.useState)(!1),b=e.balanceDue<=0,y=l!==e.status||c!==(e.assignedTo||""),v=n.filter(t=>t.workOrderId===e.id).sort((e,t)=>new Date(e.date).getTime()-new Date(t.date).getTime()),w=e=>{if("Completed"===e&&!b){alert("This work order has an outstanding balance and cannot be marked as completed.");return}A(e)},k=async()=>{h("job_card"),setTimeout(async()=>{if(f.current&&!p){x(!0);try{await SE(f.current);let t=await (0,An.default)(f.current,{scale:2,useCORS:!0,backgroundColor:"#ffffff"}),r=t.toDataURL("image/png"),n=new sM("p","mm","a4"),a=n.internal.pageSize.getWidth(),o=t.height*a/t.width;n.addImage(r,"PNG",0,0,a,o),n.save(`JobCard_${e.id}.pdf`)}catch(e){console.error("Failed to generate PDF:",e),alert("Sorry, there was an error generating the PDF. The logo might be causing an issue.")}finally{x(!1)}}},100)};return m.jsx("div",{className:"p-4 md:p-6 bg-muted dark:bg-dark-muted min-h-full",children:(0,m.jsxs)("div",{className:"max-w-4xl mx-auto space-y-4",children:[(0,m.jsxs)("div",{className:"flex flex-col md:flex-row gap-4 justify-between items-start md:items-center no-print",children:[(0,m.jsxs)("div",{children:[m.jsx("h1",{className:"text-2xl font-bold text-foreground dark:text-dark-foreground",children:"Work Order Details"}),m.jsx("p",{className:"font-mono text-sm text-foreground-muted dark:text-dark-foreground-muted",children:e.id})]}),m.jsx("button",{onClick:o,className:"text-sm font-bold text-primary dark:text-dark-primary hover:underline self-end md:self-center",children:" Back to List"})]}),(0,m.jsxs)("div",{className:"flex justify-between items-center no-print",children:[(0,m.jsxs)("div",{className:"flex space-x-1 border-b border-border dark:border-dark-border",children:[m.jsx(SF,{label:"Details & Status",isActive:"details"===u,onClick:()=>h("details")}),m.jsx(SF,{label:"Job Card",isActive:"job_card"===u,onClick:()=>h("job_card")})]}),(0,m.jsxs)("div",{className:"flex items-center gap-2",children:[m.jsx("button",{onClick:()=>{h("job_card"),setTimeout(()=>{window.print()},100)},whileTap:{scale:.95},className:"bg-card dark:bg-dark-card text-foreground dark:text-dark-foreground font-semibold px-4 py-2 rounded-lg border border-border dark:border-dark-border",children:"Print"}),m.jsx("button",{onClick:k,disabled:p,whileTap:{scale:.95},className:"bg-primary text-primary-content font-semibold px-4 py-2 rounded-lg disabled:bg-slate-400",children:p?"Downloading...":"Download PDF"}),!b&&(0,m.jsxs)("button",{onClick:()=>s(e),whileTap:{scale:.95},className:"bg-primary text-primary-content font-bold py-2 px-4 rounded-lg",children:["Pay Balance (Ksh ",e.balanceDue.toFixed(2),")"]})]})]}),m.jsx("div",{initial:{opacity:0,y:10},animate:{opacity:1,y:0},children:"details"===u?(0,m.jsxs)("div",{className:"space-y-6",children:[(0,m.jsxs)("div",{className:"bg-card dark:bg-dark-card p-6 rounded-xl shadow-md space-y-4",children:[(0,m.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,m.jsxs)("div",{children:[m.jsx("p",{className:"text-xs font-semibold text-foreground-muted",children:"Customer"}),m.jsx("p",{className:"font-bold",children:e.customerName})]}),(0,m.jsxs)("div",{children:[m.jsx("p",{className:"text-xs font-semibold text-foreground-muted",children:"Job Title"}),m.jsx("p",{className:"font-bold",children:e.jobTitle})]}),(0,m.jsxs)("div",{children:[m.jsx("p",{className:"text-xs font-semibold text-foreground-muted",children:"Promised By"}),m.jsx("p",{className:"font-bold",children:e.promisedDate?new Date(e.promisedDate).toLocaleDateString():"N/A"})]})]}),(0,m.jsxs)("div",{children:[m.jsx("p",{className:"text-xs font-semibold text-foreground-muted",children:"Description"}),m.jsx("p",{className:"p-2 bg-muted dark:bg-dark-muted rounded mt-1 whitespace-pre-wrap text-sm",children:e.description})]}),(0,m.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 pt-4 border-t dark:border-dark-border",children:[(0,m.jsxs)("div",{children:[m.jsx("label",{className:"block text-sm font-medium",children:"Status"}),m.jsx("select",{value:l,onChange:e=>w(e.target.value),className:"w-full mt-1 p-2 border border-border dark:border-dark-border rounded-md bg-card dark:bg-dark-card",children:["Pending","InProgress","Completed","Cancelled"].map(e=>m.jsx("option",{value:e,children:e},e))})]}),(0,m.jsxs)("div",{children:[m.jsx("label",{className:"block text-sm font-medium",children:"Assign to Technician"}),(0,m.jsxs)("select",{value:c,onChange:e=>d(e.target.value),className:"w-full mt-1 p-2 border border-border dark:border-dark-border rounded-md bg-card dark:bg-dark-card",children:[m.jsx("option",{value:"",children:"Unassigned"}),r.map(e=>m.jsx("option",{value:e.id,children:e.name},e.id))]})]})]}),y&&m.jsx("div",{className:"flex justify-end",children:m.jsx("button",{onClick:()=>{if("Completed"===l&&e.balanceDue>0){alert("Cannot save as 'Completed' while a balance is due. Please clear the balance first."),A(e.status);return}i({...e,status:l,assignedTo:c||void 0,updatedAt:new Date().toISOString()})},className:"bg-primary text-primary-content font-bold py-2 px-6 rounded-lg",children:"Save Changes"})})]}),(0,m.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,m.jsxs)("div",{className:"bg-card dark:bg-dark-card p-6 rounded-xl shadow-md",children:[m.jsx("h3",{className:"text-lg font-bold mb-2",children:"Financial Breakdown"}),(0,m.jsxs)("div",{className:"space-y-1 text-sm",children:[(0,m.jsxs)("div",{className:"flex justify-between items-center",children:[m.jsx("span",{className:"text-foreground-muted",children:"Payment Status:"})," ",b?m.jsx("span",{className:"px-2 py-1 text-xs font-semibold rounded-full text-green-800 bg-green-100 dark:bg-green-900/50 dark:text-green-300",children:"Fully Paid"}):e.amountPaid>0?m.jsx("span",{className:"px-2 py-1 text-xs font-semibold rounded-full text-yellow-800 bg-yellow-100 dark:bg-yellow-900/50 dark:text-yellow-300",children:"Partially Paid"}):m.jsx("span",{className:"px-2 py-1 text-xs font-semibold rounded-full text-red-800 bg-red-100 dark:bg-red-900/50 dark:text-red-300",children:"Unpaid"})]}),(0,m.jsxs)("div",{className:"flex justify-between",children:[m.jsx("span",{className:"text-foreground-muted",children:"Labor Cost:"})," ",m.jsx("span",{className:"font-mono",children:e.labourAmount.toFixed(2)})]}),(0,m.jsxs)("div",{className:"flex justify-between",children:[m.jsx("span",{className:"text-foreground-muted",children:"Materials Cost:"})," ",m.jsx("span",{className:"font-mono",children:e.materialsSubtotal.toFixed(2)})]}),(0,m.jsxs)("div",{className:"flex justify-between",children:[(0,m.jsxs)("span",{className:"text-foreground-muted",children:["VAT (",a.tax.vatRate,"%):"]})," ",m.jsx("span",{className:"font-mono",children:e.vatAmount.toFixed(2)})]}),(0,m.jsxs)("div",{className:"flex justify-between font-bold border-t pt-1 mt-1",children:[m.jsx("span",{children:"Total Cost:"})," ",m.jsx("span",{className:"font-mono",children:e.totalCost.toFixed(2)})]}),(0,m.jsxs)("div",{className:"flex justify-between",children:[m.jsx("span",{className:"text-foreground-muted",children:"Total Paid:"})," ",m.jsx("span",{className:"font-mono text-green-600",children:e.amountPaid.toFixed(2)})]}),e.balanceDue>0?(0,m.jsxs)("div",{className:"flex justify-between font-bold text-lg text-danger pt-1 mt-1",children:[m.jsx("span",{children:"Balance Due:"})," ",m.jsx("span",{className:"font-mono",children:e.balanceDue.toFixed(2)})]}):e.balanceDue<0?(0,m.jsxs)("div",{className:"flex justify-between font-bold text-lg text-green-600 pt-1 mt-1",children:[m.jsx("span",{children:"Credit:"})," ",m.jsx("span",{className:"font-mono",children:Math.abs(e.balanceDue).toFixed(2)})]}):(0,m.jsxs)("div",{className:"flex justify-between font-bold text-lg text-green-600 pt-1 mt-1",children:[m.jsx("span",{children:"Balance:"})," ",m.jsx("span",{className:"font-mono",children:"0.00"})]})]})]}),(0,m.jsxs)("div",{className:"bg-card dark:bg-dark-card p-6 rounded-xl shadow-md",children:[m.jsx("h3",{className:"text-lg font-bold mb-2",children:"Payment History"}),v.length>0?m.jsx("ul",{className:"divide-y dark:divide-dark-border text-sm",children:v.map(e=>(0,m.jsxs)("li",{className:"py-2",children:[(0,m.jsxs)("div",{className:"flex justify-between",children:[m.jsx("span",{children:new Date(e.date).toLocaleDateString()}),m.jsx("span",{className:"font-mono font-semibold",children:e.total.toFixed(2)})]}),m.jsx("p",{className:"text-xs text-foreground-muted",children:e.items[0].name})]},e.id))}):m.jsx("p",{className:"text-sm text-foreground-muted",children:"No payments recorded for this work order yet."})]})]})]}):m.jsx("div",{className:"print-area",children:m.jsx(SS,{ref:f,workOrder:e,materials:t,users:r,settings:a})})},u)]})})},SP=({label:e,value:t,valueClassName:r,isBold:n})=>(0,m.jsxs)("div",{className:`flex justify-between items-center py-2 border-b border-gray-200 ${n?"font-bold":""}`,children:[m.jsx("span",{className:"text-sm text-gray-600",children:e}),m.jsx("span",{className:`text-sm text-gray-800 ${r||""}`,children:t})]}),SI=({payment:e,invoice:t,po:r,supplier:n,user:a,settings:o})=>{let i=t.paidAmount-e.amount,s=t.totalAmount-t.paidAmount,l="#2EAF7D";return(0,m.jsxs)("div",{className:"bg-white p-8 font-sans text-gray-800 w-full max-w-2xl mx-auto my-4 border border-gray-200 shadow-md",children:[(0,m.jsxs)("header",{className:"text-center mb-8",children:[m.jsx("h1",{className:"text-2xl font-bold uppercase",style:{color:l},children:o.businessInfo.name||"CRENEN LOGISTICS"}),m.jsx("p",{className:"text-xs text-gray-500",children:o.businessInfo.location||"MTWAPA - KILIFI"}),(0,m.jsxs)("p",{className:"text-xs text-gray-500",children:["Tel: ",o.businessInfo.phone," | Email: ",o.businessInfo.email]}),m.jsx("h2",{className:"text-lg font-semibold mt-4 tracking-wider border-b-2 pb-2",style:{borderColor:l},children:"SUPPLIER PAYMENT RECONCILIATION"})]}),(0,m.jsxs)("section",{className:"mb-6 p-4 border rounded-md border-gray-300",children:[m.jsx("h3",{className:"text-md font-semibold mb-2",style:{color:l,borderBottom:`2px solid ${l}`,paddingBottom:"0.5rem"},children:"Payment Details"}),(0,m.jsxs)("div",{className:"space-y-1",children:[m.jsx(SP,{label:"Transaction Number:",value:e.id}),m.jsx(SP,{label:"Payment Date:",value:new Date(e.paymentDate).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})}),m.jsx(SP,{label:"Purchase Order:",value:r.poNumber}),m.jsx(SP,{label:"Supplier:",value:n.businessName||n.name}),m.jsx(SP,{label:"Payment Method:",value:e.method}),m.jsx(SP,{label:"Reference Number:",value:e.referenceNumber||"N/A"}),m.jsx(SP,{label:"Processed By:",value:e.processedByName})]})]}),(0,m.jsxs)("section",{className:"mb-6 p-4 border rounded-md",style:{borderColor:l,backgroundColor:"rgba(46, 175, 125, 0.1)"},children:[m.jsx("p",{className:"text-sm font-semibold uppercase text-center",style:{color:l},children:"Amount Paid"}),(0,m.jsxs)("p",{className:"text-3xl font-bold text-center mt-1",style:{color:l},children:[o.businessInfo.currency," ",e.amount.toFixed(2)]}),m.jsx("p",{className:"text-xs text-gray-600 text-center mt-2",children:"This payment has been recorded and applied to the account"})]}),(0,m.jsxs)("section",{className:"p-4 border-2 rounded-md",style:{borderColor:"#E95E4D",backgroundColor:"rgba(233, 94, 77, 0.05)"},children:[m.jsx("h3",{className:"text-md font-semibold mb-2",style:{color:l,borderBottom:`2px solid ${l}`,paddingBottom:"0.5rem"},children:"Account Balance Summary"}),(0,m.jsxs)("div",{className:"space-y-1",children:[m.jsx(SP,{label:"Original PO Total:",value:`${o.businessInfo.currency} ${r.totalCost.toFixed(2)}`}),m.jsx(SP,{label:"Previous Payments:",value:`${o.businessInfo.currency} ${i.toFixed(2)}`,valueClassName:"text-red-500"}),m.jsx(SP,{label:"This Payment:",value:`${o.businessInfo.currency} ${e.amount.toFixed(2)}`}),m.jsx("div",{className:"border-t border-gray-600 my-2"}),m.jsx(SP,{label:"New Balance Due:",value:`${o.businessInfo.currency} ${s.toFixed(2)}`,isBold:!0,valueClassName:"text-xl"})]}),s<=0&&m.jsx("div",{className:"mt-4 p-3 text-center rounded-md font-bold text-white",style:{backgroundColor:l},children:" ACCOUNT FULLY PAID"})]}),m.jsx("section",{className:"mt-16 flex justify-end",children:(0,m.jsxs)("div",{className:"w-1/2 text-center",children:[m.jsx("div",{className:"border-b border-gray-400"}),m.jsx("p",{className:"text-sm font-semibold mt-2",children:"Authorized Signature"}),(0,m.jsxs)("p",{className:"text-xs text-gray-500",children:[o.businessInfo.name," - Accounts Department"]})]})}),(0,m.jsxs)("footer",{className:"text-center mt-16 text-xs text-gray-500",children:[m.jsx("p",{className:"font-bold",children:o.businessInfo.name}),m.jsx("p",{children:o.businessInfo.location}),m.jsx("div",{className:"my-4 border-t border-gray-200"}),m.jsx("p",{children:"This is an official payment reconciliation document"}),(0,m.jsxs)("p",{children:["Generated on ",new Date().toLocaleString()]}),m.jsx("p",{className:"mt-2",children:"This document serves as proof of payment and account reconciliation."}),m.jsx("p",{className:"mt-1 font-semibold",children:"Powered by Banduka POS"})]})]})},SU=({info:e,user:t,settings:r,onDone:n})=>m.jsx("div",{className:"h-full flex flex-col bg-background dark:bg-dark-background p-4 md:p-8 md:items-center md:justify-center",children:(0,m.jsxs)("div",{className:"w-full max-w-5xl flex flex-col md:flex-row gap-8 h-full md:h-auto",children:[(0,m.jsxs)("div",{className:"flex-shrink-0 md:flex-grow bg-card dark:bg-dark-card p-8 rounded-2xl shadow-lg text-center flex flex-col items-center justify-center no-print",children:[m.jsx("div",{initial:{scale:0},animate:{scale:1},transition:{type:"spring",stiffness:260,damping:20,delay:.2},className:"bg-success/10 dark:bg-dark-success/10 rounded-full p-4 mb-4",children:m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-16 w-16 text-success dark:text-dark-success",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),m.jsx("h1",{className:"text-3xl font-bold text-foreground dark:text-dark-foreground",children:"Payment Recorded!"}),(0,m.jsxs)("p",{className:"text-foreground/70 dark:text-dark-foreground/70 mt-2",children:["Payment of ",r.businessInfo.currency," ",e.payment.amount.toFixed(2)," to ",e.supplier.name," has been successfully recorded."]}),(0,m.jsxs)("div",{className:"mt-8 flex flex-wrap justify-center gap-4",children:[m.jsx("button",{onClick:n,whileHover:{scale:1.05},whileTap:{scale:.95},className:"bg-primary dark:bg-dark-primary text-primary-content dark:text-dark-primary-content font-bold py-3 px-8 rounded-xl",children:"Done"}),m.jsx("button",{onClick:()=>{window.print()},whileHover:{scale:1.05},whileTap:{scale:.95},className:"bg-foreground/80 dark:bg-dark-border text-white font-bold py-3 px-6 rounded-lg hover:bg-foreground dark:hover:bg-dark-border/80",children:"Print Reconciliation"})]})]}),m.jsx("div",{className:"flex-grow w-full md:w-auto md:flex-grow-0 flex-shrink-0 overflow-y-auto print-area",children:m.jsx("div",{id:"receipt-container",style:{width:"210mm"},children:m.jsx("div",{id:"receipt-to-print",children:m.jsx(SI,{...e,user:t,settings:r})})})})]})}),SL=[{key:"name",label:"Product Name",required:!0,aliases:["name","productname","title","item"]},{key:"price",label:"Selling Price",required:!0,aliases:["price","sellingprice","saleprice","rate"]},{key:"stock",label:"Stock Quantity",required:!0,aliases:["stock","quantity","qty","onhand","stockonhand"]},{key:"costPrice",label:"Cost Price",required:!1,aliases:["cost","costprice","unitcost","purchaseprice"]},{key:"inventoryCode",label:"SKU / Inventory Code",required:!1,aliases:["sku","inventorycode","code","itemcode"]},{key:"upc",label:"UPC / Barcode",required:!1,aliases:["upc","barcode","ean"]},{key:"category",label:"Category",required:!1,aliases:["category","type","department"]},{key:"description",label:"Description",required:!1,aliases:["description","desc"]},{key:"unitOfMeasure",label:"Unit of Measure",required:!1,aliases:["unit","unitofmeasure","uom"]}],S_=({onClose:e,onImportConfirm:t,csvHeaders:r,csvPreview:n})=>{let a=(0,g.useMemo)(()=>{let e={},t=r.map(e=>e.toLowerCase().replace(/[\s_-]/g,""));return SL.forEach(n=>{for(let a of n.aliases){let o=t.indexOf(a);if(-1!==o){e[n.key]=r[o];break}}}),e},[r]),[o,i]=(0,g.useState)(a),s=(e,t)=>{i(r=>({...r,[e]:t}))},l=(0,g.useMemo)(()=>SL.every(e=>!e.required||o[e.key]&&"__do_not_import__"!==o[e.key]),[o]);return m.jsx("div",{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50 p-4",onClick:e,children:(0,m.jsxs)("div",{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{type:"spring",stiffness:300,damping:30},className:"bg-card dark:bg-dark-card rounded-xl shadow-2xl w-full max-w-4xl max-h-[90vh] flex flex-col",onClick:e=>e.stopPropagation(),children:[(0,m.jsxs)("div",{className:"flex-shrink-0 p-6 border-b border-border dark:border-dark-border",children:[m.jsx("h2",{className:"text-2xl font-bold text-foreground dark:text-dark-foreground",children:"Map CSV Columns to Product Fields"}),m.jsx("p",{className:"text-sm text-foreground-muted dark:text-dark-foreground-muted mt-1",children:"Match the columns from your uploaded file to the required fields in the application."})]}),(0,m.jsxs)("div",{className:"flex-grow p-6 grid grid-cols-1 md:grid-cols-2 gap-6 overflow-y-auto",children:[(0,m.jsxs)("div",{className:"space-y-4",children:[m.jsx("h3",{className:"font-semibold text-lg",children:"Field Mapping"}),SL.map(e=>(0,m.jsxs)("div",{children:[(0,m.jsxs)("label",{className:"block text-sm font-medium text-foreground dark:text-dark-foreground",children:[e.label," ",e.required&&m.jsx("span",{className:"text-danger",children:"*"})]}),(0,m.jsxs)("select",{value:o[e.key]||"__do_not_import__",onChange:t=>s(e.key,t.target.value),className:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-border dark:border-dark-border bg-background dark:bg-dark-background focus:outline-none focus:ring-primary focus:border-primary sm:text-sm rounded-md",children:[m.jsx("option",{value:"__do_not_import__",children:"-- Do not import --"}),r.map(e=>m.jsx("option",{value:e,children:e},e))]})]},e.key))]}),(0,m.jsxs)("div",{className:"overflow-x-auto",children:[m.jsx("h3",{className:"font-semibold text-lg mb-4",children:"Data Preview"}),m.jsx("div",{className:"border border-border dark:border-dark-border rounded-lg overflow-hidden",children:(0,m.jsxs)("table",{className:"w-full text-xs text-left",children:[m.jsx("thead",{className:"bg-muted dark:bg-dark-muted",children:m.jsx("tr",{children:r.map((e,t)=>m.jsx("th",{className:"p-2 font-semibold truncate",children:e},t))})}),m.jsx("tbody",{className:"divide-y divide-border dark:divide-dark-border",children:n.map((e,t)=>m.jsx("tr",{children:e.map((e,t)=>m.jsx("td",{className:"p-2 truncate",children:e},t))},t))})]})}),(0,m.jsxs)("p",{className:"text-xs text-foreground-muted dark:text-dark-foreground-muted mt-2",children:["Showing first ",n.length," rows of your file."]})]})]}),(0,m.jsxs)("div",{className:"flex-shrink-0 flex justify-between items-center p-6 border-t border-border dark:border-dark-border",children:[m.jsx("p",{className:"text-xs text-foreground-muted dark:text-dark-foreground-muted",children:"* Required fields"}),(0,m.jsxs)("div",{className:"flex space-x-3",children:[m.jsx("button",{type:"button",onClick:e,className:"bg-muted dark:bg-dark-muted text-foreground dark:text-dark-foreground font-bold px-4 py-2 rounded-lg",children:"Cancel"}),m.jsx("button",{onClick:()=>t(o),disabled:!l,className:"bg-primary text-primary-content font-bold px-6 py-2 rounded-lg disabled:bg-slate-400",children:"Confirm & Import"})]})]})]})})},SQ=({message:e})=>m.jsx("div",{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/70 flex items-center justify-center z-50 p-4",style:{zIndex:9999},children:(0,m.jsxs)("div",{initial:{scale:.9,y:20,opacity:0},animate:{scale:1,y:0,opacity:1},exit:{scale:.9,y:20,opacity:0},transition:{type:"spring",stiffness:400,damping:30},className:"bg-card dark:bg-dark-card rounded-2xl shadow-2xl w-full max-w-md p-6 text-center",children:[m.jsx("h3",{className:"text-xl font-bold text-foreground dark:text-dark-foreground mb-4",children:"Processing..."}),m.jsx("p",{className:"text-sm text-foreground-muted dark:text-dark-foreground-muted mb-6",children:e}),m.jsx("div",{className:"w-full bg-muted dark:bg-dark-muted rounded-full h-4 overflow-hidden border border-border dark:border-dark-border",children:m.jsx("div",{className:"bg-primary h-4 rounded-full",initial:{width:"0%"},animate:{width:"100%"},transition:{duration:2.5,ease:"easeInOut"}})})]})});of.div;let ST=e=>{let t=[],r="",n=!1;for(let a=0;a<e.length;a++){let o=e[a];n?'"'===o?a+1<e.length&&'"'===e[a+1]?(r+='"',a++):n=!1:r+=o:'"'===o?n=!0:","===o?(t.push(r),r=""):r+=o}return t.push(r),t},SD=({currentUser:e,onLogout:t,allUsers:r,onAddUser:n,onUpdateUser:a,onDeleteUser:o})=>{let[i]=oy(),[s,l]=(0,g.useState)(!0),[A,c]=(0,g.useState)(sf.Dashboard),[d,u]=(0,g.useState)(!1),[h,f]=(0,g.useState)([]),[p,x]=(0,g.useState)(null),[b,y]=(0,g.useState)(null),[v,w]=(0,g.useState)(!1),[k,B]=(0,g.useState)(!1),[j,C]=(0,g.useState)([]),[N,S]=(0,g.useState)([]),[F,E]=(0,g.useState)([]),[O,P]=(0,g.useState)([]),[I,U]=(0,g.useState)([]),[L,_]=(0,g.useState)([]),[T,D]=(0,g.useState)([]),[M,H]=(0,g.useState)([]),[R,K]=(0,g.useState)(r),[V,X]=(0,g.useState)(om),[Y,J]=(0,g.useState)([]),[Z,ee]=(0,g.useState)([]),[et,er]=(0,g.useState)([]),[en,ea]=(0,g.useState)([]),[eo,ei]=(0,g.useState)([]),[es,el]=(0,g.useState)([]),[eA,ec]=(0,g.useState)([]),[ed,eu]=(0,g.useState)([]),[eh,ef]=(0,g.useState)([]),[ep,em]=(0,g.useState)([]),[eg,ex]=(0,g.useState)([]),[eb,ey]=(0,g.useState)([]),[ev,ew]=(0,g.useState)([]),[ek,eB]=(0,g.useState)(""),[ej,eC]=(0,g.useState)(null),[eN,eS]=(0,g.useState)(null),[eF,eE]=(0,g.useState)(!1),[eO,eP]=(0,g.useState)(null),[eI,eU]=(0,g.useState)(null),[eL,e_]=(0,g.useState)(null),[eQ,eT]=(0,g.useState)(null),[eD,eM]=(0,g.useState)(null),[eH,eR]=(0,g.useState)(null),[eK,eV]=(0,g.useState)(null),[eq,eG]=(0,g.useState)(null),[ez,eW]=(0,g.useState)(null),[e$,eX]=(0,g.useState)(null),[eY,eJ]=(0,g.useState)(!1),[eZ,e0]=(0,g.useState)(null),[e1,e2]=(0,g.useState)(null),[e5,e4]=(0,g.useState)(null),[e3,e6]=(0,g.useState)(null),[e8,e7]=(0,g.useState)(null),[e9,te]=(0,g.useState)(null),[tt,tr]=(0,g.useState)(null),[tn,ta]=(0,g.useState)(!1),[to,ti]=(0,g.useState)(null),[ts,tl]=(0,g.useState)(null),[tA,tc]=(0,g.useState)(null),[td,tu]=(0,g.useState)(!1),[th,tf]=(0,g.useState)(null),[tp,tm]=(0,g.useState)(!1),[tg,tx]=(0,g.useState)(!1),[tb,ty]=(0,g.useState)(null),[tv,tw]=(0,g.useState)(null),[tk,tB]=(0,g.useState)(null),[tj,tC]=(0,g.useState)(null),[tN,tS]=(0,g.useState)(null),[tF,tE]=(0,g.useState)(!1),[tO,tP]=(0,g.useState)(!1),[tI,tU]=(0,g.useState)(!1),[tL,t_]=(0,g.useState)(null),[tQ,tT]=(0,g.useState)(null),[tD,tM]=(0,g.useState)(void 0);(0,g.useEffect)(()=>{let t;if(!e?.pin){w(!1);return}let r=()=>{clearTimeout(t),t=setTimeout(()=>w(!0),3e5)},n=["mousemove","mousedown","keypress","touchstart"];return n.forEach(e=>window.addEventListener(e,r)),r(),()=>{clearTimeout(t),n.forEach(e=>window.removeEventListener(e,r))}},[e]),(0,g.useEffect)(()=>{K(r)},[r]);let tH=(0,g.useCallback)((e,t="info")=>{let r={id:Date.now(),message:e,type:t};f(e=>[r]),setTimeout(()=>{f(e=>e.filter(e=>e.id!==r.id))},3e3)},[]);(0,g.useEffect)(()=>{let e=e=>{x(e.detail)};window.addEventListener("new-sw-update",e);let t=e=>{e.preventDefault(),y(e)};return window.addEventListener("beforeinstallprompt",t),()=>{window.removeEventListener("new-sw-update",e),window.removeEventListener("beforeinstallprompt",t)}},[]),(0,g.useEffect)(()=>{(async()=>{try{let[t,r,n,a,o,i,s,l,A,c,d,u,h,f,p,m,g,x,b,y,v]=await Promise.all([q("products"),q("customers"),q("sales"),q("suppliers"),q("purchaseOrders"),q("supplierInvoices"),q("supplierPayments"),q("quotations"),G("settings",om.id),q("auditLogs"),q("shifts"),q("timeClockEvents"),q("payouts"),q("layaways"),q("workOrders"),q("salesOrders"),q("heldReceipts"),q("workOrderMaterials"),q("chartOfAccounts"),q("accountingTransactions"),q("bankDeposits")]),w=r.find(e=>"cust001"===e.id);w||(w={id:"cust001",name:"Walk-in Customer",phone:"N/A",email:"walkin@example.com",address:"N/A",city:"N/A",dateAdded:new Date,loyaltyPoints:0},await z("customers",w),r.unshift(w)),C(t),S(r),E(n),P(a),U(o),_(i),D(s),H(l),J(c.sort((e,t)=>t.timestamp.getTime()-e.timestamp.getTime())),ee(d),ea(u),er(h),ei(f),el(p),ec(m),eu(g),ef(x),ex(y),ey(v);let k=b;if(0===k.length){let e=[{id:"acc_cash",code:"1010",name:"Cash on Hand",type:"Assets",isEditable:!1},{id:"acc_mpesa",code:"1020",name:"M-Pesa Till",type:"Assets",isEditable:!1},{id:"acc_card",code:"1030",name:"Card/Bank Payments",type:"Assets",isEditable:!1},{id:"acc_inventory",code:"1200",name:"Inventory Asset",type:"Assets",isEditable:!1},{id:"acc_vat_receivable",code:"1300",name:"VAT Receivable",type:"Assets",isEditable:!1},{id:"acc_ap",code:"2010",name:"Accounts Payable",type:"Liabilities",isEditable:!1},{id:"acc_cust_deposits",code:"2200",name:"Customer Deposits",type:"Liabilities",isEditable:!1},{id:"acc_vat_payable",code:"2310",name:"VAT Payable",type:"Liabilities",isEditable:!1},{id:"acc_shift_clearing",code:"2500",name:"Shift Float Clearing",type:"Liabilities",isEditable:!1},{id:"acc_sales",code:"4010",name:"Sales Revenue",type:"Revenue",isEditable:!1},{id:"acc_sales_returns",code:"4510",name:"Sales Returns & Allowances",type:"Contra Revenue",isEditable:!1},{id:"acc_cogs",code:"5010",name:"Cost of Goods Sold",type:"Expenses",isEditable:!1}];for(let t of e)await z("chartOfAccounts",t);k=e}em(k);let B=A;if(B?B={...om,...B,businessInfo:{...om.businessInfo,...B.businessInfo||{}},tax:{...om.tax,...B.tax||{}},discount:{...om.discount,...B.discount||{}},receipt:{...om.receipt,...B.receipt||{}},layaway:{...om.layaway,...B.layaway||{}},hardware:{...om.hardware,...B.hardware||{},printer:{...om.hardware.printer,...B.hardware?.printer||{}},barcodeScanner:{...om.hardware.barcodeScanner,...B.hardware?.barcodeScanner||{}},barcodePrinter:{...om.hardware.barcodePrinter,...B.hardware?.barcodePrinter||{}}},loyalty:{...om.loyalty,...B.loyalty||{}},measurements:{...om.measurements,...B.measurements||{}},permissions:{...om.permissions,...B.permissions||{}},paymentMethods:{...om.paymentMethods,...B.paymentMethods||{}},inventory:{...om.inventory,...B.inventory||{}},accounting:{...om.accounting,...B.accounting||{}}}:(B=om,await z("settings",om)),!B.accounting?.defaultCashAccountId||!B.accounting?.defaultShiftClearingId||!B.accounting?.defaultCustomerDepositsId){let e={...B.accounting,defaultCashAccountId:"acc_cash",defaultMpesaAccountId:"acc_mpesa",defaultCardAccountId:"acc_card",defaultBankAccountId:"acc_card",defaultSalesAccountId:"acc_sales",defaultVatPayableAccountId:"acc_vat_payable",defaultVatReceivableAccountId:"acc_vat_receivable",defaultCogsAccountId:"acc_cogs",defaultInventoryAccountId:"acc_inventory",defaultSalesReturnAccountId:"acc_sales_returns",defaultAccountsPayableId:"acc_ap",defaultCustomerDepositsId:"acc_cust_deposits",defaultShiftClearingId:"acc_shift_clearing"};B={...B,accounting:e},await z("settings",B)}X(B);let j=d.find(t=>t.userId===e.id&&"active"===t.status);eC(j||null);let N=u.find(t=>t.userId===e.id&&"clocked-in"===t.status);eS(N||null),eB(w.id)}catch(e){console.error("Error loading data:",e),tH("Error loading data from the database.","error")}finally{l(!1)}})()},[e.id,tH]);let tR=(0,g.useMemo)(()=>V.permissions[e.role]||[],[V.permissions,e.role]),tK=e=>{e_(null),eT(null),eM(null),eR(null),e2(null),e7(null),te(null),c(e),u(!1)},tV=(0,g.useCallback)(()=>{ew([]),tl(null),tw(null),tB(null),eB(N.find(e=>"cust001"===e.id)?.id||"")},[N]),tq=async e=>{try{let t={...V,...e};X(t),await z("settings",t)}catch(e){console.error("Failed to update settings",e),tH("Failed to save settings.","error")}},tG=(0,g.useCallback)(async(t,r)=>{if(e)try{let n={id:`log_${Date.now()}`,timestamp:new Date,userId:e.id,userName:e.name,action:t,details:r};await z("auditLogs",n),J(e=>[n,...e])}catch(e){console.error("Failed to write to audit log.",{action:t,details:r,error:e})}},[e]),tz=(0,g.useCallback)(async()=>{if("ESC/POS"!==V.hardware.printer.type){tH("Open Drawer is only available for ESC/POS direct printers.","info");return}try{await oP(V.hardware.printer),tH("Open drawer signal sent!","success"),e&&await tG("Cash Drawer Opened",`User ${e.name} opened the cash drawer manually.`)}catch(e){console.error("Open drawer error:",e),tH(e.message||"Failed to open drawer.","error")}},[V.hardware.printer,tH,tG,e]),tW=(0,g.useCallback)(e=>{if("Inventory"===e.productType&&e.stock<=0){tH(`${e.name} is out of stock.`,"error");return}ew(t=>{let r=t.find(t=>t.id===e.id);return r?"Inventory"===e.productType&&r.quantity>=e.stock?(tH(`No more stock available for ${e.name}.`,"error"),t):t.map(t=>t.id===e.id?{...t,quantity:t.quantity+1}:t):[...t,{...e,quantity:1}]})},[j,tH]),t$=(0,g.useCallback)((e,t)=>{ew(r=>{if(!r.find(t=>t.id===e))return r;let n=j.find(t=>t.id===e);return(n&&"Inventory"===n.productType&&t>n.stock&&(tH(`Only ${n.stock} units of ${n.name} available.`,"info"),t=n.stock),t<=0)?r.filter(t=>t.id!==e):r.map(r=>r.id===e?{...r,quantity:t}:r)})},[j,tH]),tX=(0,g.useCallback)((e,t)=>{ew(r=>r.map(r=>r.id===e?{...r,discount:t}:r))},[]),tY=(0,g.useCallback)(e=>{ew(t=>t.filter(t=>t.id!==e))},[]),tJ=(0,g.useCallback)(async(e,t,r,n)=>{try{let a=n.reduce((e,t)=>e+t.debit,0),o=n.reduce((e,t)=>e+t.credit,0);if(Math.abs(a-o)>.01){console.error("Accounting transaction does not balance!",{description:e,entries:n,totalDebits:a,totalCredits:o}),tH(`Critical accounting error: ${e} does not balance.`,"error");return}let i={id:`trans_${Date.now()}`,date:new Date,description:e,referenceId:t,referenceType:r,entries:n};await z("accountingTransactions",i),ex(e=>[...e,i])}catch(t){console.error("Failed to create accounting transaction.",{description:e,error:t}),tH("Failed to record transaction in General Ledger.","error")}},[tH]),tZ=async t=>{if(ej){tH("A shift is already active.","error");return}if(!e){tH("Cannot start shift, no user logged in.","error");return}let r={id:`shift_${Date.now()}_${e.id}`,userId:e.id,userName:e.name,startTime:new Date,status:"active",startingFloat:t,salesIds:[],expenseIds:[]};try{await z("shifts",r),ee(e=>[...e,r]),eC(r);let{accounting:n}=V;n.defaultCashAccountId&&n.defaultShiftClearingId&&t>0&&await tJ(`Starting Float for Shift ${r.id}`,r.id,"ShiftFloat",[{accountId:n.defaultCashAccountId,debit:t,credit:0},{accountId:n.defaultShiftClearingId,debit:0,credit:t}]);let a={id:`tc_${Date.now()}_${e.id}`,userId:e.id,userName:e.name,clockInTime:new Date,status:"clocked-in"};await z("timeClockEvents",a),ea(e=>[...e,a]),eS(a),await tG("Shift Started",`User ${e.name} started a new shift with a float of KES ${t}.`),tH(`Shift started for ${e.name}.`,"success")}catch(e){console.error("Failed to start shift:",e),tH("Failed to start a new shift.","error")}},t0=async(t,r)=>{if(!ej||!eN){tH("No active shift or clock-in event to end.","error");return}let n=F.filter(e=>ej.salesIds.includes(e.id)),a=et.filter(e=>ej.expenseIds?.includes(e.id)),o={},i=0;n.forEach(e=>{e.payments.forEach(e=>{o[e.method]=(o[e.method]||0)+e.amount}),i+=e.change});let s=n.reduce((e,t)=>e+t.total,0),l=a.reduce((e,t)=>e+t.amount,0),A=(o.Cash||0)-i,c=ej.startingFloat+A-l,d=t-c,u={...ej,endTime:new Date,status:"closed",salesIds:n.map(e=>e.id),expenseIds:a.map(e=>e.id),paymentBreakdown:o,totalSales:s,totalPayouts:l,expectedCashInDrawer:c,actualCashInDrawer:t,cashVariance:d};try{await z("shifts",u);let{accounting:t}=V,n=u.startingFloat;t.defaultCashAccountId&&t.defaultShiftClearingId&&n>0&&await tJ(`Ending Float for Shift ${u.id}`,u.id,"ShiftFloat",[{accountId:t.defaultShiftClearingId,debit:n,credit:0},{accountId:t.defaultCashAccountId,debit:0,credit:n}]),ee(e=>e.map(e=>e.id===u.id?u:e)),eC(null),eP(u),eE(!1);let a={...eN,clockOutTime:new Date,status:"clocked-out",notes:r};await z("timeClockEvents",a),ea(e=>e.map(e=>e.id===a.id?a:e)),eS(null),await tG("Shift Ended",`User ${e.name} ended shift ${u.id} with a variance of KES ${d}.`),tH("Shift ended successfully.","success")}catch(e){console.error("Failed to end shift:",e),tH("An error occurred while ending the shift.","error")}},t1=async(e,t=!1)=>{try{let r=es.find(t=>t.id===e.id);if(r&&"Cancelled"===e.status&&"Cancelled"!==r.status){let e=[...j],t=!1;for(let n of eh.filter(e=>e.workOrderId===r.id)){let r=e.findIndex(e=>e.id===n.materialId);if(-1!==r&&"Inventory"===e[r].productType){let a=e[r];e[r]={...a,reservedStock:Math.max(0,(a.reservedStock||0)-n.qty)},await z("products",e[r]),t=!0}}t&&C(e)}el(t=>t.map(t=>t.id===e.id?e:t)),await z("workOrders",e),t||tH(`Work Order #${e.id} updated.`,"success"),e7(e)}catch(t){console.error("Failed to update work order:",{workOrderId:e.id,error:t}),tH("Error updating work order.","error")}},t2=async t=>{if(!ej||!e)throw Error("Cannot complete sale. No active shift or user.");try{let{accounting:r}=V,n=V.loyalty.enabled?Math.floor((t.total+(t.depositApplied||0))/V.loyalty.pointsPerKsh):0,a={quotationId:tk||void 0,workOrderId:t.workOrderId||ts||void 0,salesOrderId:t.salesOrderId||tv||void 0,layawayId:t.layawayId||void 0},o={...t,...a,id:`${V.receipt.invoicePrefix}${Date.now()}`,synced:!1,cashierId:e.id,cashierName:e.name,shiftId:ej.id,pointsEarned:n,pointsBalanceAfter:0},i=[...j],s=eA.find(e=>e.id===o.salesOrderId&&!o.items.some(e=>e.id.startsWith("SO_DEPOSIT"))),l=es.find(e=>e.id===o.workOrderId&&!o.items.some(e=>e.id.startsWith("WO_DEPOSIT_")));if(s){for(let e of s.items)if(e.productId&&e.quantity>0){let t=i.findIndex(t=>t.id===e.productId);if(-1!==t&&"Inventory"===i[t].productType){let r=i[t],n=r.stock-e.quantity,a=(r.reservedStock||0)-e.quantity;i[t]={...r,stock:n,reservedStock:Math.max(0,a)},await z("products",i[t])}}}else if(l){for(let e of eh.filter(e=>e.workOrderId===l.id))if(e.materialId){let t=i.findIndex(t=>t.id===e.materialId);if(-1!==t&&"Inventory"===i[t].productType){let r=i[t],n=r.stock-e.qty,a=(r.reservedStock||0)-e.qty;i[t]={...r,stock:n,reservedStock:Math.max(0,a)},await z("products",i[t])}}}else for(let e of o.items)if("Inventory"===e.productType){let t=i.findIndex(t=>t.id===e.id);if(-1!==t){let r=i[t],n=r.stock-e.quantity;i[t]={...r,stock:n},await z("products",i[t])}}if(C(i),V.loyalty.enabled&&"cust001"!==o.customerId){let e=N.findIndex(e=>e.id===o.customerId);if(-1!==e){let t=N[e],r=t.loyaltyPoints+n-o.pointsUsed;o.pointsBalanceAfter=r;let a={...t,loyaltyPoints:r},i=[...N];i[e]=a,S(i),await z("customers",a)}}if(o.quotationId){let e=M.find(e=>e.id===o.quotationId);if(e){let t={...e,status:"Invoiced"};await rv(t)}}if(o.salesOrderId){let e=eA.find(e=>e.id===o.salesOrderId);if(e){if(o.items.some(e=>e.id.startsWith("SO_DEPOSIT")))o.grandTotal=e.total,o.depositApplied=0,o.balanceDue=e.balance;else{o.grandTotal=e.total,o.depositApplied=e.deposit,o.balanceDue=0;let t={...e,balance:0,status:"Completed"};await rd(t)}}}else if(o.workOrderId){let e=es.find(e=>e.id===o.workOrderId);if(e){if(o.items.some(e=>e.id.startsWith("WO_DEPOSIT_"))){o.grandTotal=e.totalCost,o.depositApplied=0;let t=e.amountPaid+o.total;o.balanceDue=e.totalCost-t;let n={...e,amountPaid:t,balanceDue:o.balanceDue};if(await t1(n,!0),r.defaultCustomerDepositsId){let t=[];o.payments.forEach(e=>{let n="";if("Cash"===e.method&&(n=r.defaultCashAccountId),"M-Pesa"===e.method&&(n=r.defaultMpesaAccountId),"Card"===e.method&&(n=r.defaultCardAccountId),"Points"===e.method&&o.pointsValue>0)t.push({accountId:r.defaultSalesAccountId,debit:o.pointsValue,credit:0});else if(n){let r="Cash"===e.method?e.amount-o.change:e.amount;r>0&&t.push({accountId:n,debit:r,credit:0})}});let n=o.total+o.pointsValue;await tJ(`Deposit for Work Order ${e.id}`,o.id,"WorkOrderDeposit",[...t,{accountId:r.defaultCustomerDepositsId,debit:0,credit:n}])}}else{let t=o.total,n=e.amountPaid+t,a=e.totalCost-n;o.grandTotal=e.totalCost,o.depositApplied=e.amountPaid,o.balanceDue=a;let i=a<=0,s={...e,status:i?"Completed":e.status,updatedAt:new Date().toISOString(),amountPaid:n,balanceDue:a};if(await t1(s,!0),r.defaultCustomerDepositsId&&r.defaultSalesAccountId){let n=[];o.payments.forEach(e=>{let t="";if("Cash"===e.method&&(t=r.defaultCashAccountId),"M-Pesa"===e.method&&(t=r.defaultMpesaAccountId),"Card"===e.method&&(t=r.defaultCardAccountId),"Points"===e.method&&o.pointsValue>0)n.push({accountId:r.defaultSalesAccountId,debit:o.pointsValue,credit:0});else if(t){let r="Cash"===e.method?e.amount-o.change:e.amount;r>0&&n.push({accountId:t,debit:r,credit:0})}}),i?await tJ(`Final Payment for Work Order ${e.id}`,o.id,"Sale",[...n,{accountId:r.defaultCustomerDepositsId,debit:e.amountPaid,credit:0},{accountId:r.defaultSalesAccountId,debit:0,credit:e.totalCost}]):await tJ(`Partial Payment for Work Order ${e.id}`,o.id,"Sale",[...n,{accountId:r.defaultSalesAccountId,debit:0,credit:t}])}}}}await z("sales",o),E(e=>[o,...e]);let A={...ej,salesIds:[...ej.salesIds,o.id]};if(eC(A),ee(e=>e.map(e=>e.id===A.id?A:e)),await z("shifts",A),!o.workOrderId||!o.items.some(e=>e.id.startsWith("WO_DEPOSIT_"))){let e=o.items.reduce((e,t)=>"Inventory"===t.productType?e+(t.costPrice||0)*t.quantity:e,0);if(!o.workOrderId){let t=[];o.payments.forEach(e=>{let n="";switch(e.method){case"Cash":n=r.defaultCashAccountId;break;case"M-Pesa":n=r.defaultMpesaAccountId;break;case"Card":n=r.defaultCardAccountId;break;case"Points":return}if(n){let r="Cash"===e.method?e.amount-o.change:e.amount;r>0&&t.push({accountId:n,debit:r,credit:0})}}),o.pointsValue>0&&t.push({accountId:r.defaultSalesAccountId,debit:o.pointsValue,credit:0}),t.push({accountId:r.defaultSalesAccountId,debit:0,credit:o.taxableAmount}),o.tax>0&&t.push({accountId:r.defaultVatPayableAccountId,debit:0,credit:o.tax}),e>0&&(t.push({accountId:r.defaultCogsAccountId,debit:e,credit:0}),t.push({accountId:r.defaultInventoryAccountId,debit:0,credit:e})),await tJ(`Sale: ${o.id}`,o.id,"Sale",t)}}return await tG("Sale Completed",`Sale ${o.id} for KES ${o.total.toFixed(2)} to ${N.find(e=>e.id===o.customerId)?.name}.`),o}catch(e){throw console.error("Critical error during sale completion process:",{saleData:t,error:e}),Error("Failed to save the sale. Please check for errors and try again.")}},t5=async(t,r,n,a,o,i)=>{try{let s={id:`exp_${Date.now()}`,cashierId:e.id,cashierName:e.name,date:new Date,amount:t,reason:r,payee:o,category:n,source:a,receiptImageUrl:i};if("Cash Drawer"===a){if(!ej){tH("Cannot process expense from drawer. No active shift.","error");return}s.shiftId=ej.id;let e={...ej,expenseIds:[...ej.expenseIds||[],s.id]};eC(e),ee(t=>t.map(t=>t.id===e.id?e:t)),await z("shifts",e)}await z("payouts",s),er(e=>[s,...e]);let l=V.accounting.defaultCogsAccountId,A="";switch(a){case"Cash Drawer":A=V.accounting.defaultCashAccountId;break;case"M-Pesa":A=V.accounting.defaultMpesaAccountId;break;case"Bank":A=V.accounting.defaultBankAccountId}l&&A?await tJ(`Expense: ${r}`,s.id,"Expense",[{accountId:l,debit:t,credit:0},{accountId:A,debit:0,credit:t}]):tH("Accounting accounts not fully configured. Transaction not recorded in General Ledger.","info"),await tG("Expense Recorded",`Expense of KES ${t.toFixed(2)} for ${r} from ${a}.`),tH("Expense recorded successfully.","success"),tK(sf.Expenditures)}catch(e){console.error("Failed to process expense:",{amount:t,reason:r,payee:o,error:e}),tH("Error recording expense. Please try again.","error")}},t4=async t=>{if(!e){tH("Cannot record deposit, no user logged in.","error");return}let r={id:`dep_${Date.now()}`,...t,depositedById:e.id,depositedByName:e.name,shiftId:ej?.id};try{await z("bankDeposits",r),ey(e=>[r,...e].sort((e,t)=>t.date.getTime()-e.date.getTime()));let{defaultCashAccountId:e,defaultMpesaAccountId:t,defaultBankAccountId:n}=V.accounting;if(n){let a=[{accountId:n,debit:r.amount,credit:0}];r.breakdown.cash>0&&e&&a.push({accountId:e,debit:0,credit:r.breakdown.cash}),r.breakdown.mpesa>0&&t&&a.push({accountId:t,debit:0,credit:r.breakdown.mpesa}),await tJ(`Bank Deposit - Ref: ${r.receiptNumber}`,r.id,"Bank Deposit",a)}else tH("Accounting accounts for bank not configured.","info");await tG("Bank Deposit Recorded",`Recorded deposit of KES ${r.amount} to ${r.bankName}.`),tH("Bank deposit recorded successfully.","success")}catch(e){console.error("Failed to record bank deposit:",e),tH("Error recording bank deposit.","error")}},t3=async(t,r)=>{let{amount:n,method:a,paymentDate:o}=r,i=L.findIndex(e=>e.id===t);if(-1===i){tH("Invoice not found.","error");return}try{let o=L[i],s=o.paidAmount+n,l=s>=o.totalAmount?"Paid":"Partially Paid",A={...o,paidAmount:s,status:l},c={id:`spay_${Date.now()}`,invoiceId:t,processedById:e.id,processedByName:e.name,shiftId:"Cash"===a&&ej?ej.id:void 0,...r};await z("supplierInvoices",A),await z("supplierPayments",c);let d=[...L];d[i]=A,_(d),D(e=>[...e,c]);let{accounting:u}=V,h="";switch(a){case"Cash":h=u.defaultCashAccountId;break;case"M-Pesa":h=u.defaultMpesaAccountId;break;case"Bank Transfer":h=u.defaultBankAccountId}h&&u.defaultAccountsPayableId?await tJ(`Payment for invoice ${o.invoiceNumber}`,c.id,"Supplier Payment",[{accountId:u.defaultAccountsPayableId,debit:n,credit:0},{accountId:h,debit:0,credit:n}]):tH("Accounting accounts not fully configured. Transaction not recorded in General Ledger.","info"),await tG("Supplier Payment Recorded",`Recorded payment of KES ${n} for invoice ${o.invoiceNumber} via ${a}.`),tH("Supplier payment recorded successfully.","success")}catch(e){console.error("Failed to record supplier payment:",e),tH("Error recording payment.","error")}},t6=async e=>{if(!e){tH("No file selected.","error");return}let t=new FileReader;t.onload=async e=>{try{let t=e.target?.result;if(!t){tH("Could not read file content.","error");return}let r=t.split(/\r\n|\n/).filter(e=>""!==e.trim());if(r.length<2){tH("CSV file must have a header and at least one data row.","error");return}let n=ST(r[0].trim()),a=r.slice(1,6).map(e=>ST(e.trim()));tT({content:t,headers:n,preview:a})}catch(e){console.error("Error reading CSV file:",e),tH("Failed to read CSV file.","error")}},t.readAsText(e)},t8=async(e,t)=>{try{let r=t.split(/\r\n|\n/).filter(e=>""!==e.trim()),n=r.shift(),a=ST(n.trim()),o={};for(let t in a.forEach((e,t)=>{o[e]=t}),e){let r=e[t];if(r&&"__do_not_import__"!==r&&!o.hasOwnProperty(r)){tH(`Mapped header "${r}" not found in CSV file.`,"error"),tT(null);return}}let i=[],s=[],l=0,A=await q("products");for(let t of r){if(!t.trim())continue;let r=ST(t.trim()),n=t=>{let n=e[t];if(n&&"__do_not_import__"!==n)return r[o[n]]},a=n("name"),c=n("price"),d=n("stock");if(!a||!c||!d){l++;continue}let u=parseFloat(c),h=parseInt(d,10);if(isNaN(u)||isNaN(h)){l++;continue}let f=n("inventoryCode"),p=n("upc"),m=null;f&&(m=A.find(e=>e.inventoryCode===f)),!m&&p&&(m=A.find(e=>e.upc===p));let g={name:a,price:u,stock:h,costPrice:parseFloat(n("costPrice")||"0")||0,upc:n("upc")||"",description:n("description")||"",category:n("category")||"Uncategorized",unitOfMeasure:n("unitOfMeasure")||"pc(s)",pricingType:"inclusive",productType:"Inventory",imageUrl:""};if(m)i.push({...m,...g});else{let e={...g,id:`prod_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,reservedStock:0,inventoryCode:f||`IC-${Date.now()}-${Math.random().toString(36).substr(2,5)}`};s.push(e)}}for(let e of i)await z("products",e);for(let e of s)await z("products",e);C(await q("products"));let c="";s.length>0&&(c+=`${s.length} new products added. `),i.length>0&&(c+=`${i.length} products updated. `),l>0&&(c+=`${l} rows skipped due to missing required data.`),tH(c||"Import complete, no changes made.","success"),await tG("Inventory Imported",`Imported via CSV mapping. ${c}`)}catch(e){console.error("Error processing mapped CSV:",e),tH("Failed to process imported products. Check data format.","error")}finally{tT(null)}},t7=async e=>{try{let t=(e.name.substring(0,3).toUpperCase()+String(Date.now()).slice(-4)).replace(/\s/g,""),r=t,n=1;for(;j.some(e=>e.inventoryCode===r);)r=`${t}-${n++}`;let a={...e,id:`prod_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,stock:0,reservedStock:0,inventoryCode:r};return await z("products",a),C(e=>[...e,a].sort((e,t)=>e.name.localeCompare(t.name))),await tG("Product Added",`Added new product: ${a.name}`),tH("Product added successfully!","success"),a}catch(e){throw console.error("Failed to add product:",e),tH("Failed to add product.","error"),e}},t9=async e=>{try{await z("products",e),C(t=>t.map(t=>t.id===e.id?e:t).sort((e,t)=>e.name.localeCompare(t.name))),await tG("Product Updated",`Updated product: ${e.name} (ID: ${e.id})`),tH("Product updated successfully!","success")}catch(e){console.error("Failed to update product:",e),tH("Failed to update product.","error")}},re=async()=>{if(eI)try{await W("products",eI.id),C(e=>e.filter(e=>e.id!==eI.id)),await tG("Product Deleted",`Deleted product: ${eI.name} (ID: ${eI.id})`),tH("Product deleted successfully.","success"),eU(null)}catch(e){console.error("Failed to delete product:",e),tH("Failed to delete product.","error")}},rt=async e=>{try{let t={...e,id:`cust_${Date.now()}`,dateAdded:new Date,loyaltyPoints:0};await z("customers",t),S(e=>[...e,t].sort((e,t)=>e.name.localeCompare(t.name))),await tG("Customer Added",`Added new customer: ${t.name}`),tH("Customer added successfully!","success")}catch(e){console.error("Failed to add customer:",e),tH("Failed to add customer.","error")}},rr=async e=>{try{await z("customers",e),S(t=>t.map(t=>t.id===e.id?e:t).sort((e,t)=>e.name.localeCompare(t.name))),await tG("Customer Updated",`Updated customer: ${e.name} (ID: ${e.id})`),tH("Customer updated successfully!","success")}catch(e){console.error("Failed to update customer:",e),tH("Failed to update customer.","error")}},rn=async e=>{try{if(F.some(t=>t.customerId===e)){tH("Cannot delete customer. They are linked to existing sales records.","error");return}let t=N.find(t=>t.id===e);await W("customers",e),S(t=>t.filter(t=>t.id!==e)),t&&await tG("Customer Deleted",`Deleted customer: ${t.name}`),tH("Customer deleted successfully.","success")}catch(e){console.error("Failed to delete customer:",e),tH("Failed to delete customer.","error")}},ra=async e=>{try{let t={...e,id:`supp_${Date.now()}`};return await z("suppliers",t),P(e=>[...e,t].sort((e,t)=>(e.businessName||e.name).localeCompare(t.businessName||t.name))),await tG("Supplier Added",`Added new supplier: ${t.businessName||t.name}`),tH("Supplier added successfully!","success"),t}catch(e){return console.error("Failed to add supplier:",e),tH("Failed to add supplier.","error"),null}},ro=async e=>{try{await z("suppliers",e),P(t=>t.map(t=>t.id===e.id?e:t).sort((e,t)=>(e.businessName||e.name).localeCompare(t.businessName||t.name))),await tG("Supplier Updated",`Updated supplier: ${e.businessName||e.name}`),tH("Supplier updated successfully!","success")}catch(e){console.error("Failed to update supplier:",e),tH("Failed to update supplier.","error")}},ri=async e=>{try{let t=I.some(t=>t.supplierId===e),r=L.some(t=>t.supplierId===e);if(t||r){tH("Cannot delete supplier. They are linked to existing purchase orders or invoices.","error");return}let n=O.find(t=>t.id===e);await W("suppliers",e),P(t=>t.filter(t=>t.id!==e)),await tG("Supplier Deleted",`Deleted supplier: ${n?.businessName||n?.name}`),tH("Supplier deleted successfully.","success")}catch(e){console.error("Failed to delete supplier:",e),tH("Failed to delete supplier.","error")}},rs=async e=>{try{let t=`${V.receipt.poNumberPrefix}${Date.now()}`,r=e.items.reduce((e,t)=>e+t.cost*t.quantity,0),{orderDate:n,...a}=e,o={id:`po_${Date.now()}`,poNumber:t,...a,items:e.items.map(e=>({...e,quantityReceived:0})),createdDate:n?new Date(n):new Date,totalCost:r};if(e.salesOrderId){let t=eA.find(t=>t.id===e.salesOrderId);if(t){let r=t.items.map(t=>e.items.find(e=>e.salesOrderItemId===t.id)?{...t,status:"Ordered",purchaseOrderId:o.id}:t),n=r.every(e=>"Pending"!==e.status),a={...t,items:r,status:n?"Ordered":"Pending"};await rd(a)}}return await z("purchaseOrders",o),U(e=>[o,...e].sort((e,t)=>t.createdDate.getTime()-e.createdDate.getTime())),await tG("Purchase Order Created",`Created PO #${o.poNumber} for supplier ${O.find(e=>e.id===o.supplierId)?.name}. Status: ${o.status}`),tH(`Purchase Order ${o.poNumber} created.`,"success"),o}catch(e){throw console.error("Failed to create purchase order:",e),tH("Failed to create purchase order.","error"),e}},rl=async e=>{let t=I.find(t=>t.id===e);if(!t){tH("Purchase Order not found.","error");return}if("Draft"!==t.status){tH("Only Draft purchase orders can be sent.","info");return}let r={...t,status:"Sent"};try{await z("purchaseOrders",r),U(t=>t.map(t=>t.id===e?r:t)),await tG("Purchase Order Sent",`PO #${t.poNumber} was marked as Sent.`),tH(`Purchase Order ${t.poNumber} marked as Sent.`,"success")}catch(e){console.error("Failed to send purchase order:",e),tH("Failed to update PO status.","error")}},rA=async e=>{if(eK)try{let{accounting:t}=V,r=I.find(e=>e.id===eK.id);if(!r)throw Error("Purchase Order not found");let n=[],a=e.reduce((e,t)=>e+t.cost*t.quantityReceived,0);for(let t of e)if(t.productId){let e=j.find(e=>e.id===t.productId);if(e&&"Inventory"===e.productType){let r=V.tax.vatRate/100,a=t.cost/(1+r),o={...e,stock:e.stock+t.quantityReceived,upc:t.upc,category:t.category,costPrice:a};n.push(o),await z("products",o)}}if(a>0){let e=V.tax.vatRate/100,n=a/(1+e),o=a-n,i={id:`sinv_${Date.now()}`,invoiceNumber:`INV-${r.poNumber}-${Date.now()}`,purchaseOrderId:r.id,supplierId:r.supplierId,invoiceDate:new Date,dueDate:new Date(new Date().setDate(new Date().getDate()+30)),subtotal:n,taxAmount:o,totalAmount:a,paidAmount:0,status:"Unpaid"};if(await z("supplierInvoices",i),_(e=>[i,...e]),await tG("Supplier Invoice Created",`Invoice #${i.invoiceNumber} created for PO #${r.poNumber}.`),t.defaultInventoryAccountId&&t.defaultAccountsPayableId){let e=[{accountId:t.defaultInventoryAccountId,debit:n,credit:0},{accountId:t.defaultAccountsPayableId,debit:0,credit:a}];o>0&&t.defaultVatReceivableAccountId&&e.push({accountId:t.defaultVatReceivableAccountId,debit:o,credit:0}),await tJ(`Stock Receipt for PO ${r.poNumber}`,i.id,"Stock Receipt",e)}}let o=!0,i=r.items.map(t=>{let r=e.find(e=>e.productId?e.productId===t.productId:e.productName===t.productName);if(r){let e=(t.quantityReceived||0)+r.quantityReceived;return e<t.quantity&&(o=!1),{...t,quantityReceived:e}}return(t.quantityReceived||0)<t.quantity&&(o=!1),t}),s=e.length>0?o?"Received":"Partially Received":r.status,l={...r,items:i,status:s,receivedDate:new Date},A=eA.find(e=>e.id===r.salesOrderId);if(A){let t=[...A.items];for(let r of e)r.salesOrderItemId&&(t=t.map(e=>{if(e.id===r.salesOrderItemId){let t=(e.quantityReceived||0)+r.quantityReceived,n="Partially Received";return t>=e.quantity&&(n="Received"),{...e,quantityReceived:t,status:n}}return e}));let r=t.every(e=>"Received"===e.status),n=t.some(e=>"Received"===e.status||"Partially Received"===e.status),a=A.status;r?a="Received":n&&(a="Partially Received");let o={...A,items:t,status:a};await rd(o)}C(e=>{let t=new Map(e.map(e=>[e.id,e]));return n.forEach(e=>t.set(e.id,e)),Array.from(t.values())}),U(e=>e.map(e=>e.id===l.id?l:e)),await z("purchaseOrders",l),await tG("Stock Received",`Received stock for PO #${l.poNumber}.`),tH("Stock received and supplier invoice created.","success"),eV(null)}catch(e){console.error("Failed to receive stock:",e),tH("Error receiving stock. Please try again.","error")}},rc=async t=>{if(!ej||!e)throw tH("Cannot create sales order. No active shift.","error"),Error("No active shift for sales order.");try{let r={id:`${V.receipt.salesOrderPrefix}${Date.now()}`,cashierId:e.id,cashierName:e.name,shiftId:ej.id,...t,balance:t.total-t.deposit},n=[...j],a=!1;for(let e of r.items)if(e.productId){let t=n.findIndex(t=>t.id===e.productId);if(-1!==t&&"Inventory"===n[t].productType){let r=n[t];n[t]={...r,reservedStock:(r.reservedStock||0)+e.quantity},await z("products",n[t]),a=!0}}return a&&C(n),await z("salesOrders",r),ec(e=>[r,...e].sort((e,t)=>t.createdDate.getTime()-e.createdDate.getTime())),await tG("Sales Order Created",`Created SO #${r.id} for ${r.customerName}. Status: ${r.status}`),tH(`Sales Order ${r.id} created successfully.`,"success"),tK(sf.SalesOrderList),r}catch(e){throw console.error("Failed to create sales order:",e),tH("Error creating sales order.","error"),e}},rd=async e=>{try{ec(t=>t.map(t=>t.id===e.id?e:t)),await z("salesOrders",e),te(e),tH(`Sales Order #${e.id} updated.`,"success")}catch(t){console.error("Failed to update sales order:",{salesOrderId:e.id,error:t}),tH("Error updating sales order.","error")}},ru=async(t,r)=>{if(!ej||!e)throw tH("Cannot complete sale. No active shift or user.","error"),Error("No active shift or user.");let n=t.items.map(e=>{let t=j.find(t=>t.id===e.productId);return{id:t?.id||e.id,name:e.description,inventoryCode:t?.inventoryCode||`SO-${e.id}`,upc:t?.upc,description:t?.description,category:t?.category||"Sales Order Item",price:e.unitPrice,pricingType:e.pricingType,productType:t?.productType||"Inventory",costPrice:t?.costPrice,stock:t?.stock||0,reservedStock:t?.reservedStock||0,imageUrl:t?.imageUrl||"",unitOfMeasure:t?.unitOfMeasure||"pc(s)",quantity:e.quantity}}),{subtotal:a,tax:o,totalDiscountAmount:i,taxableAmount:s,lineItemsDiscountAmount:l,cartDiscountAmount:A}=oH(n,{type:"fixed",value:0},V.tax.vatRate/100),c=r.reduce((e,t)=>e+t.amount,0);return t2({items:n,subtotal:a,lineItemsDiscountAmount:l,cartDiscountAmount:A,discountAmount:i,taxableAmount:s,tax:o,total:c,payments:r,change:Math.max(0,c-t.balance),customerId:t.customerId,date:new Date,pointsUsed:0,pointsValue:0,salesOrderId:t.id,grandTotal:t.total,depositApplied:t.deposit,balanceDue:0})},rh=e=>{rd({...e,status:"Cancelled"})},rf=e=>{ty(e),te(null),tK(sf.Purchases)},rp=e=>{if(e.balance<=0){tH("Sales order is fully paid.","info");return}ew([{id:`SO_PAYMENT_${e.id}`,inventoryCode:`SO-${e.id}`,name:`Payment for Sales Order #${e.id}`,price:e.balance,pricingType:"inclusive",stock:9999,quantity:1,productType:"Service",category:"Sales Order",reservedStock:0,imageUrl:"",unitOfMeasure:"payment"}]),eB(e.customerId),tw(e.id),te(null),tK(sf.POS)},rm=async t=>{if(!ej||!e)throw tH("Cannot create layaway. No active shift.","error"),Error("No active shift for layaway.");try{let r=`${V.receipt.layawayPrefix}${Date.now()}`,n={id:`LAYAWAY_DEPOSIT_${r}`,name:`Layaway Deposit for #${r}`,inventoryCode:"DEPOSIT",price:t.deposit,pricingType:"inclusive",productType:"Service",stock:9999,imageUrl:"",unitOfMeasure:"unit",category:"Layaway",quantity:1,reservedStock:0},{subtotal:a,tax:o,total:i,taxableAmount:s,lineItemsDiscountAmount:l,cartDiscountAmount:A,totalDiscountAmount:c}=oH([n],{type:"fixed",value:0},V.tax.vatRate/100),d={items:[n],subtotal:a,lineItemsDiscountAmount:l,cartDiscountAmount:A,discountAmount:c,taxableAmount:s,tax:o,total:i,payments:[{...t.initialPayment}],change:0,customerId:t.customerId,date:new Date,pointsUsed:0,pointsValue:0,layawayId:r},u=await t2(d),h={id:r,cashierId:e.id,cashierName:e.name,shiftId:ej.id,...t,balance:t.total-t.deposit,payments:[{saleId:u.id,date:u.date,amount:t.deposit,method:t.initialPayment.method,cashierId:e.id}]};return await z("layaways",h),ei(e=>[...e,h]),tC({sale:u,layaway:h}),tD&&(tV(),tM(void 0)),h}catch(e){throw console.error("Failed to create layaway:",e),tH("Error creating layaway. The deposit sale may have failed.","error"),e}},rg=async(t,r,n)=>{let a=eo.find(e=>e.id===t);if(!a||!ej||!e){tH("Cannot process payment. No layaway or active shift found.","error");return}try{let o={id:`LAYAWAY_PAYMENT_${t}_${Date.now()}`,name:`Layaway Payment for #${t}`,inventoryCode:"PAYMENT",price:r,pricingType:"inclusive",productType:"Service",stock:9999,imageUrl:"",unitOfMeasure:"unit",category:"Layaway",quantity:1,reservedStock:0},{subtotal:i,tax:s,total:l,taxableAmount:A,lineItemsDiscountAmount:c,cartDiscountAmount:d,totalDiscountAmount:u}=oH([o],{type:"fixed",value:0},V.tax.vatRate/100),h={items:[o],subtotal:i,lineItemsDiscountAmount:c,cartDiscountAmount:d,discountAmount:u,taxableAmount:A,tax:s,total:l,payments:[{method:n,amount:r,details:{}}],change:0,customerId:a.customerId,date:new Date,pointsUsed:0,pointsValue:0,layawayId:a.id},f=await t2(h),p={saleId:f.id,date:f.date,amount:r,method:n,cashierId:e.id},m=a.balance-r,g=m<=0?"Completed":a.status,x={...a,payments:[...a.payments,p],balance:m,status:g};await z("layaways",x),ei(e=>e.map(e=>e.id===t?x:e)),tC({sale:f,layaway:x}),tH("Layaway payment recorded successfully.","success")}catch(e){console.error("Failed to add layaway payment:",e),tH("Error recording layaway payment.","error")}},rx=async e=>{try{await z("layaways",e),ei(t=>t.map(t=>t.id===e.id?e:t)),e2(e),tH("Layaway plan updated.","success")}catch(e){console.error("Failed to update layaway plan:",e),tH("Failed to update layaway plan.","error")}},rb=async()=>{if(e5)try{await W("layaways",e5.id),ei(e=>e.filter(e=>e.id!==e5.id)),await tG("Layaway Deleted",`Deleted layaway plan: ${e5.id} for ${e5.customerName}`),tH("Layaway plan deleted successfully.","success")}catch(e){console.error("Failed to delete layaway:",e),tH("Failed to delete layaway plan.","error")}finally{e4(null)}},ry=async(e,t)=>{try{let r=N.find(t=>t.id===e.customerId);if(!r){tH("Customer not found.","error");return}let{subtotal:n,tax:a,total:o,totalDiscountAmount:i}=oH(e.items,{type:"percentage",value:0},V.tax.vatRate/100),s={id:`quo_${Date.now()}`,quoteNumber:`${V.receipt.quotePrefix}${Date.now()}`,customerId:e.customerId,customerName:r.name,items:e.items,status:t,createdDate:new Date,expiryDate:new Date(new Date().setDate(new Date().getDate()+30)),subtotal:n,discountAmount:i,tax:a,total:o};await z("quotations",s),H(e=>[s,...e].sort((e,t)=>t.createdDate.getTime()-e.createdDate.getTime())),await tG("Quotation Created",`Created quotation ${s.quoteNumber} for ${r.name}.`),tH(`Quotation ${s.quoteNumber} saved as ${t}.`,"success"),tK(sf.Quotations),eT(s)}catch(e){console.error("Failed to create quotation:",e),tH("Failed to create quotation.","error")}},rv=async e=>{try{await z("quotations",e),H(t=>t.map(t=>t.id===e.id?e:t)),await tG("Quotation Updated",`Updated quotation ${e.quoteNumber}.`),tH(`Quotation ${e.quoteNumber} updated.`,"success"),eQ?.id===e.id&&eT(e)}catch(e){console.error("Failed to update quotation:",e),tH("Failed to update quotation.","error")}},rw=e=>{let t=e.items.map(e=>{let t=j.find(t=>t.id===e.productId);return t?{...t,quantity:e.quantity,discount:e.discount}:(tH(`Product "${e.productName}" not found in inventory.`,"error"),null)}).filter(e=>null!==e);t.length!==e.items.length&&tH("Some items from the quotation could not be added to the cart.","info"),ew(t),eB(e.customerId),tB(e.id),tK(sf.POS)},rk=async t=>{if(!ej){tH("Cannot hold a sale without an active shift.","error");return}if(0===ev.length){tH("Cart is empty.","info");return}try{let r={id:`held_${Date.now()}`,name:t||`Held at ${new Date().toLocaleTimeString("en-GB",{timeZone:"Africa/Nairobi"})}`,items:ev,customerId:ek,heldAt:new Date,cashierId:e.id,cashierName:e.name};await z("heldReceipts",r),eu(e=>[r,...e].sort((e,t)=>t.heldAt.getTime()-e.heldAt.getTime())),tV(),ta(!1),tH("Sale held successfully.","success"),await tG("Sale Held",`Held sale "${r.name}"`)}catch(e){console.error("Failed to hold receipt:",e),tH("Error holding sale.","error")}},rB=async e=>{try{if(ev.length>0&&!await new Promise(e=>{e(!!window.confirm("Recalling this sale will overwrite your current cart. Proceed?"))}))return;ew(e.items),eB(e.customerId),await W("heldReceipts",e.id),eu(t=>t.filter(t=>t.id!==e.id)),tK(sf.POS),tH(`Recalled sale "${e.name}".`,"success"),await tG("Sale Recalled",`Recalled held sale "${e.name}"`)}catch(e){console.error("Failed to recall receipt:",e),tH("Error recalling sale.","error")}},rj=async()=>{if(to)try{await W("heldReceipts",to.id),eu(e=>e.filter(e=>e.id!==to.id)),await tG("Held Sale Deleted",`Deleted held sale "${to.name}"`),tH("Held receipt deleted.","success")}catch(e){console.error("Failed to delete held receipt:",e),tH("Error deleting held receipt.","error")}finally{ti(null)}},rC=async(t,r,n)=>{if(!ej||!e){tH("Cannot create work order. No active shift.","error");return}try{let a=[...j];for(let e of r){let t=a.findIndex(t=>t.id===e.materialId);if(-1!==t&&"Inventory"===a[t].productType){let r=a[t];if(r.stock-(r.reservedStock||0)<e.qty){tH(`Insufficient available stock for ${r.name}.`,"error");return}a[t]={...r,reservedStock:(r.reservedStock||0)+e.qty}}}let o={id:`${V.receipt.workOrderPrefix}${Date.now()}`,cashierId:e.id,cashierName:e.name,shiftId:ej.id,...t,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};await z("workOrders",o);let i=r.map(e=>({...e,id:`wom_${o.id}_${e.materialId}`,workOrderId:o.id}));for(let e of i)await z("workOrderMaterials",e);for(let e of(ef(e=>[...e,...i]),el(e=>[o,...e].sort((e,t)=>new Date(t.createdAt).getTime()-new Date(e.createdAt).getTime())),a)){let t=j.find(t=>t.id===e.id);t&&t.reservedStock!==e.reservedStock&&await z("products",e)}if(C(a),await tG("Work Order Created",`Created WO #${o.id} for ${o.customerName}.`),tH(`Work Order ${o.id} created successfully.`,"success"),n>0){let e={id:`WO_DEPOSIT_${o.id}`,inventoryCode:`WO-${o.id}`,name:`Deposit for Work Order #${o.id}`,price:n,pricingType:"inclusive",stock:9999,quantity:1,productType:"Service",category:"Work Order",reservedStock:0,imageUrl:"",unitOfMeasure:"deposit"};ew([e]),eB(o.customerId),tl(o.id),tK(sf.POS)}else tK(sf.WorkOrderList)}catch(e){console.error("Failed to create work order:",e),tH("Error creating work order.","error")}},rN=e=>{if(e.balanceDue<=0){tH("Work Order is fully paid.","info"),t1({...e,status:"Completed",updatedAt:new Date().toISOString()});return}ew([{id:`WO_BALANCE_${e.id}`,inventoryCode:`WO-${e.id}`,name:`Balance for Work Order #${e.id}`,price:e.balanceDue,pricingType:"inclusive",stock:9999,quantity:1,productType:"Service",category:"Work Order",reservedStock:0,imageUrl:"",unitOfMeasure:"payment"}]),eB(e.customerId),tl(e.id),e7(null),tK(sf.POS)},rS=async()=>{tm(!1),tx(!0);try{await new Promise(e=>setTimeout(e,500)),await $(),localStorage.clear(),await new Promise(e=>setTimeout(e,2500)),window.location.reload()}catch(e){console.error("Factory reset failed:",e),tH("Factory reset failed. Please clear browser data manually.","error"),tx(!1)}};if(!V.isSetupComplete)return m.jsx(CV,{settings:V,onUpdateSettings:tq,showToast:tH,onSetupComplete:()=>{tq({isSetupComplete:!0})}});if(s)return m.jsx("div",{className:"h-screen w-screen flex items-center justify-center",children:"Loading Application..."});if(v)return m.jsx(N0,{currentUser:e,onUnlock:()=>w(!1),onForceLogout:t});let rF=(e,t,r)=>eX({type:e,id:t,customerId:r}),rE={products:j,cart:ev,customers:N,selectedCustomerId:ek,onCustomerChange:eB,addToCart:tW,updateCartItemQuantity:t$,updateCartItemDiscount:tX,removeFromCart:tY,clearCart:tV,completeSale:t2,isOnline:!0,currentUser:e,settings:V,sales:F,expenses:et,activeShift:ej,onStartShift:tZ,onEndShiftRequest:()=>eE(!0),isEndingShift:eF,onConfirmEndShift:t0,onCancelEndShift:()=>eE(!1),shiftReportToShow:eO,onCloseShiftReport:()=>eP(null),onEmailReceiptRequest:(e,t)=>{},onWhatsAppReceiptRequest:(e,t)=>rF("Receipt",e,t),onHoldRequest:()=>ta(!0),onLayawayRequest:()=>{if(0===ev.length){tH("Add items to the cart to create a layaway.","info");return}tM(ev),tK(sf.Layaway)},workOrders:es,originatingWorkOrderId:ts,salesOrders:eA,originatingSalesOrderId:tv,showToast:tH,payouts:et,supplierPayments:T,bankDeposits:eb};return(0,m.jsxs)("div",{className:`theme-${i} h-screen w-screen bg-background dark:bg-dark-background text-foreground dark:text-dark-foreground flex overflow-hidden`,children:[m.jsx(oz,{currentView:A,setCurrentView:tK,isOpen:d,setIsOpen:u,currentUser:e,onLogout:t,permissions:tR,settings:V}),(0,m.jsxs)("div",{className:"flex-1 flex flex-col min-w-0",children:[m.jsx(o0,{isOnline:!0,isSyncing:!1,queuedSalesCount:0,onMenuClick:()=>u(e=>!e),currentUser:e,products:j,settings:V,onInstallClick:()=>{b&&(b.prompt(),b.userChoice.then(e=>{"accepted"===e.outcome?tH("Banduka POS installed successfully!","success"):tH("Installation cancelled.","info"),y(null)}))},installPromptEvent:b,activeTimeClockEvent:eN,onLogout:t}),m.jsx("main",{className:"flex-1 overflow-y-auto",children:m.jsx(Q,{mode:"wait",children:m.jsx("div",{initial:{opacity:0,y:15},animate:{opacity:1,y:0},exit:{opacity:0,y:-15},transition:{duration:.2},style:{height:"100%"},children:(()=>{switch(A){case sf.POS:return tj?m.jsx(is,{sale:tj.sale,layaway:tj.layaway,onNewSale:()=>{tC(null),tV()},currentUser:e,settings:V,onWhatsAppReceiptRequest:(e,t)=>rF("Receipt",e,t),showToast:tH}):m.jsx(Ah,{...rE});case sf.Dashboard:return m.jsx(jv,{sales:F,products:j,suppliers:O,supplierInvoices:L,expenses:et,settings:V,workOrders:es});case sf.Inventory:return m.jsx(jC,{products:j,purchaseOrders:I,suppliers:O,onAddProduct:t7,onUpdateProduct:t9,onDeleteProductRequest:eU,permissions:tR,onImportProducts:t6,onPrintBarcodeRequest:eW,onAddToPORequest:eG,settings:V});case sf.Purchases:return m.jsx(jP,{purchaseOrders:I,suppliers:O,products:j,permissions:tR,onReceivePORequest:eV,onAddPurchaseOrder:rs,onAddSupplier:ra,onSendPO:rl,onWhatsAppPORequest:(e,t)=>eX({type:"PurchaseOrder",id:e,customerId:t}),settings:V,salesOrderForPO:tb,onClearSalesOrderForPO:()=>ty(null)});case sf.Suppliers:return m.jsx(Cw,{suppliers:O,purchaseOrders:I,supplierInvoices:L,supplierPayments:T,onAddSupplier:ra,onUpdateSupplier:ro,onDeleteSupplier:ri,permissions:tR,settings:V});case sf.AccountsPayable:if(tN)return m.jsx(SU,{info:tN,user:e,settings:V,onDone:()=>{tS(null),eM(null)}});return eD?m.jsx(CH,{invoice:eD,supplier:O.find(e=>e.id===eD.supplierId),purchaseOrder:I.find(e=>e.id===eD.purchaseOrderId),settings:V,onBack:()=>eM(null)}):m.jsx(jH,{invoices:L,suppliers:O,onRecordPayment:t3,onViewInvoice:eM,activeShift:ej,sales:F,payouts:et,accountingTransactions:eg,chartOfAccounts:ep,settings:V});case sf.TaxReport:return m.jsx(St,{sales:F,supplierInvoices:L,settings:V});case sf.ProfitReport:return m.jsx(So,{sales:F,products:j,expenses:et,settings:V,showToast:tH});case sf.FiscalPeriodReport:return m.jsx(Sc,{sales:F,products:j,expenses:et,supplierPayments:T,bankDeposits:eb,shifts:Z,settings:V,supplierInvoices:L,accountingTransactions:eg,chartOfAccounts:ep});case sf.PaymentSummary:return m.jsx(NZ,{sales:F,users:R});case sf.ShiftReport:return m.jsx(jV,{shifts:Z,sales:F,expenses:et,supplierPayments:T,bankDeposits:eb,settings:V});case sf.SalesHistory:return eL?m.jsx(jz,{sale:eL,layaway:e3||void 0,onBack:()=>{e_(null),e6(null)},currentUser:e,settings:V,onWhatsAppReceiptRequest:(e,t,r)=>rF(e,t,r),showToast:tH}):m.jsx(jq,{sales:F,customers:N,users:R,onViewSaleRequest:e=>{if(eo.some(t=>t.payments.some(t=>t.saleId===e.id))){let t=eo.find(t=>t.payments.some(t=>t.saleId===e.id));t&&e6(t)}e_(e)}});case sf.Customers:return m.jsx(Cm,{customers:N,sales:F,onAddCustomer:rt,onUpdateCustomer:rr,onDeleteCustomer:rn,permissions:tR,settings:V});case sf.Quotations:return eQ?m.jsx(CT,{quotation:eQ,settings:V,sales:F,onBack:()=>eT(null),onConvertQuoteToSale:rw,permissions:tR}):m.jsx(CB,{quotations:M,sales:F,onSelectQuotation:eT,onCreateQuoteRequest:()=>c(sf.CreateQuotation),permissions:tR});case sf.CreateQuotation:return m.jsx(CL,{customers:N,products:j,settings:V,onSave:ry,onCancel:()=>c(sf.Quotations)});case sf.Staff:return m.jsx(CO,{users:R,permissions:tR,onAddUser:n,onUpdateUser:a,onDeleteUser:o,onManagePermissionsRequest:()=>{tc("users-perms"),tK(sf.Settings)}});case sf.TimeSheets:return m.jsx(CW,{timeClockEvents:en,users:R,permissions:tR,onAddRequest:()=>{e0(null),eJ(!0)},onEditRequest:e=>{e0(e),eJ(!0)},onDeleteRequest:()=>{}});case sf.Settings:return m.jsx(Cl,{settings:V,onUpdateSettings:tq,users:R,auditLogs:Y,showToast:tH,onBackup:()=>{},onRestoreRequest:e=>{tf(e),tu(!0)},onFactoryResetRequest:()=>tm(!0),openModalId:tA,onModalOpened:()=>tc(null),onTestBarcodePrint:()=>{},onInitDrive:()=>{},isDriveReady:tF,isDriveInitializing:tO,isDriveAuthenticated:tI,driveUser:tL,onDriveSignIn:()=>{},onDriveSignOut:()=>{},onDriveBackup:()=>{},onDriveRestore:()=>{},onDriveBackupAuditLogs:()=>{},isDriveConfigured:!1});case sf.ReturnReceipt:return m.jsx(CY,{sales:F,activeShift:ej,onProcessReturn:()=>{},onBack:()=>tK(sf.POS)});case sf.NewExpense:return m.jsx(Nk,{activeShift:ej,onProcessExpense:t5,onBack:()=>tK(sf.POS),sales:F,expenses:et,accountingTransactions:eg,chartOfAccounts:ep,settings:V,currentUser:e});case sf.Expenditures:return eH?m.jsx(NC,{expense:eH,settings:V,onBack:()=>eR(null)}):m.jsx(NB,{expenses:et,onViewExpenseRequest:eR,setCurrentView:c});case sf.Layaway:return tj?m.jsx(is,{sale:tj.sale,layaway:tj.layaway,onNewSale:()=>{tC(null),tK(sf.LayawayList)},currentUser:e,settings:V,onWhatsAppReceiptRequest:(e,t)=>rF("Receipt",e,t),showToast:tH}):m.jsx(NN,{products:j,customers:N,settings:V,onAddLayaway:rm,onBack:()=>{tK(sf.POS),tM(void 0)},activeShift:ej,initialCartItems:tD});case sf.WorkOrder:return m.jsx(SB,{products:j,customers:N,users:R,settings:V,onAddWorkOrder:rC,onBack:()=>tK(sf.WorkOrderList),activeShift:ej});case sf.SalesOrder:return m.jsx(NQ,{products:j,customers:N,settings:V,onAddSalesOrder:rc,onBack:()=>tK(sf.POS),activeShift:ej});case sf.LayawayList:return tj?m.jsx(is,{sale:tj.sale,layaway:tj.layaway,onNewSale:()=>{tC(null),tj.layaway&&e2(tj.layaway)},currentUser:e,settings:V,onWhatsAppReceiptRequest:(e,t)=>rF("Receipt",e,t),showToast:tH}):e1?m.jsx(N_,{layaway:e1,sales:F,onBack:()=>e2(null),onAddPayment:rg,onViewReceiptRequest:(e,t)=>{e_(e),e6(t),tK(sf.SalesHistory)},onUpdate:rx}):m.jsx(NI,{layaways:eo,onSelectLayaway:e2,onCreateRequest:()=>tK(sf.Layaway),onDeleteRequest:e4});case sf.WorkOrderList:return e8?m.jsx(SO,{workOrder:e8,materials:eh.filter(e=>e.workOrderId===e8.id),users:R,sales:F,settings:V,onBack:()=>e7(null),onUpdate:t1,onPushToPOS:rN}):m.jsx(SN,{workOrders:es,users:R,customers:N,onViewWorkOrder:e7,onCreateRequest:()=>tK(sf.WorkOrder)});case sf.SalesOrderList:return e9?m.jsx(NW,{salesOrder:e9,onBack:()=>te(null),onCreatePO:rf,onCancelRequest:tr,onUpdate:rd,settings:V,onDirectComplete:ru,sales:F,currentUser:e,onWhatsAppReceiptRequest:(e,t,r)=>rF(e,t,r),showToast:tH}):m.jsx(NM,{salesOrders:eA,onViewSalesOrder:te,onCancelRequest:tr,onCreatePORequest:rf,onPushToPOSRequest:rp,onCreateRequest:()=>tK(sf.SalesOrder)});case sf.HeldReceipts:return m.jsx(NX,{heldReceipts:ed,onRecallReceipt:rB,onDeleteReceiptRequest:ti});case sf.OpenCashDrawer:return m.jsx(N5,{onBack:()=>tK(sf.POS),onOpenDrawer:tz});case sf.WhatsAppOrders:return m.jsx(N2,{products:j,customers:N,settings:V,activeShift:ej,onAddSalesOrder:async()=>({}),onBack:()=>tK(sf.POS)});case sf.Accounts:return m.jsx(Sk,{accountingTransactions:eg,chartOfAccounts:ep,settings:V,sales:F,expenses:et,activeShift:ej,bankDeposits:eb,onAddBankDeposit:t4,currentUser:e,customers:N,supplierPayments:T,suppliers:O,supplierInvoices:L,onProcessExpense:t5});case sf.GeneralLedger:return m.jsx(Su,{transactions:eg,accounts:ep});default:return m.jsx("div",{children:"View not implemented yet."})}})()},A)})})]}),(0,m.jsxs)(Q,{children:[h.map(e=>m.jsx(Cc,{...e},e.id)),p&&m.jsx(Cq,{onUpdate:()=>{p&&p.waiting&&p.waiting.postMessage({type:"SKIP_WAITING"}),x(null)}}),eI&&m.jsx(Cn,{title:`Delete ${eI.name}?`,message:"Are you sure? This action cannot be undone and may affect historical sales reports.",onConfirm:re,onClose:()=>eU(null),confirmText:"Delete",isDestructive:!0}),eK&&m.jsx(CP,{purchaseOrder:eK,supplier:O.find(e=>e.id===eK.supplierId),products:j,onConfirm:rA,onClose:()=>eV(null)}),eq&&m.jsx(CI,{product:eq,purchaseOrders:I,suppliers:O,onConfirm:()=>{},onClose:()=>eG(null)}),ez&&m.jsx(CU,{product:ez,onClose:()=>eW(null)}),e$&&m.jsx(CR,{mode:"PurchaseOrder"===e$.type?"po":"receipt",recipient:N.find(e=>e.id===e$.customerId)||O.find(e=>e.id===e$.customerId),documentId:e$.id,onSend:()=>{},onClose:()=>eX(null)}),eY&&m.jsx(CX,{event:eZ,users:R,onClose:()=>eJ(!1),onSave:()=>{}}),tt&&m.jsx(Cn,{title:`Cancel Sales Order ${tt.id}?`,message:"Are you sure? This will mark the order as cancelled. This action cannot be undone.",onConfirm:()=>{rh(tt),tr(null)},onClose:()=>tr(null),confirmText:"Cancel Order",isDestructive:!0}),tn&&m.jsx(N$,{onConfirm:rk,onClose:()=>ta(!1)}),to&&m.jsx(Cn,{title:"Delete Held Receipt?",message:`Are you sure you want to delete the held receipt "${to.name}"? This action cannot be undone.`,onConfirm:rj,onClose:()=>ti(null),confirmText:"Delete",isDestructive:!0}),td&&th&&m.jsx(Cn,{title:"Restore from Backup?",message:`This will replace all current data with the data from the file '${th.name}'. This action cannot be undone.`,onConfirm:()=>{tu(!1),tf(null)},onClose:()=>{tu(!1),tf(null)},confirmText:"Restore Data",isDestructive:!0}),tp&&m.jsx(Cn,{title:"Factory Reset Confirmation",message:"This will permanently delete ALL data in the application and cannot be undone. You will be logged out and taken to the setup screen.",onConfirm:rS,onClose:()=>tm(!1),confirmText:"RESET",isDestructive:!0,requiresConfirmationText:!0}),tg&&m.jsx(SQ,{message:"Clearing all application data... The app will reload shortly."}),e5&&m.jsx(Cn,{title:`Delete Layaway ${e5.id}?`,message:"Are you sure you want to permanently delete this layaway plan? This action cannot be undone.",onConfirm:rb,onClose:()=>e4(null),confirmText:"Delete",isDestructive:!0}),tQ&&m.jsx(S_,{onClose:()=>tT(null),csvHeaders:tQ.headers,csvPreview:tQ.preview,onImportConfirm:e=>t8(e,tQ.content)})]})]})},SM={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},SH={hidden:{y:20,opacity:0},visible:{y:0,opacity:1}},SR=({onLogin:e,onForgotPassword:t,onNavigateToSignUp:r,onBack:n})=>{let[a,o]=(0,g.useState)(""),[i,s]=(0,g.useState)(""),[l,A]=(0,g.useState)(!0),[c,d]=(0,g.useState)(!1),u=async t=>{t.preventDefault(),d(!0),await e(a,i,l),d(!1)};return m.jsx("div",{className:"min-h-screen flex flex-col justify-center py-12 sm:px-6 lg:px-8 auth-background",children:m.jsx("div",{initial:{opacity:0,y:-20,scale:.95},animate:{opacity:1,y:0,scale:1},transition:{duration:.5,ease:"easeOut"},className:"sm:mx-auto sm:w-full sm:max-w-md",children:m.jsx("div",{className:"bg-card/60 dark:bg-dark-card/60 backdrop-blur-2xl border border-white/20 dark:border-dark-border/50 py-12 px-4 shadow-2xl rounded-2xl sm:px-10",children:(0,m.jsxs)("div",{variants:SM,initial:"hidden",animate:"visible",children:[(0,m.jsxs)("div",{variants:SH,className:"mb-6 text-center",children:[m.jsx("h2",{className:"text-center text-3xl font-extrabold text-foreground dark:text-dark-foreground",children:"Admin Sign In"}),m.jsx("p",{className:"mt-2 text-center text-sm text-foreground-muted dark:text-dark-foreground-muted",children:"Access the system with administrator privileges."})]}),(0,m.jsxs)("form",{className:"mt-6 space-y-6",onSubmit:u,children:[(0,m.jsxs)("div",{variants:SH,children:[m.jsx("label",{htmlFor:"username",className:"block text-sm font-medium text-foreground dark:text-dark-foreground",children:"Admin Email"}),m.jsx("div",{className:"mt-1",children:m.jsx("input",{id:"username",name:"username",type:"text",autoComplete:"username",required:!0,placeholder:"Enter your admin email",value:a,onChange:e=>o(e.target.value),className:"appearance-none block w-full px-4 py-3 rounded-lg bg-background/50 dark:bg-dark-background/50 border border-border dark:border-dark-border"})})]}),(0,m.jsxs)("div",{variants:SH,children:[m.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-foreground dark:text-dark-foreground",children:"Password"}),m.jsx("div",{className:"mt-1",children:m.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,placeholder:"Enter your password",value:i,onChange:e=>s(e.target.value),className:"appearance-none block w-full px-4 py-3 rounded-lg bg-background/50 dark:bg-dark-background/50 border border-border dark:border-dark-border"})})]}),(0,m.jsxs)("div",{variants:SH,className:"flex items-center justify-between",children:[(0,m.jsxs)("div",{className:"flex items-center",children:[m.jsx("input",{id:"remember-me",name:"remember-me",type:"checkbox",checked:l,onChange:e=>A(e.target.checked),className:"h-4 w-4 text-primary focus:ring-primary border-border rounded"}),m.jsx("label",{htmlFor:"remember-me",className:"ml-2 block text-sm text-foreground dark:text-dark-foreground",children:"Remember me"})]}),m.jsx("div",{className:"text-sm",children:m.jsx("button",{type:"button",onClick:t,className:"font-medium text-primary hover:text-primary-focus",children:"Forgot your password?"})})]}),m.jsx("div",{variants:SH,children:m.jsx("button",{type:"submit",disabled:c,whileTap:{scale:.98},className:"w-full flex justify-center py-3 px-4 rounded-lg text-base font-bold text-primary-content bg-primary hover:bg-primary-focus transition-all shadow-md disabled:bg-slate-400 dark:disabled:bg-slate-600",children:c?"Signing In...":"Sign In"})})]}),n&&m.jsx("div",{variants:SH,className:"mt-6 text-center",children:m.jsx("button",{type:"button",onClick:n,className:"text-sm font-medium text-primary hover:text-primary-focus",children:" Back to Staff Login"})})]})})})})},SK=({children:e})=>m.jsx("div",{initial:{opacity:0,x:50},animate:{opacity:1,x:0},exit:{opacity:0,x:-50},transition:{duration:.3,ease:"easeInOut"},children:e}),SV=({onFindUser:e,onResetPassword:t,onBackToLogin:r})=>{let[n,a]=(0,g.useState)("email"),[o,i]=(0,g.useState)(""),[s,l]=(0,g.useState)(null),[A,c]=(0,g.useState)(""),[d,u]=(0,g.useState)(""),[h,f]=(0,g.useState)(""),[p,x]=(0,g.useState)(""),[b,y]=(0,g.useState)(""),[v,w]=(0,g.useState)(!1),k=async t=>{t.preventDefault(),y(""),w(!0);let r=await e(o);if(w(!1),r){l(r);let e=Math.floor(1e5+9e5*Math.random()).toString();u(e),alert(`DEMO: Your recovery code is ${e}`),a("otp")}else y("No user found with that email address.")},B=e=>{e.preventDefault(),y(""),A===d?a("reset"):y("Invalid OTP. Please try again.")},j=e=>{if(e.preventDefault(),y(""),h.length<6){y("Passcode must be at least 6 characters.");return}if(h!==p){y("Passcodes do not match.");return}s&&t(h,s)},C="mt-1 block w-full px-4 py-3 rounded-lg bg-background/50 dark:bg-dark-background/50 border border-border dark:border-dark-border",N="w-full flex justify-center py-3 px-4 rounded-lg text-base font-bold text-primary-content bg-primary hover:bg-primary-focus disabled:bg-slate-400 dark:disabled:bg-slate-600";return m.jsx("div",{className:"h-screen w-screen auth-background flex items-center justify-center p-4",children:(0,m.jsxs)("div",{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5},className:"w-full max-w-sm bg-card/60 dark:bg-dark-card/60 backdrop-blur-2xl rounded-2xl shadow-2xl p-8 border border-white/20 dark:border-dark-border/50",children:[(0,m.jsxs)("div",{className:"text-center",children:[m.jsx(Q,{mode:"wait",children:(()=>{switch(n){case"email":return(0,m.jsxs)(SK,{children:[m.jsx("h1",{className:"text-2xl font-bold text-foreground dark:text-dark-foreground",children:"Reset Passcode"}),m.jsx("p",{className:"text-foreground-muted dark:text-dark-foreground-muted mt-2",children:"Enter your email to receive a recovery code."}),(0,m.jsxs)("form",{onSubmit:k,className:"mt-8 space-y-6",children:[(0,m.jsxs)("div",{children:[m.jsx("label",{htmlFor:"email-forgot",className:"block text-sm font-medium text-foreground dark:text-dark-foreground",children:"Email Address"}),m.jsx("input",{id:"email-forgot",type:"email",required:!0,value:o,onChange:e=>i(e.target.value),className:C})]}),m.jsx("button",{type:"submit",disabled:v,whileTap:{scale:.98},className:N,children:v?"Searching...":"Send Code"})]})]},"email");case"otp":return(0,m.jsxs)(SK,{children:[m.jsx("h1",{className:"text-2xl font-bold text-foreground dark:text-dark-foreground",children:"Enter Code"}),(0,m.jsxs)("p",{className:"text-foreground-muted dark:text-dark-foreground-muted mt-2",children:["A 6-digit recovery code has been sent to ",m.jsx("span",{className:"font-semibold text-foreground dark:text-dark-foreground",children:o}),"."]}),(0,m.jsxs)("form",{onSubmit:B,className:"mt-8 space-y-6",children:[(0,m.jsxs)("div",{children:[m.jsx("label",{htmlFor:"otp",className:"block text-sm font-medium text-foreground dark:text-dark-foreground",children:"One-Time Password"}),m.jsx("input",{id:"otp",type:"text",required:!0,value:A,onChange:e=>c(e.target.value),className:`${C} tracking-widest text-center text-lg`})]}),m.jsx("button",{type:"submit",whileTap:{scale:.98},className:N,children:"Verify Code"})]})]},"otp");case"reset":return(0,m.jsxs)(SK,{children:[m.jsx("h1",{className:"text-2xl font-bold text-foreground dark:text-dark-foreground",children:"Create New Passcode"}),m.jsx("p",{className:"text-foreground-muted dark:text-dark-foreground-muted mt-2",children:"Please enter a new passcode for your account."}),(0,m.jsxs)("form",{onSubmit:j,className:"mt-8 space-y-4",children:[(0,m.jsxs)("div",{children:[m.jsx("label",{htmlFor:"password-reset",className:"block text-sm font-medium text-foreground dark:text-dark-foreground",children:"New Passcode"}),m.jsx("input",{id:"password-reset",type:"password",required:!0,value:h,onChange:e=>f(e.target.value),className:C})]}),(0,m.jsxs)("div",{children:[m.jsx("label",{htmlFor:"confirmPassword-reset",className:"block text-sm font-medium text-foreground dark:text-dark-foreground",children:"Confirm New Passcode"}),m.jsx("input",{id:"confirmPassword-reset",type:"password",required:!0,value:p,onChange:e=>x(e.target.value),className:C})]}),m.jsx("button",{type:"submit",whileTap:{scale:.98},className:N,children:"Set New Passcode"})]})]},"reset");default:return null}})()}),b&&m.jsx("p",{className:"text-center text-sm text-danger mt-4",children:b})]}),m.jsx("div",{className:"mt-6 text-center",children:m.jsx("button",{onClick:r,className:"text-sm font-medium text-primary hover:text-primary-focus",children:" Back to Login"})})]})})},Sq=({user:e,onClick:t})=>{let r="Admin"===e.role||!!e.email,n=e.name.split(" ").map(e=>e[0]).slice(0,2).join("").toUpperCase()||e.name[0];return(0,m.jsxs)("div",{onClick:t,variants:{hidden:{opacity:0,y:20},visible:{opacity:1,y:0}},whileHover:{y:-5,scale:1.03},whileTap:{scale:.98},className:"bg-card/60 dark:bg-dark-card/60 backdrop-blur-lg p-6 rounded-2xl shadow-lg border border-white/20 dark:border-dark-border/50 cursor-pointer flex flex-col items-center text-center relative hover:border-primary/50 dark:hover:border-dark-primary/50 transition-colors",children:[r&&m.jsx("div",{className:"absolute top-3 right-3 text-warning",title:"Admin Account",children:m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:m.jsx("path",{fillRule:"evenodd",d:"M18 8a6 6 0 01-7.743 5.743L10 14l-1 1-1 1H6v2H2v-4l4.257-4.257A6 6 0 1118 8zm-6-4a1 1 0 100 2 1 1 0 000-2z",clipRule:"evenodd"})})}),m.jsx("div",{className:"w-20 h-20 mb-4 rounded-full bg-primary text-primary-content flex items-center justify-center font-bold text-4xl border-4 border-card dark:border-dark-card shadow-lg",children:m.jsx("span",{children:n})}),m.jsx("h3",{className:"text-lg font-bold text-foreground dark:text-dark-foreground",children:e.name}),m.jsx("p",{className:"text-sm text-foreground-muted dark:text-dark-foreground-muted",children:e.role})]})},SG=({users:e,onUserSelect:t})=>{let r=e.filter(e=>!e.email),n=e.find(e=>!!e.email);return(0,m.jsxs)("div",{className:"min-h-screen auth-background flex flex-col items-center justify-center p-4",children:[(0,m.jsxs)("div",{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"text-center mb-8",children:[m.jsx("h1",{className:"text-4xl font-extrabold text-foreground dark:text-dark-foreground",children:"Banduka POS"}),m.jsx("p",{className:"text-lg text-foreground-muted dark:text-dark-foreground-muted mt-2",children:"Select your profile to sign in"})]}),(0,m.jsxs)("div",{className:"w-full max-w-4xl",variants:{hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.08,delayChildren:.2}}},initial:"hidden",animate:"visible",children:[(0,m.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6",children:[n&&m.jsx(Sq,{user:n,onClick:()=>t(n)}),r.map(e=>m.jsx(Sq,{user:e,onClick:()=>t(e)},e.id))]}),0===r.length&&n&&m.jsx("div",{variants:{hidden:{opacity:0,y:20},visible:{opacity:1,y:0}},className:"mt-8 text-center p-4 bg-primary/10 border border-primary/20 rounded-lg text-sm text-primary/80 dark:text-dark-primary/80",children:m.jsx("p",{children:"No staff profiles found. Log in as Admin to add staff members from the Settings menu."})})]})]})},Sz=({user:e,onPinSubmit:t,onBack:r})=>{let[n,a]=(0,g.useState)(""),[o,i]=(0,g.useState)(""),[s,l]=(0,g.useState)(0);(0,g.useEffect)(()=>{4===n.length&&A()},[n]);let A=async()=>{await t(n)||(i("Incorrect PIN. Please try again."),l(e=>e+1),setTimeout(()=>{a(""),i("")},1e3))},c=e=>{n.length<4&&a(t=>t+e)},d=()=>{a(e=>e.slice(0,-1))};return m.jsx("div",{className:"fixed inset-0 auth-background flex flex-col items-center justify-center z-50 p-4",children:(0,m.jsxs)("div",{className:"w-full max-w-sm text-center",children:[m.jsx("div",{className:"w-24 h-24 rounded-full bg-primary text-primary-content flex items-center justify-center font-bold text-5xl mx-auto mb-4 border-4 border-card dark:border-dark-card shadow-lg",children:m.jsx("span",{children:e.name.charAt(0)})}),(0,m.jsxs)("h1",{className:"text-2xl font-bold text-foreground dark:text-dark-foreground",children:["Welcome, ",e.name]}),m.jsx("p",{className:"text-foreground-muted dark:text-dark-foreground-muted mt-2",children:"Enter your 4-digit PIN to sign in."}),m.jsx("div",{className:"my-8",children:m.jsx(()=>m.jsx("div",{className:"flex justify-center space-x-4",children:[void 0,void 0,void 0,void 0].map((e,t)=>m.jsx("div",{className:`w-4 h-4 rounded-full border-2 ${t<n.length?"bg-success border-success":"bg-transparent border-border"}`},t))}),{})}),(0,m.jsxs)(Q,{children:[o&&m.jsx("p",{className:"text-danger font-semibold mb-4 h-5",children:o}),!o&&m.jsx("div",{className:"h-5 mb-4"})]}),m.jsx("div",{className:"max-w-xs mx-auto",children:m.jsx(()=>m.jsx("div",{className:"grid grid-cols-3 gap-4",children:["1","2","3","4","5","6","7","8","9","","0",""].map((e,t)=>m.jsx("button",{onClick:()=>""===e?d():e?c(e):null,className:"p-4 bg-card/80 dark:bg-dark-card/80 text-foreground dark:text-dark-foreground rounded-2xl text-2xl font-bold enabled:hover:bg-muted dark:enabled:hover:bg-dark-muted disabled:opacity-0 transition-colors shadow-sm border border-border dark:border-dark-border",disabled:!e,children:e},t))}),{})}),m.jsx("div",{className:"mt-8",children:m.jsx("button",{onClick:r,className:"text-sm font-medium text-primary hover:text-primary-focus",children:" Switch User"})})]})})},SW=({user:e,onLogin:t,onBack:r})=>{let[n,a]=(0,g.useState)(""),[o,i]=(0,g.useState)(!1),[s,l]=(0,g.useState)(""),A=async r=>{r.preventDefault(),l(""),i(!0),await t(e.username,n)||l("Invalid passcode. Please try again."),i(!1)};return m.jsx("div",{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 auth-background flex flex-col items-center justify-center z-50 p-4",children:(0,m.jsxs)("div",{className:"w-full max-w-sm text-center",initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:[m.jsx("div",{className:"w-24 h-24 rounded-full bg-primary text-primary-content flex items-center justify-center font-bold text-5xl mx-auto mb-4 border-4 border-card dark:border-dark-card shadow-lg",children:m.jsx("span",{children:e.name.charAt(0)})}),(0,m.jsxs)("h1",{className:"text-2xl font-bold text-foreground dark:text-dark-foreground",children:["Welcome, ",e.name]}),m.jsx("p",{className:"text-foreground-muted dark:text-dark-foreground-muted mt-2",children:"Enter your passcode to sign in."}),(0,m.jsxs)("form",{className:"mt-8 space-y-6",onSubmit:A,children:[(0,m.jsxs)("div",{children:[m.jsx("label",{htmlFor:"username",className:"sr-only",children:"Username"}),m.jsx("input",{id:"username",type:"text",value:e.username,readOnly:!0,className:"appearance-none block w-full px-3 py-2 border border-border dark:border-dark-border rounded-md shadow-sm bg-muted dark:bg-dark-muted text-foreground-muted dark:text-dark-foreground-muted sm:text-sm"})]}),(0,m.jsxs)("div",{children:[m.jsx("label",{htmlFor:"password",className:"sr-only",children:"Passcode"}),m.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,placeholder:"Enter your passcode",value:n,onChange:e=>a(e.target.value),autoFocus:!0,className:"appearance-none block w-full px-4 py-3 rounded-lg bg-background/50 dark:bg-dark-background/50 border border-border dark:border-dark-border"})]}),s&&m.jsx("p",{className:"text-sm text-danger",children:s}),m.jsx("button",{type:"submit",disabled:o,whileTap:{scale:.98},className:"w-full flex justify-center py-3 px-4 border border-transparent rounded-lg shadow-sm text-sm font-bold text-primary-content bg-primary hover:bg-primary-focus focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary disabled:bg-slate-400 dark:disabled:bg-slate-600",children:o?"Signing In...":"Sign In"})]}),m.jsx("div",{className:"mt-8",children:m.jsx("button",{onClick:r,className:"text-sm font-medium text-primary hover:text-primary-focus",children:" Switch User"})})]})})},S$=({type:e,onSelect:t,isSelected:r})=>{let n=og[e];return m.jsx("div",{onClick:t,className:`p-4 rounded-xl cursor-pointer transition-all ${r?"bg-card shadow-inner border border-primary":"bg-muted/50 dark:bg-dark-muted/50 hover:bg-muted dark:hover:bg-dark-muted border border-transparent hover:border-border"}`,whileHover:{y:-5},whileTap:{scale:.98},children:(0,m.jsxs)("div",{className:"flex items-center space-x-4",children:[m.jsx("div",{className:`p-3 rounded-lg ${r?"bg-primary/20 text-primary":"bg-background dark:bg-dark-background text-foreground-muted"}`,children:n.icon}),(0,m.jsxs)("div",{children:[m.jsx("h3",{className:"font-bold text-foreground dark:text-dark-foreground",children:n.name}),m.jsx("p",{className:"text-sm text-foreground-muted dark:text-dark-foreground-muted",children:n.description})]})]})})},SX=({onComplete:e})=>{let[t,r]=(0,g.useState)(1),[n,a]=(0,g.useState)({name:"",location:"",phone:"",logoUrl:""}),[o,i]=(0,g.useState)(null),[s,l]=(0,g.useState)(""),[A,c]=(0,g.useState)(""),[d,u]=(0,g.useState)(""),h="w-full p-2 border rounded-md bg-background dark:bg-dark-background shadow-sm border-border dark:border-dark-border text-foreground dark:text-dark-foreground placeholder-foreground-muted dark:placeholder-dark-foreground-muted focus:outline-none focus:ring-2 focus:ring-primary",f=e=>{let{name:t,value:r}=e.target;a(e=>({...e,[t]:r}))};return m.jsx("div",{className:"min-h-screen auth-background flex flex-col items-center justify-center p-4",children:m.jsx("div",{className:"w-full max-w-4xl",children:m.jsx("div",{className:"bg-card/80 dark:bg-dark-card/80 backdrop-blur-2xl rounded-2xl shadow-2xl border border-white/20 dark:border-dark-border/50",children:m.jsx(Q,{mode:"wait",children:1===t?(0,m.jsxs)("form",{onSubmit:t=>{if(t.preventDefault(),u(""),!n.name){u("Business Name is required.");return}if(!o){u("Please select a business type.");return}if(!s||!A){u("Admin email and password are required.");return}if(A.length<6){u("Password must be at least 6 characters long.");return}e({businessInfo:n,businessType:o,adminEmail:s,adminPass:A}),r(2)},className:"p-8 space-y-8",children:[(0,m.jsxs)("div",{className:"text-center",children:[m.jsx("h1",{className:"text-3xl font-extrabold text-foreground dark:text-dark-foreground font-neural",children:"Welcome to Banduka POS"}),m.jsx("p",{className:"text-foreground-muted dark:text-dark-foreground-muted mt-2",children:"Let's get your business set up. Built by Eruns Technologies."})]}),(0,m.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[(0,m.jsxs)("div",{className:"space-y-4",children:[m.jsx("h2",{className:"font-bold text-lg text-foreground dark:text-dark-foreground",children:"1. Your Business"}),m.jsx("input",{name:"name",value:n.name,onChange:f,placeholder:"Business Name",required:!0,className:h}),m.jsx("input",{name:"location",value:n.location,onChange:f,placeholder:"Location (e.g., Mombasa)",className:h}),m.jsx("input",{name:"phone",value:n.phone,onChange:f,placeholder:"Phone Number",className:h}),m.jsx("h2",{className:"font-bold text-lg text-foreground dark:text-dark-foreground pt-4",children:"2. Administrator Account"}),m.jsx("input",{type:"email",value:s,onChange:e=>l(e.target.value),placeholder:"Admin Email",required:!0,className:h}),m.jsx("input",{type:"password",value:A,onChange:e=>c(e.target.value),placeholder:"Admin Password (min. 6 chars)",required:!0,className:h})]}),(0,m.jsxs)("div",{className:"space-y-4",children:[m.jsx("h2",{className:"font-bold text-lg text-foreground dark:text-dark-foreground",children:"3. Business Type"}),m.jsx("div",{className:"space-y-2",children:Object.keys(og).map(e=>m.jsx(S$,{type:e,onSelect:()=>i(e),isSelected:o===e},e))})]})]}),d&&m.jsx("p",{className:"text-center text-sm text-danger",children:d}),m.jsx("div",{children:m.jsx("button",{type:"submit",whileTap:{scale:.98},className:"w-full py-3 px-4 rounded-xl text-primary-content bg-primary font-bold text-lg transition-all shadow-md",children:"Complete Setup & Launch"})})]},"step1"):(0,m.jsxs)("div",{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"p-12 text-center",children:[m.jsx("div",{className:"mx-auto bg-success/10 text-success w-24 h-24 rounded-full flex items-center justify-center mb-6",children:m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-12 w-12",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),m.jsx("h1",{className:"text-3xl font-bold text-foreground dark:text-dark-foreground",children:"All Set!"}),(0,m.jsxs)("p",{className:"text-foreground-muted dark:text-dark-foreground-muted mt-2 mb-8",children:["Banduka POS is now configured for your ",m.jsx("span",{className:"font-semibold text-primary",children:n.name}),"."]}),m.jsx("p",{className:"font-semibold",children:"The application will now load..."})]},"step2")})})})})},SY=()=>{let[e,t]=(0,g.useState)("loading"),[r,n]=(0,g.useState)(null),[a,o]=(0,g.useState)(null),[i,s]=(0,g.useState)(null),[l,A]=(0,g.useState)([]),[c,d]=(0,g.useState)([]),u=(0,g.useCallback)((e,t="info")=>{let r={id:Date.now(),message:e,type:t};d(e=>[r]),setTimeout(()=>{d(e=>e.filter(e=>e.id!==r.id))},3e3)},[]);(0,g.useEffect)(()=>{(async()=>{try{await K();let e=await q("users");if(0===e.length){t("setup");return}A(e);let r=localStorage.getItem("banduka_pos_remembered_user");if(r){let a=e.find(e=>e.id===r);if(a){n(a),t("app");return}localStorage.removeItem("banduka_pos_remembered_user")}t("user_selection")}catch(e){console.error("Error during initial application load:",e),u("Failed to load application data. Please refresh.","error"),t("loading")}})()},[u]);let h=async e=>{try{let r={id:`user_admin_${Date.now()}`,name:"Admin",username:e.adminEmail,email:e.adminEmail,password:e.adminPass,role:"Admin"};await z("users",r);let a={...om,isSetupComplete:!0,businessType:e.businessType,businessInfo:{...om.businessInfo,...e.businessInfo,email:e.adminEmail}};return await z("settings",a),A([r]),n(r),t("app"),localStorage.setItem("banduka_pos_remembered_user",r.id),u(`Welcome to Banduka POS, ${e.businessInfo.name}!`,"success"),!0}catch(e){return console.error("Failed during initial setup:",e),u("An error occurred during setup. Please try again.","error"),!1}},f=async(e,r,a)=>{let o=l.find(t=>t.username&&t.username.toLowerCase()===e.toLowerCase());return o&&o.password===r?(n(o),t("app"),a?localStorage.setItem("banduka_pos_remembered_user",o.id):localStorage.removeItem("banduka_pos_remembered_user"),!0):(u("Invalid admin credentials.","error"),!1)},p=e=>{if("Admin"===e.role||e.email){t("admin_login");return}e.pin&&4===e.pin.length?(o(e),t("pin_entry")):e.password?(s(e),t("staff_login")):u(`${e.name} does not have a PIN or Passcode set up. Please ask an admin to set one.`,"error")},x=async e=>!!a&&a.pin===e&&(n(a),t("app"),localStorage.removeItem("banduka_pos_remembered_user"),!0),b=async(e,r)=>!!i&&i.username.toLowerCase()===e.toLowerCase()&&i.password===r&&(n(i),t("app"),localStorage.removeItem("banduka_pos_remembered_user"),!0),y=()=>{n(null),localStorage.removeItem("banduka_pos_remembered_user"),t("user_selection")},v=async e=>l.find(t=>t.email&&t.email.toLowerCase()===e.toLowerCase())||null,w=async(e,r)=>{try{let n={...r,password:e};await z("users",n),A(e=>e.map(e=>e.id===n.id?n:e)),u(`Password for ${r.name} has been reset successfully.`,"success"),t("admin_login")}catch(e){console.error("Failed to reset password:",{userId:r.id,error:e}),u("An error occurred while resetting the password.","error")}},k=async e=>{try{let t={...e,id:`user_${Date.now()}`};A(e=>[...e,t]),await z("users",t)}catch(t){throw console.error("Failed to add new user:",{userData:e,error:t}),u("Error adding new user. Please try again.","error"),t}},B=async e=>{try{A(t=>t.map(t=>t.id===e.id?e:t)),await z("users",e)}catch(t){throw console.error("Failed to update user:",{user:e,error:t}),u("Error updating user. Please try again.","error"),t}},j=async e=>{try{A(t=>t.filter(t=>t.id!==e)),await W("users",e)}catch(t){throw console.error("Failed to delete user:",{userId:e,error:t}),u("Error deleting user. Please try again.","error"),t}};return(0,m.jsxs)(m.Fragment,{children:[m.jsx(Q,{mode:"wait",children:m.jsx("div",{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3},children:(()=>{switch(e){case"loading":return m.jsx("div",{className:"h-screen w-screen flex items-center justify-center text-foreground-muted",children:"Loading Application..."});case"setup":return m.jsx(SX,{onComplete:h});case"user_selection":return m.jsx(SG,{users:l,onUserSelect:p});case"pin_entry":if(a)return m.jsx(Sz,{user:a,onPinSubmit:x,onBack:()=>{o(null),t("user_selection")}});return t("user_selection"),null;case"staff_login":if(i)return m.jsx(SW,{user:i,onLogin:b,onBack:()=>{s(null),t("user_selection")}});return t("user_selection"),null;case"admin_login":return m.jsx(SR,{onLogin:f,onForgotPassword:()=>t("forgot_password"),onNavigateToSignUp:()=>0===l.length?t("setup"):u("Admin can add new users from Settings.","info"),onBack:l.length>1?()=>t("user_selection"):void 0});case"forgot_password":return m.jsx(SV,{onFindUser:v,onResetPassword:w,onBackToLogin:()=>t("admin_login")});case"app":if(r)return m.jsx(SD,{currentUser:r,onLogout:y,allUsers:l,onAddUser:k,onUpdateUser:B,onDeleteUser:j});return t("user_selection"),null}})()},e)}),m.jsx(Q,{children:c.map(e=>m.jsx(Cc,{...e},e.id))})]})};function SJ(){return m.jsx(SY,{})}},24414:e=>{"use strict";var t={single_source_shortest_paths:function(e,r,n){var a,o,i,s,l,A,c,d={},u={};u[r]=0;var h=t.PriorityQueue.make();for(h.push(r,0);!h.empty();)for(i in o=(a=h.pop()).value,s=a.cost,l=e[o]||{})l.hasOwnProperty(i)&&(A=s+l[i],c=u[i],(void 0===u[i]||c>A)&&(u[i]=A,h.push(i,A),d[i]=o));if(void 0!==n&&void 0===u[n])throw Error(["Could not find a path from ",r," to ",n,"."].join(""));return d},extract_shortest_path_from_predecessor_list:function(e,t){for(var r=[],n=t;n;)r.push(n),e[n],n=e[n];return r.reverse(),r},find_path:function(e,r,n){var a=t.single_source_shortest_paths(e,r,n);return t.extract_shortest_path_from_predecessor_list(a,n)},PriorityQueue:{make:function(e){var r,n=t.PriorityQueue,a={};for(r in e=e||{},n)n.hasOwnProperty(r)&&(a[r]=n[r]);return a.queue=[],a.sorter=e.sorter||n.default_sorter,a},default_sorter:function(e,t){return e.cost-t.cost},push:function(e,t){this.queue.push({value:e,cost:t}),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return 0===this.queue.length}}};e.exports=t},51028:e=>{"use strict";var t=Object.prototype.hasOwnProperty,r="~";function n(){}function a(e,t,r){this.fn=e,this.context=t,this.once=r||!1}function o(e,t,n,o,i){if("function"!=typeof n)throw TypeError("The listener must be a function");var s=new a(n,o||e,i),l=r?r+t:t;return e._events[l]?e._events[l].fn?e._events[l]=[e._events[l],s]:e._events[l].push(s):(e._events[l]=s,e._eventsCount++),e}function i(e,t){0==--e._eventsCount?e._events=new n:delete e._events[t]}function s(){this._events=new n,this._eventsCount=0}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1)),s.prototype.eventNames=function(){var e,n,a=[];if(0===this._eventsCount)return a;for(n in e=this._events)t.call(e,n)&&a.push(r?n.slice(1):n);return Object.getOwnPropertySymbols?a.concat(Object.getOwnPropertySymbols(e)):a},s.prototype.listeners=function(e){var t=r?r+e:e,n=this._events[t];if(!n)return[];if(n.fn)return[n.fn];for(var a=0,o=n.length,i=Array(o);a<o;a++)i[a]=n[a].fn;return i},s.prototype.listenerCount=function(e){var t=r?r+e:e,n=this._events[t];return n?n.fn?1:n.length:0},s.prototype.emit=function(e,t,n,a,o,i){var s=r?r+e:e;if(!this._events[s])return!1;var l,A,c=this._events[s],d=arguments.length;if(c.fn){switch(c.once&&this.removeListener(e,c.fn,void 0,!0),d){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,t),!0;case 3:return c.fn.call(c.context,t,n),!0;case 4:return c.fn.call(c.context,t,n,a),!0;case 5:return c.fn.call(c.context,t,n,a,o),!0;case 6:return c.fn.call(c.context,t,n,a,o,i),!0}for(A=1,l=Array(d-1);A<d;A++)l[A-1]=arguments[A];c.fn.apply(c.context,l)}else{var u,h=c.length;for(A=0;A<h;A++)switch(c[A].once&&this.removeListener(e,c[A].fn,void 0,!0),d){case 1:c[A].fn.call(c[A].context);break;case 2:c[A].fn.call(c[A].context,t);break;case 3:c[A].fn.call(c[A].context,t,n);break;case 4:c[A].fn.call(c[A].context,t,n,a);break;default:if(!l)for(u=1,l=Array(d-1);u<d;u++)l[u-1]=arguments[u];c[A].fn.apply(c[A].context,l)}}return!0},s.prototype.on=function(e,t,r){return o(this,e,t,r,!1)},s.prototype.once=function(e,t,r){return o(this,e,t,r,!0)},s.prototype.removeListener=function(e,t,n,a){var o=r?r+e:e;if(!this._events[o])return this;if(!t)return i(this,o),this;var s=this._events[o];if(s.fn)s.fn!==t||a&&!s.once||n&&s.context!==n||i(this,o);else{for(var l=0,A=[],c=s.length;l<c;l++)(s[l].fn!==t||a&&!s[l].once||n&&s[l].context!==n)&&A.push(s[l]);A.length?this._events[o]=1===A.length?A[0]:A:i(this,o)}return this},s.prototype.removeAllListeners=function(e){var t;return e?(t=r?r+e:e,this._events[t]&&i(this,t)):(this._events=new n,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=r,s.EventEmitter=s,e.exports=s},39642:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>oB});var n,a,o,i,s,l=function(e,t){return(l=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)};function A(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}l(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}var c=function(){return(c=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)};function d(e,t,r,n){return new(r||(r=Promise))(function(a,o){function i(e){try{l(n.next(e))}catch(e){o(e)}}function s(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?a(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(i,s)}l((n=n.apply(e,t||[])).next())})}function u(e,t){var r,n,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(r)throw TypeError("Generator is already executing.");for(;i;)try{if(r=1,n&&(a=2&o[0]?n.return:o[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,o[1])).done)return a;switch(n=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,n=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!(a=(a=i.trys).length>0&&a[a.length-1])&&(6===o[0]||2===o[0])){i=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){i.label=o[1];break}if(6===o[0]&&i.label<a[1]){i.label=a[1],a=o;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(o);break}a[2]&&i.ops.pop(),i.trys.pop();continue}o=t.call(e,i)}catch(e){o=[6,e],n=0}finally{r=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}function h(e,t,r){if(r||2==arguments.length)for(var n,a=0,o=t.length;a<o;a++)!n&&a in t||(n||(n=Array.prototype.slice.call(t,0,a)),n[a]=t[a]);return e.concat(n||t)}for(var f=function(){function e(e,t,r,n){this.left=e,this.top=t,this.width=r,this.height=n}return e.prototype.add=function(t,r,n,a){return new e(this.left+t,this.top+r,this.width+n,this.height+a)},e.fromClientRect=function(t,r){return new e(r.left+t.windowBounds.left,r.top+t.windowBounds.top,r.width,r.height)},e.fromDOMRectList=function(t,r){var n=Array.from(r).find(function(e){return 0!==e.width});return n?new e(n.left+t.windowBounds.left,n.top+t.windowBounds.top,n.width,n.height):e.EMPTY},e.EMPTY=new e(0,0,0,0),e}(),p=function(e,t){return f.fromClientRect(e,t.getBoundingClientRect())},m=function(e){var t=e.body,r=e.documentElement;if(!t||!r)throw Error("Unable to get document size");return new f(0,0,Math.max(Math.max(t.scrollWidth,r.scrollWidth),Math.max(t.offsetWidth,r.offsetWidth),Math.max(t.clientWidth,r.clientWidth)),Math.max(Math.max(t.scrollHeight,r.scrollHeight),Math.max(t.offsetHeight,r.offsetHeight),Math.max(t.clientHeight,r.clientHeight)))},g=function(e){for(var t=[],r=0,n=e.length;r<n;){var a=e.charCodeAt(r++);if(a>=55296&&a<=56319&&r<n){var o=e.charCodeAt(r++);(64512&o)==56320?t.push(((1023&a)<<10)+(1023&o)+65536):(t.push(a),r--)}else t.push(a)}return t},x=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(String.fromCodePoint)return String.fromCodePoint.apply(String,e);var r=e.length;if(!r)return"";for(var n=[],a=-1,o="";++a<r;){var i=e[a];i<=65535?n.push(i):(i-=65536,n.push((i>>10)+55296,i%1024+56320)),(a+1===r||n.length>16384)&&(o+=String.fromCharCode.apply(String,n),n.length=0)}return o},b="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",y="undefined"==typeof Uint8Array?[]:new Uint8Array(256),v=0;v<b.length;v++)y[b.charCodeAt(v)]=v;for(var w="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",k="undefined"==typeof Uint8Array?[]:new Uint8Array(256),B=0;B<w.length;B++)k[w.charCodeAt(B)]=B;for(var j=function(e){var t,r,n,a,o,i=.75*e.length,s=e.length,l=0;"="===e[e.length-1]&&(i--,"="===e[e.length-2]&&i--);var A="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array&&void 0!==Uint8Array.prototype.slice?new ArrayBuffer(i):Array(i),c=Array.isArray(A)?A:new Uint8Array(A);for(t=0;t<s;t+=4)r=k[e.charCodeAt(t)],n=k[e.charCodeAt(t+1)],a=k[e.charCodeAt(t+2)],o=k[e.charCodeAt(t+3)],c[l++]=r<<2|n>>4,c[l++]=(15&n)<<4|a>>2,c[l++]=(3&a)<<6|63&o;return A},C=function(e){for(var t=e.length,r=[],n=0;n<t;n+=2)r.push(e[n+1]<<8|e[n]);return r},N=function(e){for(var t=e.length,r=[],n=0;n<t;n+=4)r.push(e[n+3]<<24|e[n+2]<<16|e[n+1]<<8|e[n]);return r},S=function(e,t,r){return e.slice?e.slice(t,r):new Uint16Array(Array.prototype.slice.call(e,t,r))},F=function(){function e(e,t,r,n,a,o){this.initialValue=e,this.errorValue=t,this.highStart=r,this.highValueIndex=n,this.index=a,this.data=o}return e.prototype.get=function(e){var t;if(e>=0){if(e<55296||e>56319&&e<=65535)return t=((t=this.index[e>>5])<<2)+(31&e),this.data[t];if(e<=65535)return t=((t=this.index[2048+(e-55296>>5)])<<2)+(31&e),this.data[t];if(e<this.highStart)return t=2080+(e>>11),t=this.index[t]+(e>>5&63),t=((t=this.index[t])<<2)+(31&e),this.data[t];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},e}(),E="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",O="undefined"==typeof Uint8Array?[]:new Uint8Array(256),P=0;P<E.length;P++)O[E.charCodeAt(P)]=P;var I=[9001,65288],U=function(e,t){var r,n,a=j(e),o=Array.isArray(a)?N(a):new Uint32Array(a),i=Array.isArray(a)?C(a):new Uint16Array(a),s=S(i,12,o[4]/2),l=2===o[5]?S(i,(24+o[4])/2):(r=Math.ceil((24+o[4])/4),o.slice?o.slice(r,void 0):new Uint32Array(Array.prototype.slice.call(o,r,n)));return new F(o[0],o[1],o[2],o[3],s,l)}("KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA=="),L=[30,36],_=[1,2,3,5],Q=[10,8],T=[27,26],D=_.concat(Q),M=[38,39,40,34,35],H=[15,13],R=function(e,t){void 0===t&&(t="strict");var r=[],n=[],a=[];return e.forEach(function(e,o){var i=U.get(e);if(i>50?(a.push(!0),i-=50):a.push(!1),-1!==["normal","auto","loose"].indexOf(t)&&-1!==[8208,8211,12316,12448].indexOf(e))return n.push(o),r.push(16);if(4===i||11===i){if(0===o)return n.push(o),r.push(30);var s=r[o-1];return -1===D.indexOf(s)?(n.push(n[o-1]),r.push(s)):(n.push(o),r.push(30))}return(n.push(o),31===i)?r.push("strict"===t?21:37):42===i||29===i?r.push(30):43===i?e>=131072&&e<=196605||e>=196608&&e<=262141?r.push(37):r.push(30):void r.push(i)}),[n,r,a]},K=function(e,t,r,n){var a=n[r];if(Array.isArray(e)?-1!==e.indexOf(a):e===a)for(var o=r;o<=n.length;){var i=n[++o];if(i===t)return!0;if(10!==i)break}if(10===a)for(var o=r;o>0;){var s=n[--o];if(Array.isArray(e)?-1!==e.indexOf(s):e===s)for(var l=r;l<=n.length;){var i=n[++l];if(i===t)return!0;if(10!==i)break}if(10!==s)break}return!1},V=function(e,t){for(var r=e;r>=0;){var n=t[r];if(10!==n)return n;r--}return 0},q=function(e,t,r,n,a){if(0===r[n])return"\xd7";var o=n-1;if(Array.isArray(a)&&!0===a[o])return"\xd7";var i=o-1,s=o+1,l=t[o],A=i>=0?t[i]:0,c=t[s];if(2===l&&3===c)return"\xd7";if(-1!==_.indexOf(l))return"!";if(-1!==_.indexOf(c)||-1!==Q.indexOf(c))return"\xd7";if(8===V(o,t))return"\xf7";if(11===U.get(e[o])||(32===l||33===l)&&11===U.get(e[s])||7===l||7===c||9===l||-1===[10,13,15].indexOf(l)&&9===c||-1!==[17,18,19,24,28].indexOf(c)||22===V(o,t)||K(23,22,o,t)||K([17,18],21,o,t)||K(12,12,o,t))return"\xd7";if(10===l)return"\xf7";if(23===l||23===c)return"\xd7";if(16===c||16===l)return"\xf7";if(-1!==[13,15,21].indexOf(c)||14===l||36===A&&-1!==H.indexOf(l)||28===l&&36===c||20===c||-1!==L.indexOf(c)&&25===l||-1!==L.indexOf(l)&&25===c||27===l&&-1!==[37,32,33].indexOf(c)||-1!==[37,32,33].indexOf(l)&&26===c||-1!==L.indexOf(l)&&-1!==T.indexOf(c)||-1!==T.indexOf(l)&&-1!==L.indexOf(c)||-1!==[27,26].indexOf(l)&&(25===c||-1!==[22,15].indexOf(c)&&25===t[s+1])||-1!==[22,15].indexOf(l)&&25===c||25===l&&-1!==[25,28,24].indexOf(c))return"\xd7";if(-1!==[25,28,24,17,18].indexOf(c))for(var d=o;d>=0;){var u=t[d];if(25===u)return"\xd7";if(-1!==[28,24].indexOf(u))d--;else break}if(-1!==[27,26].indexOf(c))for(var d=-1!==[17,18].indexOf(l)?i:o;d>=0;){var u=t[d];if(25===u)return"\xd7";if(-1!==[28,24].indexOf(u))d--;else break}if(38===l&&-1!==[38,39,34,35].indexOf(c)||-1!==[39,34].indexOf(l)&&-1!==[39,40].indexOf(c)||-1!==[40,35].indexOf(l)&&40===c||-1!==M.indexOf(l)&&-1!==[20,26].indexOf(c)||-1!==M.indexOf(c)&&27===l||-1!==L.indexOf(l)&&-1!==L.indexOf(c)||24===l&&-1!==L.indexOf(c)||-1!==L.concat(25).indexOf(l)&&22===c&&-1===I.indexOf(e[s])||-1!==L.concat(25).indexOf(c)&&18===l)return"\xd7";if(41===l&&41===c){for(var h=r[o],f=1;h>0;)if(41===t[--h])f++;else break;if(f%2!=0)return"\xd7"}return 32===l&&33===c?"\xd7":"\xf7"},G=function(e,t){t||(t={lineBreak:"normal",wordBreak:"normal"});var r=R(e,t.lineBreak),n=r[0],a=r[1],o=r[2];return("break-all"===t.wordBreak||"break-word"===t.wordBreak)&&(a=a.map(function(e){return -1!==[25,30,42].indexOf(e)?37:e})),[n,a,"keep-all"===t.wordBreak?o.map(function(t,r){return t&&e[r]>=19968&&e[r]<=40959}):void 0]},z=function(){function e(e,t,r,n){this.codePoints=e,this.required="!"===t,this.start=r,this.end=n}return e.prototype.slice=function(){return x.apply(void 0,this.codePoints.slice(this.start,this.end))},e}(),W=function(e,t){var r=g(e),n=G(r,t),a=n[0],o=n[1],i=n[2],s=r.length,l=0,A=0;return{next:function(){if(A>=s)return{done:!0,value:null};for(var e="\xd7";A<s&&"\xd7"===(e=q(r,o,a,++A,i)););if("\xd7"!==e||A===s){var t=new z(r,e,l,A);return l=A,{value:t,done:!1}}return{done:!0,value:null}}}},$=function(e){return e>=48&&e<=57},X=function(e){return $(e)||e>=65&&e<=70||e>=97&&e<=102},Y=function(e){return 10===e||9===e||32===e},J=function(e){var t;return(t=e)>=97&&t<=122||t>=65&&t<=90||e>=128||95===e},Z=function(e){return J(e)||$(e)||45===e},ee=function(e,t){return 92===e&&10!==t},et=function(e,t,r){return 45===e?J(t)||ee(t,r):!!(J(e)||92===e&&ee(e,t))},er=function(e,t,r){return 43===e||45===e?!!$(t)||46===t&&$(r):46===e?$(t):$(e)},en=function(e){var t=0,r=1;(43===e[0]||45===e[t])&&(45===e[t]&&(r=-1),t++);for(var n=[];$(e[t]);)n.push(e[t++]);var a=n.length?parseInt(x.apply(void 0,n),10):0;46===e[t]&&t++;for(var o=[];$(e[t]);)o.push(e[t++]);var i=o.length,s=i?parseInt(x.apply(void 0,o),10):0;(69===e[t]||101===e[t])&&t++;var l=1;(43===e[t]||45===e[t])&&(45===e[t]&&(l=-1),t++);for(var A=[];$(e[t]);)A.push(e[t++]);return r*(a+s*Math.pow(10,-i))*Math.pow(10,l*(A.length?parseInt(x.apply(void 0,A),10):0))},ea={type:2},eo={type:3},ei={type:4},es={type:13},el={type:8},eA={type:21},ec={type:9},ed={type:10},eu={type:11},eh={type:12},ef={type:14},ep={type:23},em={type:1},eg={type:25},ex={type:24},eb={type:26},ey={type:27},ev={type:28},ew={type:29},ek={type:31},eB={type:32},ej=function(){function e(){this._value=[]}return e.prototype.write=function(e){this._value=this._value.concat(g(e))},e.prototype.read=function(){for(var e=[],t=this.consumeToken();t!==eB;)e.push(t),t=this.consumeToken();return e},e.prototype.consumeToken=function(){var e=this.consumeCodePoint();switch(e){case 34:return this.consumeStringToken(34);case 35:var t=this.peekCodePoint(0),r=this.peekCodePoint(1),n=this.peekCodePoint(2);if(Z(t)||ee(r,n)){var a=et(t,r,n)?2:1,o=this.consumeName();return{type:5,value:o,flags:a}}break;case 36:if(61===this.peekCodePoint(0))return this.consumeCodePoint(),es;break;case 39:return this.consumeStringToken(39);case 40:return ea;case 41:return eo;case 42:if(61===this.peekCodePoint(0))return this.consumeCodePoint(),ef;break;case 43:case 46:if(er(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case 44:return ei;case 45:var i=this.peekCodePoint(0),s=this.peekCodePoint(1);if(er(e,i,s))return this.reconsumeCodePoint(e),this.consumeNumericToken();if(et(e,i,s))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();if(45===i&&62===s)return this.consumeCodePoint(),this.consumeCodePoint(),ex;break;case 47:if(42===this.peekCodePoint(0))for(this.consumeCodePoint();;){var l=this.consumeCodePoint();if(42===l&&47===(l=this.consumeCodePoint())||-1===l)return this.consumeToken()}break;case 58:return eb;case 59:return ey;case 60:if(33===this.peekCodePoint(0)&&45===this.peekCodePoint(1)&&45===this.peekCodePoint(2))return this.consumeCodePoint(),this.consumeCodePoint(),eg;break;case 64:if(et(this.peekCodePoint(0),this.peekCodePoint(1),this.peekCodePoint(2))){var o=this.consumeName();return{type:7,value:o}}break;case 91:return ev;case 92:if(ee(e,this.peekCodePoint(0)))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();break;case 93:return ew;case 61:if(61===this.peekCodePoint(0))return this.consumeCodePoint(),el;break;case 123:return eu;case 125:return eh;case 117:case 85:var A=this.peekCodePoint(0),c=this.peekCodePoint(1);return 43===A&&(X(c)||63===c)&&(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(e),this.consumeIdentLikeToken();case 124:if(61===this.peekCodePoint(0))return this.consumeCodePoint(),ec;if(124===this.peekCodePoint(0))return this.consumeCodePoint(),eA;break;case 126:if(61===this.peekCodePoint(0))return this.consumeCodePoint(),ed;break;case -1:return eB}return Y(e)?(this.consumeWhiteSpace(),ek):$(e)?(this.reconsumeCodePoint(e),this.consumeNumericToken()):J(e)?(this.reconsumeCodePoint(e),this.consumeIdentLikeToken()):{type:6,value:x(e)}},e.prototype.consumeCodePoint=function(){var e=this._value.shift();return void 0===e?-1:e},e.prototype.reconsumeCodePoint=function(e){this._value.unshift(e)},e.prototype.peekCodePoint=function(e){return e>=this._value.length?-1:this._value[e]},e.prototype.consumeUnicodeRangeToken=function(){for(var e=[],t=this.consumeCodePoint();X(t)&&e.length<6;)e.push(t),t=this.consumeCodePoint();for(var r=!1;63===t&&e.length<6;)e.push(t),t=this.consumeCodePoint(),r=!0;if(r){var n=parseInt(x.apply(void 0,e.map(function(e){return 63===e?48:e})),16),a=parseInt(x.apply(void 0,e.map(function(e){return 63===e?70:e})),16);return{type:30,start:n,end:a}}var o=parseInt(x.apply(void 0,e),16);if(!(45===this.peekCodePoint(0)&&X(this.peekCodePoint(1))))return{type:30,start:o,end:o};this.consumeCodePoint(),t=this.consumeCodePoint();for(var i=[];X(t)&&i.length<6;)i.push(t),t=this.consumeCodePoint();var a=parseInt(x.apply(void 0,i),16);return{type:30,start:o,end:a}},e.prototype.consumeIdentLikeToken=function(){var e=this.consumeName();return"url"===e.toLowerCase()&&40===this.peekCodePoint(0)?(this.consumeCodePoint(),this.consumeUrlToken()):40===this.peekCodePoint(0)?(this.consumeCodePoint(),{type:19,value:e}):{type:20,value:e}},e.prototype.consumeUrlToken=function(){var e=[];if(this.consumeWhiteSpace(),-1===this.peekCodePoint(0))return{type:22,value:""};var t=this.peekCodePoint(0);if(39===t||34===t){var r=this.consumeStringToken(this.consumeCodePoint());return 0===r.type&&(this.consumeWhiteSpace(),-1===this.peekCodePoint(0)||41===this.peekCodePoint(0))?(this.consumeCodePoint(),{type:22,value:r.value}):(this.consumeBadUrlRemnants(),ep)}for(;;){var n,a=this.consumeCodePoint();if(-1===a||41===a)return{type:22,value:x.apply(void 0,e)};if(Y(a)){if(this.consumeWhiteSpace(),-1===this.peekCodePoint(0)||41===this.peekCodePoint(0))return this.consumeCodePoint(),{type:22,value:x.apply(void 0,e)};return this.consumeBadUrlRemnants(),ep}if(34===a||39===a||40===a||(n=a)>=0&&n<=8||11===n||n>=14&&n<=31||127===n)return this.consumeBadUrlRemnants(),ep;if(92===a){if(!ee(a,this.peekCodePoint(0)))return this.consumeBadUrlRemnants(),ep;e.push(this.consumeEscapedCodePoint())}else e.push(a)}},e.prototype.consumeWhiteSpace=function(){for(;Y(this.peekCodePoint(0));)this.consumeCodePoint()},e.prototype.consumeBadUrlRemnants=function(){for(;;){var e=this.consumeCodePoint();if(41===e||-1===e)return;ee(e,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},e.prototype.consumeStringSlice=function(e){for(var t="";e>0;){var r=Math.min(5e4,e);t+=x.apply(void 0,this._value.splice(0,r)),e-=r}return this._value.shift(),t},e.prototype.consumeStringToken=function(e){for(var t="",r=0;;){var n=this._value[r];if(-1===n||void 0===n||n===e)return{type:0,value:t+=this.consumeStringSlice(r)};if(10===n)return this._value.splice(0,r),em;if(92===n){var a=this._value[r+1];-1!==a&&void 0!==a&&(10===a?(t+=this.consumeStringSlice(r),r=-1,this._value.shift()):ee(n,a)&&(t+=this.consumeStringSlice(r)+x(this.consumeEscapedCodePoint()),r=-1))}r++}},e.prototype.consumeNumber=function(){var e=[],t=4,r=this.peekCodePoint(0);for((43===r||45===r)&&e.push(this.consumeCodePoint());$(this.peekCodePoint(0));)e.push(this.consumeCodePoint());r=this.peekCodePoint(0);var n=this.peekCodePoint(1);if(46===r&&$(n))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),t=8;$(this.peekCodePoint(0));)e.push(this.consumeCodePoint());r=this.peekCodePoint(0),n=this.peekCodePoint(1);var a=this.peekCodePoint(2);if((69===r||101===r)&&((43===n||45===n)&&$(a)||$(n)))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),t=8;$(this.peekCodePoint(0));)e.push(this.consumeCodePoint());return[en(e),t]},e.prototype.consumeNumericToken=function(){var e=this.consumeNumber(),t=e[0],r=e[1],n=this.peekCodePoint(0);return et(n,this.peekCodePoint(1),this.peekCodePoint(2))?{type:15,number:t,flags:r,unit:this.consumeName()}:37===n?(this.consumeCodePoint(),{type:16,number:t,flags:r}):{type:17,number:t,flags:r}},e.prototype.consumeEscapedCodePoint=function(){var e=this.consumeCodePoint();if(X(e)){for(var t=x(e);X(this.peekCodePoint(0))&&t.length<6;)t+=x(this.consumeCodePoint());Y(this.peekCodePoint(0))&&this.consumeCodePoint();var r=parseInt(t,16);return 0===r||r>=55296&&r<=57343||r>1114111?65533:r}return -1===e?65533:e},e.prototype.consumeName=function(){for(var e="";;){var t=this.consumeCodePoint();if(Z(t))e+=x(t);else{if(!ee(t,this.peekCodePoint(0)))return this.reconsumeCodePoint(t),e;e+=x(this.consumeEscapedCodePoint())}}},e}(),eC=function(){function e(e){this._tokens=e}return e.create=function(t){var r=new ej;return r.write(t),new e(r.read())},e.parseValue=function(t){return e.create(t).parseComponentValue()},e.parseValues=function(t){return e.create(t).parseComponentValues()},e.prototype.parseComponentValue=function(){for(var e=this.consumeToken();31===e.type;)e=this.consumeToken();if(32===e.type)throw SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(e);var t=this.consumeComponentValue();do e=this.consumeToken();while(31===e.type);if(32===e.type)return t;throw SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},e.prototype.parseComponentValues=function(){for(var e=[];;){var t=this.consumeComponentValue();if(32===t.type)return e;e.push(t),e.push()}},e.prototype.consumeComponentValue=function(){var e=this.consumeToken();switch(e.type){case 11:case 28:case 2:return this.consumeSimpleBlock(e.type);case 19:return this.consumeFunction(e)}return e},e.prototype.consumeSimpleBlock=function(e){for(var t={type:e,values:[]},r=this.consumeToken();;){if(32===r.type||eL(r,e))return t;this.reconsumeToken(r),t.values.push(this.consumeComponentValue()),r=this.consumeToken()}},e.prototype.consumeFunction=function(e){for(var t={name:e.value,values:[],type:18};;){var r=this.consumeToken();if(32===r.type||3===r.type)return t;this.reconsumeToken(r),t.values.push(this.consumeComponentValue())}},e.prototype.consumeToken=function(){var e=this._tokens.shift();return void 0===e?eB:e},e.prototype.reconsumeToken=function(e){this._tokens.unshift(e)},e}(),eN=function(e){return 15===e.type},eS=function(e){return 17===e.type},eF=function(e){return 20===e.type},eE=function(e){return 0===e.type},eO=function(e,t){return eF(e)&&e.value===t},eP=function(e){return 31!==e.type},eI=function(e){return 31!==e.type&&4!==e.type},eU=function(e){var t=[],r=[];return e.forEach(function(e){if(4===e.type){if(0===r.length)throw Error("Error parsing function args, zero tokens for arg");t.push(r),r=[];return}31!==e.type&&r.push(e)}),r.length&&t.push(r),t},eL=function(e,t){return 11===t&&12===e.type||28===t&&29===e.type||2===t&&3===e.type},e_=function(e){return 17===e.type||15===e.type},eQ=function(e){return 16===e.type||e_(e)},eT=function(e){return e.length>1?[e[0],e[1]]:[e[0]]},eD={type:17,number:0,flags:4},eM={type:16,number:50,flags:4},eH={type:16,number:100,flags:4},eR=function(e,t,r){var n=e[0],a=e[1];return[eK(n,t),eK(void 0!==a?a:n,r)]},eK=function(e,t){if(16===e.type)return e.number/100*t;if(eN(e))switch(e.unit){case"rem":case"em":return 16*e.number}return e.number},eV="grad",eq="turn",eG={parse:function(e,t){if(15===t.type)switch(t.unit){case"deg":return Math.PI*t.number/180;case eV:return Math.PI/200*t.number;case"rad":return t.number;case eq:return 2*Math.PI*t.number}throw Error("Unsupported angle type")}},ez=function(e){return 15===e.type&&("deg"===e.unit||e.unit===eV||"rad"===e.unit||e.unit===eq)},eW=function(e){switch(e.filter(eF).map(function(e){return e.value}).join(" ")){case"to bottom right":case"to right bottom":case"left top":case"top left":return[eD,eD];case"to top":case"bottom":return e$(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[eD,eH];case"to right":case"left":return e$(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[eH,eH];case"to bottom":case"top":return e$(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[eH,eD];case"to left":case"right":return e$(270)}return 0},e$=function(e){return Math.PI*e/180},eX={parse:function(e,t){if(18===t.type){var r=e4[t.name];if(void 0===r)throw Error('Attempting to parse an unsupported color function "'+t.name+'"');return r(e,t.values)}if(5===t.type){if(3===t.value.length){var n=t.value.substring(0,1),a=t.value.substring(1,2),o=t.value.substring(2,3);return eZ(parseInt(n+n,16),parseInt(a+a,16),parseInt(o+o,16),1)}if(4===t.value.length){var n=t.value.substring(0,1),a=t.value.substring(1,2),o=t.value.substring(2,3),i=t.value.substring(3,4);return eZ(parseInt(n+n,16),parseInt(a+a,16),parseInt(o+o,16),parseInt(i+i,16)/255)}if(6===t.value.length){var n=t.value.substring(0,2),a=t.value.substring(2,4),o=t.value.substring(4,6);return eZ(parseInt(n,16),parseInt(a,16),parseInt(o,16),1)}if(8===t.value.length){var n=t.value.substring(0,2),a=t.value.substring(2,4),o=t.value.substring(4,6),i=t.value.substring(6,8);return eZ(parseInt(n,16),parseInt(a,16),parseInt(o,16),parseInt(i,16)/255)}}if(20===t.type){var s=e6[t.value.toUpperCase()];if(void 0!==s)return s}return e6.TRANSPARENT}},eY=function(e){return(255&e)==0},eJ=function(e){var t=255&e,r=255&e>>8,n=255&e>>16,a=255&e>>24;return t<255?"rgba("+a+","+n+","+r+","+t/255+")":"rgb("+a+","+n+","+r+")"},eZ=function(e,t,r,n){return(e<<24|t<<16|r<<8|Math.round(255*n)<<0)>>>0},e0=function(e,t){if(17===e.type)return e.number;if(16===e.type){var r=3===t?1:255;return 3===t?e.number/100*r:Math.round(e.number/100*r)}return 0},e1=function(e,t){var r=t.filter(eI);if(3===r.length){var n=r.map(e0),a=n[0],o=n[1],i=n[2];return eZ(a,o,i,1)}if(4===r.length){var s=r.map(e0),a=s[0],o=s[1],i=s[2];return eZ(a,o,i,s[3])}return 0};function e2(e,t,r){return(r<0&&(r+=1),r>=1&&(r-=1),r<1/6)?(t-e)*r*6+e:r<.5?t:r<2/3?(t-e)*6*(2/3-r)+e:e}var e5=function(e,t){var r=t.filter(eI),n=r[0],a=r[1],o=r[2],i=r[3],s=(17===n.type?e$(n.number):eG.parse(e,n))/(2*Math.PI),l=eQ(a)?a.number/100:0,A=eQ(o)?o.number/100:0,c=void 0!==i&&eQ(i)?eK(i,1):1;if(0===l)return eZ(255*A,255*A,255*A,1);var d=A<=.5?A*(l+1):A+l-A*l,u=2*A-d;return eZ(255*e2(u,d,s+1/3),255*e2(u,d,s),255*e2(u,d,s-1/3),c)},e4={hsl:e5,hsla:e5,rgb:e1,rgba:e1},e3=function(e,t){return eX.parse(e,eC.create(t).parseComponentValue())},e6={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199},e8={name:"background-clip",initialValue:"border-box",prefix:!1,type:1,parse:function(e,t){return t.map(function(e){if(eF(e))switch(e.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},e7={name:"background-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},e9=function(e,t){var r=eX.parse(e,t[0]),n=t[1];return n&&eQ(n)?{color:r,stop:n}:{color:r,stop:null}},te=function(e,t){var r=e[0],n=e[e.length-1];null===r.stop&&(r.stop=eD),null===n.stop&&(n.stop=eH);for(var a=[],o=0,i=0;i<e.length;i++){var s=e[i].stop;if(null!==s){var l=eK(s,t);l>o?a.push(l):a.push(o),o=l}else a.push(null)}for(var A=null,i=0;i<a.length;i++){var c=a[i];if(null===c)null===A&&(A=i);else if(null!==A){for(var d=i-A,u=(c-a[A-1])/(d+1),h=1;h<=d;h++)a[A+h-1]=u*h;A=null}}return e.map(function(e,r){return{color:e.color,stop:Math.max(Math.min(1,a[r]/t),0)}})},tt=function(e,t,r){var n=t/2,a=r/2,o=eK(e[0],t)-n;return(Math.atan2(a-eK(e[1],r),o)+2*Math.PI)%(2*Math.PI)},tr=function(e,t,r){var n="number"==typeof e?e:tt(e,t,r),a=Math.abs(t*Math.sin(n))+Math.abs(r*Math.cos(n)),o=t/2,i=r/2,s=a/2,l=Math.sin(n-Math.PI/2)*s,A=Math.cos(n-Math.PI/2)*s;return[a,o-A,o+A,i-l,i+l]},tn=function(e,t){return Math.sqrt(e*e+t*t)},ta=function(e,t,r,n,a){return[[0,0],[0,t],[e,0],[e,t]].reduce(function(e,t){var o=tn(r-t[0],n-t[1]);return(a?o<e.optimumDistance:o>e.optimumDistance)?{optimumCorner:t,optimumDistance:o}:e},{optimumDistance:a?1/0:-1/0,optimumCorner:null}).optimumCorner},to=function(e,t,r,n,a){var o=0,i=0;switch(e.size){case 0:0===e.shape?o=i=Math.min(Math.abs(t),Math.abs(t-n),Math.abs(r),Math.abs(r-a)):1===e.shape&&(o=Math.min(Math.abs(t),Math.abs(t-n)),i=Math.min(Math.abs(r),Math.abs(r-a)));break;case 2:if(0===e.shape)o=i=Math.min(tn(t,r),tn(t,r-a),tn(t-n,r),tn(t-n,r-a));else if(1===e.shape){var s=Math.min(Math.abs(r),Math.abs(r-a))/Math.min(Math.abs(t),Math.abs(t-n)),l=ta(n,a,t,r,!0),A=l[0],c=l[1];o=tn(A-t,(c-r)/s),i=s*o}break;case 1:0===e.shape?o=i=Math.max(Math.abs(t),Math.abs(t-n),Math.abs(r),Math.abs(r-a)):1===e.shape&&(o=Math.max(Math.abs(t),Math.abs(t-n)),i=Math.max(Math.abs(r),Math.abs(r-a)));break;case 3:if(0===e.shape)o=i=Math.max(tn(t,r),tn(t,r-a),tn(t-n,r),tn(t-n,r-a));else if(1===e.shape){var s=Math.max(Math.abs(r),Math.abs(r-a))/Math.max(Math.abs(t),Math.abs(t-n)),d=ta(n,a,t,r,!1),A=d[0],c=d[1];o=tn(A-t,(c-r)/s),i=s*o}}return Array.isArray(e.size)&&(o=eK(e.size[0],n),i=2===e.size.length?eK(e.size[1],a):o),[o,i]},ti=function(e,t){var r=e$(180),n=[];return eU(t).forEach(function(t,a){if(0===a){var o=t[0];if(20===o.type&&-1!==["top","left","right","bottom"].indexOf(o.value)){r=eW(t);return}if(ez(o)){r=(eG.parse(e,o)+e$(270))%e$(360);return}}var i=e9(e,t);n.push(i)}),{angle:r,stops:n,type:1}},ts="closest-side",tl="farthest-side",tA="closest-corner",tc="farthest-corner",td="circle",tu="ellipse",th="cover",tf="contain",tp=function(e,t){var r=0,n=3,a=[],o=[];return eU(t).forEach(function(t,i){var s=!0;if(0===i?s=t.reduce(function(e,t){if(eF(t))switch(t.value){case"center":return o.push(eM),!1;case"top":case"left":return o.push(eD),!1;case"right":case"bottom":return o.push(eH),!1}else if(eQ(t)||e_(t))return o.push(t),!1;return e},s):1===i&&(s=t.reduce(function(e,t){if(eF(t))switch(t.value){case td:return r=0,!1;case tu:return r=1,!1;case tf:case ts:return n=0,!1;case tl:return n=1,!1;case tA:return n=2,!1;case th:case tc:return n=3,!1}else if(e_(t)||eQ(t))return Array.isArray(n)||(n=[]),n.push(t),!1;return e},s)),s){var l=e9(e,t);a.push(l)}}),{size:n,shape:r,stops:a,position:o,type:2}},tm={parse:function(e,t){if(22===t.type){var r={url:t.value,type:0};return e.cache.addImage(t.value),r}if(18===t.type){var n=tg[t.name];if(void 0===n)throw Error('Attempting to parse an unsupported image function "'+t.name+'"');return n(e,t.values)}throw Error("Unsupported image type "+t.type)}},tg={"linear-gradient":function(e,t){var r=e$(180),n=[];return eU(t).forEach(function(t,a){if(0===a){var o=t[0];if(20===o.type&&"to"===o.value){r=eW(t);return}if(ez(o)){r=eG.parse(e,o);return}}var i=e9(e,t);n.push(i)}),{angle:r,stops:n,type:1}},"-moz-linear-gradient":ti,"-ms-linear-gradient":ti,"-o-linear-gradient":ti,"-webkit-linear-gradient":ti,"radial-gradient":function(e,t){var r=0,n=3,a=[],o=[];return eU(t).forEach(function(t,i){var s=!0;if(0===i){var l=!1;s=t.reduce(function(e,t){if(l){if(eF(t))switch(t.value){case"center":o.push(eM);break;case"top":case"left":o.push(eD);break;case"right":case"bottom":o.push(eH)}else(eQ(t)||e_(t))&&o.push(t)}else if(eF(t))switch(t.value){case td:return r=0,!1;case tu:return r=1,!1;case"at":return l=!0,!1;case ts:return n=0,!1;case th:case tl:return n=1,!1;case tf:case tA:return n=2,!1;case tc:return n=3,!1}else if(e_(t)||eQ(t))return Array.isArray(n)||(n=[]),n.push(t),!1;return e},s)}if(s){var A=e9(e,t);a.push(A)}}),{size:n,shape:r,stops:a,position:o,type:2}},"-moz-radial-gradient":tp,"-ms-radial-gradient":tp,"-o-radial-gradient":tp,"-webkit-radial-gradient":tp,"-webkit-gradient":function(e,t){var r=e$(180),n=[],a=1;return eU(t).forEach(function(t,r){var o=t[0];if(0===r){if(eF(o)&&"linear"===o.value){a=1;return}if(eF(o)&&"radial"===o.value){a=2;return}}if(18===o.type){if("from"===o.name){var i=eX.parse(e,o.values[0]);n.push({stop:eD,color:i})}else if("to"===o.name){var i=eX.parse(e,o.values[0]);n.push({stop:eH,color:i})}else if("color-stop"===o.name){var s=o.values.filter(eI);if(2===s.length){var i=eX.parse(e,s[1]),l=s[0];eS(l)&&n.push({stop:{type:16,number:100*l.number,flags:l.flags},color:i})}}}}),1===a?{angle:(r+e$(180))%e$(360),stops:n,type:a}:{size:3,shape:0,stops:n,position:[],type:a}}},tx={name:"background-image",initialValue:"none",type:1,prefix:!1,parse:function(e,t){if(0===t.length)return[];var r=t[0];return 20===r.type&&"none"===r.value?[]:t.filter(function(e){var t;return eI(e)&&!(20===(t=e).type&&"none"===t.value)&&(18!==t.type||!!tg[t.name])}).map(function(t){return tm.parse(e,t)})}},tb={name:"background-origin",initialValue:"border-box",prefix:!1,type:1,parse:function(e,t){return t.map(function(e){if(eF(e))switch(e.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},ty={name:"background-position",initialValue:"0% 0%",type:1,prefix:!1,parse:function(e,t){return eU(t).map(function(e){return e.filter(eQ)}).map(eT)}},tv={name:"background-repeat",initialValue:"repeat",prefix:!1,type:1,parse:function(e,t){return eU(t).map(function(e){return e.filter(eF).map(function(e){return e.value}).join(" ")}).map(tw)}},tw=function(e){switch(e){case"no-repeat":return 1;case"repeat-x":case"repeat no-repeat":return 2;case"repeat-y":case"no-repeat repeat":return 3;default:return 0}};!function(e){e.AUTO="auto",e.CONTAIN="contain",e.COVER="cover"}(n||(n={}));var tk={name:"background-size",initialValue:"0",prefix:!1,type:1,parse:function(e,t){return eU(t).map(function(e){return e.filter(tB)})}},tB=function(e){return eF(e)||eQ(e)},tj=function(e){return{name:"border-"+e+"-color",initialValue:"transparent",prefix:!1,type:3,format:"color"}},tC=tj("top"),tN=tj("right"),tS=tj("bottom"),tF=tj("left"),tE=function(e){return{name:"border-radius-"+e,initialValue:"0 0",prefix:!1,type:1,parse:function(e,t){return eT(t.filter(eQ))}}},tO=tE("top-left"),tP=tE("top-right"),tI=tE("bottom-right"),tU=tE("bottom-left"),tL=function(e){return{name:"border-"+e+"-style",initialValue:"solid",prefix:!1,type:2,parse:function(e,t){switch(t){case"none":return 0;case"dashed":return 2;case"dotted":return 3;case"double":return 4}return 1}}},t_=tL("top"),tQ=tL("right"),tT=tL("bottom"),tD=tL("left"),tM=function(e){return{name:"border-"+e+"-width",initialValue:"0",type:0,prefix:!1,parse:function(e,t){return eN(t)?t.number:0}}},tH=tM("top"),tR=tM("right"),tK=tM("bottom"),tV=tM("left"),tq={name:"color",initialValue:"transparent",prefix:!1,type:3,format:"color"},tG={name:"direction",initialValue:"ltr",prefix:!1,type:2,parse:function(e,t){return"rtl"===t?1:0}},tz={name:"display",initialValue:"inline-block",prefix:!1,type:1,parse:function(e,t){return t.filter(eF).reduce(function(e,t){return e|tW(t.value)},0)}},tW=function(e){switch(e){case"block":case"-webkit-box":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0},t$={name:"float",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"left":return 1;case"right":return 2;case"inline-start":return 3;case"inline-end":return 4}return 0}},tX={name:"letter-spacing",initialValue:"0",prefix:!1,type:0,parse:function(e,t){return 20===t.type&&"normal"===t.value?0:17===t.type||15===t.type?t.number:0}};!function(e){e.NORMAL="normal",e.STRICT="strict"}(a||(a={}));var tY={name:"line-break",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){return"strict"===t?a.STRICT:a.NORMAL}},tJ={name:"line-height",initialValue:"normal",prefix:!1,type:4},tZ=function(e,t){return eF(e)&&"normal"===e.value?1.2*t:17===e.type?t*e.number:eQ(e)?eK(e,t):t},t0={name:"list-style-image",initialValue:"none",type:0,prefix:!1,parse:function(e,t){return 20===t.type&&"none"===t.value?null:tm.parse(e,t)}},t1={name:"list-style-position",initialValue:"outside",prefix:!1,type:2,parse:function(e,t){return"inside"===t?0:1}},t2={name:"list-style-type",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"disc":return 0;case"circle":return 1;case"square":return 2;case"decimal":return 3;case"cjk-decimal":return 4;case"decimal-leading-zero":return 5;case"lower-roman":return 6;case"upper-roman":return 7;case"lower-greek":return 8;case"lower-alpha":return 9;case"upper-alpha":return 10;case"arabic-indic":return 11;case"armenian":return 12;case"bengali":return 13;case"cambodian":return 14;case"cjk-earthly-branch":return 15;case"cjk-heavenly-stem":return 16;case"cjk-ideographic":return 17;case"devanagari":return 18;case"ethiopic-numeric":return 19;case"georgian":return 20;case"gujarati":return 21;case"gurmukhi":case"hebrew":return 22;case"hiragana":return 23;case"hiragana-iroha":return 24;case"japanese-formal":return 25;case"japanese-informal":return 26;case"kannada":return 27;case"katakana":return 28;case"katakana-iroha":return 29;case"khmer":return 30;case"korean-hangul-formal":return 31;case"korean-hanja-formal":return 32;case"korean-hanja-informal":return 33;case"lao":return 34;case"lower-armenian":return 35;case"malayalam":return 36;case"mongolian":return 37;case"myanmar":return 38;case"oriya":return 39;case"persian":return 40;case"simp-chinese-formal":return 41;case"simp-chinese-informal":return 42;case"tamil":return 43;case"telugu":return 44;case"thai":return 45;case"tibetan":return 46;case"trad-chinese-formal":return 47;case"trad-chinese-informal":return 48;case"upper-armenian":return 49;case"disclosure-open":return 50;case"disclosure-closed":return 51;default:return -1}}},t5=function(e){return{name:"margin-"+e,initialValue:"0",prefix:!1,type:4}},t4=t5("top"),t3=t5("right"),t6=t5("bottom"),t8=t5("left"),t7={name:"overflow",initialValue:"visible",prefix:!1,type:1,parse:function(e,t){return t.filter(eF).map(function(e){switch(e.value){case"hidden":return 1;case"scroll":return 2;case"clip":return 3;case"auto":return 4;default:return 0}})}},t9={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){return"break-word"===t?"break-word":"normal"}},re=function(e){return{name:"padding-"+e,initialValue:"0",prefix:!1,type:3,format:"length-percentage"}},rt=re("top"),rr=re("right"),rn=re("bottom"),ra=re("left"),ro={name:"text-align",initialValue:"left",prefix:!1,type:2,parse:function(e,t){switch(t){case"right":return 2;case"center":case"justify":return 1;default:return 0}}},ri={name:"position",initialValue:"static",prefix:!1,type:2,parse:function(e,t){switch(t){case"relative":return 1;case"absolute":return 2;case"fixed":return 3;case"sticky":return 4}return 0}},rs={name:"text-shadow",initialValue:"none",type:1,prefix:!1,parse:function(e,t){return 1===t.length&&eO(t[0],"none")?[]:eU(t).map(function(t){for(var r={color:e6.TRANSPARENT,offsetX:eD,offsetY:eD,blur:eD},n=0,a=0;a<t.length;a++){var o=t[a];e_(o)?(0===n?r.offsetX=o:1===n?r.offsetY=o:r.blur=o,n++):r.color=eX.parse(e,o)}return r})}},rl={name:"text-transform",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"uppercase":return 2;case"lowercase":return 1;case"capitalize":return 3}return 0}},rA={name:"transform",initialValue:"none",prefix:!0,type:0,parse:function(e,t){if(20===t.type&&"none"===t.value)return null;if(18===t.type){var r=rc[t.name];if(void 0===r)throw Error('Attempting to parse an unsupported transform function "'+t.name+'"');return r(t.values)}return null}},rc={matrix:function(e){var t=e.filter(function(e){return 17===e.type}).map(function(e){return e.number});return 6===t.length?t:null},matrix3d:function(e){var t=e.filter(function(e){return 17===e.type}).map(function(e){return e.number}),r=t[0],n=t[1];t[2],t[3];var a=t[4],o=t[5];t[6],t[7],t[8],t[9],t[10],t[11];var i=t[12],s=t[13];return t[14],t[15],16===t.length?[r,n,a,o,i,s]:null}},rd={type:16,number:50,flags:4},ru=[rd,rd],rh={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:1,parse:function(e,t){var r=t.filter(eQ);return 2!==r.length?ru:[r[0],r[1]]}},rf={name:"visible",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"hidden":return 1;case"collapse":return 2;default:return 0}}};!function(e){e.NORMAL="normal",e.BREAK_ALL="break-all",e.KEEP_ALL="keep-all"}(o||(o={}));for(var rp={name:"word-break",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){switch(t){case"break-all":return o.BREAK_ALL;case"keep-all":return o.KEEP_ALL;default:return o.NORMAL}}},rm={name:"z-index",initialValue:"auto",prefix:!1,type:0,parse:function(e,t){if(20===t.type)return{auto:!0,order:0};if(eS(t))return{auto:!1,order:t.number};throw Error("Invalid z-index number parsed")}},rg={parse:function(e,t){if(15===t.type)switch(t.unit.toLowerCase()){case"s":return 1e3*t.number;case"ms":return t.number}throw Error("Unsupported time type")}},rx={name:"opacity",initialValue:"1",type:0,prefix:!1,parse:function(e,t){return eS(t)?t.number:1}},rb={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},ry={name:"text-decoration-line",initialValue:"none",prefix:!1,type:1,parse:function(e,t){return t.filter(eF).map(function(e){switch(e.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0}).filter(function(e){return 0!==e})}},rv={name:"font-family",initialValue:"",prefix:!1,type:1,parse:function(e,t){var r=[],n=[];return t.forEach(function(e){switch(e.type){case 20:case 0:r.push(e.value);break;case 17:r.push(e.number.toString());break;case 4:n.push(r.join(" ")),r.length=0}}),r.length&&n.push(r.join(" ")),n.map(function(e){return -1===e.indexOf(" ")?e:"'"+e+"'"})}},rw={name:"font-size",initialValue:"0",prefix:!1,type:3,format:"length"},rk={name:"font-weight",initialValue:"normal",type:0,prefix:!1,parse:function(e,t){return eS(t)?t.number:eF(t)&&"bold"===t.value?700:400}},rB={name:"font-variant",initialValue:"none",type:1,prefix:!1,parse:function(e,t){return t.filter(eF).map(function(e){return e.value})}},rj={name:"font-style",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){switch(t){case"oblique":return"oblique";case"italic":return"italic";default:return"normal"}}},rC=function(e,t){return(e&t)!=0},rN={name:"content",initialValue:"none",type:1,prefix:!1,parse:function(e,t){if(0===t.length)return[];var r=t[0];return 20===r.type&&"none"===r.value?[]:t}},rS={name:"counter-increment",initialValue:"none",prefix:!0,type:1,parse:function(e,t){if(0===t.length)return null;var r=t[0];if(20===r.type&&"none"===r.value)return null;for(var n=[],a=t.filter(eP),o=0;o<a.length;o++){var i=a[o],s=a[o+1];if(20===i.type){var l=s&&eS(s)?s.number:1;n.push({counter:i.value,increment:l})}}return n}},rF={name:"counter-reset",initialValue:"none",prefix:!0,type:1,parse:function(e,t){if(0===t.length)return[];for(var r=[],n=t.filter(eP),a=0;a<n.length;a++){var o=n[a],i=n[a+1];if(eF(o)&&"none"!==o.value){var s=i&&eS(i)?i.number:0;r.push({counter:o.value,reset:s})}}return r}},rE={name:"duration",initialValue:"0s",prefix:!1,type:1,parse:function(e,t){return t.filter(eN).map(function(t){return rg.parse(e,t)})}},rO={name:"quotes",initialValue:"none",prefix:!0,type:1,parse:function(e,t){if(0===t.length)return null;var r=t[0];if(20===r.type&&"none"===r.value)return null;var n=[],a=t.filter(eE);if(a.length%2!=0)return null;for(var o=0;o<a.length;o+=2){var i=a[o].value,s=a[o+1].value;n.push({open:i,close:s})}return n}},rP=function(e,t,r){if(!e)return"";var n=e[Math.min(t,e.length-1)];return n?r?n.open:n.close:""},rI={name:"box-shadow",initialValue:"none",type:1,prefix:!1,parse:function(e,t){return 1===t.length&&eO(t[0],"none")?[]:eU(t).map(function(t){for(var r={color:255,offsetX:eD,offsetY:eD,blur:eD,spread:eD,inset:!1},n=0,a=0;a<t.length;a++){var o=t[a];eO(o,"inset")?r.inset=!0:e_(o)?(0===n?r.offsetX=o:1===n?r.offsetY=o:2===n?r.blur=o:r.spread=o,n++):r.color=eX.parse(e,o)}return r})}},rU={name:"paint-order",initialValue:"normal",prefix:!1,type:1,parse:function(e,t){var r=[];return t.filter(eF).forEach(function(e){switch(e.value){case"stroke":r.push(1);break;case"fill":r.push(0);break;case"markers":r.push(2)}}),[0,1,2].forEach(function(e){-1===r.indexOf(e)&&r.push(e)}),r}},rL={name:"-webkit-text-stroke-color",initialValue:"currentcolor",prefix:!1,type:3,format:"color"},r_={name:"-webkit-text-stroke-width",initialValue:"0",type:0,prefix:!1,parse:function(e,t){return eN(t)?t.number:0}},rQ=function(){function e(e,t){this.animationDuration=rM(e,rE,t.animationDuration),this.backgroundClip=rM(e,e8,t.backgroundClip),this.backgroundColor=rM(e,e7,t.backgroundColor),this.backgroundImage=rM(e,tx,t.backgroundImage),this.backgroundOrigin=rM(e,tb,t.backgroundOrigin),this.backgroundPosition=rM(e,ty,t.backgroundPosition),this.backgroundRepeat=rM(e,tv,t.backgroundRepeat),this.backgroundSize=rM(e,tk,t.backgroundSize),this.borderTopColor=rM(e,tC,t.borderTopColor),this.borderRightColor=rM(e,tN,t.borderRightColor),this.borderBottomColor=rM(e,tS,t.borderBottomColor),this.borderLeftColor=rM(e,tF,t.borderLeftColor),this.borderTopLeftRadius=rM(e,tO,t.borderTopLeftRadius),this.borderTopRightRadius=rM(e,tP,t.borderTopRightRadius),this.borderBottomRightRadius=rM(e,tI,t.borderBottomRightRadius),this.borderBottomLeftRadius=rM(e,tU,t.borderBottomLeftRadius),this.borderTopStyle=rM(e,t_,t.borderTopStyle),this.borderRightStyle=rM(e,tQ,t.borderRightStyle),this.borderBottomStyle=rM(e,tT,t.borderBottomStyle),this.borderLeftStyle=rM(e,tD,t.borderLeftStyle),this.borderTopWidth=rM(e,tH,t.borderTopWidth),this.borderRightWidth=rM(e,tR,t.borderRightWidth),this.borderBottomWidth=rM(e,tK,t.borderBottomWidth),this.borderLeftWidth=rM(e,tV,t.borderLeftWidth),this.boxShadow=rM(e,rI,t.boxShadow),this.color=rM(e,tq,t.color),this.direction=rM(e,tG,t.direction),this.display=rM(e,tz,t.display),this.float=rM(e,t$,t.cssFloat),this.fontFamily=rM(e,rv,t.fontFamily),this.fontSize=rM(e,rw,t.fontSize),this.fontStyle=rM(e,rj,t.fontStyle),this.fontVariant=rM(e,rB,t.fontVariant),this.fontWeight=rM(e,rk,t.fontWeight),this.letterSpacing=rM(e,tX,t.letterSpacing),this.lineBreak=rM(e,tY,t.lineBreak),this.lineHeight=rM(e,tJ,t.lineHeight),this.listStyleImage=rM(e,t0,t.listStyleImage),this.listStylePosition=rM(e,t1,t.listStylePosition),this.listStyleType=rM(e,t2,t.listStyleType),this.marginTop=rM(e,t4,t.marginTop),this.marginRight=rM(e,t3,t.marginRight),this.marginBottom=rM(e,t6,t.marginBottom),this.marginLeft=rM(e,t8,t.marginLeft),this.opacity=rM(e,rx,t.opacity);var r,n,a=rM(e,t7,t.overflow);this.overflowX=a[0],this.overflowY=a[a.length>1?1:0],this.overflowWrap=rM(e,t9,t.overflowWrap),this.paddingTop=rM(e,rt,t.paddingTop),this.paddingRight=rM(e,rr,t.paddingRight),this.paddingBottom=rM(e,rn,t.paddingBottom),this.paddingLeft=rM(e,ra,t.paddingLeft),this.paintOrder=rM(e,rU,t.paintOrder),this.position=rM(e,ri,t.position),this.textAlign=rM(e,ro,t.textAlign),this.textDecorationColor=rM(e,rb,null!==(r=t.textDecorationColor)&&void 0!==r?r:t.color),this.textDecorationLine=rM(e,ry,null!==(n=t.textDecorationLine)&&void 0!==n?n:t.textDecoration),this.textShadow=rM(e,rs,t.textShadow),this.textTransform=rM(e,rl,t.textTransform),this.transform=rM(e,rA,t.transform),this.transformOrigin=rM(e,rh,t.transformOrigin),this.visibility=rM(e,rf,t.visibility),this.webkitTextStrokeColor=rM(e,rL,t.webkitTextStrokeColor),this.webkitTextStrokeWidth=rM(e,r_,t.webkitTextStrokeWidth),this.wordBreak=rM(e,rp,t.wordBreak),this.zIndex=rM(e,rm,t.zIndex)}return e.prototype.isVisible=function(){return this.display>0&&this.opacity>0&&0===this.visibility},e.prototype.isTransparent=function(){return eY(this.backgroundColor)},e.prototype.isTransformed=function(){return null!==this.transform},e.prototype.isPositioned=function(){return 0!==this.position},e.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},e.prototype.isFloating=function(){return 0!==this.float},e.prototype.isInlineLevel=function(){return rC(this.display,4)||rC(this.display,33554432)||rC(this.display,268435456)||rC(this.display,536870912)||rC(this.display,67108864)||rC(this.display,134217728)},e}(),rT=function(e,t){this.content=rM(e,rN,t.content),this.quotes=rM(e,rO,t.quotes)},rD=function(e,t){this.counterIncrement=rM(e,rS,t.counterIncrement),this.counterReset=rM(e,rF,t.counterReset)},rM=function(e,t,r){var n=new ej,a=null!=r?r.toString():t.initialValue;n.write(a);var o=new eC(n.read());switch(t.type){case 2:var i=o.parseComponentValue();return t.parse(e,eF(i)?i.value:t.initialValue);case 0:return t.parse(e,o.parseComponentValue());case 1:return t.parse(e,o.parseComponentValues());case 4:return o.parseComponentValue();case 3:switch(t.format){case"angle":return eG.parse(e,o.parseComponentValue());case"color":return eX.parse(e,o.parseComponentValue());case"image":return tm.parse(e,o.parseComponentValue());case"length":var s=o.parseComponentValue();return e_(s)?s:eD;case"length-percentage":var l=o.parseComponentValue();return eQ(l)?l:eD;case"time":return rg.parse(e,o.parseComponentValue())}}},rH=function(e){switch(e.getAttribute("data-html2canvas-debug")){case"all":return 1;case"clone":return 2;case"parse":return 3;case"render":return 4;default:return 0}},rR=function(e,t){var r=rH(e);return 1===r||t===r},rK=function(e,t){this.context=e,this.textNodes=[],this.elements=[],this.flags=0,rR(t,3),this.styles=new rQ(e,window.getComputedStyle(t,null)),n$(t)&&(this.styles.animationDuration.some(function(e){return e>0})&&(t.style.animationDuration="0s"),null!==this.styles.transform&&(t.style.transform="none")),this.bounds=p(this.context,t),rR(t,4)&&(this.flags|=16)},rV="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",rq="undefined"==typeof Uint8Array?[]:new Uint8Array(256),rG=0;rG<rV.length;rG++)rq[rV.charCodeAt(rG)]=rG;for(var rz=function(e){var t,r,n,a,o,i=.75*e.length,s=e.length,l=0;"="===e[e.length-1]&&(i--,"="===e[e.length-2]&&i--);var A="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array&&void 0!==Uint8Array.prototype.slice?new ArrayBuffer(i):Array(i),c=Array.isArray(A)?A:new Uint8Array(A);for(t=0;t<s;t+=4)r=rq[e.charCodeAt(t)],n=rq[e.charCodeAt(t+1)],a=rq[e.charCodeAt(t+2)],o=rq[e.charCodeAt(t+3)],c[l++]=r<<2|n>>4,c[l++]=(15&n)<<4|a>>2,c[l++]=(3&a)<<6|63&o;return A},rW=function(e){for(var t=e.length,r=[],n=0;n<t;n+=2)r.push(e[n+1]<<8|e[n]);return r},r$=function(e){for(var t=e.length,r=[],n=0;n<t;n+=4)r.push(e[n+3]<<24|e[n+2]<<16|e[n+1]<<8|e[n]);return r},rX=function(e,t,r){return e.slice?e.slice(t,r):new Uint16Array(Array.prototype.slice.call(e,t,r))},rY=function(){function e(e,t,r,n,a,o){this.initialValue=e,this.errorValue=t,this.highStart=r,this.highValueIndex=n,this.index=a,this.data=o}return e.prototype.get=function(e){var t;if(e>=0){if(e<55296||e>56319&&e<=65535)return t=((t=this.index[e>>5])<<2)+(31&e),this.data[t];if(e<=65535)return t=((t=this.index[2048+(e-55296>>5)])<<2)+(31&e),this.data[t];if(e<this.highStart)return t=2080+(e>>11),t=this.index[t]+(e>>5&63),t=((t=this.index[t])<<2)+(31&e),this.data[t];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},e}(),rJ="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",rZ="undefined"==typeof Uint8Array?[]:new Uint8Array(256),r0=0;r0<rJ.length;r0++)rZ[rJ.charCodeAt(r0)]=r0;var r1=function(e){for(var t=[],r=0,n=e.length;r<n;){var a=e.charCodeAt(r++);if(a>=55296&&a<=56319&&r<n){var o=e.charCodeAt(r++);(64512&o)==56320?t.push(((1023&a)<<10)+(1023&o)+65536):(t.push(a),r--)}else t.push(a)}return t},r2=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(String.fromCodePoint)return String.fromCodePoint.apply(String,e);var r=e.length;if(!r)return"";for(var n=[],a=-1,o="";++a<r;){var i=e[a];i<=65535?n.push(i):(i-=65536,n.push((i>>10)+55296,i%1024+56320)),(a+1===r||n.length>16384)&&(o+=String.fromCharCode.apply(String,n),n.length=0)}return o},r5=function(e,t){var r,n,a=rz(e),o=Array.isArray(a)?r$(a):new Uint32Array(a),i=Array.isArray(a)?rW(a):new Uint16Array(a),s=rX(i,12,o[4]/2),l=2===o[5]?rX(i,(24+o[4])/2):(r=Math.ceil((24+o[4])/4),o.slice?o.slice(r,void 0):new Uint32Array(Array.prototype.slice.call(o,r,n)));return new rY(o[0],o[1],o[2],o[3],s,l)}("AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA="),r4=function(e){return r5.get(e)},r3=function(e,t,r){var n=r-2,a=t[n],o=t[r-1],i=t[r];if(2===o&&3===i)return"\xd7";if(2===o||3===o||4===o||2===i||3===i||4===i)return"\xf7";if(8===o&&-1!==[8,9,11,12].indexOf(i)||(11===o||9===o)&&(9===i||10===i)||(12===o||10===o)&&10===i||13===i||5===i||7===i||1===o)return"\xd7";if(13===o&&14===i){for(;5===a;)a=t[--n];if(14===a)return"\xd7"}if(15===o&&15===i){for(var s=0;15===a;)s++,a=t[--n];if(s%2==0)return"\xd7"}return"\xf7"},r6=function(e){var t=r1(e),r=t.length,n=0,a=0,o=t.map(r4);return{next:function(){if(n>=r)return{done:!0,value:null};for(var e="\xd7";n<r&&"\xd7"===(e=r3(t,o,++n)););if("\xd7"!==e||n===r){var i=r2.apply(null,t.slice(a,n));return a=n,{value:i,done:!1}}return{done:!0,value:null}}}},r8=function(e){for(var t,r=r6(e),n=[];!(t=r.next()).done;)t.value&&n.push(t.value.slice());return n},r7=function(e){if(e.createRange){var t=e.createRange();if(t.getBoundingClientRect){var r=e.createElement("boundtest");r.style.height="123px",r.style.display="block",e.body.appendChild(r),t.selectNode(r);var n=Math.round(t.getBoundingClientRect().height);if(e.body.removeChild(r),123===n)return!0}}return!1},r9=function(e){var t=e.createElement("boundtest");t.style.width="50px",t.style.display="block",t.style.fontSize="12px",t.style.letterSpacing="0px",t.style.wordSpacing="0px",e.body.appendChild(t);var r=e.createRange();t.innerHTML="function"==typeof"".repeat?"&#128104;".repeat(10):"";var n=t.firstChild,a=g(n.data).map(function(e){return x(e)}),o=0,i={},s=a.every(function(e,t){r.setStart(n,o),r.setEnd(n,o+e.length);var a=r.getBoundingClientRect();o+=e.length;var s=a.x>i.x||a.y>i.y;return i=a,0===t||s});return e.body.removeChild(t),s},ne=function(e){var t=new Image,r=e.createElement("canvas"),n=r.getContext("2d");if(!n)return!1;t.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{n.drawImage(t,0,0),r.toDataURL()}catch(e){return!1}return!0},nt=function(e){return 0===e[0]&&255===e[1]&&0===e[2]&&255===e[3]},nr=function(e){var t=e.createElement("canvas");t.width=100,t.height=100;var r=t.getContext("2d");if(!r)return Promise.reject(!1);r.fillStyle="rgb(0, 255, 0)",r.fillRect(0,0,100,100);var n=new Image,a=t.toDataURL();n.src=a;var o=nn(100,100,0,0,n);return r.fillStyle="red",r.fillRect(0,0,100,100),na(o).then(function(t){r.drawImage(t,0,0);var n=r.getImageData(0,0,100,100).data;r.fillStyle="red",r.fillRect(0,0,100,100);var o=e.createElement("div");return o.style.backgroundImage="url("+a+")",o.style.height="100px",nt(n)?na(nn(100,100,0,0,o)):Promise.reject(!1)}).then(function(e){return r.drawImage(e,0,0),nt(r.getImageData(0,0,100,100).data)}).catch(function(){return!1})},nn=function(e,t,r,n,a){var o="http://www.w3.org/2000/svg",i=document.createElementNS(o,"svg"),s=document.createElementNS(o,"foreignObject");return i.setAttributeNS(null,"width",e.toString()),i.setAttributeNS(null,"height",t.toString()),s.setAttributeNS(null,"width","100%"),s.setAttributeNS(null,"height","100%"),s.setAttributeNS(null,"x",r.toString()),s.setAttributeNS(null,"y",n.toString()),s.setAttributeNS(null,"externalResourcesRequired","true"),i.appendChild(s),s.appendChild(a),i},na=function(e){return new Promise(function(t,r){var n=new Image;n.onload=function(){return t(n)},n.onerror=r,n.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(e))})},no={get SUPPORT_RANGE_BOUNDS(){var ni=r7(document);return Object.defineProperty(no,"SUPPORT_RANGE_BOUNDS",{value:ni}),ni},get SUPPORT_WORD_BREAKING(){var ns=no.SUPPORT_RANGE_BOUNDS&&r9(document);return Object.defineProperty(no,"SUPPORT_WORD_BREAKING",{value:ns}),ns},get SUPPORT_SVG_DRAWING(){var nl=ne(document);return Object.defineProperty(no,"SUPPORT_SVG_DRAWING",{value:nl}),nl},get SUPPORT_FOREIGNOBJECT_DRAWING(){var nA="function"==typeof Array.from&&"function"==typeof window.fetch?nr(document):Promise.resolve(!1);return Object.defineProperty(no,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:nA}),nA},get SUPPORT_CORS_IMAGES(){var nc=void 0!==new Image().crossOrigin;return Object.defineProperty(no,"SUPPORT_CORS_IMAGES",{value:nc}),nc},get SUPPORT_RESPONSE_TYPE(){var nd="string"==typeof new XMLHttpRequest().responseType;return Object.defineProperty(no,"SUPPORT_RESPONSE_TYPE",{value:nd}),nd},get SUPPORT_CORS_XHR(){var nu="withCredentials"in new XMLHttpRequest;return Object.defineProperty(no,"SUPPORT_CORS_XHR",{value:nu}),nu},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){var nh=!!("undefined"!=typeof Intl&&Intl.Segmenter);return Object.defineProperty(no,"SUPPORT_NATIVE_TEXT_SEGMENTATION",{value:nh}),nh}},nf=function(e,t){this.text=e,this.bounds=t},np=function(e,t,r,n){var a=nb(t,r),o=[],i=0;return a.forEach(function(t){if(r.textDecorationLine.length||t.trim().length>0){if(no.SUPPORT_RANGE_BOUNDS){var a=ng(n,i,t.length).getClientRects();if(a.length>1){var s=nx(t),l=0;s.forEach(function(t){o.push(new nf(t,f.fromDOMRectList(e,ng(n,l+i,t.length).getClientRects()))),l+=t.length})}else o.push(new nf(t,f.fromDOMRectList(e,a)))}else{var A=n.splitText(t.length);o.push(new nf(t,nm(e,n))),n=A}}else no.SUPPORT_RANGE_BOUNDS||(n=n.splitText(t.length));i+=t.length}),o},nm=function(e,t){var r=t.ownerDocument;if(r){var n=r.createElement("html2canvaswrapper");n.appendChild(t.cloneNode(!0));var a=t.parentNode;if(a){a.replaceChild(n,t);var o=p(e,n);return n.firstChild&&a.replaceChild(n.firstChild,n),o}}return f.EMPTY},ng=function(e,t,r){var n=e.ownerDocument;if(!n)throw Error("Node has no owner document");var a=n.createRange();return a.setStart(e,t),a.setEnd(e,t+r),a},nx=function(e){return no.SUPPORT_NATIVE_TEXT_SEGMENTATION?Array.from(new Intl.Segmenter(void 0,{granularity:"grapheme"}).segment(e)).map(function(e){return e.segment}):r8(e)},nb=function(e,t){return 0!==t.letterSpacing?nx(e):no.SUPPORT_NATIVE_TEXT_SEGMENTATION?Array.from(new Intl.Segmenter(void 0,{granularity:"word"}).segment(e)).map(function(e){return e.segment}):nv(e,t)},ny=[32,160,4961,65792,65793,4153,4241],nv=function(e,t){for(var r,n=W(e,{lineBreak:t.lineBreak,wordBreak:"break-word"===t.overflowWrap?"break-word":t.wordBreak}),a=[];!(r=n.next()).done;)!function(){if(r.value){var e=g(r.value.slice()),t="";e.forEach(function(e){-1===ny.indexOf(e)?t+=x(e):(t.length&&a.push(t),a.push(x(e)),t="")}),t.length&&a.push(t)}}();return a},nw=function(e,t,r){this.text=nk(t.data,r.textTransform),this.textBounds=np(e,this.text,r,t)},nk=function(e,t){switch(t){case 1:return e.toLowerCase();case 3:return e.replace(nB,nj);case 2:return e.toUpperCase();default:return e}},nB=/(^|\s|:|-|\(|\))([a-z])/g,nj=function(e,t,r){return e.length>0?t+r.toUpperCase():e},nC=function(e){function t(t,r){var n=e.call(this,t,r)||this;return n.src=r.currentSrc||r.src,n.intrinsicWidth=r.naturalWidth,n.intrinsicHeight=r.naturalHeight,n.context.cache.addImage(n.src),n}return A(t,e),t}(rK),nN=function(e){function t(t,r){var n=e.call(this,t,r)||this;return n.canvas=r,n.intrinsicWidth=r.width,n.intrinsicHeight=r.height,n}return A(t,e),t}(rK),nS=function(e){function t(t,r){var n=e.call(this,t,r)||this,a=new XMLSerializer,o=p(t,r);return r.setAttribute("width",o.width+"px"),r.setAttribute("height",o.height+"px"),n.svg="data:image/svg+xml,"+encodeURIComponent(a.serializeToString(r)),n.intrinsicWidth=r.width.baseVal.value,n.intrinsicHeight=r.height.baseVal.value,n.context.cache.addImage(n.svg),n}return A(t,e),t}(rK),nF=function(e){function t(t,r){var n=e.call(this,t,r)||this;return n.value=r.value,n}return A(t,e),t}(rK),nE=function(e){function t(t,r){var n=e.call(this,t,r)||this;return n.start=r.start,n.reversed="boolean"==typeof r.reversed&&!0===r.reversed,n}return A(t,e),t}(rK),nO=[{type:15,flags:0,unit:"px",number:3}],nP=[{type:16,flags:0,number:50}],nI=function(e){var t=e.type===n_?Array(e.value.length+1).join(""):e.value;return 0===t.length?e.placeholder||"":t},nU="checkbox",nL="radio",n_="password",nQ=function(e){function t(t,r){var n,a=e.call(this,t,r)||this;switch(a.type=r.type.toLowerCase(),a.checked=r.checked,a.value=nI(r),(a.type===nU||a.type===nL)&&(a.styles.backgroundColor=3739148031,a.styles.borderTopColor=a.styles.borderRightColor=a.styles.borderBottomColor=a.styles.borderLeftColor=2779096575,a.styles.borderTopWidth=a.styles.borderRightWidth=a.styles.borderBottomWidth=a.styles.borderLeftWidth=1,a.styles.borderTopStyle=a.styles.borderRightStyle=a.styles.borderBottomStyle=a.styles.borderLeftStyle=1,a.styles.backgroundClip=[0],a.styles.backgroundOrigin=[0],a.bounds=(n=a.bounds).width>n.height?new f(n.left+(n.width-n.height)/2,n.top,n.height,n.height):n.width<n.height?new f(n.left,n.top+(n.height-n.width)/2,n.width,n.width):n),a.type){case nU:a.styles.borderTopRightRadius=a.styles.borderTopLeftRadius=a.styles.borderBottomRightRadius=a.styles.borderBottomLeftRadius=nO;break;case nL:a.styles.borderTopRightRadius=a.styles.borderTopLeftRadius=a.styles.borderBottomRightRadius=a.styles.borderBottomLeftRadius=nP}return a}return A(t,e),t}(rK),nT=function(e){function t(t,r){var n=e.call(this,t,r)||this,a=r.options[r.selectedIndex||0];return n.value=a&&a.text||"",n}return A(t,e),t}(rK),nD=function(e){function t(t,r){var n=e.call(this,t,r)||this;return n.value=r.value,n}return A(t,e),t}(rK),nM=function(e){function t(t,r){var n=e.call(this,t,r)||this;n.src=r.src,n.width=parseInt(r.width,10)||0,n.height=parseInt(r.height,10)||0,n.backgroundColor=n.styles.backgroundColor;try{if(r.contentWindow&&r.contentWindow.document&&r.contentWindow.document.documentElement){n.tree=nV(t,r.contentWindow.document.documentElement);var a=r.contentWindow.document.documentElement?e3(t,getComputedStyle(r.contentWindow.document.documentElement).backgroundColor):e6.TRANSPARENT,o=r.contentWindow.document.body?e3(t,getComputedStyle(r.contentWindow.document.body).backgroundColor):e6.TRANSPARENT;n.backgroundColor=eY(a)?eY(o)?n.styles.backgroundColor:o:a}}catch(e){}return n}return A(t,e),t}(rK),nH=["OL","UL","MENU"],nR=function(e,t,r,n){for(var a=t.firstChild,o=void 0;a;a=o)if(o=a.nextSibling,nz(a)&&a.data.trim().length>0)r.textNodes.push(new nw(e,a,r.styles));else if(nW(a)){if(n9(a)&&a.assignedNodes)a.assignedNodes().forEach(function(t){return nR(e,t,r,n)});else{var i=nK(e,a);!i.styles.isVisible()||(nq(a,i,n)?i.flags|=4:nG(i.styles)&&(i.flags|=2),-1!==nH.indexOf(a.tagName)&&(i.flags|=8),r.elements.push(i),a.slot,a.shadowRoot?nR(e,a.shadowRoot,i,n):n8(a)||n0(a)||n7(a)||nR(e,a,i,n))}}},nK=function(e,t){return n4(t)?new nC(e,t):n2(t)?new nN(e,t):n0(t)?new nS(e,t):nY(t)?new nF(e,t):nJ(t)?new nE(e,t):nZ(t)?new nQ(e,t):n7(t)?new nT(e,t):n8(t)?new nD(e,t):n3(t)?new nM(e,t):new rK(e,t)},nV=function(e,t){var r=nK(e,t);return r.flags|=4,nR(e,t,r,r),r},nq=function(e,t,r){return t.styles.isPositionedWithZIndex()||t.styles.opacity<1||t.styles.isTransformed()||n1(e)&&r.styles.isTransparent()},nG=function(e){return e.isPositioned()||e.isFloating()},nz=function(e){return e.nodeType===Node.TEXT_NODE},nW=function(e){return e.nodeType===Node.ELEMENT_NODE},n$=function(e){return nW(e)&&void 0!==e.style&&!nX(e)},nX=function(e){return"object"==typeof e.className},nY=function(e){return"LI"===e.tagName},nJ=function(e){return"OL"===e.tagName},nZ=function(e){return"INPUT"===e.tagName},n0=function(e){return"svg"===e.tagName},n1=function(e){return"BODY"===e.tagName},n2=function(e){return"CANVAS"===e.tagName},n5=function(e){return"VIDEO"===e.tagName},n4=function(e){return"IMG"===e.tagName},n3=function(e){return"IFRAME"===e.tagName},n6=function(e){return"STYLE"===e.tagName},n8=function(e){return"TEXTAREA"===e.tagName},n7=function(e){return"SELECT"===e.tagName},n9=function(e){return"SLOT"===e.tagName},ae=function(e){return e.tagName.indexOf("-")>0},at=function(){function e(){this.counters={}}return e.prototype.getCounterValue=function(e){var t=this.counters[e];return t&&t.length?t[t.length-1]:1},e.prototype.getCounterValues=function(e){return this.counters[e]||[]},e.prototype.pop=function(e){var t=this;e.forEach(function(e){return t.counters[e].pop()})},e.prototype.parse=function(e){var t=this,r=e.counterIncrement,n=e.counterReset,a=!0;null!==r&&r.forEach(function(e){var r=t.counters[e.counter];r&&0!==e.increment&&(a=!1,r.length||r.push(1),r[Math.max(0,r.length-1)]+=e.increment)});var o=[];return a&&n.forEach(function(e){var r=t.counters[e.counter];o.push(e.counter),r||(r=t.counters[e.counter]=[]),r.push(e.reset)}),o},e}(),ar={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},an={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},aa={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},ao={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},ai=function(e,t,r,n,a,o){return e<t||e>r?ap(e,a,o.length>0):n.integers.reduce(function(t,r,a){for(;e>=r;)e-=r,t+=n.values[a];return t},"")+o},as=function(e,t,r,n){var a="";do!r&&e--,a=n(e)+a,e/=t;while(e*t>=t);return a},al=function(e,t,r,n,a){var o=r-t+1;return(e<0?"-":"")+(as(Math.abs(e),o,n,function(e){return x(Math.floor(e%o)+t)})+a)},aA=function(e,t,r){void 0===r&&(r=". ");var n=t.length;return as(Math.abs(e),n,!1,function(e){return t[Math.floor(e%n)]})+r},ac=function(e,t,r,n,a,o){if(e<-9999||e>9999)return ap(e,4,a.length>0);var i=Math.abs(e),s=a;if(0===i)return t[0]+s;for(var l=0;i>0&&l<=4;l++){var A=i%10;0===A&&rC(o,1)&&""!==s?s=t[A]+s:A>1||1===A&&0===l||1===A&&1===l&&rC(o,2)||1===A&&1===l&&rC(o,4)&&e>100||1===A&&l>1&&rC(o,8)?s=t[A]+(l>0?r[l-1]:"")+s:1===A&&l>0&&(s=r[l-1]+s),i=Math.floor(i/10)}return(e<0?n:"")+s},ad="",au="",ah="",af="",ap=function(e,t,r){var n=r?". ":"",a=r?"":"",o=r?", ":"",i=r?" ":"";switch(t){case 0:return""+i;case 1:return""+i;case 2:return""+i;case 5:var s=al(e,48,57,!0,n);return s.length<4?"0"+s:s;case 4:return aA(e,"",a);case 6:return ai(e,1,3999,ar,3,n).toLowerCase();case 7:return ai(e,1,3999,ar,3,n);case 8:return al(e,945,969,!1,n);case 9:return al(e,97,122,!1,n);case 10:return al(e,65,90,!1,n);case 11:return al(e,1632,1641,!0,n);case 12:case 49:return ai(e,1,9999,an,3,n);case 35:return ai(e,1,9999,an,3,n).toLowerCase();case 13:return al(e,2534,2543,!0,n);case 14:case 30:return al(e,6112,6121,!0,n);case 15:return aA(e,"",a);case 16:return aA(e,"",a);case 17:case 48:return ac(e,"",ad,"",a,14);case 47:return ac(e,"",au,"",a,15);case 42:return ac(e,"",ad,"",a,14);case 41:return ac(e,"",au,"",a,15);case 26:return ac(e,"","",ah,a,0);case 25:return ac(e,"","",ah,a,7);case 31:return ac(e,"","",af,o,7);case 33:return ac(e,"","",af,o,0);case 32:return ac(e,"","",af,o,7);case 18:return al(e,2406,2415,!0,n);case 20:return ai(e,1,19999,ao,3,n);case 21:return al(e,2790,2799,!0,n);case 22:return al(e,2662,2671,!0,n);case 22:return ai(e,1,10999,aa,3,n);case 23:return aA(e,"");case 24:return aA(e,"");case 27:return al(e,3302,3311,!0,n);case 28:return aA(e,"",a);case 29:return aA(e,"",a);case 34:return al(e,3792,3801,!0,n);case 37:return al(e,6160,6169,!0,n);case 38:return al(e,4160,4169,!0,n);case 39:return al(e,2918,2927,!0,n);case 40:return al(e,1776,1785,!0,n);case 43:return al(e,3046,3055,!0,n);case 44:return al(e,3174,3183,!0,n);case 45:return al(e,3664,3673,!0,n);case 46:return al(e,3872,3881,!0,n);default:return al(e,48,57,!0,n)}},am="data-html2canvas-ignore",ag=function(){function e(e,t,r){if(this.context=e,this.options=r,this.scrolledElements=[],this.referenceElement=t,this.counters=new at,this.quoteDepth=0,!t.ownerDocument)throw Error("Cloned element does not have an owner document");this.documentElement=this.cloneNode(t.ownerDocument.documentElement,!1)}return e.prototype.toIFrame=function(e,t){var r=this,n=ax(e,t);if(!n.contentWindow)return Promise.reject("Unable to find iframe window");var a=e.defaultView.pageXOffset,o=e.defaultView.pageYOffset,i=n.contentWindow,s=i.document,l=av(n).then(function(){return d(r,void 0,void 0,function(){var e,r;return u(this,function(a){switch(a.label){case 0:if(this.scrolledElements.forEach(aC),i&&(i.scrollTo(t.left,t.top),/(iPad|iPhone|iPod)/g.test(navigator.userAgent)&&(i.scrollY!==t.top||i.scrollX!==t.left)&&(this.context.logger.warn("Unable to restore scroll position for cloned document"),this.context.windowBounds=this.context.windowBounds.add(i.scrollX-t.left,i.scrollY-t.top,0,0))),e=this.options.onclone,void 0===(r=this.clonedReferenceElement))return[2,Promise.reject("Error finding the "+this.referenceElement.nodeName+" in the cloned document")];if(!(s.fonts&&s.fonts.ready))return[3,2];return[4,s.fonts.ready];case 1:a.sent(),a.label=2;case 2:if(!/(AppleWebKit)/g.test(navigator.userAgent))return[3,4];return[4,ay(s)];case 3:a.sent(),a.label=4;case 4:if("function"==typeof e)return[2,Promise.resolve().then(function(){return e(s,r)}).then(function(){return n})];return[2,n]}})})});return s.open(),s.write(aB(document.doctype)+"<html></html>"),aj(this.referenceElement.ownerDocument,a,o),s.replaceChild(s.adoptNode(this.documentElement),s.documentElement),s.close(),l},e.prototype.createElementClone=function(e){if(rR(e,2),n2(e))return this.createCanvasClone(e);if(n5(e))return this.createVideoClone(e);if(n6(e))return this.createStyleClone(e);var t=e.cloneNode(!1);return(n4(t)&&(n4(e)&&e.currentSrc&&e.currentSrc!==e.src&&(t.src=e.currentSrc,t.srcset=""),"lazy"===t.loading&&(t.loading="eager")),ae(t))?this.createCustomElementClone(t):t},e.prototype.createCustomElementClone=function(e){var t=document.createElement("html2canvascustomelement");return ak(e.style,t),t},e.prototype.createStyleClone=function(e){try{var t=e.sheet;if(t&&t.cssRules){var r=[].slice.call(t.cssRules,0).reduce(function(e,t){return t&&"string"==typeof t.cssText?e+t.cssText:e},""),n=e.cloneNode(!1);return n.textContent=r,n}}catch(e){if(this.context.logger.error("Unable to access cssRules property",e),"SecurityError"!==e.name)throw e}return e.cloneNode(!1)},e.prototype.createCanvasClone=function(e){if(this.options.inlineImages&&e.ownerDocument){var t,r=e.ownerDocument.createElement("img");try{return r.src=e.toDataURL(),r}catch(t){this.context.logger.info("Unable to inline canvas contents, canvas is tainted",e)}}var n=e.cloneNode(!1);try{n.width=e.width,n.height=e.height;var a=e.getContext("2d"),o=n.getContext("2d");if(o){if(!this.options.allowTaint&&a)o.putImageData(a.getImageData(0,0,e.width,e.height),0,0);else{var i=null!==(t=e.getContext("webgl2"))&&void 0!==t?t:e.getContext("webgl");if(i){var s=i.getContextAttributes();(null==s?void 0:s.preserveDrawingBuffer)===!1&&this.context.logger.warn("Unable to clone WebGL context as it has preserveDrawingBuffer=false",e)}o.drawImage(e,0,0)}}}catch(t){this.context.logger.info("Unable to clone canvas as it is tainted",e)}return n},e.prototype.createVideoClone=function(e){var t=e.ownerDocument.createElement("canvas");t.width=e.offsetWidth,t.height=e.offsetHeight;var r=t.getContext("2d");try{return r&&(r.drawImage(e,0,0,t.width,t.height),this.options.allowTaint||r.getImageData(0,0,t.width,t.height)),t}catch(t){this.context.logger.info("Unable to clone video as it is tainted",e)}var n=e.ownerDocument.createElement("canvas");return n.width=e.offsetWidth,n.height=e.offsetHeight,n},e.prototype.appendChildNode=function(e,t,r){(!nW(t)||"SCRIPT"!==t.tagName&&!t.hasAttribute(am)&&("function"!=typeof this.options.ignoreElements||!this.options.ignoreElements(t)))&&(this.options.copyStyles&&nW(t)&&n6(t)||e.appendChild(this.cloneNode(t,r)))},e.prototype.cloneChildNodes=function(e,t,r){for(var n=this,a=e.shadowRoot?e.shadowRoot.firstChild:e.firstChild;a;a=a.nextSibling)if(nW(a)&&n9(a)&&"function"==typeof a.assignedNodes){var o=a.assignedNodes();o.length&&o.forEach(function(e){return n.appendChildNode(t,e,r)})}else this.appendChildNode(t,a,r)},e.prototype.cloneNode=function(e,t){if(nz(e))return document.createTextNode(e.data);if(!e.ownerDocument)return e.cloneNode(!1);var r=e.ownerDocument.defaultView;if(r&&nW(e)&&(n$(e)||nX(e))){var n=this.createElementClone(e);n.style.transitionProperty="none";var a=r.getComputedStyle(e),o=r.getComputedStyle(e,":before"),s=r.getComputedStyle(e,":after");this.referenceElement===e&&n$(n)&&(this.clonedReferenceElement=n),n1(n)&&aE(n);var l=this.counters.parse(new rD(this.context,a)),A=this.resolvePseudoContent(e,n,o,i.BEFORE);ae(e)&&(t=!0),n5(e)||this.cloneChildNodes(e,n,t),A&&n.insertBefore(A,n.firstChild);var c=this.resolvePseudoContent(e,n,s,i.AFTER);return c&&n.appendChild(c),this.counters.pop(l),(a&&(this.options.copyStyles||nX(e))&&!n3(e)||t)&&ak(a,n),(0!==e.scrollTop||0!==e.scrollLeft)&&this.scrolledElements.push([n,e.scrollLeft,e.scrollTop]),(n8(e)||n7(e))&&(n8(n)||n7(n))&&(n.value=e.value),n}return e.cloneNode(!1)},e.prototype.resolvePseudoContent=function(e,t,r,n){var a=this;if(r){var o=r.content,s=t.ownerDocument;if(s&&o&&"none"!==o&&"-moz-alt-content"!==o&&"none"!==r.display){this.counters.parse(new rD(this.context,r));var l=new rT(this.context,r),A=s.createElement("html2canvaspseudoelement");ak(r,A),l.content.forEach(function(t){if(0===t.type)A.appendChild(s.createTextNode(t.value));else if(22===t.type){var r=s.createElement("img");r.src=t.value,r.style.opacity="1",A.appendChild(r)}else if(18===t.type){if("attr"===t.name){var n=t.values.filter(eF);n.length&&A.appendChild(s.createTextNode(e.getAttribute(n[0].value)||""))}else if("counter"===t.name){var o=t.values.filter(eI),i=o[0],c=o[1];if(i&&eF(i)){var d=a.counters.getCounterValue(i.value),u=c&&eF(c)?t2.parse(a.context,c.value):3;A.appendChild(s.createTextNode(ap(d,u,!1)))}}else if("counters"===t.name){var h=t.values.filter(eI),i=h[0],f=h[1],c=h[2];if(i&&eF(i)){var p=a.counters.getCounterValues(i.value),m=c&&eF(c)?t2.parse(a.context,c.value):3,g=f&&0===f.type?f.value:"",x=p.map(function(e){return ap(e,m,!1)}).join(g);A.appendChild(s.createTextNode(x))}}}else if(20===t.type)switch(t.value){case"open-quote":A.appendChild(s.createTextNode(rP(l.quotes,a.quoteDepth++,!0)));break;case"close-quote":A.appendChild(s.createTextNode(rP(l.quotes,--a.quoteDepth,!1)));break;default:A.appendChild(s.createTextNode(t.value))}}),A.className=aN+" "+aS;var c=n===i.BEFORE?" "+aN:" "+aS;return nX(t)?t.className.baseValue+=c:t.className+=c,A}}},e.destroy=function(e){return!!e.parentNode&&(e.parentNode.removeChild(e),!0)},e}();!function(e){e[e.BEFORE=0]="BEFORE",e[e.AFTER=1]="AFTER"}(i||(i={}));var ax=function(e,t){var r=e.createElement("iframe");return r.className="html2canvas-container",r.style.visibility="hidden",r.style.position="fixed",r.style.left="-10000px",r.style.top="0px",r.style.border="0",r.width=t.width.toString(),r.height=t.height.toString(),r.scrolling="no",r.setAttribute(am,"true"),e.body.appendChild(r),r},ab=function(e){return new Promise(function(t){if(e.complete||!e.src){t();return}e.onload=t,e.onerror=t})},ay=function(e){return Promise.all([].slice.call(e.images,0).map(ab))},av=function(e){return new Promise(function(t,r){var n=e.contentWindow;if(!n)return r("No window assigned for iframe");var a=n.document;n.onload=e.onload=function(){n.onload=e.onload=null;var r=setInterval(function(){a.body.childNodes.length>0&&"complete"===a.readyState&&(clearInterval(r),t(e))},50)}})},aw=["all","d","content"],ak=function(e,t){for(var r=e.length-1;r>=0;r--){var n=e.item(r);-1===aw.indexOf(n)&&t.style.setProperty(n,e.getPropertyValue(n))}return t},aB=function(e){var t="";return e&&(t+="<!DOCTYPE ",e.name&&(t+=e.name),e.internalSubset&&(t+=e.internalSubset),e.publicId&&(t+='"'+e.publicId+'"'),e.systemId&&(t+='"'+e.systemId+'"'),t+=">"),t},aj=function(e,t,r){e&&e.defaultView&&(t!==e.defaultView.pageXOffset||r!==e.defaultView.pageYOffset)&&e.defaultView.scrollTo(t,r)},aC=function(e){var t=e[0],r=e[1],n=e[2];t.scrollLeft=r,t.scrollTop=n},aN="___html2canvas___pseudoelement_before",aS="___html2canvas___pseudoelement_after",aF='{\n    content: "" !important;\n    display: none !important;\n}',aE=function(e){aO(e,"."+aN+":before"+aF+"\n         ."+aS+":after"+aF)},aO=function(e,t){var r=e.ownerDocument;if(r){var n=r.createElement("style");n.textContent=t,e.appendChild(n)}},aP=function(){function e(){}return e.getOrigin=function(t){var r=e._link;return r?(r.href=t,r.href=r.href,r.protocol+r.hostname+r.port):"about:blank"},e.isSameOrigin=function(t){return e.getOrigin(t)===e._origin},e.setContext=function(t){e._link=t.document.createElement("a"),e._origin=e.getOrigin(t.location.href)},e._origin="about:blank",e}(),aI=function(){function e(e,t){this.context=e,this._options=t,this._cache={}}return e.prototype.addImage=function(e){var t=Promise.resolve();return this.has(e)||(aM(e)||aQ(e))&&(this._cache[e]=this.loadImage(e)).catch(function(){}),t},e.prototype.match=function(e){return this._cache[e]},e.prototype.loadImage=function(e){return d(this,void 0,void 0,function(){var t,r,n,a,o=this;return u(this,function(i){switch(i.label){case 0:if(t=aP.isSameOrigin(e),r=!aT(e)&&!0===this._options.useCORS&&no.SUPPORT_CORS_IMAGES&&!t,n=!aT(e)&&!t&&!aM(e)&&"string"==typeof this._options.proxy&&no.SUPPORT_CORS_XHR&&!r,!t&&!1===this._options.allowTaint&&!aT(e)&&!aM(e)&&!n&&!r)return[2];if(a=e,!n)return[3,2];return[4,this.proxy(a)];case 1:a=i.sent(),i.label=2;case 2:return this.context.logger.debug("Added image "+e.substring(0,256)),[4,new Promise(function(e,t){var n=new Image;n.onload=function(){return e(n)},n.onerror=t,(aD(a)||r)&&(n.crossOrigin="anonymous"),n.src=a,!0===n.complete&&setTimeout(function(){return e(n)},500),o._options.imageTimeout>0&&setTimeout(function(){return t("Timed out ("+o._options.imageTimeout+"ms) loading image")},o._options.imageTimeout)})];case 3:return[2,i.sent()]}})})},e.prototype.has=function(e){return void 0!==this._cache[e]},e.prototype.keys=function(){return Promise.resolve(Object.keys(this._cache))},e.prototype.proxy=function(e){var t=this,r=this._options.proxy;if(!r)throw Error("No proxy defined");var n=e.substring(0,256);return new Promise(function(a,o){var i=no.SUPPORT_RESPONSE_TYPE?"blob":"text",s=new XMLHttpRequest;s.onload=function(){if(200===s.status){if("text"===i)a(s.response);else{var e=new FileReader;e.addEventListener("load",function(){return a(e.result)},!1),e.addEventListener("error",function(e){return o(e)},!1),e.readAsDataURL(s.response)}}else o("Failed to proxy resource "+n+" with status code "+s.status)},s.onerror=o;var l=r.indexOf("?")>-1?"&":"?";if(s.open("GET",""+r+l+"url="+encodeURIComponent(e)+"&responseType="+i),"text"!==i&&s instanceof XMLHttpRequest&&(s.responseType=i),t._options.imageTimeout){var A=t._options.imageTimeout;s.timeout=A,s.ontimeout=function(){return o("Timed out ("+A+"ms) proxying "+n)}}s.send()})},e}(),aU=/^data:image\/svg\+xml/i,aL=/^data:image\/.*;base64,/i,a_=/^data:image\/.*/i,aQ=function(e){return no.SUPPORT_SVG_DRAWING||!aH(e)},aT=function(e){return a_.test(e)},aD=function(e){return aL.test(e)},aM=function(e){return"blob"===e.substr(0,4)},aH=function(e){return"svg"===e.substr(-3).toLowerCase()||aU.test(e)},aR=function(){function e(e,t){this.type=0,this.x=e,this.y=t}return e.prototype.add=function(t,r){return new e(this.x+t,this.y+r)},e}(),aK=function(e,t,r){return new aR(e.x+(t.x-e.x)*r,e.y+(t.y-e.y)*r)},aV=function(){function e(e,t,r,n){this.type=1,this.start=e,this.startControl=t,this.endControl=r,this.end=n}return e.prototype.subdivide=function(t,r){var n=aK(this.start,this.startControl,t),a=aK(this.startControl,this.endControl,t),o=aK(this.endControl,this.end,t),i=aK(n,a,t),s=aK(a,o,t),l=aK(i,s,t);return r?new e(this.start,n,i,l):new e(l,s,o,this.end)},e.prototype.add=function(t,r){return new e(this.start.add(t,r),this.startControl.add(t,r),this.endControl.add(t,r),this.end.add(t,r))},e.prototype.reverse=function(){return new e(this.end,this.endControl,this.startControl,this.start)},e}(),aq=function(e){return 1===e.type},aG=function(e){var t=e.styles,r=e.bounds,n=eR(t.borderTopLeftRadius,r.width,r.height),a=n[0],o=n[1],i=eR(t.borderTopRightRadius,r.width,r.height),l=i[0],A=i[1],c=eR(t.borderBottomRightRadius,r.width,r.height),d=c[0],u=c[1],h=eR(t.borderBottomLeftRadius,r.width,r.height),f=h[0],p=h[1],m=[];m.push((a+l)/r.width),m.push((f+d)/r.width),m.push((o+p)/r.height),m.push((A+u)/r.height);var g=Math.max.apply(Math,m);g>1&&(a/=g,o/=g,l/=g,A/=g,d/=g,u/=g,f/=g,p/=g);var x=r.width-l,b=r.height-u,y=r.width-d,v=r.height-p,w=t.borderTopWidth,k=t.borderRightWidth,B=t.borderBottomWidth,j=t.borderLeftWidth,C=eK(t.paddingTop,e.bounds.width),N=eK(t.paddingRight,e.bounds.width),S=eK(t.paddingBottom,e.bounds.width),F=eK(t.paddingLeft,e.bounds.width);this.topLeftBorderDoubleOuterBox=a>0||o>0?az(r.left+j/3,r.top+w/3,a-j/3,o-w/3,s.TOP_LEFT):new aR(r.left+j/3,r.top+w/3),this.topRightBorderDoubleOuterBox=a>0||o>0?az(r.left+x,r.top+w/3,l-k/3,A-w/3,s.TOP_RIGHT):new aR(r.left+r.width-k/3,r.top+w/3),this.bottomRightBorderDoubleOuterBox=d>0||u>0?az(r.left+y,r.top+b,d-k/3,u-B/3,s.BOTTOM_RIGHT):new aR(r.left+r.width-k/3,r.top+r.height-B/3),this.bottomLeftBorderDoubleOuterBox=f>0||p>0?az(r.left+j/3,r.top+v,f-j/3,p-B/3,s.BOTTOM_LEFT):new aR(r.left+j/3,r.top+r.height-B/3),this.topLeftBorderDoubleInnerBox=a>0||o>0?az(r.left+2*j/3,r.top+2*w/3,a-2*j/3,o-2*w/3,s.TOP_LEFT):new aR(r.left+2*j/3,r.top+2*w/3),this.topRightBorderDoubleInnerBox=a>0||o>0?az(r.left+x,r.top+2*w/3,l-2*k/3,A-2*w/3,s.TOP_RIGHT):new aR(r.left+r.width-2*k/3,r.top+2*w/3),this.bottomRightBorderDoubleInnerBox=d>0||u>0?az(r.left+y,r.top+b,d-2*k/3,u-2*B/3,s.BOTTOM_RIGHT):new aR(r.left+r.width-2*k/3,r.top+r.height-2*B/3),this.bottomLeftBorderDoubleInnerBox=f>0||p>0?az(r.left+2*j/3,r.top+v,f-2*j/3,p-2*B/3,s.BOTTOM_LEFT):new aR(r.left+2*j/3,r.top+r.height-2*B/3),this.topLeftBorderStroke=a>0||o>0?az(r.left+j/2,r.top+w/2,a-j/2,o-w/2,s.TOP_LEFT):new aR(r.left+j/2,r.top+w/2),this.topRightBorderStroke=a>0||o>0?az(r.left+x,r.top+w/2,l-k/2,A-w/2,s.TOP_RIGHT):new aR(r.left+r.width-k/2,r.top+w/2),this.bottomRightBorderStroke=d>0||u>0?az(r.left+y,r.top+b,d-k/2,u-B/2,s.BOTTOM_RIGHT):new aR(r.left+r.width-k/2,r.top+r.height-B/2),this.bottomLeftBorderStroke=f>0||p>0?az(r.left+j/2,r.top+v,f-j/2,p-B/2,s.BOTTOM_LEFT):new aR(r.left+j/2,r.top+r.height-B/2),this.topLeftBorderBox=a>0||o>0?az(r.left,r.top,a,o,s.TOP_LEFT):new aR(r.left,r.top),this.topRightBorderBox=l>0||A>0?az(r.left+x,r.top,l,A,s.TOP_RIGHT):new aR(r.left+r.width,r.top),this.bottomRightBorderBox=d>0||u>0?az(r.left+y,r.top+b,d,u,s.BOTTOM_RIGHT):new aR(r.left+r.width,r.top+r.height),this.bottomLeftBorderBox=f>0||p>0?az(r.left,r.top+v,f,p,s.BOTTOM_LEFT):new aR(r.left,r.top+r.height),this.topLeftPaddingBox=a>0||o>0?az(r.left+j,r.top+w,Math.max(0,a-j),Math.max(0,o-w),s.TOP_LEFT):new aR(r.left+j,r.top+w),this.topRightPaddingBox=l>0||A>0?az(r.left+Math.min(x,r.width-k),r.top+w,x>r.width+k?0:Math.max(0,l-k),Math.max(0,A-w),s.TOP_RIGHT):new aR(r.left+r.width-k,r.top+w),this.bottomRightPaddingBox=d>0||u>0?az(r.left+Math.min(y,r.width-j),r.top+Math.min(b,r.height-B),Math.max(0,d-k),Math.max(0,u-B),s.BOTTOM_RIGHT):new aR(r.left+r.width-k,r.top+r.height-B),this.bottomLeftPaddingBox=f>0||p>0?az(r.left+j,r.top+Math.min(v,r.height-B),Math.max(0,f-j),Math.max(0,p-B),s.BOTTOM_LEFT):new aR(r.left+j,r.top+r.height-B),this.topLeftContentBox=a>0||o>0?az(r.left+j+F,r.top+w+C,Math.max(0,a-(j+F)),Math.max(0,o-(w+C)),s.TOP_LEFT):new aR(r.left+j+F,r.top+w+C),this.topRightContentBox=l>0||A>0?az(r.left+Math.min(x,r.width+j+F),r.top+w+C,x>r.width+j+F?0:l-j+F,A-(w+C),s.TOP_RIGHT):new aR(r.left+r.width-(k+N),r.top+w+C),this.bottomRightContentBox=d>0||u>0?az(r.left+Math.min(y,r.width-(j+F)),r.top+Math.min(b,r.height+w+C),Math.max(0,d-(k+N)),u-(B+S),s.BOTTOM_RIGHT):new aR(r.left+r.width-(k+N),r.top+r.height-(B+S)),this.bottomLeftContentBox=f>0||p>0?az(r.left+j+F,r.top+v,Math.max(0,f-(j+F)),p-(B+S),s.BOTTOM_LEFT):new aR(r.left+j+F,r.top+r.height-(B+S))};!function(e){e[e.TOP_LEFT=0]="TOP_LEFT",e[e.TOP_RIGHT=1]="TOP_RIGHT",e[e.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",e[e.BOTTOM_LEFT=3]="BOTTOM_LEFT"}(s||(s={}));var az=function(e,t,r,n,a){var o=(Math.sqrt(2)-1)/3*4,i=r*o,l=n*o,A=e+r,c=t+n;switch(a){case s.TOP_LEFT:return new aV(new aR(e,c),new aR(e,c-l),new aR(A-i,t),new aR(A,t));case s.TOP_RIGHT:return new aV(new aR(e,t),new aR(e+i,t),new aR(A,c-l),new aR(A,c));case s.BOTTOM_RIGHT:return new aV(new aR(A,t),new aR(A,t+l),new aR(e+i,c),new aR(e,c));case s.BOTTOM_LEFT:default:return new aV(new aR(A,c),new aR(A-i,c),new aR(e,t+l),new aR(e,t))}},aW=function(e){return[e.topLeftBorderBox,e.topRightBorderBox,e.bottomRightBorderBox,e.bottomLeftBorderBox]},a$=function(e){return[e.topLeftPaddingBox,e.topRightPaddingBox,e.bottomRightPaddingBox,e.bottomLeftPaddingBox]},aX=function(e,t,r){this.offsetX=e,this.offsetY=t,this.matrix=r,this.type=0,this.target=6},aY=function(e,t){this.path=e,this.target=t,this.type=1},aJ=function(e){this.opacity=e,this.type=2,this.target=6},aZ=function(e){return 1===e.type},a0=function(e,t){return e.length===t.length&&e.some(function(e,r){return e===t[r]})},a1=function(e){this.element=e,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]},a2=function(){function e(e,t){if(this.container=e,this.parent=t,this.effects=[],this.curves=new aG(this.container),this.container.styles.opacity<1&&this.effects.push(new aJ(this.container.styles.opacity)),null!==this.container.styles.transform){var r=this.container.bounds.left+this.container.styles.transformOrigin[0].number,n=this.container.bounds.top+this.container.styles.transformOrigin[1].number,a=this.container.styles.transform;this.effects.push(new aX(r,n,a))}if(0!==this.container.styles.overflowX){var o=aW(this.curves),i=a$(this.curves);a0(o,i)?this.effects.push(new aY(o,6)):(this.effects.push(new aY(o,2)),this.effects.push(new aY(i,4)))}}return e.prototype.getEffects=function(e){for(var t=-1===[2,3].indexOf(this.container.styles.position),r=this.parent,n=this.effects.slice(0);r;){var a=r.effects.filter(function(e){return!aZ(e)});if(t||0!==r.container.styles.position||!r.parent){if(n.unshift.apply(n,a),t=-1===[2,3].indexOf(r.container.styles.position),0!==r.container.styles.overflowX){var o=aW(r.curves),i=a$(r.curves);a0(o,i)||n.unshift(new aY(i,6))}}else n.unshift.apply(n,a);r=r.parent}return n.filter(function(t){return rC(t.target,e)})},e}(),a5=function(e,t,r,n){e.container.elements.forEach(function(a){var o=rC(a.flags,4),i=rC(a.flags,2),s=new a2(a,e);rC(a.styles.display,2048)&&n.push(s);var l=rC(a.flags,8)?[]:n;if(o||i){var A=o||a.styles.isPositioned()?r:t,c=new a1(s);if(a.styles.isPositioned()||a.styles.opacity<1||a.styles.isTransformed()){var d=a.styles.zIndex.order;if(d<0){var u=0;A.negativeZIndex.some(function(e,t){if(d>e.element.container.styles.zIndex.order)u=t;else if(u>0)return!0;return!1}),A.negativeZIndex.splice(u,0,c)}else if(d>0){var h=0;A.positiveZIndex.some(function(e,t){if(d>=e.element.container.styles.zIndex.order)h=t+1;else if(h>0)return!0;return!1}),A.positiveZIndex.splice(h,0,c)}else A.zeroOrAutoZIndexOrTransformedOrOpacity.push(c)}else a.styles.isFloating()?A.nonPositionedFloats.push(c):A.nonPositionedInlineLevel.push(c);a5(s,c,o?c:r,l)}else a.styles.isInlineLevel()?t.inlineLevel.push(s):t.nonInlineLevel.push(s),a5(s,t,r,l);rC(a.flags,8)&&a4(a,l)})},a4=function(e,t){for(var r=e instanceof nE?e.start:1,n=e instanceof nE&&e.reversed,a=0;a<t.length;a++){var o=t[a];o.container instanceof nF&&"number"==typeof o.container.value&&0!==o.container.value&&(r=o.container.value),o.listValue=ap(r,o.container.styles.listStyleType,!0),r+=n?-1:1}},a3=function(e){var t=new a2(e,null),r=new a1(t),n=[];return a5(t,r,r,n),a4(t.container,n),r},a6=function(e,t){switch(t){case 0:return ot(e.topLeftBorderBox,e.topLeftPaddingBox,e.topRightBorderBox,e.topRightPaddingBox);case 1:return ot(e.topRightBorderBox,e.topRightPaddingBox,e.bottomRightBorderBox,e.bottomRightPaddingBox);case 2:return ot(e.bottomRightBorderBox,e.bottomRightPaddingBox,e.bottomLeftBorderBox,e.bottomLeftPaddingBox);default:return ot(e.bottomLeftBorderBox,e.bottomLeftPaddingBox,e.topLeftBorderBox,e.topLeftPaddingBox)}},a8=function(e,t){switch(t){case 0:return ot(e.topLeftBorderBox,e.topLeftBorderDoubleOuterBox,e.topRightBorderBox,e.topRightBorderDoubleOuterBox);case 1:return ot(e.topRightBorderBox,e.topRightBorderDoubleOuterBox,e.bottomRightBorderBox,e.bottomRightBorderDoubleOuterBox);case 2:return ot(e.bottomRightBorderBox,e.bottomRightBorderDoubleOuterBox,e.bottomLeftBorderBox,e.bottomLeftBorderDoubleOuterBox);default:return ot(e.bottomLeftBorderBox,e.bottomLeftBorderDoubleOuterBox,e.topLeftBorderBox,e.topLeftBorderDoubleOuterBox)}},a7=function(e,t){switch(t){case 0:return ot(e.topLeftBorderDoubleInnerBox,e.topLeftPaddingBox,e.topRightBorderDoubleInnerBox,e.topRightPaddingBox);case 1:return ot(e.topRightBorderDoubleInnerBox,e.topRightPaddingBox,e.bottomRightBorderDoubleInnerBox,e.bottomRightPaddingBox);case 2:return ot(e.bottomRightBorderDoubleInnerBox,e.bottomRightPaddingBox,e.bottomLeftBorderDoubleInnerBox,e.bottomLeftPaddingBox);default:return ot(e.bottomLeftBorderDoubleInnerBox,e.bottomLeftPaddingBox,e.topLeftBorderDoubleInnerBox,e.topLeftPaddingBox)}},a9=function(e,t){switch(t){case 0:return oe(e.topLeftBorderStroke,e.topRightBorderStroke);case 1:return oe(e.topRightBorderStroke,e.bottomRightBorderStroke);case 2:return oe(e.bottomRightBorderStroke,e.bottomLeftBorderStroke);default:return oe(e.bottomLeftBorderStroke,e.topLeftBorderStroke)}},oe=function(e,t){var r=[];return aq(e)?r.push(e.subdivide(.5,!1)):r.push(e),aq(t)?r.push(t.subdivide(.5,!0)):r.push(t),r},ot=function(e,t,r,n){var a=[];return aq(e)?a.push(e.subdivide(.5,!1)):a.push(e),aq(r)?a.push(r.subdivide(.5,!0)):a.push(r),aq(n)?a.push(n.subdivide(.5,!0).reverse()):a.push(n),aq(t)?a.push(t.subdivide(.5,!1).reverse()):a.push(t),a},or=function(e){var t=e.bounds,r=e.styles;return t.add(r.borderLeftWidth,r.borderTopWidth,-(r.borderRightWidth+r.borderLeftWidth),-(r.borderTopWidth+r.borderBottomWidth))},on=function(e){var t=e.styles,r=e.bounds,n=eK(t.paddingLeft,r.width),a=eK(t.paddingRight,r.width),o=eK(t.paddingTop,r.width),i=eK(t.paddingBottom,r.width);return r.add(n+t.borderLeftWidth,o+t.borderTopWidth,-(t.borderRightWidth+t.borderLeftWidth+n+a),-(t.borderTopWidth+t.borderBottomWidth+o+i))},oa=function(e,t,r){var n,a,o=0===(n=ol(e.styles.backgroundOrigin,t))?e.bounds:2===n?on(e):or(e),i=0===(a=ol(e.styles.backgroundClip,t))?e.bounds:2===a?on(e):or(e),s=os(ol(e.styles.backgroundSize,t),r,o),l=s[0],A=s[1],c=eR(ol(e.styles.backgroundPosition,t),o.width-l,o.height-A);return[oA(ol(e.styles.backgroundRepeat,t),c,s,o,i),Math.round(o.left+c[0]),Math.round(o.top+c[1]),l,A]},oo=function(e){return eF(e)&&e.value===n.AUTO},oi=function(e){return"number"==typeof e},os=function(e,t,r){var a=t[0],o=t[1],i=t[2],s=e[0],l=e[1];if(!s)return[0,0];if(eQ(s)&&l&&eQ(l))return[eK(s,r.width),eK(l,r.height)];var A=oi(i);if(eF(s)&&(s.value===n.CONTAIN||s.value===n.COVER))return oi(i)?r.width/r.height<i!=(s.value===n.COVER)?[r.width,r.width/i]:[r.height*i,r.height]:[r.width,r.height];var c=oi(a),d=oi(o),u=c||d;if(oo(s)&&(!l||oo(l)))return c&&d?[a,o]:A||u?u&&A?[c?a:o*i,d?o:a/i]:[c?a:r.width,d?o:r.height]:[r.width,r.height];if(A){var h=0,f=0;return eQ(s)?h=eK(s,r.width):eQ(l)&&(f=eK(l,r.height)),oo(s)?h=f*i:(!l||oo(l))&&(f=h/i),[h,f]}var p=null,m=null;if(eQ(s)?p=eK(s,r.width):l&&eQ(l)&&(m=eK(l,r.height)),null!==p&&(!l||oo(l))&&(m=c&&d?p/a*o:r.height),null!==m&&oo(s)&&(p=c&&d?m/o*a:r.width),null!==p&&null!==m)return[p,m];throw Error("Unable to calculate background-size for element")},ol=function(e,t){var r=e[t];return void 0===r?e[0]:r},oA=function(e,t,r,n,a){var o=t[0],i=t[1],s=r[0],l=r[1];switch(e){case 2:return[new aR(Math.round(n.left),Math.round(n.top+i)),new aR(Math.round(n.left+n.width),Math.round(n.top+i)),new aR(Math.round(n.left+n.width),Math.round(l+n.top+i)),new aR(Math.round(n.left),Math.round(l+n.top+i))];case 3:return[new aR(Math.round(n.left+o),Math.round(n.top)),new aR(Math.round(n.left+o+s),Math.round(n.top)),new aR(Math.round(n.left+o+s),Math.round(n.height+n.top)),new aR(Math.round(n.left+o),Math.round(n.height+n.top))];case 1:return[new aR(Math.round(n.left+o),Math.round(n.top+i)),new aR(Math.round(n.left+o+s),Math.round(n.top+i)),new aR(Math.round(n.left+o+s),Math.round(n.top+i+l)),new aR(Math.round(n.left+o),Math.round(n.top+i+l))];default:return[new aR(Math.round(a.left),Math.round(a.top)),new aR(Math.round(a.left+a.width),Math.round(a.top)),new aR(Math.round(a.left+a.width),Math.round(a.height+a.top)),new aR(Math.round(a.left),Math.round(a.height+a.top))]}},oc="Hidden Text",od=function(){function e(e){this._data={},this._document=e}return e.prototype.parseMetrics=function(e,t){var r=this._document.createElement("div"),n=this._document.createElement("img"),a=this._document.createElement("span"),o=this._document.body;r.style.visibility="hidden",r.style.fontFamily=e,r.style.fontSize=t,r.style.margin="0",r.style.padding="0",r.style.whiteSpace="nowrap",o.appendChild(r),n.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",n.width=1,n.height=1,n.style.margin="0",n.style.padding="0",n.style.verticalAlign="baseline",a.style.fontFamily=e,a.style.fontSize=t,a.style.margin="0",a.style.padding="0",a.appendChild(this._document.createTextNode(oc)),r.appendChild(a),r.appendChild(n);var i=n.offsetTop-a.offsetTop+2;r.removeChild(a),r.appendChild(this._document.createTextNode(oc)),r.style.lineHeight="normal",n.style.verticalAlign="super";var s=n.offsetTop-r.offsetTop+2;return o.removeChild(r),{baseline:i,middle:s}},e.prototype.getMetrics=function(e,t){var r=e+" "+t;return void 0===this._data[r]&&(this._data[r]=this.parseMetrics(e,t)),this._data[r]},e}(),ou=function(e,t){this.context=e,this.options=t},oh=function(e){function t(t,r){var n=e.call(this,t,r)||this;return n._activeEffects=[],n.canvas=r.canvas?r.canvas:document.createElement("canvas"),n.ctx=n.canvas.getContext("2d"),r.canvas||(n.canvas.width=Math.floor(r.width*r.scale),n.canvas.height=Math.floor(r.height*r.scale),n.canvas.style.width=r.width+"px",n.canvas.style.height=r.height+"px"),n.fontMetrics=new od(document),n.ctx.scale(n.options.scale,n.options.scale),n.ctx.translate(-r.x,-r.y),n.ctx.textBaseline="bottom",n._activeEffects=[],n.context.logger.debug("Canvas renderer initialized ("+r.width+"x"+r.height+") with scale "+r.scale),n}return A(t,e),t.prototype.applyEffects=function(e){for(var t=this;this._activeEffects.length;)this.popEffect();e.forEach(function(e){return t.applyEffect(e)})},t.prototype.applyEffect=function(e){this.ctx.save(),2===e.type&&(this.ctx.globalAlpha=e.opacity),0===e.type&&(this.ctx.translate(e.offsetX,e.offsetY),this.ctx.transform(e.matrix[0],e.matrix[1],e.matrix[2],e.matrix[3],e.matrix[4],e.matrix[5]),this.ctx.translate(-e.offsetX,-e.offsetY)),aZ(e)&&(this.path(e.path),this.ctx.clip()),this._activeEffects.push(e)},t.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},t.prototype.renderStack=function(e){return d(this,void 0,void 0,function(){return u(this,function(t){switch(t.label){case 0:if(!e.element.container.styles.isVisible())return[3,2];return[4,this.renderStackContent(e)];case 1:t.sent(),t.label=2;case 2:return[2]}})})},t.prototype.renderNode=function(e){return d(this,void 0,void 0,function(){return u(this,function(t){switch(t.label){case 0:if(rC(e.container.flags,16),!e.container.styles.isVisible())return[3,3];return[4,this.renderNodeBackgroundAndBorders(e)];case 1:return t.sent(),[4,this.renderNodeContent(e)];case 2:t.sent(),t.label=3;case 3:return[2]}})})},t.prototype.renderTextWithLetterSpacing=function(e,t,r){var n=this;0===t?this.ctx.fillText(e.text,e.bounds.left,e.bounds.top+r):nx(e.text).reduce(function(t,a){return n.ctx.fillText(a,t,e.bounds.top+r),t+n.ctx.measureText(a).width},e.bounds.left)},t.prototype.createFontStyle=function(e){var t=e.fontVariant.filter(function(e){return"normal"===e||"small-caps"===e}).join(""),r=ox(e.fontFamily).join(", "),n=eN(e.fontSize)?""+e.fontSize.number+e.fontSize.unit:e.fontSize.number+"px";return[[e.fontStyle,t,e.fontWeight,n,r].join(" "),r,n]},t.prototype.renderTextNode=function(e,t){return d(this,void 0,void 0,function(){var r,n,a,o,i,s,l,A,c=this;return u(this,function(d){return n=(r=this.createFontStyle(t))[0],a=r[1],o=r[2],this.ctx.font=n,this.ctx.direction=1===t.direction?"rtl":"ltr",this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",s=(i=this.fontMetrics.getMetrics(a,o)).baseline,l=i.middle,A=t.paintOrder,e.textBounds.forEach(function(e){A.forEach(function(r){switch(r){case 0:c.ctx.fillStyle=eJ(t.color),c.renderTextWithLetterSpacing(e,t.letterSpacing,s);var n=t.textShadow;n.length&&e.text.trim().length&&(n.slice(0).reverse().forEach(function(r){c.ctx.shadowColor=eJ(r.color),c.ctx.shadowOffsetX=r.offsetX.number*c.options.scale,c.ctx.shadowOffsetY=r.offsetY.number*c.options.scale,c.ctx.shadowBlur=r.blur.number,c.renderTextWithLetterSpacing(e,t.letterSpacing,s)}),c.ctx.shadowColor="",c.ctx.shadowOffsetX=0,c.ctx.shadowOffsetY=0,c.ctx.shadowBlur=0),t.textDecorationLine.length&&(c.ctx.fillStyle=eJ(t.textDecorationColor||t.color),t.textDecorationLine.forEach(function(t){switch(t){case 1:c.ctx.fillRect(e.bounds.left,Math.round(e.bounds.top+s),e.bounds.width,1);break;case 2:c.ctx.fillRect(e.bounds.left,Math.round(e.bounds.top),e.bounds.width,1);break;case 3:c.ctx.fillRect(e.bounds.left,Math.ceil(e.bounds.top+l),e.bounds.width,1)}}));break;case 1:t.webkitTextStrokeWidth&&e.text.trim().length&&(c.ctx.strokeStyle=eJ(t.webkitTextStrokeColor),c.ctx.lineWidth=t.webkitTextStrokeWidth,c.ctx.lineJoin=window.chrome?"miter":"round",c.ctx.strokeText(e.text,e.bounds.left,e.bounds.top+s)),c.ctx.strokeStyle="",c.ctx.lineWidth=0,c.ctx.lineJoin="miter"}})}),[2]})})},t.prototype.renderReplacedElement=function(e,t,r){if(r&&e.intrinsicWidth>0&&e.intrinsicHeight>0){var n=on(e),a=a$(t);this.path(a),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(r,0,0,e.intrinsicWidth,e.intrinsicHeight,n.left,n.top,n.width,n.height),this.ctx.restore()}},t.prototype.renderNodeContent=function(e){return d(this,void 0,void 0,function(){var r,n,a,o,i,s,l,A,c,d,h,p,m,g,x,b,y,v;return u(this,function(u){switch(u.label){case 0:this.applyEffects(e.getEffects(4)),r=e.container,n=e.curves,a=r.styles,o=0,i=r.textNodes,u.label=1;case 1:if(!(o<i.length))return[3,4];return s=i[o],[4,this.renderTextNode(s,a)];case 2:u.sent(),u.label=3;case 3:return o++,[3,1];case 4:if(!(r instanceof nC))return[3,8];u.label=5;case 5:return u.trys.push([5,7,,8]),[4,this.context.cache.match(r.src)];case 6:return l=u.sent(),this.renderReplacedElement(r,n,l),[3,8];case 7:return u.sent(),this.context.logger.error("Error loading image "+r.src),[3,8];case 8:if(r instanceof nN&&this.renderReplacedElement(r,n,r.canvas),!(r instanceof nS))return[3,12];u.label=9;case 9:return u.trys.push([9,11,,12]),[4,this.context.cache.match(r.svg)];case 10:return l=u.sent(),this.renderReplacedElement(r,n,l),[3,12];case 11:return u.sent(),this.context.logger.error("Error loading svg "+r.svg.substring(0,255)),[3,12];case 12:if(!(r instanceof nM&&r.tree))return[3,14];return[4,new t(this.context,{scale:this.options.scale,backgroundColor:r.backgroundColor,x:0,y:0,width:r.width,height:r.height}).render(r.tree)];case 13:A=u.sent(),r.width&&r.height&&this.ctx.drawImage(A,0,0,r.width,r.height,r.bounds.left,r.bounds.top,r.bounds.width,r.bounds.height),u.label=14;case 14:if(r instanceof nQ&&(c=Math.min(r.bounds.width,r.bounds.height),r.type===nU?r.checked&&(this.ctx.save(),this.path([new aR(r.bounds.left+.39363*c,r.bounds.top+.79*c),new aR(r.bounds.left+.16*c,r.bounds.top+.5549*c),new aR(r.bounds.left+.27347*c,r.bounds.top+.44071*c),new aR(r.bounds.left+.39694*c,r.bounds.top+.5649*c),new aR(r.bounds.left+.72983*c,r.bounds.top+.23*c),new aR(r.bounds.left+.84*c,r.bounds.top+.34085*c),new aR(r.bounds.left+.39363*c,r.bounds.top+.79*c)]),this.ctx.fillStyle=eJ(707406591),this.ctx.fill(),this.ctx.restore()):r.type===nL&&r.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(r.bounds.left+c/2,r.bounds.top+c/2,c/4,0,2*Math.PI,!0),this.ctx.fillStyle=eJ(707406591),this.ctx.fill(),this.ctx.restore())),of(r)&&r.value.length){switch(h=(d=this.createFontStyle(a))[0],p=d[1],m=this.fontMetrics.getMetrics(h,p).baseline,this.ctx.font=h,this.ctx.fillStyle=eJ(a.color),this.ctx.textBaseline="alphabetic",this.ctx.textAlign=om(r.styles.textAlign),g=on(r),x=0,r.styles.textAlign){case 1:x+=g.width/2;break;case 2:x+=g.width}b=g.add(x,0,0,-g.height/2+1),this.ctx.save(),this.path([new aR(g.left,g.top),new aR(g.left+g.width,g.top),new aR(g.left+g.width,g.top+g.height),new aR(g.left,g.top+g.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new nf(r.value,b),a.letterSpacing,m),this.ctx.restore(),this.ctx.textBaseline="alphabetic",this.ctx.textAlign="left"}if(!rC(r.styles.display,2048))return[3,20];if(!(null!==r.styles.listStyleImage))return[3,19];if(0!==(y=r.styles.listStyleImage).type)return[3,18];l=void 0,v=y.url,u.label=15;case 15:return u.trys.push([15,17,,18]),[4,this.context.cache.match(v)];case 16:return l=u.sent(),this.ctx.drawImage(l,r.bounds.left-(l.width+10),r.bounds.top),[3,18];case 17:return u.sent(),this.context.logger.error("Error loading list-style-image "+v),[3,18];case 18:return[3,20];case 19:e.listValue&&-1!==r.styles.listStyleType&&(h=this.createFontStyle(a)[0],this.ctx.font=h,this.ctx.fillStyle=eJ(a.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",g=new f(r.bounds.left,r.bounds.top+eK(r.styles.paddingTop,r.bounds.width),r.bounds.width,tZ(a.lineHeight,a.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new nf(e.listValue,g),a.letterSpacing,tZ(a.lineHeight,a.fontSize.number)/2+2),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),u.label=20;case 20:return[2]}})})},t.prototype.renderStackContent=function(e){return d(this,void 0,void 0,function(){var t,r,n,a,o,i,s,l,A,c,d,h,f,p,m;return u(this,function(u){switch(u.label){case 0:return rC(e.element.container.flags,16),[4,this.renderNodeBackgroundAndBorders(e.element)];case 1:u.sent(),t=0,r=e.negativeZIndex,u.label=2;case 2:if(!(t<r.length))return[3,5];return n=r[t],[4,this.renderStack(n)];case 3:u.sent(),u.label=4;case 4:return t++,[3,2];case 5:return[4,this.renderNodeContent(e.element)];case 6:u.sent(),a=0,o=e.nonInlineLevel,u.label=7;case 7:if(!(a<o.length))return[3,10];return n=o[a],[4,this.renderNode(n)];case 8:u.sent(),u.label=9;case 9:return a++,[3,7];case 10:i=0,s=e.nonPositionedFloats,u.label=11;case 11:if(!(i<s.length))return[3,14];return n=s[i],[4,this.renderStack(n)];case 12:u.sent(),u.label=13;case 13:return i++,[3,11];case 14:l=0,A=e.nonPositionedInlineLevel,u.label=15;case 15:if(!(l<A.length))return[3,18];return n=A[l],[4,this.renderStack(n)];case 16:u.sent(),u.label=17;case 17:return l++,[3,15];case 18:c=0,d=e.inlineLevel,u.label=19;case 19:if(!(c<d.length))return[3,22];return n=d[c],[4,this.renderNode(n)];case 20:u.sent(),u.label=21;case 21:return c++,[3,19];case 22:h=0,f=e.zeroOrAutoZIndexOrTransformedOrOpacity,u.label=23;case 23:if(!(h<f.length))return[3,26];return n=f[h],[4,this.renderStack(n)];case 24:u.sent(),u.label=25;case 25:return h++,[3,23];case 26:p=0,m=e.positiveZIndex,u.label=27;case 27:if(!(p<m.length))return[3,30];return n=m[p],[4,this.renderStack(n)];case 28:u.sent(),u.label=29;case 29:return p++,[3,27];case 30:return[2]}})})},t.prototype.mask=function(e){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(e.slice(0).reverse()),this.ctx.closePath()},t.prototype.path=function(e){this.ctx.beginPath(),this.formatPath(e),this.ctx.closePath()},t.prototype.formatPath=function(e){var t=this;e.forEach(function(e,r){var n=aq(e)?e.start:e;0===r?t.ctx.moveTo(n.x,n.y):t.ctx.lineTo(n.x,n.y),aq(e)&&t.ctx.bezierCurveTo(e.startControl.x,e.startControl.y,e.endControl.x,e.endControl.y,e.end.x,e.end.y)})},t.prototype.renderRepeat=function(e,t,r,n){this.path(e),this.ctx.fillStyle=t,this.ctx.translate(r,n),this.ctx.fill(),this.ctx.translate(-r,-n)},t.prototype.resizeImage=function(e,t,r){if(e.width===t&&e.height===r)return e;var n,a=(null!==(n=this.canvas.ownerDocument)&&void 0!==n?n:document).createElement("canvas");return a.width=Math.max(1,t),a.height=Math.max(1,r),a.getContext("2d").drawImage(e,0,0,e.width,e.height,0,0,t,r),a},t.prototype.renderBackgroundImage=function(e){return d(this,void 0,void 0,function(){var t,r,n,a,o,i;return u(this,function(s){switch(s.label){case 0:t=e.styles.backgroundImage.length-1,r=function(r){var a,o,i,s,l,A,c,d,h,f,p,m,g,x,b,y,v,w,k,B,j,C,N,S,F,E,O,P,I,U,L;return u(this,function(u){switch(u.label){case 0:if(0!==r.type)return[3,5];a=void 0,o=r.url,u.label=1;case 1:return u.trys.push([1,3,,4]),[4,n.context.cache.match(o)];case 2:return a=u.sent(),[3,4];case 3:return u.sent(),n.context.logger.error("Error loading background-image "+o),[3,4];case 4:return a&&(s=(i=oa(e,t,[a.width,a.height,a.width/a.height]))[0],l=i[1],A=i[2],c=i[3],d=i[4],h=n.ctx.createPattern(n.resizeImage(a,c,d),"repeat"),n.renderRepeat(s,h,l,A)),[3,6];case 5:1===r.type?(s=(f=oa(e,t,[null,null,null]))[0],l=f[1],A=f[2],c=f[3],d=f[4],m=(p=tr(r.angle,c,d))[0],g=p[1],x=p[2],b=p[3],y=p[4],(v=document.createElement("canvas")).width=c,v.height=d,k=(w=v.getContext("2d")).createLinearGradient(g,b,x,y),te(r.stops,m).forEach(function(e){return k.addColorStop(e.stop,eJ(e.color))}),w.fillStyle=k,w.fillRect(0,0,c,d),c>0&&d>0&&(h=n.ctx.createPattern(v,"repeat"),n.renderRepeat(s,h,l,A))):2===r.type&&(s=(B=oa(e,t,[null,null,null]))[0],j=B[1],C=B[2],c=B[3],d=B[4],l=eK((N=0===r.position.length?[eM]:r.position)[0],c),A=eK(N[N.length-1],d),F=(S=to(r,l,A,c,d))[0],E=S[1],F>0&&E>0&&(O=n.ctx.createRadialGradient(j+l,C+A,0,j+l,C+A,F),te(r.stops,2*F).forEach(function(e){return O.addColorStop(e.stop,eJ(e.color))}),n.path(s),n.ctx.fillStyle=O,F!==E?(P=e.bounds.left+.5*e.bounds.width,I=e.bounds.top+.5*e.bounds.height,L=1/(U=E/F),n.ctx.save(),n.ctx.translate(P,I),n.ctx.transform(1,0,0,U,0,0),n.ctx.translate(-P,-I),n.ctx.fillRect(j,L*(C-I)+I,c,d*L),n.ctx.restore()):n.ctx.fill())),u.label=6;case 6:return t--,[2]}})},n=this,a=0,o=e.styles.backgroundImage.slice(0).reverse(),s.label=1;case 1:if(!(a<o.length))return[3,4];return i=o[a],[5,r(i)];case 2:s.sent(),s.label=3;case 3:return a++,[3,1];case 4:return[2]}})})},t.prototype.renderSolidBorder=function(e,t,r){return d(this,void 0,void 0,function(){return u(this,function(n){return this.path(a6(r,t)),this.ctx.fillStyle=eJ(e),this.ctx.fill(),[2]})})},t.prototype.renderDoubleBorder=function(e,t,r,n){return d(this,void 0,void 0,function(){var a,o;return u(this,function(i){switch(i.label){case 0:if(!(t<3))return[3,2];return[4,this.renderSolidBorder(e,r,n)];case 1:return i.sent(),[2];case 2:return a=a8(n,r),this.path(a),this.ctx.fillStyle=eJ(e),this.ctx.fill(),o=a7(n,r),this.path(o),this.ctx.fill(),[2]}})})},t.prototype.renderNodeBackgroundAndBorders=function(e){return d(this,void 0,void 0,function(){var t,r,n,a,o,i,s,l,A=this;return u(this,function(c){switch(c.label){case 0:if(this.applyEffects(e.getEffects(2)),r=!eY((t=e.container.styles).backgroundColor)||t.backgroundImage.length,n=[{style:t.borderTopStyle,color:t.borderTopColor,width:t.borderTopWidth},{style:t.borderRightStyle,color:t.borderRightColor,width:t.borderRightWidth},{style:t.borderBottomStyle,color:t.borderBottomColor,width:t.borderBottomWidth},{style:t.borderLeftStyle,color:t.borderLeftColor,width:t.borderLeftWidth}],a=op(ol(t.backgroundClip,0),e.curves),!(r||t.boxShadow.length))return[3,2];return this.ctx.save(),this.path(a),this.ctx.clip(),eY(t.backgroundColor)||(this.ctx.fillStyle=eJ(t.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(e.container)];case 1:c.sent(),this.ctx.restore(),t.boxShadow.slice(0).reverse().forEach(function(t){A.ctx.save();var r,n,a,o,i=aW(e.curves),s=t.inset?0:1e4,l=(r=-s+(t.inset?1:-1)*t.spread.number,n=(t.inset?1:-1)*t.spread.number,a=t.spread.number*(t.inset?-2:2),o=t.spread.number*(t.inset?-2:2),i.map(function(e,t){switch(t){case 0:return e.add(r,n);case 1:return e.add(r+a,n);case 2:return e.add(r+a,n+o);case 3:return e.add(r,n+o)}return e}));t.inset?(A.path(i),A.ctx.clip(),A.mask(l)):(A.mask(i),A.ctx.clip(),A.path(l)),A.ctx.shadowOffsetX=t.offsetX.number+s,A.ctx.shadowOffsetY=t.offsetY.number,A.ctx.shadowColor=eJ(t.color),A.ctx.shadowBlur=t.blur.number,A.ctx.fillStyle=t.inset?eJ(t.color):"rgba(0,0,0,1)",A.ctx.fill(),A.ctx.restore()}),c.label=2;case 2:o=0,i=0,s=n,c.label=3;case 3:if(!(i<s.length))return[3,13];if(!(0!==(l=s[i]).style&&!eY(l.color)&&l.width>0))return[3,11];if(2!==l.style)return[3,5];return[4,this.renderDashedDottedBorder(l.color,l.width,o,e.curves,2)];case 4:case 6:case 8:return c.sent(),[3,11];case 5:if(3!==l.style)return[3,7];return[4,this.renderDashedDottedBorder(l.color,l.width,o,e.curves,3)];case 7:if(4!==l.style)return[3,9];return[4,this.renderDoubleBorder(l.color,l.width,o,e.curves)];case 9:return[4,this.renderSolidBorder(l.color,o,e.curves)];case 10:c.sent(),c.label=11;case 11:o++,c.label=12;case 12:return i++,[3,3];case 13:return[2]}})})},t.prototype.renderDashedDottedBorder=function(e,t,r,n,a){return d(this,void 0,void 0,function(){var o,i,s,l,A,c,d,h,f,p,m,g,x,b,y,v;return u(this,function(u){return this.ctx.save(),o=a9(n,r),i=a6(n,r),2===a&&(this.path(i),this.ctx.clip()),aq(i[0])?(s=i[0].start.x,l=i[0].start.y):(s=i[0].x,l=i[0].y),aq(i[1])?(A=i[1].end.x,c=i[1].end.y):(A=i[1].x,c=i[1].y),d=0===r||2===r?Math.abs(s-A):Math.abs(l-c),this.ctx.beginPath(),3===a?this.formatPath(o):this.formatPath(i.slice(0,2)),h=t<3?3*t:2*t,f=t<3?2*t:t,3===a&&(h=t,f=t),p=!0,d<=2*h?p=!1:d<=2*h+f?(m=d/(2*h+f),h*=m,f*=m):(g=Math.floor((d+f)/(h+f)),x=(d-g*h)/(g-1),f=(b=(d-(g+1)*h)/g)<=0||Math.abs(f-x)<Math.abs(f-b)?x:b),p&&(3===a?this.ctx.setLineDash([0,h+f]):this.ctx.setLineDash([h,f])),3===a?(this.ctx.lineCap="round",this.ctx.lineWidth=t):this.ctx.lineWidth=2*t+1.1,this.ctx.strokeStyle=eJ(e),this.ctx.stroke(),this.ctx.setLineDash([]),2===a&&(aq(i[0])&&(y=i[3],v=i[0],this.ctx.beginPath(),this.formatPath([new aR(y.end.x,y.end.y),new aR(v.start.x,v.start.y)]),this.ctx.stroke()),aq(i[1])&&(y=i[1],v=i[2],this.ctx.beginPath(),this.formatPath([new aR(y.end.x,y.end.y),new aR(v.start.x,v.start.y)]),this.ctx.stroke())),this.ctx.restore(),[2]})})},t.prototype.render=function(e){return d(this,void 0,void 0,function(){var t;return u(this,function(r){switch(r.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=eJ(this.options.backgroundColor),this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height)),t=a3(e),[4,this.renderStack(t)];case 1:return r.sent(),this.applyEffects([]),[2,this.canvas]}})})},t}(ou),of=function(e){return e instanceof nD||e instanceof nT||e instanceof nQ&&e.type!==nL&&e.type!==nU},op=function(e,t){switch(e){case 0:return aW(t);case 2:return[t.topLeftContentBox,t.topRightContentBox,t.bottomRightContentBox,t.bottomLeftContentBox];default:return a$(t)}},om=function(e){switch(e){case 1:return"center";case 2:return"right";default:return"left"}},og=["-apple-system","system-ui"],ox=function(e){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?e.filter(function(e){return -1===og.indexOf(e)}):e},ob=function(e){function t(t,r){var n=e.call(this,t,r)||this;return n.canvas=r.canvas?r.canvas:document.createElement("canvas"),n.ctx=n.canvas.getContext("2d"),n.options=r,n.canvas.width=Math.floor(r.width*r.scale),n.canvas.height=Math.floor(r.height*r.scale),n.canvas.style.width=r.width+"px",n.canvas.style.height=r.height+"px",n.ctx.scale(n.options.scale,n.options.scale),n.ctx.translate(-r.x,-r.y),n.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized ("+r.width+"x"+r.height+" at "+r.x+","+r.y+") with scale "+r.scale),n}return A(t,e),t.prototype.render=function(e){return d(this,void 0,void 0,function(){var t;return u(this,function(r){switch(r.label){case 0:return[4,oy(nn(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,e))];case 1:return t=r.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=eJ(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(t,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}})})},t}(ou),oy=function(e){return new Promise(function(t,r){var n=new Image;n.onload=function(){t(n)},n.onerror=r,n.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(e))})},ov=function(){function e(e){var t=e.id,r=e.enabled;this.id=t,this.enabled=r,this.start=Date.now()}return e.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.enabled&&("undefined"!=typeof window&&window.console&&"function"==typeof console.debug?console.debug.apply(console,h([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},e.prototype.getTime=function(){return Date.now()-this.start},e.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.enabled&&"undefined"!=typeof window&&window.console&&"function"==typeof console.info&&console.info.apply(console,h([this.id,this.getTime()+"ms"],e))},e.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.enabled&&("undefined"!=typeof window&&window.console&&"function"==typeof console.warn?console.warn.apply(console,h([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},e.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.enabled&&("undefined"!=typeof window&&window.console&&"function"==typeof console.error?console.error.apply(console,h([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},e.instances={},e}(),ow=function(){function e(t,r){var n;this.windowBounds=r,this.instanceName="#"+e.instanceCount++,this.logger=new ov({id:this.instanceName,enabled:t.logging}),this.cache=null!==(n=t.cache)&&void 0!==n?n:new aI(this,t)}return e.instanceCount=1,e}();"undefined"!=typeof window&&aP.setContext(window);var ok=function(e,t,r){var n=t.ownerDocument,a=n.documentElement?e3(e,getComputedStyle(n.documentElement).backgroundColor):e6.TRANSPARENT,o=n.body?e3(e,getComputedStyle(n.body).backgroundColor):e6.TRANSPARENT,i="string"==typeof r?e3(e,r):null===r?e6.TRANSPARENT:4294967295;return t===n.documentElement?eY(a)?eY(o)?i:o:a:i};let oB=function(e,t){var r;return void 0===t&&(t={}),r=t,d(void 0,void 0,void 0,function(){var t,n,a,o,i,s,l,A,d,h,g,x,b,y,v,w,k,B,j,C,N,S,F,E,O,P,I,U,L,_,Q,T,D,M,H,R,K;return u(this,function(u){switch(u.label){case 0:if(!e||"object"!=typeof e)return[2,Promise.reject("Invalid element provided as first argument")];if(!(t=e.ownerDocument))throw Error("Element is not attached to a Document");if(!(n=t.defaultView))throw Error("Document is not attached to a Window");if(a={allowTaint:null!==(N=r.allowTaint)&&void 0!==N&&N,imageTimeout:null!==(S=r.imageTimeout)&&void 0!==S?S:15e3,proxy:r.proxy,useCORS:null!==(F=r.useCORS)&&void 0!==F&&F},s=new ow(c({logging:null===(E=r.logging)||void 0===E||E,cache:r.cache},a),i=new f((o={windowWidth:null!==(O=r.windowWidth)&&void 0!==O?O:n.innerWidth,windowHeight:null!==(P=r.windowHeight)&&void 0!==P?P:n.innerHeight,scrollX:null!==(I=r.scrollX)&&void 0!==I?I:n.pageXOffset,scrollY:null!==(U=r.scrollY)&&void 0!==U?U:n.pageYOffset}).scrollX,o.scrollY,o.windowWidth,o.windowHeight)),l=null!==(L=r.foreignObjectRendering)&&void 0!==L&&L,A={allowTaint:null!==(_=r.allowTaint)&&void 0!==_&&_,onclone:r.onclone,ignoreElements:r.ignoreElements,inlineImages:l,copyStyles:l},s.logger.debug("Starting document clone with size "+i.width+"x"+i.height+" scrolled to "+-i.left+","+-i.top),!(h=(d=new ag(s,e,A)).clonedReferenceElement))return[2,Promise.reject("Unable to find element in cloned iframe")];return[4,d.toIFrame(t,i)];case 1:if(g=u.sent(),b=(x=n1(h)||"HTML"===h.tagName?m(h.ownerDocument):p(s,h)).width,y=x.height,v=x.left,w=x.top,k=ok(s,h,r.backgroundColor),B={canvas:r.canvas,backgroundColor:k,scale:null!==(T=null!==(Q=r.scale)&&void 0!==Q?Q:n.devicePixelRatio)&&void 0!==T?T:1,x:(null!==(D=r.x)&&void 0!==D?D:0)+v,y:(null!==(M=r.y)&&void 0!==M?M:0)+w,width:null!==(H=r.width)&&void 0!==H?H:Math.ceil(b),height:null!==(R=r.height)&&void 0!==R?R:Math.ceil(y)},!l)return[3,3];return s.logger.debug("Document cloned, using foreign object rendering"),[4,new ob(s,B).render(h)];case 2:return j=u.sent(),[3,5];case 3:return s.logger.debug("Document cloned, element located at "+v+","+w+" with size "+b+"x"+y+" using computed rendering"),s.logger.debug("Starting DOM parsing"),C=nV(s,h),k===C.styles.backgroundColor&&(C.styles.backgroundColor=e6.TRANSPARENT),s.logger.debug("Starting renderer for element at "+B.x+","+B.y+" with size "+B.width+"x"+B.height),[4,new oh(s,B).render(C)];case 4:j=u.sent(),u.label=5;case 5:return(null===(K=r.removeContainer)||void 0===K||K)&&!ag.destroy(g)&&s.logger.error("Cannot detach cloned iframe as it is not in the DOM anymore"),s.logger.debug("Finished rendering"),[2,j]}})})}},41923:(e,t,r)=>{"use strict";var n=u(r(47434)),a=u(r(73811)),o=u(r(37613)),i=u(r(13646)),s=u(r(72951)),l=u(r(8466)),A=u(r(85473)),c=r(52913),d=u(r(40640));function u(e){return e&&e.__esModule?e:{default:e}}var h=function(){},f=function(e,t,r){var n=new h;if(void 0===e)throw Error("No element to render on was provided.");return n._renderProperties=(0,s.default)(e),n._encodings=[],n._options=d.default,n._errorHandler=new A.default(n),void 0!==t&&((r=r||{}).format||(r.format=g()),n.options(r)[r.format](t,r).render()),n};for(var p in f.getModule=function(e){return n.default[e]},n.default)n.default.hasOwnProperty(p)&&function(e,t){h.prototype[t]=h.prototype[t.toUpperCase()]=h.prototype[t.toLowerCase()]=function(r,n){var o=this;return o._errorHandler.wrapBarcodeCall(function(){n.text=void 0===n.text?void 0:""+n.text;var i=(0,a.default)(o._options,n);i=(0,l.default)(i);var s=m(r,e[t],i);return o._encodings.push(s),o})}}(n.default,p);function m(e,t,r){var n=new t(e=""+e,r);if(!n.valid())throw new c.InvalidInputException(n.constructor.name,e);var i=n.encode();i=(0,o.default)(i);for(var s=0;s<i.length;s++)i[s].options=(0,a.default)(r,i[s].options);return i}function g(){return n.default.CODE128?"CODE128":Object.keys(n.default)[0]}function x(e,t,r){t=(0,o.default)(t);for(var n=0;n<t.length;n++)t[n].options=(0,a.default)(r,t[n].options),(0,i.default)(t[n].options);(0,i.default)(r),new e.renderer(e.element,t,r).render(),e.afterRender&&e.afterRender()}h.prototype.options=function(e){return this._options=(0,a.default)(this._options,e),this},h.prototype.blank=function(e){var t=Array(e+1).join("0");return this._encodings.push({data:t}),this},h.prototype.init=function(){if(this._renderProperties)for(var e in Array.isArray(this._renderProperties)||(this._renderProperties=[this._renderProperties]),this._renderProperties){t=this._renderProperties[e];var t,r=(0,a.default)(this._options,t.options);"auto"==r.format&&(r.format=g()),this._errorHandler.wrapBarcodeCall(function(){x(t,m(r.value,n.default[r.format.toUpperCase()],r),r)})}},h.prototype.render=function(){if(!this._renderProperties)throw new c.NoElementException;if(Array.isArray(this._renderProperties))for(var e=0;e<this._renderProperties.length;e++)x(this._renderProperties[e],this._encodings,this._options);else x(this._renderProperties,this._encodings,this._options);return this},h.prototype._defaults=d.default,"undefined"!=typeof window&&(window.JsBarcode=f),"undefined"!=typeof jQuery&&(jQuery.fn.JsBarcode=function(e,t){var r=[];return jQuery(this).each(function(){r.push(this)}),f(r,e,t)}),e.exports=f},16018:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function e(t,r){(function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")})(this,e),this.data=t,this.text=r.text||t,this.options=r}},94364:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=function(e){return e&&e.__esModule?e:{default:e}}(r(16018)),o=r(40036),i=function(e){function t(e,r){!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&("object"==typeof t||"function"==typeof t)?t:e}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e.substring(1),r));return n.bytes=e.split("").map(function(e){return e.charCodeAt(0)}),n}return function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,[{key:"valid",value:function(){return/^[\x00-\x7F\xC8-\xD3]+$/.test(this.data)}},{key:"encode",value:function(){var e=this.bytes,r=e.shift()-105,n=o.SET_BY_CODE[r];if(void 0===n)throw RangeError("The encoding does not start with a start character.");!0===this.shouldEncodeAsEan128()&&e.unshift(o.FNC1);var a=t.next(e,1,n);return{text:this.text===this.data?this.text.replace(/[^\x20-\x7E]/g,""):this.text,data:t.getBar(r)+a.result+t.getBar((a.checksum+r)%o.MODULO)+t.getBar(o.STOP)}}},{key:"shouldEncodeAsEan128",value:function(){var e=this.options.ean128||!1;return"string"==typeof e&&(e="true"===e.toLowerCase()),e}}],[{key:"getBar",value:function(e){return o.BARS[e]?o.BARS[e].toString():""}},{key:"correctIndex",value:function(e,t){if(t===o.SET_A){var r=e.shift();return r<32?r+64:r-32}return t===o.SET_B?e.shift()-32:(e.shift()-48)*10+e.shift()-48}},{key:"next",value:function(e,r,n){if(!e.length)return{result:"",checksum:0};var a=void 0,i=void 0;if(e[0]>=200){i=e.shift()-105;var s=o.SWAP[i];void 0!==s?a=t.next(e,r+1,s):((n===o.SET_A||n===o.SET_B)&&i===o.SHIFT&&(e[0]=n===o.SET_A?e[0]>95?e[0]-96:e[0]:e[0]<32?e[0]+96:e[0]),a=t.next(e,r+1,n))}else i=t.correctIndex(e,n),a=t.next(e,r+1,n);var l=t.getBar(i),A=i*r;return{result:l+a.result,checksum:A+a.checksum}}}]),t}(a.default);t.default=i},39862:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=function(e){return e&&e.__esModule?e:{default:e}}(r(94364)),o=r(40036),i=function(e){function t(e,r){return function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&("object"==typeof t||"function"==typeof t)?t:e}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,o.A_START_CHAR+e,r))}return function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,[{key:"valid",value:function(){return RegExp("^"+o.A_CHARS+"+$").test(this.data)}}]),t}(a.default);t.default=i},46431:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=function(e){return e&&e.__esModule?e:{default:e}}(r(94364)),o=r(40036),i=function(e){function t(e,r){return function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&("object"==typeof t||"function"==typeof t)?t:e}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,o.B_START_CHAR+e,r))}return function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,[{key:"valid",value:function(){return RegExp("^"+o.B_CHARS+"+$").test(this.data)}}]),t}(a.default);t.default=i},98715:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=function(e){return e&&e.__esModule?e:{default:e}}(r(94364)),o=r(40036),i=function(e){function t(e,r){return function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&("object"==typeof t||"function"==typeof t)?t:e}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,o.C_START_CHAR+e,r))}return function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,[{key:"valid",value:function(){return RegExp("^"+o.C_CHARS+"+$").test(this.data)}}]),t}(a.default);t.default=i},40859:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=o(r(94364)),a=o(r(71318));function o(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&("object"==typeof t||"function"==typeof t)?t:e}var s=function(e){function t(e,r){if(function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,t),/^[\x00-\x7F\xC8-\xD3]+$/.test(e))var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,(0,a.default)(e),r));else var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r));return i(n)}return function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(n.default);t.default=s},71318:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(40036),a=function(e){return e.match(RegExp("^"+n.A_CHARS+"*"))[0].length},o=function(e){return e.match(RegExp("^"+n.B_CHARS+"*"))[0].length},i=function(e){return e.match(RegExp("^"+n.C_CHARS+"*"))[0]};function s(e,t){var r=t?n.A_CHARS:n.B_CHARS,a=e.match(RegExp("^("+r+"+?)(([0-9]{2}){2,})([^0-9]|$)"));if(a)return a[1]+String.fromCharCode(204)+l(e.substring(a[1].length));var o=e.match(RegExp("^"+r+"+"))[0];return o.length===e.length?e:o+String.fromCharCode(t?205:206)+s(e.substring(o.length),!t)}function l(e){var t=i(e),r=t.length;if(r===e.length)return e;var n=a(e=e.substring(r))>=o(e);return t+String.fromCharCode(n?206:205)+s(e,n)}t.default=function(e){var t=void 0;if(i(e).length>=2)t=n.C_START_CHAR+l(e);else{var r=a(e)>o(e);t=(r?n.A_START_CHAR:n.B_START_CHAR)+s(e,r)}return t.replace(/[\xCD\xCE]([^])[\xCD\xCE]/,function(e,t){return String.fromCharCode(203)+t})}},40036:(e,t)=>{"use strict";function r(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}Object.defineProperty(t,"__esModule",{value:!0});var n,a=t.SET_A=0,o=t.SET_B=1,i=t.SET_C=2;t.SHIFT=98;var s=t.START_A=103,l=t.START_B=104,A=t.START_C=105;t.MODULO=103,t.STOP=106,t.FNC1=207,t.SET_BY_CODE=(r(n={},s,a),r(n,l,o),r(n,A,i),n),t.SWAP={101:a,100:o,99:i},t.A_START_CHAR=String.fromCharCode(208),t.B_START_CHAR=String.fromCharCode(209),t.C_START_CHAR=String.fromCharCode(210),t.A_CHARS="[\0-_\xc8-\xcf]",t.B_CHARS="[ -\x7f\xc8-\xcf]",t.C_CHARS="(\xcf*[0-9]{2}\xcf*)",t.BARS=[11011001100,11001101100,11001100110,10010011e3,10010001100,10001001100,10011001e3,10011000100,10001100100,11001001e3,11001000100,11000100100,10110011100,10011011100,10011001110,10111001100,10011101100,10011100110,11001110010,11001011100,11001001110,11011100100,11001110100,11101101110,11101001100,11100101100,11100100110,11101100100,11100110100,11100110010,11011011e3,11011000110,11000110110,10100011e3,10001011e3,10001000110,10110001e3,10001101e3,10001100010,11010001e3,11000101e3,11000100010,10110111e3,10110001110,10001101110,10111011e3,10111000110,10001110110,11101110110,11010001110,11000101110,11011101e3,11011100010,11011101110,11101011e3,11101000110,11100010110,11101101e3,11101100010,11100011010,11101111010,11001000010,11110001010,1010011e4,10100001100,1001011e4,10010000110,10000101100,10000100110,1011001e4,10110000100,1001101e4,10011000010,10000110100,10000110010,11000010010,1100101e4,11110111010,11000010100,10001111010,10100111100,10010111100,10010011110,10111100100,10011110100,10011110010,11110100100,11110010100,11110010010,11011011110,11011110110,11110110110,10101111e3,10100011110,10001011110,10111101e3,10111100010,11110101e3,11110100010,10111011110,10111101110,11101011110,11110101110,11010000100,1101001e4,11010011100,1100011101011]},2560:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CODE128C=t.CODE128B=t.CODE128A=t.CODE128=void 0;var n=s(r(40859)),a=s(r(39862)),o=s(r(46431)),i=s(r(98715));function s(e){return e&&e.__esModule?e:{default:e}}t.CODE128=n.default,t.CODE128A=a.default,t.CODE128B=o.default,t.CODE128C=i.default},7266:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CODE39=void 0;var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=function(e){function t(e,r){return function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,t),e=e.toUpperCase(),r.mod43&&(e+=o[function(e){for(var t=0,r=0;r<e.length;r++)t+=l(e[r]);return t%43}(e)]),function(e,t){if(!e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&("object"==typeof t||"function"==typeof t)?t:e}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r))}return function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,[{key:"encode",value:function(){for(var e=s(l("*")),t=0;t<this.data.length;t++)e+=s(l(this.data[t]))+"0";return{data:e+=s(l("*")),text:this.text}}},{key:"valid",value:function(){return -1!==this.data.search(/^[0-9A-Z\-\.\ \$\/\+\%]+$/)}}]),t}(function(e){return e&&e.__esModule?e:{default:e}}(r(16018)).default),o=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","-","."," ","$","/","+","%","*"],i=[20957,29783,23639,30485,20951,29813,23669,20855,29789,23645,29975,23831,30533,22295,30149,24005,21623,29981,23837,22301,30023,23879,30545,22343,30161,24017,21959,30065,23921,22385,29015,18263,29141,17879,29045,18293,17783,29021,18269,17477,17489,17681,20753,35770];function s(e){return i[e].toString(2)}function l(e){return o.indexOf(e)}t.CODE39=a},27931:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=r(4745),o=function(e){function t(e,r){return function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&("object"==typeof t||"function"==typeof t)?t:e}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r))}return function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,[{key:"valid",value:function(){return/^[0-9A-Z\-. $/+%]+$/.test(this.data)}},{key:"encode",value:function(){var e=this.data.split("").flatMap(function(e){return a.MULTI_SYMBOLS[e]||e}),r=e.map(function(e){return t.getEncoding(e)}).join(""),n=t.checksum(e,20),o=t.checksum(e.concat(n),15);return{text:this.text,data:t.getEncoding("\xff")+r+t.getEncoding(n)+t.getEncoding(o)+t.getEncoding("\xff")+"1"}}}],[{key:"getEncoding",value:function(e){return a.BINARIES[t.symbolValue(e)]}},{key:"getSymbol",value:function(e){return a.SYMBOLS[e]}},{key:"symbolValue",value:function(e){return a.SYMBOLS.indexOf(e)}},{key:"checksum",value:function(e,r){var n=e.slice().reverse().reduce(function(e,n,a){return e+t.symbolValue(n)*(a%r+1)},0);return t.getSymbol(n%47)}}]),t}(function(e){return e&&e.__esModule?e:{default:e}}(r(16018)).default);t.default=o},89385:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=function(e){function t(e,r){return function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&("object"==typeof t||"function"==typeof t)?t:e}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r))}return function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,[{key:"valid",value:function(){return/^[\x00-\x7f]+$/.test(this.data)}}]),t}(function(e){return e&&e.__esModule?e:{default:e}}(r(27931)).default);t.default=a},4745:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SYMBOLS=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","-","."," ","$","/","+","%","($)","(%)","(/)","(+)","\xff"],t.BINARIES=["100010100","101001000","101000100","101000010","100101000","100100100","100100010","101010000","100010010","100001010","110101000","110100100","110100010","110010100","110010010","110001010","101101000","101100100","101100010","100110100","100011010","101011000","101001100","101000110","100101100","100010110","110110100","110110010","110101100","110100110","110010110","110011010","101101100","101100110","100110110","100111010","100101110","111010100","111010010","111001010","101101110","101110110","110101110","100100110","111011010","111010110","100110010","101011110"],t.MULTI_SYMBOLS={"\0":["(%)","U"],"\x01":["($)","A"],"\x02":["($)","B"],"\x03":["($)","C"],"\x04":["($)","D"],"\x05":["($)","E"],"\x06":["($)","F"],"\x07":["($)","G"],"\b":["($)","H"],"	":["($)","I"],"\n":["($)","J"],"\v":["($)","K"],"\f":["($)","L"],"\r":["($)","M"],"\x0e":["($)","N"],"\x0f":["($)","O"],"\x10":["($)","P"],"\x11":["($)","Q"],"\x12":["($)","R"],"\x13":["($)","S"],"\x14":["($)","T"],"\x15":["($)","U"],"\x16":["($)","V"],"\x17":["($)","W"],"\x18":["($)","X"],"\x19":["($)","Y"],"\x1a":["($)","Z"],"\x1b":["(%)","A"],"\x1c":["(%)","B"],"\x1d":["(%)","C"],"\x1e":["(%)","D"],"\x1f":["(%)","E"],"!":["(/)","A"],'"':["(/)","B"],"#":["(/)","C"],"&":["(/)","F"],"'":["(/)","G"],"(":["(/)","H"],")":["(/)","I"],"*":["(/)","J"],",":["(/)","L"],":":["(/)","Z"],";":["(%)","F"],"<":["(%)","G"],"=":["(%)","H"],">":["(%)","I"],"?":["(%)","J"],"@":["(%)","V"],"[":["(%)","K"],"\\":["(%)","L"],"]":["(%)","M"],"^":["(%)","N"],_:["(%)","O"],"`":["(%)","W"],a:["(+)","A"],b:["(+)","B"],c:["(+)","C"],d:["(+)","D"],e:["(+)","E"],f:["(+)","F"],g:["(+)","G"],h:["(+)","H"],i:["(+)","I"],j:["(+)","J"],k:["(+)","K"],l:["(+)","L"],m:["(+)","M"],n:["(+)","N"],o:["(+)","O"],p:["(+)","P"],q:["(+)","Q"],r:["(+)","R"],s:["(+)","S"],t:["(+)","T"],u:["(+)","U"],v:["(+)","V"],w:["(+)","W"],x:["(+)","X"],y:["(+)","Y"],z:["(+)","Z"],"{":["(%)","P"],"|":["(%)","Q"],"}":["(%)","R"],"~":["(%)","S"],"\x7f":["(%)","T"]}},20980:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CODE93FullASCII=t.CODE93=void 0;var n=o(r(27931)),a=o(r(89385));function o(e){return e&&e.__esModule?e:{default:e}}t.CODE93=n.default,t.CODE93FullASCII=a.default},3831:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=r(77440),o=i(r(72341));function i(e){return e&&e.__esModule?e:{default:e}}var s=function(e){function t(e,r){!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&("object"==typeof t||"function"==typeof t)?t:e}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r));return n.fontSize=!r.flat&&r.fontSize>10*r.width?10*r.width:r.fontSize,n.guardHeight=r.height+n.fontSize/2+r.textMargin,n}return function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,[{key:"encode",value:function(){return this.options.flat?this.encodeFlat():this.encodeGuarded()}},{key:"leftText",value:function(e,t){return this.text.substr(e,t)}},{key:"leftEncode",value:function(e,t){return(0,o.default)(e,t)}},{key:"rightText",value:function(e,t){return this.text.substr(e,t)}},{key:"rightEncode",value:function(e,t){return(0,o.default)(e,t)}},{key:"encodeGuarded",value:function(){var e={fontSize:this.fontSize},t={height:this.guardHeight};return[{data:a.SIDE_BIN,options:t},{data:this.leftEncode(),text:this.leftText(),options:e},{data:a.MIDDLE_BIN,options:t},{data:this.rightEncode(),text:this.rightText(),options:e},{data:a.SIDE_BIN,options:t}]}},{key:"encodeFlat",value:function(){return{data:[a.SIDE_BIN,this.leftEncode(),a.MIDDLE_BIN,this.rightEncode(),a.SIDE_BIN].join(""),text:this.text}}}]),t}(i(r(16018)).default);t.default=s},43880:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=function e(t,r,n){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,r);if(void 0===a){var o=Object.getPrototypeOf(t);if(null===o)return;return e(o,r,n)}if("value"in a)return a.value;var i=a.get;if(void 0!==i)return i.call(n)},o=r(77440),i=function(e){return e&&e.__esModule?e:{default:e}}(r(3831)),s=function(e){return(10-e.substr(0,12).split("").map(function(e){return+e}).reduce(function(e,t,r){return r%2?e+3*t:e+t},0)%10)%10},l=function(e){function t(e,r){(function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")})(this,t),-1!==e.search(/^[0-9]{12}$/)&&(e+=s(e));var n=function(e,t){if(!e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&("object"==typeof t||"function"==typeof t)?t:e}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r));return n.lastChar=r.lastChar,n}return function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,[{key:"valid",value:function(){return -1!==this.data.search(/^[0-9]{13}$/)&&+this.data[12]===s(this.data)}},{key:"leftText",value:function(){return a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"leftText",this).call(this,1,6)}},{key:"leftEncode",value:function(){var e=this.data.substr(1,6),r=o.EAN13_STRUCTURE[this.data[0]];return a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"leftEncode",this).call(this,e,r)}},{key:"rightText",value:function(){return a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"rightText",this).call(this,7,6)}},{key:"rightEncode",value:function(){var e=this.data.substr(7,6);return a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"rightEncode",this).call(this,e,"RRRRRR")}},{key:"encodeGuarded",value:function(){var e=a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"encodeGuarded",this).call(this);return this.options.displayValue&&(e.unshift({data:"000000000000",text:this.text.substr(0,1),options:{textAlign:"left",fontSize:this.fontSize}}),this.options.lastChar&&(e.push({data:"00"}),e.push({data:"00000",text:this.options.lastChar,options:{fontSize:this.fontSize}}))),e}}]),t}(i.default);t.default=l},91384:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=r(77440),o=i(r(72341));function i(e){return e&&e.__esModule?e:{default:e}}var s=function(e){function t(e,r){return function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&("object"==typeof t||"function"==typeof t)?t:e}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r))}return function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,[{key:"valid",value:function(){return -1!==this.data.search(/^[0-9]{2}$/)}},{key:"encode",value:function(){var e=a.EAN2_STRUCTURE[parseInt(this.data)%4];return{data:"1011"+(0,o.default)(this.data,e,"01"),text:this.text}}}]),t}(i(r(16018)).default);t.default=s},54389:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=r(77440),o=i(r(72341));function i(e){return e&&e.__esModule?e:{default:e}}var s=function(e){function t(e,r){return function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&("object"==typeof t||"function"==typeof t)?t:e}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r))}return function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,[{key:"valid",value:function(){return -1!==this.data.search(/^[0-9]{5}$/)}},{key:"encode",value:function(){var e=a.EAN5_STRUCTURE[this.data.split("").map(function(e){return+e}).reduce(function(e,t,r){return r%2?e+9*t:e+3*t},0)%10];return{data:"1011"+(0,o.default)(this.data,e,"01"),text:this.text}}}]),t}(i(r(16018)).default);t.default=s},7538:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=function e(t,r,n){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,r);if(void 0===a){var o=Object.getPrototypeOf(t);if(null===o)return;return e(o,r,n)}if("value"in a)return a.value;var i=a.get;if(void 0!==i)return i.call(n)},o=function(e){return e&&e.__esModule?e:{default:e}}(r(3831)),i=function(e){return(10-e.substr(0,7).split("").map(function(e){return+e}).reduce(function(e,t,r){return r%2?e+t:e+3*t},0)%10)%10},s=function(e){function t(e,r){return function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,t),-1!==e.search(/^[0-9]{7}$/)&&(e+=i(e)),function(e,t){if(!e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&("object"==typeof t||"function"==typeof t)?t:e}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r))}return function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,[{key:"valid",value:function(){return -1!==this.data.search(/^[0-9]{8}$/)&&+this.data[7]===i(this.data)}},{key:"leftText",value:function(){return a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"leftText",this).call(this,0,4)}},{key:"leftEncode",value:function(){var e=this.data.substr(0,4);return a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"leftEncode",this).call(this,e,"LLLL")}},{key:"rightText",value:function(){return a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"rightText",this).call(this,4,4)}},{key:"rightEncode",value:function(){var e=this.data.substr(4,4);return a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"rightEncode",this).call(this,e,"RRRR")}}]),t}(o.default);t.default=s},73033:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();t.checksum=s;var a=o(r(72341));function o(e){return e&&e.__esModule?e:{default:e}}var i=function(e){function t(e,r){(function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")})(this,t),-1!==e.search(/^[0-9]{11}$/)&&(e+=s(e));var n=function(e,t){if(!e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&("object"==typeof t||"function"==typeof t)?t:e}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r));return n.displayValue=r.displayValue,r.fontSize>10*r.width?n.fontSize=10*r.width:n.fontSize=r.fontSize,n.guardHeight=r.height+n.fontSize/2+r.textMargin,n}return function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,[{key:"valid",value:function(){return -1!==this.data.search(/^[0-9]{12}$/)&&this.data[11]==s(this.data)}},{key:"encode",value:function(){return this.options.flat?this.flatEncoding():this.guardedEncoding()}},{key:"flatEncoding",value:function(){var e="";return{data:e+="101"+(0,a.default)(this.data.substr(0,6),"LLLLLL")+"01010"+(0,a.default)(this.data.substr(6,6),"RRRRRR")+"101",text:this.text}}},{key:"guardedEncoding",value:function(){var e=[];return this.displayValue&&e.push({data:"00000000",text:this.text.substr(0,1),options:{textAlign:"left",fontSize:this.fontSize}}),e.push({data:"101"+(0,a.default)(this.data[0],"L"),options:{height:this.guardHeight}}),e.push({data:(0,a.default)(this.data.substr(1,5),"LLLLL"),text:this.text.substr(1,5),options:{fontSize:this.fontSize}}),e.push({data:"01010",options:{height:this.guardHeight}}),e.push({data:(0,a.default)(this.data.substr(6,5),"RRRRR"),text:this.text.substr(6,5),options:{fontSize:this.fontSize}}),e.push({data:(0,a.default)(this.data[11],"R")+"101",options:{height:this.guardHeight}}),this.displayValue&&e.push({data:"00000000",text:this.text.substr(11,1),options:{textAlign:"right",fontSize:this.fontSize}}),e}}]),t}(o(r(16018)).default);function s(e){var t,r=0;for(t=1;t<11;t+=2)r+=parseInt(e[t]);for(t=0;t<11;t+=2)r+=3*parseInt(e[t]);return(10-r%10)%10}t.default=i},76702:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=s(r(72341)),o=s(r(16018)),i=r(73033);function s(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(!e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&("object"==typeof t||"function"==typeof t)?t:e}var A=["XX00000XXX","XX10000XXX","XX20000XXX","XXX00000XX","XXXX00000X","XXXXX00005","XXXXX00006","XXXXX00007","XXXXX00008","XXXXX00009"],c=[["EEEOOO","OOOEEE"],["EEOEOO","OOEOEE"],["EEOOEO","OOEEOE"],["EEOOOE","OOEEEO"],["EOEEOO","OEOOEE"],["EOOEEO","OEEOOE"],["EOOOEE","OEEEOO"],["EOEOEO","OEOEOE"],["EOEOOE","OEOEEO"],["EOOEOE","OEEOEO"]],d=function(e){function t(e,r){!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,t);var n=l(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r));if(n.isValid=!1,-1!==e.search(/^[0-9]{6}$/))n.middleDigits=e,n.upcA=u(e,"0"),n.text=r.text||""+n.upcA[0]+e+n.upcA[n.upcA.length-1],n.isValid=!0;else{if(-1===e.search(/^[01][0-9]{7}$/)||(n.middleDigits=e.substring(1,e.length-1),n.upcA=u(n.middleDigits,e[0]),n.upcA[n.upcA.length-1]!==e[e.length-1]))return l(n);n.isValid=!0}return n.displayValue=r.displayValue,r.fontSize>10*r.width?n.fontSize=10*r.width:n.fontSize=r.fontSize,n.guardHeight=r.height+n.fontSize/2+r.textMargin,n}return function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,[{key:"valid",value:function(){return this.isValid}},{key:"encode",value:function(){return this.options.flat?this.flatEncoding():this.guardedEncoding()}},{key:"flatEncoding",value:function(){var e="";return{data:e+="101"+this.encodeMiddleDigits()+"010101",text:this.text}}},{key:"guardedEncoding",value:function(){var e=[];return this.displayValue&&e.push({data:"00000000",text:this.text[0],options:{textAlign:"left",fontSize:this.fontSize}}),e.push({data:"101",options:{height:this.guardHeight}}),e.push({data:this.encodeMiddleDigits(),text:this.text.substring(1,7),options:{fontSize:this.fontSize}}),e.push({data:"010101",options:{height:this.guardHeight}}),this.displayValue&&e.push({data:"00000000",text:this.text[7],options:{textAlign:"right",fontSize:this.fontSize}}),e}},{key:"encodeMiddleDigits",value:function(){var e=this.upcA[0],t=c[parseInt(this.upcA[this.upcA.length-1])][parseInt(e)];return(0,a.default)(this.middleDigits,t)}}]),t}(o.default);function u(e,t){for(var r=A[parseInt(e[e.length-1])],n="",a=0,o=0;o<r.length;o++){var s=r[o];"X"===s?n+=e[a++]:n+=s}return(n=""+t+n)+(0,i.checksum)(n)}t.default=d},77440:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SIDE_BIN="101",t.MIDDLE_BIN="01010",t.BINARIES={L:["0001101","0011001","0010011","0111101","0100011","0110001","0101111","0111011","0110111","0001011"],G:["0100111","0110011","0011011","0100001","0011101","0111001","0000101","0010001","0001001","0010111"],R:["1110010","1100110","1101100","1000010","1011100","1001110","1010000","1000100","1001000","1110100"],O:["0001101","0011001","0010011","0111101","0100011","0110001","0101111","0111011","0110111","0001011"],E:["0100111","0110011","0011011","0100001","0011101","0111001","0000101","0010001","0001001","0010111"]},t.EAN2_STRUCTURE=["LL","LG","GL","GG"],t.EAN5_STRUCTURE=["GGLLL","GLGLL","GLLGL","GLLLG","LGGLL","LLGGL","LLLGG","LGLGL","LGLLG","LLGLG"],t.EAN13_STRUCTURE=["LLLLLL","LLGLGG","LLGGLG","LLGGGL","LGLLGG","LGGLLG","LGGGLL","LGLGLG","LGLGGL","LGGLGL"]},72341:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(77440);t.default=function(e,t,r){var a=e.split("").map(function(e,r){return n.BINARIES[t[r]]}).map(function(t,r){return t?t[e[r]]:""});if(r){var o=e.length-1;a=a.map(function(e,t){return t<o?e+r:e})}return a.join("")}},12692:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UPCE=t.UPC=t.EAN2=t.EAN5=t.EAN8=t.EAN13=void 0;var n=A(r(43880)),a=A(r(7538)),o=A(r(54389)),i=A(r(91384)),s=A(r(73033)),l=A(r(76702));function A(e){return e&&e.__esModule?e:{default:e}}t.EAN13=n.default,t.EAN8=a.default,t.EAN5=o.default,t.EAN2=i.default,t.UPC=s.default,t.UPCE=l.default},32655:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GenericBarcode=void 0;var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=function(e){function t(e,r){return function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&("object"==typeof t||"function"==typeof t)?t:e}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r))}return function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,[{key:"encode",value:function(){return{data:"10101010101010101010101010101010101010101",text:this.text}}},{key:"valid",value:function(){return!0}}]),t}(function(e){return e&&e.__esModule?e:{default:e}}(r(16018)).default);t.GenericBarcode=a},93136:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=r(87130),o=function(e){function t(){return function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&("object"==typeof t||"function"==typeof t)?t:e}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,[{key:"valid",value:function(){return -1!==this.data.search(/^([0-9]{2})+$/)}},{key:"encode",value:function(){var e=this,t=this.data.match(/.{2}/g).map(function(t){return e.encodePair(t)}).join("");return{data:a.START_BIN+t+a.END_BIN,text:this.text}}},{key:"encodePair",value:function(e){var t=a.BINARIES[e[1]];return a.BINARIES[e[0]].split("").map(function(e,r){return("1"===e?"111":"1")+("1"===t[r]?"000":"0")}).join("")}}]),t}(function(e){return e&&e.__esModule?e:{default:e}}(r(16018)).default);t.default=o},70787:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=function(e){return e&&e.__esModule?e:{default:e}}(r(93136)),o=function(e){var t=e.substr(0,13).split("").map(function(e){return parseInt(e,10)}).reduce(function(e,t,r){return e+t*(3-r%2*2)},0);return 10*Math.ceil(t/10)-t},i=function(e){function t(e,r){return function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,t),-1!==e.search(/^[0-9]{13}$/)&&(e+=o(e)),function(e,t){if(!e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&("object"==typeof t||"function"==typeof t)?t:e}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r))}return function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,[{key:"valid",value:function(){return -1!==this.data.search(/^[0-9]{14}$/)&&+this.data[13]===o(this.data)}}]),t}(a.default);t.default=i},87130:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.START_BIN="1010",t.END_BIN="11101",t.BINARIES=["00110","10001","01001","11000","00101","10100","01100","00011","10010","01010"]},87061:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ITF14=t.ITF=void 0;var n=o(r(93136)),a=o(r(70787));function o(e){return e&&e.__esModule?e:{default:e}}t.ITF=n.default,t.ITF14=a.default},11014:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=function(e){function t(e,r){return function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&("object"==typeof t||"function"==typeof t)?t:e}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r))}return function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,[{key:"encode",value:function(){for(var e="110",t=0;t<this.data.length;t++){var r=parseInt(this.data[t]).toString(2);r=function(e,t){for(var r=0;r<t;r++)e="0"+e;return e}(r,4-r.length);for(var n=0;n<r.length;n++)e+="0"==r[n]?"100":"110"}return{data:e+="1001",text:this.text}}},{key:"valid",value:function(){return -1!==this.data.search(/^[0-9]+$/)}}]),t}(function(e){return e&&e.__esModule?e:{default:e}}(r(16018)).default);t.default=a},94575:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e){return e&&e.__esModule?e:{default:e}}(r(11014)),a=r(42250),o=function(e){function t(e,r){return function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&("object"==typeof t||"function"==typeof t)?t:e}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e+(0,a.mod10)(e),r))}return function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(n.default);t.default=o},74858:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e){return e&&e.__esModule?e:{default:e}}(r(11014)),a=r(42250),o=function(e){function t(e,r){return function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,t),e+=(0,a.mod10)(e),e+=(0,a.mod10)(e),function(e,t){if(!e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&("object"==typeof t||"function"==typeof t)?t:e}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r))}return function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(n.default);t.default=o},32317:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e){return e&&e.__esModule?e:{default:e}}(r(11014)),a=r(42250),o=function(e){function t(e,r){return function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&("object"==typeof t||"function"==typeof t)?t:e}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e+(0,a.mod11)(e),r))}return function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(n.default);t.default=o},36672:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e){return e&&e.__esModule?e:{default:e}}(r(11014)),a=r(42250),o=function(e){function t(e,r){return function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,t),e+=(0,a.mod11)(e),e+=(0,a.mod10)(e),function(e,t){if(!e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&("object"==typeof t||"function"==typeof t)?t:e}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r))}return function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(n.default);t.default=o},42250:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mod10=function(e){for(var t=0,r=0;r<e.length;r++){var n=parseInt(e[r]);(r+e.length)%2==0?t+=n:t+=2*n%10+Math.floor(2*n/10)}return(10-t%10)%10},t.mod11=function(e){for(var t=0,r=[2,3,4,5,6,7],n=0;n<e.length;n++){var a=parseInt(e[e.length-1-n]);t+=r[n%r.length]*a}return(11-t%11)%11}},52512:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MSI1110=t.MSI1010=t.MSI11=t.MSI10=t.MSI=void 0;var n=l(r(11014)),a=l(r(94575)),o=l(r(32317)),i=l(r(74858)),s=l(r(36672));function l(e){return e&&e.__esModule?e:{default:e}}t.MSI=n.default,t.MSI10=a.default,t.MSI11=o.default,t.MSI1010=i.default,t.MSI1110=s.default},58378:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.codabar=void 0;var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=function(e){function t(e,r){(function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")})(this,t),0===e.search(/^[0-9\-\$\:\.\+\/]+$/)&&(e="A"+e+"A");var n=function(e,t){if(!e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&("object"==typeof t||"function"==typeof t)?t:e}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e.toUpperCase(),r));return n.text=n.options.text||n.text.replace(/[A-D]/g,""),n}return function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,[{key:"valid",value:function(){return -1!==this.data.search(/^[A-D][0-9\-\$\:\.\+\/]+[A-D]$/)}},{key:"encode",value:function(){for(var e=[],t=this.getEncodings(),r=0;r<this.data.length;r++)e.push(t[this.data.charAt(r)]),r!==this.data.length-1&&e.push("0");return{text:this.text,data:e.join("")}}},{key:"getEncodings",value:function(){return{0:"101010011",1:"101011001",2:"101001011",3:"110010101",4:"101101001",5:"110101001",6:"100101011",7:"100101101",8:"100110101",9:"110100101","-":"101001101",$:"101100101",":":"1101011011","/":"1101101011",".":"1101101101","+":"1011011011",A:"1011001001",B:"1001001011",C:"1010010011",D:"1010011001"}}}]),t}(function(e){return e&&e.__esModule?e:{default:e}}(r(16018)).default);t.codabar=a},47434:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(7266),a=r(2560),o=r(12692),i=r(87061),s=r(52512),l=r(78891),A=r(58378),c=r(20980),d=r(32655);t.default={CODE39:n.CODE39,CODE128:a.CODE128,CODE128A:a.CODE128A,CODE128B:a.CODE128B,CODE128C:a.CODE128C,EAN13:o.EAN13,EAN8:o.EAN8,EAN5:o.EAN5,EAN2:o.EAN2,UPC:o.UPC,UPCE:o.UPCE,ITF14:i.ITF14,ITF:i.ITF,MSI:s.MSI,MSI10:s.MSI10,MSI11:s.MSI11,MSI1010:s.MSI1010,MSI1110:s.MSI1110,pharmacode:l.pharmacode,codabar:A.codabar,CODE93:c.CODE93,CODE93FullASCII:c.CODE93FullASCII,GenericBarcode:d.GenericBarcode}},78891:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.pharmacode=void 0;var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=function(e){function t(e,r){!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&("object"==typeof t||"function"==typeof t)?t:e}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r));return n.number=parseInt(e,10),n}return function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,[{key:"encode",value:function(){for(var e=this.number,t="";!isNaN(e)&&0!=e;)e%2==0?(t="11100"+t,e=(e-2)/2):(t="100"+t,e=(e-1)/2);return{data:t=t.slice(0,-2),text:this.text}}},{key:"valid",value:function(){return this.number>=3&&this.number<=131070}}]),t}(function(e){return e&&e.__esModule?e:{default:e}}(r(16018)).default);t.pharmacode=a},85473:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),n=function(){function e(t){(function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")})(this,e),this.api=t}return r(e,[{key:"handleCatch",value:function(e){if("InvalidInputException"===e.name){if(this.api._options.valid!==this.api._defaults.valid)this.api._options.valid(!1);else throw e.message}else throw e;this.api.render=function(){}}},{key:"wrapBarcodeCall",value:function(e){try{var t=e.apply(void 0,arguments);return this.api._options.valid(!0),t}catch(e){return this.handleCatch(e),this.api}}}]),e}();t.default=n},52913:(e,t)=>{"use strict";function r(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&("object"==typeof t||"function"==typeof t)?t:e}function a(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){function t(e,a){r(this,t);var o=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return o.name="InvalidInputException",o.symbology=e,o.input=a,o.message='"'+o.input+'" is not a valid input for '+o.symbology,o}return a(t,e),t}(Error),i=function(e){function t(){r(this,t);var e=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.name="InvalidElementException",e.message="Not supported type to render on",e}return a(t,e),t}(Error),s=function(e){function t(){r(this,t);var e=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.name="NoElementException",e.message="No element to render on.",e}return a(t,e),t}(Error);t.InvalidInputException=o,t.InvalidElementException=i,t.NoElementException=s},13646:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return e.marginTop=e.marginTop||e.margin,e.marginBottom=e.marginBottom||e.margin,e.marginRight=e.marginRight||e.margin,e.marginLeft=e.marginLeft||e.margin,e}},22449:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=o(r(8466)),a=o(r(40640));function o(e){return e&&e.__esModule?e:{default:e}}t.default=function(e){var t={};for(var r in a.default)a.default.hasOwnProperty(r)&&(e.hasAttribute("jsbarcode-"+r.toLowerCase())&&(t[r]=e.getAttribute("jsbarcode-"+r.toLowerCase())),e.hasAttribute("data-"+r.toLowerCase())&&(t[r]=e.getAttribute("data-"+r.toLowerCase())));return t.value=e.getAttribute("jsbarcode-value")||e.getAttribute("data-value"),t=(0,n.default)(t)}},72951:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=s(r(22449)),o=s(r(76684)),i=r(52913);function s(e){return e&&e.__esModule?e:{default:e}}t.default=function e(t){if("string"==typeof t)return function(t){var r=document.querySelectorAll(t);if(0!==r.length){for(var n=[],a=0;a<r.length;a++)n.push(e(r[a]));return n}}(t);if(Array.isArray(t)){for(var r,s=[],l=0;l<t.length;l++)s.push(e(t[l]));return s}if("undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLImageElement)return{element:r=document.createElement("canvas"),options:(0,a.default)(t),renderer:o.default.CanvasRenderer,afterRender:function(){t.setAttribute("src",r.toDataURL())}};if(t&&t.nodeName&&"svg"===t.nodeName.toLowerCase()||"undefined"!=typeof SVGElement&&t instanceof SVGElement)return{element:t,options:(0,a.default)(t),renderer:o.default.SVGRenderer};if("undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement)return{element:t,options:(0,a.default)(t),renderer:o.default.CanvasRenderer};if(t&&t.getContext)return{element:t,renderer:o.default.CanvasRenderer};if(t&&(void 0===t?"undefined":n(t))==="object"&&!t.nodeName)return{element:t,renderer:o.default.ObjectRenderer};else throw new i.InvalidElementException}},37613:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=[];return function e(r){if(Array.isArray(r))for(var n=0;n<r.length;n++)e(r[n]);else r.text=r.text||"",r.data=r.data||"",t.push(r)}(e),t}},73811:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};t.default=function(e,t){return r({},e,t)}},8466:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=["width","height","textMargin","fontSize","margin","marginTop","marginBottom","marginLeft","marginRight"];for(var r in t)t.hasOwnProperty(r)&&"string"==typeof e[r=t[r]]&&(e[r]=parseInt(e[r],10));return"string"==typeof e.displayValue&&(e.displayValue="false"!=e.displayValue),e}},40640:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={width:2,height:100,format:"auto",displayValue:!0,fontOptions:"",font:"monospace",text:void 0,textAlign:"center",textPosition:"bottom",textMargin:2,fontSize:20,background:"#ffffff",lineColor:"#000000",margin:10,marginTop:void 0,marginBottom:void 0,marginLeft:void 0,marginRight:void 0,valid:function(){}}},43697:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=function(e){return e&&e.__esModule?e:{default:e}}(r(73811)),o=r(428),i=function(){function e(t,r,n){(function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")})(this,e),this.canvas=t,this.encodings=r,this.options=n}return n(e,[{key:"render",value:function(){if(!this.canvas.getContext)throw Error("The browser does not support canvas.");this.prepareCanvas();for(var e=0;e<this.encodings.length;e++){var t=(0,a.default)(this.options,this.encodings[e].options);this.drawCanvasBarcode(t,this.encodings[e]),this.drawCanvasText(t,this.encodings[e]),this.moveCanvasDrawing(this.encodings[e])}this.restoreCanvas()}},{key:"prepareCanvas",value:function(){var e=this.canvas.getContext("2d");e.save(),(0,o.calculateEncodingAttributes)(this.encodings,this.options,e);var t=(0,o.getTotalWidthOfEncodings)(this.encodings),r=(0,o.getMaximumHeightOfEncodings)(this.encodings);this.canvas.width=t+this.options.marginLeft+this.options.marginRight,this.canvas.height=r,e.clearRect(0,0,this.canvas.width,this.canvas.height),this.options.background&&(e.fillStyle=this.options.background,e.fillRect(0,0,this.canvas.width,this.canvas.height)),e.translate(this.options.marginLeft,0)}},{key:"drawCanvasBarcode",value:function(e,t){var r,n=this.canvas.getContext("2d"),a=t.data;r="top"==e.textPosition?e.marginTop+e.fontSize+e.textMargin:e.marginTop,n.fillStyle=e.lineColor;for(var o=0;o<a.length;o++){var i=o*e.width+t.barcodePadding;"1"===a[o]?n.fillRect(i,r,e.width,e.height):a[o]&&n.fillRect(i,r,e.width,e.height*a[o])}}},{key:"drawCanvasText",value:function(e,t){var r,n,a=this.canvas.getContext("2d"),o=e.fontOptions+" "+e.fontSize+"px "+e.font;e.displayValue&&(n="top"==e.textPosition?e.marginTop+e.fontSize-e.textMargin:e.height+e.textMargin+e.marginTop+e.fontSize,a.font=o,"left"==e.textAlign||t.barcodePadding>0?(r=0,a.textAlign="left"):"right"==e.textAlign?(r=t.width-1,a.textAlign="right"):(r=t.width/2,a.textAlign="center"),a.fillText(t.text,r,n))}},{key:"moveCanvasDrawing",value:function(e){this.canvas.getContext("2d").translate(e.width,0)}},{key:"restoreCanvas",value:function(){this.canvas.getContext("2d").restore()}}]),e}();t.default=i},76684:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(r(43697)),a=i(r(97768)),o=i(r(73546));function i(e){return e&&e.__esModule?e:{default:e}}t.default={CanvasRenderer:n.default,SVGRenderer:a.default,ObjectRenderer:o.default}},73546:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),n=function(){function e(t,r,n){(function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")})(this,e),this.object=t,this.encodings=r,this.options=n}return r(e,[{key:"render",value:function(){this.object.encodings=this.encodings}}]),e}();t.default=n},428:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getTotalWidthOfEncodings=t.calculateEncodingAttributes=t.getBarcodePadding=t.getEncodingHeight=t.getMaximumHeightOfEncodings=void 0;var n=function(e){return e&&e.__esModule?e:{default:e}}(r(73811));function a(e,t){return t.height+(t.displayValue&&e.text.length>0?t.fontSize+t.textMargin:0)+t.marginTop+t.marginBottom}function o(e,t,r){if(r.displayValue&&t<e){if("center"==r.textAlign)return Math.floor((e-t)/2);if("left"==r.textAlign);else if("right"==r.textAlign)return Math.floor(e-t)}return 0}t.getMaximumHeightOfEncodings=function(e){for(var t=0,r=0;r<e.length;r++)e[r].height>t&&(t=e[r].height);return t},t.getEncodingHeight=a,t.getBarcodePadding=o,t.calculateEncodingAttributes=function(e,t,r){for(var i=0;i<e.length;i++){var s,l=e[i],A=(0,n.default)(t,l.options);s=A.displayValue?function(e,t,r){if(r)n=r;else{if("undefined"==typeof document)return 0;n=document.createElement("canvas").getContext("2d")}n.font=t.fontOptions+" "+t.fontSize+"px "+t.font;var n,a=n.measureText(e);return a?a.width:0}(l.text,A,r):0;var c=l.data.length*A.width;l.width=Math.ceil(Math.max(s,c)),l.height=a(l,A),l.barcodePadding=o(s,c,A)}},t.getTotalWidthOfEncodings=function(e){for(var t=0,r=0;r<e.length;r++)t+=e[r].width;return t}},97768:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=function(e){return e&&e.__esModule?e:{default:e}}(r(73811)),o=r(428),i="http://www.w3.org/2000/svg",s=function(){function e(t,r,n){(function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")})(this,e),this.svg=t,this.encodings=r,this.options=n,this.document=n.xmlDocument||document}return n(e,[{key:"render",value:function(){var e=this.options.marginLeft;this.prepareSVG();for(var t=0;t<this.encodings.length;t++){var r=this.encodings[t],n=(0,a.default)(this.options,r.options),o=this.createGroup(e,n.marginTop,this.svg);this.setGroupOptions(o,n),this.drawSvgBarcode(o,n,r),this.drawSVGText(o,n,r),e+=r.width}}},{key:"prepareSVG",value:function(){for(;this.svg.firstChild;)this.svg.removeChild(this.svg.firstChild);(0,o.calculateEncodingAttributes)(this.encodings,this.options);var e=(0,o.getTotalWidthOfEncodings)(this.encodings),t=(0,o.getMaximumHeightOfEncodings)(this.encodings),r=e+this.options.marginLeft+this.options.marginRight;this.setSvgAttributes(r,t),this.options.background&&this.drawRect(0,0,r,t,this.svg).setAttribute("style","fill:"+this.options.background+";")}},{key:"drawSvgBarcode",value:function(e,t,r){var n,a=r.data;n="top"==t.textPosition?t.fontSize+t.textMargin:0;for(var o=0,i=0,s=0;s<a.length;s++)i=s*t.width+r.barcodePadding,"1"===a[s]?o++:o>0&&(this.drawRect(i-t.width*o,n,t.width*o,t.height,e),o=0);o>0&&this.drawRect(i-t.width*(o-1),n,t.width*o,t.height,e)}},{key:"drawSVGText",value:function(e,t,r){var n,a,o=this.document.createElementNS(i,"text");t.displayValue&&(o.setAttribute("style","font:"+t.fontOptions+" "+t.fontSize+"px "+t.font),a="top"==t.textPosition?t.fontSize-t.textMargin:t.height+t.textMargin+t.fontSize,"left"==t.textAlign||r.barcodePadding>0?(n=0,o.setAttribute("text-anchor","start")):"right"==t.textAlign?(n=r.width-1,o.setAttribute("text-anchor","end")):(n=r.width/2,o.setAttribute("text-anchor","middle")),o.setAttribute("x",n),o.setAttribute("y",a),o.appendChild(this.document.createTextNode(r.text)),e.appendChild(o))}},{key:"setSvgAttributes",value:function(e,t){var r=this.svg;r.setAttribute("width",e+"px"),r.setAttribute("height",t+"px"),r.setAttribute("x","0px"),r.setAttribute("y","0px"),r.setAttribute("viewBox","0 0 "+e+" "+t),r.setAttribute("xmlns",i),r.setAttribute("version","1.1"),r.setAttribute("style","transform: translate(0,0)")}},{key:"createGroup",value:function(e,t,r){var n=this.document.createElementNS(i,"g");return n.setAttribute("transform","translate("+e+", "+t+")"),r.appendChild(n),n}},{key:"setGroupOptions",value:function(e,t){e.setAttribute("style","fill:"+t.lineColor+";")}},{key:"drawRect",value:function(e,t,r,n,a){var o=this.document.createElementNS(i,"rect");return o.setAttribute("x",e),o.setAttribute("y",t),o.setAttribute("width",r),o.setAttribute("height",n),a.appendChild(o),o}}]),e}();t.default=s},44654:(e,t,r)=>{var n=r(7017)(r(39288),"DataView");e.exports=n},27513:(e,t,r)=>{var n=r(7392),a=r(29247),o=r(84190),i=r(66193),s=r(66681);function l(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}l.prototype.clear=n,l.prototype.delete=a,l.prototype.get=o,l.prototype.has=i,l.prototype.set=s,e.exports=l},58148:(e,t,r)=>{var n=r(38048),a=r(82142),o=r(83226),i=r(84001),s=r(31127);function l(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}l.prototype.clear=n,l.prototype.delete=a,l.prototype.get=o,l.prototype.has=i,l.prototype.set=s,e.exports=l},67926:(e,t,r)=>{var n=r(7017)(r(39288),"Map");e.exports=n},30095:(e,t,r)=>{var n=r(86487),a=r(93976),o=r(91053),i=r(29941),s=r(70144);function l(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}l.prototype.clear=n,l.prototype.delete=a,l.prototype.get=o,l.prototype.has=i,l.prototype.set=s,e.exports=l},9186:(e,t,r)=>{var n=r(7017)(r(39288),"Promise");e.exports=n},39746:(e,t,r)=>{var n=r(7017)(r(39288),"Set");e.exports=n},43484:(e,t,r)=>{var n=r(30095),a=r(51793),o=r(59191);function i(e){var t=-1,r=null==e?0:e.length;for(this.__data__=new n;++t<r;)this.add(e[t])}i.prototype.add=i.prototype.push=a,i.prototype.has=o,e.exports=i},82006:(e,t,r)=>{var n=r(58148),a=r(82795),o=r(9113),i=r(80934),s=r(68732),l=r(5525);function A(e){var t=this.__data__=new n(e);this.size=t.size}A.prototype.clear=a,A.prototype.delete=o,A.prototype.get=i,A.prototype.has=s,A.prototype.set=l,e.exports=A},76245:(e,t,r)=>{var n=r(39288).Symbol;e.exports=n},89377:(e,t,r)=>{var n=r(39288).Uint8Array;e.exports=n},35803:(e,t,r)=>{var n=r(7017)(r(39288),"WeakMap");e.exports=n},39137:e=>{e.exports=function(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}},12977:e=>{e.exports=function(e,t){for(var r=-1,n=null==e?0:e.length;++r<n;)if(!t(e[r],r,e))return!1;return!0}},17536:e=>{e.exports=function(e,t){for(var r=-1,n=null==e?0:e.length,a=0,o=[];++r<n;){var i=e[r];t(i,r,e)&&(o[a++]=i)}return o}},34776:(e,t,r)=>{var n=r(44658);e.exports=function(e,t){return!!(null==e?0:e.length)&&n(e,t,0)>-1}},19544:e=>{e.exports=function(e,t,r){for(var n=-1,a=null==e?0:e.length;++n<a;)if(r(t,e[n]))return!0;return!1}},77133:(e,t,r)=>{var n=r(84643),a=r(46148),o=r(32966),i=r(10750),s=r(19699),l=r(42191),A=Object.prototype.hasOwnProperty;e.exports=function(e,t){var r=o(e),c=!r&&a(e),d=!r&&!c&&i(e),u=!r&&!c&&!d&&l(e),h=r||c||d||u,f=h?n(e.length,String):[],p=f.length;for(var m in e)(t||A.call(e,m))&&!(h&&("length"==m||d&&("offset"==m||"parent"==m)||u&&("buffer"==m||"byteLength"==m||"byteOffset"==m)||s(m,p)))&&f.push(m);return f}},29738:e=>{e.exports=function(e,t){for(var r=-1,n=null==e?0:e.length,a=Array(n);++r<n;)a[r]=t(e[r],r,e);return a}},18939:e=>{e.exports=function(e,t){for(var r=-1,n=t.length,a=e.length;++r<n;)e[a+r]=t[r];return e}},83057:e=>{e.exports=function(e,t){for(var r=-1,n=null==e?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1}},72375:e=>{e.exports=function(e){return e.split("")}},33646:(e,t,r)=>{var n=r(64111);e.exports=function(e,t){for(var r=e.length;r--;)if(n(e[r][0],t))return r;return -1}},15216:(e,t,r)=>{var n=r(99e3);e.exports=function(e,t,r){"__proto__"==t&&n?n(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}},57706:(e,t,r)=>{var n=r(59796),a=r(15271)(n);e.exports=a},78545:(e,t,r)=>{var n=r(57706);e.exports=function(e,t){var r=!0;return n(e,function(e,n,a){return r=!!t(e,n,a)}),r}},18401:(e,t,r)=>{var n=r(76871);e.exports=function(e,t,r){for(var a=-1,o=e.length;++a<o;){var i=e[a],s=t(i);if(null!=s&&(void 0===l?s==s&&!n(s):r(s,l)))var l=s,A=i}return A}},47941:e=>{e.exports=function(e,t,r,n){for(var a=e.length,o=r+(n?1:-1);n?o--:++o<a;)if(t(e[o],o,e))return o;return -1}},24354:(e,t,r)=>{var n=r(18939),a=r(62565);e.exports=function e(t,r,o,i,s){var l=-1,A=t.length;for(o||(o=a),s||(s=[]);++l<A;){var c=t[l];r>0&&o(c)?r>1?e(c,r-1,o,i,s):n(s,c):i||(s[s.length]=c)}return s}},67917:(e,t,r)=>{var n=r(13012)();e.exports=n},59796:(e,t,r)=>{var n=r(67917),a=r(85865);e.exports=function(e,t){return e&&n(e,t,a)}},57305:(e,t,r)=>{var n=r(80204),a=r(1094);e.exports=function(e,t){t=n(t,e);for(var r=0,o=t.length;null!=e&&r<o;)e=e[a(t[r++])];return r&&r==o?e:void 0}},24003:(e,t,r)=>{var n=r(18939),a=r(32966);e.exports=function(e,t,r){var o=t(e);return a(e)?o:n(o,r(e))}},1534:(e,t,r)=>{var n=r(76245),a=r(34244),o=r(13390),i=n?n.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":i&&i in Object(e)?a(e):o(e)}},20913:e=>{e.exports=function(e,t){return e>t}},50045:e=>{e.exports=function(e,t){return null!=e&&t in Object(e)}},44658:(e,t,r)=>{var n=r(47941),a=r(22570),o=r(936);e.exports=function(e,t,r){return t==t?o(e,t,r):n(e,a,r)}},79574:(e,t,r)=>{var n=r(1534),a=r(91380);e.exports=function(e){return a(e)&&"[object Arguments]"==n(e)}},88132:(e,t,r)=>{var n=r(80588),a=r(91380);e.exports=function e(t,r,o,i,s){return t===r||(null!=t&&null!=r&&(a(t)||a(r))?n(t,r,o,i,e,s):t!=t&&r!=r)}},80588:(e,t,r)=>{var n=r(82006),a=r(12317),o=r(99487),i=r(1958),s=r(74963),l=r(32966),A=r(10750),c=r(42191),d="[object Arguments]",u="[object Array]",h="[object Object]",f=Object.prototype.hasOwnProperty;e.exports=function(e,t,r,p,m,g){var x=l(e),b=l(t),y=x?u:s(e),v=b?u:s(t);y=y==d?h:y,v=v==d?h:v;var w=y==h,k=v==h,B=y==v;if(B&&A(e)){if(!A(t))return!1;x=!0,w=!1}if(B&&!w)return g||(g=new n),x||c(e)?a(e,t,r,p,m,g):o(e,t,y,r,p,m,g);if(!(1&r)){var j=w&&f.call(e,"__wrapped__"),C=k&&f.call(t,"__wrapped__");if(j||C){var N=j?e.value():e,S=C?t.value():t;return g||(g=new n),m(N,S,r,p,g)}}return!!B&&(g||(g=new n),i(e,t,r,p,m,g))}},7240:(e,t,r)=>{var n=r(82006),a=r(88132);e.exports=function(e,t,r,o){var i=r.length,s=i,l=!o;if(null==e)return!s;for(e=Object(e);i--;){var A=r[i];if(l&&A[2]?A[1]!==e[A[0]]:!(A[0]in e))return!1}for(;++i<s;){var c=(A=r[i])[0],d=e[c],u=A[1];if(l&&A[2]){if(void 0===d&&!(c in e))return!1}else{var h=new n;if(o)var f=o(d,u,c,e,t,h);if(!(void 0===f?a(u,d,3,o,h):f))return!1}}return!0}},22570:e=>{e.exports=function(e){return e!=e}},74104:(e,t,r)=>{var n=r(85586),a=r(15621),o=r(62880),i=r(81708),s=/^\[object .+?Constructor\]$/,l=Object.prototype,A=Function.prototype.toString,c=l.hasOwnProperty,d=RegExp("^"+A.call(c).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=function(e){return!(!o(e)||a(e))&&(n(e)?d:s).test(i(e))}},17633:(e,t,r)=>{var n=r(1534),a=r(99002),o=r(91380),i={};i["[object Float32Array]"]=i["[object Float64Array]"]=i["[object Int8Array]"]=i["[object Int16Array]"]=i["[object Int32Array]"]=i["[object Uint8Array]"]=i["[object Uint8ClampedArray]"]=i["[object Uint16Array]"]=i["[object Uint32Array]"]=!0,i["[object Arguments]"]=i["[object Array]"]=i["[object ArrayBuffer]"]=i["[object Boolean]"]=i["[object DataView]"]=i["[object Date]"]=i["[object Error]"]=i["[object Function]"]=i["[object Map]"]=i["[object Number]"]=i["[object Object]"]=i["[object RegExp]"]=i["[object Set]"]=i["[object String]"]=i["[object WeakMap]"]=!1,e.exports=function(e){return o(e)&&a(e.length)&&!!i[n(e)]}},44729:(e,t,r)=>{var n=r(71069),a=r(44723),o=r(24576),i=r(32966),s=r(94416);e.exports=function(e){return"function"==typeof e?e:null==e?o:"object"==typeof e?i(e)?a(e[0],e[1]):n(e):s(e)}},54190:(e,t,r)=>{var n=r(83314),a=r(66045),o=Object.prototype.hasOwnProperty;e.exports=function(e){if(!n(e))return a(e);var t=[];for(var r in Object(e))o.call(e,r)&&"constructor"!=r&&t.push(r);return t}},16409:e=>{e.exports=function(e,t){return e<t}},64635:(e,t,r)=>{var n=r(57706),a=r(17632);e.exports=function(e,t){var r=-1,o=a(e)?Array(e.length):[];return n(e,function(e,n,a){o[++r]=t(e,n,a)}),o}},71069:(e,t,r)=>{var n=r(7240),a=r(35906),o=r(17106);e.exports=function(e){var t=a(e);return 1==t.length&&t[0][2]?o(t[0][0],t[0][1]):function(r){return r===e||n(r,e,t)}}},44723:(e,t,r)=>{var n=r(88132),a=r(9459),o=r(1433),i=r(76958),s=r(61623),l=r(17106),A=r(1094);e.exports=function(e,t){return i(e)&&s(t)?l(A(e),t):function(r){var i=a(r,e);return void 0===i&&i===t?o(r,e):n(t,i,3)}}},40620:(e,t,r)=>{var n=r(29738),a=r(57305),o=r(44729),i=r(64635),s=r(12704),l=r(96291),A=r(52463),c=r(24576),d=r(32966);e.exports=function(e,t,r){t=t.length?n(t,function(e){return d(e)?function(t){return a(t,1===e.length?e[0]:e)}:e}):[c];var u=-1;return t=n(t,l(o)),s(i(e,function(e,r,a){return{criteria:n(t,function(t){return t(e)}),index:++u,value:e}}),function(e,t){return A(e,t,r)})}},78974:e=>{e.exports=function(e){return function(t){return null==t?void 0:t[e]}}},3243:(e,t,r)=>{var n=r(57305);e.exports=function(e){return function(t){return n(t,e)}}},97502:e=>{var t=Math.ceil,r=Math.max;e.exports=function(e,n,a,o){for(var i=-1,s=r(t((n-e)/(a||1)),0),l=Array(s);s--;)l[o?s:++i]=e,e+=a;return l}},44563:(e,t,r)=>{var n=r(24576),a=r(21112),o=r(234);e.exports=function(e,t){return o(a(e,t,n),e+"")}},44578:(e,t,r)=>{var n=r(44347),a=r(99e3),o=r(24576),i=a?function(e,t){return a(e,"toString",{configurable:!0,enumerable:!1,value:n(t),writable:!0})}:o;e.exports=i},55804:e=>{e.exports=function(e,t,r){var n=-1,a=e.length;t<0&&(t=-t>a?0:a+t),(r=r>a?a:r)<0&&(r+=a),a=t>r?0:r-t>>>0,t>>>=0;for(var o=Array(a);++n<a;)o[n]=e[n+t];return o}},64993:(e,t,r)=>{var n=r(57706);e.exports=function(e,t){var r;return n(e,function(e,n,a){return!(r=t(e,n,a))}),!!r}},12704:e=>{e.exports=function(e,t){var r=e.length;for(e.sort(t);r--;)e[r]=e[r].value;return e}},84643:e=>{e.exports=function(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}},96115:(e,t,r)=>{var n=r(76245),a=r(29738),o=r(32966),i=r(76871),s=1/0,l=n?n.prototype:void 0,A=l?l.toString:void 0;e.exports=function e(t){if("string"==typeof t)return t;if(o(t))return a(t,e)+"";if(i(t))return A?A.call(t):"";var r=t+"";return"0"==r&&1/t==-s?"-0":r}},37192:(e,t,r)=>{var n=r(5587),a=/^\s+/;e.exports=function(e){return e?e.slice(0,n(e)+1).replace(a,""):e}},96291:e=>{e.exports=function(e){return function(t){return e(t)}}},21213:(e,t,r)=>{var n=r(43484),a=r(34776),o=r(19544),i=r(5354),s=r(51512),l=r(78874);e.exports=function(e,t,r){var A=-1,c=a,d=e.length,u=!0,h=[],f=h;if(r)u=!1,c=o;else if(d>=200){var p=t?null:s(e);if(p)return l(p);u=!1,c=i,f=new n}else f=t?[]:h;i:for(;++A<d;){var m=e[A],g=t?t(m):m;if(m=r||0!==m?m:0,u&&g==g){for(var x=f.length;x--;)if(f[x]===g)continue i;t&&f.push(g),h.push(m)}else c(f,g,r)||(f!==h&&f.push(g),h.push(m))}return h}},5354:e=>{e.exports=function(e,t){return e.has(t)}},80204:(e,t,r)=>{var n=r(32966),a=r(76958),o=r(31364),i=r(41029);e.exports=function(e,t){return n(e)?e:a(e,t)?[e]:o(i(e))}},23136:(e,t,r)=>{var n=r(55804);e.exports=function(e,t,r){var a=e.length;return r=void 0===r?a:r,!t&&r>=a?e:n(e,t,r)}},17523:(e,t,r)=>{var n=r(76871);e.exports=function(e,t){if(e!==t){var r=void 0!==e,a=null===e,o=e==e,i=n(e),s=void 0!==t,l=null===t,A=t==t,c=n(t);if(!l&&!c&&!i&&e>t||i&&s&&A&&!l&&!c||a&&s&&A||!r&&A||!o)return 1;if(!a&&!i&&!c&&e<t||c&&r&&o&&!a&&!i||l&&r&&o||!s&&o||!A)return -1}return 0}},52463:(e,t,r)=>{var n=r(17523);e.exports=function(e,t,r){for(var a=-1,o=e.criteria,i=t.criteria,s=o.length,l=r.length;++a<s;){var A=n(o[a],i[a]);if(A){if(a>=l)return A;return A*("desc"==r[a]?-1:1)}}return e.index-t.index}},35987:(e,t,r)=>{var n=r(39288)["__core-js_shared__"];e.exports=n},15271:(e,t,r)=>{var n=r(17632);e.exports=function(e,t){return function(r,a){if(null==r)return r;if(!n(r))return e(r,a);for(var o=r.length,i=t?o:-1,s=Object(r);(t?i--:++i<o)&&!1!==a(s[i],i,s););return r}}},13012:e=>{e.exports=function(e){return function(t,r,n){for(var a=-1,o=Object(t),i=n(t),s=i.length;s--;){var l=i[e?s:++a];if(!1===r(o[l],l,o))break}return t}}},64362:(e,t,r)=>{var n=r(23136),a=r(16888),o=r(78041),i=r(41029);e.exports=function(e){return function(t){var r=a(t=i(t))?o(t):void 0,s=r?r[0]:t.charAt(0),l=r?n(r,1).join(""):t.slice(1);return s[e]()+l}}},59698:(e,t,r)=>{var n=r(44729),a=r(17632),o=r(85865);e.exports=function(e){return function(t,r,i){var s=Object(t);if(!a(t)){var l=n(r,3);t=o(t),r=function(e){return l(s[e],e,s)}}var A=e(t,r,i);return A>-1?s[l?t[A]:A]:void 0}}},81592:(e,t,r)=>{var n=r(97502),a=r(47760),o=r(72616);e.exports=function(e){return function(t,r,i){return i&&"number"!=typeof i&&a(t,r,i)&&(r=i=void 0),t=o(t),void 0===r?(r=t,t=0):r=o(r),i=void 0===i?t<r?1:-1:o(i),n(t,r,i,e)}}},51512:(e,t,r)=>{var n=r(39746),a=r(73525),o=r(78874),i=n&&1/o(new n([,-0]))[1]==1/0?function(e){return new n(e)}:a;e.exports=i},99e3:(e,t,r)=>{var n=r(7017),a=function(){try{var e=n(Object,"defineProperty");return e({},"",{}),e}catch(e){}}();e.exports=a},12317:(e,t,r)=>{var n=r(43484),a=r(83057),o=r(5354);e.exports=function(e,t,r,i,s,l){var A=1&r,c=e.length,d=t.length;if(c!=d&&!(A&&d>c))return!1;var u=l.get(e),h=l.get(t);if(u&&h)return u==t&&h==e;var f=-1,p=!0,m=2&r?new n:void 0;for(l.set(e,t),l.set(t,e);++f<c;){var g=e[f],x=t[f];if(i)var b=A?i(x,g,f,t,e,l):i(g,x,f,e,t,l);if(void 0!==b){if(b)continue;p=!1;break}if(m){if(!a(t,function(e,t){if(!o(m,t)&&(g===e||s(g,e,r,i,l)))return m.push(t)})){p=!1;break}}else if(!(g===x||s(g,x,r,i,l))){p=!1;break}}return l.delete(e),l.delete(t),p}},99487:(e,t,r)=>{var n=r(76245),a=r(89377),o=r(64111),i=r(12317),s=r(59616),l=r(78874),A=n?n.prototype:void 0,c=A?A.valueOf:void 0;e.exports=function(e,t,r,n,A,d,u){switch(r){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)break;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":if(e.byteLength!=t.byteLength||!d(new a(e),new a(t)))break;return!0;case"[object Boolean]":case"[object Date]":case"[object Number]":return o(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var h=s;case"[object Set]":var f=1&n;if(h||(h=l),e.size!=t.size&&!f)break;var p=u.get(e);if(p)return p==t;n|=2,u.set(e,t);var m=i(h(e),h(t),n,A,d,u);return u.delete(e),m;case"[object Symbol]":if(c)return c.call(e)==c.call(t)}return!1}},1958:(e,t,r)=>{var n=r(67),a=Object.prototype.hasOwnProperty;e.exports=function(e,t,r,o,i,s){var l=1&r,A=n(e),c=A.length;if(c!=n(t).length&&!l)return!1;for(var d=c;d--;){var u=A[d];if(!(l?u in t:a.call(t,u)))return!1}var h=s.get(e),f=s.get(t);if(h&&f)return h==t&&f==e;var p=!0;s.set(e,t),s.set(t,e);for(var m=l;++d<c;){var g=e[u=A[d]],x=t[u];if(o)var b=l?o(x,g,u,t,e,s):o(g,x,u,e,t,s);if(!(void 0===b?g===x||i(g,x,r,o,s):b)){p=!1;break}m||(m="constructor"==u)}if(p&&!m){var y=e.constructor,v=t.constructor;y!=v&&"constructor"in e&&"constructor"in t&&!("function"==typeof y&&y instanceof y&&"function"==typeof v&&v instanceof v)&&(p=!1)}return s.delete(e),s.delete(t),p}},37611:e=>{var t="object"==typeof global&&global&&global.Object===Object&&global;e.exports=t},67:(e,t,r)=>{var n=r(24003),a=r(26102),o=r(85865);e.exports=function(e){return n(e,o,a)}},4326:(e,t,r)=>{var n=r(24587);e.exports=function(e,t){var r=e.__data__;return n(t)?r["string"==typeof t?"string":"hash"]:r.map}},35906:(e,t,r)=>{var n=r(61623),a=r(85865);e.exports=function(e){for(var t=a(e),r=t.length;r--;){var o=t[r],i=e[o];t[r]=[o,i,n(i)]}return t}},7017:(e,t,r)=>{var n=r(74104),a=r(12751);e.exports=function(e,t){var r=a(e,t);return n(r)?r:void 0}},89083:(e,t,r)=>{var n=r(87181)(Object.getPrototypeOf,Object);e.exports=n},34244:(e,t,r)=>{var n=r(76245),a=Object.prototype,o=a.hasOwnProperty,i=a.toString,s=n?n.toStringTag:void 0;e.exports=function(e){var t=o.call(e,s),r=e[s];try{e[s]=void 0;var n=!0}catch(e){}var a=i.call(e);return n&&(t?e[s]=r:delete e[s]),a}},26102:(e,t,r)=>{var n=r(17536),a=r(95252),o=Object.prototype.propertyIsEnumerable,i=Object.getOwnPropertySymbols,s=i?function(e){return null==e?[]:n(i(e=Object(e)),function(t){return o.call(e,t)})}:a;e.exports=s},74963:(e,t,r)=>{var n=r(44654),a=r(67926),o=r(9186),i=r(39746),s=r(35803),l=r(1534),A=r(81708),c="[object Map]",d="[object Promise]",u="[object Set]",h="[object WeakMap]",f="[object DataView]",p=A(n),m=A(a),g=A(o),x=A(i),b=A(s),y=l;(n&&y(new n(new ArrayBuffer(1)))!=f||a&&y(new a)!=c||o&&y(o.resolve())!=d||i&&y(new i)!=u||s&&y(new s)!=h)&&(y=function(e){var t=l(e),r="[object Object]"==t?e.constructor:void 0,n=r?A(r):"";if(n)switch(n){case p:return f;case m:return c;case g:return d;case x:return u;case b:return h}return t}),e.exports=y},12751:e=>{e.exports=function(e,t){return null==e?void 0:e[t]}},23932:(e,t,r)=>{var n=r(80204),a=r(46148),o=r(32966),i=r(19699),s=r(99002),l=r(1094);e.exports=function(e,t,r){t=n(t,e);for(var A=-1,c=t.length,d=!1;++A<c;){var u=l(t[A]);if(!(d=null!=e&&r(e,u)))break;e=e[u]}return d||++A!=c?d:!!(c=null==e?0:e.length)&&s(c)&&i(u,c)&&(o(e)||a(e))}},16888:e=>{var t=RegExp("[\\u200d\ud800-\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");e.exports=function(e){return t.test(e)}},7392:(e,t,r)=>{var n=r(67193);e.exports=function(){this.__data__=n?n(null):{},this.size=0}},29247:e=>{e.exports=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}},84190:(e,t,r)=>{var n=r(67193),a=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;if(n){var r=t[e];return"__lodash_hash_undefined__"===r?void 0:r}return a.call(t,e)?t[e]:void 0}},66193:(e,t,r)=>{var n=r(67193),a=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;return n?void 0!==t[e]:a.call(t,e)}},66681:(e,t,r)=>{var n=r(67193);e.exports=function(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=n&&void 0===t?"__lodash_hash_undefined__":t,this}},62565:(e,t,r)=>{var n=r(76245),a=r(46148),o=r(32966),i=n?n.isConcatSpreadable:void 0;e.exports=function(e){return o(e)||a(e)||!!(i&&e&&e[i])}},19699:e=>{var t=/^(?:0|[1-9]\d*)$/;e.exports=function(e,r){var n=typeof e;return!!(r=null==r?9007199254740991:r)&&("number"==n||"symbol"!=n&&t.test(e))&&e>-1&&e%1==0&&e<r}},47760:(e,t,r)=>{var n=r(64111),a=r(17632),o=r(19699),i=r(62880);e.exports=function(e,t,r){if(!i(r))return!1;var s=typeof t;return("number"==s?!!(a(r)&&o(t,r.length)):"string"==s&&t in r)&&n(r[t],e)}},76958:(e,t,r)=>{var n=r(32966),a=r(76871),o=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,i=/^\w*$/;e.exports=function(e,t){if(n(e))return!1;var r=typeof e;return!!("number"==r||"symbol"==r||"boolean"==r||null==e||a(e))||i.test(e)||!o.test(e)||null!=t&&e in Object(t)}},24587:e=>{e.exports=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}},15621:(e,t,r)=>{var n=r(35987),a=function(){var e=/[^.]+$/.exec(n&&n.keys&&n.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();e.exports=function(e){return!!a&&a in e}},83314:e=>{var t=Object.prototype;e.exports=function(e){var r=e&&e.constructor;return e===("function"==typeof r&&r.prototype||t)}},61623:(e,t,r)=>{var n=r(62880);e.exports=function(e){return e==e&&!n(e)}},38048:e=>{e.exports=function(){this.__data__=[],this.size=0}},82142:(e,t,r)=>{var n=r(33646),a=Array.prototype.splice;e.exports=function(e){var t=this.__data__,r=n(t,e);return!(r<0)&&(r==t.length-1?t.pop():a.call(t,r,1),--this.size,!0)}},83226:(e,t,r)=>{var n=r(33646);e.exports=function(e){var t=this.__data__,r=n(t,e);return r<0?void 0:t[r][1]}},84001:(e,t,r)=>{var n=r(33646);e.exports=function(e){return n(this.__data__,e)>-1}},31127:(e,t,r)=>{var n=r(33646);e.exports=function(e,t){var r=this.__data__,a=n(r,e);return a<0?(++this.size,r.push([e,t])):r[a][1]=t,this}},86487:(e,t,r)=>{var n=r(27513),a=r(58148),o=r(67926);e.exports=function(){this.size=0,this.__data__={hash:new n,map:new(o||a),string:new n}}},93976:(e,t,r)=>{var n=r(4326);e.exports=function(e){var t=n(this,e).delete(e);return this.size-=t?1:0,t}},91053:(e,t,r)=>{var n=r(4326);e.exports=function(e){return n(this,e).get(e)}},29941:(e,t,r)=>{var n=r(4326);e.exports=function(e){return n(this,e).has(e)}},70144:(e,t,r)=>{var n=r(4326);e.exports=function(e,t){var r=n(this,e),a=r.size;return r.set(e,t),this.size+=r.size==a?0:1,this}},59616:e=>{e.exports=function(e){var t=-1,r=Array(e.size);return e.forEach(function(e,n){r[++t]=[n,e]}),r}},17106:e=>{e.exports=function(e,t){return function(r){return null!=r&&r[e]===t&&(void 0!==t||e in Object(r))}}},85244:(e,t,r)=>{var n=r(97300);e.exports=function(e){var t=n(e,function(e){return 500===r.size&&r.clear(),e}),r=t.cache;return t}},67193:(e,t,r)=>{var n=r(7017)(Object,"create");e.exports=n},66045:(e,t,r)=>{var n=r(87181)(Object.keys,Object);e.exports=n},7553:(e,t,r)=>{e=r.nmd(e);var n=r(37611),a=t&&!t.nodeType&&t,o=a&&e&&!e.nodeType&&e,i=o&&o.exports===a&&n.process,s=function(){try{var e=o&&o.require&&o.require("util").types;if(e)return e;return i&&i.binding&&i.binding("util")}catch(e){}}();e.exports=s},13390:e=>{var t=Object.prototype.toString;e.exports=function(e){return t.call(e)}},87181:e=>{e.exports=function(e,t){return function(r){return e(t(r))}}},21112:(e,t,r)=>{var n=r(39137),a=Math.max;e.exports=function(e,t,r){return t=a(void 0===t?e.length-1:t,0),function(){for(var o=arguments,i=-1,s=a(o.length-t,0),l=Array(s);++i<s;)l[i]=o[t+i];i=-1;for(var A=Array(t+1);++i<t;)A[i]=o[i];return A[t]=r(l),n(e,this,A)}}},39288:(e,t,r)=>{var n=r(37611),a="object"==typeof self&&self&&self.Object===Object&&self,o=n||a||Function("return this")();e.exports=o},51793:e=>{e.exports=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this}},59191:e=>{e.exports=function(e){return this.__data__.has(e)}},78874:e=>{e.exports=function(e){var t=-1,r=Array(e.size);return e.forEach(function(e){r[++t]=e}),r}},234:(e,t,r)=>{var n=r(44578),a=r(72347)(n);e.exports=a},72347:e=>{var t=Date.now;e.exports=function(e){var r=0,n=0;return function(){var a=t(),o=16-(a-n);if(n=a,o>0){if(++r>=800)return arguments[0]}else r=0;return e.apply(void 0,arguments)}}},82795:(e,t,r)=>{var n=r(58148);e.exports=function(){this.__data__=new n,this.size=0}},9113:e=>{e.exports=function(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}},80934:e=>{e.exports=function(e){return this.__data__.get(e)}},68732:e=>{e.exports=function(e){return this.__data__.has(e)}},5525:(e,t,r)=>{var n=r(58148),a=r(67926),o=r(30095);e.exports=function(e,t){var r=this.__data__;if(r instanceof n){var i=r.__data__;if(!a||i.length<199)return i.push([e,t]),this.size=++r.size,this;r=this.__data__=new o(i)}return r.set(e,t),this.size=r.size,this}},936:e=>{e.exports=function(e,t,r){for(var n=r-1,a=e.length;++n<a;)if(e[n]===t)return n;return -1}},78041:(e,t,r)=>{var n=r(72375),a=r(16888),o=r(38582);e.exports=function(e){return a(e)?o(e):n(e)}},31364:(e,t,r)=>{var n=r(85244),a=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,o=/\\(\\)?/g,i=n(function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(a,function(e,r,n,a){t.push(n?a.replace(o,"$1"):r||e)}),t});e.exports=i},1094:(e,t,r)=>{var n=r(76871),a=1/0;e.exports=function(e){if("string"==typeof e||n(e))return e;var t=e+"";return"0"==t&&1/e==-a?"-0":t}},81708:e=>{var t=Function.prototype.toString;e.exports=function(e){if(null!=e){try{return t.call(e)}catch(e){}try{return e+""}catch(e){}}return""}},5587:e=>{var t=/\s/;e.exports=function(e){for(var r=e.length;r--&&t.test(e.charAt(r)););return r}},38582:e=>{var t="\ud800-\udfff",r="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",n="\ud83c[\udffb-\udfff]",a="[^"+t+"]",o="(?:\ud83c[\udde6-\uddff]){2}",i="[\ud800-\udbff][\udc00-\udfff]",s="(?:"+r+"|"+n+")?",l="[\\ufe0e\\ufe0f]?",A="(?:\\u200d(?:"+[a,o,i].join("|")+")"+l+s+")*",c=RegExp(n+"(?="+n+")|(?:"+[a+r+"?",r,o,i,"["+t+"]"].join("|")+")"+(l+s+A),"g");e.exports=function(e){return e.match(c)||[]}},44347:e=>{e.exports=function(e){return function(){return e}}},19788:(e,t,r)=>{var n=r(62880),a=r(22695),o=r(41309),i=Math.max,s=Math.min;e.exports=function(e,t,r){var l,A,c,d,u,h,f=0,p=!1,m=!1,g=!0;if("function"!=typeof e)throw TypeError("Expected a function");function x(t){var r=l,n=A;return l=A=void 0,f=t,d=e.apply(n,r)}function b(e){var r=e-h,n=e-f;return void 0===h||r>=t||r<0||m&&n>=c}function y(){var e,r,n,o=a();if(b(o))return v(o);u=setTimeout(y,(e=o-h,r=o-f,n=t-e,m?s(n,c-r):n))}function v(e){return(u=void 0,g&&l)?x(e):(l=A=void 0,d)}function w(){var e,r=a(),n=b(r);if(l=arguments,A=this,h=r,n){if(void 0===u)return f=e=h,u=setTimeout(y,t),p?x(e):d;if(m)return clearTimeout(u),u=setTimeout(y,t),x(h)}return void 0===u&&(u=setTimeout(y,t)),d}return t=o(t)||0,n(r)&&(p=!!r.leading,c=(m="maxWait"in r)?i(o(r.maxWait)||0,t):c,g="trailing"in r?!!r.trailing:g),w.cancel=function(){void 0!==u&&clearTimeout(u),f=0,l=h=A=u=void 0},w.flush=function(){return void 0===u?d:v(a())},w}},64111:e=>{e.exports=function(e,t){return e===t||e!=e&&t!=t}},10853:(e,t,r)=>{var n=r(12977),a=r(78545),o=r(44729),i=r(32966),s=r(47760);e.exports=function(e,t,r){var l=i(e)?n:a;return r&&s(e,t,r)&&(t=void 0),l(e,o(t,3))}},9660:(e,t,r)=>{var n=r(59698)(r(38988));e.exports=n},38988:(e,t,r)=>{var n=r(47941),a=r(44729),o=r(57576),i=Math.max;e.exports=function(e,t,r){var s=null==e?0:e.length;if(!s)return -1;var l=null==r?0:o(r);return l<0&&(l=i(s+l,0)),n(e,a(t,3),l)}},78352:(e,t,r)=>{var n=r(24354),a=r(59866);e.exports=function(e,t){return n(a(e,t),1)}},9459:(e,t,r)=>{var n=r(57305);e.exports=function(e,t,r){var a=null==e?void 0:n(e,t);return void 0===a?r:a}},1433:(e,t,r)=>{var n=r(50045),a=r(23932);e.exports=function(e,t){return null!=e&&a(e,t,n)}},24576:e=>{e.exports=function(e){return e}},46148:(e,t,r)=>{var n=r(79574),a=r(91380),o=Object.prototype,i=o.hasOwnProperty,s=o.propertyIsEnumerable,l=n(function(){return arguments}())?n:function(e){return a(e)&&i.call(e,"callee")&&!s.call(e,"callee")};e.exports=l},32966:e=>{var t=Array.isArray;e.exports=t},17632:(e,t,r)=>{var n=r(85586),a=r(99002);e.exports=function(e){return null!=e&&a(e.length)&&!n(e)}},99388:(e,t,r)=>{var n=r(1534),a=r(91380);e.exports=function(e){return!0===e||!1===e||a(e)&&"[object Boolean]"==n(e)}},10750:(e,t,r)=>{e=r.nmd(e);var n=r(39288),a=r(89531),o=t&&!t.nodeType&&t,i=o&&e&&!e.nodeType&&e,s=i&&i.exports===o?n.Buffer:void 0,l=s?s.isBuffer:void 0;e.exports=l||a},81711:(e,t,r)=>{var n=r(88132);e.exports=function(e,t){return n(e,t)}},85586:(e,t,r)=>{var n=r(1534),a=r(62880);e.exports=function(e){if(!a(e))return!1;var t=n(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}},99002:e=>{e.exports=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}},81719:(e,t,r)=>{var n=r(77717);e.exports=function(e){return n(e)&&e!=+e}},20119:e=>{e.exports=function(e){return null==e}},77717:(e,t,r)=>{var n=r(1534),a=r(91380);e.exports=function(e){return"number"==typeof e||a(e)&&"[object Number]"==n(e)}},62880:e=>{e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},91380:e=>{e.exports=function(e){return null!=e&&"object"==typeof e}},36153:(e,t,r)=>{var n=r(1534),a=r(89083),o=r(91380),i=Object.prototype,s=Function.prototype.toString,l=i.hasOwnProperty,A=s.call(Object);e.exports=function(e){if(!o(e)||"[object Object]"!=n(e))return!1;var t=a(e);if(null===t)return!0;var r=l.call(t,"constructor")&&t.constructor;return"function"==typeof r&&r instanceof r&&s.call(r)==A}},4891:(e,t,r)=>{var n=r(1534),a=r(32966),o=r(91380);e.exports=function(e){return"string"==typeof e||!a(e)&&o(e)&&"[object String]"==n(e)}},76871:(e,t,r)=>{var n=r(1534),a=r(91380);e.exports=function(e){return"symbol"==typeof e||a(e)&&"[object Symbol]"==n(e)}},42191:(e,t,r)=>{var n=r(17633),a=r(96291),o=r(7553),i=o&&o.isTypedArray,s=i?a(i):n;e.exports=s},85865:(e,t,r)=>{var n=r(77133),a=r(54190),o=r(17632);e.exports=function(e){return o(e)?n(e):a(e)}},90601:e=>{e.exports=function(e){var t=null==e?0:e.length;return t?e[t-1]:void 0}},59866:(e,t,r)=>{var n=r(29738),a=r(44729),o=r(64635),i=r(32966);e.exports=function(e,t){return(i(e)?n:o)(e,a(t,3))}},13880:(e,t,r)=>{var n=r(15216),a=r(59796),o=r(44729);e.exports=function(e,t){var r={};return t=o(t,3),a(e,function(e,a,o){n(r,a,t(e,a,o))}),r}},31955:(e,t,r)=>{var n=r(18401),a=r(20913),o=r(24576);e.exports=function(e){return e&&e.length?n(e,o,a):void 0}},4344:(e,t,r)=>{var n=r(18401),a=r(20913),o=r(44729);e.exports=function(e,t){return e&&e.length?n(e,o(t,2),a):void 0}},97300:(e,t,r)=>{var n=r(30095);function a(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw TypeError("Expected a function");var r=function(){var n=arguments,a=t?t.apply(this,n):n[0],o=r.cache;if(o.has(a))return o.get(a);var i=e.apply(this,n);return r.cache=o.set(a,i)||o,i};return r.cache=new(a.Cache||n),r}a.Cache=n,e.exports=a},52692:(e,t,r)=>{var n=r(18401),a=r(16409),o=r(24576);e.exports=function(e){return e&&e.length?n(e,o,a):void 0}},72175:(e,t,r)=>{var n=r(18401),a=r(44729),o=r(16409);e.exports=function(e,t){return e&&e.length?n(e,a(t,2),o):void 0}},73525:e=>{e.exports=function(){}},22695:(e,t,r)=>{var n=r(39288);e.exports=function(){return n.Date.now()}},94416:(e,t,r)=>{var n=r(78974),a=r(3243),o=r(76958),i=r(1094);e.exports=function(e){return o(e)?n(i(e)):a(e)}},65680:(e,t,r)=>{var n=r(81592)();e.exports=n},34009:(e,t,r)=>{var n=r(83057),a=r(44729),o=r(64993),i=r(32966),s=r(47760);e.exports=function(e,t,r){var l=i(e)?n:o;return r&&s(e,t,r)&&(t=void 0),l(e,a(t,3))}},77529:(e,t,r)=>{var n=r(24354),a=r(40620),o=r(44563),i=r(47760),s=o(function(e,t){if(null==e)return[];var r=t.length;return r>1&&i(e,t[0],t[1])?t=[]:r>2&&i(t[0],t[1],t[2])&&(t=[t[0]]),a(e,n(t,1),[])});e.exports=s},95252:e=>{e.exports=function(){return[]}},89531:e=>{e.exports=function(){return!1}},69450:(e,t,r)=>{var n=r(19788),a=r(62880);e.exports=function(e,t,r){var o=!0,i=!0;if("function"!=typeof e)throw TypeError("Expected a function");return a(r)&&(o="leading"in r?!!r.leading:o,i="trailing"in r?!!r.trailing:i),n(e,t,{leading:o,maxWait:t,trailing:i})}},72616:(e,t,r)=>{var n=r(41309),a=1/0;e.exports=function(e){return e?(e=n(e))===a||e===-a?(e<0?-1:1)*17976931348623157e292:e==e?e:0:0===e?e:0}},57576:(e,t,r)=>{var n=r(72616);e.exports=function(e){var t=n(e),r=t%1;return t==t?r?t-r:t:0}},41309:(e,t,r)=>{var n=r(37192),a=r(62880),o=r(76871),i=0/0,s=/^[-+]0x[0-9a-f]+$/i,l=/^0b[01]+$/i,A=/^0o[0-7]+$/i,c=parseInt;e.exports=function(e){if("number"==typeof e)return e;if(o(e))return i;if(a(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=a(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=n(e);var r=l.test(e);return r||A.test(e)?c(e.slice(2),r?2:8):s.test(e)?i:+e}},41029:(e,t,r)=>{var n=r(96115);e.exports=function(e){return null==e?"":n(e)}},82511:(e,t,r)=>{var n=r(44729),a=r(21213);e.exports=function(e,t){return e&&e.length?a(e,n(t,2)):[]}},32009:(e,t,r)=>{var n=r(64362)("toUpperCase");e.exports=n},1349:(e,t,r)=>{"use strict";let n=r(41289),a=[function(){},function(e,t,r,n){if(n===t.length)throw Error("Ran out of data");let a=t[n];e[r]=a,e[r+1]=a,e[r+2]=a,e[r+3]=255},function(e,t,r,n){if(n+1>=t.length)throw Error("Ran out of data");let a=t[n];e[r]=a,e[r+1]=a,e[r+2]=a,e[r+3]=t[n+1]},function(e,t,r,n){if(n+2>=t.length)throw Error("Ran out of data");e[r]=t[n],e[r+1]=t[n+1],e[r+2]=t[n+2],e[r+3]=255},function(e,t,r,n){if(n+3>=t.length)throw Error("Ran out of data");e[r]=t[n],e[r+1]=t[n+1],e[r+2]=t[n+2],e[r+3]=t[n+3]}],o=[function(){},function(e,t,r,n){let a=t[0];e[r]=a,e[r+1]=a,e[r+2]=a,e[r+3]=n},function(e,t,r){let n=t[0];e[r]=n,e[r+1]=n,e[r+2]=n,e[r+3]=t[1]},function(e,t,r,n){e[r]=t[0],e[r+1]=t[1],e[r+2]=t[2],e[r+3]=n},function(e,t,r){e[r]=t[0],e[r+1]=t[1],e[r+2]=t[2],e[r+3]=t[3]}];t.dataToBitMap=function(e,t){let r,i,s,l,A=t.width,c=t.height,d=t.depth,u=t.bpp,h=t.interlace;if(8!==d){let t,n;t=[],n=0,r={get:function(r){for(;t.length<r;)!function(){let r,a,o,i,s,l,A,c;if(n===e.length)throw Error("Ran out of data");let u=e[n];switch(n++,d){default:throw Error("unrecognised depth");case 16:A=e[n],n++,t.push((u<<8)+A);break;case 4:A=15&u,c=u>>4,t.push(c,A);break;case 2:s=3&u,l=u>>2&3,A=u>>4&3,c=u>>6&3,t.push(c,A,l,s);break;case 1:r=1&u,a=u>>1&1,o=u>>2&1,i=u>>3&1,s=u>>4&1,l=u>>5&1,A=u>>6&1,c=u>>7&1,t.push(c,A,l,s,i,o,a,r)}}();let a=t.slice(0,r);return t=t.slice(r),a},resetAfterLine:function(){t.length=0},end:function(){if(n!==e.length)throw Error("extra data found")}}}i=d<=8?Buffer.alloc(A*c*4):new Uint16Array(A*c*4);let f=Math.pow(2,d)-1,p=0;if(h)s=n.getImagePasses(A,c),l=n.getInterlaceIterator(A,c);else{let e=0;l=function(){let t=e;return e+=4,t},s=[{width:A,height:c}]}for(let t=0;t<s.length;t++)8===d?p=function(e,t,r,n,o,i){let s=e.width,l=e.height,A=e.index;for(let e=0;e<l;e++)for(let l=0;l<s;l++){let s=r(l,e,A);a[n](t,o,s,i),i+=n}return i}(s[t],i,l,u,e,p):function(e,t,r,n,a,i){let s=e.width,l=e.height,A=e.index;for(let e=0;e<l;e++){for(let l=0;l<s;l++){let s=a.get(n),c=r(l,e,A);o[n](t,s,c,i)}a.resetAfterLine()}}(s[t],i,l,u,r,f);if(8===d){if(p!==e.length)throw Error("extra data found")}else r.end();return i}},23333:(e,t,r)=>{"use strict";let n=r(2949);e.exports=function(e,t,r,a){let o=-1!==[n.COLORTYPE_COLOR_ALPHA,n.COLORTYPE_ALPHA].indexOf(a.colorType);if(a.colorType===a.inputColorType){let t;let r=(new DataView(t=new ArrayBuffer(2)).setInt16(0,256,!0),256!==new Int16Array(t)[0]);if(8===a.bitDepth||16===a.bitDepth&&r)return e}let i=16!==a.bitDepth?e:new Uint16Array(e.buffer),s=255,l=n.COLORTYPE_TO_BPP_MAP[a.inputColorType];4!==l||a.inputHasAlpha||(l=3);let A=n.COLORTYPE_TO_BPP_MAP[a.colorType];16===a.bitDepth&&(s=65535,A*=2);let c=Buffer.alloc(t*r*A),d=0,u=0,h=a.bgColor||{};void 0===h.red&&(h.red=s),void 0===h.green&&(h.green=s),void 0===h.blue&&(h.blue=s);for(let e=0;e<r;e++)for(let e=0;e<t;e++){let e=function(){let e,t,r;let l=s;switch(a.inputColorType){case n.COLORTYPE_COLOR_ALPHA:l=i[d+3],e=i[d],t=i[d+1],r=i[d+2];break;case n.COLORTYPE_COLOR:e=i[d],t=i[d+1],r=i[d+2];break;case n.COLORTYPE_ALPHA:l=i[d+1],t=e=i[d],r=e;break;case n.COLORTYPE_GRAYSCALE:t=e=i[d],r=e;break;default:throw Error("input color type:"+a.inputColorType+" is not supported at present")}return a.inputHasAlpha&&!o&&(l/=s,e=Math.min(Math.max(Math.round((1-l)*h.red+l*e),0),s),t=Math.min(Math.max(Math.round((1-l)*h.green+l*t),0),s),r=Math.min(Math.max(Math.round((1-l)*h.blue+l*r),0),s)),{red:e,green:t,blue:r,alpha:l}}(i,d);switch(a.colorType){case n.COLORTYPE_COLOR_ALPHA:case n.COLORTYPE_COLOR:8===a.bitDepth?(c[u]=e.red,c[u+1]=e.green,c[u+2]=e.blue,o&&(c[u+3]=e.alpha)):(c.writeUInt16BE(e.red,u),c.writeUInt16BE(e.green,u+2),c.writeUInt16BE(e.blue,u+4),o&&c.writeUInt16BE(e.alpha,u+6));break;case n.COLORTYPE_ALPHA:case n.COLORTYPE_GRAYSCALE:{let t=(e.red+e.green+e.blue)/3;8===a.bitDepth?(c[u]=t,o&&(c[u+1]=e.alpha)):(c.writeUInt16BE(t,u),o&&c.writeUInt16BE(e.alpha,u+2));break}default:throw Error("unrecognised color Type "+a.colorType)}d+=l,u+=A}return c}},32506:(e,t,r)=>{"use strict";let n=r(21764),a=r(76162),o=e.exports=function(){a.call(this),this._buffers=[],this._buffered=0,this._reads=[],this._paused=!1,this._encoding="utf8",this.writable=!0};n.inherits(o,a),o.prototype.read=function(e,t){this._reads.push({length:Math.abs(e),allowLess:e<0,func:t}),process.nextTick((function(){this._process(),this._paused&&this._reads&&this._reads.length>0&&(this._paused=!1,this.emit("drain"))}).bind(this))},o.prototype.write=function(e,t){let r;return this.writable?(Buffer.isBuffer(e)?r=e:r=Buffer.from(e,t||this._encoding),this._buffers.push(r),this._buffered+=r.length,this._process(),this._reads&&0===this._reads.length&&(this._paused=!0),this.writable&&!this._paused):(this.emit("error",Error("Stream not writable")),!1)},o.prototype.end=function(e,t){e&&this.write(e,t),this.writable=!1,this._buffers&&(0===this._buffers.length?this._end():(this._buffers.push(null),this._process()))},o.prototype.destroySoon=o.prototype.end,o.prototype._end=function(){this._reads.length>0&&this.emit("error",Error("Unexpected end of input")),this.destroy()},o.prototype.destroy=function(){this._buffers&&(this.writable=!1,this._reads=null,this._buffers=null,this.emit("close"))},o.prototype._processReadAllowingLess=function(e){this._reads.shift();let t=this._buffers[0];t.length>e.length?(this._buffered-=e.length,this._buffers[0]=t.slice(e.length),e.func.call(this,t.slice(0,e.length))):(this._buffered-=t.length,this._buffers.shift(),e.func.call(this,t))},o.prototype._processRead=function(e){this._reads.shift();let t=0,r=0,n=Buffer.alloc(e.length);for(;t<e.length;){let a=this._buffers[r++],o=Math.min(a.length,e.length-t);a.copy(n,t,0,o),t+=o,o!==a.length&&(this._buffers[--r]=a.slice(o))}r>0&&this._buffers.splice(0,r),this._buffered-=e.length,e.func.call(this,n)},o.prototype._process=function(){try{for(;this._buffered>0&&this._reads&&this._reads.length>0;){let e=this._reads[0];if(e.allowLess)this._processReadAllowingLess(e);else if(this._buffered>=e.length)this._processRead(e);else break}this._buffers&&!this.writable&&this._end()}catch(e){this.emit("error",e)}}},2949:e=>{"use strict";e.exports={PNG_SIGNATURE:[137,80,78,71,13,10,26,10],TYPE_IHDR:1229472850,TYPE_IEND:1229278788,TYPE_IDAT:1229209940,TYPE_PLTE:1347179589,TYPE_tRNS:1951551059,TYPE_gAMA:1732332865,COLORTYPE_GRAYSCALE:0,COLORTYPE_PALETTE:1,COLORTYPE_COLOR:2,COLORTYPE_ALPHA:4,COLORTYPE_PALETTE_COLOR:3,COLORTYPE_COLOR_ALPHA:6,COLORTYPE_TO_BPP_MAP:{0:1,2:3,3:1,4:2,6:4},GAMMA_DIVISION:1e5}},44747:e=>{"use strict";let t=[];!function(){for(let e=0;e<256;e++){let r=e;for(let e=0;e<8;e++)1&r?r=3988292384^r>>>1:r>>>=1;t[e]=r}}();let r=e.exports=function(){this._crc=-1};r.prototype.write=function(e){for(let r=0;r<e.length;r++)this._crc=t[(this._crc^e[r])&255]^this._crc>>>8;return!0},r.prototype.crc32=function(){return -1^this._crc},r.crc32=function(e){let r=-1;for(let n=0;n<e.length;n++)r=t[(r^e[n])&255]^r>>>8;return -1^r}},84734:(e,t,r)=>{"use strict";let n=r(21008),a={0:function(e,t,r,n,a){for(let o=0;o<r;o++)n[a+o]=e[t+o]},1:function(e,t,r,n,a,o){for(let i=0;i<r;i++){let r=i>=o?e[t+i-o]:0,s=e[t+i]-r;n[a+i]=s}},2:function(e,t,r,n,a){for(let o=0;o<r;o++){let i=t>0?e[t+o-r]:0,s=e[t+o]-i;n[a+o]=s}},3:function(e,t,r,n,a,o){for(let i=0;i<r;i++){let s=i>=o?e[t+i-o]:0,l=t>0?e[t+i-r]:0,A=e[t+i]-(s+l>>1);n[a+i]=A}},4:function(e,t,r,a,o,i){for(let s=0;s<r;s++){let l=s>=i?e[t+s-i]:0,A=t>0?e[t+s-r]:0,c=t>0&&s>=i?e[t+s-(r+i)]:0,d=e[t+s]-n(l,A,c);a[o+s]=d}}},o={0:function(e,t,r){let n=0,a=t+r;for(let r=t;r<a;r++)n+=Math.abs(e[r]);return n},1:function(e,t,r,n){let a=0;for(let o=0;o<r;o++){let r=o>=n?e[t+o-n]:0;a+=Math.abs(e[t+o]-r)}return a},2:function(e,t,r){let n=0,a=t+r;for(let o=t;o<a;o++){let a=t>0?e[o-r]:0;n+=Math.abs(e[o]-a)}return n},3:function(e,t,r,n){let a=0;for(let o=0;o<r;o++){let i=o>=n?e[t+o-n]:0,s=t>0?e[t+o-r]:0;a+=Math.abs(e[t+o]-(i+s>>1))}return a},4:function(e,t,r,a){let o=0;for(let i=0;i<r;i++){let s=i>=a?e[t+i-a]:0,l=t>0?e[t+i-r]:0,A=t>0&&i>=a?e[t+i-(r+a)]:0;o+=Math.abs(e[t+i]-n(s,l,A))}return o}};e.exports=function(e,t,r,n,i){let s;if("filterType"in n&&-1!==n.filterType){if("number"==typeof n.filterType)s=[n.filterType];else throw Error("unrecognised filter types")}else s=[0,1,2,3,4];16===n.bitDepth&&(i*=2);let l=t*i,A=0,c=0,d=Buffer.alloc((l+1)*r),u=s[0];for(let t=0;t<r;t++){if(s.length>1){let t=1/0;for(let r=0;r<s.length;r++){let n=o[s[r]](e,c,l,i);n<t&&(u=s[r],t=n)}}d[A]=u,A++,a[u](e,c,l,d,A,i),A+=l,c+=l}return d}},69376:(e,t,r)=>{"use strict";let n=r(21764),a=r(32506),o=r(61569),i=e.exports=function(e){a.call(this);let t=[],r=this;this._filter=new o(e,{read:this.read.bind(this),write:function(e){t.push(e)},complete:function(){r.emit("complete",Buffer.concat(t))}}),this._filter.start()};n.inherits(i,a)},45309:(e,t,r)=>{"use strict";let n=r(83381),a=r(61569);t.process=function(e,t){let r=[],o=new n(e);return new a(t,{read:o.read.bind(o),write:function(e){r.push(e)},complete:function(){}}).start(),o.process(),Buffer.concat(r)}},61569:(e,t,r)=>{"use strict";let n=r(41289),a=r(21008);function o(e,t,r){let n=e*t;return 8!==r&&(n=Math.ceil(n/(8/r))),n}let i=e.exports=function(e,t){let r=e.width,a=e.height,i=e.interlace,s=e.bpp,l=e.depth;if(this.read=t.read,this.write=t.write,this.complete=t.complete,this._imageIndex=0,this._images=[],i){let e=n.getImagePasses(r,a);for(let t=0;t<e.length;t++)this._images.push({byteWidth:o(e[t].width,s,l),height:e[t].height,lineIndex:0})}else this._images.push({byteWidth:o(r,s,l),height:a,lineIndex:0});8===l?this._xComparison=s:16===l?this._xComparison=2*s:this._xComparison=1};i.prototype.start=function(){this.read(this._images[this._imageIndex].byteWidth+1,this._reverseFilterLine.bind(this))},i.prototype._unFilterType1=function(e,t,r){let n=this._xComparison,a=n-1;for(let o=0;o<r;o++){let r=e[1+o],i=o>a?t[o-n]:0;t[o]=r+i}},i.prototype._unFilterType2=function(e,t,r){let n=this._lastLine;for(let a=0;a<r;a++){let r=e[1+a],o=n?n[a]:0;t[a]=r+o}},i.prototype._unFilterType3=function(e,t,r){let n=this._xComparison,a=n-1,o=this._lastLine;for(let i=0;i<r;i++){let r=e[1+i],s=o?o[i]:0,l=Math.floor(((i>a?t[i-n]:0)+s)/2);t[i]=r+l}},i.prototype._unFilterType4=function(e,t,r){let n=this._xComparison,o=n-1,i=this._lastLine;for(let s=0;s<r;s++){let r=e[1+s],l=i?i[s]:0,A=a(s>o?t[s-n]:0,l,s>o&&i?i[s-n]:0);t[s]=r+A}},i.prototype._reverseFilterLine=function(e){let t,r=e[0],n=this._images[this._imageIndex],a=n.byteWidth;if(0===r)t=e.slice(1,a+1);else switch(t=Buffer.alloc(a),r){case 1:this._unFilterType1(e,t,a);break;case 2:this._unFilterType2(e,t,a);break;case 3:this._unFilterType3(e,t,a);break;case 4:this._unFilterType4(e,t,a);break;default:throw Error("Unrecognised filter type - "+r)}this.write(t),n.lineIndex++,n.lineIndex>=n.height?(this._lastLine=null,this._imageIndex++,n=this._images[this._imageIndex]):this._lastLine=t,n?this.read(n.byteWidth+1,this._reverseFilterLine.bind(this)):(this._lastLine=null,this.complete())}},99794:e=>{"use strict";e.exports=function(e,t){let r=t.depth,n=t.width,a=t.height,o=t.colorType,i=t.transColor,s=t.palette,l=e;return 3===o?function(e,t,r,n,a){let o=0;for(let i=0;i<n;i++)for(let n=0;n<r;n++){let r=a[e[o]];if(!r)throw Error("index "+e[o]+" not in palette");for(let e=0;e<4;e++)t[o+e]=r[e];o+=4}}(e,l,n,a,s):(i&&function(e,t,r,n,a){let o=0;for(let i=0;i<n;i++)for(let n=0;n<r;n++){let r=!1;if(1===a.length?a[0]===e[o]&&(r=!0):a[0]===e[o]&&a[1]===e[o+1]&&a[2]===e[o+2]&&(r=!0),r)for(let e=0;e<4;e++)t[o+e]=0;o+=4}}(e,l,n,a,i),8!==r&&(16===r&&(l=Buffer.alloc(n*a*4)),function(e,t,r,n,a){let o=Math.pow(2,a)-1,i=0;for(let a=0;a<n;a++)for(let n=0;n<r;n++){for(let r=0;r<4;r++)t[i+r]=Math.floor(255*e[i+r]/o+.5);i+=4}}(e,l,n,a,r))),l}},41289:(e,t)=>{"use strict";let r=[{x:[0],y:[0]},{x:[4],y:[0]},{x:[0,4],y:[4]},{x:[2,6],y:[0,4]},{x:[0,2,4,6],y:[2,6]},{x:[1,3,5,7],y:[0,2,4,6]},{x:[0,1,2,3,4,5,6,7],y:[1,3,5,7]}];t.getImagePasses=function(e,t){let n=[],a=e%8,o=t%8,i=(e-a)/8,s=(t-o)/8;for(let e=0;e<r.length;e++){let t=r[e],l=i*t.x.length,A=s*t.y.length;for(let e=0;e<t.x.length;e++)if(t.x[e]<a)l++;else break;for(let e=0;e<t.y.length;e++)if(t.y[e]<o)A++;else break;l>0&&A>0&&n.push({width:l,height:A,index:e})}return n},t.getInterlaceIterator=function(e){return function(t,n,a){let o=t%r[a].x.length,i=(t-o)/r[a].x.length*8+r[a].x[o],s=n%r[a].y.length;return 4*i+((n-s)/r[a].y.length*8+r[a].y[s])*e*4}}},72243:(e,t,r)=>{"use strict";let n=r(21764),a=r(76162),o=r(2949),i=r(71274),s=e.exports=function(e){a.call(this),this._packer=new i(e||{}),this._deflate=this._packer.createDeflate(),this.readable=!0};n.inherits(s,a),s.prototype.pack=function(e,t,r,n){this.emit("data",Buffer.from(o.PNG_SIGNATURE)),this.emit("data",this._packer.packIHDR(t,r)),n&&this.emit("data",this._packer.packGAMA(n));let a=this._packer.filterData(e,t,r);this._deflate.on("error",this.emit.bind(this,"error")),this._deflate.on("data",(function(e){this.emit("data",this._packer.packIDAT(e))}).bind(this)),this._deflate.on("end",(function(){this.emit("data",this._packer.packIEND()),this.emit("end")}).bind(this)),this._deflate.end(a)}},80100:(e,t,r)=>{"use strict";let n=!0,a=r(71568);a.deflateSync||(n=!1);let o=r(2949),i=r(71274);e.exports=function(e,t){if(!n)throw Error("To use the sync capability of this library in old node versions, please pin pngjs to v2.3.0");let r=new i(t||{}),s=[];s.push(Buffer.from(o.PNG_SIGNATURE)),s.push(r.packIHDR(e.width,e.height)),e.gamma&&s.push(r.packGAMA(e.gamma));let l=r.filterData(e.data,e.width,e.height),A=a.deflateSync(l,r.getDeflateOptions());if(l=null,!A||!A.length)throw Error("bad png - invalid compressed data response");return s.push(r.packIDAT(A)),s.push(r.packIEND()),Buffer.concat(s)}},71274:(e,t,r)=>{"use strict";let n=r(2949),a=r(44747),o=r(23333),i=r(84734),s=r(71568),l=e.exports=function(e){if(this._options=e,e.deflateChunkSize=e.deflateChunkSize||32768,e.deflateLevel=null!=e.deflateLevel?e.deflateLevel:9,e.deflateStrategy=null!=e.deflateStrategy?e.deflateStrategy:3,e.inputHasAlpha=null==e.inputHasAlpha||e.inputHasAlpha,e.deflateFactory=e.deflateFactory||s.createDeflate,e.bitDepth=e.bitDepth||8,e.colorType="number"==typeof e.colorType?e.colorType:n.COLORTYPE_COLOR_ALPHA,e.inputColorType="number"==typeof e.inputColorType?e.inputColorType:n.COLORTYPE_COLOR_ALPHA,-1===[n.COLORTYPE_GRAYSCALE,n.COLORTYPE_COLOR,n.COLORTYPE_COLOR_ALPHA,n.COLORTYPE_ALPHA].indexOf(e.colorType))throw Error("option color type:"+e.colorType+" is not supported at present");if(-1===[n.COLORTYPE_GRAYSCALE,n.COLORTYPE_COLOR,n.COLORTYPE_COLOR_ALPHA,n.COLORTYPE_ALPHA].indexOf(e.inputColorType))throw Error("option input color type:"+e.inputColorType+" is not supported at present");if(8!==e.bitDepth&&16!==e.bitDepth)throw Error("option bit depth:"+e.bitDepth+" is not supported at present")};l.prototype.getDeflateOptions=function(){return{chunkSize:this._options.deflateChunkSize,level:this._options.deflateLevel,strategy:this._options.deflateStrategy}},l.prototype.createDeflate=function(){return this._options.deflateFactory(this.getDeflateOptions())},l.prototype.filterData=function(e,t,r){let a=o(e,t,r,this._options),s=n.COLORTYPE_TO_BPP_MAP[this._options.colorType];return i(a,t,r,this._options,s)},l.prototype._packChunk=function(e,t){let r=t?t.length:0,n=Buffer.alloc(r+12);return n.writeUInt32BE(r,0),n.writeUInt32BE(e,4),t&&t.copy(n,8),n.writeInt32BE(a.crc32(n.slice(4,n.length-4)),n.length-4),n},l.prototype.packGAMA=function(e){let t=Buffer.alloc(4);return t.writeUInt32BE(Math.floor(e*n.GAMMA_DIVISION),0),this._packChunk(n.TYPE_gAMA,t)},l.prototype.packIHDR=function(e,t){let r=Buffer.alloc(13);return r.writeUInt32BE(e,0),r.writeUInt32BE(t,4),r[8]=this._options.bitDepth,r[9]=this._options.colorType,r[10]=0,r[11]=0,r[12]=0,this._packChunk(n.TYPE_IHDR,r)},l.prototype.packIDAT=function(e){return this._packChunk(n.TYPE_IDAT,e)},l.prototype.packIEND=function(){return this._packChunk(n.TYPE_IEND,null)}},21008:e=>{"use strict";e.exports=function(e,t,r){let n=e+t-r,a=Math.abs(n-e),o=Math.abs(n-t),i=Math.abs(n-r);return a<=o&&a<=i?e:o<=i?t:r}},2336:(e,t,r)=>{"use strict";let n=r(21764),a=r(71568),o=r(32506),i=r(69376),s=r(801),l=r(1349),A=r(99794),c=e.exports=function(e){o.call(this),this._parser=new s(e,{read:this.read.bind(this),error:this._handleError.bind(this),metadata:this._handleMetaData.bind(this),gamma:this.emit.bind(this,"gamma"),palette:this._handlePalette.bind(this),transColor:this._handleTransColor.bind(this),finished:this._finished.bind(this),inflateData:this._inflateData.bind(this),simpleTransparency:this._simpleTransparency.bind(this),headersFinished:this._headersFinished.bind(this)}),this._options=e,this.writable=!0,this._parser.start()};n.inherits(c,o),c.prototype._handleError=function(e){this.emit("error",e),this.writable=!1,this.destroy(),this._inflate&&this._inflate.destroy&&this._inflate.destroy(),this._filter&&(this._filter.destroy(),this._filter.on("error",function(){})),this.errord=!0},c.prototype._inflateData=function(e){if(!this._inflate){if(this._bitmapInfo.interlace)this._inflate=a.createInflate(),this._inflate.on("error",this.emit.bind(this,"error")),this._filter.on("complete",this._complete.bind(this)),this._inflate.pipe(this._filter);else{let e=((this._bitmapInfo.width*this._bitmapInfo.bpp*this._bitmapInfo.depth+7>>3)+1)*this._bitmapInfo.height,t=Math.max(e,a.Z_MIN_CHUNK);this._inflate=a.createInflate({chunkSize:t});let r=e,n=this.emit.bind(this,"error");this._inflate.on("error",function(e){r&&n(e)}),this._filter.on("complete",this._complete.bind(this));let o=this._filter.write.bind(this._filter);this._inflate.on("data",function(e){r&&(e.length>r&&(e=e.slice(0,r)),r-=e.length,o(e))}),this._inflate.on("end",this._filter.end.bind(this._filter))}}this._inflate.write(e)},c.prototype._handleMetaData=function(e){this._metaData=e,this._bitmapInfo=Object.create(e),this._filter=new i(this._bitmapInfo)},c.prototype._handleTransColor=function(e){this._bitmapInfo.transColor=e},c.prototype._handlePalette=function(e){this._bitmapInfo.palette=e},c.prototype._simpleTransparency=function(){this._metaData.alpha=!0},c.prototype._headersFinished=function(){this.emit("metadata",this._metaData)},c.prototype._finished=function(){this.errord||(this._inflate?this._inflate.end():this.emit("error","No Inflate block"))},c.prototype._complete=function(e){let t;if(!this.errord){try{let r=l.dataToBitMap(e,this._bitmapInfo);t=A(r,this._bitmapInfo),r=null}catch(e){this._handleError(e);return}this.emit("parsed",t)}}},50369:(e,t,r)=>{"use strict";let n=!0,a=r(71568),o=r(31102);a.deflateSync||(n=!1);let i=r(83381),s=r(45309),l=r(801),A=r(1349),c=r(99794);e.exports=function(e,t){let r,d,u,h;if(!n)throw Error("To use the sync capability of this library in old node versions, please pin pngjs to v2.3.0");let f=[],p=new i(e);if(new l(t,{read:p.read.bind(p),error:function(e){r=e},metadata:function(e){d=e},gamma:function(e){u=e},palette:function(e){d.palette=e},transColor:function(e){d.transColor=e},inflateData:function(e){f.push(e)},simpleTransparency:function(){d.alpha=!0}}).start(),p.process(),r)throw r;let m=Buffer.concat(f);if(f.length=0,d.interlace)h=a.inflateSync(m);else{let e=((d.width*d.bpp*d.depth+7>>3)+1)*d.height;h=o(m,{chunkSize:e,maxLength:e})}if(m=null,!h||!h.length)throw Error("bad png - invalid inflate data response");let g=s.process(h,d);m=null;let x=A.dataToBitMap(g,d);g=null;let b=c(x,d);return d.data=b,d.gamma=u||0,d}},801:(e,t,r)=>{"use strict";let n=r(2949),a=r(44747),o=e.exports=function(e,t){this._options=e,e.checkCRC=!1!==e.checkCRC,this._hasIHDR=!1,this._hasIEND=!1,this._emittedHeadersFinished=!1,this._palette=[],this._colorType=0,this._chunks={},this._chunks[n.TYPE_IHDR]=this._handleIHDR.bind(this),this._chunks[n.TYPE_IEND]=this._handleIEND.bind(this),this._chunks[n.TYPE_IDAT]=this._handleIDAT.bind(this),this._chunks[n.TYPE_PLTE]=this._handlePLTE.bind(this),this._chunks[n.TYPE_tRNS]=this._handleTRNS.bind(this),this._chunks[n.TYPE_gAMA]=this._handleGAMA.bind(this),this.read=t.read,this.error=t.error,this.metadata=t.metadata,this.gamma=t.gamma,this.transColor=t.transColor,this.palette=t.palette,this.parsed=t.parsed,this.inflateData=t.inflateData,this.finished=t.finished,this.simpleTransparency=t.simpleTransparency,this.headersFinished=t.headersFinished||function(){}};o.prototype.start=function(){this.read(n.PNG_SIGNATURE.length,this._parseSignature.bind(this))},o.prototype._parseSignature=function(e){let t=n.PNG_SIGNATURE;for(let r=0;r<t.length;r++)if(e[r]!==t[r]){this.error(Error("Invalid file signature"));return}this.read(8,this._parseChunkBegin.bind(this))},o.prototype._parseChunkBegin=function(e){let t=e.readUInt32BE(0),r=e.readUInt32BE(4),o="";for(let t=4;t<8;t++)o+=String.fromCharCode(e[t]);let i=!!(32&e[4]);if(!this._hasIHDR&&r!==n.TYPE_IHDR){this.error(Error("Expected IHDR on beggining"));return}if(this._crc=new a,this._crc.write(Buffer.from(o)),this._chunks[r])return this._chunks[r](t);if(!i){this.error(Error("Unsupported critical chunk type "+o));return}this.read(t+4,this._skipChunk.bind(this))},o.prototype._skipChunk=function(){this.read(8,this._parseChunkBegin.bind(this))},o.prototype._handleChunkEnd=function(){this.read(4,this._parseChunkEnd.bind(this))},o.prototype._parseChunkEnd=function(e){let t=e.readInt32BE(0),r=this._crc.crc32();if(this._options.checkCRC&&r!==t){this.error(Error("Crc error - "+t+" - "+r));return}this._hasIEND||this.read(8,this._parseChunkBegin.bind(this))},o.prototype._handleIHDR=function(e){this.read(e,this._parseIHDR.bind(this))},o.prototype._parseIHDR=function(e){this._crc.write(e);let t=e.readUInt32BE(0),r=e.readUInt32BE(4),a=e[8],o=e[9],i=e[10],s=e[11],l=e[12];if(8!==a&&4!==a&&2!==a&&1!==a&&16!==a){this.error(Error("Unsupported bit depth "+a));return}if(!(o in n.COLORTYPE_TO_BPP_MAP)){this.error(Error("Unsupported color type"));return}if(0!==i){this.error(Error("Unsupported compression method"));return}if(0!==s){this.error(Error("Unsupported filter method"));return}if(0!==l&&1!==l){this.error(Error("Unsupported interlace method"));return}this._colorType=o;let A=n.COLORTYPE_TO_BPP_MAP[this._colorType];this._hasIHDR=!0,this.metadata({width:t,height:r,depth:a,interlace:!!l,palette:!!(o&n.COLORTYPE_PALETTE),color:!!(o&n.COLORTYPE_COLOR),alpha:!!(o&n.COLORTYPE_ALPHA),bpp:A,colorType:o}),this._handleChunkEnd()},o.prototype._handlePLTE=function(e){this.read(e,this._parsePLTE.bind(this))},o.prototype._parsePLTE=function(e){this._crc.write(e);let t=Math.floor(e.length/3);for(let r=0;r<t;r++)this._palette.push([e[3*r],e[3*r+1],e[3*r+2],255]);this.palette(this._palette),this._handleChunkEnd()},o.prototype._handleTRNS=function(e){this.simpleTransparency(),this.read(e,this._parseTRNS.bind(this))},o.prototype._parseTRNS=function(e){if(this._crc.write(e),this._colorType===n.COLORTYPE_PALETTE_COLOR){if(0===this._palette.length){this.error(Error("Transparency chunk must be after palette"));return}if(e.length>this._palette.length){this.error(Error("More transparent colors than palette size"));return}for(let t=0;t<e.length;t++)this._palette[t][3]=e[t];this.palette(this._palette)}this._colorType===n.COLORTYPE_GRAYSCALE&&this.transColor([e.readUInt16BE(0)]),this._colorType===n.COLORTYPE_COLOR&&this.transColor([e.readUInt16BE(0),e.readUInt16BE(2),e.readUInt16BE(4)]),this._handleChunkEnd()},o.prototype._handleGAMA=function(e){this.read(e,this._parseGAMA.bind(this))},o.prototype._parseGAMA=function(e){this._crc.write(e),this.gamma(e.readUInt32BE(0)/n.GAMMA_DIVISION),this._handleChunkEnd()},o.prototype._handleIDAT=function(e){this._emittedHeadersFinished||(this._emittedHeadersFinished=!0,this.headersFinished()),this.read(-e,this._parseIDAT.bind(this,e))},o.prototype._parseIDAT=function(e,t){if(this._crc.write(t),this._colorType===n.COLORTYPE_PALETTE_COLOR&&0===this._palette.length)throw Error("Expected palette not found");this.inflateData(t);let r=e-t.length;r>0?this._handleIDAT(r):this._handleChunkEnd()},o.prototype._handleIEND=function(e){this.read(e,this._parseIEND.bind(this))},o.prototype._parseIEND=function(e){this._crc.write(e),this._hasIEND=!0,this._handleChunkEnd(),this.finished&&this.finished()}},20438:(e,t,r)=>{"use strict";let n=r(50369),a=r(80100);t.read=function(e,t){return n(e,t||{})},t.write=function(e,t){return a(e,t)}},81687:(e,t,r)=>{"use strict";let n=r(21764),a=r(76162),o=r(2336),i=r(72243),s=r(20438),l=t.y=function(e){a.call(this),e=e||{},this.width=0|e.width,this.height=0|e.height,this.data=this.width>0&&this.height>0?Buffer.alloc(4*this.width*this.height):null,e.fill&&this.data&&this.data.fill(0),this.gamma=0,this.readable=this.writable=!0,this._parser=new o(e),this._parser.on("error",this.emit.bind(this,"error")),this._parser.on("close",this._handleClose.bind(this)),this._parser.on("metadata",this._metadata.bind(this)),this._parser.on("gamma",this._gamma.bind(this)),this._parser.on("parsed",(function(e){this.data=e,this.emit("parsed",e)}).bind(this)),this._packer=new i(e),this._packer.on("data",this.emit.bind(this,"data")),this._packer.on("end",this.emit.bind(this,"end")),this._parser.on("close",this._handleClose.bind(this)),this._packer.on("error",this.emit.bind(this,"error"))};n.inherits(l,a),l.sync=s,l.prototype.pack=function(){return this.data&&this.data.length?process.nextTick((function(){this._packer.pack(this.data,this.width,this.height,this.gamma)}).bind(this)):this.emit("error","No data provided"),this},l.prototype.parse=function(e,t){if(t){let e,r;e=(function(e){this.removeListener("error",r),this.data=e,t(null,this)}).bind(this),r=(function(r){this.removeListener("parsed",e),t(r,null)}).bind(this),this.once("parsed",e),this.once("error",r)}return this.end(e),this},l.prototype.write=function(e){return this._parser.write(e),!0},l.prototype.end=function(e){this._parser.end(e)},l.prototype._metadata=function(e){this.width=e.width,this.height=e.height,this.emit("metadata",e)},l.prototype._gamma=function(e){this.gamma=e},l.prototype._handleClose=function(){this._parser.writable||this._packer.readable||this.emit("close")},l.bitblt=function(e,t,r,n,a,o,i,s){if(n|=0,a|=0,o|=0,i|=0,s|=0,(r|=0)>e.width||n>e.height||r+a>e.width||n+o>e.height)throw Error("bitblt reading outside image");if(i>t.width||s>t.height||i+a>t.width||s+o>t.height)throw Error("bitblt writing outside image");for(let l=0;l<o;l++)e.data.copy(t.data,(s+l)*t.width+i<<2,(n+l)*e.width+r<<2,(n+l)*e.width+r+a<<2)},l.prototype.bitblt=function(e,t,r,n,a,o,i){return l.bitblt(this,e,t,r,n,a,o,i),this},l.adjustGamma=function(e){if(e.gamma){for(let t=0;t<e.height;t++)for(let r=0;r<e.width;r++){let n=e.width*t+r<<2;for(let t=0;t<3;t++){let r=e.data[n+t]/255;r=Math.pow(r,1/2.2/e.gamma),e.data[n+t]=Math.round(255*r)}}e.gamma=0}},l.prototype.adjustGamma=function(){l.adjustGamma(this)}},31102:(e,t,r)=>{"use strict";let n=r(27790).ok,a=r(71568),o=r(21764),i=r(78893).kMaxLength;function s(e){if(!(this instanceof s))return new s(e);e&&e.chunkSize<a.Z_MIN_CHUNK&&(e.chunkSize=a.Z_MIN_CHUNK),a.Inflate.call(this,e),this._offset=void 0===this._offset?this._outOffset:this._offset,this._buffer=this._buffer||this._outBuffer,e&&null!=e.maxLength&&(this._maxLength=e.maxLength)}function l(e,t){t&&process.nextTick(t),e._handle&&(e._handle.close(),e._handle=null)}function A(e,t){return function(e,t){if("string"==typeof t&&(t=Buffer.from(t)),!(t instanceof Buffer))throw TypeError("Not a string or buffer");let r=e._finishFlushFlag;return null==r&&(r=a.Z_FINISH),e._processChunk(t,r)}(new s(t),e)}s.prototype._processChunk=function(e,t,r){let o,s;if("function"==typeof r)return a.Inflate._processChunk.call(this,e,t,r);let A=this,c=e&&e.length,d=this._chunkSize-this._offset,u=this._maxLength,h=0,f=[],p=0;this.on("error",function(e){o=e}),n(this._handle,"zlib binding closed");do s=(s=this._handle.writeSync(t,e,h,c,this._buffer,this._offset,d))||this._writeState;while(!this._hadError&&function(e,t){if(A._hadError)return;let r=d-t;if(n(r>=0,"have should not go down"),r>0){let e=A._buffer.slice(A._offset,A._offset+r);if(A._offset+=r,e.length>u&&(e=e.slice(0,u)),f.push(e),p+=e.length,0==(u-=e.length))return!1}return(0===t||A._offset>=A._chunkSize)&&(d=A._chunkSize,A._offset=0,A._buffer=Buffer.allocUnsafe(A._chunkSize)),0===t&&(h+=c-e,c=e,!0)}(s[0],s[1]));if(this._hadError)throw o;if(p>=i)throw l(this),RangeError("Cannot create final Buffer. It would be larger than 0x"+i.toString(16)+" bytes");let m=Buffer.concat(f,p);return l(this),m},o.inherits(s,a.Inflate),e.exports=t=A,t.Inflate=s,t.createInflate=function(e){return new s(e)},t.inflateSync=A},83381:e=>{"use strict";let t=e.exports=function(e){this._buffer=e,this._reads=[]};t.prototype.read=function(e,t){this._reads.push({length:Math.abs(e),allowLess:e<0,func:t})},t.prototype.process=function(){for(;this._reads.length>0&&this._buffer.length;){let e=this._reads[0];if(this._buffer.length&&(this._buffer.length>=e.length||e.allowLess)){this._reads.shift();let t=this._buffer;this._buffer=t.slice(e.length),e.func.call(this,t.slice(0,e.length))}else break}return this._reads.length>0?Error("There are some read requests waitng on finished stream"):this._buffer.length>0?Error("unrecognised content at end of stream"):void 0}},99899:(e,t,r)=>{"use strict";var n=r(56715);function a(){}function o(){}o.resetWarningCache=a,e.exports=function(){function e(e,t,r,a,o,i){if(i!==n){var s=Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var r={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:o,resetWarningCache:a};return r.PropTypes=r,r}},78439:(e,t,r)=>{e.exports=r(99899)()},56715:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},59157:(e,t,r)=>{let n=r(91817),a=r(18895),o=r(93162),i=r(975);function s(e,t,r,o,i){let s=[].slice.call(arguments,1),l=s.length,A="function"==typeof s[l-1];if(!A&&!n())throw Error("Callback required as last argument");if(A){if(l<2)throw Error("Too few arguments provided");2===l?(i=r,r=t,t=o=void 0):3===l&&(t.getContext&&void 0===i?(i=o,o=void 0):(i=o,o=r,r=t,t=void 0))}else{if(l<1)throw Error("Too few arguments provided");return 1===l?(r=t,t=o=void 0):2!==l||t.getContext||(o=r,r=t,t=void 0),new Promise(function(n,i){try{let i=a.create(r,o);n(e(i,t,o))}catch(e){i(e)}})}try{let n=a.create(r,o);i(null,e(n,t,o))}catch(e){i(e)}}a.create,t.toCanvas=s.bind(null,o.render),s.bind(null,o.renderToDataURL),s.bind(null,function(e,t,r){return i.render(e,r)})},91817:e=>{e.exports=function(){return"function"==typeof Promise&&Promise.prototype&&Promise.prototype.then}},40731:(e,t,r)=>{let n=r(2540).getSymbolSize;t.getRowColCoords=function(e){if(1===e)return[];let t=Math.floor(e/7)+2,r=n(e),a=145===r?26:2*Math.ceil((r-13)/(2*t-2)),o=[r-7];for(let e=1;e<t-1;e++)o[e]=o[e-1]-a;return o.push(6),o.reverse()},t.getPositions=function(e){let r=[],n=t.getRowColCoords(e),a=n.length;for(let e=0;e<a;e++)for(let t=0;t<a;t++)(0!==e||0!==t)&&(0!==e||t!==a-1)&&(e!==a-1||0!==t)&&r.push([n[e],n[t]]);return r}},52307:(e,t,r)=>{let n=r(97798),a=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function o(e){this.mode=n.ALPHANUMERIC,this.data=e}o.getBitsLength=function(e){return 11*Math.floor(e/2)+e%2*6},o.prototype.getLength=function(){return this.data.length},o.prototype.getBitsLength=function(){return o.getBitsLength(this.data.length)},o.prototype.write=function(e){let t;for(t=0;t+2<=this.data.length;t+=2){let r=45*a.indexOf(this.data[t]);r+=a.indexOf(this.data[t+1]),e.put(r,11)}this.data.length%2&&e.put(a.indexOf(this.data[t]),6)},e.exports=o},76730:e=>{function t(){this.buffer=[],this.length=0}t.prototype={get:function(e){let t=Math.floor(e/8);return(this.buffer[t]>>>7-e%8&1)==1},put:function(e,t){for(let r=0;r<t;r++)this.putBit((e>>>t-r-1&1)==1)},getLengthInBits:function(){return this.length},putBit:function(e){let t=Math.floor(this.length/8);this.buffer.length<=t&&this.buffer.push(0),e&&(this.buffer[t]|=128>>>this.length%8),this.length++}},e.exports=t},94638:e=>{function t(e){if(!e||e<1)throw Error("BitMatrix size must be defined and greater than 0");this.size=e,this.data=new Uint8Array(e*e),this.reservedBit=new Uint8Array(e*e)}t.prototype.set=function(e,t,r,n){let a=e*this.size+t;this.data[a]=r,n&&(this.reservedBit[a]=!0)},t.prototype.get=function(e,t){return this.data[e*this.size+t]},t.prototype.xor=function(e,t,r){this.data[e*this.size+t]^=r},t.prototype.isReserved=function(e,t){return this.reservedBit[e*this.size+t]},e.exports=t},20592:(e,t,r)=>{let n=r(97798);function a(e){this.mode=n.BYTE,"string"==typeof e?this.data=new TextEncoder().encode(e):this.data=new Uint8Array(e)}a.getBitsLength=function(e){return 8*e},a.prototype.getLength=function(){return this.data.length},a.prototype.getBitsLength=function(){return a.getBitsLength(this.data.length)},a.prototype.write=function(e){for(let t=0,r=this.data.length;t<r;t++)e.put(this.data[t],8)},e.exports=a},14134:(e,t,r)=>{let n=r(78431),a=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],o=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];t.getBlocksCount=function(e,t){switch(t){case n.L:return a[(e-1)*4+0];case n.M:return a[(e-1)*4+1];case n.Q:return a[(e-1)*4+2];case n.H:return a[(e-1)*4+3];default:return}},t.getTotalCodewordsCount=function(e,t){switch(t){case n.L:return o[(e-1)*4+0];case n.M:return o[(e-1)*4+1];case n.Q:return o[(e-1)*4+2];case n.H:return o[(e-1)*4+3];default:return}}},78431:(e,t)=>{t.L={bit:1},t.M={bit:0},t.Q={bit:3},t.H={bit:2},t.isValid=function(e){return e&&void 0!==e.bit&&e.bit>=0&&e.bit<4},t.from=function(e,r){if(t.isValid(e))return e;try{return function(e){if("string"!=typeof e)throw Error("Param is not a string");switch(e.toLowerCase()){case"l":case"low":return t.L;case"m":case"medium":return t.M;case"q":case"quartile":return t.Q;case"h":case"high":return t.H;default:throw Error("Unknown EC Level: "+e)}}(e)}catch(e){return r}}},77422:(e,t,r)=>{let n=r(2540).getSymbolSize;t.getPositions=function(e){let t=n(e);return[[0,0],[t-7,0],[0,t-7]]}},26445:(e,t,r)=>{let n=r(2540),a=n.getBCHDigit(1335);t.getEncodedBits=function(e,t){let r=e.bit<<3|t,o=r<<10;for(;n.getBCHDigit(o)-a>=0;)o^=1335<<n.getBCHDigit(o)-a;return(r<<10|o)^21522}},12959:(e,t)=>{let r=new Uint8Array(512),n=new Uint8Array(256);(function(){let e=1;for(let t=0;t<255;t++)r[t]=e,n[e]=t,256&(e<<=1)&&(e^=285);for(let e=255;e<512;e++)r[e]=r[e-255]})(),t.log=function(e){if(e<1)throw Error("log("+e+")");return n[e]},t.exp=function(e){return r[e]},t.mul=function(e,t){return 0===e||0===t?0:r[n[e]+n[t]]}},3616:(e,t,r)=>{let n=r(97798),a=r(2540);function o(e){this.mode=n.KANJI,this.data=e}o.getBitsLength=function(e){return 13*e},o.prototype.getLength=function(){return this.data.length},o.prototype.getBitsLength=function(){return o.getBitsLength(this.data.length)},o.prototype.write=function(e){let t;for(t=0;t<this.data.length;t++){let r=a.toSJIS(this.data[t]);if(r>=33088&&r<=40956)r-=33088;else if(r>=57408&&r<=60351)r-=49472;else throw Error("Invalid SJIS character: "+this.data[t]+"\nMake sure your charset is UTF-8");r=(r>>>8&255)*192+(255&r),e.put(r,13)}},e.exports=o},6754:(e,t)=>{t.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};let r={N1:3,N2:3,N3:40,N4:10};t.isValid=function(e){return null!=e&&""!==e&&!isNaN(e)&&e>=0&&e<=7},t.from=function(e){return t.isValid(e)?parseInt(e,10):void 0},t.getPenaltyN1=function(e){let t=e.size,n=0,a=0,o=0,i=null,s=null;for(let l=0;l<t;l++){a=o=0,i=s=null;for(let A=0;A<t;A++){let t=e.get(l,A);t===i?a++:(a>=5&&(n+=r.N1+(a-5)),i=t,a=1),(t=e.get(A,l))===s?o++:(o>=5&&(n+=r.N1+(o-5)),s=t,o=1)}a>=5&&(n+=r.N1+(a-5)),o>=5&&(n+=r.N1+(o-5))}return n},t.getPenaltyN2=function(e){let t=e.size,n=0;for(let r=0;r<t-1;r++)for(let a=0;a<t-1;a++){let t=e.get(r,a)+e.get(r,a+1)+e.get(r+1,a)+e.get(r+1,a+1);(4===t||0===t)&&n++}return n*r.N2},t.getPenaltyN3=function(e){let t=e.size,n=0,a=0,o=0;for(let r=0;r<t;r++){a=o=0;for(let i=0;i<t;i++)a=a<<1&2047|e.get(r,i),i>=10&&(1488===a||93===a)&&n++,o=o<<1&2047|e.get(i,r),i>=10&&(1488===o||93===o)&&n++}return n*r.N3},t.getPenaltyN4=function(e){let t=0,n=e.data.length;for(let r=0;r<n;r++)t+=e.data[r];return Math.abs(Math.ceil(100*t/n/5)-10)*r.N4},t.applyMask=function(e,r){let n=r.size;for(let a=0;a<n;a++)for(let o=0;o<n;o++)r.isReserved(o,a)||r.xor(o,a,function(e,r,n){switch(e){case t.Patterns.PATTERN000:return(r+n)%2==0;case t.Patterns.PATTERN001:return r%2==0;case t.Patterns.PATTERN010:return n%3==0;case t.Patterns.PATTERN011:return(r+n)%3==0;case t.Patterns.PATTERN100:return(Math.floor(r/2)+Math.floor(n/3))%2==0;case t.Patterns.PATTERN101:return r*n%2+r*n%3==0;case t.Patterns.PATTERN110:return(r*n%2+r*n%3)%2==0;case t.Patterns.PATTERN111:return(r*n%3+(r+n)%2)%2==0;default:throw Error("bad maskPattern:"+e)}}(e,o,a))},t.getBestMask=function(e,r){let n=Object.keys(t.Patterns).length,a=0,o=1/0;for(let i=0;i<n;i++){r(i),t.applyMask(i,e);let n=t.getPenaltyN1(e)+t.getPenaltyN2(e)+t.getPenaltyN3(e)+t.getPenaltyN4(e);t.applyMask(i,e),n<o&&(o=n,a=i)}return a}},97798:(e,t,r)=>{let n=r(18517),a=r(70232);t.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},t.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},t.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},t.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},t.MIXED={bit:-1},t.getCharCountIndicator=function(e,t){if(!e.ccBits)throw Error("Invalid mode: "+e);if(!n.isValid(t))throw Error("Invalid version: "+t);return t>=1&&t<10?e.ccBits[0]:t<27?e.ccBits[1]:e.ccBits[2]},t.getBestModeForData=function(e){return a.testNumeric(e)?t.NUMERIC:a.testAlphanumeric(e)?t.ALPHANUMERIC:a.testKanji(e)?t.KANJI:t.BYTE},t.toString=function(e){if(e&&e.id)return e.id;throw Error("Invalid mode")},t.isValid=function(e){return e&&e.bit&&e.ccBits},t.from=function(e,r){if(t.isValid(e))return e;try{return function(e){if("string"!=typeof e)throw Error("Param is not a string");switch(e.toLowerCase()){case"numeric":return t.NUMERIC;case"alphanumeric":return t.ALPHANUMERIC;case"kanji":return t.KANJI;case"byte":return t.BYTE;default:throw Error("Unknown mode: "+e)}}(e)}catch(e){return r}}},54790:(e,t,r)=>{let n=r(97798);function a(e){this.mode=n.NUMERIC,this.data=e.toString()}a.getBitsLength=function(e){return 10*Math.floor(e/3)+(e%3?e%3*3+1:0)},a.prototype.getLength=function(){return this.data.length},a.prototype.getBitsLength=function(){return a.getBitsLength(this.data.length)},a.prototype.write=function(e){let t,r;for(t=0;t+3<=this.data.length;t+=3)r=parseInt(this.data.substr(t,3),10),e.put(r,10);let n=this.data.length-t;n>0&&(r=parseInt(this.data.substr(t),10),e.put(r,3*n+1))},e.exports=a},56686:(e,t,r)=>{let n=r(12959);t.mul=function(e,t){let r=new Uint8Array(e.length+t.length-1);for(let a=0;a<e.length;a++)for(let o=0;o<t.length;o++)r[a+o]^=n.mul(e[a],t[o]);return r},t.mod=function(e,t){let r=new Uint8Array(e);for(;r.length-t.length>=0;){let e=r[0];for(let a=0;a<t.length;a++)r[a]^=n.mul(t[a],e);let a=0;for(;a<r.length&&0===r[a];)a++;r=r.slice(a)}return r},t.generateECPolynomial=function(e){let r=new Uint8Array([1]);for(let a=0;a<e;a++)r=t.mul(r,new Uint8Array([1,n.exp(a)]));return r}},18895:(e,t,r)=>{let n=r(2540),a=r(78431),o=r(76730),i=r(94638),s=r(40731),l=r(77422),A=r(6754),c=r(14134),d=r(19444),u=r(75463),h=r(26445),f=r(97798),p=r(76485);function m(e,t,r){let n,a;let o=e.size,i=h.getEncodedBits(t,r);for(n=0;n<15;n++)a=(i>>n&1)==1,n<6?e.set(n,8,a,!0):n<8?e.set(n+1,8,a,!0):e.set(o-15+n,8,a,!0),n<8?e.set(8,o-n-1,a,!0):n<9?e.set(8,15-n-1+1,a,!0):e.set(8,15-n-1,a,!0);e.set(o-8,8,1,!0)}t.create=function(e,t){let r,h;if(void 0===e||""===e)throw Error("No input text");let g=a.M;return void 0!==t&&(g=a.from(t.errorCorrectionLevel,a.M),r=u.from(t.version),h=A.from(t.maskPattern),t.toSJISFunc&&n.setToSJISFunction(t.toSJISFunc)),function(e,t,r,a){let h;if(Array.isArray(e))h=p.fromArray(e);else if("string"==typeof e){let n=t;if(!n){let t=p.rawSplit(e);n=u.getBestVersionForData(t,r)}h=p.fromString(e,n||40)}else throw Error("Invalid data");let g=u.getBestVersionForData(h,r);if(!g)throw Error("The amount of data is too big to be stored in a QR Code");if(t){if(t<g)throw Error("\nThe chosen QR Code version cannot contain this amount of data.\nMinimum version required to store current data is: "+g+".\n")}else t=g;let x=function(e,t,r){let a=new o;r.forEach(function(t){a.put(t.mode.bit,4),a.put(t.getLength(),f.getCharCountIndicator(t.mode,e)),t.write(a)});let i=(n.getSymbolTotalCodewords(e)-c.getTotalCodewordsCount(e,t))*8;for(a.getLengthInBits()+4<=i&&a.put(0,4);a.getLengthInBits()%8!=0;)a.putBit(0);let s=(i-a.getLengthInBits())/8;for(let e=0;e<s;e++)a.put(e%2?17:236,8);return function(e,t,r){let a,o;let i=n.getSymbolTotalCodewords(t),s=i-c.getTotalCodewordsCount(t,r),l=c.getBlocksCount(t,r),A=i%l,u=l-A,h=Math.floor(i/l),f=Math.floor(s/l),p=f+1,m=h-f,g=new d(m),x=0,b=Array(l),y=Array(l),v=0,w=new Uint8Array(e.buffer);for(let e=0;e<l;e++){let t=e<u?f:p;b[e]=w.slice(x,x+t),y[e]=g.encode(b[e]),x+=t,v=Math.max(v,t)}let k=new Uint8Array(i),B=0;for(a=0;a<v;a++)for(o=0;o<l;o++)a<b[o].length&&(k[B++]=b[o][a]);for(a=0;a<m;a++)for(o=0;o<l;o++)k[B++]=y[o][a];return k}(a,e,t)}(t,r,h),b=new i(n.getSymbolSize(t));return function(e,t){let r=e.size,n=l.getPositions(t);for(let t=0;t<n.length;t++){let a=n[t][0],o=n[t][1];for(let t=-1;t<=7;t++)if(!(a+t<=-1)&&!(r<=a+t))for(let n=-1;n<=7;n++)o+n<=-1||r<=o+n||(t>=0&&t<=6&&(0===n||6===n)||n>=0&&n<=6&&(0===t||6===t)||t>=2&&t<=4&&n>=2&&n<=4?e.set(a+t,o+n,!0,!0):e.set(a+t,o+n,!1,!0))}}(b,t),function(e){let t=e.size;for(let r=8;r<t-8;r++){let t=r%2==0;e.set(r,6,t,!0),e.set(6,r,t,!0)}}(b),function(e,t){let r=s.getPositions(t);for(let t=0;t<r.length;t++){let n=r[t][0],a=r[t][1];for(let t=-2;t<=2;t++)for(let r=-2;r<=2;r++)-2===t||2===t||-2===r||2===r||0===t&&0===r?e.set(n+t,a+r,!0,!0):e.set(n+t,a+r,!1,!0)}}(b,t),m(b,r,0),t>=7&&function(e,t){let r,n,a;let o=e.size,i=u.getEncodedBits(t);for(let t=0;t<18;t++)r=Math.floor(t/3),n=t%3+o-8-3,a=(i>>t&1)==1,e.set(r,n,a,!0),e.set(n,r,a,!0)}(b,t),function(e,t){let r=e.size,n=-1,a=r-1,o=7,i=0;for(let s=r-1;s>0;s-=2)for(6===s&&s--;;){for(let r=0;r<2;r++)if(!e.isReserved(a,s-r)){let n=!1;i<t.length&&(n=(t[i]>>>o&1)==1),e.set(a,s-r,n),-1==--o&&(i++,o=7)}if((a+=n)<0||r<=a){a-=n,n=-n;break}}}(b,x),isNaN(a)&&(a=A.getBestMask(b,m.bind(null,b,r))),A.applyMask(a,b),m(b,r,a),{modules:b,version:t,errorCorrectionLevel:r,maskPattern:a,segments:h}}(e,r,g,h)}},19444:(e,t,r)=>{let n=r(56686);function a(e){this.genPoly=void 0,this.degree=e,this.degree&&this.initialize(this.degree)}a.prototype.initialize=function(e){this.degree=e,this.genPoly=n.generateECPolynomial(this.degree)},a.prototype.encode=function(e){if(!this.genPoly)throw Error("Encoder not initialized");let t=new Uint8Array(e.length+this.degree);t.set(e);let r=n.mod(t,this.genPoly),a=this.degree-r.length;if(a>0){let e=new Uint8Array(this.degree);return e.set(r,a),e}return r},e.exports=a},70232:(e,t)=>{let r="[0-9]+",n="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+",a="(?:(?![A-Z0-9 $%*+\\-./:]|"+(n=n.replace(/u/g,"\\u"))+")(?:.|[\r\n]))+";t.KANJI=RegExp(n,"g"),t.BYTE_KANJI=RegExp("[^A-Z0-9 $%*+\\-./:]+","g"),t.BYTE=RegExp(a,"g"),t.NUMERIC=RegExp(r,"g"),t.ALPHANUMERIC=RegExp("[A-Z $%*+\\-./:]+","g");let o=RegExp("^"+n+"$"),i=RegExp("^"+r+"$"),s=RegExp("^[A-Z0-9 $%*+\\-./:]+$");t.testKanji=function(e){return o.test(e)},t.testNumeric=function(e){return i.test(e)},t.testAlphanumeric=function(e){return s.test(e)}},76485:(e,t,r)=>{let n=r(97798),a=r(54790),o=r(52307),i=r(20592),s=r(3616),l=r(70232),A=r(2540),c=r(24414);function d(e){return unescape(encodeURIComponent(e)).length}function u(e,t,r){let n;let a=[];for(;null!==(n=e.exec(r));)a.push({data:n[0],index:n.index,mode:t,length:n[0].length});return a}function h(e){let t,r;let a=u(l.NUMERIC,n.NUMERIC,e),o=u(l.ALPHANUMERIC,n.ALPHANUMERIC,e);return A.isKanjiModeEnabled()?(t=u(l.BYTE,n.BYTE,e),r=u(l.KANJI,n.KANJI,e)):(t=u(l.BYTE_KANJI,n.BYTE,e),r=[]),a.concat(o,t,r).sort(function(e,t){return e.index-t.index}).map(function(e){return{data:e.data,mode:e.mode,length:e.length}})}function f(e,t){switch(t){case n.NUMERIC:return a.getBitsLength(e);case n.ALPHANUMERIC:return o.getBitsLength(e);case n.KANJI:return s.getBitsLength(e);case n.BYTE:return i.getBitsLength(e)}}function p(e,t){let r;let l=n.getBestModeForData(e);if((r=n.from(t,l))!==n.BYTE&&r.bit<l.bit)throw Error('"'+e+'" cannot be encoded with mode '+n.toString(r)+".\n Suggested mode is: "+n.toString(l));switch(r!==n.KANJI||A.isKanjiModeEnabled()||(r=n.BYTE),r){case n.NUMERIC:return new a(e);case n.ALPHANUMERIC:return new o(e);case n.KANJI:return new s(e);case n.BYTE:return new i(e)}}t.fromArray=function(e){return e.reduce(function(e,t){return"string"==typeof t?e.push(p(t,null)):t.data&&e.push(p(t.data,t.mode)),e},[])},t.fromString=function(e,r){let a=function(e,t){let r={},a={start:{}},o=["start"];for(let i=0;i<e.length;i++){let s=e[i],l=[];for(let e=0;e<s.length;e++){let A=s[e],c=""+i+e;l.push(c),r[c]={node:A,lastCount:0},a[c]={};for(let e=0;e<o.length;e++){let i=o[e];r[i]&&r[i].node.mode===A.mode?(a[i][c]=f(r[i].lastCount+A.length,A.mode)-f(r[i].lastCount,A.mode),r[i].lastCount+=A.length):(r[i]&&(r[i].lastCount=A.length),a[i][c]=f(A.length,A.mode)+4+n.getCharCountIndicator(A.mode,t))}}o=l}for(let e=0;e<o.length;e++)a[o[e]].end=0;return{map:a,table:r}}(function(e){let t=[];for(let r=0;r<e.length;r++){let a=e[r];switch(a.mode){case n.NUMERIC:t.push([a,{data:a.data,mode:n.ALPHANUMERIC,length:a.length},{data:a.data,mode:n.BYTE,length:a.length}]);break;case n.ALPHANUMERIC:t.push([a,{data:a.data,mode:n.BYTE,length:a.length}]);break;case n.KANJI:t.push([a,{data:a.data,mode:n.BYTE,length:d(a.data)}]);break;case n.BYTE:t.push([{data:a.data,mode:n.BYTE,length:d(a.data)}])}}return t}(h(e,A.isKanjiModeEnabled())),r),o=c.find_path(a.map,"start","end"),i=[];for(let e=1;e<o.length-1;e++)i.push(a.table[o[e]].node);return t.fromArray(i.reduce(function(e,t){let r=e.length-1>=0?e[e.length-1]:null;return r&&r.mode===t.mode?e[e.length-1].data+=t.data:e.push(t),e},[]))},t.rawSplit=function(e){return t.fromArray(h(e,A.isKanjiModeEnabled()))}},2540:(e,t)=>{let r;let n=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];t.getSymbolSize=function(e){if(!e)throw Error('"version" cannot be null or undefined');if(e<1||e>40)throw Error('"version" should be in range from 1 to 40');return 4*e+17},t.getSymbolTotalCodewords=function(e){return n[e]},t.getBCHDigit=function(e){let t=0;for(;0!==e;)t++,e>>>=1;return t},t.setToSJISFunction=function(e){if("function"!=typeof e)throw Error('"toSJISFunc" is not a valid function.');r=e},t.isKanjiModeEnabled=function(){return void 0!==r},t.toSJIS=function(e){return r(e)}},18517:(e,t)=>{t.isValid=function(e){return!isNaN(e)&&e>=1&&e<=40}},75463:(e,t,r)=>{let n=r(2540),a=r(14134),o=r(78431),i=r(97798),s=r(18517),l=n.getBCHDigit(7973);function A(e,t){return i.getCharCountIndicator(e,t)+4}t.from=function(e,t){return s.isValid(e)?parseInt(e,10):t},t.getCapacity=function(e,t,r){if(!s.isValid(e))throw Error("Invalid QR Code version");void 0===r&&(r=i.BYTE);let o=(n.getSymbolTotalCodewords(e)-a.getTotalCodewordsCount(e,t))*8;if(r===i.MIXED)return o;let l=o-A(r,e);switch(r){case i.NUMERIC:return Math.floor(l/10*3);case i.ALPHANUMERIC:return Math.floor(l/11*2);case i.KANJI:return Math.floor(l/13);case i.BYTE:default:return Math.floor(l/8)}},t.getBestVersionForData=function(e,r){let n;let a=o.from(r,o.M);if(Array.isArray(e)){if(e.length>1)return function(e,r){for(let n=1;n<=40;n++)if(function(e,t){let r=0;return e.forEach(function(e){let n=A(e.mode,t);r+=n+e.getBitsLength()}),r}(e,n)<=t.getCapacity(n,r,i.MIXED))return n}(e,a);if(0===e.length)return 1;n=e[0]}else n=e;return function(e,r,n){for(let a=1;a<=40;a++)if(r<=t.getCapacity(a,n,e))return a}(n.mode,n.getLength(),a)},t.getEncodedBits=function(e){if(!s.isValid(e)||e<7)throw Error("Invalid QR Code version");let t=e<<12;for(;n.getBCHDigit(t)-l>=0;)t^=7973<<n.getBCHDigit(t)-l;return e<<12|t}},31270:(e,t,r)=>{"use strict";e.exports=r(5570)},93162:(e,t,r)=>{let n=r(20802);t.render=function(e,t,r){var a;let o=r,i=t;void 0!==o||t&&t.getContext||(o=t,t=void 0),t||(i=function(){try{return document.createElement("canvas")}catch(e){throw Error("You need to specify a canvas element")}}()),o=n.getOptions(o);let s=n.getImageWidth(e.modules.size,o),l=i.getContext("2d"),A=l.createImageData(s,s);return n.qrToImageData(A.data,e,o),a=i,l.clearRect(0,0,a.width,a.height),a.style||(a.style={}),a.height=s,a.width=s,a.style.height=s+"px",a.style.width=s+"px",l.putImageData(A,0,0),i},t.renderToDataURL=function(e,r,n){let a=n;void 0!==a||r&&r.getContext||(a=r,r=void 0),a||(a={});let o=t.render(e,r,a),i=a.type||"image/png",s=a.rendererOpts||{};return o.toDataURL(i,s.quality)}},8276:(e,t,r)=>{let n=r(92048),a=r(81687).y,o=r(20802);t.render=function(e,t){let r=o.getOptions(t),n=r.rendererOpts,i=o.getImageWidth(e.modules.size,r);n.width=i,n.height=i;let s=new a(n);return o.qrToImageData(s.data,e,r),s},t.renderToDataURL=function(e,r,n){void 0===n&&(n=r,r=void 0),t.renderToBuffer(e,r,function(e,t){e&&n(e);let r="data:image/png;base64,";r+=t.toString("base64"),n(null,r)})},t.renderToBuffer=function(e,r,n){void 0===n&&(n=r,r=void 0);let a=t.render(e,r),o=[];a.on("error",n),a.on("data",function(e){o.push(e)}),a.on("end",function(){n(null,Buffer.concat(o))}),a.pack()},t.renderToFile=function(e,r,a,o){void 0===o&&(o=a,a=void 0);let i=!1,s=(...e)=>{i||(i=!0,o.apply(null,e))},l=n.createWriteStream(e);l.on("error",s),l.on("close",s),t.renderToFileStream(l,r,a)},t.renderToFileStream=function(e,r,n){t.render(r,n).pack().pipe(e)}},975:(e,t,r)=>{let n=r(20802);function a(e,t){let r=e.a/255,n=t+'="'+e.hex+'"';return r<1?n+" "+t+'-opacity="'+r.toFixed(2).slice(1)+'"':n}function o(e,t,r){let n=e+t;return void 0!==r&&(n+=" "+r),n}t.render=function(e,t,r){let i=n.getOptions(t),s=e.modules.size,l=e.modules.data,A=s+2*i.margin,c=i.color.light.a?"<path "+a(i.color.light,"fill")+' d="M0 0h'+A+"v"+A+'H0z"/>':"",d="<path "+a(i.color.dark,"stroke")+' d="'+function(e,t,r){let n="",a=0,i=!1,s=0;for(let l=0;l<e.length;l++){let A=Math.floor(l%t),c=Math.floor(l/t);A||i||(i=!0),e[l]?(s++,l>0&&A>0&&e[l-1]||(n+=i?o("M",A+r,.5+c+r):o("m",a,0),a=0,i=!1),A+1<t&&e[l+1]||(n+=o("h",s),s=0)):a++}return n}(l,s,i.margin)+'"/>',u='<svg xmlns="http://www.w3.org/2000/svg" '+(i.width?'width="'+i.width+'" height="'+i.width+'" ':"")+('viewBox="0 0 '+A)+" "+A+'" shape-rendering="crispEdges">'+c+d+"</svg>\n";return"function"==typeof r&&r(null,u),u}},47979:(e,t,r)=>{let n=r(975);t.render=n.render,t.renderToFile=function(e,n,a,o){void 0===o&&(o=a,a=void 0);let i=r(92048),s=t.render(n,a);i.writeFile(e,'<?xml version="1.0" encoding="utf-8"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">'+s,o)}},73678:(e,t,r)=>{let n=r(28821),a=r(53853);t.render=function(e,t,r){return t&&t.small?a.render(e,t,r):n.render(e,t,r)}},53853:(e,t)=>{let r="\x1b[37m",n="\x1b[30m",a="\x1b[0m",o="\x1b[47m"+n,i="\x1b[40m"+r,s=function(e,t,r,n){let a=t+1;return r>=a||n>=a||n<-1||r<-1?"0":r>=t||n>=t||n<0||r<0?"1":e[n*t+r]?"2":"1"},l=function(e,t,r,n){return s(e,t,r,n)+s(e,t,r,n+1)};t.render=function(e,t,s){var A,c;let d=e.modules.size,u=e.modules.data,h=!!(t&&t.inverse),f=t&&t.inverse?i:o,p={"00":a+" "+f,"01":a+(A=h?n:r)+""+f,"02":a+(c=h?r:n)+""+f,10:a+A+""+f,11:" ",12:"",20:a+c+""+f,21:"",22:""},m=a+"\n"+f,g=f;for(let e=-1;e<d+1;e+=2){for(let t=-1;t<d;t++)g+=p[l(u,d,t,e)];g+=p[l(u,d,d,e)]+m}return g+=a,"function"==typeof s&&s(null,g),g}},28821:(e,t)=>{t.render=function(e,t,r){let n=e.modules.size,a=e.modules.data,o="\x1b[47m  \x1b[0m",i="",s=Array(n+3).join(o),l=[,,].join(o);i+=s+"\n";for(let e=0;e<n;++e){i+=o;for(let t=0;t<n;t++)i+=a[e*n+t]?"\x1b[40m  \x1b[0m":o;i+=l+"\n"}return i+=s+"\n","function"==typeof r&&r(null,i),i}},86318:(e,t,r)=>{let n=r(20802),a={WW:" ",WB:"",BB:"",BW:""},o={BB:" ",BW:"",WW:"",WB:""};t.render=function(e,t,r){let i=n.getOptions(t),s=a;("#ffffff"===i.color.dark.hex||"#000000"===i.color.light.hex)&&(s=o);let l=e.modules.size,A=e.modules.data,c="",d=Array(l+2*i.margin+1).join(s.WW);d=Array(i.margin/2+1).join(d+"\n");let u=Array(i.margin+1).join(s.WW);c+=d;for(let e=0;e<l;e+=2){c+=u;for(let t=0;t<l;t++){var h;let r=A[e*l+t],n=A[(e+1)*l+t];c+=(h=s,r&&n?h.BB:r&&!n?h.BW:!r&&n?h.WB:h.WW)}c+=u+"\n"}return c+=d.slice(0,-1),"function"==typeof r&&r(null,c),c},t.renderToFile=function(e,n,a,o){void 0===o&&(o=a,a=void 0);let i=r(92048),s=t.render(n,a);i.writeFile(e,s,o)}},20802:(e,t)=>{function r(e){if("number"==typeof e&&(e=e.toString()),"string"!=typeof e)throw Error("Color should be defined as hex string");let t=e.slice().replace("#","").split("");if(t.length<3||5===t.length||t.length>8)throw Error("Invalid hex color: "+e);(3===t.length||4===t.length)&&(t=Array.prototype.concat.apply([],t.map(function(e){return[e,e]}))),6===t.length&&t.push("F","F");let r=parseInt(t.join(""),16);return{r:r>>24&255,g:r>>16&255,b:r>>8&255,a:255&r,hex:"#"+t.slice(0,6).join("")}}t.getOptions=function(e){e||(e={}),e.color||(e.color={});let t=void 0===e.margin||null===e.margin||e.margin<0?4:e.margin,n=e.width&&e.width>=21?e.width:void 0,a=e.scale||4;return{width:n,scale:n?4:a,margin:t,color:{dark:r(e.color.dark||"#000000ff"),light:r(e.color.light||"#ffffffff")},type:e.type,rendererOpts:e.rendererOpts||{}}},t.getScale=function(e,t){return t.width&&t.width>=e+2*t.margin?t.width/(e+2*t.margin):t.scale},t.getImageWidth=function(e,r){let n=t.getScale(e,r);return Math.floor((e+2*r.margin)*n)},t.qrToImageData=function(e,r,n){let a=r.modules.size,o=r.modules.data,i=t.getScale(a,n),s=Math.floor((a+2*n.margin)*i),l=n.margin*i,A=[n.color.light,n.color.dark];for(let t=0;t<s;t++)for(let r=0;r<s;r++){let c=(t*s+r)*4,d=n.color.light;t>=l&&r>=l&&t<s-l&&r<s-l&&(d=A[o[Math.floor((t-l)/i)*a+Math.floor((r-l)/i)]?1:0]),e[c++]=d.r,e[c++]=d.g,e[c++]=d.b,e[c]=d.a}}},5570:(e,t,r)=>{let n=r(91817),a=r(18895),o=r(8276),i=r(86318),s=r(73678),l=r(47979);function A(e,t,r){if(void 0===e)throw Error("String required as first argument");if(void 0===r&&(r=t,t={}),"function"!=typeof r){if(n())t=r||{},r=null;else throw Error("Callback required as last argument")}return{opts:t,cb:r}}function c(e){switch(e){case"svg":return l;case"txt":case"utf8":return i;default:return o}}function d(e,t,r){if(!r.cb)return new Promise(function(n,o){try{let i=a.create(t,r.opts);return e(i,r.opts,function(e,t){return e?o(e):n(t)})}catch(e){o(e)}});try{let n=a.create(t,r.opts);return e(n,r.opts,r.cb)}catch(e){r.cb(e)}}t.create=a.create,t.toCanvas=r(59157).toCanvas,t.toString=function(e,t,r){let n=A(e,t,r);return d(function(e){switch(e){case"svg":return l;case"terminal":return s;default:return i}}(n.opts?n.opts.type:void 0).render,e,n)},t.toDataURL=function(e,t,r){let n=A(e,t,r);return d(c(n.opts.type).renderToDataURL,e,n)},t.toBuffer=function(e,t,r){let n=A(e,t,r);return d(c(n.opts.type).renderToBuffer,e,n)},t.toFile=function(e,t,r,a){if("string"!=typeof e||!("string"==typeof t||"object"==typeof t))throw Error("Invalid argument");if(arguments.length<3&&!n())throw Error("Too few arguments provided");let o=A(t,r,a);return d(c(o.opts.type||e.slice((e.lastIndexOf(".")-1>>>0)+2).toLowerCase()).renderToFile.bind(null,e),t,o)},t.toFileStream=function(e,t,r){if(arguments.length<2)throw Error("Too few arguments provided");let n=A(t,r,e.emit.bind(e,"error"));d(c("png").renderToFileStream.bind(null,e),t,n)}},20745:(e,t)=>{"use strict";var r=Symbol.for("react.element"),n=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),l=Symbol.for("react.context"),A=Symbol.for("react.server_context"),c=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),u=Symbol.for("react.suspense_list"),h=Symbol.for("react.memo"),f=Symbol.for("react.lazy");Symbol.for("react.offscreen"),Symbol.for("react.module.reference"),t.isFragment=function(e){return function(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case a:case i:case o:case d:case u:return e;default:switch(e=e&&e.$$typeof){case A:case l:case c:case f:case h:case s:return e;default:return t}}case n:return t}}}(e)===a}},16777:(e,t,r)=>{"use strict";e.exports=r(20745)},11506:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>o,metadata:()=>a});var n=r(19510);r(71159),r(94025);let a={title:"Banduka POS - Point of Sale",description:"A responsive, offline-capable, web-based Point of Sale (POS) system designed for Kenyan retail and wholesale businesses."};function o({children:e}){return(0,n.jsxs)("html",{lang:"en",suppressHydrationWarning:!0,children:[(0,n.jsxs)("head",{children:[n.jsx("link",{rel:"icon",type:"image/png",href:"/icons/icon-72x72.png"}),n.jsx("link",{rel:"manifest",href:"/manifest.json"}),n.jsx("meta",{name:"theme-color",content:"#0D3B66"})]}),n.jsx("body",{className:"bg-white dark:bg-slate-900 antialiased overflow-hidden",children:e})]})}},90908:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>n});let n=(0,r(68570).createProxy)(String.raw`/home/elb/Downloads/banduka-pos/app/page.tsx#default`)},94025:()=>{},12054:e=>{function t(r){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(r)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}};var t=require("../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),n=t.X(0,[819],()=>r(52274));module.exports=n})();